function FH(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in n)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();function Do(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function lD(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function i(){var r=!1;try{r=this instanceof i}catch{}return r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var r=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,r.get?r:{enumerable:!0,get:function(){return n[i]}})}),t}var UM={exports:{}},by={};var bP;function BH(){if(bP)return by;bP=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,r,s){var o=null;if(s!==void 0&&(o=""+s),r.key!==void 0&&(o=""+r.key),"key"in r){s={};for(var a in r)a!=="key"&&(s[a]=r[a])}else s=r;return r=s.ref,{$$typeof:n,type:i,key:o,ref:r!==void 0?r:null,props:s}}return by.Fragment=e,by.jsx=t,by.jsxs=t,by}var _P;function VH(){return _P||(_P=1,UM.exports=BH()),UM.exports}var ue=VH(),kM={exports:{}},ln={};var xP;function GH(){if(xP)return ln;xP=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),m=Symbol.iterator;function y(V){return V===null||typeof V!="object"?null:(V=m&&V[m]||V["@@iterator"],typeof V=="function"?V:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,S={};function _(V,Y,Q){this.props=V,this.context=Y,this.refs=S,this.updater=Q||b}_.prototype.isReactComponent={},_.prototype.setState=function(V,Y){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,Y,"setState")},_.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function T(){}T.prototype=_.prototype;function A(V,Y,Q){this.props=V,this.context=Y,this.refs=S,this.updater=Q||b}var M=A.prototype=new T;M.constructor=A,x(M,_.prototype),M.isPureReactComponent=!0;var C=Array.isArray;function R(){}var L={H:null,A:null,T:null,S:null},I=Object.prototype.hasOwnProperty;function P(V,Y,Q){var re=Q.ref;return{$$typeof:n,type:V,key:Y,ref:re!==void 0?re:null,props:Q}}function U(V,Y){return P(V.type,Y,V.props)}function B(V){return typeof V=="object"&&V!==null&&V.$$typeof===n}function F(V){var Y={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(Q){return Y[Q]})}var z=/\/+/g;function W(V,Y){return typeof V=="object"&&V!==null&&V.key!=null?F(""+V.key):Y.toString(36)}function X(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(R,R):(V.status="pending",V.then(function(Y){V.status==="pending"&&(V.status="fulfilled",V.value=Y)},function(Y){V.status==="pending"&&(V.status="rejected",V.reason=Y)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function j(V,Y,Q,re,ne){var le=typeof V;(le==="undefined"||le==="boolean")&&(V=null);var fe=!1;if(V===null)fe=!0;else switch(le){case"bigint":case"string":case"number":fe=!0;break;case"object":switch(V.$$typeof){case n:case e:fe=!0;break;case h:return fe=V._init,j(fe(V._payload),Y,Q,re,ne)}}if(fe)return ne=ne(V),fe=re===""?"."+W(V,0):re,C(ne)?(Q="",fe!=null&&(Q=fe.replace(z,"$&/")+"/"),j(ne,Y,Q,"",function(Te){return Te})):ne!=null&&(B(ne)&&(ne=U(ne,Q+(ne.key==null||V&&V.key===ne.key?"":(""+ne.key).replace(z,"$&/")+"/")+fe)),Y.push(ne)),1;fe=0;var pe=re===""?".":re+":";if(C(V))for(var Ee=0;Ee<V.length;Ee++)re=V[Ee],le=pe+W(re,Ee),fe+=j(re,Y,Q,le,ne);else if(Ee=y(V),typeof Ee=="function")for(V=Ee.call(V),Ee=0;!(re=V.next()).done;)re=re.value,le=pe+W(re,Ee++),fe+=j(re,Y,Q,le,ne);else if(le==="object"){if(typeof V.then=="function")return j(X(V),Y,Q,re,ne);throw Y=String(V),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.")}return fe}function G(V,Y,Q){if(V==null)return V;var re=[],ne=0;return j(V,re,"","",function(le){return Y.call(Q,le,ne++)}),re}function K(V){if(V._status===-1){var Y=V._result;Y=Y(),Y.then(function(Q){(V._status===0||V._status===-1)&&(V._status=1,V._result=Q)},function(Q){(V._status===0||V._status===-1)&&(V._status=2,V._result=Q)}),V._status===-1&&(V._status=0,V._result=Y)}if(V._status===1)return V._result.default;throw V._result}var J=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(Y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)},ee={map:G,forEach:function(V,Y,Q){G(V,function(){Y.apply(this,arguments)},Q)},count:function(V){var Y=0;return G(V,function(){Y++}),Y},toArray:function(V){return G(V,function(Y){return Y})||[]},only:function(V){if(!B(V))throw Error("React.Children.only expected to receive a single React element child.");return V}};return ln.Activity=p,ln.Children=ee,ln.Component=_,ln.Fragment=t,ln.Profiler=r,ln.PureComponent=A,ln.StrictMode=i,ln.Suspense=l,ln.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=L,ln.__COMPILER_RUNTIME={__proto__:null,c:function(V){return L.H.useMemoCache(V)}},ln.cache=function(V){return function(){return V.apply(null,arguments)}},ln.cacheSignal=function(){return null},ln.cloneElement=function(V,Y,Q){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var re=x({},V.props),ne=V.key;if(Y!=null)for(le in Y.key!==void 0&&(ne=""+Y.key),Y)!I.call(Y,le)||le==="key"||le==="__self"||le==="__source"||le==="ref"&&Y.ref===void 0||(re[le]=Y[le]);var le=arguments.length-2;if(le===1)re.children=Q;else if(1<le){for(var fe=Array(le),pe=0;pe<le;pe++)fe[pe]=arguments[pe+2];re.children=fe}return P(V.type,ne,re)},ln.createContext=function(V){return V={$$typeof:o,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:s,_context:V},V},ln.createElement=function(V,Y,Q){var re,ne={},le=null;if(Y!=null)for(re in Y.key!==void 0&&(le=""+Y.key),Y)I.call(Y,re)&&re!=="key"&&re!=="__self"&&re!=="__source"&&(ne[re]=Y[re]);var fe=arguments.length-2;if(fe===1)ne.children=Q;else if(1<fe){for(var pe=Array(fe),Ee=0;Ee<fe;Ee++)pe[Ee]=arguments[Ee+2];ne.children=pe}if(V&&V.defaultProps)for(re in fe=V.defaultProps,fe)ne[re]===void 0&&(ne[re]=fe[re]);return P(V,le,ne)},ln.createRef=function(){return{current:null}},ln.forwardRef=function(V){return{$$typeof:a,render:V}},ln.isValidElement=B,ln.lazy=function(V){return{$$typeof:h,_payload:{_status:-1,_result:V},_init:K}},ln.memo=function(V,Y){return{$$typeof:u,type:V,compare:Y===void 0?null:Y}},ln.startTransition=function(V){var Y=L.T,Q={};L.T=Q;try{var re=V(),ne=L.S;ne!==null&&ne(Q,re),typeof re=="object"&&re!==null&&typeof re.then=="function"&&re.then(R,J)}catch(le){J(le)}finally{Y!==null&&Q.types!==null&&(Y.types=Q.types),L.T=Y}},ln.unstable_useCacheRefresh=function(){return L.H.useCacheRefresh()},ln.use=function(V){return L.H.use(V)},ln.useActionState=function(V,Y,Q){return L.H.useActionState(V,Y,Q)},ln.useCallback=function(V,Y){return L.H.useCallback(V,Y)},ln.useContext=function(V){return L.H.useContext(V)},ln.useDebugValue=function(){},ln.useDeferredValue=function(V,Y){return L.H.useDeferredValue(V,Y)},ln.useEffect=function(V,Y){return L.H.useEffect(V,Y)},ln.useEffectEvent=function(V){return L.H.useEffectEvent(V)},ln.useId=function(){return L.H.useId()},ln.useImperativeHandle=function(V,Y,Q){return L.H.useImperativeHandle(V,Y,Q)},ln.useInsertionEffect=function(V,Y){return L.H.useInsertionEffect(V,Y)},ln.useLayoutEffect=function(V,Y){return L.H.useLayoutEffect(V,Y)},ln.useMemo=function(V,Y){return L.H.useMemo(V,Y)},ln.useOptimistic=function(V,Y){return L.H.useOptimistic(V,Y)},ln.useReducer=function(V,Y,Q){return L.H.useReducer(V,Y,Q)},ln.useRef=function(V){return L.H.useRef(V)},ln.useState=function(V){return L.H.useState(V)},ln.useSyncExternalStore=function(V,Y,Q){return L.H.useSyncExternalStore(V,Y,Q)},ln.useTransition=function(){return L.H.useTransition()},ln.version="19.2.4",ln}var SP;function Gf(){return SP||(SP=1,kM.exports=GH()),kM.exports}var q=Gf();const Rs=Do(q),HH=FH({__proto__:null,default:Rs},[q]);var zM={exports:{}},_y={},FM={exports:{}},BM={};var wP;function jH(){return wP||(wP=1,(function(n){function e(j,G){var K=j.length;j.push(G);e:for(;0<K;){var J=K-1>>>1,ee=j[J];if(0<r(ee,G))j[J]=G,j[K]=ee,K=J;else break e}}function t(j){return j.length===0?null:j[0]}function i(j){if(j.length===0)return null;var G=j[0],K=j.pop();if(K!==G){j[0]=K;e:for(var J=0,ee=j.length,V=ee>>>1;J<V;){var Y=2*(J+1)-1,Q=j[Y],re=Y+1,ne=j[re];if(0>r(Q,K))re<ee&&0>r(ne,Q)?(j[J]=ne,j[re]=K,J=re):(j[J]=Q,j[Y]=K,J=Y);else if(re<ee&&0>r(ne,K))j[J]=ne,j[re]=K,J=re;else break e}}return G}function r(j,G){var K=j.sortIndex-G.sortIndex;return K!==0?K:j.id-G.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],u=[],h=1,p=null,m=3,y=!1,b=!1,x=!1,S=!1,_=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;function M(j){for(var G=t(u);G!==null;){if(G.callback===null)i(u);else if(G.startTime<=j)i(u),G.sortIndex=G.expirationTime,e(l,G);else break;G=t(u)}}function C(j){if(x=!1,M(j),!b)if(t(l)!==null)b=!0,R||(R=!0,F());else{var G=t(u);G!==null&&X(C,G.startTime-j)}}var R=!1,L=-1,I=5,P=-1;function U(){return S?!0:!(n.unstable_now()-P<I)}function B(){if(S=!1,R){var j=n.unstable_now();P=j;var G=!0;try{e:{b=!1,x&&(x=!1,T(L),L=-1),y=!0;var K=m;try{t:{for(M(j),p=t(l);p!==null&&!(p.expirationTime>j&&U());){var J=p.callback;if(typeof J=="function"){p.callback=null,m=p.priorityLevel;var ee=J(p.expirationTime<=j);if(j=n.unstable_now(),typeof ee=="function"){p.callback=ee,M(j),G=!0;break t}p===t(l)&&i(l),M(j)}else i(l);p=t(l)}if(p!==null)G=!0;else{var V=t(u);V!==null&&X(C,V.startTime-j),G=!1}}break e}finally{p=null,m=K,y=!1}G=void 0}}finally{G?F():R=!1}}}var F;if(typeof A=="function")F=function(){A(B)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,W=z.port2;z.port1.onmessage=B,F=function(){W.postMessage(null)}}else F=function(){_(B,0)};function X(j,G){L=_(function(){j(n.unstable_now())},G)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(j){j.callback=null},n.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<j?Math.floor(1e3/j):5},n.unstable_getCurrentPriorityLevel=function(){return m},n.unstable_next=function(j){switch(m){case 1:case 2:case 3:var G=3;break;default:G=m}var K=m;m=G;try{return j()}finally{m=K}},n.unstable_requestPaint=function(){S=!0},n.unstable_runWithPriority=function(j,G){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var K=m;m=j;try{return G()}finally{m=K}},n.unstable_scheduleCallback=function(j,G,K){var J=n.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?J+K:J):K=J,j){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=K+ee,j={id:h++,callback:G,priorityLevel:j,startTime:K,expirationTime:ee,sortIndex:-1},K>J?(j.sortIndex=K,e(u,j),t(l)===null&&j===t(u)&&(x?(T(L),L=-1):x=!0,X(C,K-J))):(j.sortIndex=ee,e(l,j),b||y||(b=!0,R||(R=!0,F()))),j},n.unstable_shouldYield=U,n.unstable_wrapCallback=function(j){var G=m;return function(){var K=m;m=G;try{return j.apply(this,arguments)}finally{m=K}}}})(BM)),BM}var EP;function M4(){return EP||(EP=1,FM.exports=jH()),FM.exports}var VM={exports:{}},Xs={};var TP;function WH(){if(TP)return Xs;TP=1;var n=Gf();function e(l){var u="https://react.dev/errors/"+l;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)u+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function s(l,u,h){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:p==null?null:""+p,children:l,containerInfo:u,implementation:h}}var o=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function a(l,u){if(l==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return Xs.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Xs.createPortal=function(l,u){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(e(299));return s(l,u,null,h)},Xs.flushSync=function(l){var u=o.T,h=i.p;try{if(o.T=null,i.p=2,l)return l()}finally{o.T=u,i.p=h,i.d.f()}},Xs.preconnect=function(l,u){typeof l=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,i.d.C(l,u))},Xs.prefetchDNS=function(l){typeof l=="string"&&i.d.D(l)},Xs.preinit=function(l,u){if(typeof l=="string"&&u&&typeof u.as=="string"){var h=u.as,p=a(h,u.crossOrigin),m=typeof u.integrity=="string"?u.integrity:void 0,y=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;h==="style"?i.d.S(l,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:p,integrity:m,fetchPriority:y}):h==="script"&&i.d.X(l,{crossOrigin:p,integrity:m,fetchPriority:y,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},Xs.preinitModule=function(l,u){if(typeof l=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var h=a(u.as,u.crossOrigin);i.d.M(l,{crossOrigin:h,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&i.d.M(l)},Xs.preload=function(l,u){if(typeof l=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var h=u.as,p=a(h,u.crossOrigin);i.d.L(l,h,{crossOrigin:p,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},Xs.preloadModule=function(l,u){if(typeof l=="string")if(u){var h=a(u.as,u.crossOrigin);i.d.m(l,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:h,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else i.d.m(l)},Xs.requestFormReset=function(l){i.d.r(l)},Xs.unstable_batchedUpdates=function(l,u){return l(u)},Xs.useFormState=function(l,u,h){return o.H.useFormState(l,u,h)},Xs.useFormStatus=function(){return o.H.useHostTransitionStatus()},Xs.version="19.2.4",Xs}var MP;function A4(){if(MP)return VM.exports;MP=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),VM.exports=WH(),VM.exports}var AP;function XH(){if(AP)return _y;AP=1;var n=M4(),e=Gf(),t=A4();function i(c){var f="https://react.dev/errors/"+c;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)f+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+c+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)}function s(c){var f=c,v=c;if(c.alternate)for(;f.return;)f=f.return;else{c=f;do f=c,(f.flags&4098)!==0&&(v=f.return),c=f.return;while(c)}return f.tag===3?v:null}function o(c){if(c.tag===13){var f=c.memoizedState;if(f===null&&(c=c.alternate,c!==null&&(f=c.memoizedState)),f!==null)return f.dehydrated}return null}function a(c){if(c.tag===31){var f=c.memoizedState;if(f===null&&(c=c.alternate,c!==null&&(f=c.memoizedState)),f!==null)return f.dehydrated}return null}function l(c){if(s(c)!==c)throw Error(i(188))}function u(c){var f=c.alternate;if(!f){if(f=s(c),f===null)throw Error(i(188));return f!==c?null:c}for(var v=c,w=f;;){var O=v.return;if(O===null)break;var N=O.alternate;if(N===null){if(w=O.return,w!==null){v=w;continue}break}if(O.child===N.child){for(N=O.child;N;){if(N===v)return l(O),c;if(N===w)return l(O),f;N=N.sibling}throw Error(i(188))}if(v.return!==w.return)v=O,w=N;else{for(var $=!1,se=O.child;se;){if(se===v){$=!0,v=O,w=N;break}if(se===w){$=!0,w=O,v=N;break}se=se.sibling}if(!$){for(se=N.child;se;){if(se===v){$=!0,v=N,w=O;break}if(se===w){$=!0,w=N,v=O;break}se=se.sibling}if(!$)throw Error(i(189))}}if(v.alternate!==w)throw Error(i(190))}if(v.tag!==3)throw Error(i(188));return v.stateNode.current===v?c:f}function h(c){var f=c.tag;if(f===5||f===26||f===27||f===6)return c;for(c=c.child;c!==null;){if(f=h(c),f!==null)return f;c=c.sibling}return null}var p=Object.assign,m=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),T=Symbol.for("react.consumer"),A=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),P=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),B=Symbol.iterator;function F(c){return c===null||typeof c!="object"?null:(c=B&&c[B]||c["@@iterator"],typeof c=="function"?c:null)}var z=Symbol.for("react.client.reference");function W(c){if(c==null)return null;if(typeof c=="function")return c.$$typeof===z?null:c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case x:return"Fragment";case _:return"Profiler";case S:return"StrictMode";case C:return"Suspense";case R:return"SuspenseList";case P:return"Activity"}if(typeof c=="object")switch(c.$$typeof){case b:return"Portal";case A:return c.displayName||"Context";case T:return(c._context.displayName||"Context")+".Consumer";case M:var f=c.render;return c=c.displayName,c||(c=f.displayName||f.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case L:return f=c.displayName||null,f!==null?f:W(c.type)||"Memo";case I:f=c._payload,c=c._init;try{return W(c(f))}catch{}}return null}var X=Array.isArray,j=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K={pending:!1,data:null,method:null,action:null},J=[],ee=-1;function V(c){return{current:c}}function Y(c){0>ee||(c.current=J[ee],J[ee]=null,ee--)}function Q(c,f){ee++,J[ee]=c.current,c.current=f}var re=V(null),ne=V(null),le=V(null),fe=V(null);function pe(c,f){switch(Q(le,f),Q(ne,c),Q(re,null),f.nodeType){case 9:case 11:c=(c=f.documentElement)&&(c=c.namespaceURI)?GL(c):0;break;default:if(c=f.tagName,f=f.namespaceURI)f=GL(f),c=HL(f,c);else switch(c){case"svg":c=1;break;case"math":c=2;break;default:c=0}}Y(re),Q(re,c)}function Ee(){Y(re),Y(ne),Y(le)}function Te(c){c.memoizedState!==null&&Q(fe,c);var f=re.current,v=HL(f,c.type);f!==v&&(Q(ne,c),Q(re,v))}function xe(c){ne.current===c&&(Y(re),Y(ne)),fe.current===c&&(Y(fe),my._currentValue=K)}var ge,oe;function me(c){if(ge===void 0)try{throw Error()}catch(v){var f=v.stack.trim().match(/\n( *(at )?)/);ge=f&&f[1]||"",oe=-1<v.stack.indexOf(`
    at`)?" (<anonymous>)":-1<v.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ge+c+oe}var ve=!1;function he(c,f){if(!c||ve)return"";ve=!0;var v=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var w={DetermineComponentFrameRoot:function(){try{if(f){var at=function(){throw Error()};if(Object.defineProperty(at.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(at,[])}catch($e){var Ge=$e}Reflect.construct(c,[],at)}else{try{at.call()}catch($e){Ge=$e}c.call(at.prototype)}}else{try{throw Error()}catch($e){Ge=$e}(at=c())&&typeof at.catch=="function"&&at.catch(function(){})}}catch($e){if($e&&Ge&&typeof $e.stack=="string")return[$e.stack,Ge.stack]}return[null,null]}};w.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var O=Object.getOwnPropertyDescriptor(w.DetermineComponentFrameRoot,"name");O&&O.configurable&&Object.defineProperty(w.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var N=w.DetermineComponentFrameRoot(),$=N[0],se=N[1];if($&&se){var _e=$.split(`
`),ze=se.split(`
`);for(O=w=0;w<_e.length&&!_e[w].includes("DetermineComponentFrameRoot");)w++;for(;O<ze.length&&!ze[O].includes("DetermineComponentFrameRoot");)O++;if(w===_e.length||O===ze.length)for(w=_e.length-1,O=ze.length-1;1<=w&&0<=O&&_e[w]!==ze[O];)O--;for(;1<=w&&0<=O;w--,O--)if(_e[w]!==ze[O]){if(w!==1||O!==1)do if(w--,O--,0>O||_e[w]!==ze[O]){var tt=`
`+_e[w].replace(" at new "," at ");return c.displayName&&tt.includes("<anonymous>")&&(tt=tt.replace("<anonymous>",c.displayName)),tt}while(1<=w&&0<=O);break}}}finally{ve=!1,Error.prepareStackTrace=v}return(v=c?c.displayName||c.name:"")?me(v):""}function Ce(c,f){switch(c.tag){case 26:case 27:case 5:return me(c.type);case 16:return me("Lazy");case 13:return c.child!==f&&f!==null?me("Suspense Fallback"):me("Suspense");case 19:return me("SuspenseList");case 0:case 15:return he(c.type,!1);case 11:return he(c.type.render,!1);case 1:return he(c.type,!0);case 31:return me("Activity");default:return""}}function Re(c){try{var f="",v=null;do f+=Ce(c,v),v=c,c=c.return;while(c);return f}catch(w){return`
Error generating stack: `+w.message+`
`+w.stack}}var Le=Object.prototype.hasOwnProperty,Ie=n.unstable_scheduleCallback,be=n.unstable_cancelCallback,Je=n.unstable_shouldYield,te=n.unstable_requestPaint,Z=n.unstable_now,de=n.unstable_getCurrentPriorityLevel,Ne=n.unstable_ImmediatePriority,Oe=n.unstable_UserBlockingPriority,Ae=n.unstable_NormalPriority,et=n.unstable_LowPriority,Ze=n.unstable_IdlePriority,ft=n.log,dt=n.unstable_setDisableYieldValue,Xe=null,Ke=null;function nt(c){if(typeof ft=="function"&&dt(c),Ke&&typeof Ke.setStrictMode=="function")try{Ke.setStrictMode(Xe,c)}catch{}}var ct=Math.clz32?Math.clz32:Se,ut=Math.log,Vt=Math.LN2;function Se(c){return c>>>=0,c===0?32:31-(ut(c)/Vt|0)|0}var qe=256,st=262144,St=4194304;function Qe(c){var f=c&42;if(f!==0)return f;switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return c&261888;case 262144:case 524288:case 1048576:case 2097152:return c&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return c&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return c}}function Fe(c,f,v){var w=c.pendingLanes;if(w===0)return 0;var O=0,N=c.suspendedLanes,$=c.pingedLanes;c=c.warmLanes;var se=w&134217727;return se!==0?(w=se&~N,w!==0?O=Qe(w):($&=se,$!==0?O=Qe($):v||(v=se&~c,v!==0&&(O=Qe(v))))):(se=w&~N,se!==0?O=Qe(se):$!==0?O=Qe($):v||(v=w&~c,v!==0&&(O=Qe(v)))),O===0?0:f!==0&&f!==O&&(f&N)===0&&(N=O&-O,v=f&-f,N>=v||N===32&&(v&4194048)!==0)?f:O}function gt(c,f){return(c.pendingLanes&~(c.suspendedLanes&~c.pingedLanes)&f)===0}function Ct(c,f){switch(c){case 1:case 2:case 4:case 8:case 64:return f+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Tt(){var c=St;return St<<=1,(St&62914560)===0&&(St=4194304),c}function Ft(c){for(var f=[],v=0;31>v;v++)f.push(c);return f}function Xn(c,f){c.pendingLanes|=f,f!==268435456&&(c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0)}function qn(c,f,v,w,O,N){var $=c.pendingLanes;c.pendingLanes=v,c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0,c.expiredLanes&=v,c.entangledLanes&=v,c.errorRecoveryDisabledLanes&=v,c.shellSuspendCounter=0;var se=c.entanglements,_e=c.expirationTimes,ze=c.hiddenUpdates;for(v=$&~v;0<v;){var tt=31-ct(v),at=1<<tt;se[tt]=0,_e[tt]=-1;var Ge=ze[tt];if(Ge!==null)for(ze[tt]=null,tt=0;tt<Ge.length;tt++){var $e=Ge[tt];$e!==null&&($e.lane&=-536870913)}v&=~at}w!==0&&ii(c,w,0),N!==0&&O===0&&c.tag!==0&&(c.suspendedLanes|=N&~($&~f))}function ii(c,f,v){c.pendingLanes|=f,c.suspendedLanes&=~f;var w=31-ct(f);c.entangledLanes|=f,c.entanglements[w]=c.entanglements[w]|1073741824|v&261930}function wi(c,f){var v=c.entangledLanes|=f;for(c=c.entanglements;v;){var w=31-ct(v),O=1<<w;O&f|c[w]&f&&(c[w]|=f),v&=~O}}function rs(c,f){var v=f&-f;return v=(v&42)!==0?1:_r(v),(v&(c.suspendedLanes|f))!==0?0:v}function _r(c){switch(c){case 2:c=1;break;case 8:c=4;break;case 32:c=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:c=128;break;case 268435456:c=134217728;break;default:c=0}return c}function Ar(c){return c&=-c,2<c?8<c?(c&134217727)!==0?32:268435456:8:2}function Gr(){var c=G.p;return c!==0?c:(c=window.event,c===void 0?32:hP(c.type))}function $i(c,f){var v=G.p;try{return G.p=c,f()}finally{G.p=v}}var Jn=Math.random().toString(36).slice(2),$n="__reactFiber$"+Jn,Hi="__reactProps$"+Jn,Ps="__reactContainer$"+Jn,Is="__reactEvents$"+Jn,no="__reactListeners$"+Jn,Po="__reactHandles$"+Jn,Da="__reactResources$"+Jn,io="__reactMarker$"+Jn;function ce(c){delete c[$n],delete c[Hi],delete c[Is],delete c[no],delete c[Po]}function De(c){var f=c[$n];if(f)return f;for(var v=c.parentNode;v;){if(f=v[Ps]||v[$n]){if(v=f.alternate,f.child!==null||v!==null&&v.child!==null)for(c=ZL(c);c!==null;){if(v=c[$n])return v;c=ZL(c)}return f}c=v,v=c.parentNode}return null}function Ve(c){if(c=c[$n]||c[Ps]){var f=c.tag;if(f===5||f===6||f===13||f===31||f===26||f===27||f===3)return c}return null}function He(c){var f=c.tag;if(f===5||f===26||f===27||f===6)return c.stateNode;throw Error(i(33))}function ye(c){var f=c[Da];return f||(f=c[Da]={hoistableStyles:new Map,hoistableScripts:new Map}),f}function it(c){c[io]=!0}var bt=new Set,At={};function wt(c,f){Lt(c,f),Lt(c+"Capture",f)}function Lt(c,f){for(At[c]=f,c=0;c<f.length;c++)bt.add(f[c])}var Pt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Nt={},It={};function Pn(c){return Le.call(It,c)?!0:Le.call(Nt,c)?!1:Pt.test(c)?It[c]=!0:(Nt[c]=!0,!1)}function Un(c,f,v){if(Pn(f))if(v===null)c.removeAttribute(f);else{switch(typeof v){case"undefined":case"function":case"symbol":c.removeAttribute(f);return;case"boolean":var w=f.toLowerCase().slice(0,5);if(w!=="data-"&&w!=="aria-"){c.removeAttribute(f);return}}c.setAttribute(f,""+v)}}function kn(c,f,v){if(v===null)c.removeAttribute(f);else{switch(typeof v){case"undefined":case"function":case"symbol":case"boolean":c.removeAttribute(f);return}c.setAttribute(f,""+v)}}function rn(c,f,v,w){if(w===null)c.removeAttribute(v);else{switch(typeof w){case"undefined":case"function":case"symbol":case"boolean":c.removeAttribute(v);return}c.setAttributeNS(f,v,""+w)}}function Ot(c){switch(typeof c){case"bigint":case"boolean":case"number":case"string":case"undefined":return c;case"object":return c;default:return""}}function zn(c){var f=c.type;return(c=c.nodeName)&&c.toLowerCase()==="input"&&(f==="checkbox"||f==="radio")}function mn(c,f,v){var w=Object.getOwnPropertyDescriptor(c.constructor.prototype,f);if(!c.hasOwnProperty(f)&&typeof w<"u"&&typeof w.get=="function"&&typeof w.set=="function"){var O=w.get,N=w.set;return Object.defineProperty(c,f,{configurable:!0,get:function(){return O.call(this)},set:function($){v=""+$,N.call(this,$)}}),Object.defineProperty(c,f,{enumerable:w.enumerable}),{getValue:function(){return v},setValue:function($){v=""+$},stopTracking:function(){c._valueTracker=null,delete c[f]}}}}function gi(c){if(!c._valueTracker){var f=zn(c)?"checked":"value";c._valueTracker=mn(c,f,""+c[f])}}function hi(c){if(!c)return!1;var f=c._valueTracker;if(!f)return!0;var v=f.getValue(),w="";return c&&(w=zn(c)?c.checked?"true":"false":c.value),c=w,c!==v?(f.setValue(c),!0):!1}function sn(c){if(c=c||(typeof document<"u"?document:void 0),typeof c>"u")return null;try{return c.activeElement||c.body}catch{return c.body}}var Ns=/[\n"\\]/g;function Xt(c){return c.replace(Ns,function(f){return"\\"+f.charCodeAt(0).toString(16)+" "})}function Zi(c,f,v,w,O,N,$,se){c.name="",$!=null&&typeof $!="function"&&typeof $!="symbol"&&typeof $!="boolean"?c.type=$:c.removeAttribute("type"),f!=null?$==="number"?(f===0&&c.value===""||c.value!=f)&&(c.value=""+Ot(f)):c.value!==""+Ot(f)&&(c.value=""+Ot(f)):$!=="submit"&&$!=="reset"||c.removeAttribute("value"),f!=null?Gn(c,$,Ot(f)):v!=null?Gn(c,$,Ot(v)):w!=null&&c.removeAttribute("value"),O==null&&N!=null&&(c.defaultChecked=!!N),O!=null&&(c.checked=O&&typeof O!="function"&&typeof O!="symbol"),se!=null&&typeof se!="function"&&typeof se!="symbol"&&typeof se!="boolean"?c.name=""+Ot(se):c.removeAttribute("name")}function ji(c,f,v,w,O,N,$,se){if(N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"&&(c.type=N),f!=null||v!=null){if(!(N!=="submit"&&N!=="reset"||f!=null)){gi(c);return}v=v!=null?""+Ot(v):"",f=f!=null?""+Ot(f):v,se||f===c.value||(c.value=f),c.defaultValue=f}w=w??O,w=typeof w!="function"&&typeof w!="symbol"&&!!w,c.checked=se?c.checked:!!w,c.defaultChecked=!!w,$!=null&&typeof $!="function"&&typeof $!="symbol"&&typeof $!="boolean"&&(c.name=$),gi(c)}function Gn(c,f,v){f==="number"&&sn(c.ownerDocument)===c||c.defaultValue===""+v||(c.defaultValue=""+v)}function di(c,f,v,w){if(c=c.options,f){f={};for(var O=0;O<v.length;O++)f["$"+v[O]]=!0;for(v=0;v<c.length;v++)O=f.hasOwnProperty("$"+c[v].value),c[v].selected!==O&&(c[v].selected=O),O&&w&&(c[v].defaultSelected=!0)}else{for(v=""+Ot(v),f=null,O=0;O<c.length;O++){if(c[O].value===v){c[O].selected=!0,w&&(c[O].defaultSelected=!0);return}f!==null||c[O].disabled||(f=c[O])}f!==null&&(f.selected=!0)}}function ro(c,f,v){if(f!=null&&(f=""+Ot(f),f!==c.value&&(c.value=f),v==null)){c.defaultValue!==f&&(c.defaultValue=f);return}c.defaultValue=v!=null?""+Ot(v):""}function Hr(c,f,v,w){if(f==null){if(w!=null){if(v!=null)throw Error(i(92));if(X(w)){if(1<w.length)throw Error(i(93));w=w[0]}v=w}v==null&&(v=""),f=v}v=Ot(f),c.defaultValue=v,w=c.textContent,w===v&&w!==""&&w!==null&&(c.value=w),gi(c)}function ha(c,f){if(f){var v=c.firstChild;if(v&&v===c.lastChild&&v.nodeType===3){v.nodeValue=f;return}}c.textContent=f}var bd=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function qf(c,f,v){var w=f.indexOf("--")===0;v==null||typeof v=="boolean"||v===""?w?c.setProperty(f,""):f==="float"?c.cssFloat="":c[f]="":w?c.setProperty(f,v):typeof v!="number"||v===0||bd.has(f)?f==="float"?c.cssFloat=v:c[f]=(""+v).trim():c[f]=v+"px"}function _u(c,f,v){if(f!=null&&typeof f!="object")throw Error(i(62));if(c=c.style,v!=null){for(var w in v)!v.hasOwnProperty(w)||f!=null&&f.hasOwnProperty(w)||(w.indexOf("--")===0?c.setProperty(w,""):w==="float"?c.cssFloat="":c[w]="");for(var O in f)w=f[O],f.hasOwnProperty(O)&&v[O]!==w&&qf(c,O,w)}else for(var N in f)f.hasOwnProperty(N)&&qf(c,N,f[N])}function Oa(c){if(c.indexOf("-")===-1)return!1;switch(c){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _d=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),dc=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Io(c){return dc.test(""+c)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":c}function ss(){}var La=null;function xu(c){return c=c.target||c.srcElement||window,c.correspondingUseElement&&(c=c.correspondingUseElement),c.nodeType===3?c.parentNode:c}var so=null,No=null;function Su(c){var f=Ve(c);if(f&&(c=f.stateNode)){var v=c[Hi]||null;e:switch(c=f.stateNode,f.type){case"input":if(Zi(c,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name),f=v.name,v.type==="radio"&&f!=null){for(v=c;v.parentNode;)v=v.parentNode;for(v=v.querySelectorAll('input[name="'+Xt(""+f)+'"][type="radio"]'),f=0;f<v.length;f++){var w=v[f];if(w!==c&&w.form===c.form){var O=w[Hi]||null;if(!O)throw Error(i(90));Zi(w,O.value,O.defaultValue,O.defaultValue,O.checked,O.defaultChecked,O.type,O.name)}}for(f=0;f<v.length;f++)w=v[f],w.form===c.form&&hi(w)}break e;case"textarea":ro(c,v.value,v.defaultValue);break e;case"select":f=v.value,f!=null&&di(c,!!v.multiple,f,!1)}}}var wu=!1;function pc(c,f,v){if(wu)return c(f,v);wu=!0;try{var w=c(f);return w}finally{if(wu=!1,(so!==null||No!==null)&&(_a(),so&&(f=so,c=No,No=so=null,Su(f),c)))for(f=0;f<c.length;f++)Su(c[f])}}function Pa(c,f){var v=c.stateNode;if(v===null)return null;var w=v[Hi]||null;if(w===null)return null;v=w[f];e:switch(f){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(w=!w.disabled)||(c=c.type,w=!(c==="button"||c==="input"||c==="select"||c==="textarea")),c=!w;break e;default:c=!1}if(c)return null;if(v&&typeof v!="function")throw Error(i(231,f,typeof v));return v}var oo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),gs=!1;if(oo)try{var Ia={};Object.defineProperty(Ia,"passive",{get:function(){gs=!0}}),window.addEventListener("test",Ia,Ia),window.removeEventListener("test",Ia,Ia)}catch{gs=!1}var os=null,Eu=null,da=null;function mc(){if(da)return da;var c,f=Eu,v=f.length,w,O="value"in os?os.value:os.textContent,N=O.length;for(c=0;c<v&&f[c]===O[c];c++);var $=v-c;for(w=1;w<=$&&f[v-w]===O[N-w];w++);return da=O.slice(c,1<w?1-w:void 0)}function gc(c){var f=c.keyCode;return"charCode"in c?(c=c.charCode,c===0&&f===13&&(c=13)):c=f,c===10&&(c=13),32<=c||c===13?c:0}function Uo(){return!0}function vc(){return!1}function Ai(c){function f(v,w,O,N,$){this._reactName=v,this._targetInst=O,this.type=w,this.nativeEvent=N,this.target=$,this.currentTarget=null;for(var se in c)c.hasOwnProperty(se)&&(v=c[se],this[se]=v?v(N):N[se]);return this.isDefaultPrevented=(N.defaultPrevented!=null?N.defaultPrevented:N.returnValue===!1)?Uo:vc,this.isPropagationStopped=vc,this}return p(f.prototype,{preventDefault:function(){this.defaultPrevented=!0;var v=this.nativeEvent;v&&(v.preventDefault?v.preventDefault():typeof v.returnValue!="unknown"&&(v.returnValue=!1),this.isDefaultPrevented=Uo)},stopPropagation:function(){var v=this.nativeEvent;v&&(v.stopPropagation?v.stopPropagation():typeof v.cancelBubble!="unknown"&&(v.cancelBubble=!0),this.isPropagationStopped=Uo)},persist:function(){},isPersistent:Uo}),f}var pa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(c){return c.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ml=Ai(pa),Na=p({},pa,{view:0,detail:0}),yc=Ai(Na),bc,Ua,ka,fr=p({},Na,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fm,button:0,buttons:0,relatedTarget:function(c){return c.relatedTarget===void 0?c.fromElement===c.srcElement?c.toElement:c.fromElement:c.relatedTarget},movementX:function(c){return"movementX"in c?c.movementX:(c!==ka&&(ka&&c.type==="mousemove"?(bc=c.screenX-ka.screenX,Ua=c.screenY-ka.screenY):Ua=bc=0,ka=c),bc)},movementY:function(c){return"movementY"in c?c.movementY:Ua}}),xd=Ai(fr),Tu=p({},fr,{dataTransfer:0}),Mu=Ai(Tu),Yf=p({},Na,{relatedTarget:0}),$f=Ai(Yf),jr=p({},pa,{animationName:0,elapsedTime:0,pseudoElement:0}),ao=Ai(jr),as=p({},pa,{clipboardData:function(c){return"clipboardData"in c?c.clipboardData:window.clipboardData}}),ma=Ai(as),_c=p({},pa,{data:0}),cm=Ai(_c),um={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},X_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},q_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tv(c){var f=this.nativeEvent;return f.getModifierState?f.getModifierState(c):(c=q_[c])?!!f[c]:!1}function fm(){return tv}var Y_=p({},Na,{key:function(c){if(c.key){var f=um[c.key]||c.key;if(f!=="Unidentified")return f}return c.type==="keypress"?(c=gc(c),c===13?"Enter":String.fromCharCode(c)):c.type==="keydown"||c.type==="keyup"?X_[c.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fm,charCode:function(c){return c.type==="keypress"?gc(c):0},keyCode:function(c){return c.type==="keydown"||c.type==="keyup"?c.keyCode:0},which:function(c){return c.type==="keypress"?gc(c):c.type==="keydown"||c.type==="keyup"?c.keyCode:0}}),Au=Ai(Y_),hm=p({},fr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nv=Ai(hm),iv=p({},Na,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fm}),$_=Ai(iv),Z_=p({},pa,{propertyName:0,elapsedTime:0,pseudoElement:0}),rM=Ai(Z_),Wr=p({},fr,{deltaX:function(c){return"deltaX"in c?c.deltaX:"wheelDeltaX"in c?-c.wheelDeltaX:0},deltaY:function(c){return"deltaY"in c?c.deltaY:"wheelDeltaY"in c?-c.wheelDeltaY:"wheelDelta"in c?-c.wheelDelta:0},deltaZ:0,deltaMode:0}),K_=Ai(Wr),Q_=p({},pa,{newState:0,oldState:0}),J_=Ai(Q_),ex=[9,13,27,32],Cu=oo&&"CompositionEvent"in window,Zf=null;oo&&"documentMode"in document&&(Zf=document.documentMode);var dm=oo&&"TextEvent"in window&&!Zf,rv=oo&&(!Cu||Zf&&8<Zf&&11>=Zf),tx=" ",Sd=!1;function pm(c,f){switch(c){case"keyup":return ex.indexOf(f.keyCode)!==-1;case"keydown":return f.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sv(c){return c=c.detail,typeof c=="object"&&"data"in c?c.data:null}var Ru=!1;function nx(c,f){switch(c){case"compositionend":return sv(f);case"keypress":return f.which!==32?null:(Sd=!0,tx);case"textInput":return c=f.data,c===tx&&Sd?null:c;default:return null}}function ov(c,f){if(Ru)return c==="compositionend"||!Cu&&pm(c,f)?(c=mc(),da=Eu=os=null,Ru=!1,c):null;switch(c){case"paste":return null;case"keypress":if(!(f.ctrlKey||f.altKey||f.metaKey)||f.ctrlKey&&f.altKey){if(f.char&&1<f.char.length)return f.char;if(f.which)return String.fromCharCode(f.which)}return null;case"compositionend":return rv&&f.locale!=="ko"?null:f.data;default:return null}}var av={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function lv(c){var f=c&&c.nodeName&&c.nodeName.toLowerCase();return f==="input"?!!av[c.type]:f==="textarea"}function mm(c,f,v,w){so?No?No.push(w):No=[w]:so=w,f=a1(f,"onChange"),0<f.length&&(v=new Ml("onChange","change",null,v,w),c.push({event:v,listeners:f}))}var xc=null,Du=null;function ix(c){UL(c,0)}function Kf(c){var f=He(c);if(hi(f))return c}function cv(c,f){if(c==="change")return f}var za=!1;if(oo){var wd;if(oo){var uv="oninput"in document;if(!uv){var fv=document.createElement("div");fv.setAttribute("oninput","return;"),uv=typeof fv.oninput=="function"}wd=uv}else wd=!1;za=wd&&(!document.documentMode||9<document.documentMode)}function ko(){xc&&(xc.detachEvent("onpropertychange",Ed),Du=xc=null)}function Ed(c){if(c.propertyName==="value"&&Kf(Du)){var f=[];mm(f,Du,c,xu(c)),pc(ix,f)}}function rx(c,f,v){c==="focusin"?(ko(),xc=f,Du=v,xc.attachEvent("onpropertychange",Ed)):c==="focusout"&&ko()}function hv(c){if(c==="selectionchange"||c==="keyup"||c==="keydown")return Kf(Du)}function sx(c,f){if(c==="click")return Kf(f)}function ox(c,f){if(c==="input"||c==="change")return Kf(f)}function dv(c,f){return c===f&&(c!==0||1/c===1/f)||c!==c&&f!==f}var vs=typeof Object.is=="function"?Object.is:dv;function Qf(c,f){if(vs(c,f))return!0;if(typeof c!="object"||c===null||typeof f!="object"||f===null)return!1;var v=Object.keys(c),w=Object.keys(f);if(v.length!==w.length)return!1;for(w=0;w<v.length;w++){var O=v[w];if(!Le.call(f,O)||!vs(c[O],f[O]))return!1}return!0}function Td(c){for(;c&&c.firstChild;)c=c.firstChild;return c}function Jf(c,f){var v=Td(c);c=0;for(var w;v;){if(v.nodeType===3){if(w=c+v.textContent.length,c<=f&&w>=f)return{node:v,offset:f-c};c=w}e:{for(;v;){if(v.nextSibling){v=v.nextSibling;break e}v=v.parentNode}v=void 0}v=Td(v)}}function vi(c,f){return c&&f?c===f?!0:c&&c.nodeType===3?!1:f&&f.nodeType===3?vi(c,f.parentNode):"contains"in c?c.contains(f):c.compareDocumentPosition?!!(c.compareDocumentPosition(f)&16):!1:!1}function ax(c){c=c!=null&&c.ownerDocument!=null&&c.ownerDocument.defaultView!=null?c.ownerDocument.defaultView:window;for(var f=sn(c.document);f instanceof c.HTMLIFrameElement;){try{var v=typeof f.contentWindow.location.href=="string"}catch{v=!1}if(v)c=f.contentWindow;else break;f=sn(c.document)}return f}function pv(c){var f=c&&c.nodeName&&c.nodeName.toLowerCase();return f&&(f==="input"&&(c.type==="text"||c.type==="search"||c.type==="tel"||c.type==="url"||c.type==="password")||f==="textarea"||c.contentEditable==="true")}var lx=oo&&"documentMode"in document&&11>=document.documentMode,Fa=null,Ba=null,eh=null,gm=!1;function th(c,f,v){var w=v.window===v?v.document:v.nodeType===9?v:v.ownerDocument;gm||Fa==null||Fa!==sn(w)||(w=Fa,"selectionStart"in w&&pv(w)?w={start:w.selectionStart,end:w.selectionEnd}:(w=(w.ownerDocument&&w.ownerDocument.defaultView||window).getSelection(),w={anchorNode:w.anchorNode,anchorOffset:w.anchorOffset,focusNode:w.focusNode,focusOffset:w.focusOffset}),eh&&Qf(eh,w)||(eh=w,w=a1(Ba,"onSelect"),0<w.length&&(f=new Ml("onSelect","select",null,f,v),c.push({event:f,listeners:w}),f.target=Fa)))}function ls(c,f){var v={};return v[c.toLowerCase()]=f.toLowerCase(),v["Webkit"+c]="webkit"+f,v["Moz"+c]="moz"+f,v}var Ou={animationend:ls("Animation","AnimationEnd"),animationiteration:ls("Animation","AnimationIteration"),animationstart:ls("Animation","AnimationStart"),transitionrun:ls("Transition","TransitionRun"),transitionstart:ls("Transition","TransitionStart"),transitioncancel:ls("Transition","TransitionCancel"),transitionend:ls("Transition","TransitionEnd")},Md={},mv={};oo&&(mv=document.createElement("div").style,"AnimationEvent"in window||(delete Ou.animationend.animation,delete Ou.animationiteration.animation,delete Ou.animationstart.animation),"TransitionEvent"in window||delete Ou.transitionend.transition);function Al(c){if(Md[c])return Md[c];if(!Ou[c])return c;var f=Ou[c],v;for(v in f)if(f.hasOwnProperty(v)&&v in mv)return Md[c]=f[v];return c}var vm=Al("animationend"),Ad=Al("animationiteration"),gv=Al("animationstart"),cx=Al("transitionrun"),sM=Al("transitionstart"),ux=Al("transitioncancel"),vv=Al("transitionend"),zo=new Map,Cd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Cd.push("scrollEnd");function Fo(c,f){zo.set(c,f),wt(f,[c])}var Rd=typeof reportError=="function"?reportError:function(c){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var f=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof c=="object"&&c!==null&&typeof c.message=="string"?String(c.message):String(c),error:c});if(!window.dispatchEvent(f))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",c);return}console.error(c)},Bo=[],Cl=0,Cr=0;function Dd(){for(var c=Cl,f=Cr=Cl=0;f<c;){var v=Bo[f];Bo[f++]=null;var w=Bo[f];Bo[f++]=null;var O=Bo[f];Bo[f++]=null;var N=Bo[f];if(Bo[f++]=null,w!==null&&O!==null){var $=w.pending;$===null?O.next=O:(O.next=$.next,$.next=O),w.pending=O}N!==0&&Sc(v,O,N)}}function Rr(c,f,v,w){Bo[Cl++]=c,Bo[Cl++]=f,Bo[Cl++]=v,Bo[Cl++]=w,Cr|=w,c.lanes|=w,c=c.alternate,c!==null&&(c.lanes|=w)}function ym(c,f,v,w){return Rr(c,f,v,w),Vo(c)}function ys(c,f){return Rr(c,null,null,f),Vo(c)}function Sc(c,f,v){c.lanes|=v;var w=c.alternate;w!==null&&(w.lanes|=v);for(var O=!1,N=c.return;N!==null;)N.childLanes|=v,w=N.alternate,w!==null&&(w.childLanes|=v),N.tag===22&&(c=N.stateNode,c===null||c._visibility&1||(O=!0)),c=N,N=N.return;return c.tag===3?(N=c.stateNode,O&&f!==null&&(O=31-ct(v),c=N.hiddenUpdates,w=c[O],w===null?c[O]=[f]:w.push(f),f.lane=v|536870912),N):null}function Vo(c){if(50<Vc)throw Vc=0,Zu=null,Error(i(185));for(var f=c.return;f!==null;)c=f,f=c.return;return c.tag===3?c.stateNode:null}var wc={};function yv(c,f,v,w){this.tag=c,this.key=v,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=w,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ii(c,f,v,w){return new yv(c,f,v,w)}function bm(c){return c=c.prototype,!(!c||!c.isReactComponent)}function Us(c,f){var v=c.alternate;return v===null?(v=Ii(c.tag,f,c.key,c.mode),v.elementType=c.elementType,v.type=c.type,v.stateNode=c.stateNode,v.alternate=c,c.alternate=v):(v.pendingProps=f,v.type=c.type,v.flags=0,v.subtreeFlags=0,v.deletions=null),v.flags=c.flags&65011712,v.childLanes=c.childLanes,v.lanes=c.lanes,v.child=c.child,v.memoizedProps=c.memoizedProps,v.memoizedState=c.memoizedState,v.updateQueue=c.updateQueue,f=c.dependencies,v.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},v.sibling=c.sibling,v.index=c.index,v.ref=c.ref,v.refCleanup=c.refCleanup,v}function nh(c,f){c.flags&=65011714;var v=c.alternate;return v===null?(c.childLanes=0,c.lanes=f,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=v.childLanes,c.lanes=v.lanes,c.child=v.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=v.memoizedProps,c.memoizedState=v.memoizedState,c.updateQueue=v.updateQueue,c.type=v.type,f=v.dependencies,c.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext}),c}function Va(c,f,v,w,O,N){var $=0;if(w=c,typeof c=="function")bm(c)&&($=1);else if(typeof c=="string")$=AH(c,v,re.current)?26:c==="html"||c==="head"||c==="body"?27:5;else e:switch(c){case P:return c=Ii(31,v,f,O),c.elementType=P,c.lanes=N,c;case x:return Ec(v.children,O,N,f);case S:$=8,O|=24;break;case _:return c=Ii(12,v,f,O|2),c.elementType=_,c.lanes=N,c;case C:return c=Ii(13,v,f,O),c.elementType=C,c.lanes=N,c;case R:return c=Ii(19,v,f,O),c.elementType=R,c.lanes=N,c;default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case A:$=10;break e;case T:$=9;break e;case M:$=11;break e;case L:$=14;break e;case I:$=16,w=null;break e}$=29,v=Error(i(130,c===null?"null":typeof c,"")),w=null}return f=Ii($,v,f,O),f.elementType=c,f.type=w,f.lanes=N,f}function Ec(c,f,v,w){return c=Ii(7,c,w,f),c.lanes=v,c}function _m(c,f,v){return c=Ii(6,c,null,f),c.lanes=v,c}function ih(c){var f=Ii(18,null,null,0);return f.stateNode=c,f}function xm(c,f,v){return f=Ii(4,c.children!==null?c.children:[],c.key,f),f.lanes=v,f.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},f}var Od=new WeakMap;function lo(c,f){if(typeof c=="object"&&c!==null){var v=Od.get(c);return v!==void 0?v:(f={value:c,source:f,stack:Re(f)},Od.set(c,f),f)}return{value:c,source:f,stack:Re(f)}}var Tc=[],Mc=0,rh=null,sh=0,ks=[],Ci=0,Rl=null,Ni=1,ga="";function Ga(c,f){Tc[Mc++]=sh,Tc[Mc++]=rh,rh=c,sh=f}function fx(c,f,v){ks[Ci++]=Ni,ks[Ci++]=ga,ks[Ci++]=Rl,Rl=c;var w=Ni;c=ga;var O=32-ct(w)-1;w&=~(1<<O),v+=1;var N=32-ct(f)+O;if(30<N){var $=O-O%5;N=(w&(1<<$)-1).toString(32),w>>=$,O-=$,Ni=1<<32-ct(f)+O|v<<O|w,ga=N+c}else Ni=1<<N|v<<O|w,ga=c}function Ha(c){c.return!==null&&(Ga(c,1),fx(c,1,0))}function Sm(c){for(;c===rh;)rh=Tc[--Mc],Tc[Mc]=null,sh=Tc[--Mc],Tc[Mc]=null;for(;c===Rl;)Rl=ks[--Ci],ks[Ci]=null,ga=ks[--Ci],ks[Ci]=null,Ni=ks[--Ci],ks[Ci]=null}function wm(c,f){ks[Ci++]=Ni,ks[Ci++]=ga,ks[Ci++]=Rl,Ni=f.id,ga=f.overflow,Rl=c}var Wi=null,yi=null,Dn=!1,Dl=null,co=!1,oh=Error(i(519));function ja(c){var f=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Wa(lo(f,c)),oh}function hx(c){var f=c.stateNode,v=c.type,w=c.memoizedProps;switch(f[$n]=c,f[Hi]=w,v){case"dialog":Nn("cancel",f),Nn("close",f);break;case"iframe":case"object":case"embed":Nn("load",f);break;case"video":case"audio":for(v=0;v<ea.length;v++)Nn(ea[v],f);break;case"source":Nn("error",f);break;case"img":case"image":case"link":Nn("error",f),Nn("load",f);break;case"details":Nn("toggle",f);break;case"input":Nn("invalid",f),ji(f,w.value,w.defaultValue,w.checked,w.defaultChecked,w.type,w.name,!0);break;case"select":Nn("invalid",f);break;case"textarea":Nn("invalid",f),Hr(f,w.value,w.defaultValue,w.children)}v=w.children,typeof v!="string"&&typeof v!="number"&&typeof v!="bigint"||f.textContent===""+v||w.suppressHydrationWarning===!0||BL(f.textContent,v)?(w.popover!=null&&(Nn("beforetoggle",f),Nn("toggle",f)),w.onScroll!=null&&Nn("scroll",f),w.onScrollEnd!=null&&Nn("scrollend",f),w.onClick!=null&&(f.onclick=ss),f=!0):f=!1,f||ja(c,!0)}function dx(c){for(Wi=c.return;Wi;)switch(Wi.tag){case 5:case 31:case 13:co=!1;return;case 27:case 3:co=!0;return;default:Wi=Wi.return}}function ah(c){if(c!==Wi)return!1;if(!Dn)return dx(c),Dn=!0,!1;var f=c.tag,v;if((v=f!==3&&f!==27)&&((v=f===5)&&(v=c.type,v=!(v!=="form"&&v!=="button")||xM(c.type,c.memoizedProps)),v=!v),v&&yi&&ja(c),dx(c),f===13){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(i(317));yi=$L(c)}else if(f===31){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(i(317));yi=$L(c)}else f===27?(f=yi,Ah(c.type)?(c=MM,MM=null,yi=c):yi=f):yi=Wi?sl(c.stateNode.nextSibling):null;return!0}function Ac(){yi=Wi=null,Dn=!1}function Em(){var c=Dl;return c!==null&&(qi===null?qi=c:qi.push.apply(qi,c),Dl=null),c}function Wa(c){Dl===null?Dl=[c]:Dl.push(c)}var lh=V(null),Cc=null,Xa=null;function Ol(c,f,v){Q(lh,f._currentValue),f._currentValue=v}function qa(c){c._currentValue=lh.current,Y(lh)}function Tm(c,f,v){for(;c!==null;){var w=c.alternate;if((c.childLanes&f)!==f?(c.childLanes|=f,w!==null&&(w.childLanes|=f)):w!==null&&(w.childLanes&f)!==f&&(w.childLanes|=f),c===v)break;c=c.return}}function Mm(c,f,v,w){var O=c.child;for(O!==null&&(O.return=c);O!==null;){var N=O.dependencies;if(N!==null){var $=O.child;N=N.firstContext;e:for(;N!==null;){var se=N;N=O;for(var _e=0;_e<f.length;_e++)if(se.context===f[_e]){N.lanes|=v,se=N.alternate,se!==null&&(se.lanes|=v),Tm(N.return,v,c),w||($=null);break e}N=se.next}}else if(O.tag===18){if($=O.return,$===null)throw Error(i(341));$.lanes|=v,N=$.alternate,N!==null&&(N.lanes|=v),Tm($,v,c),$=null}else $=O.child;if($!==null)$.return=O;else for($=O;$!==null;){if($===c){$=null;break}if(O=$.sibling,O!==null){O.return=$.return,$=O;break}$=$.return}O=$}}function Ya(c,f,v,w){c=null;for(var O=f,N=!1;O!==null;){if(!N){if((O.flags&524288)!==0)N=!0;else if((O.flags&262144)!==0)break}if(O.tag===10){var $=O.alternate;if($===null)throw Error(i(387));if($=$.memoizedProps,$!==null){var se=O.type;vs(O.pendingProps.value,$.value)||(c!==null?c.push(se):c=[se])}}else if(O===fe.current){if($=O.alternate,$===null)throw Error(i(387));$.memoizedState.memoizedState!==O.memoizedState.memoizedState&&(c!==null?c.push(my):c=[my])}O=O.return}c!==null&&Mm(f,c,v,w),f.flags|=262144}function Ld(c){for(c=c.firstContext;c!==null;){if(!vs(c.context._currentValue,c.memoizedValue))return!0;c=c.next}return!1}function Rc(c){Cc=c,Xa=null,c=c.dependencies,c!==null&&(c.firstContext=null)}function Zt(c){return px(Cc,c)}function ch(c,f){return Cc===null&&Rc(c),px(c,f)}function px(c,f){var v=f._currentValue;if(f={context:f,memoizedValue:v,next:null},Xa===null){if(c===null)throw Error(i(308));Xa=f,c.dependencies={lanes:0,firstContext:f},c.flags|=524288}else Xa=Xa.next=f;return v}var mx=typeof AbortController<"u"?AbortController:function(){var c=[],f=this.signal={aborted:!1,addEventListener:function(v,w){c.push(w)}};this.abort=function(){f.aborted=!0,c.forEach(function(v){return v()})}},oM=n.unstable_scheduleCallback,aM=n.unstable_NormalPriority,hr={$$typeof:A,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function bv(){return{controller:new mx,data:new Map,refCount:0}}function Lu(c){c.refCount--,c.refCount===0&&oM(aM,function(){c.controller.abort()})}var uo=null,Am=0,Ll=0,Go=null;function _v(c,f){if(uo===null){var v=uo=[];Am=0,Ll=We(),Go={status:"pending",value:void 0,then:function(w){v.push(w)}}}return Am++,f.then(xv,xv),f}function xv(){if(--Am===0&&uo!==null){Go!==null&&(Go.status="fulfilled");var c=uo;uo=null,Ll=0,Go=null;for(var f=0;f<c.length;f++)(0,c[f])()}}function Sv(c,f){var v=[],w={status:"pending",value:null,reason:null,then:function(O){v.push(O)}};return c.then(function(){w.status="fulfilled",w.value=f;for(var O=0;O<v.length;O++)(0,v[O])(f)},function(O){for(w.status="rejected",w.reason=O,O=0;O<v.length;O++)(0,v[O])(void 0)}),w}var gx=j.S;j.S=function(c,f){cy=Z(),typeof f=="object"&&f!==null&&typeof f.then=="function"&&_v(c,f),gx!==null&&gx(c,f)};var Dc=V(null);function Cm(){var c=Dc.current;return c!==null?c:Jt.pooledCache}function Pd(c,f){f===null?Q(Dc,Dc.current):Q(Dc,f.pool)}function wv(){var c=Cm();return c===null?null:{parent:hr._currentValue,pool:c}}var Pu=Error(i(460)),Id=Error(i(474)),gn=Error(i(542)),Rm={then:function(){}};function zs(c){return c=c.status,c==="fulfilled"||c==="rejected"}function Dm(c,f,v){switch(v=c[v],v===void 0?c.push(f):v!==f&&(f.then(ss,ss),f=v),f.status){case"fulfilled":return f.value;case"rejected":throw c=f.reason,Uu(c),c;default:if(typeof f.status=="string")f.then(ss,ss);else{if(c=Jt,c!==null&&100<c.shellSuspendCounter)throw Error(i(482));c=f,c.status="pending",c.then(function(w){if(f.status==="pending"){var O=f;O.status="fulfilled",O.value=w}},function(w){if(f.status==="pending"){var O=f;O.status="rejected",O.reason=w}})}switch(f.status){case"fulfilled":return f.value;case"rejected":throw c=f.reason,Uu(c),c}throw $a=f,Pu}}function Iu(c){try{var f=c._init;return f(c._payload)}catch(v){throw v!==null&&typeof v=="object"&&typeof v.then=="function"?($a=v,Pu):v}}var $a=null;function Nu(){if($a===null)throw Error(i(459));var c=$a;return $a=null,c}function Uu(c){if(c===Pu||c===gn)throw Error(i(483))}var ku=null,zu=0;function Nd(c){var f=zu;return zu+=1,ku===null&&(ku=[]),Dm(ku,c,f)}function Ho(c,f){f=f.props.ref,c.ref=f!==void 0?f:null}function uh(c,f){throw f.$$typeof===m?Error(i(525)):(c=Object.prototype.toString.call(f),Error(i(31,c==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":c)))}function Om(c){function f(Pe,Me){if(c){var ke=Pe.deletions;ke===null?(Pe.deletions=[Me],Pe.flags|=16):ke.push(Me)}}function v(Pe,Me){if(!c)return null;for(;Me!==null;)f(Pe,Me),Me=Me.sibling;return null}function w(Pe){for(var Me=new Map;Pe!==null;)Pe.key!==null?Me.set(Pe.key,Pe):Me.set(Pe.index,Pe),Pe=Pe.sibling;return Me}function O(Pe,Me){return Pe=Us(Pe,Me),Pe.index=0,Pe.sibling=null,Pe}function N(Pe,Me,ke){return Pe.index=ke,c?(ke=Pe.alternate,ke!==null?(ke=ke.index,ke<Me?(Pe.flags|=67108866,Me):ke):(Pe.flags|=67108866,Me)):(Pe.flags|=1048576,Me)}function $(Pe){return c&&Pe.alternate===null&&(Pe.flags|=67108866),Pe}function se(Pe,Me,ke,rt){return Me===null||Me.tag!==6?(Me=_m(ke,Pe.mode,rt),Me.return=Pe,Me):(Me=O(Me,ke),Me.return=Pe,Me)}function _e(Pe,Me,ke,rt){var jt=ke.type;return jt===x?tt(Pe,Me,ke.props.children,rt,ke.key):Me!==null&&(Me.elementType===jt||typeof jt=="object"&&jt!==null&&jt.$$typeof===I&&Iu(jt)===Me.type)?(Me=O(Me,ke.props),Ho(Me,ke),Me.return=Pe,Me):(Me=Va(ke.type,ke.key,ke.props,null,Pe.mode,rt),Ho(Me,ke),Me.return=Pe,Me)}function ze(Pe,Me,ke,rt){return Me===null||Me.tag!==4||Me.stateNode.containerInfo!==ke.containerInfo||Me.stateNode.implementation!==ke.implementation?(Me=xm(ke,Pe.mode,rt),Me.return=Pe,Me):(Me=O(Me,ke.children||[]),Me.return=Pe,Me)}function tt(Pe,Me,ke,rt,jt){return Me===null||Me.tag!==7?(Me=Ec(ke,Pe.mode,rt,jt),Me.return=Pe,Me):(Me=O(Me,ke),Me.return=Pe,Me)}function at(Pe,Me,ke){if(typeof Me=="string"&&Me!==""||typeof Me=="number"||typeof Me=="bigint")return Me=_m(""+Me,Pe.mode,ke),Me.return=Pe,Me;if(typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case y:return ke=Va(Me.type,Me.key,Me.props,null,Pe.mode,ke),Ho(ke,Me),ke.return=Pe,ke;case b:return Me=xm(Me,Pe.mode,ke),Me.return=Pe,Me;case I:return Me=Iu(Me),at(Pe,Me,ke)}if(X(Me)||F(Me))return Me=Ec(Me,Pe.mode,ke,null),Me.return=Pe,Me;if(typeof Me.then=="function")return at(Pe,Nd(Me),ke);if(Me.$$typeof===A)return at(Pe,ch(Pe,Me),ke);uh(Pe,Me)}return null}function Ge(Pe,Me,ke,rt){var jt=Me!==null?Me.key:null;if(typeof ke=="string"&&ke!==""||typeof ke=="number"||typeof ke=="bigint")return jt!==null?null:se(Pe,Me,""+ke,rt);if(typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case y:return ke.key===jt?_e(Pe,Me,ke,rt):null;case b:return ke.key===jt?ze(Pe,Me,ke,rt):null;case I:return ke=Iu(ke),Ge(Pe,Me,ke,rt)}if(X(ke)||F(ke))return jt!==null?null:tt(Pe,Me,ke,rt,null);if(typeof ke.then=="function")return Ge(Pe,Me,Nd(ke),rt);if(ke.$$typeof===A)return Ge(Pe,Me,ch(Pe,ke),rt);uh(Pe,ke)}return null}function $e(Pe,Me,ke,rt,jt){if(typeof rt=="string"&&rt!==""||typeof rt=="number"||typeof rt=="bigint")return Pe=Pe.get(ke)||null,se(Me,Pe,""+rt,jt);if(typeof rt=="object"&&rt!==null){switch(rt.$$typeof){case y:return Pe=Pe.get(rt.key===null?ke:rt.key)||null,_e(Me,Pe,rt,jt);case b:return Pe=Pe.get(rt.key===null?ke:rt.key)||null,ze(Me,Pe,rt,jt);case I:return rt=Iu(rt),$e(Pe,Me,ke,rt,jt)}if(X(rt)||F(rt))return Pe=Pe.get(ke)||null,tt(Me,Pe,rt,jt,null);if(typeof rt.then=="function")return $e(Pe,Me,ke,Nd(rt),jt);if(rt.$$typeof===A)return $e(Pe,Me,ke,ch(Me,rt),jt);uh(Me,rt)}return null}function kt(Pe,Me,ke,rt){for(var jt=null,ei=null,Bt=Me,Sn=Me=0,Bn=null;Bt!==null&&Sn<ke.length;Sn++){Bt.index>Sn?(Bn=Bt,Bt=null):Bn=Bt.sibling;var ti=Ge(Pe,Bt,ke[Sn],rt);if(ti===null){Bt===null&&(Bt=Bn);break}c&&Bt&&ti.alternate===null&&f(Pe,Bt),Me=N(ti,Me,Sn),ei===null?jt=ti:ei.sibling=ti,ei=ti,Bt=Bn}if(Sn===ke.length)return v(Pe,Bt),Dn&&Ga(Pe,Sn),jt;if(Bt===null){for(;Sn<ke.length;Sn++)Bt=at(Pe,ke[Sn],rt),Bt!==null&&(Me=N(Bt,Me,Sn),ei===null?jt=Bt:ei.sibling=Bt,ei=Bt);return Dn&&Ga(Pe,Sn),jt}for(Bt=w(Bt);Sn<ke.length;Sn++)Bn=$e(Bt,Pe,Sn,ke[Sn],rt),Bn!==null&&(c&&Bn.alternate!==null&&Bt.delete(Bn.key===null?Sn:Bn.key),Me=N(Bn,Me,Sn),ei===null?jt=Bn:ei.sibling=Bn,ei=Bn);return c&&Bt.forEach(function(Lh){return f(Pe,Lh)}),Dn&&Ga(Pe,Sn),jt}function Yt(Pe,Me,ke,rt){if(ke==null)throw Error(i(151));for(var jt=null,ei=null,Bt=Me,Sn=Me=0,Bn=null,ti=ke.next();Bt!==null&&!ti.done;Sn++,ti=ke.next()){Bt.index>Sn?(Bn=Bt,Bt=null):Bn=Bt.sibling;var Lh=Ge(Pe,Bt,ti.value,rt);if(Lh===null){Bt===null&&(Bt=Bn);break}c&&Bt&&Lh.alternate===null&&f(Pe,Bt),Me=N(Lh,Me,Sn),ei===null?jt=Lh:ei.sibling=Lh,ei=Lh,Bt=Bn}if(ti.done)return v(Pe,Bt),Dn&&Ga(Pe,Sn),jt;if(Bt===null){for(;!ti.done;Sn++,ti=ke.next())ti=at(Pe,ti.value,rt),ti!==null&&(Me=N(ti,Me,Sn),ei===null?jt=ti:ei.sibling=ti,ei=ti);return Dn&&Ga(Pe,Sn),jt}for(Bt=w(Bt);!ti.done;Sn++,ti=ke.next())ti=$e(Bt,Pe,Sn,ti.value,rt),ti!==null&&(c&&ti.alternate!==null&&Bt.delete(ti.key===null?Sn:ti.key),Me=N(ti,Me,Sn),ei===null?jt=ti:ei.sibling=ti,ei=ti);return c&&Bt.forEach(function(zH){return f(Pe,zH)}),Dn&&Ga(Pe,Sn),jt}function xi(Pe,Me,ke,rt){if(typeof ke=="object"&&ke!==null&&ke.type===x&&ke.key===null&&(ke=ke.props.children),typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case y:e:{for(var jt=ke.key;Me!==null;){if(Me.key===jt){if(jt=ke.type,jt===x){if(Me.tag===7){v(Pe,Me.sibling),rt=O(Me,ke.props.children),rt.return=Pe,Pe=rt;break e}}else if(Me.elementType===jt||typeof jt=="object"&&jt!==null&&jt.$$typeof===I&&Iu(jt)===Me.type){v(Pe,Me.sibling),rt=O(Me,ke.props),Ho(rt,ke),rt.return=Pe,Pe=rt;break e}v(Pe,Me);break}else f(Pe,Me);Me=Me.sibling}ke.type===x?(rt=Ec(ke.props.children,Pe.mode,rt,ke.key),rt.return=Pe,Pe=rt):(rt=Va(ke.type,ke.key,ke.props,null,Pe.mode,rt),Ho(rt,ke),rt.return=Pe,Pe=rt)}return $(Pe);case b:e:{for(jt=ke.key;Me!==null;){if(Me.key===jt)if(Me.tag===4&&Me.stateNode.containerInfo===ke.containerInfo&&Me.stateNode.implementation===ke.implementation){v(Pe,Me.sibling),rt=O(Me,ke.children||[]),rt.return=Pe,Pe=rt;break e}else{v(Pe,Me);break}else f(Pe,Me);Me=Me.sibling}rt=xm(ke,Pe.mode,rt),rt.return=Pe,Pe=rt}return $(Pe);case I:return ke=Iu(ke),xi(Pe,Me,ke,rt)}if(X(ke))return kt(Pe,Me,ke,rt);if(F(ke)){if(jt=F(ke),typeof jt!="function")throw Error(i(150));return ke=jt.call(ke),Yt(Pe,Me,ke,rt)}if(typeof ke.then=="function")return xi(Pe,Me,Nd(ke),rt);if(ke.$$typeof===A)return xi(Pe,Me,ch(Pe,ke),rt);uh(Pe,ke)}return typeof ke=="string"&&ke!==""||typeof ke=="number"||typeof ke=="bigint"?(ke=""+ke,Me!==null&&Me.tag===6?(v(Pe,Me.sibling),rt=O(Me,ke),rt.return=Pe,Pe=rt):(v(Pe,Me),rt=_m(ke,Pe.mode,rt),rt.return=Pe,Pe=rt),$(Pe)):v(Pe,Me)}return function(Pe,Me,ke,rt){try{zu=0;var jt=xi(Pe,Me,ke,rt);return ku=null,jt}catch(Bt){if(Bt===Pu||Bt===gn)throw Bt;var ei=Ii(29,Bt,null,Pe.mode);return ei.lanes=rt,ei.return=Pe,ei}}}var Pl=Om(!0),Lm=Om(!1),bs=!1;function Ud(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ev(c,f){c=c.updateQueue,f.updateQueue===c&&(f.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,callbacks:null})}function Il(c){return{lane:c,tag:0,payload:null,callback:null,next:null}}function Oc(c,f,v){var w=c.updateQueue;if(w===null)return null;if(w=w.shared,(Gt&2)!==0){var O=w.pending;return O===null?f.next=f:(f.next=O.next,O.next=f),w.pending=f,f=Vo(c),Sc(c,null,v),f}return Rr(c,w,f,v),Vo(c)}function Lc(c,f,v){if(f=f.updateQueue,f!==null&&(f=f.shared,(v&4194048)!==0)){var w=f.lanes;w&=c.pendingLanes,v|=w,f.lanes=v,wi(c,v)}}function Ht(c,f){var v=c.updateQueue,w=c.alternate;if(w!==null&&(w=w.updateQueue,v===w)){var O=null,N=null;if(v=v.firstBaseUpdate,v!==null){do{var $={lane:v.lane,tag:v.tag,payload:v.payload,callback:null,next:null};N===null?O=N=$:N=N.next=$,v=v.next}while(v!==null);N===null?O=N=f:N=N.next=f}else O=N=f;v={baseState:w.baseState,firstBaseUpdate:O,lastBaseUpdate:N,shared:w.shared,callbacks:w.callbacks},c.updateQueue=v;return}c=v.lastBaseUpdate,c===null?v.firstBaseUpdate=f:c.next=f,v.lastBaseUpdate=f}var Tv=!1;function kd(){if(Tv){var c=Go;if(c!==null)throw c}}function fh(c,f,v,w){Tv=!1;var O=c.updateQueue;bs=!1;var N=O.firstBaseUpdate,$=O.lastBaseUpdate,se=O.shared.pending;if(se!==null){O.shared.pending=null;var _e=se,ze=_e.next;_e.next=null,$===null?N=ze:$.next=ze,$=_e;var tt=c.alternate;tt!==null&&(tt=tt.updateQueue,se=tt.lastBaseUpdate,se!==$&&(se===null?tt.firstBaseUpdate=ze:se.next=ze,tt.lastBaseUpdate=_e))}if(N!==null){var at=O.baseState;$=0,tt=ze=_e=null,se=N;do{var Ge=se.lane&-536870913,$e=Ge!==se.lane;if($e?(hn&Ge)===Ge:(w&Ge)===Ge){Ge!==0&&Ge===Ll&&(Tv=!0),tt!==null&&(tt=tt.next={lane:0,tag:se.tag,payload:se.payload,callback:null,next:null});e:{var kt=c,Yt=se;Ge=f;var xi=v;switch(Yt.tag){case 1:if(kt=Yt.payload,typeof kt=="function"){at=kt.call(xi,at,Ge);break e}at=kt;break e;case 3:kt.flags=kt.flags&-65537|128;case 0:if(kt=Yt.payload,Ge=typeof kt=="function"?kt.call(xi,at,Ge):kt,Ge==null)break e;at=p({},at,Ge);break e;case 2:bs=!0}}Ge=se.callback,Ge!==null&&(c.flags|=64,$e&&(c.flags|=8192),$e=O.callbacks,$e===null?O.callbacks=[Ge]:$e.push(Ge))}else $e={lane:Ge,tag:se.tag,payload:se.payload,callback:se.callback,next:null},tt===null?(ze=tt=$e,_e=at):tt=tt.next=$e,$|=Ge;if(se=se.next,se===null){if(se=O.shared.pending,se===null)break;$e=se,se=$e.next,$e.next=null,O.lastBaseUpdate=$e,O.shared.pending=null}}while(!0);tt===null&&(_e=at),O.baseState=_e,O.firstBaseUpdate=ze,O.lastBaseUpdate=tt,N===null&&(O.shared.lanes=0),nl|=$,c.lanes=$,c.memoizedState=at}}function hh(c,f){if(typeof c!="function")throw Error(i(191,c));c.call(f)}function vx(c,f){var v=c.callbacks;if(v!==null)for(c.callbacks=null,c=0;c<v.length;c++)hh(v[c],f)}var dh=V(null),Pm=V(0);function yx(c,f){c=mo,Q(Pm,c),Q(dh,f),mo=c|f.baseLanes}function Mv(){Q(Pm,mo),Q(dh,dh.current)}function zd(){mo=Pm.current,Y(dh),Y(Pm)}var Fs=V(null),_s=null;function Nl(c){var f=c.alternate;Q(On,On.current&1),Q(Fs,c),_s===null&&(f===null||dh.current!==null||f.memoizedState!==null)&&(_s=c)}function Av(c){Q(On,On.current),Q(Fs,c),_s===null&&(_s=c)}function bx(c){c.tag===22?(Q(On,On.current),Q(Fs,c),_s===null&&(_s=c)):Bs()}function Bs(){Q(On,On.current),Q(Fs,Fs.current)}function Ki(c){Y(Fs),_s===c&&(_s=null),Y(On)}var On=V(0);function fo(c){for(var f=c;f!==null;){if(f.tag===13){var v=f.memoizedState;if(v!==null&&(v=v.dehydrated,v===null||EM(v)||TM(v)))return f}else if(f.tag===19&&(f.memoizedProps.revealOrder==="forwards"||f.memoizedProps.revealOrder==="backwards"||f.memoizedProps.revealOrder==="unstable_legacy-backwards"||f.memoizedProps.revealOrder==="together")){if((f.flags&128)!==0)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}var Ri=0,on=null,li=null,An=null,jo=!1,ph=!1,Fu=!1,Im=0,Fd=0,mh=null,Cv=0;function Ui(){throw Error(i(321))}function Rv(c,f){if(f===null)return!1;for(var v=0;v<f.length&&v<c.length;v++)if(!vs(c[v],f[v]))return!1;return!0}function Nm(c,f,v,w,O,N){return Ri=N,on=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,j.H=c===null||c.memoizedState===null?Kx:$v,Fu=!1,N=v(w,O),Fu=!1,ph&&(N=Bu(f,v,w,O)),_x(c),N}function _x(c){j.H=gh;var f=li!==null&&li.next!==null;if(Ri=0,An=li=on=null,jo=!1,Fd=0,mh=null,f)throw Error(i(300));c===null||dr||(c=c.dependencies,c!==null&&Ld(c)&&(dr=!0))}function Bu(c,f,v,w){on=c;var O=0;do{if(ph&&(mh=null),Fd=0,ph=!1,25<=O)throw Error(i(301));if(O+=1,An=li=null,c.updateQueue!=null){var N=c.updateQueue;N.lastEffect=null,N.events=null,N.stores=null,N.memoCache!=null&&(N.memoCache.index=0)}j.H=Wo,N=f(v,w)}while(ph);return N}function Vu(){var c=j.H,f=c.useState()[0];return f=typeof f.then=="function"?Bd(f):f,c=c.useState()[0],(li!==null?li.memoizedState:null)!==c&&(on.flags|=1024),f}function Dv(){var c=Im!==0;return Im=0,c}function Ov(c,f,v){f.updateQueue=c.updateQueue,f.flags&=-2053,c.lanes&=~v}function Lv(c){if(jo){for(c=c.memoizedState;c!==null;){var f=c.queue;f!==null&&(f.pending=null),c=c.next}jo=!1}Ri=0,An=li=on=null,ph=!1,Fd=Im=0,mh=null}function xr(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return An===null?on.memoizedState=An=c:An=An.next=c,An}function Qi(){if(li===null){var c=on.alternate;c=c!==null?c.memoizedState:null}else c=li.next;var f=An===null?on.memoizedState:An.next;if(f!==null)An=f,li=c;else{if(c===null)throw on.alternate===null?Error(i(467)):Error(i(310));li=c,c={memoizedState:li.memoizedState,baseState:li.baseState,baseQueue:li.baseQueue,queue:li.queue,next:null},An===null?on.memoizedState=An=c:An=An.next=c}return An}function Um(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Bd(c){var f=Fd;return Fd+=1,mh===null&&(mh=[]),c=Dm(mh,c,f),f=on,(An===null?f.memoizedState:An.next)===null&&(f=f.alternate,j.H=f===null||f.memoizedState===null?Kx:$v),c}function Pc(c){if(c!==null&&typeof c=="object"){if(typeof c.then=="function")return Bd(c);if(c.$$typeof===A)return Zt(c)}throw Error(i(438,String(c)))}function Pv(c){var f=null,v=on.updateQueue;if(v!==null&&(f=v.memoCache),f==null){var w=on.alternate;w!==null&&(w=w.updateQueue,w!==null&&(w=w.memoCache,w!=null&&(f={data:w.data.map(function(O){return O.slice()}),index:0})))}if(f==null&&(f={data:[],index:0}),v===null&&(v=Um(),on.updateQueue=v),v.memoCache=f,v=f.data[f.index],v===void 0)for(v=f.data[f.index]=Array(c),w=0;w<c;w++)v[w]=U;return f.index++,v}function Ul(c,f){return typeof f=="function"?f(c):f}function km(c){var f=Qi();return Iv(f,li,c)}function Iv(c,f,v){var w=c.queue;if(w===null)throw Error(i(311));w.lastRenderedReducer=v;var O=c.baseQueue,N=w.pending;if(N!==null){if(O!==null){var $=O.next;O.next=N.next,N.next=$}f.baseQueue=O=N,w.pending=null}if(N=c.baseState,O===null)c.memoizedState=N;else{f=O.next;var se=$=null,_e=null,ze=f,tt=!1;do{var at=ze.lane&-536870913;if(at!==ze.lane?(hn&at)===at:(Ri&at)===at){var Ge=ze.revertLane;if(Ge===0)_e!==null&&(_e=_e.next={lane:0,revertLane:0,gesture:null,action:ze.action,hasEagerState:ze.hasEagerState,eagerState:ze.eagerState,next:null}),at===Ll&&(tt=!0);else if((Ri&Ge)===Ge){ze=ze.next,Ge===Ll&&(tt=!0);continue}else at={lane:0,revertLane:ze.revertLane,gesture:null,action:ze.action,hasEagerState:ze.hasEagerState,eagerState:ze.eagerState,next:null},_e===null?(se=_e=at,$=N):_e=_e.next=at,on.lanes|=Ge,nl|=Ge;at=ze.action,Fu&&v(N,at),N=ze.hasEagerState?ze.eagerState:v(N,at)}else Ge={lane:at,revertLane:ze.revertLane,gesture:ze.gesture,action:ze.action,hasEagerState:ze.hasEagerState,eagerState:ze.eagerState,next:null},_e===null?(se=_e=Ge,$=N):_e=_e.next=Ge,on.lanes|=at,nl|=at;ze=ze.next}while(ze!==null&&ze!==f);if(_e===null?$=N:_e.next=se,!vs(N,c.memoizedState)&&(dr=!0,tt&&(v=Go,v!==null)))throw v;c.memoizedState=N,c.baseState=$,c.baseQueue=_e,w.lastRenderedState=N}return O===null&&(w.lanes=0),[c.memoizedState,w.dispatch]}function Nv(c){var f=Qi(),v=f.queue;if(v===null)throw Error(i(311));v.lastRenderedReducer=c;var w=v.dispatch,O=v.pending,N=f.memoizedState;if(O!==null){v.pending=null;var $=O=O.next;do N=c(N,$.action),$=$.next;while($!==O);vs(N,f.memoizedState)||(dr=!0),f.memoizedState=N,f.baseQueue===null&&(f.baseState=N),v.lastRenderedState=N}return[N,w]}function xx(c,f,v){var w=on,O=Qi(),N=Dn;if(N){if(v===void 0)throw Error(i(407));v=v()}else v=f();var $=!vs((li||O).memoizedState,v);if($&&(O.memoizedState=v,dr=!0),O=O.queue,Hv(Ex.bind(null,w,O,c),[c]),O.getSnapshot!==f||$||An!==null&&An.memoizedState.tag&1){if(w.flags|=2048,Ic(9,{destroy:void 0},wx.bind(null,w,O,v,f),null),Jt===null)throw Error(i(349));N||(Ri&127)!==0||Sx(w,f,v)}return v}function Sx(c,f,v){c.flags|=16384,c={getSnapshot:f,value:v},f=on.updateQueue,f===null?(f=Um(),on.updateQueue=f,f.stores=[c]):(v=f.stores,v===null?f.stores=[c]:v.push(c))}function wx(c,f,v,w){f.value=v,f.getSnapshot=w,Tx(f)&&Mx(c)}function Ex(c,f,v){return v(function(){Tx(f)&&Mx(c)})}function Tx(c){var f=c.getSnapshot;c=c.value;try{var v=f();return!vs(c,v)}catch{return!0}}function Mx(c){var f=ys(c,2);f!==null&&yn(f,c,2)}function Uv(c){var f=xr();if(typeof c=="function"){var v=c;if(c=v(),Fu){nt(!0);try{v()}finally{nt(!1)}}}return f.memoizedState=f.baseState=c,f.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ul,lastRenderedState:c},f}function kv(c,f,v,w){return c.baseState=v,Iv(c,li,typeof w=="function"?w:Ul)}function lM(c,f,v,w,O){if(Vm(c))throw Error(i(485));if(c=f.action,c!==null){var N={payload:O,action:c,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function($){N.listeners.push($)}};j.T!==null?v(!0):N.isTransition=!1,w(N),v=f.pending,v===null?(N.next=f.pending=N,Ax(f,N)):(N.next=v.next,f.pending=v.next=N)}}function Ax(c,f){var v=f.action,w=f.payload,O=c.state;if(f.isTransition){var N=j.T,$={};j.T=$;try{var se=v(O,w),_e=j.S;_e!==null&&_e($,se),Cx(c,f,se)}catch(ze){zv(c,f,ze)}finally{N!==null&&$.types!==null&&(N.types=$.types),j.T=N}}else try{N=v(O,w),Cx(c,f,N)}catch(ze){zv(c,f,ze)}}function Cx(c,f,v){v!==null&&typeof v=="object"&&typeof v.then=="function"?v.then(function(w){Rx(c,f,w)},function(w){return zv(c,f,w)}):Rx(c,f,v)}function Rx(c,f,v){f.status="fulfilled",f.value=v,Dx(f),c.state=v,f=c.pending,f!==null&&(v=f.next,v===f?c.pending=null:(v=v.next,f.next=v,Ax(c,v)))}function zv(c,f,v){var w=c.pending;if(c.pending=null,w!==null){w=w.next;do f.status="rejected",f.reason=v,Dx(f),f=f.next;while(f!==w)}c.action=null}function Dx(c){c=c.listeners;for(var f=0;f<c.length;f++)(0,c[f])()}function Fv(c,f){return f}function Bv(c,f){if(Dn){var v=Jt.formState;if(v!==null){e:{var w=on;if(Dn){if(yi){t:{for(var O=yi,N=co;O.nodeType!==8;){if(!N){O=null;break t}if(O=sl(O.nextSibling),O===null){O=null;break t}}N=O.data,O=N==="F!"||N==="F"?O:null}if(O){yi=sl(O.nextSibling),w=O.data==="F!";break e}}ja(w)}w=!1}w&&(f=v[0])}}return v=xr(),v.memoizedState=v.baseState=f,w={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fv,lastRenderedState:f},v.queue=w,v=Yx.bind(null,on,w),w.dispatch=v,w=Uv(!1),N=Yv.bind(null,on,!1,w.queue),w=xr(),O={state:f,dispatch:null,action:c,pending:null},w.queue=O,v=lM.bind(null,on,O,N,v),O.dispatch=v,w.memoizedState=c,[f,v,!1]}function Ox(c){var f=Qi();return Vv(f,li,c)}function Vv(c,f,v){if(f=Iv(c,f,Fv)[0],c=km(Ul)[0],typeof f=="object"&&f!==null&&typeof f.then=="function")try{var w=Bd(f)}catch($){throw $===Pu?gn:$}else w=f;f=Qi();var O=f.queue,N=O.dispatch;return v!==f.memoizedState&&(on.flags|=2048,Ic(9,{destroy:void 0},Lx.bind(null,O,v),null)),[w,N,c]}function Lx(c,f){c.action=f}function Gv(c){var f=Qi(),v=li;if(v!==null)return Vv(f,v,c);Qi(),f=f.memoizedState,v=Qi();var w=v.queue.dispatch;return v.memoizedState=c,[f,w,!1]}function Ic(c,f,v,w){return c={tag:c,create:v,deps:w,inst:f,next:null},f=on.updateQueue,f===null&&(f=Um(),on.updateQueue=f),v=f.lastEffect,v===null?f.lastEffect=c.next=c:(w=v.next,v.next=c,c.next=w,f.lastEffect=c),c}function zm(){return Qi().memoizedState}function Fm(c,f,v,w){var O=xr();on.flags|=c,O.memoizedState=Ic(1|f,{destroy:void 0},v,w===void 0?null:w)}function Bm(c,f,v,w){var O=Qi();w=w===void 0?null:w;var N=O.memoizedState.inst;li!==null&&w!==null&&Rv(w,li.memoizedState.deps)?O.memoizedState=Ic(f,N,v,w):(on.flags|=c,O.memoizedState=Ic(1|f,N,v,w))}function Px(c,f){Fm(8390656,8,c,f)}function Hv(c,f){Bm(2048,8,c,f)}function Ix(c){on.flags|=4;var f=on.updateQueue;if(f===null)f=Um(),on.updateQueue=f,f.events=[c];else{var v=f.events;v===null?f.events=[c]:v.push(c)}}function Nx(c){var f=Qi().memoizedState;return Ix({ref:f,nextImpl:c}),function(){if((Gt&2)!==0)throw Error(i(440));return f.impl.apply(void 0,arguments)}}function Ux(c,f){return Bm(4,2,c,f)}function kx(c,f){return Bm(4,4,c,f)}function zx(c,f){if(typeof f=="function"){c=c();var v=f(c);return function(){typeof v=="function"?v():f(null)}}if(f!=null)return c=c(),f.current=c,function(){f.current=null}}function Fx(c,f,v){v=v!=null?v.concat([c]):null,Bm(4,4,zx.bind(null,f,c),v)}function jv(){}function Bx(c,f){var v=Qi();f=f===void 0?null:f;var w=v.memoizedState;return f!==null&&Rv(f,w[1])?w[0]:(v.memoizedState=[c,f],c)}function Vx(c,f){var v=Qi();f=f===void 0?null:f;var w=v.memoizedState;if(f!==null&&Rv(f,w[1]))return w[0];if(w=c(),Fu){nt(!0);try{c()}finally{nt(!1)}}return v.memoizedState=[w,f],w}function Wv(c,f,v){return v===void 0||(Ri&1073741824)!==0&&(hn&261930)===0?c.memoizedState=f:(c.memoizedState=v,c=Tn(),on.lanes|=c,nl|=c,v)}function Gx(c,f,v,w){return vs(v,f)?v:dh.current!==null?(c=Wv(c,v,w),vs(c,f)||(dr=!0),c):(Ri&42)===0||(Ri&1073741824)!==0&&(hn&261930)===0?(dr=!0,c.memoizedState=v):(c=Tn(),on.lanes|=c,nl|=c,f)}function Hx(c,f,v,w,O){var N=G.p;G.p=N!==0&&8>N?N:8;var $=j.T,se={};j.T=se,Yv(c,!1,f,v);try{var _e=O(),ze=j.S;if(ze!==null&&ze(se,_e),_e!==null&&typeof _e=="object"&&typeof _e.then=="function"){var tt=Sv(_e,w);Vd(c,f,tt,vo(c))}else Vd(c,f,w,vo(c))}catch(at){Vd(c,f,{then:function(){},status:"rejected",reason:at},vo())}finally{G.p=N,$!==null&&se.types!==null&&($.types=se.types),j.T=$}}function cM(){}function Xv(c,f,v,w){if(c.tag!==5)throw Error(i(476));var O=jx(c).queue;Hx(c,O,f,K,v===null?cM:function(){return Wx(c),v(w)})}function jx(c){var f=c.memoizedState;if(f!==null)return f;f={memoizedState:K,baseState:K,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ul,lastRenderedState:K},next:null};var v={};return f.next={memoizedState:v,baseState:v,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ul,lastRenderedState:v},next:null},c.memoizedState=f,c=c.alternate,c!==null&&(c.memoizedState=f),f}function Wx(c){var f=jx(c);f.next===null&&(f=c.alternate.memoizedState),Vd(c,f.next.queue,{},vo())}function qv(){return Zt(my)}function Xx(){return Qi().memoizedState}function qx(){return Qi().memoizedState}function uM(c){for(var f=c.return;f!==null;){switch(f.tag){case 24:case 3:var v=vo();c=Il(v);var w=Oc(f,c,v);w!==null&&(yn(w,f,v),Lc(w,f,v)),f={cache:bv()},c.payload=f;return}f=f.return}}function fM(c,f,v){var w=vo();v={lane:w,revertLane:0,gesture:null,action:v,hasEagerState:!1,eagerState:null,next:null},Vm(c)?$x(f,v):(v=ym(c,f,v,w),v!==null&&(yn(v,c,w),Zx(v,f,w)))}function Yx(c,f,v){var w=vo();Vd(c,f,v,w)}function Vd(c,f,v,w){var O={lane:w,revertLane:0,gesture:null,action:v,hasEagerState:!1,eagerState:null,next:null};if(Vm(c))$x(f,O);else{var N=c.alternate;if(c.lanes===0&&(N===null||N.lanes===0)&&(N=f.lastRenderedReducer,N!==null))try{var $=f.lastRenderedState,se=N($,v);if(O.hasEagerState=!0,O.eagerState=se,vs(se,$))return Rr(c,f,O,0),Jt===null&&Dd(),!1}catch{}if(v=ym(c,f,O,w),v!==null)return yn(v,c,w),Zx(v,f,w),!0}return!1}function Yv(c,f,v,w){if(w={lane:2,revertLane:We(),gesture:null,action:w,hasEagerState:!1,eagerState:null,next:null},Vm(c)){if(f)throw Error(i(479))}else f=ym(c,v,w,2),f!==null&&yn(f,c,2)}function Vm(c){var f=c.alternate;return c===on||f!==null&&f===on}function $x(c,f){ph=jo=!0;var v=c.pending;v===null?f.next=f:(f.next=v.next,v.next=f),c.pending=f}function Zx(c,f,v){if((v&4194048)!==0){var w=f.lanes;w&=c.pendingLanes,v|=w,f.lanes=v,wi(c,v)}}var gh={readContext:Zt,use:Pc,useCallback:Ui,useContext:Ui,useEffect:Ui,useImperativeHandle:Ui,useLayoutEffect:Ui,useInsertionEffect:Ui,useMemo:Ui,useReducer:Ui,useRef:Ui,useState:Ui,useDebugValue:Ui,useDeferredValue:Ui,useTransition:Ui,useSyncExternalStore:Ui,useId:Ui,useHostTransitionStatus:Ui,useFormState:Ui,useActionState:Ui,useOptimistic:Ui,useMemoCache:Ui,useCacheRefresh:Ui};gh.useEffectEvent=Ui;var Kx={readContext:Zt,use:Pc,useCallback:function(c,f){return xr().memoizedState=[c,f===void 0?null:f],c},useContext:Zt,useEffect:Px,useImperativeHandle:function(c,f,v){v=v!=null?v.concat([c]):null,Fm(4194308,4,zx.bind(null,f,c),v)},useLayoutEffect:function(c,f){return Fm(4194308,4,c,f)},useInsertionEffect:function(c,f){Fm(4,2,c,f)},useMemo:function(c,f){var v=xr();f=f===void 0?null:f;var w=c();if(Fu){nt(!0);try{c()}finally{nt(!1)}}return v.memoizedState=[w,f],w},useReducer:function(c,f,v){var w=xr();if(v!==void 0){var O=v(f);if(Fu){nt(!0);try{v(f)}finally{nt(!1)}}}else O=f;return w.memoizedState=w.baseState=O,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:O},w.queue=c,c=c.dispatch=fM.bind(null,on,c),[w.memoizedState,c]},useRef:function(c){var f=xr();return c={current:c},f.memoizedState=c},useState:function(c){c=Uv(c);var f=c.queue,v=Yx.bind(null,on,f);return f.dispatch=v,[c.memoizedState,v]},useDebugValue:jv,useDeferredValue:function(c,f){var v=xr();return Wv(v,c,f)},useTransition:function(){var c=Uv(!1);return c=Hx.bind(null,on,c.queue,!0,!1),xr().memoizedState=c,[!1,c]},useSyncExternalStore:function(c,f,v){var w=on,O=xr();if(Dn){if(v===void 0)throw Error(i(407));v=v()}else{if(v=f(),Jt===null)throw Error(i(349));(hn&127)!==0||Sx(w,f,v)}O.memoizedState=v;var N={value:v,getSnapshot:f};return O.queue=N,Px(Ex.bind(null,w,N,c),[c]),w.flags|=2048,Ic(9,{destroy:void 0},wx.bind(null,w,N,v,f),null),v},useId:function(){var c=xr(),f=Jt.identifierPrefix;if(Dn){var v=ga,w=Ni;v=(w&~(1<<32-ct(w)-1)).toString(32)+v,f="_"+f+"R_"+v,v=Im++,0<v&&(f+="H"+v.toString(32)),f+="_"}else v=Cv++,f="_"+f+"r_"+v.toString(32)+"_";return c.memoizedState=f},useHostTransitionStatus:qv,useFormState:Bv,useActionState:Bv,useOptimistic:function(c){var f=xr();f.memoizedState=f.baseState=c;var v={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return f.queue=v,f=Yv.bind(null,on,!0,v),v.dispatch=f,[c,f]},useMemoCache:Pv,useCacheRefresh:function(){return xr().memoizedState=uM.bind(null,on)},useEffectEvent:function(c){var f=xr(),v={impl:c};return f.memoizedState=v,function(){if((Gt&2)!==0)throw Error(i(440));return v.impl.apply(void 0,arguments)}}},$v={readContext:Zt,use:Pc,useCallback:Bx,useContext:Zt,useEffect:Hv,useImperativeHandle:Fx,useInsertionEffect:Ux,useLayoutEffect:kx,useMemo:Vx,useReducer:km,useRef:zm,useState:function(){return km(Ul)},useDebugValue:jv,useDeferredValue:function(c,f){var v=Qi();return Gx(v,li.memoizedState,c,f)},useTransition:function(){var c=km(Ul)[0],f=Qi().memoizedState;return[typeof c=="boolean"?c:Bd(c),f]},useSyncExternalStore:xx,useId:Xx,useHostTransitionStatus:qv,useFormState:Ox,useActionState:Ox,useOptimistic:function(c,f){var v=Qi();return kv(v,li,c,f)},useMemoCache:Pv,useCacheRefresh:qx};$v.useEffectEvent=Nx;var Wo={readContext:Zt,use:Pc,useCallback:Bx,useContext:Zt,useEffect:Hv,useImperativeHandle:Fx,useInsertionEffect:Ux,useLayoutEffect:kx,useMemo:Vx,useReducer:Nv,useRef:zm,useState:function(){return Nv(Ul)},useDebugValue:jv,useDeferredValue:function(c,f){var v=Qi();return li===null?Wv(v,c,f):Gx(v,li.memoizedState,c,f)},useTransition:function(){var c=Nv(Ul)[0],f=Qi().memoizedState;return[typeof c=="boolean"?c:Bd(c),f]},useSyncExternalStore:xx,useId:Xx,useHostTransitionStatus:qv,useFormState:Gv,useActionState:Gv,useOptimistic:function(c,f){var v=Qi();return li!==null?kv(v,li,c,f):(v.baseState=c,[c,v.queue.dispatch])},useMemoCache:Pv,useCacheRefresh:qx};Wo.useEffectEvent=Nx;function Gm(c,f,v,w){f=c.memoizedState,v=v(w,f),v=v==null?f:p({},f,v),c.memoizedState=v,c.lanes===0&&(c.updateQueue.baseState=v)}var Gd={enqueueSetState:function(c,f,v){c=c._reactInternals;var w=vo(),O=Il(w);O.payload=f,v!=null&&(O.callback=v),f=Oc(c,O,w),f!==null&&(yn(f,c,w),Lc(f,c,w))},enqueueReplaceState:function(c,f,v){c=c._reactInternals;var w=vo(),O=Il(w);O.tag=1,O.payload=f,v!=null&&(O.callback=v),f=Oc(c,O,w),f!==null&&(yn(f,c,w),Lc(f,c,w))},enqueueForceUpdate:function(c,f){c=c._reactInternals;var v=vo(),w=Il(v);w.tag=2,f!=null&&(w.callback=f),f=Oc(c,w,v),f!==null&&(yn(f,c,v),Lc(f,c,v))}};function Zv(c,f,v,w,O,N,$){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(w,N,$):f.prototype&&f.prototype.isPureReactComponent?!Qf(v,w)||!Qf(O,N):!0}function Kv(c,f,v,w){c=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(v,w),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(v,w),f.state!==c&&Gd.enqueueReplaceState(f,f.state,null)}function Nc(c,f){var v=f;if("ref"in f){v={};for(var w in f)w!=="ref"&&(v[w]=f[w])}if(c=c.defaultProps){v===f&&(v=p({},v));for(var O in c)v[O]===void 0&&(v[O]=c[O])}return v}function Qx(c){Rd(c)}function Qv(c){console.error(c)}function Jv(c){Rd(c)}function Hm(c,f){try{var v=c.onUncaughtError;v(f.value,{componentStack:f.stack})}catch(w){setTimeout(function(){throw w})}}function Jx(c,f,v){try{var w=c.onCaughtError;w(v.value,{componentStack:v.stack,errorBoundary:f.tag===1?f.stateNode:null})}catch(O){setTimeout(function(){throw O})}}function ey(c,f,v){return v=Il(v),v.tag=3,v.payload={element:null},v.callback=function(){Hm(c,f)},v}function ty(c){return c=Il(c),c.tag=3,c}function e1(c,f,v,w){var O=v.type.getDerivedStateFromError;if(typeof O=="function"){var N=w.value;c.payload=function(){return O(N)},c.callback=function(){Jx(f,v,w)}}var $=v.stateNode;$!==null&&typeof $.componentDidCatch=="function"&&(c.callback=function(){Jx(f,v,w),typeof O!="function"&&(tr===null?tr=new Set([this]):tr.add(this));var se=w.stack;this.componentDidCatch(w.value,{componentStack:se!==null?se:""})})}function Sr(c,f,v,w,O){if(v.flags|=32768,w!==null&&typeof w=="object"&&typeof w.then=="function"){if(f=v.alternate,f!==null&&Ya(f,v,O,!0),v=Fs.current,v!==null){switch(v.tag){case 31:case 13:return _s===null?wh():v.alternate===null&&ki===0&&(ki=3),v.flags&=-257,v.flags|=65536,v.lanes=O,w===Rm?v.flags|=16384:(f=v.updateQueue,f===null?v.updateQueue=new Set([w]):f.add(w),ep(c,w,O)),!1;case 22:return v.flags|=65536,w===Rm?v.flags|=16384:(f=v.updateQueue,f===null?(f={transitions:null,markerInstances:null,retryQueue:new Set([w])},v.updateQueue=f):(v=f.retryQueue,v===null?f.retryQueue=new Set([w]):v.add(w)),ep(c,w,O)),!1}throw Error(i(435,v.tag))}return ep(c,w,O),wh(),!1}if(Dn)return f=Fs.current,f!==null?((f.flags&65536)===0&&(f.flags|=256),f.flags|=65536,f.lanes=O,w!==oh&&(c=Error(i(422),{cause:w}),Wa(lo(c,v)))):(w!==oh&&(f=Error(i(423),{cause:w}),Wa(lo(f,v))),c=c.current.alternate,c.flags|=65536,O&=-O,c.lanes|=O,w=lo(w,v),O=ey(c.stateNode,w,O),Ht(c,O),ki!==4&&(ki=2)),!1;var N=Error(i(520),{cause:w});if(N=lo(N,v),$u===null?$u=[N]:$u.push(N),ki!==4&&(ki=2),f===null)return!0;w=lo(w,v),v=f;do{switch(v.tag){case 3:return v.flags|=65536,c=O&-O,v.lanes|=c,c=ey(v.stateNode,w,c),Ht(v,c),!1;case 1:if(f=v.type,N=v.stateNode,(v.flags&128)===0&&(typeof f.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(tr===null||!tr.has(N))))return v.flags|=65536,O&=-O,v.lanes|=O,O=ty(O),e1(O,c,v,w),Ht(v,O),!1}v=v.return}while(v!==null);return!1}var jm=Error(i(461)),dr=!1;function Dr(c,f,v,w){f.child=c===null?Lm(f,null,v,w):Pl(f,c.child,v,w)}function ny(c,f,v,w,O){v=v.render;var N=f.ref;if("ref"in w){var $={};for(var se in w)se!=="ref"&&($[se]=w[se])}else $=w;return Rc(f),w=Nm(c,f,v,$,N,O),se=Dv(),c!==null&&!dr?(Ov(c,f,O),Ji(c,f,O)):(Dn&&se&&Ha(f),f.flags|=1,Dr(c,f,w,O),f.child)}function Gu(c,f,v,w,O){if(c===null){var N=v.type;return typeof N=="function"&&!bm(N)&&N.defaultProps===void 0&&v.compare===null?(f.tag=15,f.type=N,Wm(c,f,N,w,O)):(c=Va(v.type,null,w,f,f.mode,O),c.ref=f.ref,c.return=f,f.child=c)}if(N=c.child,!Km(c,O)){var $=N.memoizedProps;if(v=v.compare,v=v!==null?v:Qf,v($,w)&&c.ref===f.ref)return Ji(c,f,O)}return f.flags|=1,c=Us(N,w),c.ref=f.ref,c.return=f,f.child=c}function Wm(c,f,v,w,O){if(c!==null){var N=c.memoizedProps;if(Qf(N,w)&&c.ref===f.ref)if(dr=!1,f.pendingProps=w=N,Km(c,O))(c.flags&131072)!==0&&(dr=!0);else return f.lanes=c.lanes,Ji(c,f,O)}return vh(c,f,v,w,O)}function Hu(c,f,v,w){var O=w.children,N=c!==null?c.memoizedState:null;if(c===null&&f.stateNode===null&&(f.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),w.mode==="hidden"){if((f.flags&128)!==0){if(N=N!==null?N.baseLanes|v:v,c!==null){for(w=f.child=c.child,O=0;w!==null;)O=O|w.lanes|w.childLanes,w=w.sibling;w=O&~N}else w=0,f.child=null;return Vs(c,f,N,v,w)}if((v&536870912)!==0)f.memoizedState={baseLanes:0,cachePool:null},c!==null&&Pd(f,N!==null?N.cachePool:null),N!==null?yx(f,N):Mv(),bx(f);else return w=f.lanes=536870912,Vs(c,f,N!==null?N.baseLanes|v:v,v,w)}else N!==null?(Pd(f,N.cachePool),yx(f,N),Bs(),f.memoizedState=null):(c!==null&&Pd(f,null),Mv(),Bs());return Dr(c,f,O,v),f.child}function Za(c,f){return c!==null&&c.tag===22||f.stateNode!==null||(f.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),f.sibling}function Vs(c,f,v,w,O){var N=Cm();return N=N===null?null:{parent:hr._currentValue,pool:N},f.memoizedState={baseLanes:v,cachePool:N},c!==null&&Pd(f,null),Mv(),bx(f),c!==null&&Ya(c,f,w,!0),f.childLanes=O,null}function Xm(c,f){return f=Zm({mode:f.mode,children:f.children},c.mode),f.ref=c.ref,c.child=f,f.return=c,f}function t1(c,f,v){return Pl(f,c.child,null,v),c=Xm(f,f.pendingProps),c.flags|=2,Ki(f),f.memoizedState=null,c}function qm(c,f,v){var w=f.pendingProps,O=(f.flags&128)!==0;if(f.flags&=-129,c===null){if(Dn){if(w.mode==="hidden")return c=Xm(f,w),f.lanes=536870912,Za(null,c);if(Av(f),(c=yi)?(c=YL(c,co),c=c!==null&&c.data==="&"?c:null,c!==null&&(f.memoizedState={dehydrated:c,treeContext:Rl!==null?{id:Ni,overflow:ga}:null,retryLane:536870912,hydrationErrors:null},v=ih(c),v.return=f,f.child=v,Wi=f,yi=null)):c=null,c===null)throw ja(f);return f.lanes=536870912,null}return Xm(f,w)}var N=c.memoizedState;if(N!==null){var $=N.dehydrated;if(Av(f),O)if(f.flags&256)f.flags&=-257,f=t1(c,f,v);else if(f.memoizedState!==null)f.child=c.child,f.flags|=128,f=null;else throw Error(i(558));else if(dr||Ya(c,f,v,!1),O=(v&c.childLanes)!==0,dr||O){if(w=Jt,w!==null&&($=rs(w,v),$!==0&&$!==N.retryLane))throw N.retryLane=$,ys(c,$),yn(w,c,$),jm;wh(),f=t1(c,f,v)}else c=N.treeContext,yi=sl($.nextSibling),Wi=f,Dn=!0,Dl=null,co=!1,c!==null&&wm(f,c),f=Xm(f,w),f.flags|=4096;return f}return c=Us(c.child,{mode:w.mode,children:w.children}),c.ref=f.ref,f.child=c,c.return=f,c}function ju(c,f){var v=f.ref;if(v===null)c!==null&&c.ref!==null&&(f.flags|=4194816);else{if(typeof v!="function"&&typeof v!="object")throw Error(i(284));(c===null||c.ref!==v)&&(f.flags|=4194816)}}function vh(c,f,v,w,O){return Rc(f),v=Nm(c,f,v,w,void 0,O),w=Dv(),c!==null&&!dr?(Ov(c,f,O),Ji(c,f,O)):(Dn&&w&&Ha(f),f.flags|=1,Dr(c,f,v,O),f.child)}function Hd(c,f,v,w,O,N){return Rc(f),f.updateQueue=null,v=Bu(f,w,v,O),_x(c),w=Dv(),c!==null&&!dr?(Ov(c,f,N),Ji(c,f,N)):(Dn&&w&&Ha(f),f.flags|=1,Dr(c,f,v,N),f.child)}function Ym(c,f,v,w,O){if(Rc(f),f.stateNode===null){var N=wc,$=v.contextType;typeof $=="object"&&$!==null&&(N=Zt($)),N=new v(w,N),f.memoizedState=N.state!==null&&N.state!==void 0?N.state:null,N.updater=Gd,f.stateNode=N,N._reactInternals=f,N=f.stateNode,N.props=w,N.state=f.memoizedState,N.refs={},Ud(f),$=v.contextType,N.context=typeof $=="object"&&$!==null?Zt($):wc,N.state=f.memoizedState,$=v.getDerivedStateFromProps,typeof $=="function"&&(Gm(f,v,$,w),N.state=f.memoizedState),typeof v.getDerivedStateFromProps=="function"||typeof N.getSnapshotBeforeUpdate=="function"||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||($=N.state,typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount(),$!==N.state&&Gd.enqueueReplaceState(N,N.state,null),fh(f,w,N,O),kd(),N.state=f.memoizedState),typeof N.componentDidMount=="function"&&(f.flags|=4194308),w=!0}else if(c===null){N=f.stateNode;var se=f.memoizedProps,_e=Nc(v,se);N.props=_e;var ze=N.context,tt=v.contextType;$=wc,typeof tt=="object"&&tt!==null&&($=Zt(tt));var at=v.getDerivedStateFromProps;tt=typeof at=="function"||typeof N.getSnapshotBeforeUpdate=="function",se=f.pendingProps!==se,tt||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(se||ze!==$)&&Kv(f,N,w,$),bs=!1;var Ge=f.memoizedState;N.state=Ge,fh(f,w,N,O),kd(),ze=f.memoizedState,se||Ge!==ze||bs?(typeof at=="function"&&(Gm(f,v,at,w),ze=f.memoizedState),(_e=bs||Zv(f,v,_e,w,Ge,ze,$))?(tt||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount()),typeof N.componentDidMount=="function"&&(f.flags|=4194308)):(typeof N.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=w,f.memoizedState=ze),N.props=w,N.state=ze,N.context=$,w=_e):(typeof N.componentDidMount=="function"&&(f.flags|=4194308),w=!1)}else{N=f.stateNode,Ev(c,f),$=f.memoizedProps,tt=Nc(v,$),N.props=tt,at=f.pendingProps,Ge=N.context,ze=v.contextType,_e=wc,typeof ze=="object"&&ze!==null&&(_e=Zt(ze)),se=v.getDerivedStateFromProps,(ze=typeof se=="function"||typeof N.getSnapshotBeforeUpdate=="function")||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||($!==at||Ge!==_e)&&Kv(f,N,w,_e),bs=!1,Ge=f.memoizedState,N.state=Ge,fh(f,w,N,O),kd();var $e=f.memoizedState;$!==at||Ge!==$e||bs||c!==null&&c.dependencies!==null&&Ld(c.dependencies)?(typeof se=="function"&&(Gm(f,v,se,w),$e=f.memoizedState),(tt=bs||Zv(f,v,tt,w,Ge,$e,_e)||c!==null&&c.dependencies!==null&&Ld(c.dependencies))?(ze||typeof N.UNSAFE_componentWillUpdate!="function"&&typeof N.componentWillUpdate!="function"||(typeof N.componentWillUpdate=="function"&&N.componentWillUpdate(w,$e,_e),typeof N.UNSAFE_componentWillUpdate=="function"&&N.UNSAFE_componentWillUpdate(w,$e,_e)),typeof N.componentDidUpdate=="function"&&(f.flags|=4),typeof N.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof N.componentDidUpdate!="function"||$===c.memoizedProps&&Ge===c.memoizedState||(f.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||$===c.memoizedProps&&Ge===c.memoizedState||(f.flags|=1024),f.memoizedProps=w,f.memoizedState=$e),N.props=w,N.state=$e,N.context=_e,w=tt):(typeof N.componentDidUpdate!="function"||$===c.memoizedProps&&Ge===c.memoizedState||(f.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||$===c.memoizedProps&&Ge===c.memoizedState||(f.flags|=1024),w=!1)}return N=w,ju(c,f),w=(f.flags&128)!==0,N||w?(N=f.stateNode,v=w&&typeof v.getDerivedStateFromError!="function"?null:N.render(),f.flags|=1,c!==null&&w?(f.child=Pl(f,c.child,null,O),f.child=Pl(f,null,v,O)):Dr(c,f,v,O),f.memoizedState=N.state,c=f.child):c=Ji(c,f,O),c}function n1(c,f,v,w){return Ac(),f.flags|=256,Dr(c,f,v,w),f.child}var iy={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function cs(c){return{baseLanes:c,cachePool:wv()}}function $m(c,f,v){return c=c!==null?c.childLanes&~v:0,f&&(c|=ws),c}function i1(c,f,v){var w=f.pendingProps,O=!1,N=(f.flags&128)!==0,$;if(($=N)||($=c!==null&&c.memoizedState===null?!1:(On.current&2)!==0),$&&(O=!0,f.flags&=-129),$=(f.flags&32)!==0,f.flags&=-33,c===null){if(Dn){if(O?Nl(f):Bs(),(c=yi)?(c=YL(c,co),c=c!==null&&c.data!=="&"?c:null,c!==null&&(f.memoizedState={dehydrated:c,treeContext:Rl!==null?{id:Ni,overflow:ga}:null,retryLane:536870912,hydrationErrors:null},v=ih(c),v.return=f,f.child=v,Wi=f,yi=null)):c=null,c===null)throw ja(f);return TM(c)?f.lanes=32:f.lanes=536870912,null}var se=w.children;return w=w.fallback,O?(Bs(),O=f.mode,se=Zm({mode:"hidden",children:se},O),w=Ec(w,O,v,null),se.return=f,w.return=f,se.sibling=w,f.child=se,w=f.child,w.memoizedState=cs(v),w.childLanes=$m(c,$,v),f.memoizedState=iy,Za(null,w)):(Nl(f),jd(f,se))}var _e=c.memoizedState;if(_e!==null&&(se=_e.dehydrated,se!==null)){if(N)f.flags&256?(Nl(f),f.flags&=-257,f=ry(c,f,v)):f.memoizedState!==null?(Bs(),f.child=c.child,f.flags|=128,f=null):(Bs(),se=w.fallback,O=f.mode,w=Zm({mode:"visible",children:w.children},O),se=Ec(se,O,v,null),se.flags|=2,w.return=f,se.return=f,w.sibling=se,f.child=w,Pl(f,c.child,null,v),w=f.child,w.memoizedState=cs(v),w.childLanes=$m(c,$,v),f.memoizedState=iy,f=Za(null,w));else if(Nl(f),TM(se)){if($=se.nextSibling&&se.nextSibling.dataset,$)var ze=$.dgst;$=ze,w=Error(i(419)),w.stack="",w.digest=$,Wa({value:w,source:null,stack:null}),f=ry(c,f,v)}else if(dr||Ya(c,f,v,!1),$=(v&c.childLanes)!==0,dr||$){if($=Jt,$!==null&&(w=rs($,v),w!==0&&w!==_e.retryLane))throw _e.retryLane=w,ys(c,w),yn($,c,w),jm;EM(se)||wh(),f=ry(c,f,v)}else EM(se)?(f.flags|=192,f.child=c.child,f=null):(c=_e.treeContext,yi=sl(se.nextSibling),Wi=f,Dn=!0,Dl=null,co=!1,c!==null&&wm(f,c),f=jd(f,w.children),f.flags|=4096);return f}return O?(Bs(),se=w.fallback,O=f.mode,_e=c.child,ze=_e.sibling,w=Us(_e,{mode:"hidden",children:w.children}),w.subtreeFlags=_e.subtreeFlags&65011712,ze!==null?se=Us(ze,se):(se=Ec(se,O,v,null),se.flags|=2),se.return=f,w.return=f,w.sibling=se,f.child=w,Za(null,w),w=f.child,se=c.child.memoizedState,se===null?se=cs(v):(O=se.cachePool,O!==null?(_e=hr._currentValue,O=O.parent!==_e?{parent:_e,pool:_e}:O):O=wv(),se={baseLanes:se.baseLanes|v,cachePool:O}),w.memoizedState=se,w.childLanes=$m(c,$,v),f.memoizedState=iy,Za(c.child,w)):(Nl(f),v=c.child,c=v.sibling,v=Us(v,{mode:"visible",children:w.children}),v.return=f,v.sibling=null,c!==null&&($=f.deletions,$===null?(f.deletions=[c],f.flags|=16):$.push(c)),f.child=v,f.memoizedState=null,v)}function jd(c,f){return f=Zm({mode:"visible",children:f},c.mode),f.return=c,c.child=f}function Zm(c,f){return c=Ii(22,c,null,f),c.lanes=0,c}function ry(c,f,v){return Pl(f,c.child,null,v),c=jd(f,f.pendingProps.children),c.flags|=2,f.memoizedState=null,c}function r1(c,f,v){c.lanes|=f;var w=c.alternate;w!==null&&(w.lanes|=f),Tm(c.return,f,v)}function Wu(c,f,v,w,O,N){var $=c.memoizedState;$===null?c.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:w,tail:v,tailMode:O,treeForkCount:N}:($.isBackwards=f,$.rendering=null,$.renderingStartTime=0,$.last=w,$.tail=v,$.tailMode=O,$.treeForkCount=N)}function Gs(c,f,v){var w=f.pendingProps,O=w.revealOrder,N=w.tail;w=w.children;var $=On.current,se=($&2)!==0;if(se?($=$&1|2,f.flags|=128):$&=1,Q(On,$),Dr(c,f,w,v),w=Dn?sh:0,!se&&c!==null&&(c.flags&128)!==0)e:for(c=f.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&r1(c,v,f);else if(c.tag===19)r1(c,v,f);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===f)break e;for(;c.sibling===null;){if(c.return===null||c.return===f)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}switch(O){case"forwards":for(v=f.child,O=null;v!==null;)c=v.alternate,c!==null&&fo(c)===null&&(O=v),v=v.sibling;v=O,v===null?(O=f.child,f.child=null):(O=v.sibling,v.sibling=null),Wu(f,!1,O,v,N,w);break;case"backwards":case"unstable_legacy-backwards":for(v=null,O=f.child,f.child=null;O!==null;){if(c=O.alternate,c!==null&&fo(c)===null){f.child=O;break}c=O.sibling,O.sibling=v,v=O,O=c}Wu(f,!0,v,null,N,w);break;case"together":Wu(f,!1,null,null,void 0,w);break;default:f.memoizedState=null}return f.child}function Ji(c,f,v){if(c!==null&&(f.dependencies=c.dependencies),nl|=f.lanes,(v&f.childLanes)===0)if(c!==null){if(Ya(c,f,v,!1),(v&f.childLanes)===0)return null}else return null;if(c!==null&&f.child!==c.child)throw Error(i(153));if(f.child!==null){for(c=f.child,v=Us(c,c.pendingProps),f.child=v,v.return=f;c.sibling!==null;)c=c.sibling,v=v.sibling=Us(c,c.pendingProps),v.return=f;v.sibling=null}return f.child}function Km(c,f){return(c.lanes&f)!==0?!0:(c=c.dependencies,!!(c!==null&&Ld(c)))}function hM(c,f,v){switch(f.tag){case 3:pe(f,f.stateNode.containerInfo),Ol(f,hr,c.memoizedState.cache),Ac();break;case 27:case 5:Te(f);break;case 4:pe(f,f.stateNode.containerInfo);break;case 10:Ol(f,f.type,f.memoizedProps.value);break;case 31:if(f.memoizedState!==null)return f.flags|=128,Av(f),null;break;case 13:var w=f.memoizedState;if(w!==null)return w.dehydrated!==null?(Nl(f),f.flags|=128,null):(v&f.child.childLanes)!==0?i1(c,f,v):(Nl(f),c=Ji(c,f,v),c!==null?c.sibling:null);Nl(f);break;case 19:var O=(c.flags&128)!==0;if(w=(v&f.childLanes)!==0,w||(Ya(c,f,v,!1),w=(v&f.childLanes)!==0),O){if(w)return Gs(c,f,v);f.flags|=128}if(O=f.memoizedState,O!==null&&(O.rendering=null,O.tail=null,O.lastEffect=null),Q(On,On.current),w)break;return null;case 22:return f.lanes=0,Hu(c,f,v,f.pendingProps);case 24:Ol(f,hr,c.memoizedState.cache)}return Ji(c,f,v)}function Qm(c,f,v){if(c!==null)if(c.memoizedProps!==f.pendingProps)dr=!0;else{if(!Km(c,v)&&(f.flags&128)===0)return dr=!1,hM(c,f,v);dr=(c.flags&131072)!==0}else dr=!1,Dn&&(f.flags&1048576)!==0&&fx(f,sh,f.index);switch(f.lanes=0,f.tag){case 16:e:{var w=f.pendingProps;if(c=Iu(f.elementType),f.type=c,typeof c=="function")bm(c)?(w=Nc(c,w),f.tag=1,f=Ym(null,f,c,w,v)):(f.tag=0,f=vh(null,f,c,w,v));else{if(c!=null){var O=c.$$typeof;if(O===M){f.tag=11,f=ny(null,f,c,w,v);break e}else if(O===L){f.tag=14,f=Gu(null,f,c,w,v);break e}}throw f=W(c)||c,Error(i(306,f,""))}}return f;case 0:return vh(c,f,f.type,f.pendingProps,v);case 1:return w=f.type,O=Nc(w,f.pendingProps),Ym(c,f,w,O,v);case 3:e:{if(pe(f,f.stateNode.containerInfo),c===null)throw Error(i(387));w=f.pendingProps;var N=f.memoizedState;O=N.element,Ev(c,f),fh(f,w,null,v);var $=f.memoizedState;if(w=$.cache,Ol(f,hr,w),w!==N.cache&&Mm(f,[hr],v,!0),kd(),w=$.element,N.isDehydrated)if(N={element:w,isDehydrated:!1,cache:$.cache},f.updateQueue.baseState=N,f.memoizedState=N,f.flags&256){f=n1(c,f,w,v);break e}else if(w!==O){O=lo(Error(i(424)),f),Wa(O),f=n1(c,f,w,v);break e}else for(c=f.stateNode.containerInfo,c.nodeType===9?c=c.body:c=c.nodeName==="HTML"?c.ownerDocument.body:c,yi=sl(c.firstChild),Wi=f,Dn=!0,Dl=null,co=!0,v=Lm(f,null,w,v),f.child=v;v;)v.flags=v.flags&-3|4096,v=v.sibling;else{if(Ac(),w===O){f=Ji(c,f,v);break e}Dr(c,f,w,v)}f=f.child}return f;case 26:return ju(c,f),c===null?(v=eP(f.type,null,f.pendingProps,null))?f.memoizedState=v:Dn||(v=f.type,c=f.pendingProps,w=l1(le.current).createElement(v),w[$n]=f,w[Hi]=c,Ts(w,v,c),it(w),f.stateNode=w):f.memoizedState=eP(f.type,c.memoizedProps,f.pendingProps,c.memoizedState),null;case 27:return Te(f),c===null&&Dn&&(w=f.stateNode=KL(f.type,f.pendingProps,le.current),Wi=f,co=!0,O=yi,Ah(f.type)?(MM=O,yi=sl(w.firstChild)):yi=O),Dr(c,f,f.pendingProps.children,v),ju(c,f),c===null&&(f.flags|=4194304),f.child;case 5:return c===null&&Dn&&((O=w=yi)&&(w=pH(w,f.type,f.pendingProps,co),w!==null?(f.stateNode=w,Wi=f,yi=sl(w.firstChild),co=!1,O=!0):O=!1),O||ja(f)),Te(f),O=f.type,N=f.pendingProps,$=c!==null?c.memoizedProps:null,w=N.children,xM(O,N)?w=null:$!==null&&xM(O,$)&&(f.flags|=32),f.memoizedState!==null&&(O=Nm(c,f,Vu,null,null,v),my._currentValue=O),ju(c,f),Dr(c,f,w,v),f.child;case 6:return c===null&&Dn&&((c=v=yi)&&(v=mH(v,f.pendingProps,co),v!==null?(f.stateNode=v,Wi=f,yi=null,c=!0):c=!1),c||ja(f)),null;case 13:return i1(c,f,v);case 4:return pe(f,f.stateNode.containerInfo),w=f.pendingProps,c===null?f.child=Pl(f,null,w,v):Dr(c,f,w,v),f.child;case 11:return ny(c,f,f.type,f.pendingProps,v);case 7:return Dr(c,f,f.pendingProps,v),f.child;case 8:return Dr(c,f,f.pendingProps.children,v),f.child;case 12:return Dr(c,f,f.pendingProps.children,v),f.child;case 10:return w=f.pendingProps,Ol(f,f.type,w.value),Dr(c,f,w.children,v),f.child;case 9:return O=f.type._context,w=f.pendingProps.children,Rc(f),O=Zt(O),w=w(O),f.flags|=1,Dr(c,f,w,v),f.child;case 14:return Gu(c,f,f.type,f.pendingProps,v);case 15:return Wm(c,f,f.type,f.pendingProps,v);case 19:return Gs(c,f,v);case 31:return qm(c,f,v);case 22:return Hu(c,f,v,f.pendingProps);case 24:return Rc(f),w=Zt(hr),c===null?(O=Cm(),O===null&&(O=Jt,N=bv(),O.pooledCache=N,N.refCount++,N!==null&&(O.pooledCacheLanes|=v),O=N),f.memoizedState={parent:w,cache:O},Ud(f),Ol(f,hr,O)):((c.lanes&v)!==0&&(Ev(c,f),fh(f,null,null,v),kd()),O=c.memoizedState,N=f.memoizedState,O.parent!==w?(O={parent:w,cache:w},f.memoizedState=O,f.lanes===0&&(f.memoizedState=f.updateQueue.baseState=O),Ol(f,hr,w)):(w=N.cache,Ol(f,hr,w),w!==O.cache&&Mm(f,[hr],v,!0))),Dr(c,f,f.pendingProps.children,v),f.child;case 29:throw f.pendingProps}throw Error(i(156,f.tag))}function Ka(c){c.flags|=4}function Wd(c,f,v,w,O){if((f=(c.mode&32)!==0)&&(f=!1),f){if(c.flags|=16777216,(O&335544128)===O)if(c.stateNode.complete)c.flags|=8192;else if(Fi())c.flags|=8192;else throw $a=Rm,Id}else c.flags&=-16777217}function sy(c,f){if(f.type!=="stylesheet"||(f.state.loading&4)!==0)c.flags&=-16777217;else if(c.flags|=16777216,!sP(f))if(Fi())c.flags|=8192;else throw $a=Rm,Id}function kl(c,f){f!==null&&(c.flags|=4),c.flags&16384&&(f=c.tag!==22?Tt():536870912,c.lanes|=f,Ei|=f)}function Qa(c,f){if(!Dn)switch(c.tailMode){case"hidden":f=c.tail;for(var v=null;f!==null;)f.alternate!==null&&(v=f),f=f.sibling;v===null?c.tail=null:v.sibling=null;break;case"collapsed":v=c.tail;for(var w=null;v!==null;)v.alternate!==null&&(w=v),v=v.sibling;w===null?f||c.tail===null?c.tail=null:c.tail.sibling=null:w.sibling=null}}function ci(c){var f=c.alternate!==null&&c.alternate.child===c.child,v=0,w=0;if(f)for(var O=c.child;O!==null;)v|=O.lanes|O.childLanes,w|=O.subtreeFlags&65011712,w|=O.flags&65011712,O.return=c,O=O.sibling;else for(O=c.child;O!==null;)v|=O.lanes|O.childLanes,w|=O.subtreeFlags,w|=O.flags,O.return=c,O=O.sibling;return c.subtreeFlags|=w,c.childLanes=v,f}function Xd(c,f,v){var w=f.pendingProps;switch(Sm(f),f.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ci(f),null;case 1:return ci(f),null;case 3:return v=f.stateNode,w=null,c!==null&&(w=c.memoizedState.cache),f.memoizedState.cache!==w&&(f.flags|=2048),qa(hr),Ee(),v.pendingContext&&(v.context=v.pendingContext,v.pendingContext=null),(c===null||c.child===null)&&(ah(f)?Ka(f):c===null||c.memoizedState.isDehydrated&&(f.flags&256)===0||(f.flags|=1024,Em())),ci(f),null;case 26:var O=f.type,N=f.memoizedState;return c===null?(Ka(f),N!==null?(ci(f),sy(f,N)):(ci(f),Wd(f,O,null,w,v))):N?N!==c.memoizedState?(Ka(f),ci(f),sy(f,N)):(ci(f),f.flags&=-16777217):(c=c.memoizedProps,c!==w&&Ka(f),ci(f),Wd(f,O,c,w,v)),null;case 27:if(xe(f),v=le.current,O=f.type,c!==null&&f.stateNode!=null)c.memoizedProps!==w&&Ka(f);else{if(!w){if(f.stateNode===null)throw Error(i(166));return ci(f),null}c=re.current,ah(f)?hx(f):(c=KL(O,w,v),f.stateNode=c,Ka(f))}return ci(f),null;case 5:if(xe(f),O=f.type,c!==null&&f.stateNode!=null)c.memoizedProps!==w&&Ka(f);else{if(!w){if(f.stateNode===null)throw Error(i(166));return ci(f),null}if(N=re.current,ah(f))hx(f);else{var $=l1(le.current);switch(N){case 1:N=$.createElementNS("http://www.w3.org/2000/svg",O);break;case 2:N=$.createElementNS("http://www.w3.org/1998/Math/MathML",O);break;default:switch(O){case"svg":N=$.createElementNS("http://www.w3.org/2000/svg",O);break;case"math":N=$.createElementNS("http://www.w3.org/1998/Math/MathML",O);break;case"script":N=$.createElement("div"),N.innerHTML="<script><\/script>",N=N.removeChild(N.firstChild);break;case"select":N=typeof w.is=="string"?$.createElement("select",{is:w.is}):$.createElement("select"),w.multiple?N.multiple=!0:w.size&&(N.size=w.size);break;default:N=typeof w.is=="string"?$.createElement(O,{is:w.is}):$.createElement(O)}}N[$n]=f,N[Hi]=w;e:for($=f.child;$!==null;){if($.tag===5||$.tag===6)N.appendChild($.stateNode);else if($.tag!==4&&$.tag!==27&&$.child!==null){$.child.return=$,$=$.child;continue}if($===f)break e;for(;$.sibling===null;){if($.return===null||$.return===f)break e;$=$.return}$.sibling.return=$.return,$=$.sibling}f.stateNode=N;e:switch(Ts(N,O,w),O){case"button":case"input":case"select":case"textarea":w=!!w.autoFocus;break e;case"img":w=!0;break e;default:w=!1}w&&Ka(f)}}return ci(f),Wd(f,f.type,c===null?null:c.memoizedProps,f.pendingProps,v),null;case 6:if(c&&f.stateNode!=null)c.memoizedProps!==w&&Ka(f);else{if(typeof w!="string"&&f.stateNode===null)throw Error(i(166));if(c=le.current,ah(f)){if(c=f.stateNode,v=f.memoizedProps,w=null,O=Wi,O!==null)switch(O.tag){case 27:case 5:w=O.memoizedProps}c[$n]=f,c=!!(c.nodeValue===v||w!==null&&w.suppressHydrationWarning===!0||BL(c.nodeValue,v)),c||ja(f,!0)}else c=l1(c).createTextNode(w),c[$n]=f,f.stateNode=c}return ci(f),null;case 31:if(v=f.memoizedState,c===null||c.memoizedState!==null){if(w=ah(f),v!==null){if(c===null){if(!w)throw Error(i(318));if(c=f.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(i(557));c[$n]=f}else Ac(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;ci(f),c=!1}else v=Em(),c!==null&&c.memoizedState!==null&&(c.memoizedState.hydrationErrors=v),c=!0;if(!c)return f.flags&256?(Ki(f),f):(Ki(f),null);if((f.flags&128)!==0)throw Error(i(558))}return ci(f),null;case 13:if(w=f.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(O=ah(f),w!==null&&w.dehydrated!==null){if(c===null){if(!O)throw Error(i(318));if(O=f.memoizedState,O=O!==null?O.dehydrated:null,!O)throw Error(i(317));O[$n]=f}else Ac(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;ci(f),O=!1}else O=Em(),c!==null&&c.memoizedState!==null&&(c.memoizedState.hydrationErrors=O),O=!0;if(!O)return f.flags&256?(Ki(f),f):(Ki(f),null)}return Ki(f),(f.flags&128)!==0?(f.lanes=v,f):(v=w!==null,c=c!==null&&c.memoizedState!==null,v&&(w=f.child,O=null,w.alternate!==null&&w.alternate.memoizedState!==null&&w.alternate.memoizedState.cachePool!==null&&(O=w.alternate.memoizedState.cachePool.pool),N=null,w.memoizedState!==null&&w.memoizedState.cachePool!==null&&(N=w.memoizedState.cachePool.pool),N!==O&&(w.flags|=2048)),v!==c&&v&&(f.child.flags|=8192),kl(f,f.updateQueue),ci(f),null);case 4:return Ee(),c===null&&gM(f.stateNode.containerInfo),ci(f),null;case 10:return qa(f.type),ci(f),null;case 19:if(Y(On),w=f.memoizedState,w===null)return ci(f),null;if(O=(f.flags&128)!==0,N=w.rendering,N===null)if(O)Qa(w,!1);else{if(ki!==0||c!==null&&(c.flags&128)!==0)for(c=f.child;c!==null;){if(N=fo(c),N!==null){for(f.flags|=128,Qa(w,!1),c=N.updateQueue,f.updateQueue=c,kl(f,c),f.subtreeFlags=0,c=v,v=f.child;v!==null;)nh(v,c),v=v.sibling;return Q(On,On.current&1|2),Dn&&Ga(f,w.treeForkCount),f.child}c=c.sibling}w.tail!==null&&Z()>er&&(f.flags|=128,O=!0,Qa(w,!1),f.lanes=4194304)}else{if(!O)if(c=fo(N),c!==null){if(f.flags|=128,O=!0,c=c.updateQueue,f.updateQueue=c,kl(f,c),Qa(w,!0),w.tail===null&&w.tailMode==="hidden"&&!N.alternate&&!Dn)return ci(f),null}else 2*Z()-w.renderingStartTime>er&&v!==536870912&&(f.flags|=128,O=!0,Qa(w,!1),f.lanes=4194304);w.isBackwards?(N.sibling=f.child,f.child=N):(c=w.last,c!==null?c.sibling=N:f.child=N,w.last=N)}return w.tail!==null?(c=w.tail,w.rendering=c,w.tail=c.sibling,w.renderingStartTime=Z(),c.sibling=null,v=On.current,Q(On,O?v&1|2:v&1),Dn&&Ga(f,w.treeForkCount),c):(ci(f),null);case 22:case 23:return Ki(f),zd(),w=f.memoizedState!==null,c!==null?c.memoizedState!==null!==w&&(f.flags|=8192):w&&(f.flags|=8192),w?(v&536870912)!==0&&(f.flags&128)===0&&(ci(f),f.subtreeFlags&6&&(f.flags|=8192)):ci(f),v=f.updateQueue,v!==null&&kl(f,v.retryQueue),v=null,c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(v=c.memoizedState.cachePool.pool),w=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(w=f.memoizedState.cachePool.pool),w!==v&&(f.flags|=2048),c!==null&&Y(Dc),null;case 24:return v=null,c!==null&&(v=c.memoizedState.cache),f.memoizedState.cache!==v&&(f.flags|=2048),qa(hr),ci(f),null;case 25:return null;case 30:return null}throw Error(i(156,f.tag))}function Xo(c,f){switch(Sm(f),f.tag){case 1:return c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 3:return qa(hr),Ee(),c=f.flags,(c&65536)!==0&&(c&128)===0?(f.flags=c&-65537|128,f):null;case 26:case 27:case 5:return xe(f),null;case 31:if(f.memoizedState!==null){if(Ki(f),f.alternate===null)throw Error(i(340));Ac()}return c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 13:if(Ki(f),c=f.memoizedState,c!==null&&c.dehydrated!==null){if(f.alternate===null)throw Error(i(340));Ac()}return c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 19:return Y(On),null;case 4:return Ee(),null;case 10:return qa(f.type),null;case 22:case 23:return Ki(f),zd(),c!==null&&Y(Dc),c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 24:return qa(hr),null;case 25:return null;default:return null}}function ho(c,f){switch(Sm(f),f.tag){case 3:qa(hr),Ee();break;case 26:case 27:case 5:xe(f);break;case 4:Ee();break;case 31:f.memoizedState!==null&&Ki(f);break;case 13:Ki(f);break;case 19:Y(On);break;case 10:qa(f.type);break;case 22:case 23:Ki(f),zd(),c!==null&&Y(Dc);break;case 24:qa(hr)}}function qo(c,f){try{var v=f.updateQueue,w=v!==null?v.lastEffect:null;if(w!==null){var O=w.next;v=O;do{if((v.tag&c)===c){w=void 0;var N=v.create,$=v.inst;w=N(),$.destroy=w}v=v.next}while(v!==O)}}catch(se){Hn(f,f.return,se)}}function Xr(c,f,v){try{var w=f.updateQueue,O=w!==null?w.lastEffect:null;if(O!==null){var N=O.next;w=N;do{if((w.tag&c)===c){var $=w.inst,se=$.destroy;if(se!==void 0){$.destroy=void 0,O=f;var _e=v,ze=se;try{ze()}catch(tt){Hn(O,_e,tt)}}}w=w.next}while(w!==N)}}catch(tt){Hn(f,f.return,tt)}}function va(c){var f=c.updateQueue;if(f!==null){var v=c.stateNode;try{vx(f,v)}catch(w){Hn(c,c.return,w)}}}function Or(c,f,v){v.props=Nc(c.type,c.memoizedProps),v.state=c.memoizedState;try{v.componentWillUnmount()}catch(w){Hn(c,f,w)}}function zl(c,f){try{var v=c.ref;if(v!==null){switch(c.tag){case 26:case 27:case 5:var w=c.stateNode;break;case 30:w=c.stateNode;break;default:w=c.stateNode}typeof v=="function"?c.refCleanup=v(w):v.current=w}}catch(O){Hn(c,f,O)}}function qr(c,f){var v=c.ref,w=c.refCleanup;if(v!==null)if(typeof w=="function")try{w()}catch(O){Hn(c,f,O)}finally{c.refCleanup=null,c=c.alternate,c!=null&&(c.refCleanup=null)}else if(typeof v=="function")try{v(null)}catch(O){Hn(c,f,O)}else v.current=null}function qd(c){var f=c.type,v=c.memoizedProps,w=c.stateNode;try{e:switch(f){case"button":case"input":case"select":case"textarea":v.autoFocus&&w.focus();break e;case"img":v.src?w.src=v.src:v.srcSet&&(w.srcset=v.srcSet)}}catch(O){Hn(c,c.return,O)}}function wr(c,f,v){try{var w=c.stateNode;lH(w,c.type,v,f),w[Hi]=f}catch(O){Hn(c,c.return,O)}}function Di(c){return c.tag===5||c.tag===3||c.tag===26||c.tag===27&&Ah(c.type)||c.tag===4}function Cn(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||Di(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.tag===27&&Ah(c.type)||c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function Ja(c,f,v){var w=c.tag;if(w===5||w===6)c=c.stateNode,f?(v.nodeType===9?v.body:v.nodeName==="HTML"?v.ownerDocument.body:v).insertBefore(c,f):(f=v.nodeType===9?v.body:v.nodeName==="HTML"?v.ownerDocument.body:v,f.appendChild(c),v=v._reactRootContainer,v!=null||f.onclick!==null||(f.onclick=ss));else if(w!==4&&(w===27&&Ah(c.type)&&(v=c.stateNode,f=null),c=c.child,c!==null))for(Ja(c,f,v),c=c.sibling;c!==null;)Ja(c,f,v),c=c.sibling}function xs(c,f,v){var w=c.tag;if(w===5||w===6)c=c.stateNode,f?v.insertBefore(c,f):v.appendChild(c);else if(w!==4&&(w===27&&Ah(c.type)&&(v=c.stateNode),c=c.child,c!==null))for(xs(c,f,v),c=c.sibling;c!==null;)xs(c,f,v),c=c.sibling}function Jm(c){var f=c.stateNode,v=c.memoizedProps;try{for(var w=c.type,O=f.attributes;O.length;)f.removeAttributeNode(O[0]);Ts(f,w,v),f[$n]=c,f[Hi]=v}catch(N){Hn(c,c.return,N)}}var Yo=!1,bi=!1,ya=!1,s1=typeof WeakSet=="function"?WeakSet:Set,Lr=null;function dM(c,f){if(c=c.containerInfo,bM=m1,c=ax(c),pv(c)){if("selectionStart"in c)var v={start:c.selectionStart,end:c.selectionEnd};else e:{v=(v=c.ownerDocument)&&v.defaultView||window;var w=v.getSelection&&v.getSelection();if(w&&w.rangeCount!==0){v=w.anchorNode;var O=w.anchorOffset,N=w.focusNode;w=w.focusOffset;try{v.nodeType,N.nodeType}catch{v=null;break e}var $=0,se=-1,_e=-1,ze=0,tt=0,at=c,Ge=null;t:for(;;){for(var $e;at!==v||O!==0&&at.nodeType!==3||(se=$+O),at!==N||w!==0&&at.nodeType!==3||(_e=$+w),at.nodeType===3&&($+=at.nodeValue.length),($e=at.firstChild)!==null;)Ge=at,at=$e;for(;;){if(at===c)break t;if(Ge===v&&++ze===O&&(se=$),Ge===N&&++tt===w&&(_e=$),($e=at.nextSibling)!==null)break;at=Ge,Ge=at.parentNode}at=$e}v=se===-1||_e===-1?null:{start:se,end:_e}}else v=null}v=v||{start:0,end:0}}else v=null;for(_M={focusedElem:c,selectionRange:v},m1=!1,Lr=f;Lr!==null;)if(f=Lr,c=f.child,(f.subtreeFlags&1028)!==0&&c!==null)c.return=f,Lr=c;else for(;Lr!==null;){switch(f=Lr,N=f.alternate,c=f.flags,f.tag){case 0:if((c&4)!==0&&(c=f.updateQueue,c=c!==null?c.events:null,c!==null))for(v=0;v<c.length;v++)O=c[v],O.ref.impl=O.nextImpl;break;case 11:case 15:break;case 1:if((c&1024)!==0&&N!==null){c=void 0,v=f,O=N.memoizedProps,N=N.memoizedState,w=v.stateNode;try{var kt=Nc(v.type,O);c=w.getSnapshotBeforeUpdate(kt,N),w.__reactInternalSnapshotBeforeUpdate=c}catch(Yt){Hn(v,v.return,Yt)}}break;case 3:if((c&1024)!==0){if(c=f.stateNode.containerInfo,v=c.nodeType,v===9)wM(c);else if(v===1)switch(c.nodeName){case"HEAD":case"HTML":case"BODY":wM(c);break;default:c.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((c&1024)!==0)throw Error(i(163))}if(c=f.sibling,c!==null){c.return=f.return,Lr=c;break}Lr=f.return}}function Oi(c,f,v){var w=v.flags;switch(v.tag){case 0:case 11:case 15:Ko(c,v),w&4&&qo(5,v);break;case 1:if(Ko(c,v),w&4)if(c=v.stateNode,f===null)try{c.componentDidMount()}catch($){Hn(v,v.return,$)}else{var O=Nc(v.type,f.memoizedProps);f=f.memoizedState;try{c.componentDidUpdate(O,f,c.__reactInternalSnapshotBeforeUpdate)}catch($){Hn(v,v.return,$)}}w&64&&va(v),w&512&&zl(v,v.return);break;case 3:if(Ko(c,v),w&64&&(c=v.updateQueue,c!==null)){if(f=null,v.child!==null)switch(v.child.tag){case 27:case 5:f=v.child.stateNode;break;case 1:f=v.child.stateNode}try{vx(c,f)}catch($){Hn(v,v.return,$)}}break;case 27:f===null&&w&4&&Jm(v);case 26:case 5:Ko(c,v),f===null&&w&4&&qd(v),w&512&&zl(v,v.return);break;case 12:Ko(c,v);break;case 31:Ko(c,v),w&4&&Uc(c,v);break;case 13:Ko(c,v),w&4&&yh(c,v),w&64&&(c=v.memoizedState,c!==null&&(c=c.dehydrated,c!==null&&(v=E.bind(null,v),gH(c,v))));break;case 22:if(w=v.memoizedState!==null||Yo,!w){f=f!==null&&f.memoizedState!==null||bi,O=Yo;var N=bi;Yo=w,(bi=f)&&!N?Ss(c,v,(v.subtreeFlags&8772)!==0):Ko(c,v),Yo=O,bi=N}break;case 30:break;default:Ko(c,v)}}function Yd(c){var f=c.alternate;f!==null&&(c.alternate=null,Yd(f)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(f=c.stateNode,f!==null&&ce(f)),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}var ri=null,us=!1;function $o(c,f,v){for(v=v.child;v!==null;)eg(c,f,v),v=v.sibling}function eg(c,f,v){if(Ke&&typeof Ke.onCommitFiberUnmount=="function")try{Ke.onCommitFiberUnmount(Xe,v)}catch{}switch(v.tag){case 26:bi||qr(v,f),$o(c,f,v),v.memoizedState?v.memoizedState.count--:v.stateNode&&(v=v.stateNode,v.parentNode.removeChild(v));break;case 27:bi||qr(v,f);var w=ri,O=us;Ah(v.type)&&(ri=v.stateNode,us=!1),$o(c,f,v),hy(v.stateNode),ri=w,us=O;break;case 5:bi||qr(v,f);case 6:if(w=ri,O=us,ri=null,$o(c,f,v),ri=w,us=O,ri!==null)if(us)try{(ri.nodeType===9?ri.body:ri.nodeName==="HTML"?ri.ownerDocument.body:ri).removeChild(v.stateNode)}catch(N){Hn(v,f,N)}else try{ri.removeChild(v.stateNode)}catch(N){Hn(v,f,N)}break;case 18:ri!==null&&(us?(c=ri,XL(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,v.stateNode),lg(c)):XL(ri,v.stateNode));break;case 4:w=ri,O=us,ri=v.stateNode.containerInfo,us=!0,$o(c,f,v),ri=w,us=O;break;case 0:case 11:case 14:case 15:Xr(2,v,f),bi||Xr(4,v,f),$o(c,f,v);break;case 1:bi||(qr(v,f),w=v.stateNode,typeof w.componentWillUnmount=="function"&&Or(v,f,w)),$o(c,f,v);break;case 21:$o(c,f,v);break;case 22:bi=(w=bi)||v.memoizedState!==null,$o(c,f,v),bi=w;break;default:$o(c,f,v)}}function Uc(c,f){if(f.memoizedState===null&&(c=f.alternate,c!==null&&(c=c.memoizedState,c!==null))){c=c.dehydrated;try{lg(c)}catch(v){Hn(f,f.return,v)}}}function yh(c,f){if(f.memoizedState===null&&(c=f.alternate,c!==null&&(c=c.memoizedState,c!==null&&(c=c.dehydrated,c!==null))))try{lg(c)}catch(v){Hn(f,f.return,v)}}function oy(c){switch(c.tag){case 31:case 13:case 19:var f=c.stateNode;return f===null&&(f=c.stateNode=new s1),f;case 22:return c=c.stateNode,f=c._retryCache,f===null&&(f=c._retryCache=new s1),f;default:throw Error(i(435,c.tag))}}function Fl(c,f){var v=oy(c);f.forEach(function(w){if(!v.has(w)){v.add(w);var O=D.bind(null,c,w);w.then(O,O)}})}function Er(c,f){var v=f.deletions;if(v!==null)for(var w=0;w<v.length;w++){var O=v[w],N=c,$=f,se=$;e:for(;se!==null;){switch(se.tag){case 27:if(Ah(se.type)){ri=se.stateNode,us=!1;break e}break;case 5:ri=se.stateNode,us=!1;break e;case 3:case 4:ri=se.stateNode.containerInfo,us=!0;break e}se=se.return}if(ri===null)throw Error(i(160));eg(N,$,O),ri=null,us=!1,N=O.alternate,N!==null&&(N.return=null),O.return=null}if(f.subtreeFlags&13886)for(f=f.child;f!==null;)kc(f,c),f=f.sibling}var Zo=null;function kc(c,f){var v=c.alternate,w=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:Er(f,c),Tr(c),w&4&&(Xr(3,c,c.return),qo(3,c),Xr(5,c,c.return));break;case 1:Er(f,c),Tr(c),w&512&&(bi||v===null||qr(v,v.return)),w&64&&Yo&&(c=c.updateQueue,c!==null&&(w=c.callbacks,w!==null&&(v=c.shared.hiddenCallbacks,c.shared.hiddenCallbacks=v===null?w:v.concat(w))));break;case 26:var O=Zo;if(Er(f,c),Tr(c),w&512&&(bi||v===null||qr(v,v.return)),w&4){var N=v!==null?v.memoizedState:null;if(w=c.memoizedState,v===null)if(w===null)if(c.stateNode===null){e:{w=c.type,v=c.memoizedProps,O=O.ownerDocument||O;t:switch(w){case"title":N=O.getElementsByTagName("title")[0],(!N||N[io]||N[$n]||N.namespaceURI==="http://www.w3.org/2000/svg"||N.hasAttribute("itemprop"))&&(N=O.createElement(w),O.head.insertBefore(N,O.querySelector("head > title"))),Ts(N,w,v),N[$n]=c,it(N),w=N;break e;case"link":var $=iP("link","href",O).get(w+(v.href||""));if($){for(var se=0;se<$.length;se++)if(N=$[se],N.getAttribute("href")===(v.href==null||v.href===""?null:v.href)&&N.getAttribute("rel")===(v.rel==null?null:v.rel)&&N.getAttribute("title")===(v.title==null?null:v.title)&&N.getAttribute("crossorigin")===(v.crossOrigin==null?null:v.crossOrigin)){$.splice(se,1);break t}}N=O.createElement(w),Ts(N,w,v),O.head.appendChild(N);break;case"meta":if($=iP("meta","content",O).get(w+(v.content||""))){for(se=0;se<$.length;se++)if(N=$[se],N.getAttribute("content")===(v.content==null?null:""+v.content)&&N.getAttribute("name")===(v.name==null?null:v.name)&&N.getAttribute("property")===(v.property==null?null:v.property)&&N.getAttribute("http-equiv")===(v.httpEquiv==null?null:v.httpEquiv)&&N.getAttribute("charset")===(v.charSet==null?null:v.charSet)){$.splice(se,1);break t}}N=O.createElement(w),Ts(N,w,v),O.head.appendChild(N);break;default:throw Error(i(468,w))}N[$n]=c,it(N),w=N}c.stateNode=w}else rP(O,c.type,c.stateNode);else c.stateNode=nP(O,w,c.memoizedProps);else N!==w?(N===null?v.stateNode!==null&&(v=v.stateNode,v.parentNode.removeChild(v)):N.count--,w===null?rP(O,c.type,c.stateNode):nP(O,w,c.memoizedProps)):w===null&&c.stateNode!==null&&wr(c,c.memoizedProps,v.memoizedProps)}break;case 27:Er(f,c),Tr(c),w&512&&(bi||v===null||qr(v,v.return)),v!==null&&w&4&&wr(c,c.memoizedProps,v.memoizedProps);break;case 5:if(Er(f,c),Tr(c),w&512&&(bi||v===null||qr(v,v.return)),c.flags&32){O=c.stateNode;try{ha(O,"")}catch(kt){Hn(c,c.return,kt)}}w&4&&c.stateNode!=null&&(O=c.memoizedProps,wr(c,O,v!==null?v.memoizedProps:O)),w&1024&&(ya=!0);break;case 6:if(Er(f,c),Tr(c),w&4){if(c.stateNode===null)throw Error(i(162));w=c.memoizedProps,v=c.stateNode;try{v.nodeValue=w}catch(kt){Hn(c,c.return,kt)}}break;case 3:if(f1=null,O=Zo,Zo=c1(f.containerInfo),Er(f,c),Zo=O,Tr(c),w&4&&v!==null&&v.memoizedState.isDehydrated)try{lg(f.containerInfo)}catch(kt){Hn(c,c.return,kt)}ya&&(ya=!1,tg(c));break;case 4:w=Zo,Zo=c1(c.stateNode.containerInfo),Er(f,c),Tr(c),Zo=w;break;case 12:Er(f,c),Tr(c);break;case 31:Er(f,c),Tr(c),w&4&&(w=c.updateQueue,w!==null&&(c.updateQueue=null,Fl(c,w)));break;case 13:Er(f,c),Tr(c),c.child.flags&8192&&c.memoizedState!==null!=(v!==null&&v.memoizedState!==null)&&(bh=Z()),w&4&&(w=c.updateQueue,w!==null&&(c.updateQueue=null,Fl(c,w)));break;case 22:O=c.memoizedState!==null;var _e=v!==null&&v.memoizedState!==null,ze=Yo,tt=bi;if(Yo=ze||O,bi=tt||_e,Er(f,c),bi=tt,Yo=ze,Tr(c),w&8192)e:for(f=c.stateNode,f._visibility=O?f._visibility&-2:f._visibility|1,O&&(v===null||_e||Yo||bi||el(c)),v=null,f=c;;){if(f.tag===5||f.tag===26){if(v===null){_e=v=f;try{if(N=_e.stateNode,O)$=N.style,typeof $.setProperty=="function"?$.setProperty("display","none","important"):$.display="none";else{se=_e.stateNode;var at=_e.memoizedProps.style,Ge=at!=null&&at.hasOwnProperty("display")?at.display:null;se.style.display=Ge==null||typeof Ge=="boolean"?"":(""+Ge).trim()}}catch(kt){Hn(_e,_e.return,kt)}}}else if(f.tag===6){if(v===null){_e=f;try{_e.stateNode.nodeValue=O?"":_e.memoizedProps}catch(kt){Hn(_e,_e.return,kt)}}}else if(f.tag===18){if(v===null){_e=f;try{var $e=_e.stateNode;O?qL($e,!0):qL(_e.stateNode,!1)}catch(kt){Hn(_e,_e.return,kt)}}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===c)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===c)break e;for(;f.sibling===null;){if(f.return===null||f.return===c)break e;v===f&&(v=null),f=f.return}v===f&&(v=null),f.sibling.return=f.return,f=f.sibling}w&4&&(w=c.updateQueue,w!==null&&(v=w.retryQueue,v!==null&&(w.retryQueue=null,Fl(c,v))));break;case 19:Er(f,c),Tr(c),w&4&&(w=c.updateQueue,w!==null&&(c.updateQueue=null,Fl(c,w)));break;case 30:break;case 21:break;default:Er(f,c),Tr(c)}}function Tr(c){var f=c.flags;if(f&2){try{for(var v,w=c.return;w!==null;){if(Di(w)){v=w;break}w=w.return}if(v==null)throw Error(i(160));switch(v.tag){case 27:var O=v.stateNode,N=Cn(c);xs(c,N,O);break;case 5:var $=v.stateNode;v.flags&32&&(ha($,""),v.flags&=-33);var se=Cn(c);xs(c,se,$);break;case 3:case 4:var _e=v.stateNode.containerInfo,ze=Cn(c);Ja(c,ze,_e);break;default:throw Error(i(161))}}catch(tt){Hn(c,c.return,tt)}c.flags&=-3}f&4096&&(c.flags&=-4097)}function tg(c){if(c.subtreeFlags&1024)for(c=c.child;c!==null;){var f=c;tg(f),f.tag===5&&f.flags&1024&&f.stateNode.reset(),c=c.sibling}}function Ko(c,f){if(f.subtreeFlags&8772)for(f=f.child;f!==null;)Oi(c,f.alternate,f),f=f.sibling}function el(c){for(c=c.child;c!==null;){var f=c;switch(f.tag){case 0:case 11:case 14:case 15:Xr(4,f,f.return),el(f);break;case 1:qr(f,f.return);var v=f.stateNode;typeof v.componentWillUnmount=="function"&&Or(f,f.return,v),el(f);break;case 27:hy(f.stateNode);case 26:case 5:qr(f,f.return),el(f);break;case 22:f.memoizedState===null&&el(f);break;case 30:el(f);break;default:el(f)}c=c.sibling}}function Ss(c,f,v){for(v=v&&(f.subtreeFlags&8772)!==0,f=f.child;f!==null;){var w=f.alternate,O=c,N=f,$=N.flags;switch(N.tag){case 0:case 11:case 15:Ss(O,N,v),qo(4,N);break;case 1:if(Ss(O,N,v),w=N,O=w.stateNode,typeof O.componentDidMount=="function")try{O.componentDidMount()}catch(ze){Hn(w,w.return,ze)}if(w=N,O=w.updateQueue,O!==null){var se=w.stateNode;try{var _e=O.shared.hiddenCallbacks;if(_e!==null)for(O.shared.hiddenCallbacks=null,O=0;O<_e.length;O++)hh(_e[O],se)}catch(ze){Hn(w,w.return,ze)}}v&&$&64&&va(N),zl(N,N.return);break;case 27:Jm(N);case 26:case 5:Ss(O,N,v),v&&w===null&&$&4&&qd(N),zl(N,N.return);break;case 12:Ss(O,N,v);break;case 31:Ss(O,N,v),v&&$&4&&Uc(O,N);break;case 13:Ss(O,N,v),v&&$&4&&yh(O,N);break;case 22:N.memoizedState===null&&Ss(O,N,v),zl(N,N.return);break;case 30:break;default:Ss(O,N,v)}f=f.sibling}}function zc(c,f){var v=null;c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(v=c.memoizedState.cachePool.pool),c=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(c=f.memoizedState.cachePool.pool),c!==v&&(c!=null&&c.refCount++,v!=null&&Lu(v))}function Xu(c,f){c=null,f.alternate!==null&&(c=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==c&&(f.refCount++,c!=null&&Lu(c))}function Yr(c,f,v,w){if(f.subtreeFlags&10256)for(f=f.child;f!==null;)ay(c,f,v,w),f=f.sibling}function ay(c,f,v,w){var O=f.flags;switch(f.tag){case 0:case 11:case 15:Yr(c,f,v,w),O&2048&&qo(9,f);break;case 1:Yr(c,f,v,w);break;case 3:Yr(c,f,v,w),O&2048&&(c=null,f.alternate!==null&&(c=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==c&&(f.refCount++,c!=null&&Lu(c)));break;case 12:if(O&2048){Yr(c,f,v,w),c=f.stateNode;try{var N=f.memoizedProps,$=N.id,se=N.onPostCommit;typeof se=="function"&&se($,f.alternate===null?"mount":"update",c.passiveEffectDuration,-0)}catch(_e){Hn(f,f.return,_e)}}else Yr(c,f,v,w);break;case 31:Yr(c,f,v,w);break;case 13:Yr(c,f,v,w);break;case 23:break;case 22:N=f.stateNode,$=f.alternate,f.memoizedState!==null?N._visibility&2?Yr(c,f,v,w):tl(c,f):N._visibility&2?Yr(c,f,v,w):(N._visibility|=2,$r(c,f,v,w,(f.subtreeFlags&10256)!==0||!1)),O&2048&&zc($,f);break;case 24:Yr(c,f,v,w),O&2048&&Xu(f.alternate,f);break;default:Yr(c,f,v,w)}}function $r(c,f,v,w,O){for(O=O&&((f.subtreeFlags&10256)!==0||!1),f=f.child;f!==null;){var N=c,$=f,se=v,_e=w,ze=$.flags;switch($.tag){case 0:case 11:case 15:$r(N,$,se,_e,O),qo(8,$);break;case 23:break;case 22:var tt=$.stateNode;$.memoizedState!==null?tt._visibility&2?$r(N,$,se,_e,O):tl(N,$):(tt._visibility|=2,$r(N,$,se,_e,O)),O&&ze&2048&&zc($.alternate,$);break;case 24:$r(N,$,se,_e,O),O&&ze&2048&&Xu($.alternate,$);break;default:$r(N,$,se,_e,O)}f=f.sibling}}function tl(c,f){if(f.subtreeFlags&10256)for(f=f.child;f!==null;){var v=c,w=f,O=w.flags;switch(w.tag){case 22:tl(v,w),O&2048&&zc(w.alternate,w);break;case 24:tl(v,w),O&2048&&Xu(w.alternate,w);break;default:tl(v,w)}f=f.sibling}}var qu=8192;function po(c,f,v){if(c.subtreeFlags&qu)for(c=c.child;c!==null;)ng(c,f,v),c=c.sibling}function ng(c,f,v){switch(c.tag){case 26:po(c,f,v),c.flags&qu&&c.memoizedState!==null&&CH(v,Zo,c.memoizedState,c.memoizedProps);break;case 5:po(c,f,v);break;case 3:case 4:var w=Zo;Zo=c1(c.stateNode.containerInfo),po(c,f,v),Zo=w;break;case 22:c.memoizedState===null&&(w=c.alternate,w!==null&&w.memoizedState!==null?(w=qu,qu=16777216,po(c,f,v),qu=w):po(c,f,v));break;default:po(c,f,v)}}function Yu(c){var f=c.alternate;if(f!==null&&(c=f.child,c!==null)){f.child=null;do f=c.sibling,c.sibling=null,c=f;while(c!==null)}}function Fc(c){var f=c.deletions;if((c.flags&16)!==0){if(f!==null)for(var v=0;v<f.length;v++){var w=f[v];Lr=w,Xi(w,c)}Yu(c)}if(c.subtreeFlags&10256)for(c=c.child;c!==null;)Hs(c),c=c.sibling}function Hs(c){switch(c.tag){case 0:case 11:case 15:Fc(c),c.flags&2048&&Xr(9,c,c.return);break;case 3:Fc(c);break;case 12:Fc(c);break;case 22:var f=c.stateNode;c.memoizedState!==null&&f._visibility&2&&(c.return===null||c.return.tag!==13)?(f._visibility&=-3,js(c)):Fc(c);break;default:Fc(c)}}function js(c){var f=c.deletions;if((c.flags&16)!==0){if(f!==null)for(var v=0;v<f.length;v++){var w=f[v];Lr=w,Xi(w,c)}Yu(c)}for(c=c.child;c!==null;){switch(f=c,f.tag){case 0:case 11:case 15:Xr(8,f,f.return),js(f);break;case 22:v=f.stateNode,v._visibility&2&&(v._visibility&=-3,js(f));break;default:js(f)}c=c.sibling}}function Xi(c,f){for(;Lr!==null;){var v=Lr;switch(v.tag){case 0:case 11:case 15:Xr(8,v,f);break;case 23:case 22:if(v.memoizedState!==null&&v.memoizedState.cachePool!==null){var w=v.memoizedState.cachePool.pool;w!=null&&w.refCount++}break;case 24:Lu(v.memoizedState.cache)}if(w=v.child,w!==null)w.return=v,Lr=w;else e:for(v=c;Lr!==null;){w=Lr;var O=w.sibling,N=w.return;if(Yd(w),w===v){Lr=null;break e}if(O!==null){O.return=N,Lr=O;break e}Lr=N}}}var Bl={getCacheForType:function(c){var f=Zt(hr),v=f.data.get(c);return v===void 0&&(v=c(),f.data.set(c,v)),v},cacheSignal:function(){return Zt(hr).controller.signal}},an=typeof WeakMap=="function"?WeakMap:Map,Gt=0,Jt=null,vn=null,hn=0,In=0,fs=null,Qo=!1,ba=!1,ly=!1,mo=0,ki=0,nl=0,Bc=0,$d=0,ws=0,Ei=0,$u=null,qi=null,Yi=!1,bh=0,cy=0,er=1/0,zi=null,tr=null,si=0,go=null,_h=null,Jo=0,xh=0,Sh=null,Zd=null,Vc=0,Zu=null;function vo(){return(Gt&2)!==0&&hn!==0?hn&-hn:j.T!==null?We():Gr()}function Tn(){if(ws===0)if((hn&536870912)===0||Dn){var c=st;st<<=1,(st&3932160)===0&&(st=262144),ws=c}else ws=536870912;return c=Fs.current,c!==null&&(c.flags|=32),ws}function yn(c,f,v){(c===Jt&&(In===2||In===9)||c.cancelPendingCommit!==null)&&(Hc(c,0),pr(c,hn,ws,!1)),Xn(c,v),((Gt&2)===0||c!==Jt)&&(c===Jt&&((Gt&2)===0&&(Bc|=v),ki===4&&pr(c,hn,ws,!1)),ht(c))}function Mn(c,f,v){if((Gt&6)!==0)throw Error(i(327));var w=!v&&(f&127)===0&&(f&c.expiredLanes)===0||gt(c,f),O=w?Kd(c,f):Es(c,f,!0),N=w;do{if(O===0){ba&&!w&&pr(c,f,0,!1);break}else{if(v=c.current.alternate,N&&!oi(v)){O=Es(c,f,!1),N=!1;continue}if(O===2){if(N=f,c.errorRecoveryDisabledLanes&N)var $=0;else $=c.pendingLanes&-536870913,$=$!==0?$:$&536870912?536870912:0;if($!==0){f=$;e:{var se=c;O=$u;var _e=se.current.memoizedState.isDehydrated;if(_e&&(Hc(se,$).flags|=256),$=Es(se,$,!1),$!==2){if(ly&&!_e){se.errorRecoveryDisabledLanes|=N,Bc|=N,O=4;break e}N=qi,qi=O,N!==null&&(qi===null?qi=N:qi.push.apply(qi,N))}O=$}if(N=!1,O!==2)continue}}if(O===1){Hc(c,0),pr(c,f,0,!0);break}e:{switch(w=c,N=O,N){case 0:case 1:throw Error(i(345));case 4:if((f&4194048)!==f)break;case 6:pr(w,f,ws,!Qo);break e;case 2:qi=null;break;case 3:case 5:break;default:throw Error(i(329))}if((f&62914560)===f&&(O=bh+300-Z(),10<O)){if(pr(w,f,ws,!Qo),Fe(w,0,!0)!==0)break e;Jo=f,w.timeoutHandle=jL(Rn.bind(null,w,v,qi,zi,Yi,f,ws,Bc,Ei,Qo,N,"Throttled",-0,0),O);break e}Rn(w,v,qi,zi,Yi,f,ws,Bc,Ei,Qo,N,null,-0,0)}}break}while(!0);ht(c)}function Rn(c,f,v,w,O,N,$,se,_e,ze,tt,at,Ge,$e){if(c.timeoutHandle=-1,at=f.subtreeFlags,at&8192||(at&16785408)===16785408){at={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ss},ng(f,N,at);var kt=(N&62914560)===N?bh-Z():(N&4194048)===N?cy-Z():0;if(kt=RH(at,kt),kt!==null){Jo=N,c.cancelPendingCommit=kt(Gl.bind(null,c,f,N,v,w,O,$,se,_e,tt,at,null,Ge,$e)),pr(c,N,$,!ze);return}}Gl(c,f,N,v,w,O,$,se,_e)}function oi(c){for(var f=c;;){var v=f.tag;if((v===0||v===11||v===15)&&f.flags&16384&&(v=f.updateQueue,v!==null&&(v=v.stores,v!==null)))for(var w=0;w<v.length;w++){var O=v[w],N=O.getSnapshot;O=O.value;try{if(!vs(N(),O))return!1}catch{return!1}}if(v=f.child,f.subtreeFlags&16384&&v!==null)v.return=f,f=v;else{if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function pr(c,f,v,w){f&=~$d,f&=~Bc,c.suspendedLanes|=f,c.pingedLanes&=~f,w&&(c.warmLanes|=f),w=c.expirationTimes;for(var O=f;0<O;){var N=31-ct(O),$=1<<N;w[N]=-1,O&=~$}v!==0&&ii(c,v,f)}function _a(){return(Gt&6)===0?(Rt(0),!1):!0}function Gc(){if(vn!==null){if(In===0)var c=vn.return;else c=vn,Xa=Cc=null,Lv(c),ku=null,zu=0,c=vn;for(;c!==null;)ho(c.alternate,c),c=c.return;vn=null}}function Hc(c,f){var v=c.timeoutHandle;v!==-1&&(c.timeoutHandle=-1,fH(v)),v=c.cancelPendingCommit,v!==null&&(c.cancelPendingCommit=null,v()),Jo=0,Gc(),Jt=c,vn=v=Us(c.current,null),hn=f,In=0,fs=null,Qo=!1,ba=gt(c,f),ly=!1,Ei=ws=$d=Bc=nl=ki=0,qi=$u=null,Yi=!1,(f&8)!==0&&(f|=f&32);var w=c.entangledLanes;if(w!==0)for(c=c.entanglements,w&=f;0<w;){var O=31-ct(w),N=1<<O;f|=c[O],w&=~N}return mo=f,Dd(),v}function il(c,f){on=null,j.H=gh,f===Pu||f===gn?(f=Nu(),In=3):f===Id?(f=Nu(),In=4):In=f===jm?8:f!==null&&typeof f=="object"&&typeof f.then=="function"?6:1,fs=f,vn===null&&(ki=1,Hm(c,lo(f,c.current)))}function Fi(){var c=Fs.current;return c===null?!0:(hn&4194048)===hn?_s===null:(hn&62914560)===hn||(hn&536870912)!==0?c===_s:!1}function Vl(){var c=j.H;return j.H=gh,c===null?gh:c}function jc(){var c=j.A;return j.A=Bl,c}function wh(){ki=4,Qo||(hn&4194048)!==hn&&Fs.current!==null||(ba=!0),(nl&134217727)===0&&(Bc&134217727)===0||Jt===null||pr(Jt,hn,ws,!1)}function Es(c,f,v){var w=Gt;Gt|=2;var O=Vl(),N=jc();(Jt!==c||hn!==f)&&(zi=null,Hc(c,f)),f=!1;var $=ki;e:do try{if(In!==0&&vn!==null){var se=vn,_e=fs;switch(In){case 8:Gc(),$=6;break e;case 3:case 2:case 9:case 6:Fs.current===null&&(f=!0);var ze=In;if(In=0,fs=null,Ku(c,se,_e,ze),v&&ba){$=0;break e}break;default:ze=In,In=0,fs=null,Ku(c,se,_e,ze)}}Eh(),$=ki;break}catch(tt){il(c,tt)}while(!0);return f&&c.shellSuspendCounter++,Xa=Cc=null,Gt=w,j.H=O,j.A=N,vn===null&&(Jt=null,hn=0,Dd()),$}function Eh(){for(;vn!==null;)ig(vn)}function Kd(c,f){var v=Gt;Gt|=2;var w=Vl(),O=jc();Jt!==c||hn!==f?(zi=null,er=Z()+500,Hc(c,f)):ba=gt(c,f);e:do try{if(In!==0&&vn!==null){f=vn;var N=fs;t:switch(In){case 1:In=0,fs=null,Ku(c,f,N,1);break;case 2:case 9:if(zs(N)){In=0,fs=null,Qd(f);break}f=function(){In!==2&&In!==9||Jt!==c||(In=7),ht(c)},N.then(f,f);break e;case 3:In=7;break e;case 4:In=5;break e;case 7:zs(N)?(In=0,fs=null,Qd(f)):(In=0,fs=null,Ku(c,f,N,7));break;case 5:var $=null;switch(vn.tag){case 26:$=vn.memoizedState;case 5:case 27:var se=vn;if($?sP($):se.stateNode.complete){In=0,fs=null;var _e=se.sibling;if(_e!==null)vn=_e;else{var ze=se.return;ze!==null?(vn=ze,Wc(ze)):vn=null}break t}}In=0,fs=null,Ku(c,f,N,5);break;case 6:In=0,fs=null,Ku(c,f,N,6);break;case 8:Gc(),ki=6;break e;default:throw Error(i(462))}}Ws();break}catch(tt){il(c,tt)}while(!0);return Xa=Cc=null,j.H=w,j.A=O,Gt=v,vn!==null?0:(Jt=null,hn=0,Dd(),ki)}function Ws(){for(;vn!==null&&!Je();)ig(vn)}function ig(c){var f=Qm(c.alternate,c,mo);c.memoizedProps=c.pendingProps,f===null?Wc(c):vn=f}function Qd(c){var f=c,v=f.alternate;switch(f.tag){case 15:case 0:f=Hd(v,f,f.pendingProps,f.type,void 0,hn);break;case 11:f=Hd(v,f,f.pendingProps,f.type.render,f.ref,hn);break;case 5:Lv(f);default:ho(v,f),f=vn=nh(f,mo),f=Qm(v,f,mo)}c.memoizedProps=c.pendingProps,f===null?Wc(c):vn=f}function Ku(c,f,v,w){Xa=Cc=null,Lv(f),ku=null,zu=0;var O=f.return;try{if(Sr(c,O,f,v,hn)){ki=1,Hm(c,lo(v,c.current)),vn=null;return}}catch(N){if(O!==null)throw vn=O,N;ki=1,Hm(c,lo(v,c.current)),vn=null;return}f.flags&32768?(Dn||w===1?c=!0:ba||(hn&536870912)!==0?c=!1:(Qo=c=!0,(w===2||w===9||w===3||w===6)&&(w=Fs.current,w!==null&&w.tag===13&&(w.flags|=16384))),Jd(f,c)):Wc(f)}function Wc(c){var f=c;do{if((f.flags&32768)!==0){Jd(f,Qo);return}c=f.return;var v=Xd(f.alternate,f,mo);if(v!==null){vn=v;return}if(f=f.sibling,f!==null){vn=f;return}vn=f=c}while(f!==null);ki===0&&(ki=5)}function Jd(c,f){do{var v=Xo(c.alternate,c);if(v!==null){v.flags&=32767,vn=v;return}if(v=c.return,v!==null&&(v.flags|=32768,v.subtreeFlags=0,v.deletions=null),!f&&(c=c.sibling,c!==null)){vn=c;return}vn=c=v}while(c!==null);ki=6,vn=null}function Gl(c,f,v,w,O,N,$,se,_e){c.cancelPendingCommit=null;do Th();while(si!==0);if((Gt&6)!==0)throw Error(i(327));if(f!==null){if(f===c.current)throw Error(i(177));if(N=f.lanes|f.childLanes,N|=Cr,qn(c,v,N,$,se,_e),c===Jt&&(vn=Jt=null,hn=0),_h=f,go=c,Jo=v,xh=N,Sh=O,Zd=w,(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?(c.callbackNode=null,c.callbackPriority=0,k(Ae,function(){return rg(),null})):(c.callbackNode=null,c.callbackPriority=0),w=(f.flags&13878)!==0,(f.subtreeFlags&13878)!==0||w){w=j.T,j.T=null,O=G.p,G.p=2,$=Gt,Gt|=4;try{dM(c,f,v)}finally{Gt=$,G.p=O,j.T=w}}si=1,mr(),Hl(),Qu()}}function mr(){if(si===1){si=0;var c=go,f=_h,v=(f.flags&13878)!==0;if((f.subtreeFlags&13878)!==0||v){v=j.T,j.T=null;var w=G.p;G.p=2;var O=Gt;Gt|=4;try{kc(f,c);var N=_M,$=ax(c.containerInfo),se=N.focusedElem,_e=N.selectionRange;if($!==se&&se&&se.ownerDocument&&vi(se.ownerDocument.documentElement,se)){if(_e!==null&&pv(se)){var ze=_e.start,tt=_e.end;if(tt===void 0&&(tt=ze),"selectionStart"in se)se.selectionStart=ze,se.selectionEnd=Math.min(tt,se.value.length);else{var at=se.ownerDocument||document,Ge=at&&at.defaultView||window;if(Ge.getSelection){var $e=Ge.getSelection(),kt=se.textContent.length,Yt=Math.min(_e.start,kt),xi=_e.end===void 0?Yt:Math.min(_e.end,kt);!$e.extend&&Yt>xi&&($=xi,xi=Yt,Yt=$);var Pe=Jf(se,Yt),Me=Jf(se,xi);if(Pe&&Me&&($e.rangeCount!==1||$e.anchorNode!==Pe.node||$e.anchorOffset!==Pe.offset||$e.focusNode!==Me.node||$e.focusOffset!==Me.offset)){var ke=at.createRange();ke.setStart(Pe.node,Pe.offset),$e.removeAllRanges(),Yt>xi?($e.addRange(ke),$e.extend(Me.node,Me.offset)):(ke.setEnd(Me.node,Me.offset),$e.addRange(ke))}}}}for(at=[],$e=se;$e=$e.parentNode;)$e.nodeType===1&&at.push({element:$e,left:$e.scrollLeft,top:$e.scrollTop});for(typeof se.focus=="function"&&se.focus(),se=0;se<at.length;se++){var rt=at[se];rt.element.scrollLeft=rt.left,rt.element.scrollTop=rt.top}}m1=!!bM,_M=bM=null}finally{Gt=O,G.p=w,j.T=v}}c.current=f,si=2}}function Hl(){if(si===2){si=0;var c=go,f=_h,v=(f.flags&8772)!==0;if((f.subtreeFlags&8772)!==0||v){v=j.T,j.T=null;var w=G.p;G.p=2;var O=Gt;Gt|=4;try{Oi(c,f.alternate,f)}finally{Gt=O,G.p=w,j.T=v}}si=3}}function Qu(){if(si===4||si===3){si=0,te();var c=go,f=_h,v=Jo,w=Zd;(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?si=5:(si=0,_h=go=null,rl(c,c.pendingLanes));var O=c.pendingLanes;if(O===0&&(tr=null),Ar(v),f=f.stateNode,Ke&&typeof Ke.onCommitFiberRoot=="function")try{Ke.onCommitFiberRoot(Xe,f,void 0,(f.current.flags&128)===128)}catch{}if(w!==null){f=j.T,O=G.p,G.p=2,j.T=null;try{for(var N=c.onRecoverableError,$=0;$<w.length;$++){var se=w[$];N(se.value,{componentStack:se.stack})}}finally{j.T=f,G.p=O}}(Jo&3)!==0&&Th(),ht(c),O=c.pendingLanes,(v&261930)!==0&&(O&42)!==0?c===Zu?Vc++:(Vc=0,Zu=c):Vc=0,Rt(0)}}function rl(c,f){(c.pooledCacheLanes&=f)===0&&(f=c.pooledCache,f!=null&&(c.pooledCache=null,Lu(f)))}function Th(){return mr(),Hl(),Qu(),rg()}function rg(){if(si!==5)return!1;var c=go,f=xh;xh=0;var v=Ar(Jo),w=j.T,O=G.p;try{G.p=32>v?32:v,j.T=null,v=Sh,Sh=null;var N=go,$=Jo;if(si=0,_h=go=null,Jo=0,(Gt&6)!==0)throw Error(i(331));var se=Gt;if(Gt|=4,Hs(N.current),ay(N,N.current,$,v),Gt=se,Rt(0,!1),Ke&&typeof Ke.onPostCommitFiberRoot=="function")try{Ke.onPostCommitFiberRoot(Xe,N)}catch{}return!0}finally{G.p=O,j.T=w,rl(c,f)}}function uy(c,f,v){f=lo(v,f),f=ey(c.stateNode,f,2),c=Oc(c,f,2),c!==null&&(Xn(c,2),ht(c))}function Hn(c,f,v){if(c.tag===3)uy(c,c,v);else for(;f!==null;){if(f.tag===3){uy(f,c,v);break}else if(f.tag===1){var w=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof w.componentDidCatch=="function"&&(tr===null||!tr.has(w))){c=lo(v,c),v=ty(2),w=Oc(f,v,2),w!==null&&(e1(v,w,f,c),Xn(w,2),ht(w));break}}f=f.return}}function ep(c,f,v){var w=c.pingCache;if(w===null){w=c.pingCache=new an;var O=new Set;w.set(f,O)}else O=w.get(f),O===void 0&&(O=new Set,w.set(f,O));O.has(v)||(ly=!0,O.add(v),c=d.bind(null,c,f,v),f.then(c,c))}function d(c,f,v){var w=c.pingCache;w!==null&&w.delete(f),c.pingedLanes|=c.suspendedLanes&v,c.warmLanes&=~v,Jt===c&&(hn&v)===v&&(ki===4||ki===3&&(hn&62914560)===hn&&300>Z()-bh?(Gt&2)===0&&Hc(c,0):$d|=v,Ei===hn&&(Ei=0)),ht(c)}function g(c,f){f===0&&(f=Tt()),c=ys(c,f),c!==null&&(Xn(c,f),ht(c))}function E(c){var f=c.memoizedState,v=0;f!==null&&(v=f.retryLane),g(c,v)}function D(c,f){var v=0;switch(c.tag){case 31:case 13:var w=c.stateNode,O=c.memoizedState;O!==null&&(v=O.retryLane);break;case 19:w=c.stateNode;break;case 22:w=c.stateNode._retryCache;break;default:throw Error(i(314))}w!==null&&w.delete(f),g(c,v)}function k(c,f){return Ie(c,f)}var H=null,ie=null,we=!1,Ye=!1,lt=!1,yt=0;function ht(c){c!==ie&&c.next===null&&(ie===null?H=ie=c:ie=ie.next=c),Ye=!0,we||(we=!0,Ue())}function Rt(c,f){if(!lt&&Ye){lt=!0;do for(var v=!1,w=H;w!==null;){if(c!==0){var O=w.pendingLanes;if(O===0)var N=0;else{var $=w.suspendedLanes,se=w.pingedLanes;N=(1<<31-ct(42|c)+1)-1,N&=O&~($&~se),N=N&201326741?N&201326741|1:N?N|2:0}N!==0&&(v=!0,Be(w,N))}else N=hn,N=Fe(w,w===Jt?N:0,w.cancelPendingCommit!==null||w.timeoutHandle!==-1),(N&3)===0||gt(w,N)||(v=!0,Be(w,N));w=w.next}while(v);lt=!1}}function tn(){nr()}function nr(){Ye=we=!1;var c=0;yt!==0&&uH()&&(c=yt);for(var f=Z(),v=null,w=H;w!==null;){var O=w.next,N=Mh(w,f);N===0?(w.next=null,v===null?H=O:v.next=O,O===null&&(ie=v)):(v=w,(c!==0||(N&3)!==0)&&(Ye=!0)),w=O}si!==0&&si!==5||Rt(c),yt!==0&&(yt=0)}function Mh(c,f){for(var v=c.suspendedLanes,w=c.pingedLanes,O=c.expirationTimes,N=c.pendingLanes&-62914561;0<N;){var $=31-ct(N),se=1<<$,_e=O[$];_e===-1?((se&v)===0||(se&w)!==0)&&(O[$]=Ct(se,f)):_e<=f&&(c.expiredLanes|=se),N&=~se}if(f=Jt,v=hn,v=Fe(c,c===f?v:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),w=c.callbackNode,v===0||c===f&&(In===2||In===9)||c.cancelPendingCommit!==null)return w!==null&&w!==null&&be(w),c.callbackNode=null,c.callbackPriority=0;if((v&3)===0||gt(c,v)){if(f=v&-v,f===c.callbackPriority)return f;switch(w!==null&&be(w),Ar(v)){case 2:case 8:v=Oe;break;case 32:v=Ae;break;case 268435456:v=Ze;break;default:v=Ae}return w=Xc.bind(null,c),v=Ie(v,w),c.callbackPriority=f,c.callbackNode=v,f}return w!==null&&w!==null&&be(w),c.callbackPriority=2,c.callbackNode=null,2}function Xc(c,f){if(si!==0&&si!==5)return c.callbackNode=null,c.callbackPriority=0,null;var v=c.callbackNode;if(Th()&&c.callbackNode!==v)return null;var w=hn;return w=Fe(c,c===Jt?w:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),w===0?null:(Mn(c,w,f),Mh(c,Z()),c.callbackNode!=null&&c.callbackNode===v?Xc.bind(null,c):null)}function Be(c,f){if(Th())return null;Mn(c,f,!0)}function Ue(){hH(function(){(Gt&6)!==0?Ie(Ne,tn):nr()})}function We(){if(yt===0){var c=Ll;c===0&&(c=qe,qe<<=1,(qe&261888)===0&&(qe=256)),yt=c}return yt}function mt(c){return c==null||typeof c=="symbol"||typeof c=="boolean"?null:typeof c=="function"?c:Io(""+c)}function Wt(c,f){var v=f.ownerDocument.createElement("input");return v.name=f.name,v.value=f.value,c.id&&v.setAttribute("form",c.id),f.parentNode.insertBefore(v,f),c=new FormData(c),v.parentNode.removeChild(v),c}function Bi(c,f,v,w,O){if(f==="submit"&&v&&v.stateNode===O){var N=mt((O[Hi]||null).action),$=w.submitter;$&&(f=(f=$[Hi]||null)?mt(f.formAction):$.getAttribute("formAction"),f!==null&&(N=f,$=null));var se=new Ml("action","action",null,w,O);c.push({event:se,listeners:[{instance:null,listener:function(){if(w.defaultPrevented){if(yt!==0){var _e=$?Wt(O,$):new FormData(O);Xv(v,{pending:!0,data:_e,method:O.method,action:N},null,_e)}}else typeof N=="function"&&(se.preventDefault(),_e=$?Wt(O,$):new FormData(O),Xv(v,{pending:!0,data:_e,method:O.method,action:N},N,_e))},currentTarget:O}]})}}for(var qt=0;qt<Cd.length;qt++){var Fn=Cd[qt],Pr=Fn.toLowerCase(),Yn=Fn[0].toUpperCase()+Fn.slice(1);Fo(Pr,"on"+Yn)}Fo(vm,"onAnimationEnd"),Fo(Ad,"onAnimationIteration"),Fo(gv,"onAnimationStart"),Fo("dblclick","onDoubleClick"),Fo("focusin","onFocus"),Fo("focusout","onBlur"),Fo(cx,"onTransitionRun"),Fo(sM,"onTransitionStart"),Fo(ux,"onTransitionCancel"),Fo(vv,"onTransitionEnd"),Lt("onMouseEnter",["mouseout","mouseover"]),Lt("onMouseLeave",["mouseout","mouseover"]),Lt("onPointerEnter",["pointerout","pointerover"]),Lt("onPointerLeave",["pointerout","pointerover"]),wt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),wt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),wt("onBeforeInput",["compositionend","keypress","textInput","paste"]),wt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),wt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),wt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ea="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),pM=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ea));function UL(c,f){f=(f&4)!==0;for(var v=0;v<c.length;v++){var w=c[v],O=w.event;w=w.listeners;e:{var N=void 0;if(f)for(var $=w.length-1;0<=$;$--){var se=w[$],_e=se.instance,ze=se.currentTarget;if(se=se.listener,_e!==N&&O.isPropagationStopped())break e;N=se,O.currentTarget=ze;try{N(O)}catch(tt){Rd(tt)}O.currentTarget=null,N=_e}else for($=0;$<w.length;$++){if(se=w[$],_e=se.instance,ze=se.currentTarget,se=se.listener,_e!==N&&O.isPropagationStopped())break e;N=se,O.currentTarget=ze;try{N(O)}catch(tt){Rd(tt)}O.currentTarget=null,N=_e}}}}function Nn(c,f){var v=f[Is];v===void 0&&(v=f[Is]=new Set);var w=c+"__bubble";v.has(w)||(kL(f,c,2,!1),v.add(w))}function mM(c,f,v){var w=0;f&&(w|=4),kL(v,c,w,f)}var o1="_reactListening"+Math.random().toString(36).slice(2);function gM(c){if(!c[o1]){c[o1]=!0,bt.forEach(function(v){v!=="selectionchange"&&(pM.has(v)||mM(v,!1,c),mM(v,!0,c))});var f=c.nodeType===9?c:c.ownerDocument;f===null||f[o1]||(f[o1]=!0,mM("selectionchange",!1,f))}}function kL(c,f,v,w){switch(hP(f)){case 2:var O=LH;break;case 8:O=PH;break;default:O=OM}v=O.bind(null,f,v,c),O=void 0,!gs||f!=="touchstart"&&f!=="touchmove"&&f!=="wheel"||(O=!0),w?O!==void 0?c.addEventListener(f,v,{capture:!0,passive:O}):c.addEventListener(f,v,!0):O!==void 0?c.addEventListener(f,v,{passive:O}):c.addEventListener(f,v,!1)}function vM(c,f,v,w,O){var N=w;if((f&1)===0&&(f&2)===0&&w!==null)e:for(;;){if(w===null)return;var $=w.tag;if($===3||$===4){var se=w.stateNode.containerInfo;if(se===O)break;if($===4)for($=w.return;$!==null;){var _e=$.tag;if((_e===3||_e===4)&&$.stateNode.containerInfo===O)return;$=$.return}for(;se!==null;){if($=De(se),$===null)return;if(_e=$.tag,_e===5||_e===6||_e===26||_e===27){w=N=$;continue e}se=se.parentNode}}w=w.return}pc(function(){var ze=N,tt=xu(v),at=[];e:{var Ge=zo.get(c);if(Ge!==void 0){var $e=Ml,kt=c;switch(c){case"keypress":if(gc(v)===0)break e;case"keydown":case"keyup":$e=Au;break;case"focusin":kt="focus",$e=$f;break;case"focusout":kt="blur",$e=$f;break;case"beforeblur":case"afterblur":$e=$f;break;case"click":if(v.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$e=xd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$e=Mu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$e=$_;break;case vm:case Ad:case gv:$e=ao;break;case vv:$e=rM;break;case"scroll":case"scrollend":$e=yc;break;case"wheel":$e=K_;break;case"copy":case"cut":case"paste":$e=ma;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$e=nv;break;case"toggle":case"beforetoggle":$e=J_}var Yt=(f&4)!==0,xi=!Yt&&(c==="scroll"||c==="scrollend"),Pe=Yt?Ge!==null?Ge+"Capture":null:Ge;Yt=[];for(var Me=ze,ke;Me!==null;){var rt=Me;if(ke=rt.stateNode,rt=rt.tag,rt!==5&&rt!==26&&rt!==27||ke===null||Pe===null||(rt=Pa(Me,Pe),rt!=null&&Yt.push(fy(Me,rt,ke))),xi)break;Me=Me.return}0<Yt.length&&(Ge=new $e(Ge,kt,null,v,tt),at.push({event:Ge,listeners:Yt}))}}if((f&7)===0){e:{if(Ge=c==="mouseover"||c==="pointerover",$e=c==="mouseout"||c==="pointerout",Ge&&v!==La&&(kt=v.relatedTarget||v.fromElement)&&(De(kt)||kt[Ps]))break e;if(($e||Ge)&&(Ge=tt.window===tt?tt:(Ge=tt.ownerDocument)?Ge.defaultView||Ge.parentWindow:window,$e?(kt=v.relatedTarget||v.toElement,$e=ze,kt=kt?De(kt):null,kt!==null&&(xi=s(kt),Yt=kt.tag,kt!==xi||Yt!==5&&Yt!==27&&Yt!==6)&&(kt=null)):($e=null,kt=ze),$e!==kt)){if(Yt=xd,rt="onMouseLeave",Pe="onMouseEnter",Me="mouse",(c==="pointerout"||c==="pointerover")&&(Yt=nv,rt="onPointerLeave",Pe="onPointerEnter",Me="pointer"),xi=$e==null?Ge:He($e),ke=kt==null?Ge:He(kt),Ge=new Yt(rt,Me+"leave",$e,v,tt),Ge.target=xi,Ge.relatedTarget=ke,rt=null,De(tt)===ze&&(Yt=new Yt(Pe,Me+"enter",kt,v,tt),Yt.target=ke,Yt.relatedTarget=xi,rt=Yt),xi=rt,$e&&kt)t:{for(Yt=sH,Pe=$e,Me=kt,ke=0,rt=Pe;rt;rt=Yt(rt))ke++;rt=0;for(var jt=Me;jt;jt=Yt(jt))rt++;for(;0<ke-rt;)Pe=Yt(Pe),ke--;for(;0<rt-ke;)Me=Yt(Me),rt--;for(;ke--;){if(Pe===Me||Me!==null&&Pe===Me.alternate){Yt=Pe;break t}Pe=Yt(Pe),Me=Yt(Me)}Yt=null}else Yt=null;$e!==null&&zL(at,Ge,$e,Yt,!1),kt!==null&&xi!==null&&zL(at,xi,kt,Yt,!0)}}e:{if(Ge=ze?He(ze):window,$e=Ge.nodeName&&Ge.nodeName.toLowerCase(),$e==="select"||$e==="input"&&Ge.type==="file")var ei=cv;else if(lv(Ge))if(za)ei=ox;else{ei=hv;var Bt=rx}else $e=Ge.nodeName,!$e||$e.toLowerCase()!=="input"||Ge.type!=="checkbox"&&Ge.type!=="radio"?ze&&Oa(ze.elementType)&&(ei=cv):ei=sx;if(ei&&(ei=ei(c,ze))){mm(at,ei,v,tt);break e}Bt&&Bt(c,Ge,ze),c==="focusout"&&ze&&Ge.type==="number"&&ze.memoizedProps.value!=null&&Gn(Ge,"number",Ge.value)}switch(Bt=ze?He(ze):window,c){case"focusin":(lv(Bt)||Bt.contentEditable==="true")&&(Fa=Bt,Ba=ze,eh=null);break;case"focusout":eh=Ba=Fa=null;break;case"mousedown":gm=!0;break;case"contextmenu":case"mouseup":case"dragend":gm=!1,th(at,v,tt);break;case"selectionchange":if(lx)break;case"keydown":case"keyup":th(at,v,tt)}var Sn;if(Cu)e:{switch(c){case"compositionstart":var Bn="onCompositionStart";break e;case"compositionend":Bn="onCompositionEnd";break e;case"compositionupdate":Bn="onCompositionUpdate";break e}Bn=void 0}else Ru?pm(c,v)&&(Bn="onCompositionEnd"):c==="keydown"&&v.keyCode===229&&(Bn="onCompositionStart");Bn&&(rv&&v.locale!=="ko"&&(Ru||Bn!=="onCompositionStart"?Bn==="onCompositionEnd"&&Ru&&(Sn=mc()):(os=tt,Eu="value"in os?os.value:os.textContent,Ru=!0)),Bt=a1(ze,Bn),0<Bt.length&&(Bn=new cm(Bn,c,null,v,tt),at.push({event:Bn,listeners:Bt}),Sn?Bn.data=Sn:(Sn=sv(v),Sn!==null&&(Bn.data=Sn)))),(Sn=dm?nx(c,v):ov(c,v))&&(Bn=a1(ze,"onBeforeInput"),0<Bn.length&&(Bt=new cm("onBeforeInput","beforeinput",null,v,tt),at.push({event:Bt,listeners:Bn}),Bt.data=Sn)),Bi(at,c,ze,v,tt)}UL(at,f)})}function fy(c,f,v){return{instance:c,listener:f,currentTarget:v}}function a1(c,f){for(var v=f+"Capture",w=[];c!==null;){var O=c,N=O.stateNode;if(O=O.tag,O!==5&&O!==26&&O!==27||N===null||(O=Pa(c,v),O!=null&&w.unshift(fy(c,O,N)),O=Pa(c,f),O!=null&&w.push(fy(c,O,N))),c.tag===3)return w;c=c.return}return[]}function sH(c){if(c===null)return null;do c=c.return;while(c&&c.tag!==5&&c.tag!==27);return c||null}function zL(c,f,v,w,O){for(var N=f._reactName,$=[];v!==null&&v!==w;){var se=v,_e=se.alternate,ze=se.stateNode;if(se=se.tag,_e!==null&&_e===w)break;se!==5&&se!==26&&se!==27||ze===null||(_e=ze,O?(ze=Pa(v,N),ze!=null&&$.unshift(fy(v,ze,_e))):O||(ze=Pa(v,N),ze!=null&&$.push(fy(v,ze,_e)))),v=v.return}$.length!==0&&c.push({event:f,listeners:$})}var oH=/\r\n?/g,aH=/\u0000|\uFFFD/g;function FL(c){return(typeof c=="string"?c:""+c).replace(oH,`
`).replace(aH,"")}function BL(c,f){return f=FL(f),FL(c)===f}function _i(c,f,v,w,O,N){switch(v){case"children":typeof w=="string"?f==="body"||f==="textarea"&&w===""||ha(c,w):(typeof w=="number"||typeof w=="bigint")&&f!=="body"&&ha(c,""+w);break;case"className":kn(c,"class",w);break;case"tabIndex":kn(c,"tabindex",w);break;case"dir":case"role":case"viewBox":case"width":case"height":kn(c,v,w);break;case"style":_u(c,w,N);break;case"data":if(f!=="object"){kn(c,"data",w);break}case"src":case"href":if(w===""&&(f!=="a"||v!=="href")){c.removeAttribute(v);break}if(w==null||typeof w=="function"||typeof w=="symbol"||typeof w=="boolean"){c.removeAttribute(v);break}w=Io(""+w),c.setAttribute(v,w);break;case"action":case"formAction":if(typeof w=="function"){c.setAttribute(v,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof N=="function"&&(v==="formAction"?(f!=="input"&&_i(c,f,"name",O.name,O,null),_i(c,f,"formEncType",O.formEncType,O,null),_i(c,f,"formMethod",O.formMethod,O,null),_i(c,f,"formTarget",O.formTarget,O,null)):(_i(c,f,"encType",O.encType,O,null),_i(c,f,"method",O.method,O,null),_i(c,f,"target",O.target,O,null)));if(w==null||typeof w=="symbol"||typeof w=="boolean"){c.removeAttribute(v);break}w=Io(""+w),c.setAttribute(v,w);break;case"onClick":w!=null&&(c.onclick=ss);break;case"onScroll":w!=null&&Nn("scroll",c);break;case"onScrollEnd":w!=null&&Nn("scrollend",c);break;case"dangerouslySetInnerHTML":if(w!=null){if(typeof w!="object"||!("__html"in w))throw Error(i(61));if(v=w.__html,v!=null){if(O.children!=null)throw Error(i(60));c.innerHTML=v}}break;case"multiple":c.multiple=w&&typeof w!="function"&&typeof w!="symbol";break;case"muted":c.muted=w&&typeof w!="function"&&typeof w!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(w==null||typeof w=="function"||typeof w=="boolean"||typeof w=="symbol"){c.removeAttribute("xlink:href");break}v=Io(""+w),c.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",v);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":w!=null&&typeof w!="function"&&typeof w!="symbol"?c.setAttribute(v,""+w):c.removeAttribute(v);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":w&&typeof w!="function"&&typeof w!="symbol"?c.setAttribute(v,""):c.removeAttribute(v);break;case"capture":case"download":w===!0?c.setAttribute(v,""):w!==!1&&w!=null&&typeof w!="function"&&typeof w!="symbol"?c.setAttribute(v,w):c.removeAttribute(v);break;case"cols":case"rows":case"size":case"span":w!=null&&typeof w!="function"&&typeof w!="symbol"&&!isNaN(w)&&1<=w?c.setAttribute(v,w):c.removeAttribute(v);break;case"rowSpan":case"start":w==null||typeof w=="function"||typeof w=="symbol"||isNaN(w)?c.removeAttribute(v):c.setAttribute(v,w);break;case"popover":Nn("beforetoggle",c),Nn("toggle",c),Un(c,"popover",w);break;case"xlinkActuate":rn(c,"http://www.w3.org/1999/xlink","xlink:actuate",w);break;case"xlinkArcrole":rn(c,"http://www.w3.org/1999/xlink","xlink:arcrole",w);break;case"xlinkRole":rn(c,"http://www.w3.org/1999/xlink","xlink:role",w);break;case"xlinkShow":rn(c,"http://www.w3.org/1999/xlink","xlink:show",w);break;case"xlinkTitle":rn(c,"http://www.w3.org/1999/xlink","xlink:title",w);break;case"xlinkType":rn(c,"http://www.w3.org/1999/xlink","xlink:type",w);break;case"xmlBase":rn(c,"http://www.w3.org/XML/1998/namespace","xml:base",w);break;case"xmlLang":rn(c,"http://www.w3.org/XML/1998/namespace","xml:lang",w);break;case"xmlSpace":rn(c,"http://www.w3.org/XML/1998/namespace","xml:space",w);break;case"is":Un(c,"is",w);break;case"innerText":case"textContent":break;default:(!(2<v.length)||v[0]!=="o"&&v[0]!=="O"||v[1]!=="n"&&v[1]!=="N")&&(v=_d.get(v)||v,Un(c,v,w))}}function yM(c,f,v,w,O,N){switch(v){case"style":_u(c,w,N);break;case"dangerouslySetInnerHTML":if(w!=null){if(typeof w!="object"||!("__html"in w))throw Error(i(61));if(v=w.__html,v!=null){if(O.children!=null)throw Error(i(60));c.innerHTML=v}}break;case"children":typeof w=="string"?ha(c,w):(typeof w=="number"||typeof w=="bigint")&&ha(c,""+w);break;case"onScroll":w!=null&&Nn("scroll",c);break;case"onScrollEnd":w!=null&&Nn("scrollend",c);break;case"onClick":w!=null&&(c.onclick=ss);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!At.hasOwnProperty(v))e:{if(v[0]==="o"&&v[1]==="n"&&(O=v.endsWith("Capture"),f=v.slice(2,O?v.length-7:void 0),N=c[Hi]||null,N=N!=null?N[v]:null,typeof N=="function"&&c.removeEventListener(f,N,O),typeof w=="function")){typeof N!="function"&&N!==null&&(v in c?c[v]=null:c.hasAttribute(v)&&c.removeAttribute(v)),c.addEventListener(f,w,O);break e}v in c?c[v]=w:w===!0?c.setAttribute(v,""):Un(c,v,w)}}}function Ts(c,f,v){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Nn("error",c),Nn("load",c);var w=!1,O=!1,N;for(N in v)if(v.hasOwnProperty(N)){var $=v[N];if($!=null)switch(N){case"src":w=!0;break;case"srcSet":O=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,f));default:_i(c,f,N,$,v,null)}}O&&_i(c,f,"srcSet",v.srcSet,v,null),w&&_i(c,f,"src",v.src,v,null);return;case"input":Nn("invalid",c);var se=N=$=O=null,_e=null,ze=null;for(w in v)if(v.hasOwnProperty(w)){var tt=v[w];if(tt!=null)switch(w){case"name":O=tt;break;case"type":$=tt;break;case"checked":_e=tt;break;case"defaultChecked":ze=tt;break;case"value":N=tt;break;case"defaultValue":se=tt;break;case"children":case"dangerouslySetInnerHTML":if(tt!=null)throw Error(i(137,f));break;default:_i(c,f,w,tt,v,null)}}ji(c,N,se,_e,ze,$,O,!1);return;case"select":Nn("invalid",c),w=$=N=null;for(O in v)if(v.hasOwnProperty(O)&&(se=v[O],se!=null))switch(O){case"value":N=se;break;case"defaultValue":$=se;break;case"multiple":w=se;default:_i(c,f,O,se,v,null)}f=N,v=$,c.multiple=!!w,f!=null?di(c,!!w,f,!1):v!=null&&di(c,!!w,v,!0);return;case"textarea":Nn("invalid",c),N=O=w=null;for($ in v)if(v.hasOwnProperty($)&&(se=v[$],se!=null))switch($){case"value":w=se;break;case"defaultValue":O=se;break;case"children":N=se;break;case"dangerouslySetInnerHTML":if(se!=null)throw Error(i(91));break;default:_i(c,f,$,se,v,null)}Hr(c,w,O,N);return;case"option":for(_e in v)v.hasOwnProperty(_e)&&(w=v[_e],w!=null)&&(_e==="selected"?c.selected=w&&typeof w!="function"&&typeof w!="symbol":_i(c,f,_e,w,v,null));return;case"dialog":Nn("beforetoggle",c),Nn("toggle",c),Nn("cancel",c),Nn("close",c);break;case"iframe":case"object":Nn("load",c);break;case"video":case"audio":for(w=0;w<ea.length;w++)Nn(ea[w],c);break;case"image":Nn("error",c),Nn("load",c);break;case"details":Nn("toggle",c);break;case"embed":case"source":case"link":Nn("error",c),Nn("load",c);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ze in v)if(v.hasOwnProperty(ze)&&(w=v[ze],w!=null))switch(ze){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,f));default:_i(c,f,ze,w,v,null)}return;default:if(Oa(f)){for(tt in v)v.hasOwnProperty(tt)&&(w=v[tt],w!==void 0&&yM(c,f,tt,w,v,void 0));return}}for(se in v)v.hasOwnProperty(se)&&(w=v[se],w!=null&&_i(c,f,se,w,v,null))}function lH(c,f,v,w){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var O=null,N=null,$=null,se=null,_e=null,ze=null,tt=null;for($e in v){var at=v[$e];if(v.hasOwnProperty($e)&&at!=null)switch($e){case"checked":break;case"value":break;case"defaultValue":_e=at;default:w.hasOwnProperty($e)||_i(c,f,$e,null,w,at)}}for(var Ge in w){var $e=w[Ge];if(at=v[Ge],w.hasOwnProperty(Ge)&&($e!=null||at!=null))switch(Ge){case"type":N=$e;break;case"name":O=$e;break;case"checked":ze=$e;break;case"defaultChecked":tt=$e;break;case"value":$=$e;break;case"defaultValue":se=$e;break;case"children":case"dangerouslySetInnerHTML":if($e!=null)throw Error(i(137,f));break;default:$e!==at&&_i(c,f,Ge,$e,w,at)}}Zi(c,$,se,_e,ze,tt,N,O);return;case"select":$e=$=se=Ge=null;for(N in v)if(_e=v[N],v.hasOwnProperty(N)&&_e!=null)switch(N){case"value":break;case"multiple":$e=_e;default:w.hasOwnProperty(N)||_i(c,f,N,null,w,_e)}for(O in w)if(N=w[O],_e=v[O],w.hasOwnProperty(O)&&(N!=null||_e!=null))switch(O){case"value":Ge=N;break;case"defaultValue":se=N;break;case"multiple":$=N;default:N!==_e&&_i(c,f,O,N,w,_e)}f=se,v=$,w=$e,Ge!=null?di(c,!!v,Ge,!1):!!w!=!!v&&(f!=null?di(c,!!v,f,!0):di(c,!!v,v?[]:"",!1));return;case"textarea":$e=Ge=null;for(se in v)if(O=v[se],v.hasOwnProperty(se)&&O!=null&&!w.hasOwnProperty(se))switch(se){case"value":break;case"children":break;default:_i(c,f,se,null,w,O)}for($ in w)if(O=w[$],N=v[$],w.hasOwnProperty($)&&(O!=null||N!=null))switch($){case"value":Ge=O;break;case"defaultValue":$e=O;break;case"children":break;case"dangerouslySetInnerHTML":if(O!=null)throw Error(i(91));break;default:O!==N&&_i(c,f,$,O,w,N)}ro(c,Ge,$e);return;case"option":for(var kt in v)Ge=v[kt],v.hasOwnProperty(kt)&&Ge!=null&&!w.hasOwnProperty(kt)&&(kt==="selected"?c.selected=!1:_i(c,f,kt,null,w,Ge));for(_e in w)Ge=w[_e],$e=v[_e],w.hasOwnProperty(_e)&&Ge!==$e&&(Ge!=null||$e!=null)&&(_e==="selected"?c.selected=Ge&&typeof Ge!="function"&&typeof Ge!="symbol":_i(c,f,_e,Ge,w,$e));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Yt in v)Ge=v[Yt],v.hasOwnProperty(Yt)&&Ge!=null&&!w.hasOwnProperty(Yt)&&_i(c,f,Yt,null,w,Ge);for(ze in w)if(Ge=w[ze],$e=v[ze],w.hasOwnProperty(ze)&&Ge!==$e&&(Ge!=null||$e!=null))switch(ze){case"children":case"dangerouslySetInnerHTML":if(Ge!=null)throw Error(i(137,f));break;default:_i(c,f,ze,Ge,w,$e)}return;default:if(Oa(f)){for(var xi in v)Ge=v[xi],v.hasOwnProperty(xi)&&Ge!==void 0&&!w.hasOwnProperty(xi)&&yM(c,f,xi,void 0,w,Ge);for(tt in w)Ge=w[tt],$e=v[tt],!w.hasOwnProperty(tt)||Ge===$e||Ge===void 0&&$e===void 0||yM(c,f,tt,Ge,w,$e);return}}for(var Pe in v)Ge=v[Pe],v.hasOwnProperty(Pe)&&Ge!=null&&!w.hasOwnProperty(Pe)&&_i(c,f,Pe,null,w,Ge);for(at in w)Ge=w[at],$e=v[at],!w.hasOwnProperty(at)||Ge===$e||Ge==null&&$e==null||_i(c,f,at,Ge,w,$e)}function VL(c){switch(c){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function cH(){if(typeof performance.getEntriesByType=="function"){for(var c=0,f=0,v=performance.getEntriesByType("resource"),w=0;w<v.length;w++){var O=v[w],N=O.transferSize,$=O.initiatorType,se=O.duration;if(N&&se&&VL($)){for($=0,se=O.responseEnd,w+=1;w<v.length;w++){var _e=v[w],ze=_e.startTime;if(ze>se)break;var tt=_e.transferSize,at=_e.initiatorType;tt&&VL(at)&&(_e=_e.responseEnd,$+=tt*(_e<se?1:(se-ze)/(_e-ze)))}if(--w,f+=8*(N+$)/(O.duration/1e3),c++,10<c)break}}if(0<c)return f/c/1e6}return navigator.connection&&(c=navigator.connection.downlink,typeof c=="number")?c:5}var bM=null,_M=null;function l1(c){return c.nodeType===9?c:c.ownerDocument}function GL(c){switch(c){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function HL(c,f){if(c===0)switch(f){case"svg":return 1;case"math":return 2;default:return 0}return c===1&&f==="foreignObject"?0:c}function xM(c,f){return c==="textarea"||c==="noscript"||typeof f.children=="string"||typeof f.children=="number"||typeof f.children=="bigint"||typeof f.dangerouslySetInnerHTML=="object"&&f.dangerouslySetInnerHTML!==null&&f.dangerouslySetInnerHTML.__html!=null}var SM=null;function uH(){var c=window.event;return c&&c.type==="popstate"?c===SM?!1:(SM=c,!0):(SM=null,!1)}var jL=typeof setTimeout=="function"?setTimeout:void 0,fH=typeof clearTimeout=="function"?clearTimeout:void 0,WL=typeof Promise=="function"?Promise:void 0,hH=typeof queueMicrotask=="function"?queueMicrotask:typeof WL<"u"?function(c){return WL.resolve(null).then(c).catch(dH)}:jL;function dH(c){setTimeout(function(){throw c})}function Ah(c){return c==="head"}function XL(c,f){var v=f,w=0;do{var O=v.nextSibling;if(c.removeChild(v),O&&O.nodeType===8)if(v=O.data,v==="/$"||v==="/&"){if(w===0){c.removeChild(O),lg(f);return}w--}else if(v==="$"||v==="$?"||v==="$~"||v==="$!"||v==="&")w++;else if(v==="html")hy(c.ownerDocument.documentElement);else if(v==="head"){v=c.ownerDocument.head,hy(v);for(var N=v.firstChild;N;){var $=N.nextSibling,se=N.nodeName;N[io]||se==="SCRIPT"||se==="STYLE"||se==="LINK"&&N.rel.toLowerCase()==="stylesheet"||v.removeChild(N),N=$}}else v==="body"&&hy(c.ownerDocument.body);v=O}while(v);lg(f)}function qL(c,f){var v=c;c=0;do{var w=v.nextSibling;if(v.nodeType===1?f?(v._stashedDisplay=v.style.display,v.style.display="none"):(v.style.display=v._stashedDisplay||"",v.getAttribute("style")===""&&v.removeAttribute("style")):v.nodeType===3&&(f?(v._stashedText=v.nodeValue,v.nodeValue=""):v.nodeValue=v._stashedText||""),w&&w.nodeType===8)if(v=w.data,v==="/$"){if(c===0)break;c--}else v!=="$"&&v!=="$?"&&v!=="$~"&&v!=="$!"||c++;v=w}while(v)}function wM(c){var f=c.firstChild;for(f&&f.nodeType===10&&(f=f.nextSibling);f;){var v=f;switch(f=f.nextSibling,v.nodeName){case"HTML":case"HEAD":case"BODY":wM(v),ce(v);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(v.rel.toLowerCase()==="stylesheet")continue}c.removeChild(v)}}function pH(c,f,v,w){for(;c.nodeType===1;){var O=v;if(c.nodeName.toLowerCase()!==f.toLowerCase()){if(!w&&(c.nodeName!=="INPUT"||c.type!=="hidden"))break}else if(w){if(!c[io])switch(f){case"meta":if(!c.hasAttribute("itemprop"))break;return c;case"link":if(N=c.getAttribute("rel"),N==="stylesheet"&&c.hasAttribute("data-precedence"))break;if(N!==O.rel||c.getAttribute("href")!==(O.href==null||O.href===""?null:O.href)||c.getAttribute("crossorigin")!==(O.crossOrigin==null?null:O.crossOrigin)||c.getAttribute("title")!==(O.title==null?null:O.title))break;return c;case"style":if(c.hasAttribute("data-precedence"))break;return c;case"script":if(N=c.getAttribute("src"),(N!==(O.src==null?null:O.src)||c.getAttribute("type")!==(O.type==null?null:O.type)||c.getAttribute("crossorigin")!==(O.crossOrigin==null?null:O.crossOrigin))&&N&&c.hasAttribute("async")&&!c.hasAttribute("itemprop"))break;return c;default:return c}}else if(f==="input"&&c.type==="hidden"){var N=O.name==null?null:""+O.name;if(O.type==="hidden"&&c.getAttribute("name")===N)return c}else return c;if(c=sl(c.nextSibling),c===null)break}return null}function mH(c,f,v){if(f==="")return null;for(;c.nodeType!==3;)if((c.nodeType!==1||c.nodeName!=="INPUT"||c.type!=="hidden")&&!v||(c=sl(c.nextSibling),c===null))return null;return c}function YL(c,f){for(;c.nodeType!==8;)if((c.nodeType!==1||c.nodeName!=="INPUT"||c.type!=="hidden")&&!f||(c=sl(c.nextSibling),c===null))return null;return c}function EM(c){return c.data==="$?"||c.data==="$~"}function TM(c){return c.data==="$!"||c.data==="$?"&&c.ownerDocument.readyState!=="loading"}function gH(c,f){var v=c.ownerDocument;if(c.data==="$~")c._reactRetry=f;else if(c.data!=="$?"||v.readyState!=="loading")f();else{var w=function(){f(),v.removeEventListener("DOMContentLoaded",w)};v.addEventListener("DOMContentLoaded",w),c._reactRetry=w}}function sl(c){for(;c!=null;c=c.nextSibling){var f=c.nodeType;if(f===1||f===3)break;if(f===8){if(f=c.data,f==="$"||f==="$!"||f==="$?"||f==="$~"||f==="&"||f==="F!"||f==="F")break;if(f==="/$"||f==="/&")return null}}return c}var MM=null;function $L(c){c=c.nextSibling;for(var f=0;c;){if(c.nodeType===8){var v=c.data;if(v==="/$"||v==="/&"){if(f===0)return sl(c.nextSibling);f--}else v!=="$"&&v!=="$!"&&v!=="$?"&&v!=="$~"&&v!=="&"||f++}c=c.nextSibling}return null}function ZL(c){c=c.previousSibling;for(var f=0;c;){if(c.nodeType===8){var v=c.data;if(v==="$"||v==="$!"||v==="$?"||v==="$~"||v==="&"){if(f===0)return c;f--}else v!=="/$"&&v!=="/&"||f++}c=c.previousSibling}return null}function KL(c,f,v){switch(f=l1(v),c){case"html":if(c=f.documentElement,!c)throw Error(i(452));return c;case"head":if(c=f.head,!c)throw Error(i(453));return c;case"body":if(c=f.body,!c)throw Error(i(454));return c;default:throw Error(i(451))}}function hy(c){for(var f=c.attributes;f.length;)c.removeAttributeNode(f[0]);ce(c)}var ol=new Map,QL=new Set;function c1(c){return typeof c.getRootNode=="function"?c.getRootNode():c.nodeType===9?c:c.ownerDocument}var Ju=G.d;G.d={f:vH,r:yH,D:bH,C:_H,L:xH,m:SH,X:EH,S:wH,M:TH};function vH(){var c=Ju.f(),f=_a();return c||f}function yH(c){var f=Ve(c);f!==null&&f.tag===5&&f.type==="form"?Wx(f):Ju.r(c)}var sg=typeof document>"u"?null:document;function JL(c,f,v){var w=sg;if(w&&typeof f=="string"&&f){var O=Xt(f);O='link[rel="'+c+'"][href="'+O+'"]',typeof v=="string"&&(O+='[crossorigin="'+v+'"]'),QL.has(O)||(QL.add(O),c={rel:c,crossOrigin:v,href:f},w.querySelector(O)===null&&(f=w.createElement("link"),Ts(f,"link",c),it(f),w.head.appendChild(f)))}}function bH(c){Ju.D(c),JL("dns-prefetch",c,null)}function _H(c,f){Ju.C(c,f),JL("preconnect",c,f)}function xH(c,f,v){Ju.L(c,f,v);var w=sg;if(w&&c&&f){var O='link[rel="preload"][as="'+Xt(f)+'"]';f==="image"&&v&&v.imageSrcSet?(O+='[imagesrcset="'+Xt(v.imageSrcSet)+'"]',typeof v.imageSizes=="string"&&(O+='[imagesizes="'+Xt(v.imageSizes)+'"]')):O+='[href="'+Xt(c)+'"]';var N=O;switch(f){case"style":N=og(c);break;case"script":N=ag(c)}ol.has(N)||(c=p({rel:"preload",href:f==="image"&&v&&v.imageSrcSet?void 0:c,as:f},v),ol.set(N,c),w.querySelector(O)!==null||f==="style"&&w.querySelector(dy(N))||f==="script"&&w.querySelector(py(N))||(f=w.createElement("link"),Ts(f,"link",c),it(f),w.head.appendChild(f)))}}function SH(c,f){Ju.m(c,f);var v=sg;if(v&&c){var w=f&&typeof f.as=="string"?f.as:"script",O='link[rel="modulepreload"][as="'+Xt(w)+'"][href="'+Xt(c)+'"]',N=O;switch(w){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":N=ag(c)}if(!ol.has(N)&&(c=p({rel:"modulepreload",href:c},f),ol.set(N,c),v.querySelector(O)===null)){switch(w){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(v.querySelector(py(N)))return}w=v.createElement("link"),Ts(w,"link",c),it(w),v.head.appendChild(w)}}}function wH(c,f,v){Ju.S(c,f,v);var w=sg;if(w&&c){var O=ye(w).hoistableStyles,N=og(c);f=f||"default";var $=O.get(N);if(!$){var se={loading:0,preload:null};if($=w.querySelector(dy(N)))se.loading=5;else{c=p({rel:"stylesheet",href:c,"data-precedence":f},v),(v=ol.get(N))&&AM(c,v);var _e=$=w.createElement("link");it(_e),Ts(_e,"link",c),_e._p=new Promise(function(ze,tt){_e.onload=ze,_e.onerror=tt}),_e.addEventListener("load",function(){se.loading|=1}),_e.addEventListener("error",function(){se.loading|=2}),se.loading|=4,u1($,f,w)}$={type:"stylesheet",instance:$,count:1,state:se},O.set(N,$)}}}function EH(c,f){Ju.X(c,f);var v=sg;if(v&&c){var w=ye(v).hoistableScripts,O=ag(c),N=w.get(O);N||(N=v.querySelector(py(O)),N||(c=p({src:c,async:!0},f),(f=ol.get(O))&&CM(c,f),N=v.createElement("script"),it(N),Ts(N,"link",c),v.head.appendChild(N)),N={type:"script",instance:N,count:1,state:null},w.set(O,N))}}function TH(c,f){Ju.M(c,f);var v=sg;if(v&&c){var w=ye(v).hoistableScripts,O=ag(c),N=w.get(O);N||(N=v.querySelector(py(O)),N||(c=p({src:c,async:!0,type:"module"},f),(f=ol.get(O))&&CM(c,f),N=v.createElement("script"),it(N),Ts(N,"link",c),v.head.appendChild(N)),N={type:"script",instance:N,count:1,state:null},w.set(O,N))}}function eP(c,f,v,w){var O=(O=le.current)?c1(O):null;if(!O)throw Error(i(446));switch(c){case"meta":case"title":return null;case"style":return typeof v.precedence=="string"&&typeof v.href=="string"?(f=og(v.href),v=ye(O).hoistableStyles,w=v.get(f),w||(w={type:"style",instance:null,count:0,state:null},v.set(f,w)),w):{type:"void",instance:null,count:0,state:null};case"link":if(v.rel==="stylesheet"&&typeof v.href=="string"&&typeof v.precedence=="string"){c=og(v.href);var N=ye(O).hoistableStyles,$=N.get(c);if($||(O=O.ownerDocument||O,$={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},N.set(c,$),(N=O.querySelector(dy(c)))&&!N._p&&($.instance=N,$.state.loading=5),ol.has(c)||(v={rel:"preload",as:"style",href:v.href,crossOrigin:v.crossOrigin,integrity:v.integrity,media:v.media,hrefLang:v.hrefLang,referrerPolicy:v.referrerPolicy},ol.set(c,v),N||MH(O,c,v,$.state))),f&&w===null)throw Error(i(528,""));return $}if(f&&w!==null)throw Error(i(529,""));return null;case"script":return f=v.async,v=v.src,typeof v=="string"&&f&&typeof f!="function"&&typeof f!="symbol"?(f=ag(v),v=ye(O).hoistableScripts,w=v.get(f),w||(w={type:"script",instance:null,count:0,state:null},v.set(f,w)),w):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,c))}}function og(c){return'href="'+Xt(c)+'"'}function dy(c){return'link[rel="stylesheet"]['+c+"]"}function tP(c){return p({},c,{"data-precedence":c.precedence,precedence:null})}function MH(c,f,v,w){c.querySelector('link[rel="preload"][as="style"]['+f+"]")?w.loading=1:(f=c.createElement("link"),w.preload=f,f.addEventListener("load",function(){return w.loading|=1}),f.addEventListener("error",function(){return w.loading|=2}),Ts(f,"link",v),it(f),c.head.appendChild(f))}function ag(c){return'[src="'+Xt(c)+'"]'}function py(c){return"script[async]"+c}function nP(c,f,v){if(f.count++,f.instance===null)switch(f.type){case"style":var w=c.querySelector('style[data-href~="'+Xt(v.href)+'"]');if(w)return f.instance=w,it(w),w;var O=p({},v,{"data-href":v.href,"data-precedence":v.precedence,href:null,precedence:null});return w=(c.ownerDocument||c).createElement("style"),it(w),Ts(w,"style",O),u1(w,v.precedence,c),f.instance=w;case"stylesheet":O=og(v.href);var N=c.querySelector(dy(O));if(N)return f.state.loading|=4,f.instance=N,it(N),N;w=tP(v),(O=ol.get(O))&&AM(w,O),N=(c.ownerDocument||c).createElement("link"),it(N);var $=N;return $._p=new Promise(function(se,_e){$.onload=se,$.onerror=_e}),Ts(N,"link",w),f.state.loading|=4,u1(N,v.precedence,c),f.instance=N;case"script":return N=ag(v.src),(O=c.querySelector(py(N)))?(f.instance=O,it(O),O):(w=v,(O=ol.get(N))&&(w=p({},v),CM(w,O)),c=c.ownerDocument||c,O=c.createElement("script"),it(O),Ts(O,"link",w),c.head.appendChild(O),f.instance=O);case"void":return null;default:throw Error(i(443,f.type))}else f.type==="stylesheet"&&(f.state.loading&4)===0&&(w=f.instance,f.state.loading|=4,u1(w,v.precedence,c));return f.instance}function u1(c,f,v){for(var w=v.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),O=w.length?w[w.length-1]:null,N=O,$=0;$<w.length;$++){var se=w[$];if(se.dataset.precedence===f)N=se;else if(N!==O)break}N?N.parentNode.insertBefore(c,N.nextSibling):(f=v.nodeType===9?v.head:v,f.insertBefore(c,f.firstChild))}function AM(c,f){c.crossOrigin==null&&(c.crossOrigin=f.crossOrigin),c.referrerPolicy==null&&(c.referrerPolicy=f.referrerPolicy),c.title==null&&(c.title=f.title)}function CM(c,f){c.crossOrigin==null&&(c.crossOrigin=f.crossOrigin),c.referrerPolicy==null&&(c.referrerPolicy=f.referrerPolicy),c.integrity==null&&(c.integrity=f.integrity)}var f1=null;function iP(c,f,v){if(f1===null){var w=new Map,O=f1=new Map;O.set(v,w)}else O=f1,w=O.get(v),w||(w=new Map,O.set(v,w));if(w.has(c))return w;for(w.set(c,null),v=v.getElementsByTagName(c),O=0;O<v.length;O++){var N=v[O];if(!(N[io]||N[$n]||c==="link"&&N.getAttribute("rel")==="stylesheet")&&N.namespaceURI!=="http://www.w3.org/2000/svg"){var $=N.getAttribute(f)||"";$=c+$;var se=w.get($);se?se.push(N):w.set($,[N])}}return w}function rP(c,f,v){c=c.ownerDocument||c,c.head.insertBefore(v,f==="title"?c.querySelector("head > title"):null)}function AH(c,f,v){if(v===1||f.itemProp!=null)return!1;switch(c){case"meta":case"title":return!0;case"style":if(typeof f.precedence!="string"||typeof f.href!="string"||f.href==="")break;return!0;case"link":if(typeof f.rel!="string"||typeof f.href!="string"||f.href===""||f.onLoad||f.onError)break;return f.rel==="stylesheet"?(c=f.disabled,typeof f.precedence=="string"&&c==null):!0;case"script":if(f.async&&typeof f.async!="function"&&typeof f.async!="symbol"&&!f.onLoad&&!f.onError&&f.src&&typeof f.src=="string")return!0}return!1}function sP(c){return!(c.type==="stylesheet"&&(c.state.loading&3)===0)}function CH(c,f,v,w){if(v.type==="stylesheet"&&(typeof w.media!="string"||matchMedia(w.media).matches!==!1)&&(v.state.loading&4)===0){if(v.instance===null){var O=og(w.href),N=f.querySelector(dy(O));if(N){f=N._p,f!==null&&typeof f=="object"&&typeof f.then=="function"&&(c.count++,c=h1.bind(c),f.then(c,c)),v.state.loading|=4,v.instance=N,it(N);return}N=f.ownerDocument||f,w=tP(w),(O=ol.get(O))&&AM(w,O),N=N.createElement("link"),it(N);var $=N;$._p=new Promise(function(se,_e){$.onload=se,$.onerror=_e}),Ts(N,"link",w),v.instance=N}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(v,f),(f=v.state.preload)&&(v.state.loading&3)===0&&(c.count++,v=h1.bind(c),f.addEventListener("load",v),f.addEventListener("error",v))}}var RM=0;function RH(c,f){return c.stylesheets&&c.count===0&&p1(c,c.stylesheets),0<c.count||0<c.imgCount?function(v){var w=setTimeout(function(){if(c.stylesheets&&p1(c,c.stylesheets),c.unsuspend){var N=c.unsuspend;c.unsuspend=null,N()}},6e4+f);0<c.imgBytes&&RM===0&&(RM=62500*cH());var O=setTimeout(function(){if(c.waitingForImages=!1,c.count===0&&(c.stylesheets&&p1(c,c.stylesheets),c.unsuspend)){var N=c.unsuspend;c.unsuspend=null,N()}},(c.imgBytes>RM?50:800)+f);return c.unsuspend=v,function(){c.unsuspend=null,clearTimeout(w),clearTimeout(O)}}:null}function h1(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)p1(this,this.stylesheets);else if(this.unsuspend){var c=this.unsuspend;this.unsuspend=null,c()}}}var d1=null;function p1(c,f){c.stylesheets=null,c.unsuspend!==null&&(c.count++,d1=new Map,f.forEach(DH,c),d1=null,h1.call(c))}function DH(c,f){if(!(f.state.loading&4)){var v=d1.get(c);if(v)var w=v.get(null);else{v=new Map,d1.set(c,v);for(var O=c.querySelectorAll("link[data-precedence],style[data-precedence]"),N=0;N<O.length;N++){var $=O[N];($.nodeName==="LINK"||$.getAttribute("media")!=="not all")&&(v.set($.dataset.precedence,$),w=$)}w&&v.set(null,w)}O=f.instance,$=O.getAttribute("data-precedence"),N=v.get($)||w,N===w&&v.set(null,O),v.set($,O),this.count++,w=h1.bind(this),O.addEventListener("load",w),O.addEventListener("error",w),N?N.parentNode.insertBefore(O,N.nextSibling):(c=c.nodeType===9?c.head:c,c.insertBefore(O,c.firstChild)),f.state.loading|=4}}var my={$$typeof:A,Provider:null,Consumer:null,_currentValue:K,_currentValue2:K,_threadCount:0};function OH(c,f,v,w,O,N,$,se,_e){this.tag=1,this.containerInfo=c,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ft(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ft(0),this.hiddenUpdates=Ft(null),this.identifierPrefix=w,this.onUncaughtError=O,this.onCaughtError=N,this.onRecoverableError=$,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=_e,this.incompleteTransitions=new Map}function oP(c,f,v,w,O,N,$,se,_e,ze,tt,at){return c=new OH(c,f,v,$,_e,ze,tt,at,se),f=1,N===!0&&(f|=24),N=Ii(3,null,null,f),c.current=N,N.stateNode=c,f=bv(),f.refCount++,c.pooledCache=f,f.refCount++,N.memoizedState={element:w,isDehydrated:v,cache:f},Ud(N),c}function aP(c){return c?(c=wc,c):wc}function lP(c,f,v,w,O,N){O=aP(O),w.context===null?w.context=O:w.pendingContext=O,w=Il(f),w.payload={element:v},N=N===void 0?null:N,N!==null&&(w.callback=N),v=Oc(c,w,f),v!==null&&(yn(v,c,f),Lc(v,c,f))}function cP(c,f){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var v=c.retryLane;c.retryLane=v!==0&&v<f?v:f}}function DM(c,f){cP(c,f),(c=c.alternate)&&cP(c,f)}function uP(c){if(c.tag===13||c.tag===31){var f=ys(c,67108864);f!==null&&yn(f,c,67108864),DM(c,67108864)}}function fP(c){if(c.tag===13||c.tag===31){var f=vo();f=_r(f);var v=ys(c,f);v!==null&&yn(v,c,f),DM(c,f)}}var m1=!0;function LH(c,f,v,w){var O=j.T;j.T=null;var N=G.p;try{G.p=2,OM(c,f,v,w)}finally{G.p=N,j.T=O}}function PH(c,f,v,w){var O=j.T;j.T=null;var N=G.p;try{G.p=8,OM(c,f,v,w)}finally{G.p=N,j.T=O}}function OM(c,f,v,w){if(m1){var O=LM(w);if(O===null)vM(c,f,w,g1,v),dP(c,w);else if(NH(O,c,f,v,w))w.stopPropagation();else if(dP(c,w),f&4&&-1<IH.indexOf(c)){for(;O!==null;){var N=Ve(O);if(N!==null)switch(N.tag){case 3:if(N=N.stateNode,N.current.memoizedState.isDehydrated){var $=Qe(N.pendingLanes);if($!==0){var se=N;for(se.pendingLanes|=2,se.entangledLanes|=2;$;){var _e=1<<31-ct($);se.entanglements[1]|=_e,$&=~_e}ht(N),(Gt&6)===0&&(er=Z()+500,Rt(0))}}break;case 31:case 13:se=ys(N,2),se!==null&&yn(se,N,2),_a(),DM(N,2)}if(N=LM(w),N===null&&vM(c,f,w,g1,v),N===O)break;O=N}O!==null&&w.stopPropagation()}else vM(c,f,w,null,v)}}function LM(c){return c=xu(c),PM(c)}var g1=null;function PM(c){if(g1=null,c=De(c),c!==null){var f=s(c);if(f===null)c=null;else{var v=f.tag;if(v===13){if(c=o(f),c!==null)return c;c=null}else if(v===31){if(c=a(f),c!==null)return c;c=null}else if(v===3){if(f.stateNode.current.memoizedState.isDehydrated)return f.tag===3?f.stateNode.containerInfo:null;c=null}else f!==c&&(c=null)}}return g1=c,null}function hP(c){switch(c){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(de()){case Ne:return 2;case Oe:return 8;case Ae:case et:return 32;case Ze:return 268435456;default:return 32}default:return 32}}var IM=!1,Ch=null,Rh=null,Dh=null,gy=new Map,vy=new Map,Oh=[],IH="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function dP(c,f){switch(c){case"focusin":case"focusout":Ch=null;break;case"dragenter":case"dragleave":Rh=null;break;case"mouseover":case"mouseout":Dh=null;break;case"pointerover":case"pointerout":gy.delete(f.pointerId);break;case"gotpointercapture":case"lostpointercapture":vy.delete(f.pointerId)}}function yy(c,f,v,w,O,N){return c===null||c.nativeEvent!==N?(c={blockedOn:f,domEventName:v,eventSystemFlags:w,nativeEvent:N,targetContainers:[O]},f!==null&&(f=Ve(f),f!==null&&uP(f)),c):(c.eventSystemFlags|=w,f=c.targetContainers,O!==null&&f.indexOf(O)===-1&&f.push(O),c)}function NH(c,f,v,w,O){switch(f){case"focusin":return Ch=yy(Ch,c,f,v,w,O),!0;case"dragenter":return Rh=yy(Rh,c,f,v,w,O),!0;case"mouseover":return Dh=yy(Dh,c,f,v,w,O),!0;case"pointerover":var N=O.pointerId;return gy.set(N,yy(gy.get(N)||null,c,f,v,w,O)),!0;case"gotpointercapture":return N=O.pointerId,vy.set(N,yy(vy.get(N)||null,c,f,v,w,O)),!0}return!1}function pP(c){var f=De(c.target);if(f!==null){var v=s(f);if(v!==null){if(f=v.tag,f===13){if(f=o(v),f!==null){c.blockedOn=f,$i(c.priority,function(){fP(v)});return}}else if(f===31){if(f=a(v),f!==null){c.blockedOn=f,$i(c.priority,function(){fP(v)});return}}else if(f===3&&v.stateNode.current.memoizedState.isDehydrated){c.blockedOn=v.tag===3?v.stateNode.containerInfo:null;return}}}c.blockedOn=null}function v1(c){if(c.blockedOn!==null)return!1;for(var f=c.targetContainers;0<f.length;){var v=LM(c.nativeEvent);if(v===null){v=c.nativeEvent;var w=new v.constructor(v.type,v);La=w,v.target.dispatchEvent(w),La=null}else return f=Ve(v),f!==null&&uP(f),c.blockedOn=v,!1;f.shift()}return!0}function mP(c,f,v){v1(c)&&v.delete(f)}function UH(){IM=!1,Ch!==null&&v1(Ch)&&(Ch=null),Rh!==null&&v1(Rh)&&(Rh=null),Dh!==null&&v1(Dh)&&(Dh=null),gy.forEach(mP),vy.forEach(mP)}function y1(c,f){c.blockedOn===f&&(c.blockedOn=null,IM||(IM=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,UH)))}var b1=null;function gP(c){b1!==c&&(b1=c,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){b1===c&&(b1=null);for(var f=0;f<c.length;f+=3){var v=c[f],w=c[f+1],O=c[f+2];if(typeof w!="function"){if(PM(w||v)===null)continue;break}var N=Ve(v);N!==null&&(c.splice(f,3),f-=3,Xv(N,{pending:!0,data:O,method:v.method,action:w},w,O))}}))}function lg(c){function f(_e){return y1(_e,c)}Ch!==null&&y1(Ch,c),Rh!==null&&y1(Rh,c),Dh!==null&&y1(Dh,c),gy.forEach(f),vy.forEach(f);for(var v=0;v<Oh.length;v++){var w=Oh[v];w.blockedOn===c&&(w.blockedOn=null)}for(;0<Oh.length&&(v=Oh[0],v.blockedOn===null);)pP(v),v.blockedOn===null&&Oh.shift();if(v=(c.ownerDocument||c).$$reactFormReplay,v!=null)for(w=0;w<v.length;w+=3){var O=v[w],N=v[w+1],$=O[Hi]||null;if(typeof N=="function")$||gP(v);else if($){var se=null;if(N&&N.hasAttribute("formAction")){if(O=N,$=N[Hi]||null)se=$.formAction;else if(PM(O)!==null)continue}else se=$.action;typeof se=="function"?v[w+1]=se:(v.splice(w,3),w-=3),gP(v)}}}function vP(){function c(N){N.canIntercept&&N.info==="react-transition"&&N.intercept({handler:function(){return new Promise(function($){return O=$})},focusReset:"manual",scroll:"manual"})}function f(){O!==null&&(O(),O=null),w||setTimeout(v,20)}function v(){if(!w&&!navigation.transition){var N=navigation.currentEntry;N&&N.url!=null&&navigation.navigate(N.url,{state:N.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var w=!1,O=null;return navigation.addEventListener("navigate",c),navigation.addEventListener("navigatesuccess",f),navigation.addEventListener("navigateerror",f),setTimeout(v,100),function(){w=!0,navigation.removeEventListener("navigate",c),navigation.removeEventListener("navigatesuccess",f),navigation.removeEventListener("navigateerror",f),O!==null&&(O(),O=null)}}}function NM(c){this._internalRoot=c}_1.prototype.render=NM.prototype.render=function(c){var f=this._internalRoot;if(f===null)throw Error(i(409));var v=f.current,w=vo();lP(v,w,c,f,null,null)},_1.prototype.unmount=NM.prototype.unmount=function(){var c=this._internalRoot;if(c!==null){this._internalRoot=null;var f=c.containerInfo;lP(c.current,2,null,c,null,null),_a(),f[Ps]=null}};function _1(c){this._internalRoot=c}_1.prototype.unstable_scheduleHydration=function(c){if(c){var f=Gr();c={blockedOn:null,target:c,priority:f};for(var v=0;v<Oh.length&&f!==0&&f<Oh[v].priority;v++);Oh.splice(v,0,c),v===0&&pP(c)}};var yP=e.version;if(yP!=="19.2.4")throw Error(i(527,yP,"19.2.4"));G.findDOMNode=function(c){var f=c._reactInternals;if(f===void 0)throw typeof c.render=="function"?Error(i(188)):(c=Object.keys(c).join(","),Error(i(268,c)));return c=u(f),c=c!==null?h(c):null,c=c===null?null:c.stateNode,c};var kH={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:j,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var x1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!x1.isDisabled&&x1.supportsFiber)try{Xe=x1.inject(kH),Ke=x1}catch{}}return _y.createRoot=function(c,f){if(!r(c))throw Error(i(299));var v=!1,w="",O=Qx,N=Qv,$=Jv;return f!=null&&(f.unstable_strictMode===!0&&(v=!0),f.identifierPrefix!==void 0&&(w=f.identifierPrefix),f.onUncaughtError!==void 0&&(O=f.onUncaughtError),f.onCaughtError!==void 0&&(N=f.onCaughtError),f.onRecoverableError!==void 0&&($=f.onRecoverableError)),f=oP(c,1,!1,null,null,v,w,null,O,N,$,vP),c[Ps]=f.current,gM(c),new NM(f)},_y.hydrateRoot=function(c,f,v){if(!r(c))throw Error(i(299));var w=!1,O="",N=Qx,$=Qv,se=Jv,_e=null;return v!=null&&(v.unstable_strictMode===!0&&(w=!0),v.identifierPrefix!==void 0&&(O=v.identifierPrefix),v.onUncaughtError!==void 0&&(N=v.onUncaughtError),v.onCaughtError!==void 0&&($=v.onCaughtError),v.onRecoverableError!==void 0&&(se=v.onRecoverableError),v.formState!==void 0&&(_e=v.formState)),f=oP(c,1,!0,f,v??null,w,O,_e,N,$,se,vP),f.context=aP(null),v=f.current,w=vo(),w=_r(w),O=Il(w),O.callback=null,Oc(v,O,w),v=w,f.current.lanes=v,Xn(f,v),ht(f),c[Ps]=f.current,gM(c),new _1(f)},_y.version="19.2.4",_y}var CP;function qH(){if(CP)return zM.exports;CP=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),zM.exports=XH(),zM.exports}var C4=qH();const YH=Do(C4);if(typeof window<"u"){const n={get passive(){}};window.addEventListener("testPassive",null,n),window.removeEventListener("testPassive",null,n)}const cD=q.createContext({});function Xp(n){const e=q.useRef(null);return e.current===null&&(e.current=n()),e.current}const R4=typeof window<"u",uD=R4?q.useLayoutEffect:q.useEffect,XE=q.createContext(null);function fD(n,e){n.indexOf(e)===-1&&n.push(e)}function hD(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const pu=(n,e,t)=>t>e?e:t<n?n:t;let dD=()=>{};const If={},D4=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function O4(n){return typeof n=="object"&&n!==null}const L4=n=>/^0[^.\s]+$/u.test(n);function pD(n){let e;return()=>(e===void 0&&(e=n()),e)}const bl=n=>n,$H=(n,e)=>t=>e(n(t)),T_=(...n)=>n.reduce($H),Vb=(n,e,t)=>{const i=e-n;return i===0?1:(t-n)/i};class mD{constructor(){this.subscriptions=[]}add(e){return fD(this.subscriptions,e),()=>hD(this.subscriptions,e)}notify(e,t,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,t,i);else for(let s=0;s<r;s++){const o=this.subscriptions[s];o&&o(e,t,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Cf=n=>n*1e3,ml=n=>n/1e3;function P4(n,e){return e?n*(1e3/e):0}const I4=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,ZH=1e-7,KH=12;function QH(n,e,t,i,r){let s,o,a=0;do o=e+(t-e)/2,s=I4(o,i,r)-n,s>0?t=o:e=o;while(Math.abs(s)>ZH&&++a<KH);return o}function M_(n,e,t,i){if(n===e&&t===i)return bl;const r=s=>QH(s,0,1,n,t);return s=>s===0||s===1?s:I4(r(s),e,i)}const N4=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,U4=n=>e=>1-n(1-e),k4=M_(.33,1.53,.69,.99),gD=U4(k4),z4=N4(gD),F4=n=>(n*=2)<1?.5*gD(n):.5*(2-Math.pow(2,-10*(n-1))),vD=n=>1-Math.sin(Math.acos(n)),B4=U4(vD),V4=N4(vD),JH=M_(.42,0,1,1),e9=M_(0,0,.58,1),G4=M_(.42,0,.58,1),t9=n=>Array.isArray(n)&&typeof n[0]!="number",H4=n=>Array.isArray(n)&&typeof n[0]=="number",n9={linear:bl,easeIn:JH,easeInOut:G4,easeOut:e9,circIn:vD,circInOut:V4,circOut:B4,backIn:gD,backInOut:z4,backOut:k4,anticipate:F4},i9=n=>typeof n=="string",RP=n=>{if(H4(n)){dD(n.length===4);const[e,t,i,r]=n;return M_(e,t,i,r)}else if(i9(n))return n9[n];return n},S1=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function r9(n,e){let t=new Set,i=new Set,r=!1,s=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function l(h){o.has(h)&&(u.schedule(h),n()),h(a)}const u={schedule:(h,p=!1,m=!1)=>{const b=m&&r?t:i;return p&&o.add(h),b.has(h)||b.add(h),h},cancel:h=>{i.delete(h),o.delete(h)},process:h=>{if(a=h,r){s=!0;return}r=!0,[t,i]=[i,t],t.forEach(l),t.clear(),r=!1,s&&(s=!1,u.process(h))}};return u}const s9=40;function j4(n,e){let t=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},s=()=>t=!0,o=S1.reduce((A,M)=>(A[M]=r9(s),A),{}),{setup:a,read:l,resolveKeyframes:u,preUpdate:h,update:p,preRender:m,render:y,postRender:b}=o,x=()=>{const A=If.useManualTiming?r.timestamp:performance.now();t=!1,If.useManualTiming||(r.delta=i?1e3/60:Math.max(Math.min(A-r.timestamp,s9),1)),r.timestamp=A,r.isProcessing=!0,a.process(r),l.process(r),u.process(r),h.process(r),p.process(r),m.process(r),y.process(r),b.process(r),r.isProcessing=!1,t&&e&&(i=!1,n(x))},S=()=>{t=!0,i=!0,r.isProcessing||n(x)};return{schedule:S1.reduce((A,M)=>{const C=o[M];return A[M]=(R,L=!1,I=!1)=>(t||S(),C.schedule(R,L,I)),A},{}),cancel:A=>{for(let M=0;M<S1.length;M++)o[S1[M]].cancel(A)},state:r,steps:o}}const{schedule:Mi,cancel:Nf,state:As,steps:GM}=j4(typeof requestAnimationFrame<"u"?requestAnimationFrame:bl,!0);let $S;function o9(){$S=void 0}const To={now:()=>($S===void 0&&To.set(As.isProcessing||If.useManualTiming?As.timestamp:performance.now()),$S),set:n=>{$S=n,queueMicrotask(o9)}},W4=n=>e=>typeof e=="string"&&e.startsWith(n),X4=W4("--"),a9=W4("var(--"),yD=n=>a9(n)?l9.test(n.split("/*")[0].trim()):!1,l9=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function DP(n){return typeof n!="string"?!1:n.split("/*")[0].includes("var(--")}const N0={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Gb={...N0,transform:n=>pu(0,1,n)},w1={...N0,default:1},bb=n=>Math.round(n*1e5)/1e5,bD=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function c9(n){return n==null}const u9=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,_D=(n,e)=>t=>!!(typeof t=="string"&&u9.test(t)&&t.startsWith(n)||e&&!c9(t)&&Object.prototype.hasOwnProperty.call(t,e)),q4=(n,e,t)=>i=>{if(typeof i!="string")return i;const[r,s,o,a]=i.match(bD);return{[n]:parseFloat(r),[e]:parseFloat(s),[t]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},f9=n=>pu(0,255,n),HM={...N0,transform:n=>Math.round(f9(n))},Dp={test:_D("rgb","red"),parse:q4("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:i=1})=>"rgba("+HM.transform(n)+", "+HM.transform(e)+", "+HM.transform(t)+", "+bb(Gb.transform(i))+")"};function h9(n){let e="",t="",i="",r="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),i=n.substring(5,7),r=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),i=n.substring(3,4),r=n.substring(4,5),e+=e,t+=t,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const TR={test:_D("#"),parse:h9,transform:Dp.transform},A_=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),Wh=A_("deg"),lu=A_("%"),zt=A_("px"),d9=A_("vh"),p9=A_("vw"),OP={...lu,parse:n=>lu.parse(n)/100,transform:n=>lu.transform(n*100)},Yg={test:_D("hsl","hue"),parse:q4("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:i=1})=>"hsla("+Math.round(n)+", "+lu.transform(bb(e))+", "+lu.transform(bb(t))+", "+bb(Gb.transform(i))+")"},kr={test:n=>Dp.test(n)||TR.test(n)||Yg.test(n),parse:n=>Dp.test(n)?Dp.parse(n):Yg.test(n)?Yg.parse(n):TR.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?Dp.transform(n):Yg.transform(n),getAnimatableNone:n=>{const e=kr.parse(n);return e.alpha=0,kr.transform(e)}},m9=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function g9(n){return isNaN(n)&&typeof n=="string"&&(n.match(bD)?.length||0)+(n.match(m9)?.length||0)>0}const Y4="number",$4="color",v9="var",y9="var(",LP="${}",b9=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Hb(n){const e=n.toString(),t=[],i={color:[],number:[],var:[]},r=[];let s=0;const a=e.replace(b9,l=>(kr.test(l)?(i.color.push(s),r.push($4),t.push(kr.parse(l))):l.startsWith(y9)?(i.var.push(s),r.push(v9),t.push(l)):(i.number.push(s),r.push(Y4),t.push(parseFloat(l))),++s,LP)).split(LP);return{values:t,split:a,indexes:i,types:r}}function Z4(n){return Hb(n).values}function K4(n){const{split:e,types:t}=Hb(n),i=e.length;return r=>{let s="";for(let o=0;o<i;o++)if(s+=e[o],r[o]!==void 0){const a=t[o];a===Y4?s+=bb(r[o]):a===$4?s+=kr.transform(r[o]):s+=r[o]}return s}}const _9=n=>typeof n=="number"?0:kr.test(n)?kr.getAnimatableNone(n):n;function x9(n){const e=Z4(n);return K4(n)(e.map(_9))}const id={test:g9,parse:Z4,createTransformer:K4,getAnimatableNone:x9};function jM(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function S9({hue:n,saturation:e,lightness:t,alpha:i}){n/=360,e/=100,t/=100;let r=0,s=0,o=0;if(!e)r=s=o=t;else{const a=t<.5?t*(1+e):t+e-t*e,l=2*t-a;r=jM(l,a,n+1/3),s=jM(l,a,n),o=jM(l,a,n-1/3)}return{red:Math.round(r*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:i}}function mw(n,e){return t=>t>0?e:n}const sr=(n,e,t)=>n+(e-n)*t,WM=(n,e,t)=>{const i=n*n,r=t*(e*e-i)+i;return r<0?0:Math.sqrt(r)},w9=[TR,Dp,Yg],E9=n=>w9.find(e=>e.test(n));function PP(n){const e=E9(n);if(!e)return!1;let t=e.parse(n);return e===Yg&&(t=S9(t)),t}const IP=(n,e)=>{const t=PP(n),i=PP(e);if(!t||!i)return mw(n,e);const r={...t};return s=>(r.red=WM(t.red,i.red,s),r.green=WM(t.green,i.green,s),r.blue=WM(t.blue,i.blue,s),r.alpha=sr(t.alpha,i.alpha,s),Dp.transform(r))},MR=new Set(["none","hidden"]);function T9(n,e){return MR.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function M9(n,e){return t=>sr(n,e,t)}function xD(n){return typeof n=="number"?M9:typeof n=="string"?yD(n)?mw:kr.test(n)?IP:R9:Array.isArray(n)?Q4:typeof n=="object"?kr.test(n)?IP:A9:mw}function Q4(n,e){const t=[...n],i=t.length,r=n.map((s,o)=>xD(s)(s,e[o]));return s=>{for(let o=0;o<i;o++)t[o]=r[o](s);return t}}function A9(n,e){const t={...n,...e},i={};for(const r in t)n[r]!==void 0&&e[r]!==void 0&&(i[r]=xD(n[r])(n[r],e[r]));return r=>{for(const s in i)t[s]=i[s](r);return t}}function C9(n,e){const t=[],i={color:0,var:0,number:0};for(let r=0;r<e.values.length;r++){const s=e.types[r],o=n.indexes[s][i[s]],a=n.values[o]??0;t[r]=a,i[s]++}return t}const R9=(n,e)=>{const t=id.createTransformer(e),i=Hb(n),r=Hb(e);return i.indexes.var.length===r.indexes.var.length&&i.indexes.color.length===r.indexes.color.length&&i.indexes.number.length>=r.indexes.number.length?MR.has(n)&&!r.values.length||MR.has(e)&&!i.values.length?T9(n,e):T_(Q4(C9(i,r),r.values),t):mw(n,e)};function J4(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?sr(n,e,t):xD(n)(n,e)}const D9=n=>{const e=({timestamp:t})=>n(t);return{start:(t=!0)=>Mi.update(e,t),stop:()=>Nf(e),now:()=>As.isProcessing?As.timestamp:To.now()}},e5=(n,e,t=10)=>{let i="";const r=Math.max(Math.round(e/t),2);for(let s=0;s<r;s++)i+=Math.round(n(s/(r-1))*1e4)/1e4+", ";return`linear(${i.substring(0,i.length-2)})`},gw=2e4;function SD(n){let e=0;const t=50;let i=n.next(e);for(;!i.done&&e<gw;)e+=t,i=n.next(e);return e>=gw?1/0:e}function O9(n,e=100,t){const i=t({...n,keyframes:[0,e]}),r=Math.min(SD(i),gw);return{type:"keyframes",ease:s=>i.next(r*s).value/e,duration:ml(r)}}const L9=5;function t5(n,e,t){const i=Math.max(e-L9,0);return P4(t-n(i),e-i)}const vr={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},XM=.001;function P9({duration:n=vr.duration,bounce:e=vr.bounce,velocity:t=vr.velocity,mass:i=vr.mass}){let r,s,o=1-e;o=pu(vr.minDamping,vr.maxDamping,o),n=pu(vr.minDuration,vr.maxDuration,ml(n)),o<1?(r=u=>{const h=u*o,p=h*n,m=h-t,y=AR(u,o),b=Math.exp(-p);return XM-m/y*b},s=u=>{const p=u*o*n,m=p*t+t,y=Math.pow(o,2)*Math.pow(u,2)*n,b=Math.exp(-p),x=AR(Math.pow(u,2),o);return(-r(u)+XM>0?-1:1)*((m-y)*b)/x}):(r=u=>{const h=Math.exp(-u*n),p=(u-t)*n+1;return-XM+h*p},s=u=>{const h=Math.exp(-u*n),p=(t-u)*(n*n);return h*p});const a=5/n,l=N9(r,s,a);if(n=Cf(n),isNaN(l))return{stiffness:vr.stiffness,damping:vr.damping,duration:n};{const u=Math.pow(l,2)*i;return{stiffness:u,damping:o*2*Math.sqrt(i*u),duration:n}}}const I9=12;function N9(n,e,t){let i=t;for(let r=1;r<I9;r++)i=i-n(i)/e(i);return i}function AR(n,e){return n*Math.sqrt(1-e*e)}const U9=["duration","bounce"],k9=["stiffness","damping","mass"];function NP(n,e){return e.some(t=>n[t]!==void 0)}function z9(n){let e={velocity:vr.velocity,stiffness:vr.stiffness,damping:vr.damping,mass:vr.mass,isResolvedFromDuration:!1,...n};if(!NP(n,k9)&&NP(n,U9))if(n.visualDuration){const t=n.visualDuration,i=2*Math.PI/(t*1.2),r=i*i,s=2*pu(.05,1,1-(n.bounce||0))*Math.sqrt(r);e={...e,mass:vr.mass,stiffness:r,damping:s}}else{const t=P9(n);e={...e,...t,mass:vr.mass},e.isResolvedFromDuration=!0}return e}function vw(n=vr.visualDuration,e=vr.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:i,restDelta:r}=t;const s=t.keyframes[0],o=t.keyframes[t.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:u,mass:h,duration:p,velocity:m,isResolvedFromDuration:y}=z9({...t,velocity:-ml(t.velocity||0)}),b=m||0,x=u/(2*Math.sqrt(l*h)),S=o-s,_=ml(Math.sqrt(l/h)),T=Math.abs(S)<5;i||(i=T?vr.restSpeed.granular:vr.restSpeed.default),r||(r=T?vr.restDelta.granular:vr.restDelta.default);let A;if(x<1){const C=AR(_,x);A=R=>{const L=Math.exp(-x*_*R);return o-L*((b+x*_*S)/C*Math.sin(C*R)+S*Math.cos(C*R))}}else if(x===1)A=C=>o-Math.exp(-_*C)*(S+(b+_*S)*C);else{const C=_*Math.sqrt(x*x-1);A=R=>{const L=Math.exp(-x*_*R),I=Math.min(C*R,300);return o-L*((b+x*_*S)*Math.sinh(I)+C*S*Math.cosh(I))/C}}const M={calculatedDuration:y&&p||null,next:C=>{const R=A(C);if(y)a.done=C>=p;else{let L=C===0?b:0;x<1&&(L=C===0?Cf(b):t5(A,C,R));const I=Math.abs(L)<=i,P=Math.abs(o-R)<=r;a.done=I&&P}return a.value=a.done?o:R,a},toString:()=>{const C=Math.min(SD(M),gw),R=e5(L=>M.next(C*L).value,C,30);return C+"ms "+R},toTransition:()=>{}};return M}vw.applyToOptions=n=>{const e=O9(n,100,vw);return n.ease=e.ease,n.duration=Cf(e.duration),n.type="keyframes",n};function CR({keyframes:n,velocity:e=0,power:t=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:u=.5,restSpeed:h}){const p=n[0],m={done:!1,value:p},y=I=>a!==void 0&&I<a||l!==void 0&&I>l,b=I=>a===void 0?l:l===void 0||Math.abs(a-I)<Math.abs(l-I)?a:l;let x=t*e;const S=p+x,_=o===void 0?S:o(S);_!==S&&(x=_-p);const T=I=>-x*Math.exp(-I/i),A=I=>_+T(I),M=I=>{const P=T(I),U=A(I);m.done=Math.abs(P)<=u,m.value=m.done?_:U};let C,R;const L=I=>{y(m.value)&&(C=I,R=vw({keyframes:[m.value,b(m.value)],velocity:t5(A,I,m.value),damping:r,stiffness:s,restDelta:u,restSpeed:h}))};return L(0),{calculatedDuration:null,next:I=>{let P=!1;return!R&&C===void 0&&(P=!0,M(I),L(I)),C!==void 0&&I>=C?R.next(I-C):(!P&&M(I),m)}}}function F9(n,e,t){const i=[],r=t||If.mix||J4,s=n.length-1;for(let o=0;o<s;o++){let a=r(n[o],n[o+1]);if(e){const l=Array.isArray(e)?e[o]||bl:e;a=T_(l,a)}i.push(a)}return i}function n5(n,e,{clamp:t=!0,ease:i,mixer:r}={}){const s=n.length;if(dD(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=n[0]===n[1];n[0]>n[s-1]&&(n=[...n].reverse(),e=[...e].reverse());const a=F9(e,i,r),l=a.length,u=h=>{if(o&&h<n[0])return e[0];let p=0;if(l>1)for(;p<n.length-2&&!(h<n[p+1]);p++);const m=Vb(n[p],n[p+1],h);return a[p](m)};return t?h=>u(pu(n[0],n[s-1],h)):u}function B9(n,e){const t=n[n.length-1];for(let i=1;i<=e;i++){const r=Vb(0,e,i);n.push(sr(t,1,r))}}function V9(n){const e=[0];return B9(e,n.length-1),e}function G9(n,e){return n.map(t=>t*e)}function H9(n,e){return n.map(()=>e||G4).splice(0,n.length-1)}function _b({duration:n=300,keyframes:e,times:t,ease:i="easeInOut"}){const r=t9(i)?i.map(RP):RP(i),s={done:!1,value:e[0]},o=G9(t&&t.length===e.length?t:V9(e),n),a=n5(o,e,{ease:Array.isArray(r)?r:H9(e,r)});return{calculatedDuration:n,next:l=>(s.value=a(l),s.done=l>=n,s)}}const j9=n=>n!==null;function wD(n,{repeat:e,repeatType:t="loop"},i,r=1){const s=n.filter(j9),a=r<0||e&&t!=="loop"&&e%2===1?0:s.length-1;return!a||i===void 0?s[a]:i}const W9={decay:CR,inertia:CR,tween:_b,keyframes:_b,spring:vw};function i5(n){typeof n.type=="string"&&(n.type=W9[n.type])}class ED{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const X9=n=>n/100;class TD extends ED{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:t}=this.options;t&&t.updatedAt!==To.now()&&this.tick(To.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;i5(e);const{type:t=_b,repeat:i=0,repeatDelay:r=0,repeatType:s,velocity:o=0}=e;let{keyframes:a}=e;const l=t||_b;l!==_b&&typeof a[0]!="number"&&(this.mixKeyframes=T_(X9,J4(a[0],a[1])),a=[0,100]);const u=l({...e,keyframes:a});s==="mirror"&&(this.mirroredGenerator=l({...e,keyframes:[...a].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=SD(u));const{calculatedDuration:h}=u;this.calculatedDuration=h,this.resolvedDuration=h+r,this.totalDuration=this.resolvedDuration*(i+1)-r,this.generator=u}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:i,totalDuration:r,mixKeyframes:s,mirroredGenerator:o,resolvedDuration:a,calculatedDuration:l}=this;if(this.startTime===null)return i.next(0);const{delay:u=0,keyframes:h,repeat:p,repeatType:m,repeatDelay:y,type:b,onUpdate:x,finalKeyframe:S}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-r/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const _=this.currentTime-u*(this.playbackSpeed>=0?1:-1),T=this.playbackSpeed>=0?_<0:_>r;this.currentTime=Math.max(_,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=r);let A=this.currentTime,M=i;if(p){const I=Math.min(this.currentTime,r)/a;let P=Math.floor(I),U=I%1;!U&&I>=1&&(U=1),U===1&&P--,P=Math.min(P,p+1),P%2&&(m==="reverse"?(U=1-U,y&&(U-=y/a)):m==="mirror"&&(M=o)),A=pu(0,1,U)*a}const C=T?{done:!1,value:h[0]}:M.next(A);s&&(C.value=s(C.value));let{done:R}=C;!T&&l!==null&&(R=this.playbackSpeed>=0?this.currentTime>=r:this.currentTime<=0);const L=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&R);return L&&b!==CR&&(C.value=wD(h,this.options,S,this.speed)),x&&x(C.value),L&&this.finish(),C}then(e,t){return this.finished.then(e,t)}get duration(){return ml(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+ml(e)}get time(){return ml(this.currentTime)}set time(e){e=Cf(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(To.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=ml(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=D9,startTime:t}=this.options;this.driver||(this.driver=e(r=>this.tick(r))),this.options.onPlay?.();const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=t??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(To.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function q9(n){for(let e=1;e<n.length;e++)n[e]??(n[e]=n[e-1])}const Op=n=>n*180/Math.PI,RR=n=>{const e=Op(Math.atan2(n[1],n[0]));return DR(e)},Y9={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:RR,rotateZ:RR,skewX:n=>Op(Math.atan(n[1])),skewY:n=>Op(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},DR=n=>(n=n%360,n<0&&(n+=360),n),UP=RR,kP=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),zP=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),$9={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:kP,scaleY:zP,scale:n=>(kP(n)+zP(n))/2,rotateX:n=>DR(Op(Math.atan2(n[6],n[5]))),rotateY:n=>DR(Op(Math.atan2(-n[2],n[0]))),rotateZ:UP,rotate:UP,skewX:n=>Op(Math.atan(n[4])),skewY:n=>Op(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function OR(n){return n.includes("scale")?1:0}function LR(n,e){if(!n||n==="none")return OR(e);const t=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,r;if(t)i=$9,r=t;else{const a=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=Y9,r=a}if(!r)return OR(e);const s=i[e],o=r[1].split(",").map(K9);return typeof s=="function"?s(o):o[s]}const Z9=(n,e)=>{const{transform:t="none"}=getComputedStyle(n);return LR(t,e)};function K9(n){return parseFloat(n.trim())}const U0=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],k0=new Set(U0),FP=n=>n===N0||n===zt,Q9=new Set(["x","y","z"]),J9=U0.filter(n=>!Q9.has(n));function e7(n){const e=[];return J9.forEach(t=>{const i=n.getValue(t);i!==void 0&&(e.push([t,i.get()]),i.set(t.startsWith("scale")?1:0))}),e}const Kh={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:(n,{transform:e})=>LR(e,"x"),y:(n,{transform:e})=>LR(e,"y")};Kh.translateX=Kh.x;Kh.translateY=Kh.y;const kp=new Set;let PR=!1,IR=!1,NR=!1;function r5(){if(IR){const n=Array.from(kp).filter(i=>i.needsMeasurement),e=new Set(n.map(i=>i.element)),t=new Map;e.forEach(i=>{const r=e7(i);r.length&&(t.set(i,r),i.render())}),n.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const r=t.get(i);r&&r.forEach(([s,o])=>{i.getValue(s)?.set(o)})}),n.forEach(i=>i.measureEndState()),n.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}IR=!1,PR=!1,kp.forEach(n=>n.complete(NR)),kp.clear()}function s5(){kp.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(IR=!0)})}function t7(){NR=!0,s5(),r5(),NR=!1}class MD{constructor(e,t,i,r,s,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=i,this.motionValue=r,this.element=s,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(kp.add(this),PR||(PR=!0,Mi.read(s5),Mi.resolveKeyframes(r5))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:i,motionValue:r}=this;if(e[0]===null){const s=r?.get(),o=e[e.length-1];if(s!==void 0)e[0]=s;else if(i&&t){const a=i.readValue(t,o);a!=null&&(e[0]=a)}e[0]===void 0&&(e[0]=o),r&&s===void 0&&r.set(e[0])}q9(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),kp.delete(this)}cancel(){this.state==="scheduled"&&(kp.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const n7=n=>n.startsWith("--");function i7(n,e,t){n7(e)?n.style.setProperty(e,t):n.style[e]=t}const r7=pD(()=>window.ScrollTimeline!==void 0),s7={};function o7(n,e){const t=pD(n);return()=>s7[e]??t()}const o5=o7(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),lb=([n,e,t,i])=>`cubic-bezier(${n}, ${e}, ${t}, ${i})`,BP={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:lb([0,.65,.55,1]),circOut:lb([.55,0,1,.45]),backIn:lb([.31,.01,.66,-.59]),backOut:lb([.33,1.53,.69,.99])};function a5(n,e){if(n)return typeof n=="function"?o5()?e5(n,e):"ease-out":H4(n)?lb(n):Array.isArray(n)?n.map(t=>a5(t,e)||BP.easeOut):BP[n]}function a7(n,e,t,{delay:i=0,duration:r=300,repeat:s=0,repeatType:o="loop",ease:a="easeOut",times:l}={},u=void 0){const h={[e]:t};l&&(h.offset=l);const p=a5(a,r);Array.isArray(p)&&(h.easing=p);const m={delay:i,duration:r,easing:Array.isArray(p)?"linear":p,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"};return u&&(m.pseudoElement=u),n.animate(h,m)}function l5(n){return typeof n=="function"&&"applyToOptions"in n}function l7({type:n,...e}){return l5(n)&&o5()?n.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class c7 extends ED{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!e)return;const{element:t,name:i,keyframes:r,pseudoElement:s,allowFlatten:o=!1,finalKeyframe:a,onComplete:l}=e;this.isPseudoElement=!!s,this.allowFlatten=o,this.options=e,dD(typeof e.type!="string");const u=l7(e);this.animation=a7(t,i,r,u,s),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const h=wD(r,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(h):i7(t,i,h),this.animation.cancel()}l?.(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){const e=this.options?.element;!this.isPseudoElement&&e?.isConnected&&this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return ml(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+ml(e)}get time(){return ml(Number(this.animation.currentTime)||0)}set time(e){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=Cf(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(e){this.manualStartTime=this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&r7()?(this.animation.timeline=e,bl):t(this)}}const c5={anticipate:F4,backInOut:z4,circInOut:V4};function u7(n){return n in c5}function f7(n){typeof n.ease=="string"&&u7(n.ease)&&(n.ease=c5[n.ease])}const qM=10;class h7 extends c7{constructor(e){f7(e),i5(e),super(e),e.startTime!==void 0&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:i,onComplete:r,element:s,...o}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const a=new TD({...o,autoplay:!1}),l=Math.max(qM,To.now()-this.startTime),u=pu(0,qM,l-qM);t.setWithVelocity(a.sample(Math.max(0,l-u)).value,a.sample(l).value,u),a.stop()}}const VP=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(id.test(n)||n==="0")&&!n.startsWith("url("));function d7(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function p7(n,e,t,i){const r=n[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const s=n[n.length-1],o=VP(r,e),a=VP(s,e);return!o||!a?!1:d7(n)||(t==="spring"||l5(t))&&i}function UR(n){n.duration=0,n.type="keyframes"}const m7=new Set(["opacity","clipPath","filter","transform"]),g7=pD(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function v7(n){const{motionValue:e,name:t,repeatDelay:i,repeatType:r,damping:s,type:o}=n;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:u}=e.owner.getProps();return g7()&&t&&m7.has(t)&&(t!=="transform"||!u)&&!l&&!i&&r!=="mirror"&&s!==0&&o!=="inertia"}const y7=40;class b7 extends ED{constructor({autoplay:e=!0,delay:t=0,type:i="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:o="loop",keyframes:a,name:l,motionValue:u,element:h,...p}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=To.now();const m={autoplay:e,delay:t,type:i,repeat:r,repeatDelay:s,repeatType:o,name:l,motionValue:u,element:h,...p},y=h?.KeyframeResolver||MD;this.keyframeResolver=new y(a,(b,x,S)=>this.onKeyframesResolved(b,x,m,!S),l,u,h),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,t,i,r){this.keyframeResolver=void 0;const{name:s,type:o,velocity:a,delay:l,isHandoff:u,onUpdate:h}=i;this.resolvedAt=To.now(),p7(e,s,o,a)||((If.instantAnimations||!l)&&h?.(wD(e,i,t)),e[0]=e[e.length-1],UR(i),i.repeat=0);const m={startTime:r?this.resolvedAt?this.resolvedAt-this.createdAt>y7?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...i,keyframes:e},y=!u&&v7(m),b=m.motionValue?.owner?.current,x=y?new h7({...m,element:b}):new TD(m);x.finished.then(()=>{this.notifyFinished()}).catch(bl),this.pendingTimeline&&(this.stopTimeline=x.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=x}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),t7()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}function u5(n,e,t,i=0,r=1){const s=Array.from(n).sort((u,h)=>u.sortNodePosition(h)).indexOf(e),o=n.size,a=(o-1)*i;return typeof t=="function"?t(s,o):r===1?s*i:a-s*i}const _7=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function x7(n){const e=_7.exec(n);if(!e)return[,];const[,t,i,r]=e;return[`--${t??i}`,r]}function f5(n,e,t=1){const[i,r]=x7(n);if(!i)return;const s=window.getComputedStyle(e).getPropertyValue(i);if(s){const o=s.trim();return D4(o)?parseFloat(o):o}return yD(r)?f5(r,e,t+1):r}const S7={type:"spring",stiffness:500,damping:25,restSpeed:10},w7=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),E7={type:"keyframes",duration:.8},T7={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},M7=(n,{keyframes:e})=>e.length>2?E7:k0.has(n)?n.startsWith("scale")?w7(e[1]):S7:T7,A7=n=>n!==null;function C7(n,{repeat:e,repeatType:t="loop"},i){const r=n.filter(A7),s=e&&t!=="loop"&&e%2===1?0:r.length-1;return r[s]}function AD(n,e){return n?.[e]??n?.default??n}function R7({when:n,delay:e,delayChildren:t,staggerChildren:i,staggerDirection:r,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:u,...h}){return!!Object.keys(h).length}const CD=(n,e,t,i={},r,s)=>o=>{const a=AD(i,n)||{},l=a.delay||i.delay||0;let{elapsed:u=0}=i;u=u-Cf(l);const h={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-u,onUpdate:m=>{e.set(m),a.onUpdate&&a.onUpdate(m)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:n,motionValue:e,element:s?void 0:r};R7(a)||Object.assign(h,M7(n,h)),h.duration&&(h.duration=Cf(h.duration)),h.repeatDelay&&(h.repeatDelay=Cf(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let p=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(UR(h),h.delay===0&&(p=!0)),(If.instantAnimations||If.skipAnimations||r?.shouldSkipAnimations)&&(p=!0,UR(h),h.delay=0),h.allowFlatten=!a.type&&!a.ease,p&&!s&&e.get()!==void 0){const m=C7(h.keyframes,a);if(m!==void 0){Mi.update(()=>{h.onUpdate(m),h.onComplete()});return}}return a.isSync?new TD(h):new b7(h)};function GP(n){const e=[{},{}];return n?.values.forEach((t,i)=>{e[0][i]=t.get(),e[1][i]=t.getVelocity()}),e}function RD(n,e,t,i){if(typeof e=="function"){const[r,s]=GP(i);e=e(t!==void 0?t:n.custom,r,s)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[r,s]=GP(i);e=e(t!==void 0?t:n.custom,r,s)}return e}function r0(n,e,t){const i=n.getProps();return RD(i,e,t!==void 0?t:i.custom,n)}const h5=new Set(["width","height","top","left","right","bottom",...U0]),HP=30,D7=n=>!isNaN(parseFloat(n)),xb={current:void 0};class O7{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=i=>{const r=To.now();if(this.updatedAt!==r&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const s of this.dependents)s.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=To.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=D7(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new mD);const i=this.events[e].add(t);return e==="change"?()=>{i(),Mi.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,i){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return xb.current&&xb.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=To.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>HP)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,HP);return P4(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function qp(n,e){return new O7(n,e)}const kR=n=>Array.isArray(n);function L7(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,qp(t))}function P7(n){return kR(n)?n[n.length-1]||0:n}function I7(n,e){const t=r0(n,e);let{transitionEnd:i={},transition:r={},...s}=t||{};s={...s,...i};for(const o in s){const a=P7(s[o]);L7(n,o,a)}}const Qs=n=>!!(n&&n.getVelocity);function N7(n){return!!(Qs(n)&&n.add)}function zR(n,e){const t=n.getValue("willChange");if(N7(t))return t.add(e);if(!t&&If.WillChange){const i=new If.WillChange("auto");n.addValue("willChange",i),i.add(e)}}function DD(n){return n.replace(/([A-Z])/g,e=>`-${e.toLowerCase()}`)}const U7="framerAppearId",d5="data-"+DD(U7);function p5(n){return n.props[d5]}function k7({protectedKeys:n,needsAnimating:e},t){const i=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,i}function m5(n,e,{delay:t=0,transitionOverride:i,type:r}={}){let{transition:s=n.getDefaultTransition(),transitionEnd:o,...a}=e;const l=s?.reduceMotion;i&&(s=i);const u=[],h=r&&n.animationState&&n.animationState.getState()[r];for(const p in a){const m=n.getValue(p,n.latestValues[p]??null),y=a[p];if(y===void 0||h&&k7(h,p))continue;const b={delay:t,...AD(s||{},p)},x=m.get();if(x!==void 0&&!m.isAnimating&&!Array.isArray(y)&&y===x&&!b.velocity)continue;let S=!1;if(window.MotionHandoffAnimation){const A=p5(n);if(A){const M=window.MotionHandoffAnimation(A,p,Mi);M!==null&&(b.startTime=M,S=!0)}}zR(n,p);const _=l??n.shouldReduceMotion;m.start(CD(p,m,y,_&&h5.has(p)?{type:!1}:b,n,S));const T=m.animation;T&&u.push(T)}return o&&Promise.all(u).then(()=>{Mi.update(()=>{o&&I7(n,o)})}),u}function FR(n,e,t={}){const i=r0(n,e,t.type==="exit"?n.presenceContext?.custom:void 0);let{transition:r=n.getDefaultTransition()||{}}=i||{};t.transitionOverride&&(r=t.transitionOverride);const s=i?()=>Promise.all(m5(n,i,t)):()=>Promise.resolve(),o=n.variantChildren&&n.variantChildren.size?(l=0)=>{const{delayChildren:u=0,staggerChildren:h,staggerDirection:p}=r;return z7(n,e,l,u,h,p,t)}:()=>Promise.resolve(),{when:a}=r;if(a){const[l,u]=a==="beforeChildren"?[s,o]:[o,s];return l().then(()=>u())}else return Promise.all([s(),o(t.delay)])}function z7(n,e,t=0,i=0,r=0,s=1,o){const a=[];for(const l of n.variantChildren)l.notify("AnimationStart",e),a.push(FR(l,e,{...o,delay:t+(typeof i=="function"?0:i)+u5(n.variantChildren,l,i,r,s)}).then(()=>l.notify("AnimationComplete",e)));return Promise.all(a)}function F7(n,e,t={}){n.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(s=>FR(n,s,t));i=Promise.all(r)}else if(typeof e=="string")i=FR(n,e,t);else{const r=typeof e=="function"?r0(n,e,t.custom):e;i=Promise.all(m5(n,r,t))}return i.then(()=>{n.notify("AnimationComplete",e)})}const B7={test:n=>n==="auto",parse:n=>n},g5=n=>e=>e.test(n),v5=[N0,zt,lu,Wh,p9,d9,B7],jP=n=>v5.find(g5(n));function V7(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||L4(n):!0}const G7=new Set(["brightness","contrast","saturate","opacity"]);function H7(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[i]=t.match(bD)||[];if(!i)return n;const r=t.replace(i,"");let s=G7.has(e)?1:0;return i!==t&&(s*=100),e+"("+s+r+")"}const j7=/\b([a-z-]*)\(.*?\)/gu,BR={...id,getAnimatableNone:n=>{const e=n.match(j7);return e?e.map(H7).join(" "):n}},WP={...N0,transform:Math.round},W7={rotate:Wh,rotateX:Wh,rotateY:Wh,rotateZ:Wh,scale:w1,scaleX:w1,scaleY:w1,scaleZ:w1,skew:Wh,skewX:Wh,skewY:Wh,distance:zt,translateX:zt,translateY:zt,translateZ:zt,x:zt,y:zt,z:zt,perspective:zt,transformPerspective:zt,opacity:Gb,originX:OP,originY:OP,originZ:zt},OD={borderWidth:zt,borderTopWidth:zt,borderRightWidth:zt,borderBottomWidth:zt,borderLeftWidth:zt,borderRadius:zt,borderTopLeftRadius:zt,borderTopRightRadius:zt,borderBottomRightRadius:zt,borderBottomLeftRadius:zt,width:zt,maxWidth:zt,height:zt,maxHeight:zt,top:zt,right:zt,bottom:zt,left:zt,inset:zt,insetBlock:zt,insetBlockStart:zt,insetBlockEnd:zt,insetInline:zt,insetInlineStart:zt,insetInlineEnd:zt,padding:zt,paddingTop:zt,paddingRight:zt,paddingBottom:zt,paddingLeft:zt,paddingBlock:zt,paddingBlockStart:zt,paddingBlockEnd:zt,paddingInline:zt,paddingInlineStart:zt,paddingInlineEnd:zt,margin:zt,marginTop:zt,marginRight:zt,marginBottom:zt,marginLeft:zt,marginBlock:zt,marginBlockStart:zt,marginBlockEnd:zt,marginInline:zt,marginInlineStart:zt,marginInlineEnd:zt,fontSize:zt,backgroundPositionX:zt,backgroundPositionY:zt,...W7,zIndex:WP,fillOpacity:Gb,strokeOpacity:Gb,numOctaves:WP},X7={...OD,color:kr,backgroundColor:kr,outlineColor:kr,fill:kr,stroke:kr,borderColor:kr,borderTopColor:kr,borderRightColor:kr,borderBottomColor:kr,borderLeftColor:kr,filter:BR,WebkitFilter:BR},y5=n=>X7[n];function b5(n,e){let t=y5(n);return t!==BR&&(t=id),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const q7=new Set(["auto","none","0"]);function Y7(n,e,t){let i=0,r;for(;i<n.length&&!r;){const s=n[i];typeof s=="string"&&!q7.has(s)&&Hb(s).values.length&&(r=n[i]),i++}if(r&&t)for(const s of e)n[s]=b5(t,r)}class $7 extends MD{constructor(e,t,i,r,s){super(e,t,i,r,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:i}=this;if(!t||!t.current)return;super.readKeyframes();for(let h=0;h<e.length;h++){let p=e[h];if(typeof p=="string"&&(p=p.trim(),yD(p))){const m=f5(p,t.current);m!==void 0&&(e[h]=m),h===e.length-1&&(this.finalKeyframe=p)}}if(this.resolveNoneKeyframes(),!h5.has(i)||e.length!==2)return;const[r,s]=e,o=jP(r),a=jP(s),l=DP(r),u=DP(s);if(l!==u&&Kh[i]){this.needsMeasurement=!0;return}if(o!==a)if(FP(o)&&FP(a))for(let h=0;h<e.length;h++){const p=e[h];typeof p=="string"&&(e[h]=parseFloat(p))}else Kh[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,i=[];for(let r=0;r<e.length;r++)(e[r]===null||V7(e[r]))&&i.push(r);i.length&&Y7(e,i,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Kh[i](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const r=t[t.length-1];r!==void 0&&e.getValue(i,r).jump(r,!1)}measureEndState(){const{element:e,name:t,unresolvedKeyframes:i}=this;if(!e||!e.current)return;const r=e.getValue(t);r&&r.jump(this.measuredOrigin,!1);const s=i.length-1,o=i[s];i[s]=Kh[t](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),this.removedTransforms?.length&&this.removedTransforms.forEach(([a,l])=>{e.getValue(a).set(l)}),this.resolveNoneKeyframes()}}function Z7(n,e,t){if(n==null)return[];if(n instanceof EventTarget)return[n];if(typeof n=="string"){let i=document;const r=t?.[n]??i.querySelectorAll(n);return r?Array.from(r):[]}return Array.from(n).filter(i=>i!=null)}const _5=(n,e)=>e&&typeof n=="number"?e.transform(n):n;function VR(n){return O4(n)&&"offsetHeight"in n}const{schedule:LD}=j4(queueMicrotask,!1),Jl={x:!1,y:!1};function x5(){return Jl.x||Jl.y}function K7(n){return n==="x"||n==="y"?Jl[n]?null:(Jl[n]=!0,()=>{Jl[n]=!1}):Jl.x||Jl.y?null:(Jl.x=Jl.y=!0,()=>{Jl.x=Jl.y=!1})}function S5(n,e){const t=Z7(n),i=new AbortController,r={passive:!0,...e,signal:i.signal};return[t,r,()=>i.abort()]}function XP(n){return!(n.pointerType==="touch"||x5())}function Q7(n,e,t={}){const[i,r,s]=S5(n,t),o=a=>{if(!XP(a))return;const{target:l}=a,u=e(l,a);if(typeof u!="function"||!l)return;const h=p=>{XP(p)&&(u(p),l.removeEventListener("pointerleave",h))};l.addEventListener("pointerleave",h,r)};return i.forEach(a=>{a.addEventListener("pointerenter",o,r)}),s}const w5=(n,e)=>e?n===e?!0:w5(n,e.parentElement):!1,PD=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,J7=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function ej(n){return J7.has(n.tagName)||n.isContentEditable===!0}const tj=new Set(["INPUT","SELECT","TEXTAREA"]);function nj(n){return tj.has(n.tagName)||n.isContentEditable===!0}const ZS=new WeakSet;function qP(n){return e=>{e.key==="Enter"&&n(e)}}function YM(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const ij=(n,e)=>{const t=n.currentTarget;if(!t)return;const i=qP(()=>{if(ZS.has(t))return;YM(t,"down");const r=qP(()=>{YM(t,"up")}),s=()=>YM(t,"cancel");t.addEventListener("keyup",r,e),t.addEventListener("blur",s,e)});t.addEventListener("keydown",i,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",i),e)};function YP(n){return PD(n)&&!x5()}function rj(n,e,t={}){const[i,r,s]=S5(n,t),o=a=>{const l=a.currentTarget;if(!YP(a))return;ZS.add(l);const u=e(l,a),h=(y,b)=>{window.removeEventListener("pointerup",p),window.removeEventListener("pointercancel",m),ZS.has(l)&&ZS.delete(l),YP(y)&&typeof u=="function"&&u(y,{success:b})},p=y=>{h(y,l===window||l===document||t.useGlobalTarget||w5(l,y.target))},m=y=>{h(y,!1)};window.addEventListener("pointerup",p,r),window.addEventListener("pointercancel",m,r)};return i.forEach(a=>{(t.useGlobalTarget?window:a).addEventListener("pointerdown",o,r),VR(a)&&(a.addEventListener("focus",u=>ij(u,r)),!ej(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),s}function E5(n){return O4(n)&&"ownerSVGElement"in n}function sj(n){return E5(n)&&n.tagName==="svg"}function oj(...n){const e=!Array.isArray(n[0]),t=e?0:-1,i=n[0+t],r=n[1+t],s=n[2+t],o=n[3+t],a=n5(r,s,o);return e?a(i):a}const aj=[...v5,kr,id],lj=n=>aj.find(g5(n)),$P=()=>({translate:0,scale:1,origin:0,originPoint:0}),$g=()=>({x:$P(),y:$P()}),ZP=()=>({min:0,max:0}),Kr=()=>({x:ZP(),y:ZP()}),GR={current:null},T5={current:!1},cj=typeof window<"u";function uj(){if(T5.current=!0,!!cj)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>GR.current=n.matches;n.addEventListener("change",e),e()}else GR.current=!1}const fj=new WeakMap;function qE(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function jb(n){return typeof n=="string"||Array.isArray(n)}const ID=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],ND=["initial",...ID];function YE(n){return qE(n.animate)||ND.some(e=>jb(n[e]))}function M5(n){return!!(YE(n)||n.variants)}function hj(n,e,t){for(const i in e){const r=e[i],s=t[i];if(Qs(r))n.addValue(i,r);else if(Qs(s))n.addValue(i,qp(r,{owner:n}));else if(s!==r)if(n.hasValue(i)){const o=n.getValue(i);o.liveStyle===!0?o.jump(r):o.hasAnimated||o.set(r)}else{const o=n.getStaticValue(i);n.addValue(i,qp(o!==void 0?o:r,{owner:n}))}}for(const i in t)e[i]===void 0&&n.removeValue(i);return e}const KP=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let yw={};function A5(n){yw=n}function dj(){return yw}class pj{scrapeMotionValuesFromProps(e,t,i){return{}}constructor({parent:e,props:t,presenceContext:i,reducedMotionConfig:r,skipAnimations:s,blockInitialAnimation:o,visualState:a},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.shouldSkipAnimations=!1,this.values=new Map,this.KeyframeResolver=MD,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const y=To.now();this.renderScheduledAt<y&&(this.renderScheduledAt=y,Mi.render(this.render,!1,!0))};const{latestValues:u,renderState:h}=a;this.latestValues=u,this.baseTarget={...u},this.initialValues=t.initial?{...u}:{},this.renderState=h,this.parent=e,this.props=t,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.skipAnimationsConfig=s,this.options=l,this.blockInitialAnimation=!!o,this.isControllingVariants=YE(t),this.isVariantNode=M5(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:p,...m}=this.scrapeMotionValuesFromProps(t,{},this);for(const y in m){const b=m[y];u[y]!==void 0&&Qs(b)&&b.set(u[y])}}mount(e){this.current=e,fj.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,i)=>this.bindToMotionValue(i,t)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(T5.current||uj(),this.shouldReduceMotion=GR.current),this.shouldSkipAnimations=this.skipAnimationsConfig??!1,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Nf(this.notifyUpdate),Nf(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=k0.has(e);i&&this.onBindTransform&&this.onBindTransform();const r=t.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Mi.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;typeof window<"u"&&window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{r(),s&&s(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in yw){const t=yw[e];if(!t)continue;const{isEnabled:i,Feature:r}=t;if(!this.features[e]&&r&&i(this.props)&&(this.features[e]=new r(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Kr()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let i=0;i<KP.length;i++){const r=KP[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const s="on"+r,o=e[s];o&&(this.propEventSubscriptions[r]=this.on(r,o))}this.prevMotionValues=hj(this,this.scrapeMotionValuesFromProps(e,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const i=this.values.get(e);t!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&t!==void 0&&(i=qp(t===null?void 0:t,{owner:this}),this.addValue(e,i)),i}readValue(e,t){let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(D4(i)||L4(i))?i=parseFloat(i):!lj(i)&&id.test(t)&&(i=b5(e,t)),this.setBaseTarget(e,Qs(i)?i.get():i)),Qs(i)?i.get():i}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){const{initial:t}=this.props;let i;if(typeof t=="string"||typeof t=="object"){const s=RD(this.props,t,this.presenceContext?.custom);s&&(i=s[e])}if(t&&i!==void 0)return i;const r=this.getBaseTargetFromProps(this.props,e);return r!==void 0&&!Qs(r)?r:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new mD),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){LD.render(this.render)}}class C5 extends pj{constructor(){super(...arguments),this.KeyframeResolver=$7}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){const i=e.style;return i?i[t]:void 0}removeValueFromRenderState(e,{vars:t,style:i}){delete t[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Qs(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}class fd{constructor(e){this.isMounted=!1,this.node=e}update(){}}function R5({top:n,left:e,right:t,bottom:i}){return{x:{min:e,max:t},y:{min:n,max:i}}}function mj({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function gj(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),i=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:i.y,right:i.x}}function $M(n){return n===void 0||n===1}function HR({scale:n,scaleX:e,scaleY:t}){return!$M(n)||!$M(e)||!$M(t)}function xp(n){return HR(n)||D5(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function D5(n){return QP(n.x)||QP(n.y)}function QP(n){return n&&n!=="0%"}function bw(n,e,t){const i=n-t,r=e*i;return t+r}function JP(n,e,t,i,r){return r!==void 0&&(n=bw(n,r,i)),bw(n,t,i)+e}function jR(n,e=0,t=1,i,r){n.min=JP(n.min,e,t,i,r),n.max=JP(n.max,e,t,i,r)}function O5(n,{x:e,y:t}){jR(n.x,e.translate,e.scale,e.originPoint),jR(n.y,t.translate,t.scale,t.originPoint)}const eI=.999999999999,tI=1.0000000000001;function vj(n,e,t,i=!1){const r=t.length;if(!r)return;e.x=e.y=1;let s,o;for(let a=0;a<r;a++){s=t[a],o=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(i&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Kg(n,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,O5(n,o)),i&&xp(s.latestValues)&&Kg(n,s.latestValues))}e.x<tI&&e.x>eI&&(e.x=1),e.y<tI&&e.y>eI&&(e.y=1)}function Zg(n,e){n.min=n.min+e,n.max=n.max+e}function nI(n,e,t,i,r=.5){const s=sr(n.min,n.max,r);jR(n,e,t,s,i)}function Kg(n,e){nI(n.x,e.x,e.scaleX,e.scale,e.originX),nI(n.y,e.y,e.scaleY,e.scale,e.originY)}function L5(n,e){return R5(gj(n.getBoundingClientRect(),e))}function yj(n,e,t){const i=L5(n,t),{scroll:r}=e;return r&&(Zg(i.x,r.offset.x),Zg(i.y,r.offset.y)),i}const bj={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},_j=U0.length;function xj(n,e,t){let i="",r=!0;for(let s=0;s<_j;s++){const o=U0[s],a=n[o];if(a===void 0)continue;let l=!0;if(typeof a=="number")l=a===(o.startsWith("scale")?1:0);else{const u=parseFloat(a);l=o.startsWith("scale")?u===1:u===0}if(!l||t){const u=_5(a,OD[o]);if(!l){r=!1;const h=bj[o]||o;i+=`${h}(${u}) `}t&&(e[o]=u)}}return i=i.trim(),t?i=t(e,r?"":i):r&&(i="none"),i}function UD(n,e,t){const{style:i,vars:r,transformOrigin:s}=n;let o=!1,a=!1;for(const l in e){const u=e[l];if(k0.has(l)){o=!0;continue}else if(X4(l)){r[l]=u;continue}else{const h=_5(u,OD[l]);l.startsWith("origin")?(a=!0,s[l]=h):i[l]=h}}if(e.transform||(o||t?i.transform=xj(e,n.transform,t):i.transform&&(i.transform="none")),a){const{originX:l="50%",originY:u="50%",originZ:h=0}=s;i.transformOrigin=`${l} ${u} ${h}`}}function P5(n,{style:e,vars:t},i,r){const s=n.style;let o;for(o in e)s[o]=e[o];r?.applyProjectionStyles(s,i);for(o in t)s.setProperty(o,t[o])}function iI(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const xy={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(zt.test(n))n=parseFloat(n);else return n;const t=iI(n,e.target.x),i=iI(n,e.target.y);return`${t}% ${i}%`}},Sj={correct:(n,{treeScale:e,projectionDelta:t})=>{const i=n,r=id.parse(n);if(r.length>5)return i;const s=id.createTransformer(n),o=typeof r[0]!="number"?1:0,a=t.x.scale*e.x,l=t.y.scale*e.y;r[0+o]/=a,r[1+o]/=l;const u=sr(a,l,.5);return typeof r[2+o]=="number"&&(r[2+o]/=u),typeof r[3+o]=="number"&&(r[3+o]/=u),s(r)}},WR={borderRadius:{...xy,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:xy,borderTopRightRadius:xy,borderBottomLeftRadius:xy,borderBottomRightRadius:xy,boxShadow:Sj};function I5(n,{layout:e,layoutId:t}){return k0.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!WR[n]||n==="opacity")}function kD(n,e,t){const i=n.style,r=e?.style,s={};if(!i)return s;for(const o in i)(Qs(i[o])||r&&Qs(r[o])||I5(o,n)||t?.getValue(o)?.liveStyle!==void 0)&&(s[o]=i[o]);return s}function wj(n){return window.getComputedStyle(n)}class Ej extends C5{constructor(){super(...arguments),this.type="html",this.renderInstance=P5}readValueFromInstance(e,t){if(k0.has(t))return this.projection?.isProjecting?OR(t):Z9(e,t);{const i=wj(e),r=(X4(t)?i.getPropertyValue(t):i[t])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:t}){return L5(e,t)}build(e,t,i){UD(e,t,i.transformTemplate)}scrapeMotionValuesFromProps(e,t,i){return kD(e,t,i)}}const Tj={offset:"stroke-dashoffset",array:"stroke-dasharray"},Mj={offset:"strokeDashoffset",array:"strokeDasharray"};function Aj(n,e,t=1,i=0,r=!0){n.pathLength=1;const s=r?Tj:Mj;n[s.offset]=`${-i}`,n[s.array]=`${e} ${t}`}const Cj=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function N5(n,{attrX:e,attrY:t,attrScale:i,pathLength:r,pathSpacing:s=1,pathOffset:o=0,...a},l,u,h){if(UD(n,a,u),l){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:p,style:m}=n;p.transform&&(m.transform=p.transform,delete p.transform),(m.transform||p.transformOrigin)&&(m.transformOrigin=p.transformOrigin??"50% 50%",delete p.transformOrigin),m.transform&&(m.transformBox=h?.transformBox??"fill-box",delete p.transformBox);for(const y of Cj)p[y]!==void 0&&(m[y]=p[y],delete p[y]);e!==void 0&&(p.x=e),t!==void 0&&(p.y=t),i!==void 0&&(p.scale=i),r!==void 0&&Aj(p,r,s,o,!1)}const U5=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),k5=n=>typeof n=="string"&&n.toLowerCase()==="svg";function Rj(n,e,t,i){P5(n,e,void 0,i);for(const r in e.attrs)n.setAttribute(U5.has(r)?r:DD(r),e.attrs[r])}function z5(n,e,t){const i=kD(n,e,t);for(const r in n)if(Qs(n[r])||Qs(e[r])){const s=U0.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;i[s]=n[r]}return i}class Dj extends C5{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Kr}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(k0.has(t)){const i=y5(t);return i&&i.default||0}return t=U5.has(t)?t:DD(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,i){return z5(e,t,i)}build(e,t,i){N5(e,t,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(e,t,i,r){Rj(e,t,i,r)}mount(e){this.isSVGTag=k5(e.tagName),super.mount(e)}}const Oj=ND.length;function F5(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?F5(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<Oj;t++){const i=ND[t],r=n.props[i];(jb(r)||r===!1)&&(e[i]=r)}return e}function B5(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let i=0;i<t;i++)if(e[i]!==n[i])return!1;return!0}const Lj=[...ID].reverse(),Pj=ID.length;function Ij(n){return e=>Promise.all(e.map(({animation:t,options:i})=>F7(n,t,i)))}function Nj(n){let e=Ij(n),t=rI(),i=!0;const r=l=>(u,h)=>{const p=r0(n,h,l==="exit"?n.presenceContext?.custom:void 0);if(p){const{transition:m,transitionEnd:y,...b}=p;u={...u,...b,...y}}return u};function s(l){e=l(n)}function o(l){const{props:u}=n,h=F5(n.parent)||{},p=[],m=new Set;let y={},b=1/0;for(let S=0;S<Pj;S++){const _=Lj[S],T=t[_],A=u[_]!==void 0?u[_]:h[_],M=jb(A),C=_===l?T.isActive:null;C===!1&&(b=S);let R=A===h[_]&&A!==u[_]&&M;if(R&&i&&n.manuallyAnimateOnMount&&(R=!1),T.protectedKeys={...y},!T.isActive&&C===null||!A&&!T.prevProp||qE(A)||typeof A=="boolean")continue;const L=Uj(T.prevProp,A);let I=L||_===l&&T.isActive&&!R&&M||S>b&&M,P=!1;const U=Array.isArray(A)?A:[A];let B=U.reduce(r(_),{});C===!1&&(B={});const{prevResolvedValues:F={}}=T,z={...F,...B},W=G=>{I=!0,m.has(G)&&(P=!0,m.delete(G)),T.needsAnimating[G]=!0;const K=n.getValue(G);K&&(K.liveStyle=!1)};for(const G in z){const K=B[G],J=F[G];if(y.hasOwnProperty(G))continue;let ee=!1;kR(K)&&kR(J)?ee=!B5(K,J):ee=K!==J,ee?K!=null?W(G):m.add(G):K!==void 0&&m.has(G)?W(G):T.protectedKeys[G]=!0}T.prevProp=A,T.prevResolvedValues=B,T.isActive&&(y={...y,...B}),i&&n.blockInitialAnimation&&(I=!1);const X=R&&L;I&&(!X||P)&&p.push(...U.map(G=>{const K={type:_};if(typeof G=="string"&&i&&!X&&n.manuallyAnimateOnMount&&n.parent){const{parent:J}=n,ee=r0(J,G);if(J.enteringChildren&&ee){const{delayChildren:V}=ee.transition||{};K.delay=u5(J.enteringChildren,n,V)}}return{animation:G,options:K}}))}if(m.size){const S={};if(typeof u.initial!="boolean"){const _=r0(n,Array.isArray(u.initial)?u.initial[0]:u.initial);_&&_.transition&&(S.transition=_.transition)}m.forEach(_=>{const T=n.getBaseTarget(_),A=n.getValue(_);A&&(A.liveStyle=!0),S[_]=T??null}),p.push({animation:S})}let x=!!p.length;return i&&(u.initial===!1||u.initial===u.animate)&&!n.manuallyAnimateOnMount&&(x=!1),i=!1,x?e(p):Promise.resolve()}function a(l,u){if(t[l].isActive===u)return Promise.resolve();n.variantChildren?.forEach(p=>p.animationState?.setActive(l,u)),t[l].isActive=u;const h=o(l);for(const p in t)t[p].protectedKeys={};return h}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>t,reset:()=>{t=rI()}}}function Uj(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!B5(e,n):!1}function tp(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function rI(){return{animate:tp(!0),whileInView:tp(),whileHover:tp(),whileTap:tp(),whileDrag:tp(),whileFocus:tp(),exit:tp()}}function sI(n,e){n.min=e.min,n.max=e.max}function jl(n,e){sI(n.x,e.x),sI(n.y,e.y)}function oI(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}const V5=1e-4,kj=1-V5,zj=1+V5,G5=.01,Fj=0-G5,Bj=0+G5;function Mo(n){return n.max-n.min}function Vj(n,e,t){return Math.abs(n-e)<=t}function aI(n,e,t,i=.5){n.origin=i,n.originPoint=sr(e.min,e.max,n.origin),n.scale=Mo(t)/Mo(e),n.translate=sr(t.min,t.max,n.origin)-n.originPoint,(n.scale>=kj&&n.scale<=zj||isNaN(n.scale))&&(n.scale=1),(n.translate>=Fj&&n.translate<=Bj||isNaN(n.translate))&&(n.translate=0)}function Sb(n,e,t,i){aI(n.x,e.x,t.x,i?i.originX:void 0),aI(n.y,e.y,t.y,i?i.originY:void 0)}function lI(n,e,t){n.min=t.min+e.min,n.max=n.min+Mo(e)}function Gj(n,e,t){lI(n.x,e.x,t.x),lI(n.y,e.y,t.y)}function cI(n,e,t){n.min=e.min-t.min,n.max=n.min+Mo(e)}function _w(n,e,t){cI(n.x,e.x,t.x),cI(n.y,e.y,t.y)}function uI(n,e,t,i,r){return n-=e,n=bw(n,1/t,i),r!==void 0&&(n=bw(n,1/r,i)),n}function Hj(n,e=0,t=1,i=.5,r,s=n,o=n){if(lu.test(e)&&(e=parseFloat(e),e=sr(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=sr(s.min,s.max,i);n===s&&(a-=e),n.min=uI(n.min,e,t,a,r),n.max=uI(n.max,e,t,a,r)}function fI(n,e,[t,i,r],s,o){Hj(n,e[t],e[i],e[r],e.scale,s,o)}const jj=["x","scaleX","originX"],Wj=["y","scaleY","originY"];function hI(n,e,t,i){fI(n.x,e,jj,t?t.x:void 0,i?i.x:void 0),fI(n.y,e,Wj,t?t.y:void 0,i?i.y:void 0)}function dI(n){return n.translate===0&&n.scale===1}function H5(n){return dI(n.x)&&dI(n.y)}function pI(n,e){return n.min===e.min&&n.max===e.max}function Xj(n,e){return pI(n.x,e.x)&&pI(n.y,e.y)}function mI(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function j5(n,e){return mI(n.x,e.x)&&mI(n.y,e.y)}function gI(n){return Mo(n.x)/Mo(n.y)}function vI(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}function cl(n){return[n("x"),n("y")]}function qj(n,e,t){let i="";const r=n.x.translate/e.x,s=n.y.translate/e.y,o=t?.z||0;if((r||s||o)&&(i=`translate3d(${r}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:u,rotate:h,rotateX:p,rotateY:m,skewX:y,skewY:b}=t;u&&(i=`perspective(${u}px) ${i}`),h&&(i+=`rotate(${h}deg) `),p&&(i+=`rotateX(${p}deg) `),m&&(i+=`rotateY(${m}deg) `),y&&(i+=`skewX(${y}deg) `),b&&(i+=`skewY(${b}deg) `)}const a=n.x.scale*e.x,l=n.y.scale*e.y;return(a!==1||l!==1)&&(i+=`scale(${a}, ${l})`),i||"none"}const W5=["TopLeft","TopRight","BottomLeft","BottomRight"],Yj=W5.length,yI=n=>typeof n=="string"?parseFloat(n):n,bI=n=>typeof n=="number"||zt.test(n);function $j(n,e,t,i,r,s){r?(n.opacity=sr(0,t.opacity??1,Zj(i)),n.opacityExit=sr(e.opacity??1,0,Kj(i))):s&&(n.opacity=sr(e.opacity??1,t.opacity??1,i));for(let o=0;o<Yj;o++){const a=`border${W5[o]}Radius`;let l=_I(e,a),u=_I(t,a);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||bI(l)===bI(u)?(n[a]=Math.max(sr(yI(l),yI(u),i),0),(lu.test(u)||lu.test(l))&&(n[a]+="%")):n[a]=u}(e.rotate||t.rotate)&&(n.rotate=sr(e.rotate||0,t.rotate||0,i))}function _I(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const Zj=X5(0,.5,B4),Kj=X5(.5,.95,bl);function X5(n,e,t){return i=>i<n?0:i>e?1:t(Vb(n,e,i))}function Qj(n,e,t){const i=Qs(n)?n:qp(n);return i.start(CD("",i,e,t)),i.animation}function Wb(n,e,t,i={passive:!0}){return n.addEventListener(e,t,i),()=>n.removeEventListener(e,t)}const Jj=(n,e)=>n.depth-e.depth;class eW{constructor(){this.children=[],this.isDirty=!1}add(e){fD(this.children,e),this.isDirty=!0}remove(e){hD(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Jj),this.isDirty=!1,this.children.forEach(e)}}function tW(n,e){const t=To.now(),i=({timestamp:r})=>{const s=r-t;s>=e&&(Nf(i),n(s-e))};return Mi.setup(i,!0),()=>Nf(i)}function KS(n){return Qs(n)?n.get():n}class nW{constructor(){this.members=[]}add(e){fD(this.members,e),e.scheduleRender()}remove(e){if(hD(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(r=>e===r);if(t===0)return!1;let i;for(let r=t;r>=0;r--){const s=this.members[r];if(s.isPresent!==!1){i=s;break}}return i?(this.promote(i),!0):!1}promote(e,t){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender();const r=i.options.layoutDependency,s=e.options.layoutDependency;r!==void 0&&s!==void 0&&r===s||(e.resumeFrom=i,t&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0));const{crossfade:a}=e.options;a===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:i}=e;t.onExitComplete&&t.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const QS={hasAnimatedSinceResize:!0,hasEverUpdated:!1},ZM=["","X","Y","Z"],iW=1e3;let rW=0;function KM(n,e,t,i){const{latestValues:r}=e;r[n]&&(t[n]=r[n],e.setStaticValue(n,0),i&&(i[n]=0))}function q5(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=p5(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:r,layoutId:s}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",Mi,!(r||s))}const{parent:i}=n;i&&!i.hasCheckedOptimisedAppear&&q5(i)}function Y5({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(o={},a=e?.()){this.id=rW++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(aW),this.nodes.forEach(fW),this.nodes.forEach(hW),this.nodes.forEach(lW)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new eW)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new mD),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=E5(o)&&!sj(o),this.instance=o;const{layoutId:a,layout:l,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||a)&&(this.isLayoutDirty=!0),n){let h,p=0;const m=()=>this.root.updateBlockedByResize=!1;Mi.read(()=>{p=window.innerWidth}),n(o,()=>{const y=window.innerWidth;y!==p&&(p=y,this.root.updateBlockedByResize=!0,h&&h(),h=tW(m,250),QS.hasAnimatedSinceResize&&(QS.hasAnimatedSinceResize=!1,this.nodes.forEach(wI)))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&u&&(a||l)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:p,hasRelativeLayoutChanged:m,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const b=this.options.transition||u.getDefaultTransition()||vW,{onLayoutAnimationStart:x,onLayoutAnimationComplete:S}=u.getProps(),_=!this.targetLayout||!j5(this.targetLayout,y),T=!p&&m;if(this.options.layoutRoot||this.resumeFrom||T||p&&(_||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const A={...AD(b,"layout"),onPlay:x,onComplete:S};(u.shouldReduceMotion||this.options.layoutRoot)&&(A.delay=0,A.type=!1),this.startAnimation(A),this.setAnimationOrigin(h,T)}else p||wI(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Nf(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(dW),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&q5(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const p=this.path[h];p.shouldResetTransform=!0,p.updateScroll("snapshot"),p.options.layoutRoot&&p.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(xI);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(SI);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(uW),this.nodes.forEach(sW),this.nodes.forEach(oW)):this.nodes.forEach(SI),this.clearAllSnapshots();const a=To.now();As.delta=pu(0,1e3/60,a-As.timestamp),As.timestamp=a,As.isProcessing=!0,GM.update.process(As),GM.preRender.process(As),GM.render.process(As),As.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,LD.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(cW),this.sharedNodes.forEach(pW)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Mi.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Mi.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Mo(this.snapshot.measuredBox.x)&&!Mo(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=Kr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&this.instance){const l=i(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!r)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!H5(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,h=u!==this.prevTransformTemplateValue;o&&this.instance&&(a||xp(this.latestValues)||h)&&(r(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),yW(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return Kr();const a=o.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(bW))){const{scroll:u}=this.root;u&&(Zg(a.x,u.offset.x),Zg(a.y,u.offset.y))}return a}removeElementScroll(o){const a=Kr();if(jl(a,o),this.scroll?.wasRoot)return a;for(let l=0;l<this.path.length;l++){const u=this.path[l],{scroll:h,options:p}=u;u!==this.root&&h&&p.layoutScroll&&(h.wasRoot&&jl(a,o),Zg(a.x,h.offset.x),Zg(a.y,h.offset.y))}return a}applyTransform(o,a=!1){const l=Kr();jl(l,o);for(let u=0;u<this.path.length;u++){const h=this.path[u];!a&&h.options.layoutScroll&&h.scroll&&h!==h.root&&Kg(l,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),xp(h.latestValues)&&Kg(l,h.latestValues)}return xp(this.latestValues)&&Kg(l,this.latestValues),l}removeTransform(o){const a=Kr();jl(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!xp(u.latestValues))continue;HR(u.latestValues)&&u.updateSnapshot();const h=Kr(),p=u.measurePageBox();jl(h,p),hI(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,h)}return xp(this.latestValues)&&hI(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==As.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==a;if(!(o||l&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:p}=this.options;if(!this.layout||!(h||p))return;this.resolvedRelativeTargetAt=As.timestamp;const m=this.getClosestProjectingParent();m&&this.linkedParentVersion!==m.layoutVersion&&!m.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(m&&m.layout?this.createRelativeTarget(m,this.layout.layoutBox,m.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Kr(),this.targetWithTransforms=Kr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Gj(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):jl(this.target,this.layout.layoutBox),O5(this.target,this.targetDelta)):jl(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?this.createRelativeTarget(m,this.target,m.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||HR(this.parent.latestValues)||D5(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(o,a,l){this.relativeParent=o,this.linkedParentVersion=o.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Kr(),this.relativeTargetOrigin=Kr(),_w(this.relativeTargetOrigin,a,l),jl(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){const o=this.getLead(),a=!!this.resumingFrom||this!==o;let l=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(l=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===As.timestamp&&(l=!1),l)return;const{layout:u,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||h))return;jl(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,m=this.treeScale.y;vj(this.layoutCorrected,this.treeScale,this.path,a),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Kr());const{target:y}=o;if(!y){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(oI(this.prevProjectionDelta.x,this.projectionDelta.x),oI(this.prevProjectionDelta.y,this.projectionDelta.y)),Sb(this.projectionDelta,this.layoutCorrected,y,this.latestValues),(this.treeScale.x!==p||this.treeScale.y!==m||!vI(this.projectionDelta.x,this.prevProjectionDelta.x)||!vI(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.visualElement?.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=$g(),this.projectionDelta=$g(),this.projectionDeltaWithTransform=$g()}setAnimationOrigin(o,a=!1){const l=this.snapshot,u=l?l.latestValues:{},h={...this.latestValues},p=$g();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const m=Kr(),y=l?l.source:void 0,b=this.layout?this.layout.source:void 0,x=y!==b,S=this.getStack(),_=!S||S.members.length<=1,T=!!(x&&!_&&this.options.crossfade===!0&&!this.path.some(gW));this.animationProgress=0;let A;this.mixTargetDelta=M=>{const C=M/1e3;EI(p.x,o.x,C),EI(p.y,o.y,C),this.setTargetDelta(p),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(_w(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),mW(this.relativeTarget,this.relativeTargetOrigin,m,C),A&&Xj(this.relativeTarget,A)&&(this.isProjectionDirty=!1),A||(A=Kr()),jl(A,this.relativeTarget)),x&&(this.animationValues=h,$j(h,u,this.latestValues,C,T,_)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=C},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Nf(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Mi.update(()=>{QS.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=qp(0)),this.currentAnimation=Qj(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(iW),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:u,latestValues:h}=o;if(!(!a||!l||!u)){if(this!==o&&this.layout&&u&&$5(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||Kr();const p=Mo(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+p;const m=Mo(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+m}jl(a,l),Kg(a,h),Sb(this.projectionDeltaWithTransform,this.layoutCorrected,a,h)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new nW),this.sharedNodes.get(o).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){const{layoutId:o}=this.options;return o?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:o}=this.options;return o?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const u={};l.z&&KM("z",o,u,this.animationValues);for(let h=0;h<ZM.length;h++)KM(`rotate${ZM[h]}`,o,u,this.animationValues),KM(`skew${ZM[h]}`,o,u,this.animationValues);o.render();for(const h in u)o.setStaticValue(h,u[h]),this.animationValues&&(this.animationValues[h]=u[h]);o.scheduleRender()}applyProjectionStyles(o,a){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=KS(a?.pointerEvents)||"",o.transform=l?l(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=KS(a?.pointerEvents)||""),this.hasProjected&&!xp(this.latestValues)&&(o.transform=l?l({},""):"none",this.hasProjected=!1);return}o.visibility="";const h=u.animationValues||u.latestValues;this.applyTransformsToTarget();let p=qj(this.projectionDeltaWithTransform,this.treeScale,h);l&&(p=l(h,p)),o.transform=p;const{x:m,y}=this.projectionDelta;o.transformOrigin=`${m.origin*100}% ${y.origin*100}% 0`,u.animationValues?o.opacity=u===this?h.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:o.opacity=u===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const b in WR){if(h[b]===void 0)continue;const{correct:x,applyTo:S,isCSSVariable:_}=WR[b],T=p==="none"?h[b]:x(h[b],u);if(S){const A=S.length;for(let M=0;M<A;M++)o[S[M]]=T}else _?this.options.visualElement.renderState.vars[b]=T:o[b]=T}this.options.layoutId&&(o.pointerEvents=u===this?KS(a?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>o.currentAnimation?.stop()),this.root.nodes.forEach(xI),this.root.sharedNodes.clear()}}}function sW(n){n.updateLayout()}function oW(n){const e=n.resumeFrom?.snapshot||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:i}=n.layout,{animationType:r}=n.options,s=e.source!==n.layout.source;r==="size"?cl(h=>{const p=s?e.measuredBox[h]:e.layoutBox[h],m=Mo(p);p.min=t[h].min,p.max=p.min+m}):$5(r,e.layoutBox,t)&&cl(h=>{const p=s?e.measuredBox[h]:e.layoutBox[h],m=Mo(t[h]);p.max=p.min+m,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[h].max=n.relativeTarget[h].min+m)});const o=$g();Sb(o,t,e.layoutBox);const a=$g();s?Sb(a,n.applyTransform(i,!0),e.measuredBox):Sb(a,t,e.layoutBox);const l=!H5(o);let u=!1;if(!n.resumeFrom){const h=n.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:p,layout:m}=h;if(p&&m){const y=Kr();_w(y,e.layoutBox,p.layoutBox);const b=Kr();_w(b,t,m.layoutBox),j5(y,b)||(u=!0),h.options.layoutRoot&&(n.relativeTarget=b,n.relativeTargetOrigin=y,n.relativeParent=h)}}}n.notifyListeners("didUpdate",{layout:t,snapshot:e,delta:a,layoutDelta:o,hasLayoutChanged:l,hasRelativeLayoutChanged:u})}else if(n.isLead()){const{onExitComplete:t}=n.options;t&&t()}n.options.transition=void 0}function aW(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function lW(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function cW(n){n.clearSnapshot()}function xI(n){n.clearMeasurements()}function SI(n){n.isLayoutDirty=!1}function uW(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function wI(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function fW(n){n.resolveTargetDelta()}function hW(n){n.calcProjection()}function dW(n){n.resetSkewAndRotation()}function pW(n){n.removeLeadSnapshot()}function EI(n,e,t){n.translate=sr(e.translate,0,t),n.scale=sr(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function TI(n,e,t,i){n.min=sr(e.min,t.min,i),n.max=sr(e.max,t.max,i)}function mW(n,e,t,i){TI(n.x,e.x,t.x,i),TI(n.y,e.y,t.y,i)}function gW(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const vW={duration:.45,ease:[.4,0,.1,1]},MI=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),AI=MI("applewebkit/")&&!MI("chrome/")?Math.round:bl;function CI(n){n.min=AI(n.min),n.max=AI(n.max)}function yW(n){CI(n.x),CI(n.y)}function $5(n,e,t){return n==="position"||n==="preserve-aspect"&&!Vj(gI(e),gI(t),.2)}function bW(n){return n!==n.root&&n.scroll?.wasRoot}const _W=Y5({attachResizeListener:(n,e)=>Wb(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body?.scrollLeft||0,y:document.documentElement.scrollTop||document.body?.scrollTop||0}),checkIsScrollRoot:()=>!0}),QM={current:void 0},Z5=Y5({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!QM.current){const n=new _W({});n.mount(window),n.setOptions({layoutScroll:!0}),QM.current=n}return QM.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),$E=q.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function RI(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function xW(...n){return e=>{let t=!1;const i=n.map(r=>{const s=RI(r,e);return!t&&typeof s=="function"&&(t=!0),s});if(t)return()=>{for(let r=0;r<i.length;r++){const s=i[r];typeof s=="function"?s():RI(n[r],null)}}}}function SW(...n){return q.useCallback(xW(...n),n)}class wW extends q.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const i=t.offsetParent,r=VR(i)&&i.offsetWidth||0,s=VR(i)&&i.offsetHeight||0,o=this.props.sizeRef.current;o.height=t.offsetHeight||0,o.width=t.offsetWidth||0,o.top=t.offsetTop,o.left=t.offsetLeft,o.right=r-o.width-o.left,o.bottom=s-o.height-o.top}return null}componentDidUpdate(){}render(){return this.props.children}}function EW({children:n,isPresent:e,anchorX:t,anchorY:i,root:r}){const s=q.useId(),o=q.useRef(null),a=q.useRef({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:l}=q.useContext($E),u=n.props?.ref??n?.ref,h=SW(o,u);return q.useInsertionEffect(()=>{const{width:p,height:m,top:y,left:b,right:x,bottom:S}=a.current;if(e||!o.current||!p||!m)return;const _=t==="left"?`left: ${b}`:`right: ${x}`,T=i==="bottom"?`bottom: ${S}`:`top: ${y}`;o.current.dataset.motionPopId=s;const A=document.createElement("style");l&&(A.nonce=l);const M=r??document.head;return M.appendChild(A),A.sheet&&A.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${p}px !important;
            height: ${m}px !important;
            ${_}px !important;
            ${T}px !important;
          }
        `),()=>{M.contains(A)&&M.removeChild(A)}},[e]),ue.jsx(wW,{isPresent:e,childRef:o,sizeRef:a,children:q.cloneElement(n,{ref:h})})}const TW=({children:n,initial:e,isPresent:t,onExitComplete:i,custom:r,presenceAffectsLayout:s,mode:o,anchorX:a,anchorY:l,root:u})=>{const h=Xp(MW),p=q.useId();let m=!0,y=q.useMemo(()=>(m=!1,{id:p,initial:e,isPresent:t,custom:r,onExitComplete:b=>{h.set(b,!0);for(const x of h.values())if(!x)return;i&&i()},register:b=>(h.set(b,!1),()=>h.delete(b))}),[t,h,i]);return s&&m&&(y={...y}),q.useMemo(()=>{h.forEach((b,x)=>h.set(x,!1))},[t]),q.useEffect(()=>{!t&&!h.size&&i&&i()},[t]),o==="popLayout"&&(n=ue.jsx(EW,{isPresent:t,anchorX:a,anchorY:l,root:u,children:n})),ue.jsx(XE.Provider,{value:y,children:n})};function MW(){return new Map}function K5(n=!0){const e=q.useContext(XE);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:i,register:r}=e,s=q.useId();q.useEffect(()=>{if(n)return r(s)},[n]);const o=q.useCallback(()=>n&&i&&i(s),[s,i,n]);return!t&&i?[!1,o]:[!0]}const E1=n=>n.key||"";function DI(n){const e=[];return q.Children.forEach(n,t=>{q.isValidElement(t)&&e.push(t)}),e}const AW=({children:n,custom:e,initial:t=!0,onExitComplete:i,presenceAffectsLayout:r=!0,mode:s="sync",propagate:o=!1,anchorX:a="left",anchorY:l="top",root:u})=>{const[h,p]=K5(o),m=q.useMemo(()=>DI(n),[n]),y=o&&!h?[]:m.map(E1),b=q.useRef(!0),x=q.useRef(m),S=Xp(()=>new Map),_=q.useRef(new Set),[T,A]=q.useState(m),[M,C]=q.useState(m);uD(()=>{b.current=!1,x.current=m;for(let I=0;I<M.length;I++){const P=E1(M[I]);y.includes(P)?(S.delete(P),_.current.delete(P)):S.get(P)!==!0&&S.set(P,!1)}},[M,y.length,y.join("-")]);const R=[];if(m!==T){let I=[...m];for(let P=0;P<M.length;P++){const U=M[P],B=E1(U);y.includes(B)||(I.splice(P,0,U),R.push(U))}return s==="wait"&&R.length&&(I=R),C(DI(I)),A(m),null}const{forceRender:L}=q.useContext(cD);return ue.jsx(ue.Fragment,{children:M.map(I=>{const P=E1(I),U=o&&!h?!1:m===M||y.includes(P),B=()=>{if(_.current.has(P))return;if(_.current.add(P),S.has(P))S.set(P,!0);else return;let F=!0;S.forEach(z=>{z||(F=!1)}),F&&(L?.(),C(x.current),o&&p?.(),i&&i())};return ue.jsx(TW,{isPresent:U,initial:!b.current||t?void 0:!1,custom:e,presenceAffectsLayout:r,mode:s,root:u,onExitComplete:U?void 0:B,anchorX:a,anchorY:l,children:I},P)})})},Q5=q.createContext({strict:!1}),OI={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let LI=!1;function CW(){if(LI)return;const n={};for(const e in OI)n[e]={isEnabled:t=>OI[e].some(i=>!!t[i])};A5(n),LI=!0}function J5(){return CW(),dj()}function RW(n){const e=J5();for(const t in n)e[t]={...e[t],...n[t]};A5(e)}const DW=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function xw(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||DW.has(n)}let eF=n=>!xw(n);function OW(n){typeof n=="function"&&(eF=e=>e.startsWith("on")?!xw(e):n(e))}try{OW(require("@emotion/is-prop-valid").default)}catch{}function LW(n,e,t){const i={};for(const r in n)r==="values"&&typeof n.values=="object"||(eF(r)||t===!0&&xw(r)||!e&&!xw(r)||n.draggable&&r.startsWith("onDrag"))&&(i[r]=n[r]);return i}const ZE=q.createContext({});function PW(n,e){if(YE(n)){const{initial:t,animate:i}=n;return{initial:t===!1||jb(t)?t:void 0,animate:jb(i)?i:void 0}}return n.inherit!==!1?e:{}}function IW(n){const{initial:e,animate:t}=PW(n,q.useContext(ZE));return q.useMemo(()=>({initial:e,animate:t}),[PI(e),PI(t)])}function PI(n){return Array.isArray(n)?n.join(" "):n}const zD=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function tF(n,e,t){for(const i in e)!Qs(e[i])&&!I5(i,t)&&(n[i]=e[i])}function NW({transformTemplate:n},e){return q.useMemo(()=>{const t=zD();return UD(t,e,n),Object.assign({},t.vars,t.style)},[e])}function UW(n,e){const t=n.style||{},i={};return tF(i,t,n),Object.assign(i,NW(n,e)),i}function kW(n,e){const t={},i=UW(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=i,t}const nF=()=>({...zD(),attrs:{}});function zW(n,e,t,i){const r=q.useMemo(()=>{const s=nF();return N5(s,e,k5(i),n.transformTemplate,n.style),{...s.attrs,style:{...s.style}}},[e]);if(n.style){const s={};tF(s,n.style,n),r.style={...s,...r.style}}return r}const FW=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function FD(n){return typeof n!="string"||n.includes("-")?!1:!!(FW.indexOf(n)>-1||/[A-Z]/u.test(n))}function BW(n,e,t,{latestValues:i},r,s=!1,o){const l=(o??FD(n)?zW:kW)(e,i,r,n),u=LW(e,typeof n=="string",s),h=n!==q.Fragment?{...u,...l,ref:t}:{},{children:p}=e,m=q.useMemo(()=>Qs(p)?p.get():p,[p]);return q.createElement(n,{...h,children:m})}function VW({scrapeMotionValuesFromProps:n,createRenderState:e},t,i,r){return{latestValues:GW(t,i,r,n),renderState:e()}}function GW(n,e,t,i){const r={},s=i(n,{});for(const m in s)r[m]=KS(s[m]);let{initial:o,animate:a}=n;const l=YE(n),u=M5(n);e&&u&&!l&&n.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let h=t?t.initial===!1:!1;h=h||o===!1;const p=h?a:o;if(p&&typeof p!="boolean"&&!qE(p)){const m=Array.isArray(p)?p:[p];for(let y=0;y<m.length;y++){const b=RD(n,m[y]);if(b){const{transitionEnd:x,transition:S,..._}=b;for(const T in _){let A=_[T];if(Array.isArray(A)){const M=h?A.length-1:0;A=A[M]}A!==null&&(r[T]=A)}for(const T in x)r[T]=x[T]}}}return r}const iF=n=>(e,t)=>{const i=q.useContext(ZE),r=q.useContext(XE),s=()=>VW(n,e,i,r);return t?s():Xp(s)},HW=iF({scrapeMotionValuesFromProps:kD,createRenderState:zD}),jW=iF({scrapeMotionValuesFromProps:z5,createRenderState:nF}),WW=Symbol.for("motionComponentSymbol");function XW(n,e,t){const i=q.useRef(t);q.useInsertionEffect(()=>{i.current=t});const r=q.useRef(null);return q.useCallback(s=>{s&&n.onMount?.(s),e&&(s?e.mount(s):e.unmount());const o=i.current;if(typeof o=="function")if(s){const a=o(s);typeof a=="function"&&(r.current=a)}else r.current?(r.current(),r.current=null):o(s);else o&&(o.current=s)},[e])}const rF=q.createContext({});function cb(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function qW(n,e,t,i,r,s){const{visualElement:o}=q.useContext(ZE),a=q.useContext(Q5),l=q.useContext(XE),u=q.useContext($E),h=u.reducedMotion,p=u.skipAnimations,m=q.useRef(null),y=q.useRef(!1);i=i||a.renderer,!m.current&&i&&(m.current=i(n,{visualState:e,parent:o,props:t,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:h,skipAnimations:p,isSVG:s}),y.current&&m.current&&(m.current.manuallyAnimateOnMount=!0));const b=m.current,x=q.useContext(rF);b&&!b.projection&&r&&(b.type==="html"||b.type==="svg")&&YW(m.current,t,r,x);const S=q.useRef(!1);q.useInsertionEffect(()=>{b&&S.current&&b.update(t,l)});const _=t[d5],T=q.useRef(!!_&&!window.MotionHandoffIsComplete?.(_)&&window.MotionHasOptimisedAnimation?.(_));return uD(()=>{y.current=!0,b&&(S.current=!0,window.MotionIsMounted=!0,b.updateFeatures(),b.scheduleRenderMicrotask(),T.current&&b.animationState&&b.animationState.animateChanges())}),q.useEffect(()=>{b&&(!T.current&&b.animationState&&b.animationState.animateChanges(),T.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(_)}),T.current=!1),b.enteringChildren=void 0)}),b}function YW(n,e,t,i){const{layoutId:r,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:u,layoutCrossfade:h}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:sF(n.parent)),n.projection.setOptions({layoutId:r,layout:s,alwaysMeasureLayout:!!o||a&&cb(a),visualElement:n,animationType:typeof s=="string"?s:"both",initialPromotionConfig:i,crossfade:h,layoutScroll:l,layoutRoot:u})}function sF(n){if(n)return n.options.allowProjection!==!1?n.projection:sF(n.parent)}function JM(n,{forwardMotionProps:e=!1,type:t}={},i,r){i&&RW(i);const s=t?t==="svg":FD(n),o=s?jW:HW;function a(u,h){let p;const m={...q.useContext($E),...u,layoutId:$W(u)},{isStatic:y}=m,b=IW(u),x=o(u,y);if(!y&&R4){ZW();const S=KW(m);p=S.MeasureLayout,b.visualElement=qW(n,x,m,r,S.ProjectionNode,s)}return ue.jsxs(ZE.Provider,{value:b,children:[p&&b.visualElement?ue.jsx(p,{visualElement:b.visualElement,...m}):null,BW(n,u,XW(x,b.visualElement,h),x,y,e,s)]})}a.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const l=q.forwardRef(a);return l[WW]=n,l}function $W({layoutId:n}){const e=q.useContext(cD).id;return e&&n!==void 0?e+"-"+n:n}function ZW(n,e){q.useContext(Q5).strict}function KW(n){const e=J5(),{drag:t,layout:i}=e;if(!t&&!i)return{};const r={...t,...i};return{MeasureLayout:t?.isEnabled(n)||i?.isEnabled(n)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function QW(n,e){if(typeof Proxy>"u")return JM;const t=new Map,i=(s,o)=>JM(s,o,n,e),r=(s,o)=>i(s,o);return new Proxy(r,{get:(s,o)=>o==="create"?i:(t.has(o)||t.set(o,JM(o,void 0,n,e)),t.get(o))})}const JW=(n,e)=>e.isSVG??FD(n)?new Dj(e):new Ej(e,{allowProjection:n!==q.Fragment});class eX extends fd{constructor(e){super(e),e.animationState||(e.animationState=Nj(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();qE(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let tX=0;class nX extends fd{constructor(){super(...arguments),this.id=tX++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const r=this.node.animationState.setActive("exit",!e);t&&!e&&r.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const iX={animation:{Feature:eX},exit:{Feature:nX}};function C_(n){return{point:{x:n.pageX,y:n.pageY}}}const rX=n=>e=>PD(e)&&n(e,C_(e));function wb(n,e,t,i){return Wb(n,e,rX(t),i)}const oF=({current:n})=>n?n.ownerDocument.defaultView:null,II=(n,e)=>Math.abs(n-e);function sX(n,e){const t=II(n.x,e.x),i=II(n.y,e.y);return Math.sqrt(t**2+i**2)}const NI=new Set(["auto","scroll"]);class aF{constructor(e,t,{transformPagePoint:i,contextWindow:r=window,dragSnapToOrigin:s=!1,distanceThreshold:o=3,element:a}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=y=>{this.handleScroll(y.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=tA(this.lastMoveEventInfo,this.history),b=this.startEvent!==null,x=sX(y.offset,{x:0,y:0})>=this.distanceThreshold;if(!b&&!x)return;const{point:S}=y,{timestamp:_}=As;this.history.push({...S,timestamp:_});const{onStart:T,onMove:A}=this.handlers;b||(T&&T(this.lastMoveEvent,y),this.startEvent=this.lastMoveEvent),A&&A(this.lastMoveEvent,y)},this.handlePointerMove=(y,b)=>{this.lastMoveEvent=y,this.lastMoveEventInfo=eA(b,this.transformPagePoint),Mi.update(this.updatePoint,!0)},this.handlePointerUp=(y,b)=>{this.end();const{onEnd:x,onSessionEnd:S,resumeAnimation:_}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&_&&_(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const T=tA(y.type==="pointercancel"?this.lastMoveEventInfo:eA(b,this.transformPagePoint),this.history);this.startEvent&&x&&x(y,T),S&&S(y,T)},!PD(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=i,this.distanceThreshold=o,this.contextWindow=r||window;const l=C_(e),u=eA(l,this.transformPagePoint),{point:h}=u,{timestamp:p}=As;this.history=[{...h,timestamp:p}];const{onSessionStart:m}=t;m&&m(e,tA(u,this.history)),this.removeListeners=T_(wb(this.contextWindow,"pointermove",this.handlePointerMove),wb(this.contextWindow,"pointerup",this.handlePointerUp),wb(this.contextWindow,"pointercancel",this.handlePointerUp)),a&&this.startScrollTracking(a)}startScrollTracking(e){let t=e.parentElement;for(;t;){const i=getComputedStyle(t);(NI.has(i.overflowX)||NI.has(i.overflowY))&&this.scrollPositions.set(t,{x:t.scrollLeft,y:t.scrollTop}),t=t.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(e){const t=this.scrollPositions.get(e);if(!t)return;const i=e===window,r=i?{x:window.scrollX,y:window.scrollY}:{x:e.scrollLeft,y:e.scrollTop},s={x:r.x-t.x,y:r.y-t.y};s.x===0&&s.y===0||(i?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=s.x,this.lastMoveEventInfo.point.y+=s.y):this.history.length>0&&(this.history[0].x-=s.x,this.history[0].y-=s.y),this.scrollPositions.set(e,r),Mi.update(this.updatePoint,!0))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),Nf(this.updatePoint)}}function eA(n,e){return e?{point:e(n.point)}:n}function UI(n,e){return{x:n.x-e.x,y:n.y-e.y}}function tA({point:n},e){return{point:n,delta:UI(n,lF(e)),offset:UI(n,oX(e)),velocity:aX(e,.1)}}function oX(n){return n[0]}function lF(n){return n[n.length-1]}function aX(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,i=null;const r=lF(n);for(;t>=0&&(i=n[t],!(r.timestamp-i.timestamp>Cf(e)));)t--;if(!i)return{x:0,y:0};const s=ml(r.timestamp-i.timestamp);if(s===0)return{x:0,y:0};const o={x:(r.x-i.x)/s,y:(r.y-i.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function lX(n,{min:e,max:t},i){return e!==void 0&&n<e?n=i?sr(e,n,i.min):Math.max(n,e):t!==void 0&&n>t&&(n=i?sr(t,n,i.max):Math.min(n,t)),n}function kI(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function cX(n,{top:e,left:t,bottom:i,right:r}){return{x:kI(n.x,t,r),y:kI(n.y,e,i)}}function zI(n,e){let t=e.min-n.min,i=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,i]=[i,t]),{min:t,max:i}}function uX(n,e){return{x:zI(n.x,e.x),y:zI(n.y,e.y)}}function fX(n,e){let t=.5;const i=Mo(n),r=Mo(e);return r>i?t=Vb(e.min,e.max-i,n.min):i>r&&(t=Vb(n.min,n.max-r,e.min)),pu(0,1,t)}function hX(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const XR=.35;function dX(n=XR){return n===!1?n=0:n===!0&&(n=XR),{x:FI(n,"left","right"),y:FI(n,"top","bottom")}}function FI(n,e,t){return{min:BI(n,e),max:BI(n,t)}}function BI(n,e){return typeof n=="number"?n:n[e]||0}const pX=new WeakMap;class mX{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Kr(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:i}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=p=>{t?(this.stopAnimation(),this.snapToCursor(C_(p).point)):this.pauseAnimation()},o=(p,m)=>{this.stopAnimation();const{drag:y,dragPropagation:b,onDragStart:x}=this.getProps();if(y&&!b&&(this.openDragLock&&this.openDragLock(),this.openDragLock=K7(y),!this.openDragLock))return;this.latestPointerEvent=p,this.latestPanInfo=m,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),cl(_=>{let T=this.getAxisMotionValue(_).get()||0;if(lu.test(T)){const{projection:A}=this.visualElement;if(A&&A.layout){const M=A.layout.layoutBox[_];M&&(T=Mo(M)*(parseFloat(T)/100))}}this.originPoint[_]=T}),x&&Mi.update(()=>x(p,m),!1,!0),zR(this.visualElement,"transform");const{animationState:S}=this.visualElement;S&&S.setActive("whileDrag",!0)},a=(p,m)=>{this.latestPointerEvent=p,this.latestPanInfo=m;const{dragPropagation:y,dragDirectionLock:b,onDirectionLock:x,onDrag:S}=this.getProps();if(!y&&!this.openDragLock)return;const{offset:_}=m;if(b&&this.currentDirection===null){this.currentDirection=gX(_),this.currentDirection!==null&&x&&x(this.currentDirection);return}this.updateAxis("x",m.point,_),this.updateAxis("y",m.point,_),this.visualElement.render(),S&&Mi.update(()=>S(p,m),!1,!0)},l=(p,m)=>{this.latestPointerEvent=p,this.latestPanInfo=m,this.stop(p,m),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>cl(p=>this.getAnimationState(p)==="paused"&&this.getAxisMotionValue(p).animation?.play()),{dragSnapToOrigin:h}=this.getProps();this.panSession=new aF(e,{onSessionStart:s,onStart:o,onMove:a,onSessionEnd:l,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,distanceThreshold:i,contextWindow:oF(this.visualElement),element:this.visualElement.current})}stop(e,t){const i=e||this.latestPointerEvent,r=t||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!r||!i)return;const{velocity:o}=r;this.startAnimation(o);const{onDragEnd:a}=this.getProps();a&&Mi.postRender(()=>a(i,r))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.endPanSession();const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(e,t,i){const{drag:r}=this.getProps();if(!i||!T1(e,r,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(o=lX(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){const{dragConstraints:e,dragElastic:t}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,r=this.constraints;e&&cb(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&i?this.constraints=cX(i.layoutBox,e):this.constraints=!1,this.elastic=dX(t),r!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&cl(s=>{this.constraints!==!1&&this.getAxisMotionValue(s)&&(this.constraints[s]=hX(i.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!cb(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const s=yj(i,r.root,this.visualElement.getTransformPagePoint());let o=uX(r.layout.layoutBox,s);if(t){const a=t(mj(o));this.hasMutatedConstraints=!!a,a&&(o=R5(a))}return o}startAnimation(e){const{drag:t,dragMomentum:i,dragElastic:r,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},u=cl(h=>{if(!T1(h,t,this.currentDirection))return;let p=l&&l[h]||{};o&&(p={min:0,max:0});const m=r?200:1e6,y=r?40:1e7,b={type:"inertia",velocity:i?e[h]:0,bounceStiffness:m,bounceDamping:y,timeConstant:750,restDelta:1,restSpeed:10,...s,...p};return this.startAxisValueAnimation(h,b)});return Promise.all(u).then(a)}startAxisValueAnimation(e,t){const i=this.getAxisMotionValue(e);return zR(this.visualElement,e),i.start(CD(e,i,0,t,this.visualElement,!1))}stopAnimation(){cl(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){cl(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),r=i[t];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){cl(t=>{const{drag:i}=this.getProps();if(!T1(t,i,this.currentDirection))return;const{projection:r}=this.visualElement,s=this.getAxisMotionValue(t);if(r&&r.layout){const{min:o,max:a}=r.layout.layoutBox[t],l=s.get()||0;s.set(e[t]-sr(o,a,.5)+l)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:i}=this.visualElement;if(!cb(t)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};cl(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();r[o]=fX({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),cl(o=>{if(!T1(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:u}=this.constraints[o];a.set(sr(l,u,r[o]))})}addListeners(){if(!this.visualElement.current)return;pX.set(this.visualElement,this);const e=this.visualElement.current,t=wb(e,"pointerdown",l=>{const{drag:u,dragListener:h=!0}=this.getProps(),p=l.target,m=p!==e&&nj(p);u&&h&&!m&&this.start(l)}),i=()=>{const{dragConstraints:l}=this.getProps();cb(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,s=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),Mi.read(i);const o=Wb(window,"resize",()=>this.scalePositionWithinConstraints()),a=r.addEventListener("didUpdate",(({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(cl(h=>{const p=this.getAxisMotionValue(h);p&&(this.originPoint[h]+=l[h].translate,p.set(p.get()+l[h].translate))}),this.visualElement.render())}));return()=>{o(),t(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:s=!1,dragElastic:o=XR,dragMomentum:a=!0}=e;return{...e,drag:t,dragDirectionLock:i,dragPropagation:r,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function T1(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function gX(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class vX extends fd{constructor(e){super(e),this.removeGroupControls=bl,this.removeListeners=bl,this.controls=new mX(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||bl}update(){const{dragControls:e}=this.node.getProps(),{dragControls:t}=this.node.prevProps||{};e!==t&&(this.removeGroupControls(),e&&(this.removeGroupControls=e.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.isDragging||this.controls.endPanSession()}}const nA=n=>(e,t)=>{n&&Mi.update(()=>n(e,t),!1,!0)};class yX extends fd{constructor(){super(...arguments),this.removePointerDownListener=bl}onPointerDown(e){this.session=new aF(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:oF(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:nA(e),onStart:nA(t),onMove:nA(i),onEnd:(s,o)=>{delete this.session,r&&Mi.postRender(()=>r(s,o))}}}mount(){this.removePointerDownListener=wb(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let iA=!1;class bX extends q.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i,layoutId:r}=this.props,{projection:s}=e;s&&(t.group&&t.group.add(s),i&&i.register&&r&&i.register(s),iA&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,layoutDependency:this.props.layoutDependency,onExitComplete:()=>this.safeToRemove()})),QS.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:i,drag:r,isPresent:s}=this.props,{projection:o}=i;return o&&(o.isPresent=s,e.layoutDependency!==t&&o.setOptions({...o.options,layoutDependency:t}),iA=!0,r||e.layoutDependency!==t||t===void 0||e.isPresent!==s?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||Mi.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),LD.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i}=this.props,{projection:r}=e;iA=!0,r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function cF(n){const[e,t]=K5(),i=q.useContext(cD);return ue.jsx(bX,{...n,layoutGroup:i,switchLayoutGroup:q.useContext(rF),isPresent:e,safeToRemove:t})}const _X={pan:{Feature:yX},drag:{Feature:vX,ProjectionNode:Z5,MeasureLayout:cF}};function VI(n,e,t){const{props:i}=n;n.animationState&&i.whileHover&&n.animationState.setActive("whileHover",t==="Start");const r="onHover"+t,s=i[r];s&&Mi.postRender(()=>s(e,C_(e)))}class xX extends fd{mount(){const{current:e}=this.node;e&&(this.unmount=Q7(e,(t,i)=>(VI(this.node,i,"Start"),r=>VI(this.node,r,"End"))))}unmount(){}}class SX extends fd{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=T_(Wb(this.node.current,"focus",()=>this.onFocus()),Wb(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function GI(n,e,t){const{props:i}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&i.whileTap&&n.animationState.setActive("whileTap",t==="Start");const r="onTap"+(t==="End"?"":t),s=i[r];s&&Mi.postRender(()=>s(e,C_(e)))}class wX extends fd{mount(){const{current:e}=this.node;e&&(this.unmount=rj(e,(t,i)=>(GI(this.node,i,"Start"),(r,{success:s})=>GI(this.node,r,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const qR=new WeakMap,rA=new WeakMap,EX=n=>{const e=qR.get(n.target);e&&e(n)},TX=n=>{n.forEach(EX)};function MX({root:n,...e}){const t=n||document;rA.has(t)||rA.set(t,{});const i=rA.get(t),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(TX,{root:n,...e})),i[r]}function AX(n,e,t){const i=MX(e);return qR.set(n,t),i.observe(n),()=>{qR.delete(n),i.unobserve(n)}}const CX={some:0,all:1};class RX extends fd{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:i,amount:r="some",once:s}=e,o={root:t?t.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:CX[r]},a=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,s&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:h,onViewportLeave:p}=this.node.getProps(),m=u?h:p;m&&m(l)};return AX(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(DX(e,t))&&this.startObserver()}unmount(){}}function DX({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const OX={inView:{Feature:RX},tap:{Feature:wX},focus:{Feature:SX},hover:{Feature:xX}},LX={layout:{ProjectionNode:Z5,MeasureLayout:cF}},PX={...iX,...OX,..._X,...LX},dl=QW(PX,JW);function uF(n){const e=Xp(()=>qp(n)),{isStatic:t}=q.useContext($E);if(t){const[,i]=q.useState(n);q.useEffect(()=>e.on("change",i),[])}return e}function fF(n,e){const t=uF(e()),i=()=>t.set(e());return i(),uD(()=>{const r=()=>Mi.preRender(i,!1,!0),s=n.map(o=>o.on("change",r));return()=>{s.forEach(o=>o()),Nf(i)}}),t}function IX(n){xb.current=[],n();const e=fF(xb.current,n);return xb.current=void 0,e}function hF(n,e,t,i){if(typeof n=="function")return IX(n);if(t!==void 0&&!Array.isArray(t)&&typeof e!="function")return NX(n,e,t,i);const o=typeof e=="function"?e:oj(e,t,i);return Array.isArray(n)?HI(n,o):HI([n],([a])=>o(a))}function HI(n,e){const t=Xp(()=>[]);return fF(n,()=>{t.length=0;const i=n.length;for(let r=0;r<i;r++)t[r]=n[r].get();return e(t)})}function NX(n,e,t,i){const r=Xp(()=>Object.keys(t)),s=Xp(()=>({}));for(const o of r)s[o]=hF(n,e,t[o],i);return s}var dF=A4();function KE(){return typeof window<"u"}function z0(n){return pF(n)?(n.nodeName||"").toLowerCase():"#document"}function Aa(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function vu(n){var e;return(e=(pF(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function pF(n){return KE()?n instanceof Node||n instanceof Aa(n).Node:!1}function Ao(n){return KE()?n instanceof Element||n instanceof Aa(n).Element:!1}function mu(n){return KE()?n instanceof HTMLElement||n instanceof Aa(n).HTMLElement:!1}function jI(n){return!KE()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof Aa(n).ShadowRoot}const UX=new Set(["inline","contents"]);function R_(n){const{overflow:e,overflowX:t,overflowY:i,display:r}=cc(n);return/auto|scroll|overlay|hidden|clip/.test(e+i+t)&&!UX.has(r)}const kX=new Set(["table","td","th"]);function zX(n){return kX.has(z0(n))}const FX=[":popover-open",":modal"];function QE(n){return FX.some(e=>{try{return n.matches(e)}catch{return!1}})}const BX=["transform","translate","scale","rotate","perspective"],VX=["transform","translate","scale","rotate","perspective","filter"],GX=["paint","layout","strict","content"];function BD(n){const e=VD(),t=Ao(n)?cc(n):n;return BX.some(i=>t[i]?t[i]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||VX.some(i=>(t.willChange||"").includes(i))||GX.some(i=>(t.contain||"").includes(i))}function HX(n){let e=rd(n);for(;mu(e)&&!d0(e);){if(BD(e))return e;if(QE(e))return null;e=rd(e)}return null}function VD(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const jX=new Set(["html","body","#document"]);function d0(n){return jX.has(z0(n))}function cc(n){return Aa(n).getComputedStyle(n)}function JE(n){return Ao(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function rd(n){if(z0(n)==="html")return n;const e=n.assignedSlot||n.parentNode||jI(n)&&n.host||vu(n);return jI(e)?e.host:e}function mF(n){const e=rd(n);return d0(e)?n.ownerDocument?n.ownerDocument.body:n.body:mu(e)&&R_(e)?e:mF(e)}function Xb(n,e,t){var i;e===void 0&&(e=[]),t===void 0&&(t=!0);const r=mF(n),s=r===((i=n.ownerDocument)==null?void 0:i.body),o=Aa(r);if(s){const a=YR(o);return e.concat(o,o.visualViewport||[],R_(r)?r:[],a&&t?Xb(a):[])}return e.concat(r,Xb(r,[],t))}function YR(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}const p0=Math.min,Ea=Math.max,Sw=Math.round,M1=Math.floor,cu=n=>({x:n,y:n}),WX={left:"right",right:"left",bottom:"top",top:"bottom"},XX={start:"end",end:"start"};function WI(n,e,t){return Ea(n,p0(e,t))}function m0(n,e){return typeof n=="function"?n(e):n}function sd(n){return n.split("-")[0]}function eT(n){return n.split("-")[1]}function GD(n){return n==="x"?"y":"x"}function gF(n){return n==="y"?"height":"width"}const qX=new Set(["top","bottom"]);function Tf(n){return qX.has(sd(n))?"y":"x"}function vF(n){return GD(Tf(n))}function YX(n,e,t){t===void 0&&(t=!1);const i=eT(n),r=vF(n),s=gF(r);let o=r==="x"?i===(t?"end":"start")?"right":"left":i==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=ww(o)),[o,ww(o)]}function $X(n){const e=ww(n);return[$R(n),e,$R(e)]}function $R(n){return n.replace(/start|end/g,e=>XX[e])}const XI=["left","right"],qI=["right","left"],ZX=["top","bottom"],KX=["bottom","top"];function QX(n,e,t){switch(n){case"top":case"bottom":return t?e?qI:XI:e?XI:qI;case"left":case"right":return e?ZX:KX;default:return[]}}function JX(n,e,t,i){const r=eT(n);let s=QX(sd(n),t==="start",i);return r&&(s=s.map(o=>o+"-"+r),e&&(s=s.concat(s.map($R)))),s}function ww(n){return n.replace(/left|right|bottom|top/g,e=>WX[e])}function eq(n){return{top:0,right:0,bottom:0,left:0,...n}}function tq(n){return typeof n!="number"?eq(n):{top:n,right:n,bottom:n,left:n}}function Ew(n){const{x:e,y:t,width:i,height:r}=n;return{width:i,height:r,top:t,left:e,right:e+i,bottom:t+r,x:e,y:t}}var yF=["input:not([inert]):not([inert] *)","select:not([inert]):not([inert] *)","textarea:not([inert]):not([inert] *)","a[href]:not([inert]):not([inert] *)","button:not([inert]):not([inert] *)","[tabindex]:not(slot):not([inert]):not([inert] *)","audio[controls]:not([inert]):not([inert] *)","video[controls]:not([inert]):not([inert] *)",'[contenteditable]:not([contenteditable="false"]):not([inert]):not([inert] *)',"details>summary:first-of-type:not([inert]):not([inert] *)","details:not([inert]):not([inert] *)"],Tw=yF.join(","),bF=typeof Element>"u",Yp=bF?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Mw=!bF&&Element.prototype.getRootNode?function(n){var e;return n==null||(e=n.getRootNode)===null||e===void 0?void 0:e.call(n)}:function(n){return n?.ownerDocument},Aw=function(e,t){var i;t===void 0&&(t=!0);var r=e==null||(i=e.getAttribute)===null||i===void 0?void 0:i.call(e,"inert"),s=r===""||r==="true",o=s||t&&e&&(typeof e.closest=="function"?e.closest("[inert]"):Aw(e.parentNode));return o},nq=function(e){var t,i=e==null||(t=e.getAttribute)===null||t===void 0?void 0:t.call(e,"contenteditable");return i===""||i==="true"},_F=function(e,t,i){if(Aw(e))return[];var r=Array.prototype.slice.apply(e.querySelectorAll(Tw));return t&&Yp.call(e,Tw)&&r.unshift(e),r=r.filter(i),r},Cw=function(e,t,i){for(var r=[],s=Array.from(e);s.length;){var o=s.shift();if(!Aw(o,!1))if(o.tagName==="SLOT"){var a=o.assignedElements(),l=a.length?a:o.children,u=Cw(l,!0,i);i.flatten?r.push.apply(r,u):r.push({scopeParent:o,candidates:u})}else{var h=Yp.call(o,Tw);h&&i.filter(o)&&(t||!e.includes(o))&&r.push(o);var p=o.shadowRoot||typeof i.getShadowRoot=="function"&&i.getShadowRoot(o),m=!Aw(p,!1)&&(!i.shadowRootFilter||i.shadowRootFilter(o));if(p&&m){var y=Cw(p===!0?o.children:p.children,!0,i);i.flatten?r.push.apply(r,y):r.push({scopeParent:o,candidates:y})}else s.unshift.apply(s,o.children)}}return r},xF=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},$h=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||nq(e))&&!xF(e)?0:e.tabIndex},iq=function(e,t){var i=$h(e);return i<0&&t&&!xF(e)?0:i},rq=function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex},SF=function(e){return e.tagName==="INPUT"},sq=function(e){return SF(e)&&e.type==="hidden"},oq=function(e){var t=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(i){return i.tagName==="SUMMARY"});return t},aq=function(e,t){for(var i=0;i<e.length;i++)if(e[i].checked&&e[i].form===t)return e[i]},lq=function(e){if(!e.name)return!0;var t=e.form||Mw(e),i=function(a){return t.querySelectorAll('input[type="radio"][name="'+a+'"]')},r;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")r=i(window.CSS.escape(e.name));else try{r=i(e.name)}catch(o){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",o.message),!1}var s=aq(r,e.form);return!s||s===e},cq=function(e){return SF(e)&&e.type==="radio"},uq=function(e){return cq(e)&&!lq(e)},fq=function(e){var t,i=e&&Mw(e),r=(t=i)===null||t===void 0?void 0:t.host,s=!1;if(i&&i!==e){var o,a,l;for(s=!!((o=r)!==null&&o!==void 0&&(a=o.ownerDocument)!==null&&a!==void 0&&a.contains(r)||e!=null&&(l=e.ownerDocument)!==null&&l!==void 0&&l.contains(e));!s&&r;){var u,h,p;i=Mw(r),r=(u=i)===null||u===void 0?void 0:u.host,s=!!((h=r)!==null&&h!==void 0&&(p=h.ownerDocument)!==null&&p!==void 0&&p.contains(r))}}return s},YI=function(e){var t=e.getBoundingClientRect(),i=t.width,r=t.height;return i===0&&r===0},hq=function(e,t){var i=t.displayCheck,r=t.getShadowRoot;if(i==="full-native"&&"checkVisibility"in e){var s=e.checkVisibility({checkOpacity:!1,opacityProperty:!1,contentVisibilityAuto:!0,visibilityProperty:!0,checkVisibilityCSS:!0});return!s}if(getComputedStyle(e).visibility==="hidden")return!0;var o=Yp.call(e,"details>summary:first-of-type"),a=o?e.parentElement:e;if(Yp.call(a,"details:not([open]) *"))return!0;if(!i||i==="full"||i==="full-native"||i==="legacy-full"){if(typeof r=="function"){for(var l=e;e;){var u=e.parentElement,h=Mw(e);if(u&&!u.shadowRoot&&r(u)===!0)return YI(e);e.assignedSlot?e=e.assignedSlot:!u&&h!==e.ownerDocument?e=h.host:e=u}e=l}if(fq(e))return!e.getClientRects().length;if(i!=="legacy-full")return!0}else if(i==="non-zero-area")return YI(e);return!1},dq=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var t=e.parentElement;t;){if(t.tagName==="FIELDSET"&&t.disabled){for(var i=0;i<t.children.length;i++){var r=t.children.item(i);if(r.tagName==="LEGEND")return Yp.call(t,"fieldset[disabled] *")?!0:!r.contains(e)}return!0}t=t.parentElement}return!1},Rw=function(e,t){return!(t.disabled||sq(t)||hq(t,e)||oq(t)||dq(t))},ZR=function(e,t){return!(uq(t)||$h(t)<0||!Rw(e,t))},pq=function(e){var t=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(t)||t>=0)},wF=function(e){var t=[],i=[];return e.forEach(function(r,s){var o=!!r.scopeParent,a=o?r.scopeParent:r,l=iq(a,o),u=o?wF(r.candidates):a;l===0?o?t.push.apply(t,u):t.push(a):i.push({documentOrder:s,tabIndex:l,item:r,isScope:o,content:u})}),i.sort(rq).reduce(function(r,s){return s.isScope?r.push.apply(r,s.content):r.push(s.content),r},[]).concat(t)},EF=function(e,t){t=t||{};var i;return t.getShadowRoot?i=Cw([e],t.includeContainer,{filter:ZR.bind(null,t),flatten:!1,getShadowRoot:t.getShadowRoot,shadowRootFilter:pq}):i=_F(e,t.includeContainer,ZR.bind(null,t)),wF(i)},TF=function(e,t){t=t||{};var i;return t.getShadowRoot?i=Cw([e],t.includeContainer,{filter:Rw.bind(null,t),flatten:!0,getShadowRoot:t.getShadowRoot}):i=_F(e,t.includeContainer,Rw.bind(null,t)),i},Sp=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return Yp.call(e,Tw)===!1?!1:ZR(t,e)},mq=yF.concat("iframe:not([inert]):not([inert] *)").join(","),JS=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return Yp.call(e,mq)===!1?!1:Rw(t,e)};const gq=Object.freeze(Object.defineProperty({__proto__:null,focusable:TF,getTabIndex:$h,isFocusable:JS,isTabbable:Sp,tabbable:EF},Symbol.toStringTag,{value:"Module"}));function $I(n,e,t){let{reference:i,floating:r}=n;const s=Tf(e),o=vF(e),a=gF(o),l=sd(e),u=s==="y",h=i.x+i.width/2-r.width/2,p=i.y+i.height/2-r.height/2,m=i[a]/2-r[a]/2;let y;switch(l){case"top":y={x:h,y:i.y-r.height};break;case"bottom":y={x:h,y:i.y+i.height};break;case"right":y={x:i.x+i.width,y:p};break;case"left":y={x:i.x-r.width,y:p};break;default:y={x:i.x,y:i.y}}switch(eT(e)){case"start":y[o]-=m*(t&&u?-1:1);break;case"end":y[o]+=m*(t&&u?-1:1);break}return y}async function vq(n,e){var t;e===void 0&&(e={});const{x:i,y:r,platform:s,rects:o,elements:a,strategy:l}=n,{boundary:u="clippingAncestors",rootBoundary:h="viewport",elementContext:p="floating",altBoundary:m=!1,padding:y=0}=m0(e,n),b=tq(y),S=a[m?p==="floating"?"reference":"floating":p],_=Ew(await s.getClippingRect({element:(t=await(s.isElement==null?void 0:s.isElement(S)))==null||t?S:S.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:u,rootBoundary:h,strategy:l})),T=p==="floating"?{x:i,y:r,width:o.floating.width,height:o.floating.height}:o.reference,A=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),M=await(s.isElement==null?void 0:s.isElement(A))?await(s.getScale==null?void 0:s.getScale(A))||{x:1,y:1}:{x:1,y:1},C=Ew(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:T,offsetParent:A,strategy:l}):T);return{top:(_.top-C.top+b.top)/M.y,bottom:(C.bottom-_.bottom+b.bottom)/M.y,left:(_.left-C.left+b.left)/M.x,right:(C.right-_.right+b.right)/M.x}}const yq=async(n,e,t)=>{const{placement:i="bottom",strategy:r="absolute",middleware:s=[],platform:o}=t,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:n,floating:e,strategy:r}),{x:h,y:p}=$I(u,i,l),m=i,y={},b=0;for(let S=0;S<a.length;S++){var x;const{name:_,fn:T}=a[S],{x:A,y:M,data:C,reset:R}=await T({x:h,y:p,initialPlacement:i,placement:m,strategy:r,middlewareData:y,rects:u,platform:{...o,detectOverflow:(x=o.detectOverflow)!=null?x:vq},elements:{reference:n,floating:e}});h=A??h,p=M??p,y={...y,[_]:{...y[_],...C}},R&&b<=50&&(b++,typeof R=="object"&&(R.placement&&(m=R.placement),R.rects&&(u=R.rects===!0?await o.getElementRects({reference:n,floating:e,strategy:r}):R.rects),{x:h,y:p}=$I(u,m,l)),S=-1)}return{x:h,y:p,placement:m,strategy:r,middlewareData:y}},bq=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,i;const{placement:r,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:u}=e,{mainAxis:h=!0,crossAxis:p=!0,fallbackPlacements:m,fallbackStrategy:y="bestFit",fallbackAxisSideDirection:b="none",flipAlignment:x=!0,...S}=m0(n,e);if((t=s.arrow)!=null&&t.alignmentOffset)return{};const _=sd(r),T=Tf(a),A=sd(a)===a,M=await(l.isRTL==null?void 0:l.isRTL(u.floating)),C=m||(A||!x?[ww(a)]:$X(a)),R=b!=="none";!m&&R&&C.push(...JX(a,x,b,M));const L=[a,...C],I=await l.detectOverflow(e,S),P=[];let U=((i=s.flip)==null?void 0:i.overflows)||[];if(h&&P.push(I[_]),p){const W=YX(r,o,M);P.push(I[W[0]],I[W[1]])}if(U=[...U,{placement:r,overflows:P}],!P.every(W=>W<=0)){var B,F;const W=(((B=s.flip)==null?void 0:B.index)||0)+1,X=L[W];if(X&&(!(p==="alignment"?T!==Tf(X):!1)||U.every(K=>Tf(K.placement)===T?K.overflows[0]>0:!0)))return{data:{index:W,overflows:U},reset:{placement:X}};let j=(F=U.filter(G=>G.overflows[0]<=0).sort((G,K)=>G.overflows[1]-K.overflows[1])[0])==null?void 0:F.placement;if(!j)switch(y){case"bestFit":{var z;const G=(z=U.filter(K=>{if(R){const J=Tf(K.placement);return J===T||J==="y"}return!0}).map(K=>[K.placement,K.overflows.filter(J=>J>0).reduce((J,ee)=>J+ee,0)]).sort((K,J)=>K[1]-J[1])[0])==null?void 0:z[0];G&&(j=G);break}case"initialPlacement":j=a;break}if(r!==j)return{reset:{placement:j}}}return{}}}},_q=new Set(["left","top"]),xq=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:i,placement:r,platform:s}=e,{mainAxis:o=!0,crossAxis:a=!1,limiter:l={fn:_=>{let{x:T,y:A}=_;return{x:T,y:A}}},...u}=m0(n,e),h={x:t,y:i},p=await s.detectOverflow(e,u),m=Tf(sd(r)),y=GD(m);let b=h[y],x=h[m];if(o){const _=y==="y"?"top":"left",T=y==="y"?"bottom":"right",A=b+p[_],M=b-p[T];b=WI(A,b,M)}if(a){const _=m==="y"?"top":"left",T=m==="y"?"bottom":"right",A=x+p[_],M=x-p[T];x=WI(A,x,M)}const S=l.fn({...e,[y]:b,[m]:x});return{...S,data:{x:S.x-t,y:S.y-i,enabled:{[y]:o,[m]:a}}}}}},Sq=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:i,placement:r,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:u=!0}=m0(n,e),h={x:t,y:i},p=Tf(r),m=GD(p);let y=h[m],b=h[p];const x=m0(a,e),S=typeof x=="number"?{mainAxis:x,crossAxis:0}:{mainAxis:0,crossAxis:0,...x};if(l){const A=m==="y"?"height":"width",M=s.reference[m]-s.floating[A]+S.mainAxis,C=s.reference[m]+s.reference[A]-S.mainAxis;y<M?y=M:y>C&&(y=C)}if(u){var _,T;const A=m==="y"?"width":"height",M=_q.has(sd(r)),C=s.reference[p]-s.floating[A]+(M&&((_=o.offset)==null?void 0:_[p])||0)+(M?0:S.crossAxis),R=s.reference[p]+s.reference[A]+(M?0:((T=o.offset)==null?void 0:T[p])||0)-(M?S.crossAxis:0);b<C?b=C:b>R&&(b=R)}return{[m]:y,[p]:b}}}},wq=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,i;const{placement:r,rects:s,platform:o,elements:a}=e,{apply:l=()=>{},...u}=m0(n,e),h=await o.detectOverflow(e,u),p=sd(r),m=eT(r),y=Tf(r)==="y",{width:b,height:x}=s.floating;let S,_;p==="top"||p==="bottom"?(S=p,_=m===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(_=p,S=m==="end"?"top":"bottom");const T=x-h.top-h.bottom,A=b-h.left-h.right,M=p0(x-h[S],T),C=p0(b-h[_],A),R=!e.middlewareData.shift;let L=M,I=C;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(I=A),(i=e.middlewareData.shift)!=null&&i.enabled.y&&(L=T),R&&!m){const U=Ea(h.left,0),B=Ea(h.right,0),F=Ea(h.top,0),z=Ea(h.bottom,0);y?I=b-2*(U!==0||B!==0?U+B:Ea(h.left,h.right)):L=x-2*(F!==0||z!==0?F+z:Ea(h.top,h.bottom))}await l({...e,availableWidth:I,availableHeight:L});const P=await o.getDimensions(a.floating);return b!==P.width||x!==P.height?{reset:{rects:!0}}:{}}}};function MF(n){const e=cc(n);let t=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const r=mu(n),s=r?n.offsetWidth:t,o=r?n.offsetHeight:i,a=Sw(t)!==s||Sw(i)!==o;return a&&(t=s,i=o),{width:t,height:i,$:a}}function HD(n){return Ao(n)?n:n.contextElement}function s0(n){const e=HD(n);if(!mu(e))return cu(1);const t=e.getBoundingClientRect(),{width:i,height:r,$:s}=MF(e);let o=(s?Sw(t.width):t.width)/i,a=(s?Sw(t.height):t.height)/r;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const Eq=cu(0);function AF(n){const e=Aa(n);return!VD()||!e.visualViewport?Eq:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Tq(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==Aa(n)?!1:e}function $p(n,e,t,i){e===void 0&&(e=!1),t===void 0&&(t=!1);const r=n.getBoundingClientRect(),s=HD(n);let o=cu(1);e&&(i?Ao(i)&&(o=s0(i)):o=s0(n));const a=Tq(s,t,i)?AF(s):cu(0);let l=(r.left+a.x)/o.x,u=(r.top+a.y)/o.y,h=r.width/o.x,p=r.height/o.y;if(s){const m=Aa(s),y=i&&Ao(i)?Aa(i):i;let b=m,x=YR(b);for(;x&&i&&y!==b;){const S=s0(x),_=x.getBoundingClientRect(),T=cc(x),A=_.left+(x.clientLeft+parseFloat(T.paddingLeft))*S.x,M=_.top+(x.clientTop+parseFloat(T.paddingTop))*S.y;l*=S.x,u*=S.y,h*=S.x,p*=S.y,l+=A,u+=M,b=Aa(x),x=YR(b)}}return Ew({width:h,height:p,x:l,y:u})}function tT(n,e){const t=JE(n).scrollLeft;return e?e.left+t:$p(vu(n)).left+t}function CF(n,e){const t=n.getBoundingClientRect(),i=t.left+e.scrollLeft-tT(n,t),r=t.top+e.scrollTop;return{x:i,y:r}}function Mq(n){let{elements:e,rect:t,offsetParent:i,strategy:r}=n;const s=r==="fixed",o=vu(i),a=e?QE(e.floating):!1;if(i===o||a&&s)return t;let l={scrollLeft:0,scrollTop:0},u=cu(1);const h=cu(0),p=mu(i);if((p||!p&&!s)&&((z0(i)!=="body"||R_(o))&&(l=JE(i)),mu(i))){const y=$p(i);u=s0(i),h.x=y.x+i.clientLeft,h.y=y.y+i.clientTop}const m=o&&!p&&!s?CF(o,l):cu(0);return{width:t.width*u.x,height:t.height*u.y,x:t.x*u.x-l.scrollLeft*u.x+h.x+m.x,y:t.y*u.y-l.scrollTop*u.y+h.y+m.y}}function Aq(n){return Array.from(n.getClientRects())}function Cq(n){const e=vu(n),t=JE(n),i=n.ownerDocument.body,r=Ea(e.scrollWidth,e.clientWidth,i.scrollWidth,i.clientWidth),s=Ea(e.scrollHeight,e.clientHeight,i.scrollHeight,i.clientHeight);let o=-t.scrollLeft+tT(n);const a=-t.scrollTop;return cc(i).direction==="rtl"&&(o+=Ea(e.clientWidth,i.clientWidth)-r),{width:r,height:s,x:o,y:a}}const ZI=25;function Rq(n,e){const t=Aa(n),i=vu(n),r=t.visualViewport;let s=i.clientWidth,o=i.clientHeight,a=0,l=0;if(r){s=r.width,o=r.height;const h=VD();(!h||h&&e==="fixed")&&(a=r.offsetLeft,l=r.offsetTop)}const u=tT(i);if(u<=0){const h=i.ownerDocument,p=h.body,m=getComputedStyle(p),y=h.compatMode==="CSS1Compat"&&parseFloat(m.marginLeft)+parseFloat(m.marginRight)||0,b=Math.abs(i.clientWidth-p.clientWidth-y);b<=ZI&&(s-=b)}else u<=ZI&&(s+=u);return{width:s,height:o,x:a,y:l}}const Dq=new Set(["absolute","fixed"]);function Oq(n,e){const t=$p(n,!0,e==="fixed"),i=t.top+n.clientTop,r=t.left+n.clientLeft,s=mu(n)?s0(n):cu(1),o=n.clientWidth*s.x,a=n.clientHeight*s.y,l=r*s.x,u=i*s.y;return{width:o,height:a,x:l,y:u}}function KI(n,e,t){let i;if(e==="viewport")i=Rq(n,t);else if(e==="document")i=Cq(vu(n));else if(Ao(e))i=Oq(e,t);else{const r=AF(n);i={x:e.x-r.x,y:e.y-r.y,width:e.width,height:e.height}}return Ew(i)}function RF(n,e){const t=rd(n);return t===e||!Ao(t)||d0(t)?!1:cc(t).position==="fixed"||RF(t,e)}function Lq(n,e){const t=e.get(n);if(t)return t;let i=Xb(n,[],!1).filter(a=>Ao(a)&&z0(a)!=="body"),r=null;const s=cc(n).position==="fixed";let o=s?rd(n):n;for(;Ao(o)&&!d0(o);){const a=cc(o),l=BD(o);!l&&a.position==="fixed"&&(r=null),(s?!l&&!r:!l&&a.position==="static"&&!!r&&Dq.has(r.position)||R_(o)&&!l&&RF(n,o))?i=i.filter(h=>h!==o):r=a,o=rd(o)}return e.set(n,i),i}function Pq(n){let{element:e,boundary:t,rootBoundary:i,strategy:r}=n;const o=[...t==="clippingAncestors"?QE(e)?[]:Lq(e,this._c):[].concat(t),i],a=o[0],l=o.reduce((u,h)=>{const p=KI(e,h,r);return u.top=Ea(p.top,u.top),u.right=p0(p.right,u.right),u.bottom=p0(p.bottom,u.bottom),u.left=Ea(p.left,u.left),u},KI(e,a,r));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function Iq(n){const{width:e,height:t}=MF(n);return{width:e,height:t}}function Nq(n,e,t){const i=mu(e),r=vu(e),s=t==="fixed",o=$p(n,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=cu(0);function u(){l.x=tT(r)}if(i||!i&&!s)if((z0(e)!=="body"||R_(r))&&(a=JE(e)),i){const y=$p(e,!0,s,e);l.x=y.x+e.clientLeft,l.y=y.y+e.clientTop}else r&&u();s&&!i&&r&&u();const h=r&&!i&&!s?CF(r,a):cu(0),p=o.left+a.scrollLeft-l.x-h.x,m=o.top+a.scrollTop-l.y-h.y;return{x:p,y:m,width:o.width,height:o.height}}function sA(n){return cc(n).position==="static"}function QI(n,e){if(!mu(n)||cc(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return vu(n)===t&&(t=t.ownerDocument.body),t}function DF(n,e){const t=Aa(n);if(QE(n))return t;if(!mu(n)){let r=rd(n);for(;r&&!d0(r);){if(Ao(r)&&!sA(r))return r;r=rd(r)}return t}let i=QI(n,e);for(;i&&zX(i)&&sA(i);)i=QI(i,e);return i&&d0(i)&&sA(i)&&!BD(i)?t:i||HX(n)||t}const Uq=async function(n){const e=this.getOffsetParent||DF,t=this.getDimensions,i=await t(n.floating);return{reference:Nq(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function kq(n){return cc(n).direction==="rtl"}const zq={convertOffsetParentRelativeRectToViewportRelativeRect:Mq,getDocumentElement:vu,getClippingRect:Pq,getOffsetParent:DF,getElementRects:Uq,getClientRects:Aq,getDimensions:Iq,getScale:s0,isElement:Ao,isRTL:kq};function OF(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function Fq(n,e){let t=null,i;const r=vu(n);function s(){var a;clearTimeout(i),(a=t)==null||a.disconnect(),t=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const u=n.getBoundingClientRect(),{left:h,top:p,width:m,height:y}=u;if(a||e(),!m||!y)return;const b=M1(p),x=M1(r.clientWidth-(h+m)),S=M1(r.clientHeight-(p+y)),_=M1(h),A={rootMargin:-b+"px "+-x+"px "+-S+"px "+-_+"px",threshold:Ea(0,p0(1,l))||1};let M=!0;function C(R){const L=R[0].intersectionRatio;if(L!==l){if(!M)return o();L?o(!1,L):i=setTimeout(()=>{o(!1,1e-7)},1e3)}L===1&&!OF(u,n.getBoundingClientRect())&&o(),M=!1}try{t=new IntersectionObserver(C,{...A,root:r.ownerDocument})}catch{t=new IntersectionObserver(C,A)}t.observe(n)}return o(!0),s}function Bq(n,e,t,i){i===void 0&&(i={});const{ancestorScroll:r=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=i,u=HD(n),h=r||s?[...u?Xb(u):[],...Xb(e)]:[];h.forEach(_=>{r&&_.addEventListener("scroll",t,{passive:!0}),s&&_.addEventListener("resize",t)});const p=u&&a?Fq(u,t):null;let m=-1,y=null;o&&(y=new ResizeObserver(_=>{let[T]=_;T&&T.target===u&&y&&(y.unobserve(e),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var A;(A=y)==null||A.observe(e)})),t()}),u&&!l&&y.observe(u),y.observe(e));let b,x=l?$p(n):null;l&&S();function S(){const _=$p(n);x&&!OF(x,_)&&t(),x=_,b=requestAnimationFrame(S)}return t(),()=>{var _;h.forEach(T=>{r&&T.removeEventListener("scroll",t),s&&T.removeEventListener("resize",t)}),p?.(),(_=y)==null||_.disconnect(),y=null,l&&cancelAnimationFrame(b)}}const Vq=xq,Gq=bq,Hq=wq,jq=Sq,Wq=(n,e,t)=>{const i=new Map,r={platform:zq,...t},s={...r.platform,_c:i};return yq(n,e,{...r,platform:s})};var Xq=typeof document<"u",qq=function(){},ew=Xq?q.useLayoutEffect:qq;function Dw(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,i,r;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(i=t;i--!==0;)if(!Dw(n[i],e[i]))return!1;return!0}if(r=Object.keys(n),t=r.length,t!==Object.keys(e).length)return!1;for(i=t;i--!==0;)if(!{}.hasOwnProperty.call(e,r[i]))return!1;for(i=t;i--!==0;){const s=r[i];if(!(s==="_owner"&&n.$$typeof)&&!Dw(n[s],e[s]))return!1}return!0}return n!==n&&e!==e}function LF(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function JI(n,e){const t=LF(n);return Math.round(e*t)/t}function oA(n){const e=q.useRef(n);return ew(()=>{e.current=n}),e}function Yq(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:i=[],platform:r,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:u}=n,[h,p]=q.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[m,y]=q.useState(i);Dw(m,i)||y(i);const[b,x]=q.useState(null),[S,_]=q.useState(null),T=q.useCallback(K=>{K!==R.current&&(R.current=K,x(K))},[]),A=q.useCallback(K=>{K!==L.current&&(L.current=K,_(K))},[]),M=s||b,C=o||S,R=q.useRef(null),L=q.useRef(null),I=q.useRef(h),P=l!=null,U=oA(l),B=oA(r),F=oA(u),z=q.useCallback(()=>{if(!R.current||!L.current)return;const K={placement:e,strategy:t,middleware:m};B.current&&(K.platform=B.current),Wq(R.current,L.current,K).then(J=>{const ee={...J,isPositioned:F.current!==!1};W.current&&!Dw(I.current,ee)&&(I.current=ee,dF.flushSync(()=>{p(ee)}))})},[m,e,t,B,F]);ew(()=>{u===!1&&I.current.isPositioned&&(I.current.isPositioned=!1,p(K=>({...K,isPositioned:!1})))},[u]);const W=q.useRef(!1);ew(()=>(W.current=!0,()=>{W.current=!1}),[]),ew(()=>{if(M&&(R.current=M),C&&(L.current=C),M&&C){if(U.current)return U.current(M,C,z);z()}},[M,C,z,U,P]);const X=q.useMemo(()=>({reference:R,floating:L,setReference:T,setFloating:A}),[T,A]),j=q.useMemo(()=>({reference:M,floating:C}),[M,C]),G=q.useMemo(()=>{const K={position:t,left:0,top:0};if(!j.floating)return K;const J=JI(j.floating,h.x),ee=JI(j.floating,h.y);return a?{...K,transform:"translate("+J+"px, "+ee+"px)",...LF(j.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:J,top:ee}},[t,a,j.floating,h.x,h.y]);return q.useMemo(()=>({...h,update:z,refs:X,elements:j,floatingStyles:G}),[h,z,X,j,G])}const $q=(n,e)=>({...Vq(n),options:[n,e]}),Zq=(n,e)=>({...jq(n),options:[n,e]}),Kq=(n,e)=>({...Gq(n),options:[n,e]}),eN=(n,e)=>({...Hq(n),options:[n,e]}),PF={...HH},Qq=PF.useInsertionEffect,Jq=Qq||(n=>n());function eY(n){const e=q.useRef(()=>{});return Jq(()=>{e.current=n}),q.useCallback(function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return e.current==null?void 0:e.current(...i)},[])}var KR=typeof document<"u"?q.useLayoutEffect:q.useEffect;let tN=!1,tY=0;const nN=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+tY++;function nY(){const[n,e]=q.useState(()=>tN?nN():void 0);return KR(()=>{n==null&&e(nN())},[]),q.useEffect(()=>{tN=!0},[]),n}const iY=PF.useId,rY=iY||nY;function sY(){const n=new Map;return{emit(e,t){var i;(i=n.get(e))==null||i.forEach(r=>r(t))},on(e,t){n.set(e,[...n.get(e)||[],t])},off(e,t){var i;n.set(e,((i=n.get(e))==null?void 0:i.filter(r=>r!==t))||[])}}}const oY=q.createContext(null),aY=q.createContext(null),lY=()=>{var n;return((n=q.useContext(oY))==null?void 0:n.id)||null},cY=()=>q.useContext(aY);function uY(n){const{open:e=!1,onOpenChange:t,elements:i}=n,r=rY(),s=q.useRef({}),[o]=q.useState(()=>sY()),a=lY()!=null,[l,u]=q.useState(i.reference),h=eY((y,b,x)=>{s.current.openEvent=y?b:void 0,o.emit("openchange",{open:y,event:b,reason:x,nested:a}),t?.(y,b,x)}),p=q.useMemo(()=>({setPositionReference:u}),[]),m=q.useMemo(()=>({reference:l||i.reference||null,floating:i.floating||null,domReference:i.reference}),[l,i.reference,i.floating]);return q.useMemo(()=>({dataRef:s,open:e,onOpenChange:h,elements:m,events:o,floatingId:r,refs:p}),[e,h,m,o,r,p])}function fY(n){n===void 0&&(n={});const{nodeId:e}=n,t=uY({...n,elements:{reference:null,floating:null,...n.elements}}),i=n.rootContext||t,r=i.elements,[s,o]=q.useState(null),[a,l]=q.useState(null),h=r?.domReference||s,p=q.useRef(null),m=cY();KR(()=>{h&&(p.current=h)},[h]);const y=Yq({...n,elements:{...r,...a&&{reference:a}}}),b=q.useCallback(A=>{const M=Ao(A)?{getBoundingClientRect:()=>A.getBoundingClientRect(),contextElement:A}:A;l(M),y.refs.setReference(M)},[y.refs]),x=q.useCallback(A=>{(Ao(A)||A===null)&&(p.current=A,o(A)),(Ao(y.refs.reference.current)||y.refs.reference.current===null||A!==null&&!Ao(A))&&y.refs.setReference(A)},[y.refs]),S=q.useMemo(()=>({...y.refs,setReference:x,setPositionReference:b,domReference:p}),[y.refs,x,b]),_=q.useMemo(()=>({...y.elements,domReference:h}),[y.elements,h]),T=q.useMemo(()=>({...y,...i,refs:S,elements:_,nodeId:e}),[y,S,_,e,i]);return KR(()=>{i.dataRef.current.floatingContext=T;const A=m?.nodesRef.current.find(M=>M.id===e);A&&(A.context=T)}),q.useMemo(()=>({...y,context:T,refs:S,elements:_}),[y,S,_,T])}const jD="-",hY=n=>{const e=pY(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:i}=n;return{getClassGroupId:o=>{const a=o.split(jD);return a[0]===""&&a.length!==1&&a.shift(),IF(a,e)||dY(o)},getConflictingClassGroupIds:(o,a)=>{const l=t[o]||[];return a&&i[o]?[...l,...i[o]]:l}}},IF=(n,e)=>{if(n.length===0)return e.classGroupId;const t=n[0],i=e.nextPart.get(t),r=i?IF(n.slice(1),i):void 0;if(r)return r;if(e.validators.length===0)return;const s=n.join(jD);return e.validators.find(({validator:o})=>o(s))?.classGroupId},iN=/^\[(.+)\]$/,dY=n=>{if(iN.test(n)){const e=iN.exec(n)[1],t=e?.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},pY=n=>{const{theme:e,prefix:t}=n,i={nextPart:new Map,validators:[]};return gY(Object.entries(n.classGroups),t).forEach(([s,o])=>{QR(o,i,s,e)}),i},QR=(n,e,t,i)=>{n.forEach(r=>{if(typeof r=="string"){const s=r===""?e:rN(e,r);s.classGroupId=t;return}if(typeof r=="function"){if(mY(r)){QR(r(i),e,t,i);return}e.validators.push({validator:r,classGroupId:t});return}Object.entries(r).forEach(([s,o])=>{QR(o,rN(e,s),t,i)})})},rN=(n,e)=>{let t=n;return e.split(jD).forEach(i=>{t.nextPart.has(i)||t.nextPart.set(i,{nextPart:new Map,validators:[]}),t=t.nextPart.get(i)}),t},mY=n=>n.isThemeGetter,gY=(n,e)=>e?n.map(([t,i])=>{const r=i.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([o,a])=>[e+o,a])):s);return[t,r]}):n,vY=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,i=new Map;const r=(s,o)=>{t.set(s,o),e++,e>n&&(e=0,i=t,t=new Map)};return{get(s){let o=t.get(s);if(o!==void 0)return o;if((o=i.get(s))!==void 0)return r(s,o),o},set(s,o){t.has(s)?t.set(s,o):r(s,o)}}},NF="!",yY=n=>{const{separator:e,experimentalParseClassName:t}=n,i=e.length===1,r=e[0],s=e.length,o=a=>{const l=[];let u=0,h=0,p;for(let S=0;S<a.length;S++){let _=a[S];if(u===0){if(_===r&&(i||a.slice(S,S+s)===e)){l.push(a.slice(h,S)),h=S+s;continue}if(_==="/"){p=S;continue}}_==="["?u++:_==="]"&&u--}const m=l.length===0?a:a.substring(h),y=m.startsWith(NF),b=y?m.substring(1):m,x=p&&p>h?p-h:void 0;return{modifiers:l,hasImportantModifier:y,baseClassName:b,maybePostfixModifierPosition:x}};return t?a=>t({className:a,parseClassName:o}):o},bY=n=>{if(n.length<=1)return n;const e=[];let t=[];return n.forEach(i=>{i[0]==="["?(e.push(...t.sort(),i),t=[]):t.push(i)}),e.push(...t.sort()),e},_Y=n=>({cache:vY(n.cacheSize),parseClassName:yY(n),...hY(n)}),xY=/\s+/,SY=(n,e)=>{const{parseClassName:t,getClassGroupId:i,getConflictingClassGroupIds:r}=e,s=[],o=n.trim().split(xY);let a="";for(let l=o.length-1;l>=0;l-=1){const u=o[l],{modifiers:h,hasImportantModifier:p,baseClassName:m,maybePostfixModifierPosition:y}=t(u);let b=!!y,x=i(b?m.substring(0,y):m);if(!x){if(!b){a=u+(a.length>0?" "+a:a);continue}if(x=i(m),!x){a=u+(a.length>0?" "+a:a);continue}b=!1}const S=bY(h).join(":"),_=p?S+NF:S,T=_+x;if(s.includes(T))continue;s.push(T);const A=r(x,b);for(let M=0;M<A.length;++M){const C=A[M];s.push(_+C)}a=u+(a.length>0?" "+a:a)}return a};function wY(){let n=0,e,t,i="";for(;n<arguments.length;)(e=arguments[n++])&&(t=UF(e))&&(i&&(i+=" "),i+=t);return i}const UF=n=>{if(typeof n=="string")return n;let e,t="";for(let i=0;i<n.length;i++)n[i]&&(e=UF(n[i]))&&(t&&(t+=" "),t+=e);return t};function EY(n,...e){let t,i,r,s=o;function o(l){const u=e.reduce((h,p)=>p(h),n());return t=_Y(u),i=t.cache.get,r=t.cache.set,s=a,a(l)}function a(l){const u=i(l);if(u)return u;const h=SY(l,t);return r(l,h),h}return function(){return s(wY.apply(null,arguments))}}const Vi=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},kF=/^\[(?:([a-z-]+):)?(.+)\]$/i,TY=/^\d+\/\d+$/,MY=new Set(["px","full","screen"]),AY=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,CY=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,RY=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,DY=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,OY=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ef=n=>o0(n)||MY.has(n)||TY.test(n),Ph=n=>F0(n,"length",FY),o0=n=>!!n&&!Number.isNaN(Number(n)),aA=n=>F0(n,"number",o0),Sy=n=>!!n&&Number.isInteger(Number(n)),LY=n=>n.endsWith("%")&&o0(n.slice(0,-1)),wn=n=>kF.test(n),Ih=n=>AY.test(n),PY=new Set(["length","size","percentage"]),IY=n=>F0(n,PY,zF),NY=n=>F0(n,"position",zF),UY=new Set(["image","url"]),kY=n=>F0(n,UY,VY),zY=n=>F0(n,"",BY),wy=()=>!0,F0=(n,e,t)=>{const i=kF.exec(n);return i?i[1]?typeof e=="string"?i[1]===e:e.has(i[1]):t(i[2]):!1},FY=n=>CY.test(n)&&!RY.test(n),zF=()=>!1,BY=n=>DY.test(n),VY=n=>OY.test(n),GY=()=>{const n=Vi("colors"),e=Vi("spacing"),t=Vi("blur"),i=Vi("brightness"),r=Vi("borderColor"),s=Vi("borderRadius"),o=Vi("borderSpacing"),a=Vi("borderWidth"),l=Vi("contrast"),u=Vi("grayscale"),h=Vi("hueRotate"),p=Vi("invert"),m=Vi("gap"),y=Vi("gradientColorStops"),b=Vi("gradientColorStopPositions"),x=Vi("inset"),S=Vi("margin"),_=Vi("opacity"),T=Vi("padding"),A=Vi("saturate"),M=Vi("scale"),C=Vi("sepia"),R=Vi("skew"),L=Vi("space"),I=Vi("translate"),P=()=>["auto","contain","none"],U=()=>["auto","hidden","clip","visible","scroll"],B=()=>["auto",wn,e],F=()=>[wn,e],z=()=>["",ef,Ph],W=()=>["auto",o0,wn],X=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],j=()=>["solid","dashed","dotted","double","none"],G=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],K=()=>["start","end","center","between","around","evenly","stretch"],J=()=>["","0",wn],ee=()=>["auto","avoid","all","avoid-page","page","left","right","column"],V=()=>[o0,wn];return{cacheSize:500,separator:":",theme:{colors:[wy],spacing:[ef,Ph],blur:["none","",Ih,wn],brightness:V(),borderColor:[n],borderRadius:["none","","full",Ih,wn],borderSpacing:F(),borderWidth:z(),contrast:V(),grayscale:J(),hueRotate:V(),invert:J(),gap:F(),gradientColorStops:[n],gradientColorStopPositions:[LY,Ph],inset:B(),margin:B(),opacity:V(),padding:F(),saturate:V(),scale:V(),sepia:J(),skew:V(),space:F(),translate:F()},classGroups:{aspect:[{aspect:["auto","square","video",wn]}],container:["container"],columns:[{columns:[Ih]}],"break-after":[{"break-after":ee()}],"break-before":[{"break-before":ee()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...X(),wn]}],overflow:[{overflow:U()}],"overflow-x":[{"overflow-x":U()}],"overflow-y":[{"overflow-y":U()}],overscroll:[{overscroll:P()}],"overscroll-x":[{"overscroll-x":P()}],"overscroll-y":[{"overscroll-y":P()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[x]}],"inset-x":[{"inset-x":[x]}],"inset-y":[{"inset-y":[x]}],start:[{start:[x]}],end:[{end:[x]}],top:[{top:[x]}],right:[{right:[x]}],bottom:[{bottom:[x]}],left:[{left:[x]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Sy,wn]}],basis:[{basis:B()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",wn]}],grow:[{grow:J()}],shrink:[{shrink:J()}],order:[{order:["first","last","none",Sy,wn]}],"grid-cols":[{"grid-cols":[wy]}],"col-start-end":[{col:["auto",{span:["full",Sy,wn]},wn]}],"col-start":[{"col-start":W()}],"col-end":[{"col-end":W()}],"grid-rows":[{"grid-rows":[wy]}],"row-start-end":[{row:["auto",{span:[Sy,wn]},wn]}],"row-start":[{"row-start":W()}],"row-end":[{"row-end":W()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",wn]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",wn]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...K()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...K(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...K(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[T]}],px:[{px:[T]}],py:[{py:[T]}],ps:[{ps:[T]}],pe:[{pe:[T]}],pt:[{pt:[T]}],pr:[{pr:[T]}],pb:[{pb:[T]}],pl:[{pl:[T]}],m:[{m:[S]}],mx:[{mx:[S]}],my:[{my:[S]}],ms:[{ms:[S]}],me:[{me:[S]}],mt:[{mt:[S]}],mr:[{mr:[S]}],mb:[{mb:[S]}],ml:[{ml:[S]}],"space-x":[{"space-x":[L]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[L]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",wn,e]}],"min-w":[{"min-w":[wn,e,"min","max","fit"]}],"max-w":[{"max-w":[wn,e,"none","full","min","max","fit","prose",{screen:[Ih]},Ih]}],h:[{h:[wn,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[wn,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[wn,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[wn,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Ih,Ph]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",aA]}],"font-family":[{font:[wy]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",wn]}],"line-clamp":[{"line-clamp":["none",o0,aA]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ef,wn]}],"list-image":[{"list-image":["none",wn]}],"list-style-type":[{list:["none","disc","decimal",wn]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[_]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[_]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...j(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",ef,Ph]}],"underline-offset":[{"underline-offset":["auto",ef,wn]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:F()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",wn]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",wn]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[_]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...X(),NY]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",IY]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},kY]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[b]}],"gradient-via-pos":[{via:[b]}],"gradient-to-pos":[{to:[b]}],"gradient-from":[{from:[y]}],"gradient-via":[{via:[y]}],"gradient-to":[{to:[y]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[_]}],"border-style":[{border:[...j(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[_]}],"divide-style":[{divide:j()}],"border-color":[{border:[r]}],"border-color-x":[{"border-x":[r]}],"border-color-y":[{"border-y":[r]}],"border-color-s":[{"border-s":[r]}],"border-color-e":[{"border-e":[r]}],"border-color-t":[{"border-t":[r]}],"border-color-r":[{"border-r":[r]}],"border-color-b":[{"border-b":[r]}],"border-color-l":[{"border-l":[r]}],"divide-color":[{divide:[r]}],"outline-style":[{outline:["",...j()]}],"outline-offset":[{"outline-offset":[ef,wn]}],"outline-w":[{outline:[ef,Ph]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:z()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[_]}],"ring-offset-w":[{"ring-offset":[ef,Ph]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",Ih,zY]}],"shadow-color":[{shadow:[wy]}],opacity:[{opacity:[_]}],"mix-blend":[{"mix-blend":[...G(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":G()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[i]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Ih,wn]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[p]}],saturate:[{saturate:[A]}],sepia:[{sepia:[C]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[i]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[p]}],"backdrop-opacity":[{"backdrop-opacity":[_]}],"backdrop-saturate":[{"backdrop-saturate":[A]}],"backdrop-sepia":[{"backdrop-sepia":[C]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",wn]}],duration:[{duration:V()}],ease:[{ease:["linear","in","out","in-out",wn]}],delay:[{delay:V()}],animate:[{animate:["none","spin","ping","pulse","bounce",wn]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[M]}],"scale-x":[{"scale-x":[M]}],"scale-y":[{"scale-y":[M]}],rotate:[{rotate:[Sy,wn]}],"translate-x":[{"translate-x":[I]}],"translate-y":[{"translate-y":[I]}],"skew-x":[{"skew-x":[R]}],"skew-y":[{"skew-y":[R]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",wn]}],accent:[{accent:["auto",n]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",wn]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":F()}],"scroll-mx":[{"scroll-mx":F()}],"scroll-my":[{"scroll-my":F()}],"scroll-ms":[{"scroll-ms":F()}],"scroll-me":[{"scroll-me":F()}],"scroll-mt":[{"scroll-mt":F()}],"scroll-mr":[{"scroll-mr":F()}],"scroll-mb":[{"scroll-mb":F()}],"scroll-ml":[{"scroll-ml":F()}],"scroll-p":[{"scroll-p":F()}],"scroll-px":[{"scroll-px":F()}],"scroll-py":[{"scroll-py":F()}],"scroll-ps":[{"scroll-ps":F()}],"scroll-pe":[{"scroll-pe":F()}],"scroll-pt":[{"scroll-pt":F()}],"scroll-pr":[{"scroll-pr":F()}],"scroll-pb":[{"scroll-pb":F()}],"scroll-pl":[{"scroll-pl":F()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",wn]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[ef,Ph,aA]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},pn=EY(GY);function Ra(n){const e=Object.prototype.toString.call(n);return n instanceof Date||typeof n=="object"&&e==="[object Date]"?new n.constructor(+n):typeof n=="number"||e==="[object Number]"||typeof n=="string"||e==="[object String]"?new Date(n):new Date(NaN)}function Ow(n,e){return n instanceof Date?new n.constructor(e):new Date(e)}function So(n,e){const t=Ra(n);return isNaN(e)?Ow(n,NaN):(e&&t.setDate(t.getDate()+e),t)}function Mf(n,e){const t=Ra(n);if(isNaN(e))return Ow(n,NaN);if(!e)return t;const i=t.getDate(),r=Ow(n,t.getTime());r.setMonth(t.getMonth()+e+1,0);const s=r.getDate();return i>=s?r:(t.setFullYear(r.getFullYear(),r.getMonth(),i),t)}let HY={};function FF(){return HY}function WD(n,e){const t=FF(),i=t.weekStartsOn??t.locale?.options?.weekStartsOn??0,r=Ra(n),s=r.getDay(),o=(s<i?7:0)+s-i;return r.setDate(r.getDate()-o),r.setHours(0,0,0,0),r}function iu(n){const e=Ra(n);return e.setHours(0,0,0,0),e}function zp(n,e){const t=e*7;return So(n,t)}function Fp(n,e){return Mf(n,e*12)}function ru(n){const e=Ra(n);return e.setHours(23,59,59,999),e}function XD(n){const e=Ra(n),t=e.getMonth();return e.setFullYear(e.getFullYear(),t+1,0),e.setHours(23,59,59,999),e}function qD(n){const e=Ra(n);return e.setDate(1),e.setHours(0,0,0,0),e}function BF(n){const e=Ra(n),t=e.getFullYear();return e.setFullYear(t+1,0,0),e.setHours(23,59,59,999),e}function VF(n){const e=Ra(n),t=Ow(n,0);return t.setFullYear(e.getFullYear(),0,1),t.setHours(0,0,0,0),t}function YD(n,e){const t=FF(),i=t.weekStartsOn??t.locale?.options?.weekStartsOn??0,r=Ra(n),s=r.getDay(),o=(s<i?-7:0)+6-(s-i);return r.setDate(r.getDate()+o),r.setHours(23,59,59,999),r}function tu(n,e){return So(n,-e)}function tf(n,e){const t=Ra(n);return t.setHours(e),t}function nf(n,e){const t=Ra(n);return t.setMinutes(e),t}function rf(n,e){const t=Ra(n);return t.setSeconds(e),t}function Lp(n,e){return Mf(n,-e)}function a0(n,e){return zp(n,-e)}function l0(n,e){return Fp(n,-e)}var lA={exports:{}},cA,sN;function jY(){if(sN)return cA;sN=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return cA=n,cA}var uA,oN;function WY(){if(oN)return uA;oN=1;var n=jY();function e(){}function t(){}return t.resetWarningCache=e,uA=function(){function i(o,a,l,u,h,p){if(p!==n){var m=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw m.name="Invariant Violation",m}}i.isRequired=i;function r(){return i}var s={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:r,element:i,elementType:i,instanceOf:r,node:i,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:t,resetWarningCache:e};return s.PropTypes=s,s},uA}var aN;function XY(){return aN||(aN=1,lA.exports=WY()()),lA.exports}function JR(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=Array(e);t<e;t++)i[t]=n[t];return i}function qY(n){if(Array.isArray(n))return JR(n)}function lN(n,e){var t=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!t){if(Array.isArray(n)||(t=GF(n))||e){t&&(n=t);var i=0,r=function(){};return{s:r,n:function(){return i>=n.length?{done:!0}:{done:!1,value:n[i++]}},e:function(l){throw l},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s,o=!0,a=!1;return{s:function(){t=t.call(n)},n:function(){var l=t.next();return o=l.done,l},e:function(l){a=!0,s=l},f:function(){try{o||t.return==null||t.return()}finally{if(a)throw s}}}}function YY(n,e,t){return(e=JY(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function $Y(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function ZY(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cN(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function uN(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?cN(Object(t),!0).forEach(function(i){YY(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):cN(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function KY(n){return qY(n)||$Y(n)||GF(n)||ZY()}function QY(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function JY(n){var e=QY(n,"string");return typeof e=="symbol"?e:e+""}function GF(n,e){if(n){if(typeof n=="string")return JR(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?JR(n,e):void 0}}var xf={getActiveTrap:function(e){return e?.length>0?e[e.length-1]:null},activateTrap:function(e,t){var i=xf.getActiveTrap(e);t!==i&&xf.pauseTrap(e);var r=e.indexOf(t);r===-1||e.splice(r,1),e.push(t)},deactivateTrap:function(e,t){var i=e.indexOf(t);i!==-1&&e.splice(i,1),xf.unpauseTrap(e)},pauseTrap:function(e){var t=xf.getActiveTrap(e);t?._setPausedState(!0)},unpauseTrap:function(e){var t=xf.getActiveTrap(e);t&&!t._isManuallyPaused()&&t._setPausedState(!1)}},e$=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},t$=function(e){return e?.key==="Escape"||e?.key==="Esc"||e?.keyCode===27},Eb=function(e){return e?.key==="Tab"||e?.keyCode===9},n$=function(e){return Eb(e)&&!e.shiftKey},i$=function(e){return Eb(e)&&e.shiftKey},fN=function(e){return setTimeout(e,0)},Ey=function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];return typeof e=="function"?e.apply(void 0,i):e},A1=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},r$=[],s$=function(e,t){var i=t?.document||document,r=t?.trapStack||r$,s=uN({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isolateSubtrees:!1,isKeyForward:n$,isKeyBackward:i$},t),o={containers:[],containerGroups:[],tabbableGroups:[],adjacentElements:new Set,alreadySilent:new Set,nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,manuallyPaused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},a,l=function(W,X,j){return W&&W[X]!==void 0?W[X]:s[j||X]},u=function(W,X){var j=typeof X?.composedPath=="function"?X.composedPath():void 0;return o.containerGroups.findIndex(function(G){var K=G.container,J=G.tabbableNodes;return K.contains(W)||j?.includes(K)||J.find(function(ee){return ee===W})})},h=function(W){var X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},j=X.hasFallback,G=j===void 0?!1:j,K=X.params,J=K===void 0?[]:K,ee=s[W];if(typeof ee=="function"&&(ee=ee.apply(void 0,KY(J))),ee===!0&&(ee=void 0),!ee){if(ee===void 0||ee===!1)return ee;throw new Error("`".concat(W,"` was specified but was not a node, or did not return a node"))}var V=ee;if(typeof ee=="string"){try{V=i.querySelector(ee)}catch(Y){throw new Error("`".concat(W,'` appears to be an invalid selector; error="').concat(Y.message,'"'))}if(!V&&!G)throw new Error("`".concat(W,"` as selector refers to no known node"))}return V},p=function(){var W=h("initialFocus",{hasFallback:!0});if(W===!1)return!1;if(W===void 0||W&&!JS(W,s.tabbableOptions))if(u(i.activeElement)>=0)W=i.activeElement;else{var X=o.tabbableGroups[0],j=X&&X.firstTabbableNode;W=j||h("fallbackFocus")}else W===null&&(W=h("fallbackFocus"));if(!W)throw new Error("Your focus-trap needs to have at least one focusable element");return W},m=function(){if(o.containerGroups=o.containers.map(function(W){var X=EF(W,s.tabbableOptions),j=TF(W,s.tabbableOptions),G=X.length>0?X[0]:void 0,K=X.length>0?X[X.length-1]:void 0,J=j.find(function(Y){return Sp(Y)}),ee=j.slice().reverse().find(function(Y){return Sp(Y)}),V=!!X.find(function(Y){return $h(Y)>0});return{container:W,tabbableNodes:X,focusableNodes:j,posTabIndexesFound:V,firstTabbableNode:G,lastTabbableNode:K,firstDomTabbableNode:J,lastDomTabbableNode:ee,nextTabbableNode:function(Q){var re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,ne=X.indexOf(Q);return ne<0?re?j.slice(j.indexOf(Q)+1).find(function(le){return Sp(le)}):j.slice(0,j.indexOf(Q)).reverse().find(function(le){return Sp(le)}):X[ne+(re?1:-1)]}}}),o.tabbableGroups=o.containerGroups.filter(function(W){return W.tabbableNodes.length>0}),o.tabbableGroups.length<=0&&!h("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(o.containerGroups.find(function(W){return W.posTabIndexesFound})&&o.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},y=function(W){var X=W.activeElement;if(X)return X.shadowRoot&&X.shadowRoot.activeElement!==null?y(X.shadowRoot):X},b=function(W){if(W!==!1&&W!==y(document)){if(!W||!W.focus){b(p());return}W.focus({preventScroll:!!s.preventScroll}),o.mostRecentlyFocusedNode=W,e$(W)&&W.select()}},x=function(W){var X=h("setReturnFocus",{params:[W]});return X||(X===!1?!1:W)},S=function(W){var X=W.target,j=W.event,G=W.isBackward,K=G===void 0?!1:G;X=X||A1(j),m();var J=null;if(o.tabbableGroups.length>0){var ee=u(X,j),V=ee>=0?o.containerGroups[ee]:void 0;if(ee<0)K?J=o.tabbableGroups[o.tabbableGroups.length-1].lastTabbableNode:J=o.tabbableGroups[0].firstTabbableNode;else if(K){var Y=o.tabbableGroups.findIndex(function(pe){var Ee=pe.firstTabbableNode;return X===Ee});if(Y<0&&(V.container===X||JS(X,s.tabbableOptions)&&!Sp(X,s.tabbableOptions)&&!V.nextTabbableNode(X,!1))&&(Y=ee),Y>=0){var Q=Y===0?o.tabbableGroups.length-1:Y-1,re=o.tabbableGroups[Q];J=$h(X)>=0?re.lastTabbableNode:re.lastDomTabbableNode}else Eb(j)||(J=V.nextTabbableNode(X,!1))}else{var ne=o.tabbableGroups.findIndex(function(pe){var Ee=pe.lastTabbableNode;return X===Ee});if(ne<0&&(V.container===X||JS(X,s.tabbableOptions)&&!Sp(X,s.tabbableOptions)&&!V.nextTabbableNode(X))&&(ne=ee),ne>=0){var le=ne===o.tabbableGroups.length-1?0:ne+1,fe=o.tabbableGroups[le];J=$h(X)>=0?fe.firstTabbableNode:fe.firstDomTabbableNode}else Eb(j)||(J=V.nextTabbableNode(X))}}else J=h("fallbackFocus");return J},_=function(W){var X=A1(W);if(!(u(X,W)>=0)){if(Ey(s.clickOutsideDeactivates,W)){a.deactivate({returnFocus:s.returnFocusOnDeactivate});return}Ey(s.allowOutsideClick,W)||W.preventDefault()}},T=function(W){var X=A1(W),j=u(X,W)>=0;if(j||X instanceof Document)j&&(o.mostRecentlyFocusedNode=X);else{W.stopImmediatePropagation();var G,K=!0;if(o.mostRecentlyFocusedNode)if($h(o.mostRecentlyFocusedNode)>0){var J=u(o.mostRecentlyFocusedNode),ee=o.containerGroups[J].tabbableNodes;if(ee.length>0){var V=ee.findIndex(function(Y){return Y===o.mostRecentlyFocusedNode});V>=0&&(s.isKeyForward(o.recentNavEvent)?V+1<ee.length&&(G=ee[V+1],K=!1):V-1>=0&&(G=ee[V-1],K=!1))}}else o.containerGroups.some(function(Y){return Y.tabbableNodes.some(function(Q){return $h(Q)>0})})||(K=!1);else K=!1;K&&(G=S({target:o.mostRecentlyFocusedNode,isBackward:s.isKeyBackward(o.recentNavEvent)})),b(G||o.mostRecentlyFocusedNode||p())}o.recentNavEvent=void 0},A=function(W){var X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;o.recentNavEvent=W;var j=S({event:W,isBackward:X});j&&(Eb(W)&&W.preventDefault(),b(j))},M=function(W){(s.isKeyForward(W)||s.isKeyBackward(W))&&A(W,s.isKeyBackward(W))},C=function(W){t$(W)&&Ey(s.escapeDeactivates,W)!==!1&&(W.preventDefault(),a.deactivate())},R=function(W){var X=A1(W);u(X,W)>=0||Ey(s.clickOutsideDeactivates,W)||Ey(s.allowOutsideClick,W)||(W.preventDefault(),W.stopImmediatePropagation())},L=function(){if(o.active)return xf.activateTrap(r,a),o.delayInitialFocusTimer=s.delayInitialFocus?fN(function(){b(p())}):b(p()),i.addEventListener("focusin",T,!0),i.addEventListener("mousedown",_,{capture:!0,passive:!1}),i.addEventListener("touchstart",_,{capture:!0,passive:!1}),i.addEventListener("click",R,{capture:!0,passive:!1}),i.addEventListener("keydown",M,{capture:!0,passive:!1}),i.addEventListener("keydown",C),a},I=function(W){o.active&&!o.paused&&a._setSubtreeIsolation(!1),o.adjacentElements.clear(),o.alreadySilent.clear();var X=new Set,j=new Set,G=lN(W),K;try{for(G.s();!(K=G.n()).done;){var J=K.value;X.add(J);for(var ee=typeof ShadowRoot<"u"&&J.getRootNode()instanceof ShadowRoot,V=J;V;){X.add(V);var Y=V.parentElement,Q=[];Y?Q=Y.children:!Y&&ee&&(Q=V.getRootNode().children,Y=V.getRootNode().host,ee=typeof ShadowRoot<"u"&&Y.getRootNode()instanceof ShadowRoot);var re=lN(Q),ne;try{for(re.s();!(ne=re.n()).done;){var le=ne.value;j.add(le)}}catch(fe){re.e(fe)}finally{re.f()}V=Y}}}catch(fe){G.e(fe)}finally{G.f()}X.forEach(function(fe){j.delete(fe)}),o.adjacentElements=j},P=function(){if(o.active)return i.removeEventListener("focusin",T,!0),i.removeEventListener("mousedown",_,!0),i.removeEventListener("touchstart",_,!0),i.removeEventListener("click",R,!0),i.removeEventListener("keydown",M,!0),i.removeEventListener("keydown",C),a},U=function(W){var X=W.some(function(j){var G=Array.from(j.removedNodes);return G.some(function(K){return K===o.mostRecentlyFocusedNode})});X&&b(p())},B=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(U):void 0,F=function(){B&&(B.disconnect(),o.active&&!o.paused&&o.containers.map(function(W){B.observe(W,{subtree:!0,childList:!0})}))};return a={get active(){return o.active},get paused(){return o.paused},activate:function(W){if(o.active)return this;var X=l(W,"onActivate"),j=l(W,"onPostActivate"),G=l(W,"checkCanFocusTrap"),K=xf.getActiveTrap(r),J=!1;if(K&&!K.paused){var ee;(ee=K._setSubtreeIsolation)===null||ee===void 0||ee.call(K,!1),J=!0}try{G||m(),o.active=!0,o.paused=!1,o.nodeFocusedBeforeActivation=y(i),X?.();var V=function(){G&&m(),L(),F(),s.isolateSubtrees&&a._setSubtreeIsolation(!0),j?.()};if(G)return G(o.containers.concat()).then(V,V),this;V()}catch(Q){if(K===xf.getActiveTrap(r)&&J){var Y;(Y=K._setSubtreeIsolation)===null||Y===void 0||Y.call(K,!0)}throw Q}return this},deactivate:function(W){if(!o.active)return this;var X=uN({onDeactivate:s.onDeactivate,onPostDeactivate:s.onPostDeactivate,checkCanReturnFocus:s.checkCanReturnFocus},W);clearTimeout(o.delayInitialFocusTimer),o.delayInitialFocusTimer=void 0,o.paused||a._setSubtreeIsolation(!1),o.alreadySilent.clear(),P(),o.active=!1,o.paused=!1,F(),xf.deactivateTrap(r,a);var j=l(X,"onDeactivate"),G=l(X,"onPostDeactivate"),K=l(X,"checkCanReturnFocus"),J=l(X,"returnFocus","returnFocusOnDeactivate");j?.();var ee=function(){fN(function(){J&&b(x(o.nodeFocusedBeforeActivation)),G?.()})};return J&&K?(K(x(o.nodeFocusedBeforeActivation)).then(ee,ee),this):(ee(),this)},pause:function(W){return o.active?(o.manuallyPaused=!0,this._setPausedState(!0,W)):this},unpause:function(W){return o.active?(o.manuallyPaused=!1,r[r.length-1]!==this?this:this._setPausedState(!1,W)):this},updateContainerElements:function(W){var X=[].concat(W).filter(Boolean);return o.containers=X.map(function(j){return typeof j=="string"?i.querySelector(j):j}),s.isolateSubtrees&&I(o.containers),o.active&&(m(),s.isolateSubtrees&&!o.paused&&a._setSubtreeIsolation(!0)),F(),this}},Object.defineProperties(a,{_isManuallyPaused:{value:function(){return o.manuallyPaused}},_setPausedState:{value:function(W,X){if(o.paused===W)return this;if(o.paused=W,W){var j=l(X,"onPause"),G=l(X,"onPostPause");j?.(),P(),F(),a._setSubtreeIsolation(!1),G?.()}else{var K=l(X,"onUnpause"),J=l(X,"onPostUnpause");K?.(),a._setSubtreeIsolation(!0),m(),L(),F(),J?.()}return this}},_setSubtreeIsolation:{value:function(W){s.isolateSubtrees&&o.adjacentElements.forEach(function(X){var j;W?s.isolateSubtrees==="aria-hidden"?((X.ariaHidden==="true"||((j=X.getAttribute("aria-hidden"))===null||j===void 0?void 0:j.toLowerCase())==="true")&&o.alreadySilent.add(X),X.setAttribute("aria-hidden","true")):((X.inert||X.hasAttribute("inert"))&&o.alreadySilent.add(X),X.setAttribute("inert",!0)):o.alreadySilent.has(X)||(s.isolateSubtrees==="aria-hidden"?X.removeAttribute("aria-hidden"):X.removeAttribute("inert"))})}}}),a.updateContainerElements(e),a};const o$=Object.freeze(Object.defineProperty({__proto__:null,createFocusTrap:s$},Symbol.toStringTag,{value:"Module"})),a$=lD(o$),l$=lD(gq);var fA,hN;function c$(){if(hN)return fA;hN=1;function n(R){"@babel/helpers - typeof";return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(L){return typeof L}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},n(R)}function e(R,L){if(!(R instanceof L))throw new TypeError("Cannot call a class as a function")}function t(R,L){for(var I=0;I<L.length;I++){var P=L[I];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(R,m(P.key),P)}}function i(R,L,I){return L&&t(R.prototype,L),Object.defineProperty(R,"prototype",{writable:!1}),R}function r(R,L,I){return L=l(L),s(R,a()?Reflect.construct(L,I||[],l(R).constructor):L.apply(R,I))}function s(R,L){if(L&&(n(L)=="object"||typeof L=="function"))return L;if(L!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return o(R)}function o(R){if(R===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R}function a(){try{var R=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(a=function(){return!!R})()}function l(R){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(L){return L.__proto__||Object.getPrototypeOf(L)},l(R)}function u(R,L){if(typeof L!="function"&&L!==null)throw new TypeError("Super expression must either be null or a function");R.prototype=Object.create(L&&L.prototype,{constructor:{value:R,writable:!0,configurable:!0}}),Object.defineProperty(R,"prototype",{writable:!1}),L&&h(R,L)}function h(R,L){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(I,P){return I.__proto__=P,I},h(R,L)}function p(R,L,I){return(L=m(L))in R?Object.defineProperty(R,L,{value:I,enumerable:!0,configurable:!0,writable:!0}):R[L]=I,R}function m(R){var L=y(R,"string");return n(L)=="symbol"?L:L+""}function y(R,L){if(n(R)!="object"||!R)return R;var I=R[Symbol.toPrimitive];if(I!==void 0){var P=I.call(R,L);if(n(P)!="object")return P;throw new TypeError("@@toPrimitive must return a primitive value.")}return(L==="string"?String:Number)(R)}var b=Gf(),x=XY(),S=a$,_=S.createFocusTrap,T=l$,A=T.isFocusable,M=(function(R){function L(I){var P;e(this,L),P=r(this,L,[I]),p(P,"getNodeForOption",function(F){var z,W=(z=this.internalOptions[F])!==null&&z!==void 0?z:this.originalOptions[F];if(typeof W=="function"){for(var X=arguments.length,j=new Array(X>1?X-1:0),G=1;G<X;G++)j[G-1]=arguments[G];W=W.apply(void 0,j)}if(W===!0&&(W=void 0),!W){if(W===void 0||W===!1)return W;throw new Error("`".concat(F,"` was specified but was not a node, or did not return a node"))}var K=W;if(typeof W=="string"){var J;if(K=(J=this.getDocument())===null||J===void 0?void 0:J.querySelector(W),!K)throw new Error("`".concat(F,"` as selector refers to no known node"))}return K}),P.handleDeactivate=P.handleDeactivate.bind(P),P.handlePostDeactivate=P.handlePostDeactivate.bind(P),P.handleClickOutsideDeactivates=P.handleClickOutsideDeactivates.bind(P),P.internalOptions={returnFocusOnDeactivate:!1,checkCanReturnFocus:null,onDeactivate:P.handleDeactivate,onPostDeactivate:P.handlePostDeactivate,clickOutsideDeactivates:P.handleClickOutsideDeactivates},P.originalOptions={returnFocusOnDeactivate:!0,onDeactivate:null,onPostDeactivate:null,checkCanReturnFocus:null,clickOutsideDeactivates:!1};var U=I.focusTrapOptions;for(var B in U)if(Object.prototype.hasOwnProperty.call(U,B)){if(B==="returnFocusOnDeactivate"||B==="onDeactivate"||B==="onPostDeactivate"||B==="checkCanReturnFocus"||B==="clickOutsideDeactivates"){P.originalOptions[B]=U[B];continue}P.internalOptions[B]=U[B]}return P.outsideClick=null,P.focusTrapElements=I.containerElements||[],P.updatePreviousElement(),P}return u(L,R),i(L,[{key:"getDocument",value:function(){return this.props.focusTrapOptions.document||(typeof document<"u"?document:void 0)}},{key:"getReturnFocusNode",value:function(){var P=this.getNodeForOption("setReturnFocus",this.previouslyFocusedElement);return P||(P===!1?!1:this.previouslyFocusedElement)}},{key:"updatePreviousElement",value:function(){var P=this.getDocument();P&&(this.previouslyFocusedElement=P.activeElement)}},{key:"deactivateTrap",value:function(){!this.focusTrap||!this.focusTrap.active||this.focusTrap.deactivate({returnFocus:!1,checkCanReturnFocus:null,onDeactivate:this.originalOptions.onDeactivate})}},{key:"handleClickOutsideDeactivates",value:function(P){var U=typeof this.originalOptions.clickOutsideDeactivates=="function"?this.originalOptions.clickOutsideDeactivates.call(null,P):this.originalOptions.clickOutsideDeactivates;return U&&(this.outsideClick={target:P.target,allowDeactivation:U}),U}},{key:"handleDeactivate",value:function(){this.originalOptions.onDeactivate&&this.originalOptions.onDeactivate.call(null),this.deactivateTrap()}},{key:"handlePostDeactivate",value:function(){var P=this,U=function(){var F=P.getReturnFocusNode(),z=!!(P.originalOptions.returnFocusOnDeactivate&&F!==null&&F!==void 0&&F.focus&&(!P.outsideClick||P.outsideClick.allowDeactivation&&!A(P.outsideClick.target,P.internalOptions.tabbableOptions))),W=P.internalOptions.preventScroll,X=W===void 0?!1:W;z&&F.focus({preventScroll:X}),P.originalOptions.onPostDeactivate&&P.originalOptions.onPostDeactivate.call(null),P.outsideClick=null};this.originalOptions.checkCanReturnFocus?this.originalOptions.checkCanReturnFocus.call(null,this.getReturnFocusNode()).then(U,U):U()}},{key:"setupFocusTrap",value:function(){if(this.focusTrap)this.props.active&&!this.focusTrap.active&&(this.focusTrap.activate(),this.props.paused&&this.focusTrap.pause());else{var P=this.focusTrapElements.some(Boolean);P&&(this.focusTrap=this.props._createFocusTrap(this.focusTrapElements,this.internalOptions),this.props.active&&this.focusTrap.activate(),this.props.paused&&this.focusTrap.pause())}}},{key:"componentDidMount",value:function(){this.props.active&&this.setupFocusTrap()}},{key:"componentDidUpdate",value:function(P){if(this.focusTrap){P.containerElements!==this.props.containerElements&&this.focusTrap.updateContainerElements(this.props.containerElements);var U=!P.active&&this.props.active,B=P.active&&!this.props.active,F=!P.paused&&this.props.paused,z=P.paused&&!this.props.paused;if(U&&(this.updatePreviousElement(),this.focusTrap.activate()),B){this.deactivateTrap();return}F&&this.focusTrap.pause(),z&&this.focusTrap.unpause()}else P.containerElements!==this.props.containerElements&&(this.focusTrapElements=this.props.containerElements),this.props.active&&(this.updatePreviousElement(),this.setupFocusTrap())}},{key:"componentWillUnmount",value:function(){this.deactivateTrap()}},{key:"render",value:function(){var P=this,U=this.props.children?b.Children.only(this.props.children):void 0;if(U){if(U.type&&U.type===b.Fragment)throw new Error("A focus-trap cannot use a Fragment as its child container. Try replacing it with a <div> element.");var B=function(W){var X=P.props.containerElements;U&&(typeof U.ref=="function"?U.ref(W):U.ref&&(U.ref.current=W)),P.focusTrapElements=X||[W]},F=b.cloneElement(U,{ref:B});return F}return null}}])})(b.Component),C=typeof Element>"u"?Function:Element;return M.propTypes={active:x.bool,paused:x.bool,focusTrapOptions:x.shape({document:x.object,onActivate:x.func,onPostActivate:x.func,checkCanFocusTrap:x.func,onPause:x.func,onPostPause:x.func,onUnpause:x.func,onPostUnpause:x.func,onDeactivate:x.func,onPostDeactivate:x.func,checkCanReturnFocus:x.func,initialFocus:x.oneOfType([x.instanceOf(C),x.string,x.bool,x.func]),fallbackFocus:x.oneOfType([x.instanceOf(C),x.string,x.func]),escapeDeactivates:x.oneOfType([x.bool,x.func]),clickOutsideDeactivates:x.oneOfType([x.bool,x.func]),returnFocusOnDeactivate:x.bool,setReturnFocus:x.oneOfType([x.instanceOf(C),x.string,x.bool,x.func]),allowOutsideClick:x.oneOfType([x.bool,x.func]),preventScroll:x.bool,tabbableOptions:x.shape({displayCheck:x.oneOf(["full","legacy-full","non-zero-area","none"]),getShadowRoot:x.oneOfType([x.bool,x.func])}),trapStack:x.array,isKeyForward:x.func,isKeyBackward:x.func}),containerElements:x.arrayOf(x.instanceOf(C)),children:x.oneOfType([x.element,x.instanceOf(C)])},M.defaultProps={active:!0,paused:!1,focusTrapOptions:{},_createFocusTrap:_},fA=M,fA}var u$=c$();const f$=Do(u$);var C1={exports:{}},dN;function h$(){return dN||(dN=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(i){for(var r=i.toUpperCase().split(/[\s+-]/),s=[],o="",a=0;a<r.length&&t.test(r[a]);a++)s.push(r[a]);if(s.length>=1&&(o+=s[0].substr(0,1)),s.length>=2){for(var l=!1,u=1;u<s.length;u++)if(!s[u].match(/.\./)){l=!0,o+=s[u].substr(0,1);break}l||(o+=s[1].substr(0,1))}return o};var t=/^[a-z\u00C0-\u017F]/i;n.exports=e.default})(C1,C1.exports)),C1.exports}var d$=h$();const p$=Do(d$);function m$(n,e){let t=()=>(n.next()>>>0)/4294967296;return t.double=()=>{let i,r,s;do i=n.next()>>>11,r=(n.next()>>>0)/4294967296,s=(i+r)/(1<<21);while(s===0);return s},t.int32=()=>n.next()|0,t.quick=t,t}function g$(n,e){let t=new v$(n);return m$(t)}var v$=class{constructor(e){e==null&&(e=+new Date);let t="";this.x=0,this.y=0,this.z=0,this.w=0,e===(e|0)?this.x=e:t+=e;for(let i=0;i<t.length+64;i++)this.x^=t.charCodeAt(i)|0,this.next()}next(){let{x:e,y:t,z:i,w:r}=this,s=e^e<<11;return this.x=t,this.y=i,this.z=r,this.w=r^(r>>>19^s^s>>>8)}copy(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}},y$=n=>g$(n)(),hA={saturation:75,lightness:50,alpha:100},b$=1.618033988749895;function _$(n,e={}){let{saturation:t,lightness:i,alpha:r}=x$(e),s=e.algorithm||y$,o=S$(n,s);return`hsl(
    ${Math.floor(o*360)}
    , ${t}%, ${i}%, ${r}%
  )`}function x$(n={}){let{s:e,l:t,a:i,saturation:r=e??hA.saturation,lightness:s=t??hA.lightness,alpha:o=i??hA.alpha}=n;return{saturation:r,lightness:s,alpha:o}}function S$(n,e){return(e(n)+1/b$)%1}var Ty={exports:{}},pN;function w$(){if(pN)return Ty.exports;pN=1;var n={ellipse:"",chars:[" ","-"],max:140,truncate:!0};function e(i,r,s,o){if(i<=r)return i;if(r<2)return i.slice(0,r-s.length)+s;for(var a=r-s.length,l=Math.floor(a/2),u=l,h=i.length-l,p=0;p<l;p++){var m=i.charAt(p),y=i.length-p,b=i.charAt(y);o.indexOf(m)!==-1&&(u=p),o.indexOf(b)!==-1&&(h=y)}return i.slice(0,u)+s+i.slice(h)}function t(i,r,s,o,a){if(i.length<=r)return i;for(var l=r-s.length,u=l,h=0;h<=l;h++){var p=i.charAt(h);o.indexOf(p)!==-1&&(u=h)}return!a&&u==l?"":i.slice(0,u)+s}return Ty.exports=function(i,r,s){if(typeof i!="string"||i.length===0||r===0)return"";s=s||{};for(var o in n)(s[o]===null||typeof s[o]>"u")&&(s[o]=n[o]);return s.max=r||s.max,s.truncate=="middle"?e(i,s.max,s.ellipse,s.chars):t(i,s.max,s.ellipse,s.chars,s.truncate)},Ty.exports.ellipsizeMiddle=e,Ty.exports.ellipsize=t,Ty.exports}w$();var HF="__0_1_2_3_4_5_6_7_8_9_a_b_c_d_e_f_g_h_i_j_k_l_m_n_o_p_q_r_s_t_u_v_w_x_y_z_ _`_'_\"_~_!_@_#_$_%_^_&_*_(_)_._-_+_=_[_]_{_}_<_>_,_/_?_;_:_\\_|_capslock_numlock_enter_tab_arrowdown_arrowleft_arrowright_arrowup_end_home_pagedown_pageup_backspace_delete_insert_escape_f1_f2_f3_f4_f5_f6_f7_f8_f9_f10_f11_f12_f13_f14_f15_f16_f17_f18_f19_f20_f21_f22_f23".split("_");HF[1]="_";for(let[n,e]of HF.entries());var dA={exports:{}};var mN;function E$(){return mN||(mN=1,(function(n){(function(){var e={}.hasOwnProperty;function t(){for(var s="",o=0;o<arguments.length;o++){var a=arguments[o];a&&(s=r(s,i(a)))}return s}function i(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return t.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var o="";for(var a in s)e.call(s,a)&&s[a]&&(o=r(o,a));return o}function r(s,o){return o?s?s+" "+o:s+o:s}n.exports?(t.default=t,n.exports=t):window.classNames=t})()})(dA)),dA.exports}var T$=E$();const jF=Do(T$);var pA={exports:{}},gN;function M$(){return gN||(gN=1,(function(n){n.exports=(function(e){var t={};function i(r){if(t[r])return t[r].exports;var s=t[r]={exports:{},id:r,loaded:!1};return e[r].call(s.exports,s,s.exports,i),s.loaded=!0,s.exports}return i.m=e,i.c=t,i.p="",i(0)})([(function(e,t,i){e.exports=i(1)}),(function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});function r(a){return a&&a.__esModule?a:{default:a}}var s=i(2),o=r(s);t.default=o.default,e.exports=t.default}),(function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(b){for(var x=1;x<arguments.length;x++){var S=arguments[x];for(var _ in S)Object.prototype.hasOwnProperty.call(S,_)&&(b[_]=S[_])}return b};t.default=y;function s(b){return b&&b.__esModule?b:{default:b}}function o(b,x){var S={};for(var _ in b)x.indexOf(_)>=0||Object.prototype.hasOwnProperty.call(b,_)&&(S[_]=b[_]);return S}var a=i(3),l=i(4),u=s(l),h=i(14),p=i(15),m=s(p);y.propTypes={activeClassName:u.default.string,activeIndex:u.default.number,activeStyle:u.default.object,autoEscape:u.default.bool,className:u.default.string,findChunks:u.default.func,highlightClassName:u.default.oneOfType([u.default.object,u.default.string]),highlightStyle:u.default.object,highlightTag:u.default.oneOfType([u.default.node,u.default.func,u.default.string]),sanitize:u.default.func,searchWords:u.default.arrayOf(u.default.oneOfType([u.default.string,u.default.instanceOf(RegExp)])).isRequired,textToHighlight:u.default.string.isRequired,unhighlightTag:u.default.oneOfType([u.default.node,u.default.func,u.default.string]),unhighlightClassName:u.default.string,unhighlightStyle:u.default.object};function y(b){var x=b.activeClassName,S=x===void 0?"":x,_=b.activeIndex,T=_===void 0?-1:_,A=b.activeStyle,M=b.autoEscape,C=b.caseSensitive,R=C===void 0?!1:C,L=b.className,I=b.findChunks,P=b.highlightClassName,U=P===void 0?"":P,B=b.highlightStyle,F=B===void 0?{}:B,z=b.highlightTag,W=z===void 0?"mark":z,X=b.sanitize,j=b.searchWords,G=b.textToHighlight,K=b.unhighlightTag,J=K===void 0?"span":K,ee=b.unhighlightClassName,V=ee===void 0?"":ee,Y=b.unhighlightStyle,Q=o(b,["activeClassName","activeIndex","activeStyle","autoEscape","caseSensitive","className","findChunks","highlightClassName","highlightStyle","highlightTag","sanitize","searchWords","textToHighlight","unhighlightTag","unhighlightClassName","unhighlightStyle"]),re=(0,a.findAll)({autoEscape:M,caseSensitive:R,findChunks:I,sanitize:X,searchWords:j,textToHighlight:G}),ne=W,le=-1,fe="",pe=void 0,Ee=function(ge){var oe={};for(var me in ge)oe[me.toLowerCase()]=ge[me];return oe},Te=(0,m.default)(Ee);return(0,h.createElement)("span",r({className:L},Q,{children:re.map(function(xe,ge){var oe=G.substr(xe.start,xe.end-xe.start);if(xe.highlight){le++;var me=void 0;typeof U=="object"?R?me=U[oe]:(U=Te(U),me=U[oe.toLowerCase()]):me=U;var ve=le===+T;fe=me+" "+(ve?S:""),pe=ve===!0&&A!=null?Object.assign({},F,A):F;var he={children:oe,className:fe,key:ge,style:pe};return typeof ne!="string"&&(he.highlightIndex=le),(0,h.createElement)(ne,he)}else return(0,h.createElement)(J,{children:oe,className:V,key:ge,style:Y})})}))}e.exports=t.default}),(function(e,t){e.exports=(function(i){var r={};function s(o){if(r[o])return r[o].exports;var a=r[o]={exports:{},id:o,loaded:!1};return i[o].call(a.exports,a,a.exports,s),a.loaded=!0,a.exports}return s.m=i,s.c=r,s.p="",s(0)})([(function(i,r,s){i.exports=s(1)}),(function(i,r,s){Object.defineProperty(r,"__esModule",{value:!0});var o=s(2);Object.defineProperty(r,"combineChunks",{enumerable:!0,get:function(){return o.combineChunks}}),Object.defineProperty(r,"fillInChunks",{enumerable:!0,get:function(){return o.fillInChunks}}),Object.defineProperty(r,"findAll",{enumerable:!0,get:function(){return o.findAll}}),Object.defineProperty(r,"findChunks",{enumerable:!0,get:function(){return o.findChunks}})}),(function(i,r){Object.defineProperty(r,"__esModule",{value:!0}),r.findAll=function(p){var m=p.autoEscape,y=p.caseSensitive,b=y===void 0?!1:y,x=p.findChunks,S=x===void 0?o:x,_=p.sanitize,T=p.searchWords,A=p.textToHighlight;return a({chunksToHighlight:s({chunks:S({autoEscape:m,caseSensitive:b,sanitize:_,searchWords:T,textToHighlight:A})}),totalLength:A?A.length:0})};var s=r.combineChunks=function(p){var m=p.chunks;return m=m.sort(function(y,b){return y.start-b.start}).reduce(function(y,b){if(y.length===0)return[b];var x=y.pop();if(b.start<=x.end){var S=Math.max(x.end,b.end);y.push({start:x.start,end:S})}else y.push(x,b);return y},[]),m},o=function(p){var m=p.autoEscape,y=p.caseSensitive,b=p.sanitize,x=b===void 0?l:b,S=p.searchWords,_=p.textToHighlight;return _=x(_),S.filter(function(T){return T}).reduce(function(T,A){A=x(A),m&&(A=u(A));for(var M=new RegExp(A,y?"g":"gi"),C=void 0;C=M.exec(_);){var R=C.index,L=M.lastIndex;L>R&&T.push({start:R,end:L}),C.index==M.lastIndex&&M.lastIndex++}return T},[])};r.findChunks=o;var a=r.fillInChunks=function(p){var m=p.chunksToHighlight,y=p.totalLength,b=[],x=function(T,A,M){A-T>0&&b.push({start:T,end:A,highlight:M})};if(m.length===0)x(0,y,!1);else{var S=0;m.forEach(function(_){x(S,_.start,!1),x(_.start,_.end,!0),S=_.end}),x(S,y,!1)}return b};function l(h){return h}function u(h){return h.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}})])}),(function(e,t,i){(function(r){if(r.env.NODE_ENV!=="production"){var s=typeof Symbol=="function"&&Symbol.for&&Symbol.for("react.element")||60103,o=function(l){return typeof l=="object"&&l!==null&&l.$$typeof===s},a=!0;e.exports=i(6)(o,a)}else e.exports=i(13)()}).call(t,i(5))}),(function(e,t){var i=e.exports={},r,s;function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?r=setTimeout:r=o}catch{r=o}try{typeof clearTimeout=="function"?s=clearTimeout:s=a}catch{s=a}})();function l(T){if(r===setTimeout)return setTimeout(T,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(T,0);try{return r(T,0)}catch{try{return r.call(null,T,0)}catch{return r.call(this,T,0)}}}function u(T){if(s===clearTimeout)return clearTimeout(T);if((s===a||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(T);try{return s(T)}catch{try{return s.call(null,T)}catch{return s.call(this,T)}}}var h=[],p=!1,m,y=-1;function b(){!p||!m||(p=!1,m.length?h=m.concat(h):y=-1,h.length&&x())}function x(){if(!p){var T=l(b);p=!0;for(var A=h.length;A;){for(m=h,h=[];++y<A;)m&&m[y].run();y=-1,A=h.length}m=null,p=!1,u(T)}}i.nextTick=function(T){var A=new Array(arguments.length-1);if(arguments.length>1)for(var M=1;M<arguments.length;M++)A[M-1]=arguments[M];h.push(new S(T,A)),h.length===1&&!p&&l(x)};function S(T,A){this.fun=T,this.array=A}S.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={};function _(){}i.on=_,i.addListener=_,i.once=_,i.off=_,i.removeListener=_,i.removeAllListeners=_,i.emit=_,i.prependListener=_,i.prependOnceListener=_,i.listeners=function(T){return[]},i.binding=function(T){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(T){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}}),(function(e,t,i){(function(r){var s=i(7),o=i(8),a=i(9),l=i(10),u=i(11),h=i(12);e.exports=function(p,m){var y=typeof Symbol=="function"&&Symbol.iterator,b="@@iterator";function x(Y){var Q=Y&&(y&&Y[y]||Y[b]);if(typeof Q=="function")return Q}var S="<<anonymous>>",_={array:C("array"),bool:C("boolean"),func:C("function"),number:C("number"),object:C("object"),string:C("string"),symbol:C("symbol"),any:R(),arrayOf:L,element:I(),instanceOf:P,node:z(),objectOf:B,oneOf:U,oneOfType:F,shape:W,exact:X};function T(Y,Q){return Y===Q?Y!==0||1/Y===1/Q:Y!==Y&&Q!==Q}function A(Y){this.message=Y,this.stack=""}A.prototype=Error.prototype;function M(Y){if(r.env.NODE_ENV!=="production")var Q={},re=0;function ne(fe,pe,Ee,Te,xe,ge,oe){if(Te=Te||S,ge=ge||Ee,oe!==u){if(m)o(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");else if(r.env.NODE_ENV!=="production"&&typeof console<"u"){var me=Te+":"+Ee;!Q[me]&&re<3&&(a(!1,"You are manually calling a React.PropTypes validation function for the `%s` prop on `%s`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details.",ge,Te),Q[me]=!0,re++)}}return pe[Ee]==null?fe?pe[Ee]===null?new A("The "+xe+" `"+ge+"` is marked as required "+("in `"+Te+"`, but its value is `null`.")):new A("The "+xe+" `"+ge+"` is marked as required in "+("`"+Te+"`, but its value is `undefined`.")):null:Y(pe,Ee,Te,xe,ge)}var le=ne.bind(null,!1);return le.isRequired=ne.bind(null,!0),le}function C(Y){function Q(re,ne,le,fe,pe,Ee){var Te=re[ne],xe=K(Te);if(xe!==Y){var ge=J(Te);return new A("Invalid "+fe+" `"+pe+"` of type "+("`"+ge+"` supplied to `"+le+"`, expected ")+("`"+Y+"`."))}return null}return M(Q)}function R(){return M(s.thatReturnsNull)}function L(Y){function Q(re,ne,le,fe,pe){if(typeof Y!="function")return new A("Property `"+pe+"` of component `"+le+"` has invalid PropType notation inside arrayOf.");var Ee=re[ne];if(!Array.isArray(Ee)){var Te=K(Ee);return new A("Invalid "+fe+" `"+pe+"` of type "+("`"+Te+"` supplied to `"+le+"`, expected an array."))}for(var xe=0;xe<Ee.length;xe++){var ge=Y(Ee,xe,le,fe,pe+"["+xe+"]",u);if(ge instanceof Error)return ge}return null}return M(Q)}function I(){function Y(Q,re,ne,le,fe){var pe=Q[re];if(!p(pe)){var Ee=K(pe);return new A("Invalid "+le+" `"+fe+"` of type "+("`"+Ee+"` supplied to `"+ne+"`, expected a single ReactElement."))}return null}return M(Y)}function P(Y){function Q(re,ne,le,fe,pe){if(!(re[ne]instanceof Y)){var Ee=Y.name||S,Te=V(re[ne]);return new A("Invalid "+fe+" `"+pe+"` of type "+("`"+Te+"` supplied to `"+le+"`, expected ")+("instance of `"+Ee+"`."))}return null}return M(Q)}function U(Y){if(!Array.isArray(Y))return r.env.NODE_ENV!=="production"&&a(!1,"Invalid argument supplied to oneOf, expected an instance of array."),s.thatReturnsNull;function Q(re,ne,le,fe,pe){for(var Ee=re[ne],Te=0;Te<Y.length;Te++)if(T(Ee,Y[Te]))return null;var xe=JSON.stringify(Y);return new A("Invalid "+fe+" `"+pe+"` of value `"+Ee+"` "+("supplied to `"+le+"`, expected one of "+xe+"."))}return M(Q)}function B(Y){function Q(re,ne,le,fe,pe){if(typeof Y!="function")return new A("Property `"+pe+"` of component `"+le+"` has invalid PropType notation inside objectOf.");var Ee=re[ne],Te=K(Ee);if(Te!=="object")return new A("Invalid "+fe+" `"+pe+"` of type "+("`"+Te+"` supplied to `"+le+"`, expected an object."));for(var xe in Ee)if(Ee.hasOwnProperty(xe)){var ge=Y(Ee,xe,le,fe,pe+"."+xe,u);if(ge instanceof Error)return ge}return null}return M(Q)}function F(Y){if(!Array.isArray(Y))return r.env.NODE_ENV!=="production"&&a(!1,"Invalid argument supplied to oneOfType, expected an instance of array."),s.thatReturnsNull;for(var Q=0;Q<Y.length;Q++){var re=Y[Q];if(typeof re!="function")return a(!1,"Invalid argument supplied to oneOfType. Expected an array of check functions, but received %s at index %s.",ee(re),Q),s.thatReturnsNull}function ne(le,fe,pe,Ee,Te){for(var xe=0;xe<Y.length;xe++){var ge=Y[xe];if(ge(le,fe,pe,Ee,Te,u)==null)return null}return new A("Invalid "+Ee+" `"+Te+"` supplied to "+("`"+pe+"`."))}return M(ne)}function z(){function Y(Q,re,ne,le,fe){return j(Q[re])?null:new A("Invalid "+le+" `"+fe+"` supplied to "+("`"+ne+"`, expected a ReactNode."))}return M(Y)}function W(Y){function Q(re,ne,le,fe,pe){var Ee=re[ne],Te=K(Ee);if(Te!=="object")return new A("Invalid "+fe+" `"+pe+"` of type `"+Te+"` "+("supplied to `"+le+"`, expected `object`."));for(var xe in Y){var ge=Y[xe];if(ge){var oe=ge(Ee,xe,le,fe,pe+"."+xe,u);if(oe)return oe}}return null}return M(Q)}function X(Y){function Q(re,ne,le,fe,pe){var Ee=re[ne],Te=K(Ee);if(Te!=="object")return new A("Invalid "+fe+" `"+pe+"` of type `"+Te+"` "+("supplied to `"+le+"`, expected `object`."));var xe=l({},re[ne],Y);for(var ge in xe){var oe=Y[ge];if(!oe)return new A("Invalid "+fe+" `"+pe+"` key `"+ge+"` supplied to `"+le+"`.\nBad object: "+JSON.stringify(re[ne],null,"  ")+`
Valid keys: `+JSON.stringify(Object.keys(Y),null,"  "));var me=oe(Ee,ge,le,fe,pe+"."+ge,u);if(me)return me}return null}return M(Q)}function j(Y){switch(typeof Y){case"number":case"string":case"undefined":return!0;case"boolean":return!Y;case"object":if(Array.isArray(Y))return Y.every(j);if(Y===null||p(Y))return!0;var Q=x(Y);if(Q){var re=Q.call(Y),ne;if(Q!==Y.entries){for(;!(ne=re.next()).done;)if(!j(ne.value))return!1}else for(;!(ne=re.next()).done;){var le=ne.value;if(le&&!j(le[1]))return!1}}else return!1;return!0;default:return!1}}function G(Y,Q){return Y==="symbol"||Q["@@toStringTag"]==="Symbol"||typeof Symbol=="function"&&Q instanceof Symbol}function K(Y){var Q=typeof Y;return Array.isArray(Y)?"array":Y instanceof RegExp?"object":G(Q,Y)?"symbol":Q}function J(Y){if(typeof Y>"u"||Y===null)return""+Y;var Q=K(Y);if(Q==="object"){if(Y instanceof Date)return"date";if(Y instanceof RegExp)return"regexp"}return Q}function ee(Y){var Q=J(Y);switch(Q){case"array":case"object":return"an "+Q;case"boolean":case"date":case"regexp":return"a "+Q;default:return Q}}function V(Y){return!Y.constructor||!Y.constructor.name?S:Y.constructor.name}return _.checkPropTypes=h,_.PropTypes=_,_}}).call(t,i(5))}),(function(e,t){function i(s){return function(){return s}}var r=function(){};r.thatReturns=i,r.thatReturnsFalse=i(!1),r.thatReturnsTrue=i(!0),r.thatReturnsNull=i(null),r.thatReturnsThis=function(){return this},r.thatReturnsArgument=function(s){return s},e.exports=r}),(function(e,t,i){(function(r){var s=function(l){};r.env.NODE_ENV!=="production"&&(s=function(l){if(l===void 0)throw new Error("invariant requires an error message argument")});function o(a,l,u,h,p,m,y,b){if(s(l),!a){var x;if(l===void 0)x=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var S=[u,h,p,m,y,b],_=0;x=new Error(l.replace(/%s/g,function(){return S[_++]})),x.name="Invariant Violation"}throw x.framesToPop=1,x}}e.exports=o}).call(t,i(5))}),(function(e,t,i){(function(r){var s=i(7),o=s;if(r.env.NODE_ENV!=="production"){var a=function(u){for(var h=arguments.length,p=Array(h>1?h-1:0),m=1;m<h;m++)p[m-1]=arguments[m];var y=0,b="Warning: "+u.replace(/%s/g,function(){return p[y++]});typeof console<"u"&&console.error(b);try{throw new Error(b)}catch{}};o=function(u,h){if(h===void 0)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(h.indexOf("Failed Composite propType: ")!==0&&!u){for(var p=arguments.length,m=Array(p>2?p-2:0),y=2;y<p;y++)m[y-2]=arguments[y];a.apply(void 0,[h].concat(m))}}}e.exports=o}).call(t,i(5))}),(function(e,t){var i=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;function o(l){if(l==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(l)}function a(){try{if(!Object.assign)return!1;var l=new String("abc");if(l[5]="de",Object.getOwnPropertyNames(l)[0]==="5")return!1;for(var u={},h=0;h<10;h++)u["_"+String.fromCharCode(h)]=h;var p=Object.getOwnPropertyNames(u).map(function(y){return u[y]});if(p.join("")!=="0123456789")return!1;var m={};return"abcdefghijklmnopqrst".split("").forEach(function(y){m[y]=y}),Object.keys(Object.assign({},m)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}e.exports=a()?Object.assign:function(l,u){for(var h,p=o(l),m,y=1;y<arguments.length;y++){h=Object(arguments[y]);for(var b in h)r.call(h,b)&&(p[b]=h[b]);if(i){m=i(h);for(var x=0;x<m.length;x++)s.call(h,m[x])&&(p[m[x]]=h[m[x]])}}return p}}),(function(e,t){var i="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";e.exports=i}),(function(e,t,i){(function(r){if(r.env.NODE_ENV!=="production")var s=i(8),o=i(9),a=i(11),l={};function u(h,p,m,y,b){if(r.env.NODE_ENV!=="production"){for(var x in h)if(h.hasOwnProperty(x)){var S;try{s(typeof h[x]=="function","%s: %s type `%s` is invalid; it must be a function, usually from the `prop-types` package, but received `%s`.",y||"React class",m,x,typeof h[x]),S=h[x](p,x,y,m,null,a)}catch(T){S=T}if(o(!S||S instanceof Error,"%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",y||"React class",m,x,typeof S),S instanceof Error&&!(S.message in l)){l[S.message]=!0;var _=b?b():"";o(!1,"Failed %s type: %s%s",m,S.message,_??"")}}}}e.exports=u}).call(t,i(5))}),(function(e,t,i){var r=i(7),s=i(8),o=i(11);e.exports=function(){function a(h,p,m,y,b,x){x!==o&&s(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}a.isRequired=a;function l(){return a}var u={array:a,bool:a,func:a,number:a,object:a,string:a,symbol:a,any:a,arrayOf:l,element:a,instanceOf:l,node:a,objectOf:l,oneOf:l,oneOfType:l,shape:l,exact:l};return u.checkPropTypes=r,u.PropTypes=u,u}}),(function(e,t){e.exports=Gf()}),(function(e,t){var i=function(o,a){return o===a};function r(s){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:i,a=void 0,l=[],u=void 0,h=!1,p=function(b,x){return o(b,l[x])},m=function(){for(var b=arguments.length,x=Array(b),S=0;S<b;S++)x[S]=arguments[S];return h&&a===this&&x.length===l.length&&x.every(p)||(h=!0,a=this,l=x,u=s.apply(this,x)),u};return m}e.exports=r})])})(pA)),pA.exports}M$();var Wl={};function Uf(n){return Array.isArray?Array.isArray(n):qF(n)==="[object Array]"}function A$(n){if(typeof n=="string")return n;let e=n+"";return e=="0"&&1/n==-1/0?"-0":e}function C$(n){return n==null?"":A$(n)}function su(n){return typeof n=="string"}function WF(n){return typeof n=="number"}function R$(n){return n===!0||n===!1||D$(n)&&qF(n)=="[object Boolean]"}function XF(n){return typeof n=="object"}function D$(n){return XF(n)&&n!==null}function Ta(n){return n!=null}function mA(n){return!n.trim().length}function qF(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}const O$="Incorrect 'index' type",L$=n=>`Invalid value for key ${n}`,P$=n=>`Pattern length exceeds max of ${n}.`,I$=n=>`Missing ${n} property in key`,N$=n=>`Property 'weight' in key '${n}' must be a positive integer`,vN=Object.prototype.hasOwnProperty;class U${constructor(e){this._keys=[],this._keyMap={};let t=0;e.forEach(i=>{let r=YF(i);t+=r.weight,this._keys.push(r),this._keyMap[r.id]=r,t+=r.weight}),this._keys.forEach(i=>{i.weight/=t})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function YF(n){let e=null,t=null,i=null,r=1,s=null;if(su(n)||Uf(n))i=n,e=yN(n),t=e3(n);else{if(!vN.call(n,"name"))throw new Error(I$("name"));const o=n.name;if(i=o,vN.call(n,"weight")&&(r=n.weight,r<=0))throw new Error(N$(o));e=yN(o),t=e3(o),s=n.getFn}return{path:e,id:t,weight:r,src:i,getFn:s}}function yN(n){return Uf(n)?n:n.split(".")}function e3(n){return Uf(n)?n.join("."):n}function k$(n,e){let t=[],i=!1;const r=(s,o,a)=>{if(Ta(s))if(!o[a])t.push(s);else{let l=o[a];const u=s[l];if(!Ta(u))return;if(a===o.length-1&&(su(u)||WF(u)||R$(u)))t.push(C$(u));else if(Uf(u)){i=!0;for(let h=0,p=u.length;h<p;h+=1)r(u[h],o,a+1)}else o.length&&r(u,o,a+1)}};return r(n,su(e)?e.split("."):e,0),i?t:t[0]}const z$={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},F$={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(n,e)=>n.score===e.score?n.idx<e.idx?-1:1:n.score<e.score?-1:1},B$={location:0,threshold:.6,distance:100},V$={useExtendedSearch:!1,getFn:k$,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var nn={...F$,...z$,...B$,...V$};const G$=/[^ ]+/g;function H$(n=1,e=3){const t=new Map,i=Math.pow(10,e);return{get(r){const s=r.match(G$).length;if(t.has(s))return t.get(s);const o=1/Math.pow(s,.5*n),a=parseFloat(Math.round(o*i)/i);return t.set(s,a),a},clear(){t.clear()}}}class $D{constructor({getFn:e=nn.getFn,fieldNormWeight:t=nn.fieldNormWeight}={}){this.norm=H$(t,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((t,i)=>{this._keysMap[t.id]=i})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,su(this.docs[0])?this.docs.forEach((e,t)=>{this._addString(e,t)}):this.docs.forEach((e,t)=>{this._addObject(e,t)}),this.norm.clear())}add(e){const t=this.size();su(e)?this._addString(e,t):this._addObject(e,t)}removeAt(e){this.records.splice(e,1);for(let t=e,i=this.size();t<i;t+=1)this.records[t].i-=1}getValueForItemAtKeyId(e,t){return e[this._keysMap[t]]}size(){return this.records.length}_addString(e,t){if(!Ta(e)||mA(e))return;let i={v:e,i:t,n:this.norm.get(e)};this.records.push(i)}_addObject(e,t){let i={i:t,$:{}};this.keys.forEach((r,s)=>{let o=r.getFn?r.getFn(e):this.getFn(e,r.path);if(Ta(o)){if(Uf(o)){let a=[];const l=[{nestedArrIndex:-1,value:o}];for(;l.length;){const{nestedArrIndex:u,value:h}=l.pop();if(Ta(h))if(su(h)&&!mA(h)){let p={v:h,i:u,n:this.norm.get(h)};a.push(p)}else Uf(h)&&h.forEach((p,m)=>{l.push({nestedArrIndex:m,value:p})})}i.$[s]=a}else if(su(o)&&!mA(o)){let a={v:o,n:this.norm.get(o)};i.$[s]=a}}}),this.records.push(i)}toJSON(){return{keys:this.keys,records:this.records}}}function $F(n,e,{getFn:t=nn.getFn,fieldNormWeight:i=nn.fieldNormWeight}={}){const r=new $D({getFn:t,fieldNormWeight:i});return r.setKeys(n.map(YF)),r.setSources(e),r.create(),r}function j$(n,{getFn:e=nn.getFn,fieldNormWeight:t=nn.fieldNormWeight}={}){const{keys:i,records:r}=n,s=new $D({getFn:e,fieldNormWeight:t});return s.setKeys(i),s.setIndexRecords(r),s}function R1(n,{errors:e=0,currentLocation:t=0,expectedLocation:i=0,distance:r=nn.distance,ignoreLocation:s=nn.ignoreLocation}={}){const o=e/n.length;if(s)return o;const a=Math.abs(i-t);return r?o+a/r:a?1:o}function W$(n=[],e=nn.minMatchCharLength){let t=[],i=-1,r=-1,s=0;for(let o=n.length;s<o;s+=1){let a=n[s];a&&i===-1?i=s:!a&&i!==-1&&(r=s-1,r-i+1>=e&&t.push([i,r]),i=-1)}return n[s-1]&&s-i>=e&&t.push([i,s-1]),t}const Ap=32;function X$(n,e,t,{location:i=nn.location,distance:r=nn.distance,threshold:s=nn.threshold,findAllMatches:o=nn.findAllMatches,minMatchCharLength:a=nn.minMatchCharLength,includeMatches:l=nn.includeMatches,ignoreLocation:u=nn.ignoreLocation}={}){if(e.length>Ap)throw new Error(P$(Ap));const h=e.length,p=n.length,m=Math.max(0,Math.min(i,p));let y=s,b=m;const x=a>1||l,S=x?Array(p):[];let _;for(;(_=n.indexOf(e,b))>-1;){let L=R1(e,{currentLocation:_,expectedLocation:m,distance:r,ignoreLocation:u});if(y=Math.min(L,y),b=_+h,x){let I=0;for(;I<h;)S[_+I]=1,I+=1}}b=-1;let T=[],A=1,M=h+p;const C=1<<h-1;for(let L=0;L<h;L+=1){let I=0,P=M;for(;I<P;)R1(e,{errors:L,currentLocation:m+P,expectedLocation:m,distance:r,ignoreLocation:u})<=y?I=P:M=P,P=Math.floor((M-I)/2+I);M=P;let U=Math.max(1,m-P+1),B=o?p:Math.min(m+P,p)+h,F=Array(B+2);F[B+1]=(1<<L)-1;for(let W=B;W>=U;W-=1){let X=W-1,j=t[n.charAt(X)];if(x&&(S[X]=+!!j),F[W]=(F[W+1]<<1|1)&j,L&&(F[W]|=(T[W+1]|T[W])<<1|1|T[W+1]),F[W]&C&&(A=R1(e,{errors:L,currentLocation:X,expectedLocation:m,distance:r,ignoreLocation:u}),A<=y)){if(y=A,b=X,b<=m)break;U=Math.max(1,2*m-b)}}if(R1(e,{errors:L+1,currentLocation:m,expectedLocation:m,distance:r,ignoreLocation:u})>y)break;T=F}const R={isMatch:b>=0,score:Math.max(.001,A)};if(x){const L=W$(S,a);L.length?l&&(R.indices=L):R.isMatch=!1}return R}function q$(n){let e={};for(let t=0,i=n.length;t<i;t+=1){const r=n.charAt(t);e[r]=(e[r]||0)|1<<i-t-1}return e}class ZF{constructor(e,{location:t=nn.location,threshold:i=nn.threshold,distance:r=nn.distance,includeMatches:s=nn.includeMatches,findAllMatches:o=nn.findAllMatches,minMatchCharLength:a=nn.minMatchCharLength,isCaseSensitive:l=nn.isCaseSensitive,ignoreLocation:u=nn.ignoreLocation}={}){if(this.options={location:t,threshold:i,distance:r,includeMatches:s,findAllMatches:o,minMatchCharLength:a,isCaseSensitive:l,ignoreLocation:u},this.pattern=l?e:e.toLowerCase(),this.chunks=[],!this.pattern.length)return;const h=(m,y)=>{this.chunks.push({pattern:m,alphabet:q$(m),startIndex:y})},p=this.pattern.length;if(p>Ap){let m=0;const y=p%Ap,b=p-y;for(;m<b;)h(this.pattern.substr(m,Ap),m),m+=Ap;if(y){const x=p-Ap;h(this.pattern.substr(x),x)}}else h(this.pattern,0)}searchIn(e){const{isCaseSensitive:t,includeMatches:i}=this.options;if(t||(e=e.toLowerCase()),this.pattern===e){let b={isMatch:!0,score:0};return i&&(b.indices=[[0,e.length-1]]),b}const{location:r,distance:s,threshold:o,findAllMatches:a,minMatchCharLength:l,ignoreLocation:u}=this.options;let h=[],p=0,m=!1;this.chunks.forEach(({pattern:b,alphabet:x,startIndex:S})=>{const{isMatch:_,score:T,indices:A}=X$(e,b,x,{location:r+S,distance:s,threshold:o,findAllMatches:a,minMatchCharLength:l,includeMatches:i,ignoreLocation:u});_&&(m=!0),p+=T,_&&A&&(h=[...h,...A])});let y={isMatch:m,score:m?p/this.chunks.length:1};return m&&i&&(y.indices=h),y}}class hd{constructor(e){this.pattern=e}static isMultiMatch(e){return bN(e,this.multiRegex)}static isSingleMatch(e){return bN(e,this.singleRegex)}search(){}}function bN(n,e){const t=n.match(e);return t?t[1]:null}class Y$ extends hd{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const t=e===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}class $$ extends hd{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const i=e.indexOf(this.pattern)===-1;return{isMatch:i,score:i?0:1,indices:[0,e.length-1]}}}class Z$ extends hd{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const t=e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}class K$ extends hd{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const t=!e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}}class Q$ extends hd{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const t=e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class J$ extends hd{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const t=!e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}}class KF extends hd{constructor(e,{location:t=nn.location,threshold:i=nn.threshold,distance:r=nn.distance,includeMatches:s=nn.includeMatches,findAllMatches:o=nn.findAllMatches,minMatchCharLength:a=nn.minMatchCharLength,isCaseSensitive:l=nn.isCaseSensitive,ignoreLocation:u=nn.ignoreLocation}={}){super(e),this._bitapSearch=new ZF(e,{location:t,threshold:i,distance:r,includeMatches:s,findAllMatches:o,minMatchCharLength:a,isCaseSensitive:l,ignoreLocation:u})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class QF extends hd{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let t=0,i;const r=[],s=this.pattern.length;for(;(i=e.indexOf(this.pattern,t))>-1;)t=i+s,r.push([i,t-1]);const o=!!r.length;return{isMatch:o,score:o?0:1,indices:r}}}const t3=[Y$,QF,Z$,K$,J$,Q$,$$,KF],_N=t3.length,eZ=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,tZ="|";function nZ(n,e={}){return n.split(tZ).map(t=>{let i=t.trim().split(eZ).filter(s=>s&&!!s.trim()),r=[];for(let s=0,o=i.length;s<o;s+=1){const a=i[s];let l=!1,u=-1;for(;!l&&++u<_N;){const h=t3[u];let p=h.isMultiMatch(a);p&&(r.push(new h(p,e)),l=!0)}if(!l)for(u=-1;++u<_N;){const h=t3[u];let p=h.isSingleMatch(a);if(p){r.push(new h(p,e));break}}}return r})}const iZ=new Set([KF.type,QF.type]);class rZ{constructor(e,{isCaseSensitive:t=nn.isCaseSensitive,includeMatches:i=nn.includeMatches,minMatchCharLength:r=nn.minMatchCharLength,ignoreLocation:s=nn.ignoreLocation,findAllMatches:o=nn.findAllMatches,location:a=nn.location,threshold:l=nn.threshold,distance:u=nn.distance}={}){this.query=null,this.options={isCaseSensitive:t,includeMatches:i,minMatchCharLength:r,findAllMatches:o,ignoreLocation:s,location:a,threshold:l,distance:u},this.pattern=t?e:e.toLowerCase(),this.query=nZ(this.pattern,this.options)}static condition(e,t){return t.useExtendedSearch}searchIn(e){const t=this.query;if(!t)return{isMatch:!1,score:1};const{includeMatches:i,isCaseSensitive:r}=this.options;e=r?e:e.toLowerCase();let s=0,o=[],a=0;for(let l=0,u=t.length;l<u;l+=1){const h=t[l];o.length=0,s=0;for(let p=0,m=h.length;p<m;p+=1){const y=h[p],{isMatch:b,indices:x,score:S}=y.search(e);if(b){if(s+=1,a+=S,i){const _=y.constructor.type;iZ.has(_)?o=[...o,...x]:o.push(x)}}else{a=0,s=0,o.length=0;break}}if(s){let p={isMatch:!0,score:a/s};return i&&(p.indices=o),p}}return{isMatch:!1,score:1}}}const n3=[];function sZ(...n){n3.push(...n)}function i3(n,e){for(let t=0,i=n3.length;t<i;t+=1){let r=n3[t];if(r.condition(n,e))return new r(n,e)}return new ZF(n,e)}const Lw={AND:"$and",OR:"$or"},r3={PATH:"$path",PATTERN:"$val"},s3=n=>!!(n[Lw.AND]||n[Lw.OR]),oZ=n=>!!n[r3.PATH],aZ=n=>!Uf(n)&&XF(n)&&!s3(n),xN=n=>({[Lw.AND]:Object.keys(n).map(e=>({[e]:n[e]}))});function JF(n,e,{auto:t=!0}={}){const i=r=>{let s=Object.keys(r);const o=oZ(r);if(!o&&s.length>1&&!s3(r))return i(xN(r));if(aZ(r)){const l=o?r[r3.PATH]:s[0],u=o?r[r3.PATTERN]:r[l];if(!su(u))throw new Error(L$(l));const h={keyId:e3(l),pattern:u};return t&&(h.searcher=i3(u,e)),h}let a={children:[],operator:s[0]};return s.forEach(l=>{const u=r[l];Uf(u)&&u.forEach(h=>{a.children.push(i(h))})}),a};return s3(n)||(n=xN(n)),i(n)}function lZ(n,{ignoreFieldNorm:e=nn.ignoreFieldNorm}){n.forEach(t=>{let i=1;t.matches.forEach(({key:r,norm:s,score:o})=>{const a=r?r.weight:null;i*=Math.pow(o===0&&a?Number.EPSILON:o,(a||1)*(e?1:s))}),t.score=i})}function cZ(n,e){const t=n.matches;e.matches=[],Ta(t)&&t.forEach(i=>{if(!Ta(i.indices)||!i.indices.length)return;const{indices:r,value:s}=i;let o={indices:r,value:s};i.key&&(o.key=i.key.src),i.idx>-1&&(o.refIndex=i.idx),e.matches.push(o)})}function uZ(n,e){e.score=n.score}function fZ(n,e,{includeMatches:t=nn.includeMatches,includeScore:i=nn.includeScore}={}){const r=[];return t&&r.push(cZ),i&&r.push(uZ),n.map(s=>{const{idx:o}=s,a={item:e[o],refIndex:o};return r.length&&r.forEach(l=>{l(s,a)}),a})}class B0{constructor(e,t={},i){this.options={...nn,...t},this.options.useExtendedSearch,this._keyStore=new U$(this.options.keys),this.setCollection(e,i)}setCollection(e,t){if(this._docs=e,t&&!(t instanceof $D))throw new Error(O$);this._myIndex=t||$F(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){Ta(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const t=[];for(let i=0,r=this._docs.length;i<r;i+=1){const s=this._docs[i];e(s,i)&&(this.removeAt(i),i-=1,r-=1,t.push(s))}return t}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:t=-1}={}){const{includeMatches:i,includeScore:r,shouldSort:s,sortFn:o,ignoreFieldNorm:a}=this.options;let l=su(e)?su(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return lZ(l,{ignoreFieldNorm:a}),s&&l.sort(o),WF(t)&&t>-1&&(l=l.slice(0,t)),fZ(l,this._docs,{includeMatches:i,includeScore:r})}_searchStringList(e){const t=i3(e,this.options),{records:i}=this._myIndex,r=[];return i.forEach(({v:s,i:o,n:a})=>{if(!Ta(s))return;const{isMatch:l,score:u,indices:h}=t.searchIn(s);l&&r.push({item:s,idx:o,matches:[{score:u,value:s,norm:a,indices:h}]})}),r}_searchLogical(e){const t=JF(e,this.options),i=(a,l,u)=>{if(!a.children){const{keyId:p,searcher:m}=a,y=this._findMatches({key:this._keyStore.get(p),value:this._myIndex.getValueForItemAtKeyId(l,p),searcher:m});return y&&y.length?[{idx:u,item:l,matches:y}]:[]}const h=[];for(let p=0,m=a.children.length;p<m;p+=1){const y=a.children[p],b=i(y,l,u);if(b.length)h.push(...b);else if(a.operator===Lw.AND)return[]}return h},r=this._myIndex.records,s={},o=[];return r.forEach(({$:a,i:l})=>{if(Ta(a)){let u=i(t,a,l);u.length&&(s[l]||(s[l]={idx:l,item:a,matches:[]},o.push(s[l])),u.forEach(({matches:h})=>{s[l].matches.push(...h)}))}}),o}_searchObjectList(e){const t=i3(e,this.options),{keys:i,records:r}=this._myIndex,s=[];return r.forEach(({$:o,i:a})=>{if(!Ta(o))return;let l=[];i.forEach((u,h)=>{l.push(...this._findMatches({key:u,value:o[h],searcher:t}))}),l.length&&s.push({idx:a,item:o,matches:l})}),s}_findMatches({key:e,value:t,searcher:i}){if(!Ta(t))return[];let r=[];if(Uf(t))t.forEach(({v:s,i:o,n:a})=>{if(!Ta(s))return;const{isMatch:l,score:u,indices:h}=i.searchIn(s);l&&r.push({score:u,key:e,value:s,idx:o,norm:a,indices:h})});else{const{v:s,n:o}=t,{isMatch:a,score:l,indices:u}=i.searchIn(s);a&&r.push({score:l,key:e,value:s,norm:o,indices:u})}return r}}B0.version="6.6.2";B0.createIndex=$F;B0.parseIndex=j$;B0.config=nn;B0.parseQuery=JF;sZ(rZ);const hZ=Object.freeze(Object.defineProperty({__proto__:null,default:B0},Symbol.toStringTag,{value:"Module"})),dZ=lD(hZ);var SN;function pZ(){if(SN)return Wl;SN=1;var n=Wl&&Wl.__assign||function(){return n=Object.assign||function(s){for(var o,a=1,l=arguments.length;a<l;a++){o=arguments[a];for(var u in o)Object.prototype.hasOwnProperty.call(o,u)&&(s[u]=o[u])}return s},n.apply(this,arguments)},e=Wl&&Wl.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Wl,"__esModule",{value:!0}),Wl.useSearch=Wl.useFuzzy=void 0;var t=e(dZ),i=Gf();function r(s,o){var a=(0,i.useState)(""),l=a[0],u=a[1],h=function(){return u("")},p=(0,i.useMemo)(function(){var y={tokenize:!0,threshold:.2};return new t.default(s,n(n({},y),o))},[s,o]),m=l?(p.search(l)||[]).map(function(y){return n(n({},y.item),{matches:y.matches})}):s;return{keyword:l,resetSearch:h,result:m,search:u}}return Wl.useFuzzy=r,Wl.useSearch=r,Wl}pZ();function od(){return od=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},od.apply(null,arguments)}function mZ(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}var gZ=q.useLayoutEffect,vZ=function(e){var t=Rs.useRef(e);return gZ(function(){t.current=e}),t},wN=function(e,t){if(typeof e=="function"){e(t);return}e.current=t},yZ=function(e,t){var i=Rs.useRef();return Rs.useCallback(function(r){e.current=r,i.current&&wN(i.current,null),i.current=t,t&&wN(t,r)},[t])},EN={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0",display:"block"},bZ=function(e){Object.keys(EN).forEach(function(t){e.style.setProperty(t,EN[t],"important")})},TN=bZ,yo=null,MN=function(e,t){var i=e.scrollHeight;return t.sizingStyle.boxSizing==="border-box"?i+t.borderSize:i-t.paddingSize};function _Z(n,e,t,i){t===void 0&&(t=1),i===void 0&&(i=1/0),yo||(yo=document.createElement("textarea"),yo.setAttribute("tabindex","-1"),yo.setAttribute("aria-hidden","true"),TN(yo)),yo.parentNode===null&&document.body.appendChild(yo);var r=n.paddingSize,s=n.borderSize,o=n.sizingStyle,a=o.boxSizing;Object.keys(o).forEach(function(m){var y=m;yo.style[y]=o[y]}),TN(yo),yo.value=e;var l=MN(yo,n);yo.value=e,l=MN(yo,n),yo.value="x";var u=yo.scrollHeight-r,h=u*t;a==="border-box"&&(h=h+r+s),l=Math.max(h,l);var p=u*i;return a==="border-box"&&(p=p+r+s),l=Math.min(p,l),[l,u]}var AN=function(){},xZ=function(e,t){return e.reduce(function(i,r){return i[r]=t[r],i},{})},SZ=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak","wordSpacing","scrollbarGutter"],wZ=!!document.documentElement.currentStyle,EZ=function(e){var t=window.getComputedStyle(e);if(t===null)return null;var i=xZ(SZ,t),r=i.boxSizing;if(r==="")return null;wZ&&r==="border-box"&&(i.width=parseFloat(i.width)+parseFloat(i.borderRightWidth)+parseFloat(i.borderLeftWidth)+parseFloat(i.paddingRight)+parseFloat(i.paddingLeft)+"px");var s=parseFloat(i.paddingBottom)+parseFloat(i.paddingTop),o=parseFloat(i.borderBottomWidth)+parseFloat(i.borderTopWidth);return{sizingStyle:i,paddingSize:s,borderSize:o}},TZ=EZ;function ZD(n,e,t){var i=vZ(t);q.useLayoutEffect(function(){var r=function(o){return i.current(o)};if(n)return n.addEventListener(e,r),function(){return n.removeEventListener(e,r)}},[])}var MZ=function(e,t){ZD(document.body,"reset",function(i){e.current.form===i.target&&t(i)})},AZ=function(e){ZD(window,"resize",e)},CZ=function(e){ZD(document.fonts,"loadingdone",e)},RZ=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],DZ=function(e,t){var i=e.cacheMeasurements,r=e.maxRows,s=e.minRows,o=e.onChange,a=o===void 0?AN:o,l=e.onHeightChange,u=l===void 0?AN:l,h=mZ(e,RZ),p=h.value!==void 0,m=q.useRef(null),y=yZ(m,t),b=q.useRef(0),x=q.useRef(),S=function(){var A=m.current,M=i&&x.current?x.current:TZ(A);if(M){x.current=M;var C=_Z(M,A.value||A.placeholder||"x",s,r),R=C[0],L=C[1];b.current!==R&&(b.current=R,A.style.setProperty("height",R+"px","important"),u(R,{rowHeight:L}))}},_=function(A){p||S(),a(A)};return q.useLayoutEffect(S),MZ(m,function(){if(!p){var T=m.current.value;requestAnimationFrame(function(){var A=m.current;A&&T!==A.value&&S()})}}),AZ(S),CZ(S),q.createElement("textarea",od({},h,{onChange:_,ref:y}))},OZ=q.forwardRef(DZ);function LZ(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var tw={exports:{}},PZ=tw.exports,CN;function IZ(){return CN||(CN=1,(function(n,e){(function(t,i){typeof LZ=="function"?n.exports=i():t.pluralize=i()})(PZ,function(){var t=[],i=[],r={},s={},o={};function a(x){return typeof x=="string"?new RegExp("^"+x+"$","i"):x}function l(x,S){return x===S?S:x===x.toLowerCase()?S.toLowerCase():x===x.toUpperCase()?S.toUpperCase():x[0]===x[0].toUpperCase()?S.charAt(0).toUpperCase()+S.substr(1).toLowerCase():S.toLowerCase()}function u(x,S){return x.replace(/\$(\d{1,2})/g,function(_,T){return S[T]||""})}function h(x,S){return x.replace(S[0],function(_,T){var A=u(S[1],arguments);return l(_===""?x[T-1]:_,A)})}function p(x,S,_){if(!x.length||r.hasOwnProperty(x))return S;for(var T=_.length;T--;){var A=_[T];if(A[0].test(S))return h(S,A)}return S}function m(x,S,_){return function(T){var A=T.toLowerCase();return S.hasOwnProperty(A)?l(T,A):x.hasOwnProperty(A)?l(T,x[A]):p(A,T,_)}}function y(x,S,_,T){return function(A){var M=A.toLowerCase();return S.hasOwnProperty(M)?!0:x.hasOwnProperty(M)?!1:p(M,M,_)===M}}function b(x,S,_){var T=S===1?b.singular(x):b.plural(x);return(_?S+" ":"")+T}return b.plural=m(o,s,t),b.isPlural=y(o,s,t),b.singular=m(s,o,i),b.isSingular=y(s,o,i),b.addPluralRule=function(x,S){t.push([a(x),S])},b.addSingularRule=function(x,S){i.push([a(x),S])},b.addUncountableRule=function(x){if(typeof x=="string"){r[x.toLowerCase()]=!0;return}b.addPluralRule(x,"$0"),b.addSingularRule(x,"$0")},b.addIrregularRule=function(x,S){S=S.toLowerCase(),x=x.toLowerCase(),o[x]=S,s[S]=x},[["I","we"],["me","us"],["he","they"],["she","they"],["them","them"],["myself","ourselves"],["yourself","yourselves"],["itself","themselves"],["herself","themselves"],["himself","themselves"],["themself","themselves"],["is","are"],["was","were"],["has","have"],["this","these"],["that","those"],["echo","echoes"],["dingo","dingoes"],["volcano","volcanoes"],["tornado","tornadoes"],["torpedo","torpedoes"],["genus","genera"],["viscus","viscera"],["stigma","stigmata"],["stoma","stomata"],["dogma","dogmata"],["lemma","lemmata"],["schema","schemata"],["anathema","anathemata"],["ox","oxen"],["axe","axes"],["die","dice"],["yes","yeses"],["foot","feet"],["eave","eaves"],["goose","geese"],["tooth","teeth"],["quiz","quizzes"],["human","humans"],["proof","proofs"],["carve","carves"],["valve","valves"],["looey","looies"],["thief","thieves"],["groove","grooves"],["pickaxe","pickaxes"],["passerby","passersby"]].forEach(function(x){return b.addIrregularRule(x[0],x[1])}),[[/s?$/i,"s"],[/[^\u0000-\u007F]$/i,"$0"],[/([^aeiou]ese)$/i,"$1"],[/(ax|test)is$/i,"$1es"],[/(alias|[^aou]us|t[lm]as|gas|ris)$/i,"$1es"],[/(e[mn]u)s?$/i,"$1s"],[/([^l]ias|[aeiou]las|[ejzr]as|[iu]am)$/i,"$1"],[/(alumn|syllab|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1i"],[/(alumn|alg|vertebr)(?:a|ae)$/i,"$1ae"],[/(seraph|cherub)(?:im)?$/i,"$1im"],[/(her|at|gr)o$/i,"$1oes"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|automat|quor)(?:a|um)$/i,"$1a"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)(?:a|on)$/i,"$1a"],[/sis$/i,"ses"],[/(?:(kni|wi|li)fe|(ar|l|ea|eo|oa|hoo)f)$/i,"$1$2ves"],[/([^aeiouy]|qu)y$/i,"$1ies"],[/([^ch][ieo][ln])ey$/i,"$1ies"],[/(x|ch|ss|sh|zz)$/i,"$1es"],[/(matr|cod|mur|sil|vert|ind|append)(?:ix|ex)$/i,"$1ices"],[/\b((?:tit)?m|l)(?:ice|ouse)$/i,"$1ice"],[/(pe)(?:rson|ople)$/i,"$1ople"],[/(child)(?:ren)?$/i,"$1ren"],[/eaux$/i,"$0"],[/m[ae]n$/i,"men"],["thou","you"]].forEach(function(x){return b.addPluralRule(x[0],x[1])}),[[/s$/i,""],[/(ss)$/i,"$1"],[/(wi|kni|(?:after|half|high|low|mid|non|night|[^\w]|^)li)ves$/i,"$1fe"],[/(ar|(?:wo|[ae])l|[eo][ao])ves$/i,"$1f"],[/ies$/i,"y"],[/\b([pl]|zomb|(?:neck|cross)?t|coll|faer|food|gen|goon|group|lass|talk|goal|cut)ies$/i,"$1ie"],[/\b(mon|smil)ies$/i,"$1ey"],[/\b((?:tit)?m|l)ice$/i,"$1ouse"],[/(seraph|cherub)im$/i,"$1"],[/(x|ch|ss|sh|zz|tto|go|cho|alias|[^aou]us|t[lm]as|gas|(?:her|at|gr)o|[aeiou]ris)(?:es)?$/i,"$1"],[/(analy|diagno|parenthe|progno|synop|the|empha|cri|ne)(?:sis|ses)$/i,"$1sis"],[/(movie|twelve|abuse|e[mn]u)s$/i,"$1"],[/(test)(?:is|es)$/i,"$1is"],[/(alumn|syllab|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1us"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|quor)a$/i,"$1um"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)a$/i,"$1on"],[/(alumn|alg|vertebr)ae$/i,"$1a"],[/(cod|mur|sil|vert|ind)ices$/i,"$1ex"],[/(matr|append)ices$/i,"$1ix"],[/(pe)(rson|ople)$/i,"$1rson"],[/(child)ren$/i,"$1"],[/(eau)x?$/i,"$1"],[/men$/i,"man"]].forEach(function(x){return b.addSingularRule(x[0],x[1])}),["adulthood","advice","agenda","aid","aircraft","alcohol","ammo","analytics","anime","athletics","audio","bison","blood","bream","buffalo","butter","carp","cash","chassis","chess","clothing","cod","commerce","cooperation","corps","debris","diabetes","digestion","elk","energy","equipment","excretion","expertise","firmware","flounder","fun","gallows","garbage","graffiti","hardware","headquarters","health","herpes","highjinks","homework","housework","information","jeans","justice","kudos","labour","literature","machinery","mackerel","mail","media","mews","moose","music","mud","manga","news","only","personnel","pike","plankton","pliers","police","pollution","premises","rain","research","rice","salmon","scissors","series","sewage","shambles","shrimp","software","species","staff","swine","tennis","traffic","transportation","trout","tuna","wealth","welfare","whiting","wildebeest","wildlife","you",/pok[e]mon$/i,/[^aeiou]ese$/i,/deer$/i,/fish$/i,/measles$/i,/o[iu]s$/i,/pox$/i,/sheep$/i].forEach(b.addUncountableRule),b})})(tw)),tw.exports}IZ();var nw={exports:{}},NZ=nw.exports,RN;function UZ(){return RN||(RN=1,(function(n,e){(function(t,i){n.exports=i()})(NZ,function(){function t(M,C){var R,L,I;for(R=1,L=arguments.length;R<L;++R)if(C=arguments[R],C!=null)for(I in C)l(C,I)&&(M[I]=C[I]);return M}function i(M,C){return C.length-M.length}function r(M,C){return M.factor-C.factor}function s(M){return M.replace(/([.*+?=^!:${}()|[\]/\\])/g,"\\$1")}function o(M,C){var R,L;for(R=0,L=M.length;R<L;++R)C(M[R],R)}function a(M,C){var R;for(R in M)l(M,R)&&C(M[R],R)}var l=(function(M){return function(R,L){return R!=null&&M.call(R,L)}})(Object.prototype.hasOwnProperty);function u(M,C){for(;typeof C=="string";)C=M[C];return C}function h(M){this._prefixes=M;var C=[],R=[];a(M,function(I,P){C.push(s(P)),R.push({factor:I,prefix:P})});var L=this._lcPrefixes={};a(M,function(I,P){var U=P.toLowerCase();l(M,U)||(L[U]=P)}),R.sort(r),this._list=R,C.sort(i),this._regexp=new RegExp("^\\s*(-)?\\s*(\\d+(?:\\.\\d+)?)\\s*("+C.join("|")+")\\s*(.*)\\s*?$","i")}h.create=function(C,R,L){var I={};return L===void 0&&(L=0),o(C,function(P,U){I[P]=Math.pow(R,U+L)}),new h(I)},h.prototype.findPrefix=function(C){for(var R=this._list,L=0,I=R.length-1,P,U;L!==I;)P=L+I+1>>1,U=R[P].factor,U>C?I=P-1:L=P;return R[L]},h.prototype.parse=function(C,R){var L=C.match(this._regexp);if(L!==null){var I=L[3],P;if(l(this._prefixes,I))P=this._prefixes[I];else if(!R&&(I=I.toLowerCase(),l(this._lcPrefixes,I)))I=this._lcPrefixes[I],P=this._prefixes[I];else return;var U=+L[2];return L[1]!==void 0&&(U=-U),{factor:P,prefix:I,unit:L[4],value:U}}};var p={binary:h.create(",Ki,Mi,Gi,Ti,Pi,Ei,Zi,Yi".split(","),1024),SI:h.create("y,z,a,f,p,n,,m,,k,M,G,T,P,E,Z,Y".split(","),1e3,-8)},m={maxDecimals:2,separator:" ",unit:""},y={scale:"SI",strict:!1};function b(M,C){C=t({},m,C);var R=C.decimals;R!==void 0&&delete C.maxDecimals;var L=A(M,C);M=R!==void 0?L.value.toFixed(R):String(L.value);var I=L.prefix+C.unit;return I===""?M:M+C.separator+I}var x={scale:"binary",unit:"B"};function S(M,C){return b(M,C===void 0?x:t({},x,C))}function _(M,C){var R=T(M,C);return R.value*R.factor}function T(M,C){if(typeof M!="string")throw new TypeError("str must be a string");C=t({},y,C);var R=u(p,C.scale);if(R===void 0)throw new Error("missing scale");var L=R.parse(M,C.strict);if(L===void 0)throw new Error("cannot parse str");return L}function A(M,C){if(M===0)return{value:0,prefix:""};if(M<0){var R=A(-M,C);return R.value=-R.value,R}if(typeof M!="number"||Number.isNaN(M))throw new TypeError("value must be a number");C=t({},y,C);var L=u(p,C.scale);if(L===void 0)throw new Error("missing scale");var I,P=C.maxDecimals,U=P==="auto";U?I=10:P!==void 0&&(I=Math.pow(10,P));var B=C.prefix,F;if(B!==void 0){if(!l(L._prefixes,B))throw new Error("invalid prefix");F=L._prefixes[B]}else{var z=L.findPrefix(M);if(I!==void 0)do{F=z.factor;var W=F/I;M=Math.round(M/W)*W}while((z=L.findPrefix(M)).factor!==F);else F=z.factor;B=z.prefix}return M=I===void 0?M/F:Math.round(M*I/F)/I,U&&Math.abs(M)>=10&&(M=Math.round(M)),{prefix:B,value:M}}return b.bytes=S,b.parse=_,_.raw=T,b.raw=A,b.Scale=h,b})})(nw)),nw.exports}var kZ=UZ();const zZ=Do(kZ),{min:FZ,max:BZ}=Math,Bp=(n,e=0,t=1)=>FZ(BZ(e,n),t),KD=n=>{n._clipped=!1,n._unclipped=n.slice(0);for(let e=0;e<=3;e++)e<3?((n[e]<0||n[e]>255)&&(n._clipped=!0),n[e]=Bp(n[e],0,255)):e===3&&(n[e]=Bp(n[e],0,1));return n},eB={};for(let n of["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"])eB[`[object ${n}]`]=n.toLowerCase();function Ln(n){return eB[Object.prototype.toString.call(n)]||"object"}const xn=(n,e=null)=>n.length>=3?Array.prototype.slice.call(n):Ln(n[0])=="object"&&e?e.split("").filter(t=>n[0][t]!==void 0).map(t=>n[0][t]):n[0].slice(0),V0=n=>{if(n.length<2)return null;const e=n.length-1;return Ln(n[e])=="string"?n[e].toLowerCase():null},{PI:nT,min:tB,max:nB}=Math,_l=n=>Math.round(n*100)/100,o3=n=>Math.round(n*100)/100,vf=nT*2,gA=nT/3,VZ=nT/180,GZ=180/nT;function iB(n){return[...n.slice(0,3).reverse(),...n.slice(3)]}const dn={format:{},autodetect:[]};let pt=class{constructor(...e){const t=this;if(Ln(e[0])==="object"&&e[0].constructor&&e[0].constructor===this.constructor)return e[0];let i=V0(e),r=!1;if(!i){r=!0,dn.sorted||(dn.autodetect=dn.autodetect.sort((s,o)=>o.p-s.p),dn.sorted=!0);for(let s of dn.autodetect)if(i=s.test(...e),i)break}if(dn.format[i]){const s=dn.format[i].apply(null,r?e:e.slice(0,-1));t._rgb=KD(s)}else throw new Error("unknown format: "+e);t._rgb.length===3&&t._rgb.push(1)}toString(){return Ln(this.hex)=="function"?this.hex():`[${this._rgb.join(",")}]`}};const HZ="3.2.0",jn=(...n)=>new pt(...n);jn.version=HZ;const g0={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},jZ=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,WZ=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,rB=n=>{if(n.match(jZ)){(n.length===4||n.length===7)&&(n=n.substr(1)),n.length===3&&(n=n.split(""),n=n[0]+n[0]+n[1]+n[1]+n[2]+n[2]);const e=parseInt(n,16),t=e>>16,i=e>>8&255,r=e&255;return[t,i,r,1]}if(n.match(WZ)){(n.length===5||n.length===9)&&(n=n.substr(1)),n.length===4&&(n=n.split(""),n=n[0]+n[0]+n[1]+n[1]+n[2]+n[2]+n[3]+n[3]);const e=parseInt(n,16),t=e>>24&255,i=e>>16&255,r=e>>8&255,s=Math.round((e&255)/255*100)/100;return[t,i,r,s]}throw new Error(`unknown hex color: ${n}`)},{round:D1}=Math,sB=(...n)=>{let[e,t,i,r]=xn(n,"rgba"),s=V0(n)||"auto";r===void 0&&(r=1),s==="auto"&&(s=r<1?"rgba":"rgb"),e=D1(e),t=D1(t),i=D1(i);let a="000000"+(e<<16|t<<8|i).toString(16);a=a.substr(a.length-6);let l="0"+D1(r*255).toString(16);switch(l=l.substr(l.length-2),s.toLowerCase()){case"rgba":return`#${a}${l}`;case"argb":return`#${l}${a}`;default:return`#${a}`}};pt.prototype.name=function(){const n=sB(this._rgb,"rgb");for(let e of Object.keys(g0))if(g0[e]===n)return e.toLowerCase();return n};dn.format.named=n=>{if(n=n.toLowerCase(),g0[n])return rB(g0[n]);throw new Error("unknown color name: "+n)};dn.autodetect.push({p:5,test:(n,...e)=>{if(!e.length&&Ln(n)==="string"&&g0[n.toLowerCase()])return"named"}});pt.prototype.alpha=function(n,e=!1){return n!==void 0&&Ln(n)==="number"?e?(this._rgb[3]=n,this):new pt([this._rgb[0],this._rgb[1],this._rgb[2],n],"rgb"):this._rgb[3]};pt.prototype.clipped=function(){return this._rgb._clipped||!1};const uu={Kn:18,labWhitePoint:"d65",Xn:.95047,Yn:1,Zn:1.08883,kE:216/24389,kKE:8,kK:24389/27,RefWhiteRGB:{X:.95047,Y:1,Z:1.08883},MtxRGB2XYZ:{m00:.4124564390896922,m01:.21267285140562253,m02:.0193338955823293,m10:.357576077643909,m11:.715152155287818,m12:.11919202588130297,m20:.18043748326639894,m21:.07217499330655958,m22:.9503040785363679},MtxXYZ2RGB:{m00:3.2404541621141045,m01:-.9692660305051868,m02:.055643430959114726,m10:-1.5371385127977166,m11:1.8760108454466942,m12:-.2040259135167538,m20:-.498531409556016,m21:.041556017530349834,m22:1.0572251882231791},As:.9414285350000001,Bs:1.040417467,Cs:1.089532651,MtxAdaptMa:{m00:.8951,m01:-.7502,m02:.0389,m10:.2664,m11:1.7135,m12:-.0685,m20:-.1614,m21:.0367,m22:1.0296},MtxAdaptMaI:{m00:.9869929054667123,m01:.43230526972339456,m02:-.008528664575177328,m10:-.14705425642099013,m11:.5183602715367776,m12:.04004282165408487,m20:.15996265166373125,m21:.0492912282128556,m22:.9684866957875502}},XZ=new Map([["a",[1.0985,.35585]],["b",[1.0985,.35585]],["c",[.98074,1.18232]],["d50",[.96422,.82521]],["d55",[.95682,.92149]],["d65",[.95047,1.08883]],["e",[1,1,1]],["f2",[.99186,.67393]],["f7",[.95041,1.08747]],["f11",[1.00962,.6435]],["icc",[.96422,.82521]]]);function Af(n){const e=XZ.get(String(n).toLowerCase());if(!e)throw new Error("unknown Lab illuminant "+n);uu.labWhitePoint=n,uu.Xn=e[0],uu.Zn=e[1]}function qb(){return uu.labWhitePoint}const QD=(...n)=>{n=xn(n,"lab");const[e,t,i]=n,[r,s,o]=qZ(e,t,i),[a,l,u]=oB(r,s,o);return[a,l,u,n.length>3?n[3]:1]},qZ=(n,e,t)=>{const{kE:i,kK:r,kKE:s,Xn:o,Yn:a,Zn:l}=uu,u=(n+16)/116,h=.002*e+u,p=u-.005*t,m=h*h*h,y=p*p*p,b=m>i?m:(116*h-16)/r,x=n>s?Math.pow((n+16)/116,3):n/r,S=y>i?y:(116*p-16)/r,_=b*o,T=x*a,A=S*l;return[_,T,A]},vA=n=>{const e=Math.sign(n);return n=Math.abs(n),(n<=.0031308?n*12.92:1.055*Math.pow(n,1/2.4)-.055)*e},oB=(n,e,t)=>{const{MtxAdaptMa:i,MtxAdaptMaI:r,MtxXYZ2RGB:s,RefWhiteRGB:o,Xn:a,Yn:l,Zn:u}=uu,h=a*i.m00+l*i.m10+u*i.m20,p=a*i.m01+l*i.m11+u*i.m21,m=a*i.m02+l*i.m12+u*i.m22,y=o.X*i.m00+o.Y*i.m10+o.Z*i.m20,b=o.X*i.m01+o.Y*i.m11+o.Z*i.m21,x=o.X*i.m02+o.Y*i.m12+o.Z*i.m22,S=(n*i.m00+e*i.m10+t*i.m20)*(y/h),_=(n*i.m01+e*i.m11+t*i.m21)*(b/p),T=(n*i.m02+e*i.m12+t*i.m22)*(x/m),A=S*r.m00+_*r.m10+T*r.m20,M=S*r.m01+_*r.m11+T*r.m21,C=S*r.m02+_*r.m12+T*r.m22,R=vA(A*s.m00+M*s.m10+C*s.m20),L=vA(A*s.m01+M*s.m11+C*s.m21),I=vA(A*s.m02+M*s.m12+C*s.m22);return[R*255,L*255,I*255]},JD=(...n)=>{const[e,t,i,...r]=xn(n,"rgb"),[s,o,a]=aB(e,t,i),[l,u,h]=YZ(s,o,a);return[l,u,h,...r.length>0&&r[0]<1?[r[0]]:[]]};function YZ(n,e,t){const{Xn:i,Yn:r,Zn:s,kE:o,kK:a}=uu,l=n/i,u=e/r,h=t/s,p=l>o?Math.pow(l,1/3):(a*l+16)/116,m=u>o?Math.pow(u,1/3):(a*u+16)/116,y=h>o?Math.pow(h,1/3):(a*h+16)/116;return[116*m-16,500*(p-m),200*(m-y)]}function yA(n){const e=Math.sign(n);return n=Math.abs(n),(n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4))*e}const aB=(n,e,t)=>{n=yA(n/255),e=yA(e/255),t=yA(t/255);const{MtxRGB2XYZ:i,MtxAdaptMa:r,MtxAdaptMaI:s,Xn:o,Yn:a,Zn:l,As:u,Bs:h,Cs:p}=uu;let m=n*i.m00+e*i.m10+t*i.m20,y=n*i.m01+e*i.m11+t*i.m21,b=n*i.m02+e*i.m12+t*i.m22;const x=o*r.m00+a*r.m10+l*r.m20,S=o*r.m01+a*r.m11+l*r.m21,_=o*r.m02+a*r.m12+l*r.m22;let T=m*r.m00+y*r.m10+b*r.m20,A=m*r.m01+y*r.m11+b*r.m21,M=m*r.m02+y*r.m12+b*r.m22;return T*=x/u,A*=S/h,M*=_/p,m=T*s.m00+A*s.m10+M*s.m20,y=T*s.m01+A*s.m11+M*s.m21,b=T*s.m02+A*s.m12+M*s.m22,[m,y,b]};pt.prototype.lab=function(){return JD(this._rgb)};const $Z=(...n)=>new pt(...n,"lab");Object.assign(jn,{lab:$Z,getLabWhitePoint:qb,setLabWhitePoint:Af});dn.format.lab=QD;dn.autodetect.push({p:2,test:(...n)=>{if(n=xn(n,"lab"),Ln(n)==="array"&&n.length===3)return"lab"}});pt.prototype.darken=function(n=1){const e=this,t=e.lab();return t[0]-=uu.Kn*n,new pt(t,"lab").alpha(e.alpha(),!0)};pt.prototype.brighten=function(n=1){return this.darken(-n)};pt.prototype.darker=pt.prototype.darken;pt.prototype.brighter=pt.prototype.brighten;pt.prototype.get=function(n){const[e,t]=n.split("."),i=this[e]();if(t){const r=e.indexOf(t)-(e.substr(0,2)==="ok"?2:0);if(r>-1)return i[r];throw new Error(`unknown channel ${t} in mode ${e}`)}else return i};const{pow:ZZ}=Math,KZ=1e-7,QZ=20;pt.prototype.luminance=function(n,e="rgb"){if(n!==void 0&&Ln(n)==="number"){if(n===0)return new pt([0,0,0,this._rgb[3]],"rgb");if(n===1)return new pt([255,255,255,this._rgb[3]],"rgb");let t=this.luminance(),i=QZ;const r=(o,a)=>{const l=o.interpolate(a,.5,e),u=l.luminance();return Math.abs(n-u)<KZ||!i--?l:u>n?r(o,l):r(l,a)},s=(t>n?r(new pt([0,0,0]),this):r(this,new pt([255,255,255]))).rgb();return new pt([...s,this._rgb[3]])}return JZ(...this._rgb.slice(0,3))};const JZ=(n,e,t)=>(n=bA(n),e=bA(e),t=bA(t),.2126*n+.7152*e+.0722*t),bA=n=>(n/=255,n<=.03928?n/12.92:ZZ((n+.055)/1.055,2.4)),Js={},v0=(n,e,t=.5,...i)=>{let r=i[0]||"lrgb";if(!Js[r]&&!i.length&&(r=Object.keys(Js)[0]),!Js[r])throw new Error(`interpolation mode ${r} is not defined`);return Ln(n)!=="object"&&(n=new pt(n)),Ln(e)!=="object"&&(e=new pt(e)),Js[r](n,e,t).alpha(n.alpha()+t*(e.alpha()-n.alpha()))};pt.prototype.mix=pt.prototype.interpolate=function(n,e=.5,...t){return v0(this,n,e,...t)};pt.prototype.premultiply=function(n=!1){const e=this._rgb,t=e[3];return n?(this._rgb=[e[0]*t,e[1]*t,e[2]*t,t],this):new pt([e[0]*t,e[1]*t,e[2]*t,t],"rgb")};const{sin:eK,cos:tK}=Math,lB=(...n)=>{let[e,t,i]=xn(n,"lch");return isNaN(i)&&(i=0),i=i*VZ,[e,tK(i)*t,eK(i)*t]},eO=(...n)=>{n=xn(n,"lch");const[e,t,i]=n,[r,s,o]=lB(e,t,i),[a,l,u]=QD(r,s,o);return[a,l,u,n.length>3?n[3]:1]},nK=(...n)=>{const e=iB(xn(n,"hcl"));return eO(...e)},{sqrt:iK,atan2:rK,round:sK}=Math,cB=(...n)=>{const[e,t,i]=xn(n,"lab"),r=iK(t*t+i*i);let s=(rK(i,t)*GZ+360)%360;return sK(r*1e4)===0&&(s=Number.NaN),[e,r,s]},tO=(...n)=>{const[e,t,i,...r]=xn(n,"rgb"),[s,o,a]=JD(e,t,i),[l,u,h]=cB(s,o,a);return[l,u,h,...r.length>0&&r[0]<1?[r[0]]:[]]};pt.prototype.lch=function(){return tO(this._rgb)};pt.prototype.hcl=function(){return iB(tO(this._rgb))};const oK=(...n)=>new pt(...n,"lch"),aK=(...n)=>new pt(...n,"hcl");Object.assign(jn,{lch:oK,hcl:aK});dn.format.lch=eO;dn.format.hcl=nK;["lch","hcl"].forEach(n=>dn.autodetect.push({p:2,test:(...e)=>{if(e=xn(e,n),Ln(e)==="array"&&e.length===3)return n}}));pt.prototype.saturate=function(n=1){const e=this,t=e.lch();return t[1]+=uu.Kn*n,t[1]<0&&(t[1]=0),new pt(t,"lch").alpha(e.alpha(),!0)};pt.prototype.desaturate=function(n=1){return this.saturate(-n)};pt.prototype.set=function(n,e,t=!1){const[i,r]=n.split("."),s=this[i]();if(r){const o=i.indexOf(r)-(i.substr(0,2)==="ok"?2:0);if(o>-1){if(Ln(e)=="string")switch(e.charAt(0)){case"+":s[o]+=+e;break;case"-":s[o]+=+e;break;case"*":s[o]*=+e.substr(1);break;case"/":s[o]/=+e.substr(1);break;default:s[o]=+e}else if(Ln(e)==="number")s[o]=e;else throw new Error("unsupported value for Color.set");const a=new pt(s,i);return t?(this._rgb=a._rgb,this):a}throw new Error(`unknown channel ${r} in mode ${i}`)}else return s};pt.prototype.tint=function(n=.5,...e){return v0(this,"white",n,...e)};pt.prototype.shade=function(n=.5,...e){return v0(this,"black",n,...e)};const lK=(n,e,t)=>{const i=n._rgb,r=e._rgb;return new pt(i[0]+t*(r[0]-i[0]),i[1]+t*(r[1]-i[1]),i[2]+t*(r[2]-i[2]),"rgb")};Js.rgb=lK;const{sqrt:_A,pow:cg}=Math,cK=(n,e,t)=>{const[i,r,s]=n._rgb,[o,a,l]=e._rgb;return new pt(_A(cg(i,2)*(1-t)+cg(o,2)*t),_A(cg(r,2)*(1-t)+cg(a,2)*t),_A(cg(s,2)*(1-t)+cg(l,2)*t),"rgb")};Js.lrgb=cK;const uK=(n,e,t)=>{const i=n.lab(),r=e.lab();return new pt(i[0]+t*(r[0]-i[0]),i[1]+t*(r[1]-i[1]),i[2]+t*(r[2]-i[2]),"lab")};Js.lab=uK;const G0=(n,e,t,i)=>{let r,s;i==="hsl"?(r=n.hsl(),s=e.hsl()):i==="hsv"?(r=n.hsv(),s=e.hsv()):i==="hcg"?(r=n.hcg(),s=e.hcg()):i==="hsi"?(r=n.hsi(),s=e.hsi()):i==="lch"||i==="hcl"?(i="hcl",r=n.hcl(),s=e.hcl()):i==="oklch"&&(r=n.oklch().reverse(),s=e.oklch().reverse());let o,a,l,u,h,p;(i.substr(0,1)==="h"||i==="oklch")&&([o,l,h]=r,[a,u,p]=s);let m,y,b,x;return!isNaN(o)&&!isNaN(a)?(a>o&&a-o>180?x=a-(o+360):a<o&&o-a>180?x=a+360-o:x=a-o,y=o+t*x):isNaN(o)?isNaN(a)?y=Number.NaN:(y=a,(h==1||h==0)&&i!="hsv"&&(m=u)):(y=o,(p==1||p==0)&&i!="hsv"&&(m=l)),m===void 0&&(m=l+t*(u-l)),b=h+t*(p-h),i==="oklch"?new pt([b,m,y],i):new pt([y,m,b],i)},uB=(n,e,t)=>G0(n,e,t,"lch");Js.lch=uB;Js.hcl=uB;const fK=n=>{if(Ln(n)=="number"&&n>=0&&n<=16777215){const e=n>>16,t=n>>8&255,i=n&255;return[e,t,i,1]}throw new Error("unknown num color: "+n)},hK=(...n)=>{const[e,t,i]=xn(n,"rgb");return(e<<16)+(t<<8)+i};pt.prototype.num=function(){return hK(this._rgb)};const dK=(...n)=>new pt(...n,"num");Object.assign(jn,{num:dK});dn.format.num=fK;dn.autodetect.push({p:5,test:(...n)=>{if(n.length===1&&Ln(n[0])==="number"&&n[0]>=0&&n[0]<=16777215)return"num"}});const pK=(n,e,t)=>{const i=n.num(),r=e.num();return new pt(i+t*(r-i),"num")};Js.num=pK;const{floor:mK}=Math,gK=(...n)=>{n=xn(n,"hcg");let[e,t,i]=n,r,s,o;i=i*255;const a=t*255;if(t===0)r=s=o=i;else{e===360&&(e=0),e>360&&(e-=360),e<0&&(e+=360),e/=60;const l=mK(e),u=e-l,h=i*(1-t),p=h+a*(1-u),m=h+a*u,y=h+a;switch(l){case 0:[r,s,o]=[y,m,h];break;case 1:[r,s,o]=[p,y,h];break;case 2:[r,s,o]=[h,y,m];break;case 3:[r,s,o]=[h,p,y];break;case 4:[r,s,o]=[m,h,y];break;case 5:[r,s,o]=[y,h,p];break}}return[r,s,o,n.length>3?n[3]:1]},vK=(...n)=>{const[e,t,i]=xn(n,"rgb"),r=tB(e,t,i),s=nB(e,t,i),o=s-r,a=o*100/255,l=r/(255-o)*100;let u;return o===0?u=Number.NaN:(e===s&&(u=(t-i)/o),t===s&&(u=2+(i-e)/o),i===s&&(u=4+(e-t)/o),u*=60,u<0&&(u+=360)),[u,a,l]};pt.prototype.hcg=function(){return vK(this._rgb)};const yK=(...n)=>new pt(...n,"hcg");jn.hcg=yK;dn.format.hcg=gK;dn.autodetect.push({p:1,test:(...n)=>{if(n=xn(n,"hcg"),Ln(n)==="array"&&n.length===3)return"hcg"}});const bK=(n,e,t)=>G0(n,e,t,"hcg");Js.hcg=bK;const{cos:ug}=Math,_K=(...n)=>{n=xn(n,"hsi");let[e,t,i]=n,r,s,o;return isNaN(e)&&(e=0),isNaN(t)&&(t=0),e>360&&(e-=360),e<0&&(e+=360),e/=360,e<1/3?(o=(1-t)/3,r=(1+t*ug(vf*e)/ug(gA-vf*e))/3,s=1-(o+r)):e<2/3?(e-=1/3,r=(1-t)/3,s=(1+t*ug(vf*e)/ug(gA-vf*e))/3,o=1-(r+s)):(e-=2/3,s=(1-t)/3,o=(1+t*ug(vf*e)/ug(gA-vf*e))/3,r=1-(s+o)),r=Bp(i*r*3),s=Bp(i*s*3),o=Bp(i*o*3),[r*255,s*255,o*255,n.length>3?n[3]:1]},{min:xK,sqrt:SK,acos:wK}=Math,EK=(...n)=>{let[e,t,i]=xn(n,"rgb");e/=255,t/=255,i/=255;let r;const s=xK(e,t,i),o=(e+t+i)/3,a=o>0?1-s/o:0;return a===0?r=NaN:(r=(e-t+(e-i))/2,r/=SK((e-t)*(e-t)+(e-i)*(t-i)),r=wK(r),i>t&&(r=vf-r),r/=vf),[r*360,a,o]};pt.prototype.hsi=function(){return EK(this._rgb)};const TK=(...n)=>new pt(...n,"hsi");jn.hsi=TK;dn.format.hsi=_K;dn.autodetect.push({p:2,test:(...n)=>{if(n=xn(n,"hsi"),Ln(n)==="array"&&n.length===3)return"hsi"}});const MK=(n,e,t)=>G0(n,e,t,"hsi");Js.hsi=MK;const a3=(...n)=>{n=xn(n,"hsl");const[e,t,i]=n;let r,s,o;if(t===0)r=s=o=i*255;else{const a=[0,0,0],l=[0,0,0],u=i<.5?i*(1+t):i+t-i*t,h=2*i-u,p=e/360;a[0]=p+1/3,a[1]=p,a[2]=p-1/3;for(let m=0;m<3;m++)a[m]<0&&(a[m]+=1),a[m]>1&&(a[m]-=1),6*a[m]<1?l[m]=h+(u-h)*6*a[m]:2*a[m]<1?l[m]=u:3*a[m]<2?l[m]=h+(u-h)*(2/3-a[m])*6:l[m]=h;[r,s,o]=[l[0]*255,l[1]*255,l[2]*255]}return n.length>3?[r,s,o,n[3]]:[r,s,o,1]},fB=(...n)=>{n=xn(n,"rgba");let[e,t,i]=n;e/=255,t/=255,i/=255;const r=tB(e,t,i),s=nB(e,t,i),o=(s+r)/2;let a,l;return s===r?(a=0,l=Number.NaN):a=o<.5?(s-r)/(s+r):(s-r)/(2-s-r),e==s?l=(t-i)/(s-r):t==s?l=2+(i-e)/(s-r):i==s&&(l=4+(e-t)/(s-r)),l*=60,l<0&&(l+=360),n.length>3&&n[3]!==void 0?[l,a,o,n[3]]:[l,a,o]};pt.prototype.hsl=function(){return fB(this._rgb)};const AK=(...n)=>new pt(...n,"hsl");jn.hsl=AK;dn.format.hsl=a3;dn.autodetect.push({p:2,test:(...n)=>{if(n=xn(n,"hsl"),Ln(n)==="array"&&n.length===3)return"hsl"}});const CK=(n,e,t)=>G0(n,e,t,"hsl");Js.hsl=CK;const{floor:RK}=Math,DK=(...n)=>{n=xn(n,"hsv");let[e,t,i]=n,r,s,o;if(i*=255,t===0)r=s=o=i;else{e===360&&(e=0),e>360&&(e-=360),e<0&&(e+=360),e/=60;const a=RK(e),l=e-a,u=i*(1-t),h=i*(1-t*l),p=i*(1-t*(1-l));switch(a){case 0:[r,s,o]=[i,p,u];break;case 1:[r,s,o]=[h,i,u];break;case 2:[r,s,o]=[u,i,p];break;case 3:[r,s,o]=[u,h,i];break;case 4:[r,s,o]=[p,u,i];break;case 5:[r,s,o]=[i,u,h];break}}return[r,s,o,n.length>3?n[3]:1]},{min:OK,max:LK}=Math,PK=(...n)=>{n=xn(n,"rgb");let[e,t,i]=n;const r=OK(e,t,i),s=LK(e,t,i),o=s-r;let a,l,u;return u=s/255,s===0?(a=Number.NaN,l=0):(l=o/s,e===s&&(a=(t-i)/o),t===s&&(a=2+(i-e)/o),i===s&&(a=4+(e-t)/o),a*=60,a<0&&(a+=360)),[a,l,u]};pt.prototype.hsv=function(){return PK(this._rgb)};const IK=(...n)=>new pt(...n,"hsv");jn.hsv=IK;dn.format.hsv=DK;dn.autodetect.push({p:2,test:(...n)=>{if(n=xn(n,"hsv"),Ln(n)==="array"&&n.length===3)return"hsv"}});const NK=(n,e,t)=>G0(n,e,t,"hsv");Js.hsv=NK;function Pw(n,e){let t=n.length;Array.isArray(n[0])||(n=[n]),Array.isArray(e[0])||(e=e.map(o=>[o]));let i=e[0].length,r=e[0].map((o,a)=>e.map(l=>l[a])),s=n.map(o=>r.map(a=>Array.isArray(o)?o.reduce((l,u,h)=>l+u*(a[h]||0),0):a.reduce((l,u)=>l+u*o,0)));return t===1&&(s=s[0]),i===1?s.map(o=>o[0]):s}const nO=(...n)=>{n=xn(n,"lab");const[e,t,i,...r]=n,[s,o,a]=UK([e,t,i]),[l,u,h]=oB(s,o,a);return[l,u,h,...r.length>0&&r[0]<1?[r[0]]:[]]};function UK(n){var e=[[1.2268798758459243,-.5578149944602171,.2813910456659647],[-.0405757452148008,1.112286803280317,-.0717110580655164],[-.0763729366746601,-.4214933324022432,1.5869240198367816]],t=[[1,.3963377773761749,.2158037573099136],[1,-.1055613458156586,-.0638541728258133],[1,-.0894841775298119,-1.2914855480194092]],i=Pw(t,n);return Pw(e,i.map(r=>r**3))}const iO=(...n)=>{const[e,t,i,...r]=xn(n,"rgb"),s=aB(e,t,i);return[...kK(s),...r.length>0&&r[0]<1?[r[0]]:[]]};function kK(n){const e=[[.819022437996703,.3619062600528904,-.1288737815209879],[.0329836539323885,.9292868615863434,.0361446663506424],[.0481771893596242,.2642395317527308,.6335478284694309]],t=[[.210454268309314,.7936177747023054,-.0040720430116193],[1.9779985324311684,-2.42859224204858,.450593709617411],[.0259040424655478,.7827717124575296,-.8086757549230774]],i=Pw(e,n);return Pw(t,i.map(r=>Math.cbrt(r)))}pt.prototype.oklab=function(){return iO(this._rgb)};const zK=(...n)=>new pt(...n,"oklab");Object.assign(jn,{oklab:zK});dn.format.oklab=nO;dn.autodetect.push({p:2,test:(...n)=>{if(n=xn(n,"oklab"),Ln(n)==="array"&&n.length===3)return"oklab"}});const FK=(n,e,t)=>{const i=n.oklab(),r=e.oklab();return new pt(i[0]+t*(r[0]-i[0]),i[1]+t*(r[1]-i[1]),i[2]+t*(r[2]-i[2]),"oklab")};Js.oklab=FK;const BK=(n,e,t)=>G0(n,e,t,"oklch");Js.oklch=BK;const{pow:xA,sqrt:SA,PI:wA,cos:DN,sin:ON,atan2:VK}=Math,GK=(n,e="lrgb",t=null)=>{const i=n.length;t||(t=Array.from(new Array(i)).map(()=>1));const r=i/t.reduce(function(p,m){return p+m});if(t.forEach((p,m)=>{t[m]*=r}),n=n.map(p=>new pt(p)),e==="lrgb")return HK(n,t);const s=n.shift(),o=s.get(e),a=[];let l=0,u=0;for(let p=0;p<o.length;p++)if(o[p]=(o[p]||0)*t[0],a.push(isNaN(o[p])?0:t[0]),e.charAt(p)==="h"&&!isNaN(o[p])){const m=o[p]/180*wA;l+=DN(m)*t[0],u+=ON(m)*t[0]}let h=s.alpha()*t[0];n.forEach((p,m)=>{const y=p.get(e);h+=p.alpha()*t[m+1];for(let b=0;b<o.length;b++)if(!isNaN(y[b]))if(a[b]+=t[m+1],e.charAt(b)==="h"){const x=y[b]/180*wA;l+=DN(x)*t[m+1],u+=ON(x)*t[m+1]}else o[b]+=y[b]*t[m+1]});for(let p=0;p<o.length;p++)if(e.charAt(p)==="h"){let m=VK(u/a[p],l/a[p])/wA*180;for(;m<0;)m+=360;for(;m>=360;)m-=360;o[p]=m}else o[p]=o[p]/a[p];return h/=i,new pt(o,e).alpha(h>.99999?1:h,!0)},HK=(n,e)=>{const t=n.length,i=[0,0,0,0];for(let r=0;r<n.length;r++){const s=n[r],o=e[r]/t,a=s._rgb;i[0]+=xA(a[0],2)*o,i[1]+=xA(a[1],2)*o,i[2]+=xA(a[2],2)*o,i[3]+=a[3]*o}return i[0]=SA(i[0]),i[1]=SA(i[1]),i[2]=SA(i[2]),i[3]>.9999999&&(i[3]=1),new pt(KD(i))},{pow:jK}=Math;function Iw(n){let e="rgb",t=jn("#ccc"),i=0,r=[0,1],s=[0,1],o=[],a=[0,0],l=!1,u=[],h=!1,p=0,m=1,y=!1,b={},x=!0,S=1;const _=function(I){if(I=I||["#fff","#000"],I&&Ln(I)==="string"&&jn.brewer&&jn.brewer[I.toLowerCase()]&&(I=jn.brewer[I.toLowerCase()]),Ln(I)==="array"){I.length===1&&(I=[I[0],I[0]]),I=I.slice(0);for(let P=0;P<I.length;P++)I[P]=jn(I[P]);o.length=0;for(let P=0;P<I.length;P++)o.push(P/(I.length-1))}return R(),u=I},T=function(I){if(l!=null){const P=l.length-1;let U=0;for(;U<P&&I>=l[U];)U++;return U-1}return 0};let A=I=>I,M=I=>I;const C=function(I,P){let U,B;if(P==null&&(P=!1),isNaN(I)||I===null)return t;P?B=I:l&&l.length>2?B=T(I)/(l.length-2):m!==p?B=(I-p)/(m-p):B=1,B=M(B),P||(B=A(B)),S!==1&&(B=jK(B,S)),B=a[0]+B*(1-a[0]-a[1]),B=Bp(B,0,1);const F=Math.floor(B*1e4);if(x&&b[F])U=b[F];else{if(Ln(u)==="array")for(let z=0;z<o.length;z++){const W=o[z];if(B<=W){U=u[z];break}if(B>=W&&z===o.length-1){U=u[z];break}if(B>W&&B<o[z+1]){B=(B-W)/(o[z+1]-W),U=jn.interpolate(u[z],u[z+1],B,e);break}}else Ln(u)==="function"&&(U=u(B));x&&(b[F]=U)}return U};var R=()=>b={};_(n);const L=function(I){const P=jn(C(I));return h&&P[h]?P[h]():P};return L.classes=function(I){if(I!=null){if(Ln(I)==="array")l=I,r=[I[0],I[I.length-1]];else{const P=jn.analyze(r);I===0?l=[P.min,P.max]:l=jn.limits(P,"e",I)}return L}return l},L.domain=function(I){if(!arguments.length)return s;s=I.slice(0),p=I[0],m=I[I.length-1],o=[];const P=u.length;if(I.length===P&&p!==m)for(let U of Array.from(I))o.push((U-p)/(m-p));else{for(let U=0;U<P;U++)o.push(U/(P-1));if(I.length>2){const U=I.map((F,z)=>z/(I.length-1)),B=I.map(F=>(F-p)/(m-p));B.every((F,z)=>U[z]===F)||(M=F=>{if(F<=0||F>=1)return F;let z=0;for(;F>=B[z+1];)z++;const W=(F-B[z])/(B[z+1]-B[z]);return U[z]+W*(U[z+1]-U[z])})}}return r=[p,m],L},L.mode=function(I){return arguments.length?(e=I,R(),L):e},L.range=function(I,P){return _(I),L},L.out=function(I){return h=I,L},L.spread=function(I){return arguments.length?(i=I,L):i},L.correctLightness=function(I){return I==null&&(I=!0),y=I,R(),y?A=function(P){const U=C(0,!0).lab()[0],B=C(1,!0).lab()[0],F=U>B;let z=C(P,!0).lab()[0];const W=U+(B-U)*P;let X=z-W,j=0,G=1,K=20;for(;Math.abs(X)>.01&&K-- >0;)(function(){return F&&(X*=-1),X<0?(j=P,P+=(G-P)*.5):(G=P,P+=(j-P)*.5),z=C(P,!0).lab()[0],X=z-W})();return P}:A=P=>P,L},L.padding=function(I){return I!=null?(Ln(I)==="number"&&(I=[I,I]),a=I,L):a},L.colors=function(I,P){arguments.length<2&&(P="hex");let U=[];if(arguments.length===0)U=u.slice(0);else if(I===1)U=[L(.5)];else if(I>1){const B=r[0],F=r[1]-B;U=WK(0,I).map(z=>L(B+z/(I-1)*F))}else{n=[];let B=[];if(l&&l.length>2)for(let F=1,z=l.length,W=1<=z;W?F<z:F>z;W?F++:F--)B.push((l[F-1]+l[F])*.5);else B=r;U=B.map(F=>L(F))}return jn[P]&&(U=U.map(B=>B[P]())),U},L.cache=function(I){return I!=null?(x=I,L):x},L.gamma=function(I){return I!=null?(S=I,L):S},L.nodata=function(I){return I!=null?(t=jn(I),L):t},L}function WK(n,e,t){let i=[],r=n<e,s=e;for(let o=n;r?o<s:o>s;r?o++:o--)i.push(o);return i}const XK=function(n){let e=[1,1];for(let t=1;t<n;t++){let i=[1];for(let r=1;r<=e.length;r++)i[r]=(e[r]||0)+e[r-1];e=i}return e},qK=function(n){let e,t,i,r;if(n=n.map(s=>new pt(s)),n.length===2)[t,i]=n.map(s=>s.lab()),e=function(s){const o=[0,1,2].map(a=>t[a]+s*(i[a]-t[a]));return new pt(o,"lab")};else if(n.length===3)[t,i,r]=n.map(s=>s.lab()),e=function(s){const o=[0,1,2].map(a=>(1-s)*(1-s)*t[a]+2*(1-s)*s*i[a]+s*s*r[a]);return new pt(o,"lab")};else if(n.length===4){let s;[t,i,r,s]=n.map(o=>o.lab()),e=function(o){const a=[0,1,2].map(l=>(1-o)*(1-o)*(1-o)*t[l]+3*(1-o)*(1-o)*o*i[l]+3*(1-o)*o*o*r[l]+o*o*o*s[l]);return new pt(a,"lab")}}else if(n.length>=5){let s,o,a;s=n.map(l=>l.lab()),a=n.length-1,o=XK(a),e=function(l){const u=1-l,h=[0,1,2].map(p=>s.reduce((m,y,b)=>m+o[b]*u**(a-b)*l**b*y[p],0));return new pt(h,"lab")}}else throw new RangeError("No point in running bezier with only one color.");return e},YK=n=>{const e=qK(n);return e.scale=()=>Iw(e),e},{round:hB}=Math;pt.prototype.rgb=function(n=!0){return n===!1?this._rgb.slice(0,3):this._rgb.slice(0,3).map(hB)};pt.prototype.rgba=function(n=!0){return this._rgb.slice(0,4).map((e,t)=>t<3?n===!1?e:hB(e):e)};const $K=(...n)=>new pt(...n,"rgb");Object.assign(jn,{rgb:$K});dn.format.rgb=(...n)=>{const e=xn(n,"rgba");return e[3]===void 0&&(e[3]=1),e};dn.autodetect.push({p:3,test:(...n)=>{if(n=xn(n,"rgba"),Ln(n)==="array"&&(n.length===3||n.length===4&&Ln(n[3])=="number"&&n[3]>=0&&n[3]<=1))return"rgb"}});const uc=(n,e,t)=>{if(!uc[t])throw new Error("unknown blend mode "+t);return uc[t](n,e)},dd=n=>(e,t)=>{const i=jn(t).rgb(),r=jn(e).rgb();return jn.rgb(n(i,r))},pd=n=>(e,t)=>{const i=[];return i[0]=n(e[0],t[0]),i[1]=n(e[1],t[1]),i[2]=n(e[2],t[2]),i},ZK=n=>n,KK=(n,e)=>n*e/255,QK=(n,e)=>n>e?e:n,JK=(n,e)=>n>e?n:e,eQ=(n,e)=>255*(1-(1-n/255)*(1-e/255)),tQ=(n,e)=>e<128?2*n*e/255:255*(1-2*(1-n/255)*(1-e/255)),nQ=(n,e)=>255*(1-(1-e/255)/(n/255)),iQ=(n,e)=>n===255?255:(n=255*(e/255)/(1-n/255),n>255?255:n);uc.normal=dd(pd(ZK));uc.multiply=dd(pd(KK));uc.screen=dd(pd(eQ));uc.overlay=dd(pd(tQ));uc.darken=dd(pd(QK));uc.lighten=dd(pd(JK));uc.dodge=dd(pd(iQ));uc.burn=dd(pd(nQ));const{pow:rQ,sin:sQ,cos:oQ}=Math;function aQ(n=300,e=-1.5,t=1,i=1,r=[0,1]){let s=0,o;Ln(r)==="array"?o=r[1]-r[0]:(o=0,r=[r,r]);const a=function(l){const u=vf*((n+120)/360+e*l),h=rQ(r[0]+o*l,i),m=(s!==0?t[0]+l*s:t)*h*(1-h)/2,y=oQ(u),b=sQ(u),x=h+m*(-.14861*y+1.78277*b),S=h+m*(-.29227*y-.90649*b),_=h+m*(1.97294*y);return jn(KD([x*255,S*255,_*255,1]))};return a.start=function(l){return l==null?n:(n=l,a)},a.rotations=function(l){return l==null?e:(e=l,a)},a.gamma=function(l){return l==null?i:(i=l,a)},a.hue=function(l){return l==null?t:(t=l,Ln(t)==="array"?(s=t[1]-t[0],s===0&&(t=t[1])):s=0,a)},a.lightness=function(l){return l==null?r:(Ln(l)==="array"?(r=l,o=l[1]-l[0]):(r=[l,l],o=0),a)},a.scale=()=>jn.scale(a),a.hue(t),a}const lQ="0123456789abcdef",{floor:cQ,random:uQ}=Math,fQ=(n=uQ)=>{let e="#";for(let t=0;t<6;t++)e+=lQ.charAt(cQ(n()*16));return new pt(e,"hex")},{log:LN,pow:hQ,floor:dQ,abs:pQ}=Math;function dB(n,e=null){const t={min:Number.MAX_VALUE,max:Number.MAX_VALUE*-1,sum:0,values:[],count:0};return Ln(n)==="object"&&(n=Object.values(n)),n.forEach(i=>{e&&Ln(i)==="object"&&(i=i[e]),i!=null&&!isNaN(i)&&(t.values.push(i),t.sum+=i,i<t.min&&(t.min=i),i>t.max&&(t.max=i),t.count+=1)}),t.domain=[t.min,t.max],t.limits=(i,r)=>pB(t,i,r),t}function pB(n,e="equal",t=7){Ln(n)=="array"&&(n=dB(n));const{min:i,max:r}=n,s=n.values.sort((a,l)=>a-l);if(t===1)return[i,r];const o=[];if(e.substr(0,1)==="c"&&(o.push(i),o.push(r)),e.substr(0,1)==="e"){o.push(i);for(let a=1;a<t;a++)o.push(i+a/t*(r-i));o.push(r)}else if(e.substr(0,1)==="l"){if(i<=0)throw new Error("Logarithmic scales are only possible for values > 0");const a=Math.LOG10E*LN(i),l=Math.LOG10E*LN(r);o.push(i);for(let u=1;u<t;u++)o.push(hQ(10,a+u/t*(l-a)));o.push(r)}else if(e.substr(0,1)==="q"){o.push(i);for(let a=1;a<t;a++){const l=(s.length-1)*a/t,u=dQ(l);if(u===l)o.push(s[u]);else{const h=l-u;o.push(s[u]*(1-h)+s[u+1]*h)}}o.push(r)}else if(e.substr(0,1)==="k"){let a;const l=s.length,u=new Array(l),h=new Array(t);let p=!0,m=0,y=null;y=[],y.push(i);for(let S=1;S<t;S++)y.push(i+S/t*(r-i));for(y.push(r);p;){for(let _=0;_<t;_++)h[_]=0;for(let _=0;_<l;_++){const T=s[_];let A=Number.MAX_VALUE,M;for(let C=0;C<t;C++){const R=pQ(y[C]-T);R<A&&(A=R,M=C),h[M]++,u[_]=M}}const S=new Array(t);for(let _=0;_<t;_++)S[_]=null;for(let _=0;_<l;_++)a=u[_],S[a]===null?S[a]=s[_]:S[a]+=s[_];for(let _=0;_<t;_++)S[_]*=1/h[_];p=!1;for(let _=0;_<t;_++)if(S[_]!==y[_]){p=!0;break}y=S,m++,m>200&&(p=!1)}const b={};for(let S=0;S<t;S++)b[S]=[];for(let S=0;S<l;S++)a=u[S],b[a].push(s[S]);let x=[];for(let S=0;S<t;S++)x.push(b[S][0]),x.push(b[S][b[S].length-1]);x=x.sort((S,_)=>S-_),o.push(x[0]);for(let S=1;S<x.length;S+=2){const _=x[S];!isNaN(_)&&o.indexOf(_)===-1&&o.push(_)}}return o}const mQ=(n,e)=>{n=new pt(n),e=new pt(e);const t=n.luminance(),i=e.luminance();return t>i?(t+.05)/(i+.05):(i+.05)/(t+.05)};const PN=.027,gQ=5e-4,vQ=.1,IN=1.14,O1=.022,NN=1.414,yQ=(n,e)=>{n=new pt(n),e=new pt(e),n.alpha()<1&&(n=v0(e,n,n.alpha(),"rgb"));const t=UN(...n.rgb()),i=UN(...e.rgb()),r=t>=O1?t:t+Math.pow(O1-t,NN),s=i>=O1?i:i+Math.pow(O1-i,NN),o=Math.pow(s,.56)-Math.pow(r,.57),a=Math.pow(s,.65)-Math.pow(r,.62),l=Math.abs(s-r)<gQ?0:r<s?o*IN:a*IN;return(Math.abs(l)<vQ?0:l>0?l-PN:l+PN)*100};function UN(n,e,t){return .2126729*Math.pow(n/255,2.4)+.7151522*Math.pow(e/255,2.4)+.072175*Math.pow(t/255,2.4)}const{sqrt:sf,pow:Ir,min:bQ,max:_Q,atan2:kN,abs:zN,cos:L1,sin:FN,exp:xQ,PI:BN}=Math;function SQ(n,e,t=1,i=1,r=1){var s=function(Q){return 360*Q/(2*BN)},o=function(Q){return 2*BN*Q/360};n=new pt(n),e=new pt(e);const[a,l,u]=Array.from(n.lab()),[h,p,m]=Array.from(e.lab()),y=(a+h)/2,b=sf(Ir(l,2)+Ir(u,2)),x=sf(Ir(p,2)+Ir(m,2)),S=(b+x)/2,_=.5*(1-sf(Ir(S,7)/(Ir(S,7)+Ir(25,7)))),T=l*(1+_),A=p*(1+_),M=sf(Ir(T,2)+Ir(u,2)),C=sf(Ir(A,2)+Ir(m,2)),R=(M+C)/2,L=s(kN(u,T)),I=s(kN(m,A)),P=L>=0?L:L+360,U=I>=0?I:I+360,B=zN(P-U)>180?(P+U+360)/2:(P+U)/2,F=1-.17*L1(o(B-30))+.24*L1(o(2*B))+.32*L1(o(3*B+6))-.2*L1(o(4*B-63));let z=U-P;z=zN(z)<=180?z:U<=P?z+360:z-360,z=2*sf(M*C)*FN(o(z)/2);const W=h-a,X=C-M,j=1+.015*Ir(y-50,2)/sf(20+Ir(y-50,2)),G=1+.045*R,K=1+.015*R*F,J=30*xQ(-Ir((B-275)/25,2)),V=-(2*sf(Ir(R,7)/(Ir(R,7)+Ir(25,7))))*FN(2*o(J)),Y=sf(Ir(W/(t*j),2)+Ir(X/(i*G),2)+Ir(z/(r*K),2)+V*(X/(i*G))*(z/(r*K)));return _Q(0,bQ(100,Y))}function wQ(n,e,t="lab"){n=new pt(n),e=new pt(e);const i=n.get(t),r=e.get(t);let s=0;for(let o in i){const a=(i[o]||0)-(r[o]||0);s+=a*a}return Math.sqrt(s)}const EQ=(...n)=>{try{return new pt(...n),!0}catch{return!1}},TQ={cool(){return Iw([jn.hsl(180,1,.9),jn.hsl(250,.7,.4)])},hot(){return Iw(["#000","#f00","#ff0","#fff"]).mode("rgb")}},l3={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},mB=Object.keys(l3),VN=new Map(mB.map(n=>[n.toLowerCase(),n])),MQ=typeof Proxy=="function"?new Proxy(l3,{get(n,e){const t=e.toLowerCase();if(VN.has(t))return n[VN.get(t)]},getOwnPropertyNames(){return Object.getOwnPropertyNames(mB)}}):l3,AQ=(...n)=>{n=xn(n,"cmyk");const[e,t,i,r]=n,s=n.length>4?n[4]:1;return r===1?[0,0,0,s]:[e>=1?0:255*(1-e)*(1-r),t>=1?0:255*(1-t)*(1-r),i>=1?0:255*(1-i)*(1-r),s]},{max:GN}=Math,CQ=(...n)=>{let[e,t,i]=xn(n,"rgb");e=e/255,t=t/255,i=i/255;const r=1-GN(e,GN(t,i)),s=r<1?1/(1-r):0,o=(1-e-r)*s,a=(1-t-r)*s,l=(1-i-r)*s;return[o,a,l,r]};pt.prototype.cmyk=function(){return CQ(this._rgb)};const RQ=(...n)=>new pt(...n,"cmyk");Object.assign(jn,{cmyk:RQ});dn.format.cmyk=AQ;dn.autodetect.push({p:2,test:(...n)=>{if(n=xn(n,"cmyk"),Ln(n)==="array"&&n.length===4)return"cmyk"}});const DQ=(...n)=>{const e=xn(n,"hsla");let t=V0(n)||"lsa";return e[0]=_l(e[0]||0)+"deg",e[1]=_l(e[1]*100)+"%",e[2]=_l(e[2]*100)+"%",t==="hsla"||e.length>3&&e[3]<1?(e[3]="/ "+(e.length>3?e[3]:1),t="hsla"):e.length=3,`${t.substr(0,3)}(${e.join(" ")})`},OQ=(...n)=>{const e=xn(n,"lab");let t=V0(n)||"lab";return e[0]=_l(e[0])+"%",e[1]=_l(e[1]),e[2]=_l(e[2]),t==="laba"||e.length>3&&e[3]<1?e[3]="/ "+(e.length>3?e[3]:1):e.length=3,`lab(${e.join(" ")})`},LQ=(...n)=>{const e=xn(n,"lch");let t=V0(n)||"lab";return e[0]=_l(e[0])+"%",e[1]=_l(e[1]),e[2]=isNaN(e[2])?"none":_l(e[2])+"deg",t==="lcha"||e.length>3&&e[3]<1?e[3]="/ "+(e.length>3?e[3]:1):e.length=3,`lch(${e.join(" ")})`},PQ=(...n)=>{const e=xn(n,"lab");return e[0]=_l(e[0]*100)+"%",e[1]=o3(e[1]),e[2]=o3(e[2]),e.length>3&&e[3]<1?e[3]="/ "+(e.length>3?e[3]:1):e.length=3,`oklab(${e.join(" ")})`},gB=(...n)=>{const[e,t,i,...r]=xn(n,"rgb"),[s,o,a]=iO(e,t,i),[l,u,h]=cB(s,o,a);return[l,u,h,...r.length>0&&r[0]<1?[r[0]]:[]]},IQ=(...n)=>{const e=xn(n,"lch");return e[0]=_l(e[0]*100)+"%",e[1]=o3(e[1]),e[2]=isNaN(e[2])?"none":_l(e[2])+"deg",e.length>3&&e[3]<1?e[3]="/ "+(e.length>3?e[3]:1):e.length=3,`oklch(${e.join(" ")})`},{round:EA}=Math,NQ=(...n)=>{const e=xn(n,"rgba");let t=V0(n)||"rgb";if(t.substr(0,3)==="hsl")return DQ(fB(e),t);if(t.substr(0,3)==="lab"){const i=qb();Af("d50");const r=OQ(JD(e),t);return Af(i),r}if(t.substr(0,3)==="lch"){const i=qb();Af("d50");const r=LQ(tO(e),t);return Af(i),r}return t.substr(0,5)==="oklab"?PQ(iO(e)):t.substr(0,5)==="oklch"?IQ(gB(e)):(e[0]=EA(e[0]),e[1]=EA(e[1]),e[2]=EA(e[2]),(t==="rgba"||e.length>3&&e[3]<1)&&(e[3]="/ "+(e.length>3?e[3]:1),t="rgba"),`${t.substr(0,3)}(${e.slice(0,t==="rgb"?3:4).join(" ")})`)},vB=(...n)=>{n=xn(n,"lch");const[e,t,i,...r]=n,[s,o,a]=lB(e,t,i),[l,u,h]=nO(s,o,a);return[l,u,h,...r.length>0&&r[0]<1?[r[0]]:[]]},Rf=/((?:-?\d+)|(?:-?\d+(?:\.\d+)?)%|none)/.source,lc=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)%?)|none)/.source,Nw=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)%)|none)/.source,Sl=/\s*/.source,H0=/\s+/.source,rO=/\s*,\s*/.source,iT=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)(?:deg)?)|none)/.source,j0=/\s*(?:\/\s*((?:[01]|[01]?\.\d+)|\d+(?:\.\d+)?%))?/.source,yB=new RegExp("^rgba?\\("+Sl+[Rf,Rf,Rf].join(H0)+j0+"\\)$"),bB=new RegExp("^rgb\\("+Sl+[Rf,Rf,Rf].join(rO)+Sl+"\\)$"),_B=new RegExp("^rgba\\("+Sl+[Rf,Rf,Rf,lc].join(rO)+Sl+"\\)$"),xB=new RegExp("^hsla?\\("+Sl+[iT,Nw,Nw].join(H0)+j0+"\\)$"),SB=new RegExp("^hsl?\\("+Sl+[iT,Nw,Nw].join(rO)+Sl+"\\)$"),wB=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,EB=new RegExp("^lab\\("+Sl+[lc,lc,lc].join(H0)+j0+"\\)$"),TB=new RegExp("^lch\\("+Sl+[lc,lc,iT].join(H0)+j0+"\\)$"),MB=new RegExp("^oklab\\("+Sl+[lc,lc,lc].join(H0)+j0+"\\)$"),AB=new RegExp("^oklch\\("+Sl+[lc,lc,iT].join(H0)+j0+"\\)$"),{round:CB}=Math,fg=n=>n.map((e,t)=>t<=2?Bp(CB(e),0,255):e),Nr=(n,e=0,t=100,i=!1)=>(typeof n=="string"&&n.endsWith("%")&&(n=parseFloat(n.substring(0,n.length-1))/100,i?n=e+(n+1)*.5*(t-e):n=e+n*(t-e)),+n),bo=(n,e)=>n==="none"?e:n,sO=n=>{if(n=n.toLowerCase().trim(),n==="transparent")return[0,0,0,0];let e;if(dn.format.named)try{return dn.format.named(n)}catch{}if((e=n.match(yB))||(e=n.match(bB))){let t=e.slice(1,4);for(let r=0;r<3;r++)t[r]=+Nr(bo(t[r],0),0,255);t=fg(t);const i=e[4]!==void 0?+Nr(e[4],0,1):1;return t[3]=i,t}if(e=n.match(_B)){const t=e.slice(1,5);for(let i=0;i<4;i++)t[i]=+Nr(t[i],0,255);return t}if((e=n.match(xB))||(e=n.match(SB))){const t=e.slice(1,4);t[0]=+bo(t[0].replace("deg",""),0),t[1]=+Nr(bo(t[1],0),0,100)*.01,t[2]=+Nr(bo(t[2],0),0,100)*.01;const i=fg(a3(t)),r=e[4]!==void 0?+Nr(e[4],0,1):1;return i[3]=r,i}if(e=n.match(wB)){const t=e.slice(1,4);t[1]*=.01,t[2]*=.01;const i=a3(t);for(let r=0;r<3;r++)i[r]=CB(i[r]);return i[3]=+e[4],i}if(e=n.match(EB)){const t=e.slice(1,4);t[0]=Nr(bo(t[0],0),0,100),t[1]=Nr(bo(t[1],0),-125,125,!0),t[2]=Nr(bo(t[2],0),-125,125,!0);const i=qb();Af("d50");const r=fg(QD(t));Af(i);const s=e[4]!==void 0?+Nr(e[4],0,1):1;return r[3]=s,r}if(e=n.match(TB)){const t=e.slice(1,4);t[0]=Nr(t[0],0,100),t[1]=Nr(bo(t[1],0),0,150,!1),t[2]=+bo(t[2].replace("deg",""),0);const i=qb();Af("d50");const r=fg(eO(t));Af(i);const s=e[4]!==void 0?+Nr(e[4],0,1):1;return r[3]=s,r}if(e=n.match(MB)){const t=e.slice(1,4);t[0]=Nr(bo(t[0],0),0,1),t[1]=Nr(bo(t[1],0),-.4,.4,!0),t[2]=Nr(bo(t[2],0),-.4,.4,!0);const i=fg(nO(t)),r=e[4]!==void 0?+Nr(e[4],0,1):1;return i[3]=r,i}if(e=n.match(AB)){const t=e.slice(1,4);t[0]=Nr(bo(t[0],0),0,1),t[1]=Nr(bo(t[1],0),0,.4,!1),t[2]=+bo(t[2].replace("deg",""),0);const i=fg(vB(t)),r=e[4]!==void 0?+Nr(e[4],0,1):1;return i[3]=r,i}};sO.test=n=>yB.test(n)||xB.test(n)||EB.test(n)||TB.test(n)||MB.test(n)||AB.test(n)||bB.test(n)||_B.test(n)||SB.test(n)||wB.test(n)||n==="transparent";pt.prototype.css=function(n){return NQ(this._rgb,n)};const UQ=(...n)=>new pt(...n,"css");jn.css=UQ;dn.format.css=sO;dn.autodetect.push({p:5,test:(n,...e)=>{if(!e.length&&Ln(n)==="string"&&sO.test(n))return"css"}});dn.format.gl=(...n)=>{const e=xn(n,"rgba");return e[0]*=255,e[1]*=255,e[2]*=255,e};const kQ=(...n)=>new pt(...n,"gl");jn.gl=kQ;pt.prototype.gl=function(){const n=this._rgb;return[n[0]/255,n[1]/255,n[2]/255,n[3]]};pt.prototype.hex=function(n){return sB(this._rgb,n)};const zQ=(...n)=>new pt(...n,"hex");jn.hex=zQ;dn.format.hex=rB;dn.autodetect.push({p:4,test:(n,...e)=>{if(!e.length&&Ln(n)==="string"&&[3,4,5,6,7,8,9].indexOf(n.length)>=0)return"hex"}});const{log:P1}=Math,RB=n=>{const e=n/100;let t,i,r;return e<66?(t=255,i=e<6?0:-155.25485562709179-.44596950469579133*(i=e-2)+104.49216199393888*P1(i),r=e<20?0:-254.76935184120902+.8274096064007395*(r=e-10)+115.67994401066147*P1(r)):(t=351.97690566805693+.114206453784165*(t=e-55)-40.25366309332127*P1(t),i=325.4494125711974+.07943456536662342*(i=e-50)-28.0852963507957*P1(i),r=255),[t,i,r,1]},{round:FQ}=Math,BQ=(...n)=>{const e=xn(n,"rgb"),t=e[0],i=e[2];let r=1e3,s=4e4;const o=.4;let a;for(;s-r>o;){a=(s+r)*.5;const l=RB(a);l[2]/l[0]>=i/t?s=a:r=a}return FQ(a)};pt.prototype.temp=pt.prototype.kelvin=pt.prototype.temperature=function(){return BQ(this._rgb)};const TA=(...n)=>new pt(...n,"temp");Object.assign(jn,{temp:TA,kelvin:TA,temperature:TA});dn.format.temp=dn.format.kelvin=dn.format.temperature=RB;pt.prototype.oklch=function(){return gB(this._rgb)};const VQ=(...n)=>new pt(...n,"oklch");Object.assign(jn,{oklch:VQ});dn.format.oklch=vB;dn.autodetect.push({p:2,test:(...n)=>{if(n=xn(n,"oklch"),Ln(n)==="array"&&n.length===3)return"oklch"}});Object.assign(jn,{analyze:dB,average:GK,bezier:YK,blend:uc,brewer:MQ,Color:pt,colors:g0,contrast:mQ,contrastAPCA:yQ,cubehelix:aQ,deltaE:SQ,distance:wQ,input:dn,interpolate:v0,limits:pB,mix:v0,random:fQ,scale:Iw,scales:TQ,valid:EQ});var MA,HN;function GQ(){if(HN)return MA;HN=1;const{useState:n,useCallback:e,useEffect:t}=Gf();return MA=function(r){const s=[],o=()=>s.forEach(l=>l());let a=r instanceof Function?r():r;return function(){const u=n({})[1],h=e(()=>u({}),[u]);t(()=>(s.push(h),()=>{s.splice(s.findIndex(h),1)}),[h]);const p=e(m=>{m instanceof Function?a=m(a):a=m,o()},[h]);return[a,p]}},MA}var HQ=GQ();const jQ=Do(HQ),WQ=({ref:n,open:e=!0,onClickOutside:t,onEscape:i})=>{q.useEffect(()=>{if(!e)return;const r=o=>{n.current&&!n.current.contains(o.target)&&t?.(o)},s=o=>{o.code==="Escape"&&i?.(o)};return t&&(document.addEventListener("mousedown",r),document.addEventListener("touchstart",r)),i&&document.addEventListener("keydown",s),()=>{t&&(document.removeEventListener("mousedown",r),document.removeEventListener("touchstart",r)),i&&document.removeEventListener("keydown",s)}},[n,t,i,e])},XQ=q.createContext({close:()=>{}});let qQ=0;const YQ=()=>`ref-${++qQ}`,oO=n=>{const[e]=q.useState(n||YQ());return`${e}`},$Q=n=>{const e=q.useRef(n);e.current=n,q.useLayoutEffect(()=>()=>e.current(),[])},ZQ=q.forwardRef(({children:n,className:e,style:t,element:i="div",onMount:r,onUnmount:s},o)=>{const a=q.useRef(null),l=q.useRef(!1);return q.useEffect(()=>{var u;e&&a.current&&a.current.setAttribute("class",`${e} rdk-portal`),t&&a.current&&((u=Object.keys(t))==null||u.forEach(h=>{var p;return(p=a.current.style)==null?void 0:p.setProperty(h,t[h])}))},[e,t,a.current]),q.useLayoutEffect(()=>{a.current=document.createElement(i),r?.()},[]),$Q(()=>{s?.();const u=a.current;u&&document.body.contains(u)&&document.body.removeChild(u)}),q.useImperativeHandle(o,()=>a.current),a.current?(l.current||(l.current=!0,a.current.classList.add("rdk-portal"),document.body.appendChild(a.current)),dF.createPortal(n,a.current)):null}),Qg=[],KQ=990,QQ=q.forwardRef(({className:n,children:e,onMount:t,onUnmount:i,appendToBody:r=!0,id:s,style:o},a)=>{let l=oO(s);const[u,h]=q.useState(null),[p,m]=q.useState(null),y=q.useRef(null);return q.useImperativeHandle(a,()=>y.current),ue.jsx(ZQ,{className:n,ref:y,style:o,appendToBody:r,onMount:()=>{Qg.push(l);let b=Qg.indexOf(l);h(b);const x=KQ+b*2+1;m(x),t?.({portalId:l,overlayIndex:x,portalIndex:b,backdropIndex:x})},onUnmount:()=>{i?.(),Qg.splice(Qg.indexOf(l),1),h(null),m(null)},children:e({overlayIndex:p,portalIndex:u,backdropIndex:p,portalId:l})})}),JQ={base:"fixed top-0 left-0 w-full h-full opacity-0 select-none bg-black",opacity:.8},eJ=q.forwardRef(({children:n,className:e,elementType:t="span",trigger:i=["click"],onOpen:r=()=>{},onClose:s=()=>{}},o)=>{const a=q.useCallback(S=>Array.isArray(i)?i.includes(S):S===i,[i]),l=q.useCallback(S=>{a("focus")&&r({type:"focus",nativeEvent:S})},[r,a]),u=q.useCallback(S=>{a("focus")&&s({type:"focus",nativeEvent:S})},[s,a]),h=q.useCallback(S=>{a("hover")&&r({type:"hover",nativeEvent:S})},[r,a]),p=q.useCallback(S=>{a("hover")&&s({type:"hover",nativeEvent:S})},[s,a]),m=q.useCallback(S=>{a("click")&&r({type:"click",nativeEvent:S}),a("click")||s({type:"hover",nativeEvent:S})},[r,s,a]),y=q.useCallback(S=>{a("contextmenu")&&(S.preventDefault(),r({type:"contextmenu",nativeEvent:S}))},[a,r]),b=a("focus")?-1:void 0,x=t;return ue.jsx(x,{ref:o,tabIndex:b,onMouseEnter:h,onMouseLeave:p,onFocus:l,onBlur:u,onClick:m,onContextMenu:y,className:e,children:n})}),tJ=({reference:n,floating:e,followCursor:t,placement:i="top",modifiers:r=[Kq(),$q({limiter:Zq()})]}={})=>{const s=q.useMemo(()=>!n?.nodeType,[n]),{refs:o,floatingStyles:a,update:l}=fY({open:!0,placement:i,middleware:r,elements:{reference:s?null:n,floating:e},whileElementsMounted:Bq});q.useEffect(()=>{if(s&&n&&!t){const h=n;o.setPositionReference({getBoundingClientRect(){return{width:h.width,height:h.height,x:h.left,y:h.top,left:h.left,top:h.top,right:h.left+h.width,bottom:h.top+h.height}}})}},[n,o,s,t]);const u=q.useCallback(({clientX:h,clientY:p})=>{o.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:h,y:p,left:h,top:p,right:h,bottom:p}}})},[o]);return q.useLayoutEffect(()=>(t&&window.addEventListener("mousemove",u),()=>{window.removeEventListener("mousemove",u)}),[t,u]),{refs:o,anchorRef:o.reference,floatingRef:o.floating,floatingStyles:a,update:l}},nJ=q.forwardRef(({triggerRef:n,children:e,portalClassName:t,closeOnBodyClick:i=!0,closeOnEscape:r=!0,elementType:s,appendToBody:o=!0,followCursor:a,modifiers:l,placement:u="bottom",onClose:h},p)=>{const m=oO(),[y,b]=q.useState(null),{refs:x,floatingStyles:S,update:_}=tJ({reference:n.current??n,followCursor:a,modifiers:l,placement:u});q.useImperativeHandle(p,()=>({updatePosition:()=>{_()}}));const T=q.useCallback(M=>{if(i){let C=null;n.current?C=n.current:n.contains!==void 0&&(C=n);const R=M.target.closest(".rdk-portal"),L=Qg.indexOf(m)===Qg.length-1;!C?.contains(M.target)&&(L||!R)&&h?.(M)}},[i,h]),A=q.useCallback(()=>{r&&h?.()},[r,h]);return WQ({open:!0,ref:x.floating,onClickOutside:T,onEscape:A}),ue.jsx(QQ,{id:m,ref:x.setFloating,style:{...S,"z-index":y},className:t,elementType:s,appendToBody:o,onMount:M=>b(M.overlayIndex),onUnmount:()=>b(null),children:e})}),iJ=q.forwardRef(({reference:n,children:e,open:t,content:i,triggerElement:r,triggerClassName:s,trigger:o="click",onOpen:a,onClose:l,...u},h)=>{const p=q.useRef(!1),m=q.useRef(null),y=q.useRef(null),b=n||m;q.useImperativeHandle(h,()=>({updatePosition:()=>{var S;(S=y.current)==null||S.updatePosition()}})),q.useEffect(()=>{p.current&&(t?a?.():l?.())},[t]),q.useEffect(()=>{p.current||(p.current=!0)});const x=q.useMemo(()=>({close:()=>l?.()}),[l]);return ue.jsxs(XQ.Provider,{value:x,children:[e&&ue.jsx(q.Fragment,{children:o?ue.jsx(eJ,{elementType:r,ref:m,className:s,trigger:o,onOpen:a,onClose:l,children:e}):e}),ue.jsx(AW,{children:t&&ue.jsx(nJ,{...u,ref:y,triggerRef:b,onClose:l,children:i})})]})}),ec={base:"inline-flex whitespace-no-wrap select-none items-center justify-center px-2.5 py-1 rounded-xs font-sans cursor-pointer",disabled:"disabled:cursor-not-allowed",fullWidth:"flex w-full",group:"rounded-none first:rounded-s last:rounded-e border-s-0 first:border-s",groupText:"border border-y-transparent border-l-transparent last:border-r-transparent hover:bg-initial",adornment:{base:"flex",start:"pr-1",end:"pl-1",sizes:{small:"[&>svg]:w-3 [&>svg]:h-3",medium:"[&>svg]:w-4 [&>svg]:h-4",large:"[&>svg]:w-5 [&>svg]:h-5"}},sizes:{small:"text-sm px-2 py-1 leading-[normal]",medium:"text-base px-4 py-2 leading-[normal]",large:"text-xl px-5 py-2.5 leading-[normal]"},iconSizes:{small:"px-2 py-1",medium:"px-4 py-2",large:"px-5 py-2.5"}},rJ={base:[ec.base,"text-text-primary font-semibold"].join(" "),disabled:[ec.disabled,"data-[variant=filled]:disabled:bg-gray-600 disabled:text-gray-400 border-gray-500"].join(" "),fullWidth:ec.fullWidth,group:ec.group,groupText:ec.groupText,adornment:ec.adornment,sizes:ec.sizes,iconSizes:ec.iconSizes,variants:{filled:"bg-secondary hover:bg-border-secondary-hover border-secondary light:text-gray-100",outline:"border-grey border",text:"border-0"},colors:{default:{filled:"bg-gray-800 hover:bg-gray-700 border-gray-800",outline:"border-secondary border",text:"text-text-primary"},primary:{filled:"bg-primary hover:bg-primary-hover border-primary text-text-primary",outline:"border border-primary",text:"text-primary hover:text-primary-hover"},secondary:{filled:"bg-secondary hover:bg-secondary-hover text-text-primary!",outline:"border border-secondary",text:"text-secondary hover:text-secondary-hover"},success:{filled:"bg-success hover:bg-success-hover border-success text-text-primary",outline:"border border-success",text:"text-success hover:text-success-hover"},warning:{filled:"bg-warning hover:bg-warning-hover border-warning text-text-primary",outline:"border border-warning",text:"text-warning hover:text-warning-hover"},error:{filled:"bg-error hover:bg-error-hover border-error text-text-primary",outline:"border border-error",text:"text-error hover:text-error-hover"}}};({...ec.adornment,start:[ec.adornment.start,"[padding-right:_calc(var(--list-item-spacing)_/_2)]"].join(" "),end:[ec.adornment.start,"[padding-left:_calc(var(--list-item-spacing)_/_2)]"].join(" ")});const sJ=q.createContext({variant:null,size:null}),DB=q.forwardRef(({color:n="default",variant:e="filled",children:t,fullWidth:i,size:r="medium",disableAnimation:s,className:o,disableMargins:a,disablePadding:l,disabled:u,startAdornment:h,endAdornment:p,theme:m,type:y="button",...b},x)=>{const S=mi("button",m),{variant:_,size:T}=q.useContext(sJ),A=!!_&&!!T;return ue.jsxs(dl.button,{...b,type:y,disabled:u,ref:x,whileTap:{scale:u||s?1:.9},"data-variant":_||e,className:pn(S.base,S.disabled,i&&S.fullWidth,S.variants[_||e],S.colors[n][_||e],S.sizes[T||r],A&&S.group,A&&_==="text"&&S.groupText,a&&"m-0",l&&"p-0",o),children:[h&&ue.jsx("div",{className:pn(S.adornment.base,S.adornment.start,S.adornment.sizes[r]),children:h}),t,p&&ue.jsx("div",{className:pn(S.adornment.base,S.adornment.end,S.adornment.sizes[r]),children:p})]})}),OB=q.forwardRef(({children:n,color:e="default",variant:t="filled",size:i="medium",selected:r,disabled:s,className:o,disableMargins:a,start:l,end:u,onClick:h,theme:p,...m},y)=>{var b,x,S,_,T,A,M,C,R,L,I,P,U;const B=mi("chip",p);return ue.jsxs("div",{...m,ref:y,tabIndex:h?0:-1,onClick:s?void 0:h,className:pn(B.base,B.variants[t],(b=B.colors[e])==null?void 0:b.base,(S=(x=B.colors[e])==null?void 0:x.variants)==null?void 0:S[t],B.sizes[i],B.focus,!!h&&!s&&((T=(_=B.colors[e])==null?void 0:_.selectable)==null?void 0:T.base),!!h&&!s&&((R=(C=(M=(A=B.colors[e])==null?void 0:A.selectable)==null?void 0:M.variants)==null?void 0:C[t])==null?void 0:R.base),r&&((U=(P=(I=(L=B.colors[e])==null?void 0:L.selectable)==null?void 0:I.variants)==null?void 0:P[t])==null?void 0:U.selected),a&&"m-0","transition-colors duration-300 ease [&>svg]:transition-[fill] [&>svg]:will-change-[fill]",o,s&&B.disabled),"aria-disabled":s,children:[l&&ue.jsx("div",{className:pn(B.adornment.base,B.adornment.start,B.adornment.sizes[i]),children:l}),ue.jsx("div",{className:"flex items-center",children:n}),u&&ue.jsx("div",{className:pn(B.adornment.base,B.adornment.end,B.adornment.sizes[i]),children:u})]})});function oJ(n,e="short"){!n&&typeof window<"u"&&(n=navigator.language);const t=new Intl.DateTimeFormat(n,{month:e,timeZone:"UTC"});return[1,2,3,4,5,6,7,8,9,10,11,12].map(r=>{const s=r<10?`0${r}`:r;return new Date(`2017-${s}-01T00:00:00+00:00`)}).map(r=>t.format(r))}oJ();function aJ(n){return Array.from({length:7},(e,t)=>(!n&&typeof window<"u"&&(n=navigator.language),new Intl.DateTimeFormat(n,{weekday:"short"}).format(new Date(1970,0,4+t))))}aJ();q.forwardRef(({children:n,color:e="default",variant:t="default",disableMargins:i=!1,className:r,theme:s,...o},a)=>{const l=mi("typography",s);return ue.jsx("h1",{ref:a,className:pn(l.colors[e],l.variant[t],l.pageTitle,i&&l.disableMargins,r),...o,children:n})});q.forwardRef(({children:n,color:e="default",variant:t="default",disableMargins:i=!1,className:r,theme:s,...o},a)=>{const l=mi("typography",s);return ue.jsx("h2",{ref:a,className:pn(l.colors[e],l.variant[t],l.primaryHeading,i&&l.disableMargins,r),...o,children:n})});q.forwardRef(({children:n,color:e="default",variant:t="default",disableMargins:i=!1,className:r,theme:s,...o},a)=>{const l=mi("typography",s);return ue.jsx("h3",{ref:a,className:pn(l.colors[e],l.variant[t],l.secondaryHeading,i&&l.disableMargins,r),...o,children:n})});q.forwardRef(({children:n,color:e="default",variant:t="default",disableMargins:i=!1,className:r,theme:s,...o},a)=>{const l=mi("typography",s);return ue.jsx("h5",{ref:a,className:pn(l.colors[e],l.variant[t],l.smallHeading,i&&l.disableMargins,r),...o,children:n})});const lJ=q.forwardRef(({color:n="default",variant:e="default",disableMargins:t=!1,children:i,className:r,theme:s,...o},a)=>{const l=mi("typography",s);return ue.jsx("h6",{ref:a,className:pn(l.colors[n],l.variant[e],l.sub,t&&l.disableMargins,r),...o,children:i})});q.forwardRef(({color:n="default",variant:e="default",fontStyle:t="default",children:i,className:r,theme:s,...o},a)=>{const l=mi("typography",s);return ue.jsx("span",{ref:a,className:pn(l.colors[n],l.variant[e],l.text[t],r),...o,children:i})});const LB={text:{thin:"font-thin",bold:"font-semibold",extraBold:"font-extrabold",italic:"italic"},variant:{default:"",mono:"font-mono"},colors:{primary:"text-primary",secondary:"text-secondary",success:"text-success",warning:"text-warning",error:"text-error",info:"text-info"},sub:"text-sm font-semibold mb-0.5",smallHeading:"text-base font-normal mb-1",secondaryHeading:"text-3xl font-normal mb-1",primaryHeading:"text-3xl font-extrabold mb-1",pageTitle:"text-[40px] font-semibold mb-5",disableMargins:"m-0"},cJ={...LB};({...LB.text});const c3={base:"border-none",orientation:{horizontal:"h-px w-full my-2.5",vertical:"w-px h-full mx-2.5"},variant:{primary:"bg-surface",secondary:"bg-linear-to-r from-transparent to-transparent via-blue-500"},disableMargins:"my-0 mx-0"},uJ={...c3};[c3.orientation.horizontal,"my-[var(--divider-spacing)]"].join(" "),[c3.orientation.vertical," mx-[var(--divider-spacing)]"].join(" ");const fJ={base:"will-change-[height,opacity] overflow-hidden"},hJ={...fJ},dJ={initial:{transition:{staggerChildren:.05,staggerDirection:-1}},animate:{transition:{staggerChildren:.07,delayChildren:.2}}},pJ=({children:n,...e})=>ue.jsx(dl.div,{variants:dJ,initial:"initial",animate:"animate",...e,children:n}),mJ={initial:{y:-20,opacity:0,transition:{when:"beforeChildren"}},animate:{y:0,opacity:1,transition:{when:"beforeChildren"}},exit:{y:-20,opacity:0}},gJ={initial:{x:"-100%",opacity:0,transition:{when:"beforeChildren",x:{stiffness:10}}},animate:{x:"0%",opacity:1,transition:{x:{stiffness:10,velocity:-100},when:"beforeChildren",opacity:{duration:1}}},exit:{x:"-100%",opacity:0,transition:{x:{stiffness:10}}}},PB=({children:n,direction:e="vertical",...t})=>ue.jsx(dl.div,{variants:e==="vertical"?mJ:gJ,...t,children:n}),vJ=q.forwardRef(({className:n,children:e,theme:t,...i},r)=>{const s=mi("list",t);return ue.jsx("div",{...i,ref:r,role:"list",className:pn(s.base,n),children:e})}),yJ=q.forwardRef(({className:n,contentClassName:e,children:t,active:i,disabled:r,disablePadding:s,disableGutters:o,start:a,end:l,dense:u,onClick:h,theme:p,...m},y)=>{const b=mi("list",p);return ue.jsxs("div",{...m,ref:y,role:h?"button":"listitem",tabIndex:h?0:void 0,onClick:x=>!r&&h?.(x),className:gl(b.listItem.base,u&&b.listItem.dense.base,r&&b.listItem.disabled,i&&b.listItem.active,h&&!r&&b.listItem.clickable,s&&b.listItem.disablePadding,o&&b.listItem.disableGutters,n),children:[a&&ue.jsx("div",{className:gl(b.listItem.adornment.base,b.listItem.adornment.start,{[b.listItem.dense.startAdornment]:u}),children:a}),ue.jsx("div",{className:gl(b.listItem.content,{[b.listItem.dense.content]:u},e),children:t}),l&&ue.jsx("div",{className:gl(b.listItem.adornment.base,b.listItem.adornment.end,{[b.listItem.dense.endAdornment]:u}),children:l})]})}),bJ=({className:n,children:e,theme:t,...i})=>{const r=mi("list",t);return ue.jsx(lJ,{...i,className:pn(n,r.header),children:e})},ms={base:"flex flex-col",header:"pl-2 pr-2",listItem:{base:"items-center flex p-2.5 relative rounded-none",disabled:"cursor-not-allowed pointer-events-none",active:"",clickable:"cursor-pointer transition-color duration-300 ease-linear transition-bg duration-300 ease-linear hover:color-inherit hover:bg-transparent",disablePadding:"p-0",disableGutters:"pl-0 pr-0",dense:{base:"p-1",content:"",startAdornment:"pr-[calc(5/2)]",endAdornment:"pl-[calc(5/2)]"},adornment:{base:"items-center flex",start:"pr-1",end:"pl-1",svg:"fill-current"},content:"overflow-wrap break-word word-wrap break-all flex-1"}},_J={...ms,base:[ms.base,"text-text-primary"].join(" "),header:[ms.header,"text-text-primary"].join(" "),listItem:{...ms.listItem,base:[ms.listItem.base,"hover:bg-panel-accent hover:text-mystic light:hover:bg-vulcan/5 light:hover:text-text-secondary [&:has(h3)]:hover:bg-transparent"].join(" "),active:[ms.listItem.active,"text-primary-active hover:text-mystic"].join(" "),disabled:[ms.listItem.disabled,"opacity-40 text-text-secondary"].join(" ")}};({...ms.listItem,base:[ms.listItem.base,"p-[var(--list-item-spacing)] text-[var(--list-item-color)] rounded-[var(--list-item-border-radius)]"].join(" "),clickable:[ms.listItem.clickable,"hover:text-[var(--list-item-color-active)] hover:bg-[var(--list-item-background-active)]"].join(" "),dense:{...ms.listItem.dense,base:[ms.listItem.dense.base,"[padding:_var(--list-item-dense-spacing)]"].join(" "),startAdornment:[ms.listItem.dense.startAdornment,"[padding-right:_calc(var(--spacing-md)_/_2)]"].join(" "),endAdornment:[ms.listItem.dense.endAdornment,"[padding-left:_calc(var(--spacing-md)_/_2)]"].join(" ")},adornment:{...ms.listItem.adornment,start:[ms.listItem.adornment.start,"[padding-right:_calc(var(--spacing-sm)_/_2)]"].join(" "),end:[ms.listItem.adornment.start,"[padding-left:_calc(var(--spacing-sm)_/_2)]"].join(" "),svg:[ms.listItem.adornment.svg,"fill:[var(--list-item-adornment-fill)]"].join(" ")}});const ub={base:"mb-2.5",disableMargin:"mb-0",label:"text-sm",centerAlign:"items-center",endAlign:"items-end",horizontal:{base:"flex flex-row items-baseline",label:"mr-0.5 whitespace-nowrap"},vertical:{base:"block",label:"block mb-0.5"}},xJ={...ub};({...ub.horizontal,label:[ub.horizontal.label,"mr-[var(--block-label-spacing)]"].join(" ")},{...ub.vertical,label:[ub.vertical.label,"mb-[var(--block-label-spacing)]"].join(" ")});const jN={base:"relative flex flex-col p-7 rounded-xs",disablePadding:"p-0",header:"flex items-center",headerText:"text-sm font-medium mt-0 mb-1",content:"flex-1"},SJ={...jN,base:[jN.base,"bg-panel border border-panel-accent text-text-primary"].join(" ")};q.forwardRef(({children:n,disablePadding:e,className:t,header:i,headerClassName:r,contentClassName:s,theme:o,...a},l)=>{const u=mi("card",o);return ue.jsxs("section",{...a,ref:l,className:pn(u.base,e&&u.disablePadding,t),children:[i&&ue.jsx("header",{className:pn(u.header,r),children:i&&typeof i=="string"?ue.jsx("h3",{className:u.headerText,children:i}):i}),ue.jsx("div",{className:pn(u.content,s),children:n})]})});q.forwardRef(({children:n,className:e,direction:t="row",dense:i=!1,inline:r=!1,alignItems:s="center",justifyContent:o="start",theme:a,...l},u)=>{const h=mi("stack",a);return ue.jsx("div",{className:pn(h.base,i&&h.dense,r&&h.inline,h.direction[t],h.alignItems[s],h.justifyContent[o],e),ref:u,...l,children:n})});const WN={base:"flex items-center gap-2.5",dense:"gap-1",inline:"inline-flex",direction:{row:"flex-row",column:"flex-col",rowReverse:"flex-row-reverse",columnReverse:"flex-col-reverse"},alignItems:{start:"items-start",end:"items-end",center:"items-center",stretch:"items-stretch"},justifyContent:{start:"justify-start",end:"justify-end",center:"justify-center",spaceBetween:"justify-between"}},wJ={...WN,base:[WN.base,"text-text-primary"].join(" ")},XN={base:"",up:"rotate-180",down:"",left:"rotate-90",right:"-rotate-90"},EJ={...XN,base:[XN.base,"text-text-primary"].join(" ")};q.createContext({collapsedIcon:null,expandedIcon:null});const yf={base:"relative m-0 p-0 list-none",tree:"border pt-1 pb-1 px-3 border-solid border-transparent",arrow:"w-3 h-3",node:{base:"pt-0.5 m-0 list-style-none first:pt-0 last:pb-0",collapsed:"-rotate-90",disabled:"opacity-60",leaf:"pl-4",label:"",button:{base:"min-w-[auto] min-h-[auto] w-auto h-auto transition-transform duration-100 ease-in-out ml-0 mr-1 my-0 p-0",icon:"align-middle block h-2 w-2 m-0.5"}},nodeBlock:"flex items-center",subtree:"relative ml-5 mr-0 mt-1 mb-0 p-0"},TJ={...yf,arrow:[yf.arrow,"fill-text-primary"].join(" "),node:{...yf.node,base:[yf.node.base,"text-text-primary"].join(" "),button:{...yf.node.button,icon:[yf.node.button.icon,"fill-text-primary"].join(" ")}}};({...yf.node,button:{...yf.node.button,icon:[yf.node.button.icon,"fill-[var(--white)]"].join(" ")}});function wp(n){return n!==null&&typeof n=="object"&&n.constructor===Object}function u3(n){if(!wp(n))return n;const e={};for(const t in n)e[t]=u3(n[t]);return e}function IB(n,e){if(wp(e)&&Object.keys(e).length===0)return u3({...n,...e});const t={...n,...e};if(wp(e)&&wp(n))for(const i in e)wp(e[i])&&i in n&&wp(n[i])?t[i]=IB(n[i],e[i]):t[i]=wp(e[i])?u3(e[i]):e[i];return t}function gl(...n){return pn(jF(n))}const MJ=()=>{const n=Array.from(document.documentElement.classList).find(e=>e.startsWith("theme-"));return n?n.replace("theme-",""):"dark"},AJ=n=>{const e=document.documentElement;if(!e)throw new Error("Document element not found");const t=new MutationObserver(i=>{i.forEach(r=>{if(r.type==="attributes"&&r.attributeName==="class"){const s=MJ();n(s)}})});return t.observe(e,{attributes:!0,attributeFilter:["class"]}),t},CJ=(n,e)=>Array.from(n.style).filter(i=>i.startsWith("--")).reduce((i,r)=>(i[r]=e.getPropertyValue(r).trim(),i),{}),qN=()=>{const n=getComputedStyle(document.documentElement);function e(s){return Array.from(s).reduce((o,a)=>(a instanceof CSSStyleRule&&a.selectorText===":root, :host"&&o.push(a),"cssRules"in a&&a.cssRules.length>0&&o.push(...e(a.cssRules)),o),[])}const t=Array.from(document.styleSheets).flatMap(s=>{try{return e(s.cssRules)}catch{return[]}}),i={};return t.forEach((s,o)=>{const a=CJ(s,n);i[`${s.selectorText}-${o}`]=a}),Object.entries(i).map(([,s])=>s).reduce((s,o)=>({...s,...o}),{})},NB=q.createContext(null),RJ=({children:n,theme:e})=>{const[t,i]=q.useState(e),[r,s]=q.useState({});q.useEffect(()=>{e&&i(IB(Dee,e)),s(qN());const a=AJ(()=>s(qN()));return()=>a.disconnect()},[e]);const o=a=>{i({...t,...a})};return ue.jsx(NB.Provider,{value:{theme:t,updateTheme:o,tokens:r,updateTokens:s},children:n})},DJ=()=>{const n=q.useContext(NB);return n||null},mi=(n,e)=>{const t=DJ();if(e)return e;if(!t)throw new Error("useTheme must be used within a ThemeProvider");const i=t.theme.components[n];if(!i)throw new Error(`Component ${n} does not exist in theme`);return i},OJ={dots:"cursor-pointer opacity-50 text-[unset] p-0 border-[none] outline-hidden"},LJ={...OJ},PJ=({items:n,threshold:e=3,size:t=10,nextSize:i})=>{const[r,s]=q.useState(0),o=q.useMemo(()=>[...n].slice(0,r),[r,n]),a=r<n.length,l=n.length-r,u=q.useCallback(h=>{if(a){const p=i===1/0?l:i||h||t,m=Math.min(n.length,r+p);s(m)}},[a,r,t,n,l,i]);return q.useEffect(()=>{const h=n?.length||0,p=h<=t+e?t+e:Math.min(h,t);s(p)},[n.length,t,e]),{data:o,hasMore:a,remaining:l,showNext:u}},UB={node:{label:"font-mono text-anakiwa light:text-blue-500",delimiter:"pr-1",symbol:"px-1 opacity-50 font-mono",value:"",count:"opacity-50"},pager:"opacity-50 cursor-pointer pl-4"};({...UB});q.forwardRef(({space:n="md",className:e,theme:t,...i},r)=>{const s=mi("verticalSpacer",t);return ue.jsx("div",{className:pn(e,s.base,s.size[n]),ref:r,...i})});const IJ={base:"",size:{xs:"h-0.5",sm:"h-1.5",md:"h-2.5",lg:"h-5",xl:"h-6",xxl:"h-8"}},NJ={...IJ},UJ={base:"flex flex-col",list:{base:"flex text-center flex-wrap -mb-px",indicator:{base:"bg-primary absolute bottom-0 left-0 right-0",size:{small:"h-0.5",medium:"h-0.5",large:"h-1"}},divider:"w-full h-px border-0",variant:{primary:{divider:"bg-surface"},secondary:{divider:"bg-linear-to-r from-transparent to-transparent via-primary"}},tab:{base:"relative",button:"transition-colors text-text-secondary font-bold hover:text-primary-hover",selected:"text-text-primary",disabled:"cursor-not-allowed opacity-40",size:{small:"pb-1 text-sm",medium:"pb-2 text-lg",large:"pb-4 text-xl"}}},panel:"mt-2"},kJ=UJ,zJ={base:"",separator:"[&>svg]:size-3.5",list:"flex gap-2 items-center",link:"hover:text-text-primary text-text-secondary transition-colors",activePage:"text-primary pointer-events-none"},FJ={base:"grid grid-cols-[min-content_1fr] gap-x-3",step:{base:"border-l border-solid border-panel-accent translate-x-1/2",marker:{base:"rounded-full w-[9px] h-[9px] bg-surface",container:"w-max pt-1 pb-0.5 backdrop-blur-md -translate-x-[calc(50%+0.5px)]",active:"bg-info",label:{base:"flex flex-row items-center gap-1 border border-solid border-surface px-3 py-1 rounded-[20px]",active:"border-info bg-info-background"}},active:"border-primary",content:"pb-6"}};Array.from({length:24},(n,e)=>e);[...Array.from({length:11},(n,e)=>e+1)];Array.from({length:60},(n,e)=>e);Array.from({length:60},(n,e)=>e);tf(nf(rf(new Date,0),0),0),tf(nf(rf(new Date,0),0),9),tf(nf(rf(new Date,0),0),12),tf(nf(rf(new Date,0),0),15),tf(nf(rf(new Date,0),0),18),tf(nf(rf(new Date,0),0),21),tf(nf(rf(So(new Date,1),0),0),9),tf(nf(rf(So(new Date,1),0),0),12),tf(nf(rf(So(new Date,1),0),0),18);tu(new Date,1),tu(new Date,2),tu(new Date,3),a0(new Date,1),a0(new Date,2),a0(new Date,3),Lp(new Date,1),Lp(new Date,2),Lp(new Date,3),Lp(new Date,6),l0(new Date,1),l0(new Date,2),l0(new Date,3);So(new Date,1),So(new Date,2),So(new Date,3),zp(new Date,1),zp(new Date,2),zp(new Date,3),Mf(new Date,1),Mf(new Date,2),Mf(new Date,3),Mf(new Date,6),Fp(new Date,1),Fp(new Date,2),Fp(new Date,3);tu(new Date,1),So(new Date,1),WD(new Date),YD(new Date),qD(new Date),XD(new Date);iu(tu(new Date,1)),ru(tu(new Date,1)),iu(tu(new Date,2)),ru(new Date),iu(tu(new Date,6)),ru(new Date),iu(tu(new Date,13)),ru(new Date),iu(tu(new Date,29)),ru(new Date),WD(a0(new Date,1)),YD(a0(new Date,1)),a0(new Date,1),qD(Lp(new Date,1)),XD(Lp(new Date,1)),Lp(new Date,1),VF(l0(new Date,1)),BF(l0(new Date,1)),l0(new Date,1);iu(So(new Date,1)),ru(So(new Date,1)),iu(new Date),ru(So(new Date,2)),iu(new Date),ru(So(new Date,6)),iu(new Date),ru(So(new Date,13)),iu(new Date),ru(So(new Date,29)),zp(new Date,1),WD(zp(new Date,1)),YD(zp(new Date,1)),Mf(new Date,1),qD(Mf(new Date,1)),XD(Mf(new Date,1)),Fp(new Date,1),VF(Fp(new Date,1)),BF(Fp(new Date,1));const Zn={base:"relative overflow-hidden",header:{base:"flex text-center justify-between mb-2 items-center",prev:"text-xl leading-4",mid:"",next:"text-xl leading-4"},title:"font-semibold leading-[normal]",content:"flex",days:{header:"text-center grid grid-cols-7 mb-1 pt-2 font-medium",dayOfWeek:"text-center font-medium",week:"grid grid-cols-7",day:"font-normal flex p-2 border",outside:"",startRangeDate:"rounded-tl-md rounded-tr-none rounded-br-none",cornerStartDateBottom:"rounded-bl-none",endRangeDate:"rounded-br-md rounded-bl-none rounded-tl-none",cornerEndDateTop:"rounded-tr-none",range:"rounded-none",selected:"",hover:"rounded-sm",today:"rounded-sm border"},months:{root:"grid grid-cols-4 gap-2",month:"p-1.5",selected:""},years:{root:"grid grid-cols-4 gap-2",year:"p-1.5",selected:""},time:{base:"flex flex-col h-full gap-0",wrapper:"mt-4 bg-panel z-10 flex flex-row",dividerTop:"w-full",dividerLeft:"h-auto mt-2.5 mx-1 bg-surface z-10",header:"flex gap-4 px-0.5 pb-2.5 mb-2",column:{base:"w-6",wrapper:"overflow-y-auto h-52",label:"text-center text-xs text-gray-500",list:"p-0 m-0 list-none",scrollbar:"scrollbar-thin scrollbar-thumb-gray-300 dark:scrollbar-thumb-gray-600 scrollbar-track-transparent hover:scrollbar-thumb-gray-400 dark:hover:scrollbar-thumb-gray-500"},items:{wrapper:"flex flex-row flex-auto gap-0.25 pt-1 h-46",container:"h-full",list:"relative h-full p-0 m-0 list-none overflow-y-auto [&::-webkit-scrollbar]:hidden scrollbar-none touch-pan-y",divider:"mx-0",item:{base:"py-0.5 px-1.5 text-center select-none cursor-pointer rounded transition-colors duration-150",selected:"",disabled:"cursor-not-allowed"}}},presets:{wrapper:"bg-panel z-10",divider:"mx-1 h-[calc(100%-26px)] self-end",base:"relative h-59 max-w-52 pr-1 overflow-y-auto [&::-webkit-scrollbar]:hidden scrollbar-none touch-pan-y space-y-0",group:"text-sm font-medium my-1 !pr-0 !pl-0",item:{base:"text-sm p-1.5 my-0.5 duration-0",active:""}}},Yb={...Zn,header:{...Zn.header,base:[Zn.header.base,"text-text-secondary"].join(" ")},days:{...Zn.days,day:[Zn.days.day,"border-transparent text-text-secondary opacity-90 hover:bg-primary-hover hover:disabled:bg-transparent! hover:text-black disabled:text-text-secondary/60"].join(" "),header:[Zn.days.header,"text-text-secondary"].join(" "),outside:[Zn.days.outside,"opacity-40 text-text-secondary"].join(" "),selected:[Zn.days.selected,"text-black border-transparent light:text-white light:border-transparent opacity-100"].join(" "),hover:[Zn.days.hover,"bg-primary-active text-black border-transparent light:text-white opacity-100"].join(" "),today:[Zn.days.today,"border-panel-accent text-text-primary"].join(" ")},months:{...Zn.months,month:[Zn.months.month,"hover:bg-primary-hover hover:text-black border-transparent text-text-secondary light:hover:text-white"].join(" "),selected:[Zn.years.selected,"border-transparent text-black light:text-white"].join(" ")},years:{...Zn.years,year:[Zn.years.year,"hover:bg-primary-hover hover:text-black border-transparent text-text-secondary light:hover:text-white"].join(" "),selected:[Zn.years.selected,"border-transparent text-black light:text-white"].join(" ")},time:{...Zn.time,wrapper:[Zn.time.wrapper,"border-panel-border"].join(" "),items:{...Zn.time.items,item:{...Zn.time.items.item,base:[Zn.time.items.item.base,"text-text-secondary hover:bg-primary-hover hover:text-black"].join(" "),selected:[Zn.time.items.item.selected,"bg-blue-500 text-white dark:bg-blue-600 dark:text-white"].join(" "),disabled:[Zn.time.items.item.disabled,"opacity-50"].join(" ")}}},presets:{...Zn.presets,group:[Zn.presets.group,"!text-gray-500 dark:text-gray-400"].join(" "),item:{...Zn.presets.item,base:[Zn.presets.item.base,"hover:text-black dark:hover:bg-primary-hover hover:rounded-sm"].join(" "),active:[Zn.presets.item.active,"bg-primary text-black rounded-sm"].join(" ")}}};({...Zn.header,base:[Zn.header.base,"mb-[var(--spacing-sm)] mb-[var(--calendar-gap)]"].join(" ")},{...Zn.days,header:[Zn.days.header,"gap-[var(--calendar-gap)]"].join(" "),outside:[Zn.days.outside,"text-gray-100/60"].join(" ")});const I1={base:"relative overflow-hidden",header:{base:"flex text-center justify-between mb-2 items-center",prev:"",mid:"",next:""},title:"font-semibold flex grow justify-around",content:"flex gap-4"},BJ={base:I1.base,header:I1.header,title:I1.title,content:I1.content,days:Yb.days,presets:{...Yb.presets,divider:"mx-1 h-[calc(100%-30px)] self-end"}};Yb.days;const YN=({label:n,size:e,disabled:t,checked:i,onChange:r,labelClassName:s,theme:o})=>ue.jsx("span",{className:pn(o.label.base,o.label.sizes[e],i&&o.label.checked,t&&o.label.disabled,!t&&r&&o.label.clickable,s),onClick:()=>{!t&&r&&r()},children:n});q.forwardRef(({checked:n=!1,intermediate:e=!1,label:t,disabled:i,size:r="medium",labelPosition:s="end",onChange:o,onBlur:a,className:l,containerClassName:u,labelClassName:h,borderPath:p="M 1 0 L 16 0 C 16.552 0 17 0.448 17 1 L 17 15 C 17 15.552 16.552 16 16 16 L 1 16 C 0.448 16 0 15.552 0 15 L 0 1 C 0 0.448 0.448 0 1 0 Z",checkedPath:m="M 4 8 L 8 12 L 12 4",intermediatePath:y="M 5.36396 8.17792 L 10.6044 8.17792",theme:b,...x},S)=>{const _=mi("checkbox",b),T=uF(0),A=hF(T,[.05,.15],[0,1]),[M,C]=q.useState(!1);q.useEffect(()=>{(n||e)&&C(!0)},[]);const R={pressed:I=>({pathLength:I?.85:.3}),checked:{pathLength:1},unchecked:{pathLength:0}},L=q.useCallback(()=>{!i&&o&&o(!n)},[i,o,n]);return ue.jsxs("div",{className:pn(_.base,u,n&&"checked"),children:[s==="start"&&t&&ue.jsx(YN,{label:t,size:r,checked:n,disabled:i,onChange:L,labelClassName:pn("mr-2.5",h),theme:_}),ue.jsx(dl.div,{...x,ref:S,tabIndex:i?-1:0,className:pn(_.checkbox.base,n&&_.checkbox.checked,i&&_.checkbox.disabled,_.sizes[r],l),onClick:I=>{!i&&o&&(I.stopPropagation(),o(!n))},onBlur:a,onKeyDown:I=>{!i&&o&&I.code==="Space"&&o(!n)},children:ue.jsxs(dl.svg,{animate:n?"checked":"unchecked",whileHover:i?void 0:"hover",whileTap:i?void 0:"pressed",viewBox:"0 0 16 16",width:16,height:16,children:[ue.jsx(dl.path,{className:pn(_.border.base,n&&_.border.checked,i&&_.border.disabled),d:p,variants:_.boxVariants}),e?ue.jsx(dl.path,{d:y,fill:"transparent",strokeWidth:"1",className:_.check.base,variants:R,style:{pathLength:T,opacity:A},custom:n}):ue.jsx(dl.path,{d:m,fill:"transparent",strokeWidth:"1",className:pn(_.check.base,i&&_.check.disabled,n&&_.check.checked),variants:R,style:{pathLength:T,opacity:A},custom:n})]})}),s==="end"&&t&&ue.jsx(YN,{label:t,size:r,checked:n,disabled:i,onChange:L,labelClassName:pn("ml-2.5",h),theme:_})]})});const ds={base:"inline-flex items-center w-full group",label:{base:"dark:text-gray-400 light:text-gray-700 ml-2.5 w-full",checked:"checked dark:text-gray-100 light:text-gray-900",disabled:"cursor-not-allowed dark:text-gray-600 light:text-gray-400",clickable:"cursor-pointer",sizes:{small:"text-sm",medium:"text-base",large:"text-lg"}},check:{base:"stroke-white",checked:"",disabled:"cursor-not-allowed"},border:{base:"stroke-gray-400 light:stroke-gray-700",checked:"stroke-blue-500",disabled:"cursor-not-allowed stroke-gray-500"},checkbox:{base:"fill-transparent flex items-center justify-center cursor-pointer focus-visible:outline-hidden",checked:"fill-blue-500 checked",disabled:"fill-transparent disabled"},sizes:{small:"[&>svg]:w-3 [&>svg]:h-3",medium:"[&>svg]:w-4 [&>svg]:h-4",large:"[&>svg]:w-5 [&>svg]:h-5"}},VJ={...ds,checkbox:{...ds.checkbox,base:[ds.checkbox.base,"border border-surface","[&.checked.disabled]:fill-gray-400"].join(" "),checked:[ds.checkbox.checked,"group-hover:fill-blue-400","light:group-hover:fill-blue-600","light:group-hover:[&.disabled]:fill-gray-400"].join(" "),disabled:[ds.checkbox.disabled,"group-hover:transparent","light:group-hover:transparent"].join(" ")},check:{...ds.check,base:[ds.check.base,"group-hover:stroke-black light:group-hover:stroke-white"].join(" "),disabled:[ds.check.disabled,"stroke-black light:stroke-white group-hover:stroke-black "].join(" ")},border:{...ds.border,base:[ds.border.base,"dark:group-hover:stroke-blue-300","light:group-hover:stroke-blue-600"].join(" "),disabled:[ds.border.disabled,"dark:group-hover:stroke-gray-500","light:group-hover:stroke-gray-400"].join(" ")},label:{...ds.label,base:[ds.label.base,"text-text-primary dark:group-hover:text-blue-300 light:group-hover:text-blue-400"].join(" "),checked:[ds.label.checked,"group-hover:text-gray-100"].join(" "),disabled:[ds.label.disabled,"light:group-hover:text-gray-400","dark:group-hover:text-gray-600"].join(" ")},boxVariants:{hover:{strokeWidth:1},pressed:{scale:.95}}};[ds.check.base,"stroke-[var(--checkbox-check-stroke)]"].join(" "),{...ds.label,base:[ds.label.base,"text-[var(--checkbox-label-color)] ml-[var(--spacing-md)]"].join(" ")};const GJ=q.forwardRef(({className:n,containerClassname:e,error:t,fullWidth:i,selectOnFocus:r,start:s,end:o,startAdornment:a,endAdornment:l,autoFocus:u,disabled:h,value:p,size:m="medium",onFocus:y,onChange:b,onValueChange:x,onBlur:S,theme:_,...T},A)=>{const M=q.useRef(null),C=q.useRef(null),[R,L]=q.useState(!1);q.useImperativeHandle(A,()=>({inputRef:C,containerRef:M,blur:()=>{var P;return(P=C.current)==null?void 0:P.blur()},focus:()=>{var P;return(P=C.current)==null?void 0:P.focus()},select:()=>{var P;return(P=C.current)==null?void 0:P.select()}})),q.useLayoutEffect(()=>{u&&requestAnimationFrame(()=>{var P;return(P=C.current)==null?void 0:P.focus()})},[u]);const I=mi("input",_);return ue.jsxs("div",{className:pn(I.base,R&&I.focused,i&&I.fullWidth,t&&I.error,I.sizes[m],h&&I.disabled,e),ref:M,children:[(s||a)&&ue.jsx("div",{className:pn(I.adornment.base,I.adornment.start),children:s??a}),ue.jsx("input",{...T,ref:C,value:p,disabled:h,className:pn(I.input,n),onFocus:P=>{r&&P.target.select(),L(!0),y?.(P)},onBlur:P=>{S?.(P),L(!1)},onChange:P=>{x?.(P.target.value),b?.(P)}}),(o||l)&&ue.jsx("div",{className:pn(I.adornment.base,I.adornment.end),children:o??l})]})});q.forwardRef(({inputClassName:n,className:e,placeholder:t,value:i,theme:r,...s},o)=>{const a=mi("input",r);return ue.jsxs("div",{className:gl("inline-grid",e),children:[ue.jsxs("span",{className:"invisible",style:{gridArea:" 1 / 1 "},children:[!i&&"",typeof i=="string"?i?i?.replace(/ /g,""):t?.replace(/ /g,""):i]}),ue.jsx("input",{...s,size:1,ref:o,style:{gridArea:" 1 / 1 "},type:"text",placeholder:t,value:i,className:gl("border-none bg-transparent focus:outline-hidden",a.inline,n)})]})});q.forwardRef(({debounce:n=100,value:e,onChange:t,onValueChange:i,...r},s)=>{const o=q.useRef(null),[a,l]=q.useState(e);return q.useEffect(()=>{l(e)},[e]),ue.jsx(GJ,{...r,ref:s,value:a,onKeyDown:u=>{u.key==="Enter"&&(i?.(u.target.value),t?.(u))},onChange:u=>{l(u.target.value),n?(clearTimeout(o.current),o.current=setTimeout(()=>{i?.(u.target.value),t?.(u)},n)):(i?.(u.target.value),t?.(u))}})});const Xh={base:"flex relative flex-row items-center flex-nowrap box-border transition-colors rounded-xs",focused:"",input:"flex-1 font-normal font-sans bg-transparent border-0 p-0 m-0 disabled:pointer-events-none outline-hidden px-0.5 disabled:cursor-not-allowed disabled:text-disabled",inline:"bg-transparent border-0 outline-hidden",disabled:"text-waterloo cursor-not-allowed",fullWidth:"w-full",error:"border-error",sizes:{small:"[&>input]:text-sm p-1 text-sm",medium:"[&>input]:text-base px-2.5 py-1.5 text-base",large:"[&>input]:text-lg p-5 text-lg"},adornment:{base:"flex items-center justify-center [&>svg]:w-4 [&>svg]:h-4 [&>svg]:current-color",start:"pr-1.5",end:"pl-1.5"}},Yh={...Xh,base:[Xh.base,"bg-panel border border-panel-accent text-text-primary hover:border-panel-accent light:hover:border-panel-accent","hover:after:bg-[radial-gradient(circle,_#105EFF_0%,_#105EFF_36%,_#242433_100%)] light:hover:after:bg-[radial-gradient(circle,_#105EFF_0%,_#105EFF_36%,_#E6E6F0_100%)]",'hover:after:content-[""] hover:after:absolute hover:after:mx-1 hover:after:h-px after:z-2 hover:after:rounded-sm hover:after:-bottom-[1px] hover:after:inset-x-0.5'].join(" "),focused:[Xh.focused,"focus-within:after:bg-[radial-gradient(circle,_#93B6FF_0%,_#105EFF_36%,_#3D3D4D_90%,_#242433_100%)] light:focus-within:after:bg-[radial-gradient(circle,_#105EFF_10%,_#93B6FF_36%,_#E6E6F0_90%)]",'focus-within:after:content-[""] focus-within:after:absolute focus-within:after:mx-0 focus-within:after:h-px after:z-2 focus-within:after:rounded-sm focus-within:after:-bottom-[1px] focus-within:after:inset-x-0.5'].join(" "),input:[Xh.input,"placeholder-accent"].join(" "),disabled:[Xh.disabled,"disabled-within:bg-dark-disabled disabled-within:after:content-none"].join(" "),adornment:{...Xh.adornment,base:[Xh.adornment.base,"text-text-primary"].join(" ")}};[Xh.adornment.base,"[&>svg]:w-[var(--input-adornment-size)] [&>svg]:h-[var(--input-adornment-size)] [&>svg]:fill-[var(--input-adornment-fill)]"].join(" ");const HJ=q.createContext({onChange:null,selectedValue:null}),jJ={check:{opacity:1,scale:1},uncheck:{opacity:0,scale:0}};q.forwardRef(({checked:n,label:e,disabled:t,onChange:i,onBlur:r,className:s,size:o="medium",value:a,theme:l,...u},h)=>{const{onChange:p,selectedValue:m}=q.useContext(HJ),y=q.useMemo(()=>m===null?n:m===a,[n,m,a]),b=S=>{p?.(a),i?.(S)},x=mi("radio",l);return ue.jsxs("div",{className:gl(x.base,s),children:[ue.jsx("div",{...u,ref:h,tabIndex:0,className:gl(x.radio.base,x.sizes[o],{[x.radio.checked]:y,[x.radio.disabled]:t}),onClick:()=>{t||b(!y)},onBlur:r,onKeyDown:S=>{!t&&S.code==="Space"&&b(!y)},children:ue.jsx(dl.div,{className:gl(x.indicator.base,x.indicator.sizes[o],{[x.indicator.disabled]:t}),initial:t?{}:{opacity:0,scale:.5},variants:jJ,animate:y?"check":"uncheck",transition:{duration:.15}})}),e&&ue.jsx("span",{className:gl(x.label.base,{[x.label.checked]:y,[x.label.disabled]:t,[x.label.clickable]:!t}),onClick:()=>{t||b(!y)},children:e})]})});const Jr={base:"box-border leading-none group",radio:{base:"will-change-[border-color] inline-flex justify-center items-center box-border align-middle rounded-[100%] bg-transparent border cursor-pointer",disabled:"cursor-not-allowed",checked:""},indicator:{base:"rounded-[100%]",disabled:"cursor-not-allowed",sizes:{small:"w-2 h-2",medium:"w-2.5 h-2.5",large:"w-3.5 h-3.5"}},label:{base:"w-full align-middle ml-2.5",clickable:"cursor-pointer hover:text-blue-300",disabled:"cursor-not-allowed",checked:""},sizes:{small:"w-3 h-3",medium:"w-4 h-4",large:"w-5 h-5"}},WJ={...Jr,label:{...Jr.label,base:[Jr.label.base,"text-text-secondary"].join(" "),checked:[Jr.label.checked,"text-text-primary"].join(" "),disabled:[Jr.label.disabled,"text-secondary-inactive/40!"].join(" ")},radio:{...Jr.radio,base:[Jr.radio.base,"border-surface group-hover:border-primary-hover hover:border-primary-hover"].join(" "),checked:[Jr.radio.checked,"border-primary-active group-hover:border-primary-hover"].join(" "),disabled:[Jr.radio.disabled,"border-secondary-inactive!"].join(" ")},indicator:{...Jr.indicator,base:[Jr.indicator.base,"bg-primary group-hover:bg-primary-hover"].join(" "),disabled:[Jr.indicator.disabled,"bg-secondary-inactive!"].join(" ")}};({...Jr.label,base:[Jr.label.base,"text-[var(--radio-label-color)] ml-[var(--spacing-md)]"].join(" ")},{...Jr.radio,base:[Jr.radio.base,"bg-[var(--radio-background)] [border:_var(--radio-stroke-size)_solid_var(--radio-stroke)]"].join(" "),checked:[Jr.radio.checked,"border-[var(--radio-stroke-active)]"].join(" ")}),{...Jr.indicator,base:[Jr.indicator.base,"bg-[var(--radio-indicator-active)]"].join(" ")};const Jc={base:"relative box-border w-full h-0.5",drag:"absolute w-4 h-4 -left-2 -top-2 rounded-full",inputWrapper:{base:"cursor-pointer inline-block relative h-full w-full rounded-full",disabled:"cursor-not-allowed"},rangeHighlight:{base:"pointer-events-none h-0.5",disabled:"cursor-not-allowed"},disabled:"cursor-not-allowed",input:"absolute left-[-9999px]",tooltip:"absolute top-[-45px] whitespace-nowrap text-center left-2/4 rounded-lg p-2.5"},XJ={...Jc,base:[Jc.base,"bg-surface light:bg-gray-200"].join(" "),inputWrapper:{...Jc.inputWrapper,base:[Jc.inputWrapper.base,"bg-primary-active hover:bg-primary-hover shadow-[0px_4px_4px_0px_rgba(0,0,0,0.20)]"].join(" "),disabled:[Jc.inputWrapper.disabled,"bg-secondary-inactive hover:bg-secondary-inactive"].join(" ")},rangeHighlight:{base:[Jc.rangeHighlight.base,"bg-primary-active"].join(" "),disabled:[Jc.rangeHighlight.disabled,"bg-secondary-inactive"].join(" ")},tooltip:[Jc.tooltip,"text-text-primary bg-surface"].join(" ")};({...Jc.rangeHighlight,base:[Jc.rangeHighlight.base,"h-[var(--range-track-size)] bg-[var(--range-track-active-background)]"].join(" ")});const qJ=({height:n=16,width:e=16})=>ue.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:e,height:n,viewBox:"0 0 16 16",fill:"currentColor",children:ue.jsx("path",{d:"M12.6667 4.27331L11.7267 3.33331L8.00004 7.05998L4.27337 3.33331L3.33337 4.27331L7.06004 7.99998L3.33337 11.7266L4.27337 12.6666L8.00004 8.93998L11.7267 12.6666L12.6667 11.7266L8.94004 7.99998L12.6667 4.27331Z",fill:"currentColor"})}),ps={base:"flex flex-nowrap items-center box-border border rounded-sm",container:"relative",inputContainer:"flex-wrap flex items-center overflow-hidden flex-1 max-w-full [&>div]:max-w-full [&_.invisible]:text-ellipsis [&_.invisible]:overflow-hidden",input:"p-0 bg-transparent text-ellipsis align-middle max-w-full read-only:cursor-not-allowed focus:outline-hidden disabled:text-disabled",placeholder:"",prefix:"overflow-hidden whitespace-nowrap text-ellipsis",suffix:{container:"flex items-center justify-center",button:"disabled:cursor-not-allowed",refresh:"mr-1.5 [&>svg]:w-4 [&>svg]:h-4 [&>svg]:fill-text-secondary",loader:"mr-2.5",close:"mr-1.5 [&>svg]:w-4 [&>svg]:h-4 [&>svg]:fill-text-secondary",expand:"[&>svg]:w-4 [&>svg]:h-4 [&>svg]:fill-text-secondary"},disabled:"cursor-not-allowed text-disabled hover:after:content-none",unfilterable:"caret-transparent",error:"border border-solid",open:"rounded-sm rounded-ee-none rounded-es-none",single:{prefix:"overflow-hidden whitespace-nowrap text-ellipsis max-w-full",inputContainer:"flex-nowrap",input:"max-w-full"},multiple:{prefix:"contents",inputContainer:"flex-wrap"},chip:{base:"cursor-pointer flex text-sm leading-none box-border mr-1 px-1 py-1 rounded-sm border-solid border-transparent",hover:"",focused:"focused:border-transparent focused:outline-none",disabled:"disabled:cursor-not-allowed",removeButton:"cursor-pointer leading-0 ml-1 p-0 border-0 [&>svg]:w-3 [&>svg]:h-3 [&>svg]:align-baseline [&>svg]:pointer-events-none"},size:{small:"py-1 px-2 text-sm min-h-8",medium:"py-2 px-3 text-base min-h-[35px]",large:"py-2 px-3 text-lg min-h-[42px]"}},YJ={...ps,base:[ps.base,"bg-panel text-text-primary border-panel-accent border-solid hover:border-panel-accent light:hover:border-panel-accent","hover:after:bg-[radial-gradient(circle,_#105EFF_0%,_#105EFF_36%,_#242433_100%)] light:hover:after:bg-[radial-gradient(circle,_#105EFF_0%,_#105EFF_36%,_#E6E6F0_100%)]","focus-within:after:bg-[radial-gradient(circle,_#93B6FF_0%,_#105EFF_36%,_#3D3D4D_90%,_#242433_100%)] light:focus-within:after:bg-[radial-gradient(circle,_#105EFF_10%,_#93B6FF_36%,_#E6E6F0_90%)]",'hover:after:content-[""] hover:after:absolute hover:after:mx-1 hover:after:h-px after:z-2 hover:after:rounded-sm hover:after:-bottom-[0px] hover:after:inset-x-0.5','focus-within:after:content-[""] focus-within:after:absolute focus-within:after:mx-0 focus-within:after:h-px after:z-2 focus-within:after:rounded-sm focus-within:after:-bottom-[0px] focus-within:after:inset-x-0.5'].join(" "),placeholder:[ps.placeholder,"placeholder:text-secondary-content"].join(" "),disabled:[ps.disabled,"text-text-secondary/40 border-surface light:hover:border-surface"].join(" "),error:[ps.error,"border-error light:border-error/20"].join(" "),suffix:{...ps.suffix,button:[ps.suffix.button,"hover:cursor-pointer"].join(" ")},chip:{...ps.chip,base:[ps.chip.base,"[&>svg]:fill-text-primary [&>svg]:disabled:fill-text-secondary/40"].join(" "),hover:[ps.chip.hover,"hover:brightness-150"].join(" "),focused:[ps.chip.focused,"border-panel-accent"].join(" "),removeButton:[ps.chip.removeButton,"[&>svg]:fill-text-primary [&>svg]:disabled:fill-text-secondary/40"].join(" ")}};({...ps.suffix,close:[ps.suffix.close,"[&>svg]:fill-[var(--select-input-icon-color)]"].join(" "),expand:[ps.suffix.expand,"[&>svg]:fill-[var(--select-input-icon-color)]"].join(" ")},{...ps.chip,base:[ps.chip.base,"bg-[var(--select-chip-background)] text-[var(--select-chip-color)] [border:_var(--select-chip-border)]"].join(" "),removeButton:[ps.chip.removeButton,"[&>svg]:fill-[var(--select-chip-icon-color)]"].join(" ")});const Zs={base:"border border-solid rounded-b-md text-center will-change-[transform,opacity] min-w-[112px] max-h-[300px] overflow-y-auto text-left box-border",groupItem:{base:"p-0 border-0 first:pt-2 last:pb-2",title:"font-bold uppercase m-0 px-1.5 py-2.5",size:{small:"px-2.5 text-sm",medium:"px-3 text-sm",large:"px-3.5 text-base"}},option:{base:"flex-1 whitespace-break-spaces break-words py-1.5 px-2.5",hover:"",selected:"",active:"",disabled:"",checkIcon:"ml-1",content:"flex flex-row justify-between"},size:{small:"px-2.5 py-1.5 text-sm",medium:"px-4 py-2 text-base",large:"px-5 py-3 text-lg"}},$J={...Zs,base:[Zs.base,"bg-panel text-text-primary border-panel-accent border-t-transparent"].join(" "),groupItem:{...Zs.groupItem,title:[Zs.groupItem.title,"text-text-primary"].join(" ")},option:{...Zs.option,base:[Zs.option.base,"text-text-secondary "].join(" "),hover:[Zs.option.hover,"hover:bg-vulcan hover:text-mystic light:hover:bg-vulcan/5 light:hover:text-text-secondary"].join(" "),active:[Zs.option.active,"bg-vulcan hover:text-mystic"].join(" "),selected:[Zs.option.selected,"text-primary-active"].join(" ")}};({...Zs.groupItem,title:[Zs.groupItem.title,"text-gray-600"].join(" ")},{...Zs.option,base:[Zs.option.base,"text-[var(--select-menu-item-color)] [padding:_var(--select-menu-item-spacing)]"].join(" "),hover:[Zs.option.hover,"hover:bg-[var(--select-menu-item-active-background)] hover:text-[var(--select-menu-item-active-color)]"].join(" "),active:[Zs.option.active,"hover:bg-[var(--select-menu-item-active-background)] text-[var(--select-menu-item-active-color)]"].join(" "),selected:[Zs.option.selected,"bg-[var(--select-menu-item-selected-background)] text-[var(--select-menu-item-selected-color)]"].join(" ")});const ZJ={selectInput:YJ,selectMenu:$J};q.forwardRef(({fullWidth:n,size:e="medium",containerClassName:t,className:i,error:r,autoFocus:s,theme:o,...a},l)=>{const u=q.useRef(null),h=q.useRef(null);q.useImperativeHandle(l,()=>({textareaRef:h,containerRef:u,blur:()=>{var m;return(m=h.current)==null?void 0:m.blur()},focus:()=>{var m;return(m=h.current)==null?void 0:m.focus()}})),q.useLayoutEffect(()=>{s&&requestAnimationFrame(()=>{var m;return(m=h.current)==null?void 0:m.focus()})},[s]);const p=mi("textarea",o);return ue.jsx("div",{className:pn(p.base,n&&p.fullWidth,r&&p.error,t),ref:u,children:ue.jsx(OZ,{ref:h,className:pn(p.input,n&&p.fullWidth,a.disabled&&p.disabled,p.sizes[e],i),autoFocus:s,...a})})});const N1={input:"resize-none read-only:cursor-not-allowed"},KJ={...N1,base:[N1.base,Yh.base,"disabled-within:hover:after:content-none"].join(" "),input:[N1.input,Yh.input].join(" "),disabled:[N1.disabled,Yh.disabled].join(" "),fullWidth:Yh.fullWidth,error:Yh.error,sizes:Yh.sizes};q.forwardRef(({checked:n,disabled:e,onChange:t,onBlur:i,className:r,size:s="medium",animated:o=!0,animation:a,theme:l,...u},h)=>{const p=mi("toggle",l);return ue.jsx("div",{...u,ref:h,tabIndex:0,role:"switch",className:gl(p.base,p.sizes[s],{[p.checked]:n,[p.disabled]:e,[p.disabledAndChecked]:e&&n},r),onClick:()=>{!e&&t&&t(!n)},onBlur:i,onKeyDown:m=>{!e&&t&&m.code==="Space"&&t(!n)},children:ue.jsx(dl.div,{className:gl(p.handle.base,p.handle.sizes[s],{[p.handle.disabled]:e,[p.handle.disabledAndChecked]:e&&n}),layout:!0,...a||{transition:{type:"spring",stiffness:700,damping:30,duration:o?.3:0}}})})});const Ep={base:"flex items-center justify-start cursor-pointer bg-surface box-border border border-panel-accent rounded-full hover:bg-primary-hover transition-[background-color] ease-in-out duration-300",disabled:"cursor-not-allowed bg-transparent hover:bg-transparent",checked:"justify-end bg-primary",disabledAndChecked:"bg-secondary-inactive hover:bg-secondary-inactive light:bg-gray-400 light:hover:bg-gray-400",handle:{base:"rounded-full bg-panel",sizes:{small:"w-3 h-full",medium:"w-5 h-full",large:"w-6 h-full"},disabled:"bg-secondary-inactive light:bg-gray-400",disabledAndChecked:"bg-black light:bg-white"},sizes:{small:"w-8 h-4 p-px",medium:"w-12 h-6 p-px",large:"w-16 h-7 p-px"}},QJ=Ep;({...Ep,base:[Ep.base,"bg-[var(--toggle-background)] rounded-[var(--toggle-border-radius)] [border:_var(--toggle-border)]"].join(" "),disabled:[Ep.disabled,"opacity-[var(--toggle-disabled-opacity,0.8)] bg-[var(--toggle-disabled-background)]"].join(" "),checked:[Ep.checked,"bg-[var(--toggle-background-checked)] [border:_var(--toggle-border-checked)]"].join(" "),handle:{...Ep.handle,base:[Ep.handle.base,"bg-[var(--toggle-handle-background)] rounded-[var(--toggle-handle-border-radius)]"].join(" ")}});q.forwardRef(({children:n,className:e,size:t="medium",theme:i,...r},s)=>{const o=mi("button",i);return ue.jsx(DB,{className:pn(o.iconSizes[t],e),size:t,...r,ref:s,children:n})});const JJ=q.forwardRef(({reference:n,children:e,style:t,className:i,placement:r="bottom-start",closeOnEscape:s=!0,open:o=!1,appendToBody:a=!0,closeOnBodyClick:l=!0,maxHeight:u="max-height: calc(100vh - 48px)",autofocus:h=!0,animated:p=!0,animation:m,modifiers:y,autoWidth:b,minWidth:x,maxWidth:S,onClose:_,onMouseEnter:T,onMouseLeave:A,theme:M},C)=>{const R=oO(),L=q.useMemo(()=>{if(b){const P={name:"sameWidth",fn:B=>{const{width:F}=B.rects.reference;let z=F;return S&&z>S?z=S:x&&z<x&&(z=x),{data:{menuWidth:z}}}},U=eN({apply({middlewareData:B,elements:F}){var z;F.floating.style.width=`${((z=B?.sameWidth)==null?void 0:z.menuWidth)??0}px`}});return y?[...y??[],P,U]:[P,U]}else{const P=eN({apply({elements:U}){U.floating.style.width="auto"}});return[...y??[],P]}},[y,b,x,S]),I=mi("menu",M);return ue.jsx(iJ,{open:o,closeOnBodyClick:l,appendToBody:a,reference:n,placement:r,modifiers:L,closeOnEscape:s,content:()=>ue.jsx(dl.div,{ref:C,...m||{transition:{duration:p?.3:0},initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10}},className:pn(I.base,i),style:t,onMouseEnter:T,onMouseLeave:A,children:h?ue.jsx(f$,{focusTrapOptions:{escapeDeactivates:!0,clickOutsideDeactivates:!0,fallbackFocus:`#${R}`},children:ue.jsx("div",{id:R,className:I.inner,tabIndex:-1,style:{maxHeight:u},children:typeof e=="function"?e():e})}):ue.jsx("div",{className:I.inner,style:{maxHeight:u},children:typeof e=="function"?e():e})}),onClose:_})});q.forwardRef(({label:n,children:e,style:t,placement:i="right-start",menuClassName:r,menuStyle:s,enterDelay:o=0,autofocus:a=!0,leaveDelay:l=100,className:u,maxHeight:h,activeClassName:p,closeOnBodyClick:m=!0,closeOnEscape:y=!0,animation:b,onClose:x},S)=>{const[_,T]=q.useState(!1),A=q.useRef(null),M=q.useRef(null),C=q.useRef(!1),R=q.useRef(null),L=q.useRef(null),I=q.useCallback(()=>{clearTimeout(R.current),clearTimeout(L.current),R.current=setTimeout(()=>T(!0),o)},[o]),P=q.useCallback(()=>{clearTimeout(R.current),clearTimeout(L.current),T(!_)},[_]),U=q.useCallback(()=>{L.current=setTimeout(()=>{C.current||T(!1)},l)},[l]),B=q.useCallback(W=>{clearTimeout(R.current),clearTimeout(L.current),C.current=!0},[]),F=q.useCallback(W=>{clearTimeout(R.current),clearTimeout(L.current),C.current=!1,L.current=setTimeout(()=>{var X;(X=A.current)!=null&&X.contains(W.target)||T(!1)},l)},[l]),z=q.useCallback(W=>{T(!1),x?.(W)},[x]);return q.useImperativeHandle(S,()=>({close:()=>{T(!1)}})),ue.jsxs(q.Fragment,{children:[ue.jsx("div",{className:jF(u,{[p]:_}),style:t,ref:A,onClick:P,onMouseEnter:I,onMouseLeave:U,children:n}),ue.jsx(JJ,{className:r,autofocus:a,style:s,reference:A,closeOnBodyClick:m,closeOnEscape:y,open:_,placement:i,maxHeight:h,animation:b,ref:M,onMouseEnter:B,onMouseLeave:F,onClose:z,children:e})]})});const $N={base:"relative min-w-[112px] max-w-[500px] p-px",inner:"focus:outline-hidden"},eee={...$N,inner:[$N.inner,"text-text-primary bg-panel"].join(" ")},tee={input:Yh,calendar:Yb,preset:{list:"w-full border border-panel-accent",option:{base:"hover:bg-vulcan hover:text-mystic light:hover:bg-vulcan/5 light:hover:text-text-secondary",active:"bg-vulcan hover:text-mystic"}}};q.forwardRef(({children:n,disabled:e,deleteIcon:t=ue.jsx(qJ,{height:12,width:12}),onDelete:i,size:r="medium",color:s="default",theme:o,variant:a="filled",...l},u)=>{const h=mi("chip",o);return ue.jsx(OB,{ref:u,size:r,disabled:e,color:s,end:ue.jsx(DB,{tabIndex:0,variant:"text",size:r,className:pn(h.deleteButton.base,h.deleteButton[r]),onClick:p=>{e||(p.stopPropagation(),i?.())},disabled:e,disableMargins:!0,disablePadding:!0,children:t}),variant:a,theme:h,...l,children:n})});const Qr={base:`
  inline-flex whitespace-no-wrap select-none items-center justify-center px-2.5 py-0.5
  rounded-xs leading-none text-white transition-colors
  duration-300 ease [&>svg]:transition-[fill] [&>svg]:will-change-[fill] font-medium
  `,colors:{default:{selectable:{base:"hover:cursor-pointer"}},primary:{selectable:{base:"hover:cursor-pointer"}},secondary:{selectable:{base:"hover:cursor-pointer"}},success:{selectable:{base:"hover:cursor-pointer"}},warning:{selectable:{base:"hover:cursor-pointer"}},error:{selectable:{base:"hover:cursor-pointer"}},info:{selectable:{base:"hover:cursor-pointer"}}},adornment:{base:"flex items-center justify-center",start:"mr-1",end:"ml-1",sizes:{small:"[&>svg]:w-3 [&>svg]:h-3",medium:"[&>svg]:w-4 [&>svg]:h-4",large:"[&>svg]:w-5 [&>svg]:h-5"}},sizes:{small:"text-[10px] leading-[inherit] px-1 py-0.5",medium:"text-sm leading-[inherit] px-2 py-0.5",large:"text-base leading-[inherit] px-3 py-0.5"},focus:"focus-visible:outline-dashed focus-visible:outline-1 focus-visible:outline-offset-2",deleteButton:{base:"text-inherit",sizes:{small:"leading-[10px] max-h-2.5",medium:"leading-3 max-h-3",large:"leading-[14px] max-h-3.5"}},disabled:"opacity-50 cursor-not-allowed"},nee={base:Qr.base,adornment:Qr.adornment,sizes:Qr.sizes,focus:Qr.focus,variants:{filled:"border border-transparent box-border",outline:"bg-transparent border hover:bg-transparent"},colors:{default:{variants:{filled:"bg-panel border-panel text-text-primary",outline:"text-text-primary dark:border-gray-100 light:border-gray-900"},selectable:{base:`${Qr.colors.default.selectable.base}`,variants:{filled:{base:"hover:bg-primary-hover hover:border-primary-hover hover:text-panel",selected:"bg-primary text-panel"},outline:{base:"hover:text-primary-hover hover:border-panel-accent",selected:"border-panel-accent text-primary"}}}},primary:{variants:{outline:"text-primary border-panel-accent",filled:"bg-primary border-primary text-panel"},selectable:{base:`${Qr.colors.primary.selectable.base}`,variants:{filled:{base:"hover:bg-primary-hover hover:border-primary-hover hover:text-panel",selected:"bg-primary-hover"},outline:{base:"hover:text-primary-hover hover:border-primary",selected:"border-primary"}}}},secondary:{variants:{filled:"bg-secondary border-secondary text-text-primary",outline:"text-secondary border-panel-accent"},selectable:{base:`${Qr.colors.secondary.selectable.base}`,variants:{filled:{base:"hover:bg-secondary-hover hover:border-secondary-hover hover:text-panel",selected:"bg-secondary-hover text-panel"},outline:{base:"hover:text-secondary-hover hover:border-secondary",selected:"border-secondary"}}}},success:{variants:{filled:"bg-success border-success text-panel",outline:"text-success border-panel-accent"},selectable:{base:`${Qr.colors.success.selectable.base}`,variants:{filled:{base:"hover:bg-success-hover hover:border-success-hover",selected:"bg-success-hover"},outline:{base:"hover:text-success-hover hover:border-success",selected:"border-success"}}}},warning:{variants:{filled:"bg-warning border-warning text-panel",outline:"text-warning border-panel-accent"},selectable:{base:`${Qr.colors.warning.selectable.base}`,variants:{filled:{base:"hover:bg-warning-hover hover:border-warning-hover hover:text-panel",selected:"bg-warning-hover"},outline:{base:"hover:text-warning-hover hover:border-warning",selected:"border-warning"}}}},error:{variants:{filled:"bg-error border-error text-panel",outline:"text-error border-panel-accent"},selectable:{base:`${Qr.colors.error.selectable.base}`,variants:{filled:{base:"hover:bg-error-hover hover:border-error-hover hover:text-panel",selected:"bg-error-hover"},outline:{base:"hover:text-error-hover hover:border-error",selected:"border-error"}}}},info:{variants:{filled:"bg-info border-info text-panel",outline:"text-info border-panel-accent"},selectable:{base:`${Qr.colors.info.selectable.base}`,variants:{filled:{base:"hover:bg-info-hover hover:border-info-hover hover:text-panel",selected:"bg-info-hover"},outline:{base:"hover:text-info-hover hover:border-info",selected:"border-info"}}}}},deleteButton:Qr.deleteButton,disabled:Qr.disabled};({...Qr.adornment,start:[Qr.adornment.start,"pr-[var(--spacing-xs)]"].join(" "),end:[Qr.adornment.end,"pl-[var(--spacing-xs)]"].join(" ")},[Qr.sizes.small,"p-[var(--spacing-xs)]"].join(" "),[Qr.sizes.medium,"py-[var(--spacing-xs)] px-[var(--spacing-md)]"].join(" "),[Qr.sizes.large,"p-[var(--spacing-md)]"].join(" "));const ZN={base:"flex",dot:"rounded-[50%]",sizes:{small:"w-1 h-1 m-1",medium:"w-1.5 h-1.5 m-1.5",large:"w-2 h-2 m-2"}},iee={...ZN,dot:[ZN.dot,"light:bg-gray-900 dark:bg-gray-100"].join(" ")};q.forwardRef(({name:n,src:e,color:t,size:i=24,variant:r="filled",rounded:s=!0,className:o,colorOptions:a,theme:l,...u},h)=>{const p=i*.4,m=q.useMemo(()=>p$(n||""),[n]),y=q.useMemo(()=>e?"transparent":t||_$(n||"",a),[t,n,e,a]),b=mi("avatar",l);return ue.jsx("div",{...u,className:pn(b.base,s&&b.rounded,o),style:{width:`${i}px`,height:`${i}px`,fontSize:`${p}px`,backgroundImage:e?`url(${e})`:"none",backgroundColor:y,...r==="outline"&&{backgroundColor:"transparent",border:`solid 1px ${y}`,color:y}},ref:h,children:!e&&n&&ue.jsx("span",{children:m})})});const KN={base:"flex justify-center items-center bg-cover bg-center font-bold",rounded:"rounded-[50%]"},ree={...KN,base:[KN.base,"text-white"].join(" ")},QN={base:"cursor-text",interactive:"cursor-pointer hover:underline"},see={...QN,base:[QN.base,"text-text-primary"].join(" ")};new zZ.Scale({ms:1,s:1*1e3,min:60*1e3,hr:3600*1e3,day:86400*1e3,month:2592e3*1e3});const oee={base:"cursor-text",interactive:"cursor-pointer hover:underline"},aee={...oee},f3={base:"cursor-pointer select-none flex items-center relative",disabled:"cursor-[initial]",hasValue:"cursor-not-allowed",icon:{base:"w-4 h-4 align-middle mx-1.5 fill-current",ascending:"rotate-180"}},lee={...f3,base:[f3.base,"text-text-primary"].join(" ")};({...f3.icon});const AA={base:"flex w-full items-center border-b-2",input:"flex-1 border-0 box-border p-2.5 focus-within:outline-hidden focus-visible:outline-hidden",icon:"w-4 h-4 ml-2.5"},cee={...AA,base:[AA.base,"bg-panel border-bottom border-panel-accent"].join(" "),input:[AA.input,"bg-panel text-text-primary placeholder:placeholder-accent"].join(" ")};let kB=!1;try{typeof window<"u"&&(kB=navigator.platform.toUpperCase().indexOf("MAC")>=0)}catch{}const CA=kB?"":"CTRL";function uee(n){return n.replace("modifier",CA).replace("mod",CA).replace("meta",CA).replace("shift","").replace("plus","+").replace("minus","-")}const fee=({className:n,keycode:e,theme:t,...i})=>{const r=e.split("+").map(uee),s=mi("kbd");return ue.jsx("span",{className:s.base,children:r?.map((o,a)=>ue.jsx(OB,{...i,className:pn(s.chip,n),children:ue.jsx("kbd",{children:o})},a))})},hee={base:"inline-flex gap-1 items-center",chip:"whitespace-nowrap rounded-sm font-mono"},dee={...hee},pee=q.forwardRef(({children:n,active:e,className:t,end:i,hotkey:r,onClick:s,theme:o,...a},l)=>{const{item:u}=mi("commandPalette",o);return ue.jsx(PB,{layout:!0,children:ue.jsx(yJ,{...a,ref:l,className:pn(u.base,e&&u.active,s&&u.clickable),end:ue.jsxs(ue.Fragment,{children:[r&&ue.jsx(fee,{keycode:r,size:"small"}),i]}),children:n})})});pee.displayName="CommandPaletteItem";const RA={base:"transition-colors ease-in-out duration-200",active:"",clickable:"cursor-pointer"},mee={...RA,active:[RA.active,"bg-primary text-text-primary"].join(" "),clickable:[RA.clickable,"hover:bg-primary-hover/70 dark:hover:bg-primary-hover dark:hover:text-white"].join(" ")},gee=q.forwardRef(({children:n,className:e,title:t,index:i,theme:r,...s},o)=>{const{section:a}=mi("commandPalette",r);return ue.jsx(PB,{layout:!0,children:ue.jsxs(vJ,{ref:o,...s,className:pn(a.base,i===0&&a.first,e),children:[t&&ue.jsx(bJ,{children:t}),ue.jsx(pJ,{children:n})]})})});gee.displayName="CommandPaletteSection";const JN={base:"",first:"pt-2.5"},vee={...JN,base:[JN.base,"bg-panel"].join(" ")},eU={base:"w-full border",inner:"max-h-[80vh] overflow-y-auto"},yee={base:[eU.base,"border-panel-accent"].join(" "),inner:[eU.inner,"bg-panel border-0"].join(" "),emptyContainer:"bg-panel",input:cee,item:mee,section:vee},bf={base:"items-center flex user-select-none",pages:{base:"inline-flex",page:{base:"py-1",active:"font-bold"}},ellipsis:"cursor-pointer",pagerDisplayItems:"mr-1.5",itemsDisplay:"",showPageRange:"",totalCount:"",control:"[&>svg]:w-5 [&>svg]:h-5",firstPage:"",prevPage:"",lastPage:"",nextPage:""},bee={...bf,pages:{...bf.pages,page:{base:[bf.pages.page.base,"text-slate-500"].join(" "),active:[bf.pages.page.active,"text-text-primary!"].join(" ")}},control:[bf.control,"text-slate-200 light:text-slate-400 disabled:light:text-slate-300"].join(" "),pagerDisplayItems:[bf.pagerDisplayItems,"text-slate-500"].join(" ")};({...bf.pages,page:([bf.pages.page.base,"px-[var(--spacing-sm)]"].join(" "),[bf.pages.page.active,"text-(--input-color)!"].join(" "))});q.forwardRef(({children:n,className:e,size:t=10,theme:i,...r},s)=>{const o=q.Children.toArray(n),{data:a,hasMore:l,remaining:u}=PJ({items:o,size:t}),h=mi("avatarGroup",i);return ue.jsxs("div",{...r,ref:s,className:pn(h.base,e),children:[a.map((p,m)=>ue.jsx("div",{className:h.avatar,children:p},m)),l&&ue.jsxs("span",{className:h.overflow,children:["+",u," more"]})]})});const tU={base:"flex items-center",avatar:"-ml-2.5",overflow:"ml-[5px]"},_ee={...tU,base:[tU.base,"text-text-primary"].join(" ")};q.forwardRef(({children:n,color:e="default",className:t,disableMargins:i,content:r,hidden:s,placement:o="top-end",theme:a,...l},u)=>{const h=mi("badge",a);return ue.jsxs("span",{className:pn(h.base,i&&h.disableMargins),children:[n,!s&&ue.jsx(dl.span,{initial:{opacity:0,scale:1},animate:{opacity:1,scale:1},"aria-hidden":"true",children:ue.jsx("span",{...l,ref:u,className:pn(h.badge,h.position,h.colors[e],h.positions[o],t),children:r})})]})});const My={base:"relative inline-flex align-middle shrink-0 mx-2 my-0",disableMargins:"m-0",badge:`flex flex-row flex-wrap justify-center content-center items-center absolute box-border
   leading-none text-sm p-1.5 w-[18px] h-[18px] z-1 rounded-[50%] pointer-events-none `,position:"translate-x-2/4 -translate-y-2/4 origin-[100%_0%] right-0 top-0",positions:{"top-start":"top-0 left-0 -translate-x-2/4 -translate-y-2/4 origin-[0%_0%]","top-end":"top-0 right-0 translate-x-2/4 -translate-y-2/4 origin-[100%_0%]","bottom-start":"bottom-0 left-0 -translate-x-2/4 translate-y-2/4 origin-[0%_100%]","bottom-end":"bottom-0 right-0 translate-x-2/4 translate-y-2/4 origin-[100%_100%]"}},xee={base:My.base,disableMargins:My.disableMargins,badge:My.badge,position:My.position,positions:My.positions,colors:{default:"bg-white text-black",primary:"bg-primary text-text-primary",secondary:"bg-secondary text-text-primary",error:"bg-error text-text-primary"}},nU={base:"whitespace-nowrap text-center will-change-[transform,opacity] p-1.5 rounded-sm",disablePointer:"pointer-events-none"},See={...nU,base:[nU.base,"bg-panel-accent text-text-primary"].join(" ")},iU={base:"whitespace-nowrap text-center will-change-[transform,opacity] p-1.5 rounded-sm",disablePadding:"p-0"},wee={...iU,base:[iU.base,"bg-panel text-text-primary"].join(" ")},U1={base:"justify-center items-center flex pointer-events-none top-0 left-0 w-full h-full fixed will-change-transform will-change-opacity",inner:"flex flex-col box-border outline-0 pointer-events-auto overflow-auto max-w-[80vw] max-h-[80vh]",content:"p-[20px] flex-auto overflow-auto",footer:"flex p-[20px] pb-[10px]",header:{base:"flex justify-between pt-[20px] px-[20px] pb-[10px]",text:"flex-1 m-0 p-0 inline-flex text-3xl font-bold",closeButton:"p-0 m-0 ml-[15px] opacity-80 h-auto w-auto inline-flex bg-none border-none cursor-pointer items-center text-[16px] focus:outline-hidden"}},Eee={...U1,inner:[U1.inner,"bg-panel text-text-primary border border-panel-accent rounded-sm shadow-2xl"].join(" "),header:{...U1.header,closeButton:[U1.header.closeButton,"text-text-primary"].join(" ")}},Uw={base:"fixed overflow-y-auto overflow-x-hidden",header:{base:"flex items-center justify-between px-8 py-5 text-3xl font-bold",text:"flex-1 m-0"},content:"px-8 py-5",disablePadding:"p-0",closeButton:{base:"opacity-80 h-auto w-auto min-w-[auto] min-h-[auto] cursor-pointer text-base p-0 border-0 focus:outline-hidden",headerless:"absolute right-5 top-5"},positions:{top:"w-full inset-x-0 top-0",end:"h-full inset-y-0 right-0",bottom:"w-full inset-x-0 bottom-0",start:"h-full inset-y-0 left-0"}},Tee={...Uw,base:[Uw.base,"bg-panel text-text-primary"].join(" ")};({...Uw.closeButton,base:[Uw.closeButton.base,"text-[var(--drawer-color)]"].join(" ")});jQ([]);const Mee={enabled:"cursor-context-menu"},Aee={...Mee};q.createContext({notify:()=>{},notifyError:()=>{},notifyWarning:()=>{},notifySuccess:()=>{},notifyInfo:()=>{},clearNotification:()=>{},clearAllNotifications:()=>{}});const tc={container:"",positions:"fixed z-9998 h-auto -translate-x-2/4 mb-1 px-24 py-0 left-2/4 bottom-0",notification:{base:"flex relative text-base min-w-[400px] rounded-xs mb-2.5 py-2 px-4",variants:{success:{base:"bg-success-background border border-success",icon:"text-success h-4 w-4"},error:{base:"bg-error-background border border-error",icon:"text-error h-4 w-4"},warning:{base:"bg-warning-background border border-warning",icon:"text-warning h-4 w-4"},info:{base:"bg-info-background border border-info",icon:"text-info h-4 w-4"}},content:"inline-flex items-start flex-1 flex-col justify-center",header:"text-base flex gap-2 items-center",closeContainer:"inline-flex items-center",action:"ml-auto mr-2 items-center flex",closeButton:"cursor-pointer text-sm font-semibold m-0 border-0 text-text-primary hover:text-text-primary/70",body:"opacity-70 text-sm mt-1"}},Cee={...tc,notification:{...tc.notification,base:[tc.notification.base,"bg-panel text-text-primary border-panel-accent border"].join(" ")}};({...tc.notification,base:[tc.notification.base,"bg-[var(--notification-background)] border-[var(--notification-border)] text-[var(--notification-color)]"].join(" "),closeButton:[tc.notification.closeButton,"text-[var(--color-on-notification)]"].join(" "),body:[tc.notification.body,"text-[var(--color-on-notification)]"].join(" "),variants:{...tc.notification.variants,success:[tc.notification.variants.success,"text-[var(--notification-color-success)]"].join(" "),error:[tc.notification.variants.error,"text-[var(--notification-color-error)]"].join(" "),warning:[tc.notification.variants.error,"text-[var(--notification-color-warning)]"].join(" ")}});const Ree={base:{common:"px-4 py-3 border-b",variant:{default:"bg-panel-background border-panel-accent",success:"bg-success-background border-success",error:"bg-error-background border-error",warning:"bg-warning-background border-warning",info:"bg-info-background border-info"}},icon:{common:"",variant:{default:"",success:"text-success",error:"text-error",warning:"text-warning",info:"text-info"}},text:"text-base"},Dee={components:{avatar:ree,avatarGroup:_ee,arrow:EJ,badge:xee,button:rJ,block:xJ,chip:nee,contextMenu:Aee,checkbox:VJ,dateFormat:aee,dialog:Eee,divider:uJ,dotsLoader:iee,drawer:Tee,ellipsis:LJ,select:ZJ,list:_J,menu:eee,sort:lee,stack:wJ,card:SJ,kbd:dee,verticalSpacer:NJ,notification:Cee,input:Yh,dateInput:tee,calendar:Yb,calendarRange:BJ,commandPalette:yee,collapse:hJ,textarea:KJ,typography:cJ,radio:WJ,range:XJ,redact:see,toggle:QJ,tooltip:See,tree:TJ,popover:wee,pager:bee,tabs:kJ,jsonTree:UB,breadcrumbs:zJ,stepper:FJ,callout:Ree,backdrop:JQ}};function Oee(){return ue.jsx("header",{className:"header",children:ue.jsxs("div",{className:"container",children:[ue.jsx("h1",{children:" Salesforce Types Explorer"}),ue.jsx("p",{children:"Interactive visualization of Salesforce metadata type dependencies"})]})})}function Lee({graphData:n,searchQuery:e,setSearchQuery:t,filters:i,onFilterChange:r,onTypeSelect:s}){const o=q.useMemo(()=>{if(!n)return{totalTypes:0,totalEdges:0,totalCategories:0};const h=new Set(Object.values(n.categories));return{totalTypes:n.nodes.length,totalEdges:n.edges.length,totalCategories:h.size}},[n]),a=q.useMemo(()=>{if(!n)return{};const h={};return Object.entries(n.categories).forEach(([p,m])=>{h[m]||(h[m]=[]),h[m].push(p)}),h},[n]),l=q.useMemo(()=>Object.keys(a).sort(),[a]),u=h=>{const p=a[h];p.length>0&&s(p[0])};return ue.jsxs("aside",{className:"sidebar",children:[ue.jsx("div",{className:"search-box",children:ue.jsx("input",{type:"text",placeholder:"Search types...",value:e,onChange:h=>t(h.target.value),className:"search-input"})}),ue.jsxs("div",{className:"stats",children:[ue.jsx("h3",{children:"Graph Statistics"}),ue.jsxs("div",{className:"stat-item",children:[ue.jsx("span",{className:"stat-label",children:"Total Types:"}),ue.jsx("span",{className:"stat-value",children:o.totalTypes.toLocaleString()})]}),ue.jsxs("div",{className:"stat-item",children:[ue.jsx("span",{className:"stat-label",children:"Dependencies:"}),ue.jsx("span",{className:"stat-value",children:o.totalEdges.toLocaleString()})]}),ue.jsxs("div",{className:"stat-item",children:[ue.jsx("span",{className:"stat-label",children:"Categories:"}),ue.jsx("span",{className:"stat-value",children:o.totalCategories.toLocaleString()})]})]}),ue.jsxs("div",{className:"filters",children:[ue.jsx("h3",{children:"Relationship Filters"}),ue.jsxs("label",{className:"filter-label",children:[ue.jsx("input",{type:"checkbox",checked:i.contains,onChange:h=>r("contains",h.target.checked)}),ue.jsx("span",{className:"relationship-badge contains",children:"Contains"})]}),ue.jsxs("label",{className:"filter-label",children:[ue.jsx("input",{type:"checkbox",checked:i.extends,onChange:h=>r("extends",h.target.checked)}),ue.jsx("span",{className:"relationship-badge extends",children:"Extends"})]}),ue.jsxs("label",{className:"filter-label",children:[ue.jsx("input",{type:"checkbox",checked:i.generic,onChange:h=>r("generic",h.target.checked)}),ue.jsx("span",{className:"relationship-badge generic",children:"Generic"})]})]}),ue.jsxs("div",{className:"categories",children:[ue.jsx("h3",{children:"Categories"}),ue.jsx("div",{className:"categories-list",children:l.map(h=>ue.jsxs("div",{className:"category-item",onClick:()=>u(h),children:[h," ",ue.jsxs("span",{style:{opacity:.6},children:["(",a[h].length,")"]})]},h))})]})]})}const rT="180",zB={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Pee={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},FB=0,h3=1,BB=2,Iee=3,VB=0,sT=1,Tb=2,nc=3,kf=0,Co=1,yr=2,Df=0,Vp=1,d3=2,p3=3,m3=4,GB=5,Zh=100,HB=101,jB=102,WB=103,XB=104,qB=200,YB=201,$B=202,ZB=203,kw=204,zw=205,KB=206,QB=207,JB=208,e6=209,t6=210,n6=211,i6=212,r6=213,s6=214,Fw=0,Bw=1,Vw=2,Zp=3,Gw=4,Hw=5,jw=6,Ww=7,D_=0,o6=1,a6=2,fu=0,l6=1,c6=2,u6=3,aO=4,f6=5,h6=6,d6=7,g3="attached",p6="detached",oT=300,zf=301,ad=302,$b=303,Zb=304,W0=306,Kb=1e3,vl=1001,Qb=1002,Ds=1003,lO=1004,Nee=1004,Jg=1005,Uee=1005,br=1006,Mb=1007,kee=1007,ou=1008,zee=1008,wl=1009,cO=1010,uO=1011,y0=1012,aT=1013,Ff=1014,oa=1015,X0=1016,lT=1017,cT=1018,b0=1020,fO=35902,hO=35899,dO=1021,pO=1022,eo=1023,_0=1026,x0=1027,uT=1028,O_=1029,mO=1030,fT=1031,Fee=1032,hT=1033,Ab=33776,Cb=33777,Rb=33778,Db=33779,Xw=35840,qw=35841,Yw=35842,$w=35843,Zw=36196,Kw=37492,Qw=37496,Jw=37808,eE=37809,tE=37810,nE=37811,iE=37812,rE=37813,sE=37814,oE=37815,aE=37816,lE=37817,cE=37818,uE=37819,fE=37820,hE=37821,dE=36492,pE=36494,mE=36495,gE=36283,vE=36284,yE=36285,bE=36286,m6=2200,g6=2201,v6=2202,Jb=2300,_E=2301,iw=2302,Pp=2400,Ip=2401,e_=2402,dT=2500,gO=2501,Bee=0,Vee=1,Gee=2,y6=3200,vO=3201,Hee=3202,jee=3203,md=0,b6=1,Sf="",Ks="srgb",ld="srgb-linear",t_="linear",pi="srgb",Wee=0,Tp=7680,Xee=7681,qee=7682,Yee=7683,$ee=34055,Zee=34056,Kee=5386,Qee=512,Jee=513,ete=514,tte=515,nte=516,ite=517,rte=518,v3=519,_6=512,x6=513,S6=514,yO=515,w6=516,E6=517,T6=518,M6=519,n_=35044,ste=35048,ote=35040,ate=35045,lte=35049,cte=35041,ute=35046,fte=35050,hte=35042,dte="100",y3="300 es",Ma=2e3,S0=2001,pte={COMPUTE:"compute",RENDER:"render"},mte={PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},gte={NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FIRST:"first",EITHER:"either"};let yu=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){const i=this._listeners;return i===void 0?!1:i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){const i=this._listeners;if(i===void 0)return;const r=i[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){const t=this._listeners;if(t===void 0)return;const i=t[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}};const qs=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let rU=1234567;const Gp=Math.PI/180,w0=180/Math.PI;function Ca(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(qs[n&255]+qs[n>>8&255]+qs[n>>16&255]+qs[n>>24&255]+"-"+qs[e&255]+qs[e>>8&255]+"-"+qs[e>>16&15|64]+qs[e>>24&255]+"-"+qs[t&63|128]+qs[t>>8&255]+"-"+qs[t>>16&255]+qs[t>>24&255]+qs[i&255]+qs[i>>8&255]+qs[i>>16&255]+qs[i>>24&255]).toLowerCase()}function Qt(n,e,t){return Math.max(e,Math.min(t,n))}function bO(n,e){return(n%e+e)%e}function vte(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function yte(n,e,t){return n!==e?(t-n)/(e-n):0}function Ob(n,e,t){return(1-t)*n+t*e}function bte(n,e,t,i){return Ob(n,e,1-Math.exp(-t*i))}function _te(n,e=1){return e-Math.abs(bO(n,e*2)-e)}function xte(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function Ste(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function wte(n,e){return n+Math.floor(Math.random()*(e-n+1))}function Ete(n,e){return n+Math.random()*(e-n)}function Tte(n){return n*(.5-Math.random())}function Mte(n){n!==void 0&&(rU=n);let e=rU+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function Ate(n){return n*Gp}function Cte(n){return n*w0}function Rte(n){return(n&n-1)===0&&n!==0}function Dte(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function Ote(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function Lte(n,e,t,i,r){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),u=s((e+i)/2),h=o((e+i)/2),p=s((e-i)/2),m=o((e-i)/2),y=s((i-e)/2),b=o((i-e)/2);switch(r){case"XYX":n.set(a*h,l*p,l*m,a*u);break;case"YZY":n.set(l*m,a*h,l*p,a*u);break;case"ZXZ":n.set(l*p,l*m,a*h,a*u);break;case"XZX":n.set(a*h,l*b,l*y,a*u);break;case"YXY":n.set(l*y,a*h,l*b,a*u);break;case"ZYZ":n.set(l*b,l*y,a*h,a*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function wo(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function _n(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const xE={DEG2RAD:Gp,RAD2DEG:w0,generateUUID:Ca,clamp:Qt,euclideanModulo:bO,mapLinear:vte,inverseLerp:yte,lerp:Ob,damp:bte,pingpong:_te,smoothstep:xte,smootherstep:Ste,randInt:wte,randFloat:Ete,randFloatSpread:Tte,seededRandom:Mte,degToRad:Ate,radToDeg:Cte,isPowerOfTwo:Rte,ceilPowerOfTwo:Dte,floorPowerOfTwo:Ote,setQuaternionFromProperEuler:Lte,normalize:_n,denormalize:wo};class ot{constructor(e=0,t=0){ot.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Qt(this.x,e.x,t.x),this.y=Qt(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=Qt(this.x,e,t),this.y=Qt(this.y,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Qt(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Qt(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Os{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,o,a){let l=i[r+0],u=i[r+1],h=i[r+2],p=i[r+3];const m=s[o+0],y=s[o+1],b=s[o+2],x=s[o+3];if(a===0){e[t+0]=l,e[t+1]=u,e[t+2]=h,e[t+3]=p;return}if(a===1){e[t+0]=m,e[t+1]=y,e[t+2]=b,e[t+3]=x;return}if(p!==x||l!==m||u!==y||h!==b){let S=1-a;const _=l*m+u*y+h*b+p*x,T=_>=0?1:-1,A=1-_*_;if(A>Number.EPSILON){const C=Math.sqrt(A),R=Math.atan2(C,_*T);S=Math.sin(S*R)/C,a=Math.sin(a*R)/C}const M=a*T;if(l=l*S+m*M,u=u*S+y*M,h=h*S+b*M,p=p*S+x*M,S===1-a){const C=1/Math.sqrt(l*l+u*u+h*h+p*p);l*=C,u*=C,h*=C,p*=C}}e[t]=l,e[t+1]=u,e[t+2]=h,e[t+3]=p}static multiplyQuaternionsFlat(e,t,i,r,s,o){const a=i[r],l=i[r+1],u=i[r+2],h=i[r+3],p=s[o],m=s[o+1],y=s[o+2],b=s[o+3];return e[t]=a*b+h*p+l*y-u*m,e[t+1]=l*b+h*m+u*p-a*y,e[t+2]=u*b+h*y+a*m-l*p,e[t+3]=h*b-a*p-l*m-u*y,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,u=a(i/2),h=a(r/2),p=a(s/2),m=l(i/2),y=l(r/2),b=l(s/2);switch(o){case"XYZ":this._x=m*h*p+u*y*b,this._y=u*y*p-m*h*b,this._z=u*h*b+m*y*p,this._w=u*h*p-m*y*b;break;case"YXZ":this._x=m*h*p+u*y*b,this._y=u*y*p-m*h*b,this._z=u*h*b-m*y*p,this._w=u*h*p+m*y*b;break;case"ZXY":this._x=m*h*p-u*y*b,this._y=u*y*p+m*h*b,this._z=u*h*b+m*y*p,this._w=u*h*p-m*y*b;break;case"ZYX":this._x=m*h*p-u*y*b,this._y=u*y*p+m*h*b,this._z=u*h*b-m*y*p,this._w=u*h*p+m*y*b;break;case"YZX":this._x=m*h*p+u*y*b,this._y=u*y*p+m*h*b,this._z=u*h*b-m*y*p,this._w=u*h*p-m*y*b;break;case"XZY":this._x=m*h*p-u*y*b,this._y=u*y*p-m*h*b,this._z=u*h*b+m*y*p,this._w=u*h*p+m*y*b;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],o=t[1],a=t[5],l=t[9],u=t[2],h=t[6],p=t[10],m=i+a+p;if(m>0){const y=.5/Math.sqrt(m+1);this._w=.25/y,this._x=(h-l)*y,this._y=(s-u)*y,this._z=(o-r)*y}else if(i>a&&i>p){const y=2*Math.sqrt(1+i-a-p);this._w=(h-l)/y,this._x=.25*y,this._y=(r+o)/y,this._z=(s+u)/y}else if(a>p){const y=2*Math.sqrt(1+a-i-p);this._w=(s-u)/y,this._x=(r+o)/y,this._y=.25*y,this._z=(l+h)/y}else{const y=2*Math.sqrt(1+p-i-a);this._w=(o-r)/y,this._x=(s+u)/y,this._y=(l+h)/y,this._z=.25*y}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<1e-8?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Qt(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,o=e._w,a=t._x,l=t._y,u=t._z,h=t._w;return this._x=i*h+o*a+r*u-s*l,this._y=r*h+o*l+s*a-i*u,this._z=s*h+o*u+i*l-r*a,this._w=o*h-i*a-r*l-s*u,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+i*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const y=1-t;return this._w=y*o+t*this._w,this._x=y*i+t*this._x,this._y=y*r+t*this._y,this._z=y*s+t*this._z,this.normalize(),this}const u=Math.sqrt(l),h=Math.atan2(u,a),p=Math.sin((1-t)*h)/u,m=Math.sin(t*h)/u;return this._w=o*p+this._w*m,this._x=i*p+this._x*m,this._y=r*p+this._y*m,this._z=s*p+this._z*m,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),s=Math.sqrt(i);return this.set(r*Math.sin(e),r*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class ae{constructor(e=0,t=0,i=0){ae.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(sU.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(sU.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z,l=e.w,u=2*(o*r-a*i),h=2*(a*t-s*r),p=2*(s*i-o*t);return this.x=t+l*u+o*p-a*h,this.y=i+l*h+a*u-s*p,this.z=r+l*p+s*h-o*u,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Qt(this.x,e.x,t.x),this.y=Qt(this.y,e.y,t.y),this.z=Qt(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=Qt(this.x,e,t),this.y=Qt(this.y,e,t),this.z=Qt(this.z,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Qt(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=r*l-s*a,this.y=s*o-i*l,this.z=i*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return DA.copy(this).projectOnVector(e),this.sub(DA)}reflect(e){return this.sub(DA.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Qt(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const DA=new ae,sU=new Os;class cn{constructor(e,t,i,r,s,o,a,l,u){cn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,o,a,l,u)}set(e,t,i,r,s,o,a,l,u){const h=this.elements;return h[0]=e,h[1]=r,h[2]=a,h[3]=t,h[4]=s,h[5]=l,h[6]=i,h[7]=o,h[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[3],l=i[6],u=i[1],h=i[4],p=i[7],m=i[2],y=i[5],b=i[8],x=r[0],S=r[3],_=r[6],T=r[1],A=r[4],M=r[7],C=r[2],R=r[5],L=r[8];return s[0]=o*x+a*T+l*C,s[3]=o*S+a*A+l*R,s[6]=o*_+a*M+l*L,s[1]=u*x+h*T+p*C,s[4]=u*S+h*A+p*R,s[7]=u*_+h*M+p*L,s[2]=m*x+y*T+b*C,s[5]=m*S+y*A+b*R,s[8]=m*_+y*M+b*L,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],h=e[8];return t*o*h-t*a*u-i*s*h+i*a*l+r*s*u-r*o*l}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],h=e[8],p=h*o-a*u,m=a*l-h*s,y=u*s-o*l,b=t*p+i*m+r*y;if(b===0)return this.set(0,0,0,0,0,0,0,0,0);const x=1/b;return e[0]=p*x,e[1]=(r*u-h*i)*x,e[2]=(a*i-r*o)*x,e[3]=m*x,e[4]=(h*t-r*l)*x,e[5]=(r*s-a*t)*x,e[6]=y*x,e[7]=(i*l-u*t)*x,e[8]=(o*t-i*s)*x,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,o,a){const l=Math.cos(s),u=Math.sin(s);return this.set(i*l,i*u,-i*(l*o+u*a)+o+e,-r*u,r*l,-r*(-u*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(OA.makeScale(e,t)),this}rotate(e){return this.premultiply(OA.makeRotation(-e)),this}translate(e,t){return this.premultiply(OA.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const OA=new cn;function A6(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const Pte={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function e0(n,e){return new Pte[n](e)}function i_(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function C6(){const n=i_("canvas");return n.style.display="block",n}const oU={};function r_(n){n in oU||(oU[n]=!0,console.warn(n))}function Ite(n,e,t){return new Promise(function(i,r){function s(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:r();break;case n.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:i()}}setTimeout(s,t)})}const aU=new cn().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),lU=new cn().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function Nte(){const n={enabled:!0,workingColorSpace:ld,spaces:{},convert:function(r,s,o){return this.enabled===!1||s===o||!s||!o||(this.spaces[s].transfer===pi&&(r.r=Of(r.r),r.g=Of(r.g),r.b=Of(r.b)),this.spaces[s].primaries!==this.spaces[o].primaries&&(r.applyMatrix3(this.spaces[s].toXYZ),r.applyMatrix3(this.spaces[o].fromXYZ)),this.spaces[o].transfer===pi&&(r.r=c0(r.r),r.g=c0(r.g),r.b=c0(r.b))),r},workingToColorSpace:function(r,s){return this.convert(r,this.workingColorSpace,s)},colorSpaceToWorking:function(r,s){return this.convert(r,s,this.workingColorSpace)},getPrimaries:function(r){return this.spaces[r].primaries},getTransfer:function(r){return r===Sf?t_:this.spaces[r].transfer},getToneMappingMode:function(r){return this.spaces[r].outputColorSpaceConfig.toneMappingMode||"standard"},getLuminanceCoefficients:function(r,s=this.workingColorSpace){return r.fromArray(this.spaces[s].luminanceCoefficients)},define:function(r){Object.assign(this.spaces,r)},_getMatrix:function(r,s,o){return r.copy(this.spaces[s].toXYZ).multiply(this.spaces[o].fromXYZ)},_getDrawingBufferColorSpace:function(r){return this.spaces[r].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(r=this.workingColorSpace){return this.spaces[r].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(r,s){return r_("THREE.ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),n.workingToColorSpace(r,s)},toWorkingColorSpace:function(r,s){return r_("THREE.ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),n.colorSpaceToWorking(r,s)}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],i=[.3127,.329];return n.define({[ld]:{primaries:e,whitePoint:i,transfer:t_,toXYZ:aU,fromXYZ:lU,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:Ks},outputColorSpaceConfig:{drawingBufferColorSpace:Ks}},[Ks]:{primaries:e,whitePoint:i,transfer:pi,toXYZ:aU,fromXYZ:lU,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:Ks}}}),n}const Wn=Nte();function Of(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function c0(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let hg;class R6{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let i;if(e instanceof HTMLCanvasElement)i=e;else{hg===void 0&&(hg=i_("canvas")),hg.width=e.width,hg.height=e.height;const r=hg.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),i=hg}return i.toDataURL(t)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=i_("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=Of(s[o]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(Of(t[i]/255)*255):t[i]=Of(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let Ute=0;class Qh{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Ute++}),this.uuid=Ca(),this.data=e,this.dataReady=!0,this.version=0}getSize(e){const t=this.data;return typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement?e.set(t.videoWidth,t.videoHeight,0):t instanceof VideoFrame?e.set(t.displayHeight,t.displayWidth,0):t!==null?e.set(t.width,t.height,t.depth||0):e.set(0,0,0),e}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)r[o].isDataTexture?s.push(LA(r[o].image)):s.push(LA(r[o]))}else s=LA(r);i.url=s}return t||(e.images[this.uuid]=i),i}}function LA(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?R6.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let kte=0;const PA=new ae;class ur extends yu{constructor(e=ur.DEFAULT_IMAGE,t=ur.DEFAULT_MAPPING,i=vl,r=vl,s=br,o=ou,a=eo,l=wl,u=ur.DEFAULT_ANISOTROPY,h=Sf){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:kte++}),this.uuid=Ca(),this.name="",this.source=new Qh(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=o,this.anisotropy=u,this.format=a,this.internalFormat=null,this.type=l,this.offset=new ot(0,0),this.repeat=new ot(1,1),this.center=new ot(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new cn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=h,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(e&&e.depth&&e.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(PA).x}get height(){return this.source.getSize(PA).y}get depth(){return this.source.getSize(PA).z}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isArrayTexture=e.isArrayTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}setValues(e){for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Texture.setValues(): parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Texture.setValues(): property '${t}' does not exist.`);continue}r&&i&&r.isVector2&&i.isVector2||r&&i&&r.isVector3&&i.isVector3||r&&i&&r.isMatrix3&&i.isMatrix3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==oT)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Kb:e.x=e.x-Math.floor(e.x);break;case vl:e.x=e.x<0?0:1;break;case Qb:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Kb:e.y=e.y-Math.floor(e.y);break;case vl:e.y=e.y<0?0:1;break;case Qb:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}ur.DEFAULT_IMAGE=null;ur.DEFAULT_MAPPING=oT;ur.DEFAULT_ANISOTROPY=1;class Vn{constructor(e=0,t=0,i=0,r=1){Vn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*i+o[11]*r+o[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const l=e.elements,u=l[0],h=l[4],p=l[8],m=l[1],y=l[5],b=l[9],x=l[2],S=l[6],_=l[10];if(Math.abs(h-m)<.01&&Math.abs(p-x)<.01&&Math.abs(b-S)<.01){if(Math.abs(h+m)<.1&&Math.abs(p+x)<.1&&Math.abs(b+S)<.1&&Math.abs(u+y+_-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const A=(u+1)/2,M=(y+1)/2,C=(_+1)/2,R=(h+m)/4,L=(p+x)/4,I=(b+S)/4;return A>M&&A>C?A<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(A),r=R/i,s=L/i):M>C?M<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(M),i=R/r,s=I/r):C<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(C),i=L/s,r=I/s),this.set(i,r,s,t),this}let T=Math.sqrt((S-b)*(S-b)+(p-x)*(p-x)+(m-h)*(m-h));return Math.abs(T)<.001&&(T=1),this.x=(S-b)/T,this.y=(p-x)/T,this.z=(m-h)/T,this.w=Math.acos((u+y+_-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Qt(this.x,e.x,t.x),this.y=Qt(this.y,e.y,t.y),this.z=Qt(this.z,e.z,t.z),this.w=Qt(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=Qt(this.x,e,t),this.y=Qt(this.y,e,t),this.z=Qt(this.z,e,t),this.w=Qt(this.w,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Qt(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class _O extends yu{constructor(e=1,t=1,i={}){super(),i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:br,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},i),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=i.depth,this.scissor=new Vn(0,0,e,t),this.scissorTest=!1,this.viewport=new Vn(0,0,e,t);const r={width:e,height:t,depth:i.depth},s=new ur(r);this.textures=[];const o=i.count;for(let a=0;a<o;a++)this.textures[a]=s.clone(),this.textures[a].isRenderTargetTexture=!0,this.textures[a].renderTarget=this;this._setTextureOptions(i),this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=i.depthTexture,this.samples=i.samples,this.multiview=i.multiview}_setTextureOptions(e={}){const t={minFilter:br,generateMipmaps:!1,flipY:!1,internalFormat:null};e.mapping!==void 0&&(t.mapping=e.mapping),e.wrapS!==void 0&&(t.wrapS=e.wrapS),e.wrapT!==void 0&&(t.wrapT=e.wrapT),e.wrapR!==void 0&&(t.wrapR=e.wrapR),e.magFilter!==void 0&&(t.magFilter=e.magFilter),e.minFilter!==void 0&&(t.minFilter=e.minFilter),e.format!==void 0&&(t.format=e.format),e.type!==void 0&&(t.type=e.type),e.anisotropy!==void 0&&(t.anisotropy=e.anisotropy),e.colorSpace!==void 0&&(t.colorSpace=e.colorSpace),e.flipY!==void 0&&(t.flipY=e.flipY),e.generateMipmaps!==void 0&&(t.generateMipmaps=e.generateMipmaps),e.internalFormat!==void 0&&(t.internalFormat=e.internalFormat);for(let i=0;i<this.textures.length;i++)this.textures[i].setValues(t)}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,s=this.textures.length;r<s;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=i,this.textures[r].isArrayTexture=this.textures[r].image.depth>1;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,i=e.textures.length;t<i;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const r=Object.assign({},e.textures[t].image);this.textures[t].source=new Qh(r)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class gu extends _O{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class pT extends ur{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Ds,this.minFilter=Ds,this.wrapR=vl,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class zte extends gu{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new pT(null,e,t,i),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}}class mT extends ur{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Ds,this.minFilter=Ds,this.wrapR=vl,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Fte extends gu{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new mT(null,e,t,i),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}}class Vr{constructor(e=new ae(1/0,1/0,1/0),t=new ae(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(Xl.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(Xl.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=Xl.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const s=i.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=s.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,Xl):Xl.fromBufferAttribute(s,o),Xl.applyMatrix4(e.matrixWorld),this.expandByPoint(Xl);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),k1.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),k1.copy(i.boundingBox)),k1.applyMatrix4(e.matrixWorld),this.union(k1)}const r=e.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Xl),Xl.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Ay),z1.subVectors(this.max,Ay),dg.subVectors(e.a,Ay),pg.subVectors(e.b,Ay),mg.subVectors(e.c,Ay),Nh.subVectors(pg,dg),Uh.subVectors(mg,pg),np.subVectors(dg,mg);let t=[0,-Nh.z,Nh.y,0,-Uh.z,Uh.y,0,-np.z,np.y,Nh.z,0,-Nh.x,Uh.z,0,-Uh.x,np.z,0,-np.x,-Nh.y,Nh.x,0,-Uh.y,Uh.x,0,-np.y,np.x,0];return!IA(t,dg,pg,mg,z1)||(t=[1,0,0,0,1,0,0,0,1],!IA(t,dg,pg,mg,z1))?!1:(F1.crossVectors(Nh,Uh),t=[F1.x,F1.y,F1.z],IA(t,dg,pg,mg,z1))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Xl).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Xl).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(of[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),of[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),of[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),of[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),of[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),of[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),of[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),of[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(of),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}}const of=[new ae,new ae,new ae,new ae,new ae,new ae,new ae,new ae],Xl=new ae,k1=new Vr,dg=new ae,pg=new ae,mg=new ae,Nh=new ae,Uh=new ae,np=new ae,Ay=new ae,z1=new ae,F1=new ae,ip=new ae;function IA(n,e,t,i,r){for(let s=0,o=n.length-3;s<=o;s+=3){ip.fromArray(n,s);const a=r.x*Math.abs(ip.x)+r.y*Math.abs(ip.y)+r.z*Math.abs(ip.z),l=e.dot(ip),u=t.dot(ip),h=i.dot(ip);if(Math.max(-Math.max(l,u,h),Math.min(l,u,h))>a)return!1}return!0}const Bte=new Vr,Cy=new ae,NA=new ae;let ts=class{constructor(e=new ae,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):Bte.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Cy.subVectors(e,this.center);const t=Cy.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(Cy,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(NA.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Cy.copy(e.center).add(NA)),this.expandByPoint(Cy.copy(e.center).sub(NA))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(e){return this.radius=e.radius,this.center.fromArray(e.center),this}};const af=new ae,UA=new ae,B1=new ae,kh=new ae,kA=new ae,V1=new ae,zA=new ae;class q0{constructor(e=new ae,t=new ae(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,af)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=af.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(af.copy(this.origin).addScaledVector(this.direction,t),af.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){UA.copy(e).add(t).multiplyScalar(.5),B1.copy(t).sub(e).normalize(),kh.copy(this.origin).sub(UA);const s=e.distanceTo(t)*.5,o=-this.direction.dot(B1),a=kh.dot(this.direction),l=-kh.dot(B1),u=kh.lengthSq(),h=Math.abs(1-o*o);let p,m,y,b;if(h>0)if(p=o*l-a,m=o*a-l,b=s*h,p>=0)if(m>=-b)if(m<=b){const x=1/h;p*=x,m*=x,y=p*(p+o*m+2*a)+m*(o*p+m+2*l)+u}else m=s,p=Math.max(0,-(o*m+a)),y=-p*p+m*(m+2*l)+u;else m=-s,p=Math.max(0,-(o*m+a)),y=-p*p+m*(m+2*l)+u;else m<=-b?(p=Math.max(0,-(-o*s+a)),m=p>0?-s:Math.min(Math.max(-s,-l),s),y=-p*p+m*(m+2*l)+u):m<=b?(p=0,m=Math.min(Math.max(-s,-l),s),y=m*(m+2*l)+u):(p=Math.max(0,-(o*s+a)),m=p>0?s:Math.min(Math.max(-s,-l),s),y=-p*p+m*(m+2*l)+u);else m=o>0?-s:s,p=Math.max(0,-(o*m+a)),y=-p*p+m*(m+2*l)+u;return i&&i.copy(this.origin).addScaledVector(this.direction,p),r&&r.copy(UA).addScaledVector(B1,m),y}intersectSphere(e,t){af.subVectors(e.center,this.origin);const i=af.dot(this.direction),r=af.dot(af)-i*i,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=i-o,l=i+o;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return e.radius<0?!1:this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,o,a,l;const u=1/this.direction.x,h=1/this.direction.y,p=1/this.direction.z,m=this.origin;return u>=0?(i=(e.min.x-m.x)*u,r=(e.max.x-m.x)*u):(i=(e.max.x-m.x)*u,r=(e.min.x-m.x)*u),h>=0?(s=(e.min.y-m.y)*h,o=(e.max.y-m.y)*h):(s=(e.max.y-m.y)*h,o=(e.min.y-m.y)*h),i>o||s>r||((s>i||isNaN(i))&&(i=s),(o<r||isNaN(r))&&(r=o),p>=0?(a=(e.min.z-m.z)*p,l=(e.max.z-m.z)*p):(a=(e.max.z-m.z)*p,l=(e.min.z-m.z)*p),i>l||a>r)||((a>i||i!==i)&&(i=a),(l<r||r!==r)&&(r=l),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,af)!==null}intersectTriangle(e,t,i,r,s){kA.subVectors(t,e),V1.subVectors(i,e),zA.crossVectors(kA,V1);let o=this.direction.dot(zA),a;if(o>0){if(r)return null;a=1}else if(o<0)a=-1,o=-o;else return null;kh.subVectors(this.origin,e);const l=a*this.direction.dot(V1.crossVectors(kh,V1));if(l<0)return null;const u=a*this.direction.dot(kA.cross(kh));if(u<0||l+u>o)return null;const h=-a*kh.dot(zA);return h<0?null:this.at(h/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Kt{constructor(e,t,i,r,s,o,a,l,u,h,p,m,y,b,x,S){Kt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,o,a,l,u,h,p,m,y,b,x,S)}set(e,t,i,r,s,o,a,l,u,h,p,m,y,b,x,S){const _=this.elements;return _[0]=e,_[4]=t,_[8]=i,_[12]=r,_[1]=s,_[5]=o,_[9]=a,_[13]=l,_[2]=u,_[6]=h,_[10]=p,_[14]=m,_[3]=y,_[7]=b,_[11]=x,_[15]=S,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Kt().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/gg.setFromMatrixColumn(e,0).length(),s=1/gg.setFromMatrixColumn(e,1).length(),o=1/gg.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),a=Math.sin(i),l=Math.cos(r),u=Math.sin(r),h=Math.cos(s),p=Math.sin(s);if(e.order==="XYZ"){const m=o*h,y=o*p,b=a*h,x=a*p;t[0]=l*h,t[4]=-l*p,t[8]=u,t[1]=y+b*u,t[5]=m-x*u,t[9]=-a*l,t[2]=x-m*u,t[6]=b+y*u,t[10]=o*l}else if(e.order==="YXZ"){const m=l*h,y=l*p,b=u*h,x=u*p;t[0]=m+x*a,t[4]=b*a-y,t[8]=o*u,t[1]=o*p,t[5]=o*h,t[9]=-a,t[2]=y*a-b,t[6]=x+m*a,t[10]=o*l}else if(e.order==="ZXY"){const m=l*h,y=l*p,b=u*h,x=u*p;t[0]=m-x*a,t[4]=-o*p,t[8]=b+y*a,t[1]=y+b*a,t[5]=o*h,t[9]=x-m*a,t[2]=-o*u,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const m=o*h,y=o*p,b=a*h,x=a*p;t[0]=l*h,t[4]=b*u-y,t[8]=m*u+x,t[1]=l*p,t[5]=x*u+m,t[9]=y*u-b,t[2]=-u,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const m=o*l,y=o*u,b=a*l,x=a*u;t[0]=l*h,t[4]=x-m*p,t[8]=b*p+y,t[1]=p,t[5]=o*h,t[9]=-a*h,t[2]=-u*h,t[6]=y*p+b,t[10]=m-x*p}else if(e.order==="XZY"){const m=o*l,y=o*u,b=a*l,x=a*u;t[0]=l*h,t[4]=-p,t[8]=u*h,t[1]=m*p+x,t[5]=o*h,t[9]=y*p-b,t[2]=b*p-y,t[6]=a*h,t[10]=x*p+m}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Vte,e,Gte)}lookAt(e,t,i){const r=this.elements;return xa.subVectors(e,t),xa.lengthSq()===0&&(xa.z=1),xa.normalize(),zh.crossVectors(i,xa),zh.lengthSq()===0&&(Math.abs(i.z)===1?xa.x+=1e-4:xa.z+=1e-4,xa.normalize(),zh.crossVectors(i,xa)),zh.normalize(),G1.crossVectors(xa,zh),r[0]=zh.x,r[4]=G1.x,r[8]=xa.x,r[1]=zh.y,r[5]=G1.y,r[9]=xa.y,r[2]=zh.z,r[6]=G1.z,r[10]=xa.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[4],l=i[8],u=i[12],h=i[1],p=i[5],m=i[9],y=i[13],b=i[2],x=i[6],S=i[10],_=i[14],T=i[3],A=i[7],M=i[11],C=i[15],R=r[0],L=r[4],I=r[8],P=r[12],U=r[1],B=r[5],F=r[9],z=r[13],W=r[2],X=r[6],j=r[10],G=r[14],K=r[3],J=r[7],ee=r[11],V=r[15];return s[0]=o*R+a*U+l*W+u*K,s[4]=o*L+a*B+l*X+u*J,s[8]=o*I+a*F+l*j+u*ee,s[12]=o*P+a*z+l*G+u*V,s[1]=h*R+p*U+m*W+y*K,s[5]=h*L+p*B+m*X+y*J,s[9]=h*I+p*F+m*j+y*ee,s[13]=h*P+p*z+m*G+y*V,s[2]=b*R+x*U+S*W+_*K,s[6]=b*L+x*B+S*X+_*J,s[10]=b*I+x*F+S*j+_*ee,s[14]=b*P+x*z+S*G+_*V,s[3]=T*R+A*U+M*W+C*K,s[7]=T*L+A*B+M*X+C*J,s[11]=T*I+A*F+M*j+C*ee,s[15]=T*P+A*z+M*G+C*V,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],o=e[1],a=e[5],l=e[9],u=e[13],h=e[2],p=e[6],m=e[10],y=e[14],b=e[3],x=e[7],S=e[11],_=e[15];return b*(+s*l*p-r*u*p-s*a*m+i*u*m+r*a*y-i*l*y)+x*(+t*l*y-t*u*m+s*o*m-r*o*y+r*u*h-s*l*h)+S*(+t*u*p-t*a*y-s*o*p+i*o*y+s*a*h-i*u*h)+_*(-r*a*h-t*l*p+t*a*m+r*o*p-i*o*m+i*l*h)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],h=e[8],p=e[9],m=e[10],y=e[11],b=e[12],x=e[13],S=e[14],_=e[15],T=p*S*u-x*m*u+x*l*y-a*S*y-p*l*_+a*m*_,A=b*m*u-h*S*u-b*l*y+o*S*y+h*l*_-o*m*_,M=h*x*u-b*p*u+b*a*y-o*x*y-h*a*_+o*p*_,C=b*p*l-h*x*l-b*a*m+o*x*m+h*a*S-o*p*S,R=t*T+i*A+r*M+s*C;if(R===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const L=1/R;return e[0]=T*L,e[1]=(x*m*s-p*S*s-x*r*y+i*S*y+p*r*_-i*m*_)*L,e[2]=(a*S*s-x*l*s+x*r*u-i*S*u-a*r*_+i*l*_)*L,e[3]=(p*l*s-a*m*s-p*r*u+i*m*u+a*r*y-i*l*y)*L,e[4]=A*L,e[5]=(h*S*s-b*m*s+b*r*y-t*S*y-h*r*_+t*m*_)*L,e[6]=(b*l*s-o*S*s-b*r*u+t*S*u+o*r*_-t*l*_)*L,e[7]=(o*m*s-h*l*s+h*r*u-t*m*u-o*r*y+t*l*y)*L,e[8]=M*L,e[9]=(b*p*s-h*x*s-b*i*y+t*x*y+h*i*_-t*p*_)*L,e[10]=(o*x*s-b*a*s+b*i*u-t*x*u-o*i*_+t*a*_)*L,e[11]=(h*a*s-o*p*s-h*i*u+t*p*u+o*i*y-t*a*y)*L,e[12]=C*L,e[13]=(h*x*r-b*p*r+b*i*m-t*x*m-h*i*S+t*p*S)*L,e[14]=(b*a*r-o*x*r-b*i*l+t*x*l+o*i*S-t*a*S)*L,e[15]=(o*p*r-h*a*r+h*i*l-t*p*l-o*i*m+t*a*m)*L,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,o=e.x,a=e.y,l=e.z,u=s*o,h=s*a;return this.set(u*o+i,u*a-r*l,u*l+r*a,0,u*a+r*l,h*a+i,h*l-r*o,0,u*l-r*a,h*l+r*o,s*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,u=s+s,h=o+o,p=a+a,m=s*u,y=s*h,b=s*p,x=o*h,S=o*p,_=a*p,T=l*u,A=l*h,M=l*p,C=i.x,R=i.y,L=i.z;return r[0]=(1-(x+_))*C,r[1]=(y+M)*C,r[2]=(b-A)*C,r[3]=0,r[4]=(y-M)*R,r[5]=(1-(m+_))*R,r[6]=(S+T)*R,r[7]=0,r[8]=(b+A)*L,r[9]=(S-T)*L,r[10]=(1-(m+x))*L,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=gg.set(r[0],r[1],r[2]).length();const o=gg.set(r[4],r[5],r[6]).length(),a=gg.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],ql.copy(this);const u=1/s,h=1/o,p=1/a;return ql.elements[0]*=u,ql.elements[1]*=u,ql.elements[2]*=u,ql.elements[4]*=h,ql.elements[5]*=h,ql.elements[6]*=h,ql.elements[8]*=p,ql.elements[9]*=p,ql.elements[10]*=p,t.setFromRotationMatrix(ql),i.x=s,i.y=o,i.z=a,this}makePerspective(e,t,i,r,s,o,a=Ma,l=!1){const u=this.elements,h=2*s/(t-e),p=2*s/(i-r),m=(t+e)/(t-e),y=(i+r)/(i-r);let b,x;if(l)b=s/(o-s),x=o*s/(o-s);else if(a===Ma)b=-(o+s)/(o-s),x=-2*o*s/(o-s);else if(a===S0)b=-o/(o-s),x=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return u[0]=h,u[4]=0,u[8]=m,u[12]=0,u[1]=0,u[5]=p,u[9]=y,u[13]=0,u[2]=0,u[6]=0,u[10]=b,u[14]=x,u[3]=0,u[7]=0,u[11]=-1,u[15]=0,this}makeOrthographic(e,t,i,r,s,o,a=Ma,l=!1){const u=this.elements,h=2/(t-e),p=2/(i-r),m=-(t+e)/(t-e),y=-(i+r)/(i-r);let b,x;if(l)b=1/(o-s),x=o/(o-s);else if(a===Ma)b=-2/(o-s),x=-(o+s)/(o-s);else if(a===S0)b=-1/(o-s),x=-s/(o-s);else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return u[0]=h,u[4]=0,u[8]=0,u[12]=m,u[1]=0,u[5]=p,u[9]=0,u[13]=y,u[2]=0,u[6]=0,u[10]=b,u[14]=x,u[3]=0,u[7]=0,u[11]=0,u[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const gg=new ae,ql=new Kt,Vte=new ae(0,0,0),Gte=new ae(1,1,1),zh=new ae,G1=new ae,xa=new ae,cU=new Kt,uU=new Os;class Ro{constructor(e=0,t=0,i=0,r=Ro.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,s=r[0],o=r[4],a=r[8],l=r[1],u=r[5],h=r[9],p=r[2],m=r[6],y=r[10];switch(t){case"XYZ":this._y=Math.asin(Qt(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-h,y),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(m,u),this._z=0);break;case"YXZ":this._x=Math.asin(-Qt(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(a,y),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-p,s),this._z=0);break;case"ZXY":this._x=Math.asin(Qt(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(-p,y),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-Qt(p,-1,1)),Math.abs(p)<.9999999?(this._x=Math.atan2(m,y),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,u));break;case"YZX":this._z=Math.asin(Qt(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-h,u),this._y=Math.atan2(-p,s)):(this._x=0,this._y=Math.atan2(a,y));break;case"XZY":this._z=Math.asin(-Qt(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(m,u),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-h,y),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return cU.makeRotationFromQuaternion(e),this.setFromRotationMatrix(cU,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return uU.setFromEuler(this),this.setFromQuaternion(uU,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Ro.DEFAULT_ORDER="XYZ";class E0{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let Hte=0;const fU=new ae,vg=new Os,lf=new Kt,H1=new ae,Ry=new ae,jte=new ae,Wte=new Os,hU=new ae(1,0,0),dU=new ae(0,1,0),pU=new ae(0,0,1),mU={type:"added"},Xte={type:"removed"},yg={type:"childadded",child:null},FA={type:"childremoved",child:null};class Qn extends yu{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Hte++}),this.uuid=Ca(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Qn.DEFAULT_UP.clone();const e=new ae,t=new Ro,i=new Os,r=new ae(1,1,1);function s(){i.setFromEuler(t,!1)}function o(){t.setFromQuaternion(i,void 0,!1)}t._onChange(s),i._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Kt},normalMatrix:{value:new cn}}),this.matrix=new Kt,this.matrixWorld=new Kt,this.matrixAutoUpdate=Qn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Qn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new E0,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return vg.setFromAxisAngle(e,t),this.quaternion.multiply(vg),this}rotateOnWorldAxis(e,t){return vg.setFromAxisAngle(e,t),this.quaternion.premultiply(vg),this}rotateX(e){return this.rotateOnAxis(hU,e)}rotateY(e){return this.rotateOnAxis(dU,e)}rotateZ(e){return this.rotateOnAxis(pU,e)}translateOnAxis(e,t){return fU.copy(e).applyQuaternion(this.quaternion),this.position.add(fU.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(hU,e)}translateY(e){return this.translateOnAxis(dU,e)}translateZ(e){return this.translateOnAxis(pU,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(lf.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?H1.copy(e):H1.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),Ry.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?lf.lookAt(Ry,H1,this.up):lf.lookAt(H1,Ry,this.up),this.quaternion.setFromRotationMatrix(lf),r&&(lf.extractRotation(r.matrixWorld),vg.setFromRotationMatrix(lf),this.quaternion.premultiply(vg.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(mU),yg.child=e,this.dispatchEvent(yg),yg.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(Xte),FA.child=e,this.dispatchEvent(FA),FA.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),lf.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),lf.multiply(e.parent.matrixWorld)),e.applyMatrix4(lf),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(mU),yg.child=e,this.dispatchEvent(yg),yg.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const o=this.children[i].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,i=[]){this[e]===t&&i.push(this);const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].getObjectsByProperty(e,t,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ry,e,jte),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ry,Wte,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].updateMatrixWorld(e)}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.geometryInfo=this._geometryInfo.map(a=>({...a,boundingBox:a.boundingBox?a.boundingBox.toJSON():void 0,boundingSphere:a.boundingSphere?a.boundingSphere.toJSON():void 0})),r.instanceInfo=this._instanceInfo.map(a=>({...a})),r.availableInstanceIds=this._availableInstanceIds.slice(),r.availableGeometryIds=this._availableGeometryIds.slice(),r.nextIndexStart=this._nextIndexStart,r.nextVertexStart=this._nextVertexStart,r.geometryCount=this._geometryCount,r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.matricesTexture=this._matricesTexture.toJSON(e),r.indirectTexture=this._indirectTexture.toJSON(e),this._colorsTexture!==null&&(r.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(r.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(r.boundingBox=this.boundingBox.toJSON()));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let u=0,h=l.length;u<h;u++){const p=l[u];s(e.shapes,p)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,u=this.material.length;l<u;l++)a.push(s(e.materials,this.material[l]));r.material=a}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];r.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),u=o(e.textures),h=o(e.images),p=o(e.shapes),m=o(e.skeletons),y=o(e.animations),b=o(e.nodes);a.length>0&&(i.geometries=a),l.length>0&&(i.materials=l),u.length>0&&(i.textures=u),h.length>0&&(i.images=h),p.length>0&&(i.shapes=p),m.length>0&&(i.skeletons=m),y.length>0&&(i.animations=y),b.length>0&&(i.nodes=b)}return i.object=r,i;function o(a){const l=[];for(const u in a){const h=a[u];delete h.metadata,l.push(h)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}Qn.DEFAULT_UP=new ae(0,1,0);Qn.DEFAULT_MATRIX_AUTO_UPDATE=!0;Qn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Yl=new ae,cf=new ae,BA=new ae,uf=new ae,bg=new ae,_g=new ae,gU=new ae,VA=new ae,GA=new ae,HA=new ae,jA=new Vn,WA=new Vn,XA=new Vn;class sa{constructor(e=new ae,t=new ae,i=new ae){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),Yl.subVectors(e,t),r.cross(Yl);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){Yl.subVectors(r,t),cf.subVectors(i,t),BA.subVectors(e,t);const o=Yl.dot(Yl),a=Yl.dot(cf),l=Yl.dot(BA),u=cf.dot(cf),h=cf.dot(BA),p=o*u-a*a;if(p===0)return s.set(0,0,0),null;const m=1/p,y=(u*l-a*h)*m,b=(o*h-a*l)*m;return s.set(1-y-b,b,y)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,uf)===null?!1:uf.x>=0&&uf.y>=0&&uf.x+uf.y<=1}static getInterpolation(e,t,i,r,s,o,a,l){return this.getBarycoord(e,t,i,r,uf)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,uf.x),l.addScaledVector(o,uf.y),l.addScaledVector(a,uf.z),l)}static getInterpolatedAttribute(e,t,i,r,s,o){return jA.setScalar(0),WA.setScalar(0),XA.setScalar(0),jA.fromBufferAttribute(e,t),WA.fromBufferAttribute(e,i),XA.fromBufferAttribute(e,r),o.setScalar(0),o.addScaledVector(jA,s.x),o.addScaledVector(WA,s.y),o.addScaledVector(XA,s.z),o}static isFrontFacing(e,t,i,r){return Yl.subVectors(i,t),cf.subVectors(e,t),Yl.cross(cf).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Yl.subVectors(this.c,this.b),cf.subVectors(this.a,this.b),Yl.cross(cf).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return sa.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return sa.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,r,s){return sa.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return sa.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return sa.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let o,a;bg.subVectors(r,i),_g.subVectors(s,i),VA.subVectors(e,i);const l=bg.dot(VA),u=_g.dot(VA);if(l<=0&&u<=0)return t.copy(i);GA.subVectors(e,r);const h=bg.dot(GA),p=_g.dot(GA);if(h>=0&&p<=h)return t.copy(r);const m=l*p-h*u;if(m<=0&&l>=0&&h<=0)return o=l/(l-h),t.copy(i).addScaledVector(bg,o);HA.subVectors(e,s);const y=bg.dot(HA),b=_g.dot(HA);if(b>=0&&y<=b)return t.copy(s);const x=y*u-l*b;if(x<=0&&u>=0&&b<=0)return a=u/(u-b),t.copy(i).addScaledVector(_g,a);const S=h*b-y*p;if(S<=0&&p-h>=0&&y-b>=0)return gU.subVectors(s,r),a=(p-h)/(p-h+(y-b)),t.copy(r).addScaledVector(gU,a);const _=1/(S+x+m);return o=x*_,a=m*_,t.copy(i).addScaledVector(bg,o).addScaledVector(_g,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const D6={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Fh={h:0,s:0,l:0},j1={h:0,s:0,l:0};function qA(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}let vt=class{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Ks){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Wn.colorSpaceToWorking(this,t),this}setRGB(e,t,i,r=Wn.workingColorSpace){return this.r=e,this.g=t,this.b=i,Wn.colorSpaceToWorking(this,r),this}setHSL(e,t,i,r=Wn.workingColorSpace){if(e=bO(e,1),t=Qt(t,0,1),i=Qt(i,0,1),t===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+t):i+t-i*t,o=2*i-s;this.r=qA(o,s,e+1/3),this.g=qA(o,s,e),this.b=qA(o,s,e-1/3)}return Wn.colorSpaceToWorking(this,r),this}setStyle(e,t=Ks){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=r[1],a=r[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Ks){const i=D6[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Of(e.r),this.g=Of(e.g),this.b=Of(e.b),this}copyLinearToSRGB(e){return this.r=c0(e.r),this.g=c0(e.g),this.b=c0(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Ks){return Wn.workingToColorSpace(Ys.copy(this),e),Math.round(Qt(Ys.r*255,0,255))*65536+Math.round(Qt(Ys.g*255,0,255))*256+Math.round(Qt(Ys.b*255,0,255))}getHexString(e=Ks){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Wn.workingColorSpace){Wn.workingToColorSpace(Ys.copy(this),t);const i=Ys.r,r=Ys.g,s=Ys.b,o=Math.max(i,r,s),a=Math.min(i,r,s);let l,u;const h=(a+o)/2;if(a===o)l=0,u=0;else{const p=o-a;switch(u=h<=.5?p/(o+a):p/(2-o-a),o){case i:l=(r-s)/p+(r<s?6:0);break;case r:l=(s-i)/p+2;break;case s:l=(i-r)/p+4;break}l/=6}return e.h=l,e.s=u,e.l=h,e}getRGB(e,t=Wn.workingColorSpace){return Wn.workingToColorSpace(Ys.copy(this),t),e.r=Ys.r,e.g=Ys.g,e.b=Ys.b,e}getStyle(e=Ks){Wn.workingToColorSpace(Ys.copy(this),e);const t=Ys.r,i=Ys.g,r=Ys.b;return e!==Ks?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,t,i){return this.getHSL(Fh),this.setHSL(Fh.h+e,Fh.s+t,Fh.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(Fh),e.getHSL(j1);const i=Ob(Fh.h,j1.h,t),r=Ob(Fh.s,j1.s,t),s=Ob(Fh.l,j1.l,t);return this.setHSL(i,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*i+s[6]*r,this.g=s[1]*t+s[4]*i+s[7]*r,this.b=s[2]*t+s[5]*i+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const Ys=new vt;vt.NAMES=D6;let qte=0;class to extends yu{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:qte++}),this.uuid=Ca(),this.name="",this.type="Material",this.blending=Vp,this.side=kf,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=kw,this.blendDst=zw,this.blendEquation=Zh,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new vt(0,0,0),this.blendAlpha=0,this.depthFunc=Zp,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=v3,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Tp,this.stencilZFail=Tp,this.stencilZPass=Tp,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.sheenColorMap&&this.sheenColorMap.isTexture&&(i.sheenColorMap=this.sheenColorMap.toJSON(e).uuid),this.sheenRoughnessMap&&this.sheenRoughnessMap.isTexture&&(i.sheenRoughnessMap=this.sheenRoughnessMap.toJSON(e).uuid),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Vp&&(i.blending=this.blending),this.side!==kf&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==kw&&(i.blendSrc=this.blendSrc),this.blendDst!==zw&&(i.blendDst=this.blendDst),this.blendEquation!==Zh&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==Zp&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==v3&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Tp&&(i.stencilFail=this.stencilFail),this.stencilZFail!==Tp&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==Tp&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=r(e.textures),o=r(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class Hf extends to{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new vt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ro,this.combine=D_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const wf=Yte();function Yte(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const u=l-127;u<-27?(i[l]=0,i[l|256]=32768,r[l]=24,r[l|256]=24):u<-14?(i[l]=1024>>-u-14,i[l|256]=1024>>-u-14|32768,r[l]=-u-1,r[l|256]=-u-1):u<=15?(i[l]=u+15<<10,i[l|256]=u+15<<10|32768,r[l]=13,r[l|256]=13):u<128?(i[l]=31744,i[l|256]=64512,r[l]=24,r[l|256]=24):(i[l]=31744,i[l|256]=64512,r[l]=13,r[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let u=l<<13,h=0;for(;(u&8388608)===0;)u<<=1,h-=8388608;u&=-8388609,h+=947912704,s[l]=u|h}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:o,offsetTable:a}}function ia(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=Qt(n,-65504,65504),wf.floatView[0]=n;const e=wf.uint32View[0],t=e>>23&511;return wf.baseTable[t]+((e&8388607)>>wf.shiftTable[t])}function fb(n){const e=n>>10;return wf.uint32View[0]=wf.mantissaTable[wf.offsetTable[e]+(n&1023)]+wf.exponentTable[e],wf.floatView[0]}class $te{static toHalfFloat(e){return ia(e)}static fromHalfFloat(e){return fb(e)}}const Ur=new ae,W1=new ot;let Zte=0;class ai{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:Zte++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=n_,this.updateRanges=[],this.gpuType=oa,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)W1.fromBufferAttribute(this,t),W1.applyMatrix3(e),this.setXY(t,W1.x,W1.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)Ur.fromBufferAttribute(this,t),Ur.applyMatrix3(e),this.setXYZ(t,Ur.x,Ur.y,Ur.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)Ur.fromBufferAttribute(this,t),Ur.applyMatrix4(e),this.setXYZ(t,Ur.x,Ur.y,Ur.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Ur.fromBufferAttribute(this,t),Ur.applyNormalMatrix(e),this.setXYZ(t,Ur.x,Ur.y,Ur.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Ur.fromBufferAttribute(this,t),Ur.transformDirection(e),this.setXYZ(t,Ur.x,Ur.y,Ur.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=wo(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=_n(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=wo(t,this.array)),t}setX(e,t){return this.normalized&&(t=_n(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=wo(t,this.array)),t}setY(e,t){return this.normalized&&(t=_n(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=wo(t,this.array)),t}setZ(e,t){return this.normalized&&(t=_n(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=wo(t,this.array)),t}setW(e,t){return this.normalized&&(t=_n(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=_n(t,this.array),i=_n(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=_n(t,this.array),i=_n(i,this.array),r=_n(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=_n(t,this.array),i=_n(i,this.array),r=_n(r,this.array),s=_n(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==n_&&(e.usage=this.usage),e}}class Kte extends ai{constructor(e,t,i){super(new Int8Array(e),t,i)}}class Qte extends ai{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class Jte extends ai{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class ene extends ai{constructor(e,t,i){super(new Int16Array(e),t,i)}}class xO extends ai{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class tne extends ai{constructor(e,t,i){super(new Int32Array(e),t,i)}}class SO extends ai{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class nne extends ai{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}getX(e){let t=fb(this.array[e*this.itemSize]);return this.normalized&&(t=wo(t,this.array)),t}setX(e,t){return this.normalized&&(t=_n(t,this.array)),this.array[e*this.itemSize]=ia(t),this}getY(e){let t=fb(this.array[e*this.itemSize+1]);return this.normalized&&(t=wo(t,this.array)),t}setY(e,t){return this.normalized&&(t=_n(t,this.array)),this.array[e*this.itemSize+1]=ia(t),this}getZ(e){let t=fb(this.array[e*this.itemSize+2]);return this.normalized&&(t=wo(t,this.array)),t}setZ(e,t){return this.normalized&&(t=_n(t,this.array)),this.array[e*this.itemSize+2]=ia(t),this}getW(e){let t=fb(this.array[e*this.itemSize+3]);return this.normalized&&(t=wo(t,this.array)),t}setW(e,t){return this.normalized&&(t=_n(t,this.array)),this.array[e*this.itemSize+3]=ia(t),this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=_n(t,this.array),i=_n(i,this.array)),this.array[e+0]=ia(t),this.array[e+1]=ia(i),this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=_n(t,this.array),i=_n(i,this.array),r=_n(r,this.array)),this.array[e+0]=ia(t),this.array[e+1]=ia(i),this.array[e+2]=ia(r),this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=_n(t,this.array),i=_n(i,this.array),r=_n(r,this.array),s=_n(s,this.array)),this.array[e+0]=ia(t),this.array[e+1]=ia(i),this.array[e+2]=ia(r),this.array[e+3]=ia(s),this}}class Ut extends ai{constructor(e,t,i){super(new Float32Array(e),t,i)}}let ine=0;const al=new Kt,YA=new Qn,xg=new ae,Sa=new Vr,Dy=new Vr,hs=new ae;class fn extends yu{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:ine++}),this.uuid=Ca(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(A6(e)?SO:xO)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new cn().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return al.makeRotationFromQuaternion(e),this.applyMatrix4(al),this}rotateX(e){return al.makeRotationX(e),this.applyMatrix4(al),this}rotateY(e){return al.makeRotationY(e),this.applyMatrix4(al),this}rotateZ(e){return al.makeRotationZ(e),this.applyMatrix4(al),this}translate(e,t,i){return al.makeTranslation(e,t,i),this.applyMatrix4(al),this}scale(e,t,i){return al.makeScale(e,t,i),this.applyMatrix4(al),this}lookAt(e){return YA.lookAt(e),YA.updateMatrix(),this.applyMatrix4(YA.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(xg).negate(),this.translate(xg.x,xg.y,xg.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const i=[];for(let r=0,s=e.length;r<s;r++){const o=e[r];i.push(o.x,o.y,o.z||0)}this.setAttribute("position",new Ut(i,3))}else{const i=Math.min(e.length,t.count);for(let r=0;r<i;r++){const s=e[r];t.setXYZ(r,s.x,s.y,s.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Vr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new ae(-1/0,-1/0,-1/0),new ae(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){const s=t[i];Sa.setFromBufferAttribute(s),this.morphTargetsRelative?(hs.addVectors(this.boundingBox.min,Sa.min),this.boundingBox.expandByPoint(hs),hs.addVectors(this.boundingBox.max,Sa.max),this.boundingBox.expandByPoint(hs)):(this.boundingBox.expandByPoint(Sa.min),this.boundingBox.expandByPoint(Sa.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ts);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new ae,1/0);return}if(e){const i=this.boundingSphere.center;if(Sa.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];Dy.setFromBufferAttribute(a),this.morphTargetsRelative?(hs.addVectors(Sa.min,Dy.min),Sa.expandByPoint(hs),hs.addVectors(Sa.max,Dy.max),Sa.expandByPoint(hs)):(Sa.expandByPoint(Dy.min),Sa.expandByPoint(Dy.max))}Sa.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)hs.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(hs));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let u=0,h=a.count;u<h;u++)hs.fromBufferAttribute(a,u),l&&(xg.fromBufferAttribute(e,u),hs.add(xg)),r=Math.max(r,i.distanceToSquared(hs))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=t.position,r=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new ai(new Float32Array(4*i.count),4));const o=this.getAttribute("tangent"),a=[],l=[];for(let I=0;I<i.count;I++)a[I]=new ae,l[I]=new ae;const u=new ae,h=new ae,p=new ae,m=new ot,y=new ot,b=new ot,x=new ae,S=new ae;function _(I,P,U){u.fromBufferAttribute(i,I),h.fromBufferAttribute(i,P),p.fromBufferAttribute(i,U),m.fromBufferAttribute(s,I),y.fromBufferAttribute(s,P),b.fromBufferAttribute(s,U),h.sub(u),p.sub(u),y.sub(m),b.sub(m);const B=1/(y.x*b.y-b.x*y.y);isFinite(B)&&(x.copy(h).multiplyScalar(b.y).addScaledVector(p,-y.y).multiplyScalar(B),S.copy(p).multiplyScalar(y.x).addScaledVector(h,-b.x).multiplyScalar(B),a[I].add(x),a[P].add(x),a[U].add(x),l[I].add(S),l[P].add(S),l[U].add(S))}let T=this.groups;T.length===0&&(T=[{start:0,count:e.count}]);for(let I=0,P=T.length;I<P;++I){const U=T[I],B=U.start,F=U.count;for(let z=B,W=B+F;z<W;z+=3)_(e.getX(z+0),e.getX(z+1),e.getX(z+2))}const A=new ae,M=new ae,C=new ae,R=new ae;function L(I){C.fromBufferAttribute(r,I),R.copy(C);const P=a[I];A.copy(P),A.sub(C.multiplyScalar(C.dot(P))).normalize(),M.crossVectors(R,P);const B=M.dot(l[I])<0?-1:1;o.setXYZW(I,A.x,A.y,A.z,B)}for(let I=0,P=T.length;I<P;++I){const U=T[I],B=U.start,F=U.count;for(let z=B,W=B+F;z<W;z+=3)L(e.getX(z+0)),L(e.getX(z+1)),L(e.getX(z+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new ai(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let m=0,y=i.count;m<y;m++)i.setXYZ(m,0,0,0);const r=new ae,s=new ae,o=new ae,a=new ae,l=new ae,u=new ae,h=new ae,p=new ae;if(e)for(let m=0,y=e.count;m<y;m+=3){const b=e.getX(m+0),x=e.getX(m+1),S=e.getX(m+2);r.fromBufferAttribute(t,b),s.fromBufferAttribute(t,x),o.fromBufferAttribute(t,S),h.subVectors(o,s),p.subVectors(r,s),h.cross(p),a.fromBufferAttribute(i,b),l.fromBufferAttribute(i,x),u.fromBufferAttribute(i,S),a.add(h),l.add(h),u.add(h),i.setXYZ(b,a.x,a.y,a.z),i.setXYZ(x,l.x,l.y,l.z),i.setXYZ(S,u.x,u.y,u.z)}else for(let m=0,y=t.count;m<y;m+=3)r.fromBufferAttribute(t,m+0),s.fromBufferAttribute(t,m+1),o.fromBufferAttribute(t,m+2),h.subVectors(o,s),p.subVectors(r,s),h.cross(p),i.setXYZ(m+0,h.x,h.y,h.z),i.setXYZ(m+1,h.x,h.y,h.z),i.setXYZ(m+2,h.x,h.y,h.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)hs.fromBufferAttribute(e,t),hs.normalize(),e.setXYZ(t,hs.x,hs.y,hs.z)}toNonIndexed(){function e(a,l){const u=a.array,h=a.itemSize,p=a.normalized,m=new u.constructor(l.length*h);let y=0,b=0;for(let x=0,S=l.length;x<S;x++){a.isInterleavedBufferAttribute?y=l[x]*a.data.stride+a.offset:y=l[x]*h;for(let _=0;_<h;_++)m[b++]=u[y++]}return new ai(m,h,p)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new fn,i=this.index.array,r=this.attributes;for(const a in r){const l=r[a],u=e(l,i);t.setAttribute(a,u)}const s=this.morphAttributes;for(const a in s){const l=[],u=s[a];for(let h=0,p=u.length;h<p;h++){const m=u[h],y=e(m,i);l.push(y)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const u=o[a];t.addGroup(u.start,u.count,u.materialIndex)}return t}toJSON(){const e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const u in l)l[u]!==void 0&&(e[u]=l[u]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const l in i){const u=i[l];e.data.attributes[l]=u.toJSON(e.data)}const r={};let s=!1;for(const l in this.morphAttributes){const u=this.morphAttributes[l],h=[];for(let p=0,m=u.length;p<m;p++){const y=u[p];h.push(y.toJSON(e.data))}h.length>0&&(r[l]=h,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere=a.toJSON()),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone());const r=e.attributes;for(const u in r){const h=r[u];this.setAttribute(u,h.clone(t))}const s=e.morphAttributes;for(const u in s){const h=[],p=s[u];for(let m=0,y=p.length;m<y;m++)h.push(p[m].clone(t));this.morphAttributes[u]=h}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let u=0,h=o.length;u<h;u++){const p=o[u];this.addGroup(p.start,p.count,p.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const vU=new Kt,rp=new q0,X1=new ts,yU=new ae,q1=new ae,Y1=new ae,$1=new ae,$A=new ae,Z1=new ae,bU=new ae,K1=new ae;class Pi extends Qn{constructor(e=new fn,t=new Hf){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const i=this.geometry,r=i.attributes.position,s=i.morphAttributes.position,o=i.morphTargetsRelative;t.fromBufferAttribute(r,e);const a=this.morphTargetInfluences;if(s&&a){Z1.set(0,0,0);for(let l=0,u=s.length;l<u;l++){const h=a[l],p=s[l];h!==0&&($A.fromBufferAttribute(p,e),o?Z1.addScaledVector($A,h):Z1.addScaledVector($A.sub(t),h))}t.add(Z1)}return t}raycast(e,t){const i=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),X1.copy(i.boundingSphere),X1.applyMatrix4(s),rp.copy(e.ray).recast(e.near),!(X1.containsPoint(rp.origin)===!1&&(rp.intersectSphere(X1,yU)===null||rp.origin.distanceToSquared(yU)>(e.far-e.near)**2))&&(vU.copy(s).invert(),rp.copy(e.ray).applyMatrix4(vU),!(i.boundingBox!==null&&rp.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,rp)))}_computeIntersections(e,t,i){let r;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,u=s.attributes.uv,h=s.attributes.uv1,p=s.attributes.normal,m=s.groups,y=s.drawRange;if(a!==null)if(Array.isArray(o))for(let b=0,x=m.length;b<x;b++){const S=m[b],_=o[S.materialIndex],T=Math.max(S.start,y.start),A=Math.min(a.count,Math.min(S.start+S.count,y.start+y.count));for(let M=T,C=A;M<C;M+=3){const R=a.getX(M),L=a.getX(M+1),I=a.getX(M+2);r=Q1(this,_,e,i,u,h,p,R,L,I),r&&(r.faceIndex=Math.floor(M/3),r.face.materialIndex=S.materialIndex,t.push(r))}}else{const b=Math.max(0,y.start),x=Math.min(a.count,y.start+y.count);for(let S=b,_=x;S<_;S+=3){const T=a.getX(S),A=a.getX(S+1),M=a.getX(S+2);r=Q1(this,o,e,i,u,h,p,T,A,M),r&&(r.faceIndex=Math.floor(S/3),t.push(r))}}else if(l!==void 0)if(Array.isArray(o))for(let b=0,x=m.length;b<x;b++){const S=m[b],_=o[S.materialIndex],T=Math.max(S.start,y.start),A=Math.min(l.count,Math.min(S.start+S.count,y.start+y.count));for(let M=T,C=A;M<C;M+=3){const R=M,L=M+1,I=M+2;r=Q1(this,_,e,i,u,h,p,R,L,I),r&&(r.faceIndex=Math.floor(M/3),r.face.materialIndex=S.materialIndex,t.push(r))}}else{const b=Math.max(0,y.start),x=Math.min(l.count,y.start+y.count);for(let S=b,_=x;S<_;S+=3){const T=S,A=S+1,M=S+2;r=Q1(this,o,e,i,u,h,p,T,A,M),r&&(r.faceIndex=Math.floor(S/3),t.push(r))}}}}function rne(n,e,t,i,r,s,o,a){let l;if(e.side===Co?l=i.intersectTriangle(o,s,r,!0,a):l=i.intersectTriangle(r,s,o,e.side===kf,a),l===null)return null;K1.copy(a),K1.applyMatrix4(n.matrixWorld);const u=t.ray.origin.distanceTo(K1);return u<t.near||u>t.far?null:{distance:u,point:K1.clone(),object:n}}function Q1(n,e,t,i,r,s,o,a,l,u){n.getVertexPosition(a,q1),n.getVertexPosition(l,Y1),n.getVertexPosition(u,$1);const h=rne(n,e,t,i,q1,Y1,$1,bU);if(h){const p=new ae;sa.getBarycoord(bU,q1,Y1,$1,p),r&&(h.uv=sa.getInterpolatedAttribute(r,a,l,u,p,new ot)),s&&(h.uv1=sa.getInterpolatedAttribute(s,a,l,u,p,new ot)),o&&(h.normal=sa.getInterpolatedAttribute(o,a,l,u,p,new ae),h.normal.dot(i.direction)>0&&h.normal.multiplyScalar(-1));const m={a,b:l,c:u,normal:new ae,materialIndex:0};sa.getNormal(q1,Y1,$1,m.normal),h.face=m,h.barycoord=p}return h}class gd extends fn{constructor(e=1,t=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const l=[],u=[],h=[],p=[];let m=0,y=0;b("z","y","x",-1,-1,i,t,e,o,s,0),b("z","y","x",1,-1,i,t,-e,o,s,1),b("x","z","y",1,1,e,i,t,r,o,2),b("x","z","y",1,-1,e,i,-t,r,o,3),b("x","y","z",1,-1,e,t,i,r,s,4),b("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(l),this.setAttribute("position",new Ut(u,3)),this.setAttribute("normal",new Ut(h,3)),this.setAttribute("uv",new Ut(p,2));function b(x,S,_,T,A,M,C,R,L,I,P){const U=M/L,B=C/I,F=M/2,z=C/2,W=R/2,X=L+1,j=I+1;let G=0,K=0;const J=new ae;for(let ee=0;ee<j;ee++){const V=ee*B-z;for(let Y=0;Y<X;Y++){const Q=Y*U-F;J[x]=Q*T,J[S]=V*A,J[_]=W,u.push(J.x,J.y,J.z),J[x]=0,J[S]=0,J[_]=R>0?1:-1,h.push(J.x,J.y,J.z),p.push(Y/L),p.push(1-ee/I),G+=1}}for(let ee=0;ee<I;ee++)for(let V=0;V<L;V++){const Y=m+V+X*ee,Q=m+V+X*(ee+1),re=m+(V+1)+X*(ee+1),ne=m+(V+1)+X*ee;l.push(Y,Q,ne),l.push(Q,re,ne),K+=6}a.addGroup(y,K,P),y+=K,m+=G}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new gd(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function T0(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function xo(n){const e={};for(let t=0;t<n.length;t++){const i=T0(n[t]);for(const r in i)e[r]=i[r]}return e}function sne(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function O6(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Wn.workingColorSpace}const wO={clone:T0,merge:xo};var one=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,ane=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class El extends to{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=one,this.fragmentShader=ane,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=T0(e.uniforms),this.uniformsGroups=sne(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;o&&o.isTexture?t.uniforms[r]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[r]={type:"m4",value:o.toArray()}:t.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class gT extends Qn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Kt,this.projectionMatrix=new Kt,this.projectionMatrixInverse=new Kt,this.coordinateSystem=Ma,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Bh=new ae,_U=new ot,xU=new ot;class Fr extends gT{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=w0*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Gp*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return w0*2*Math.atan(Math.tan(Gp*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){Bh.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Bh.x,Bh.y).multiplyScalar(-e/Bh.z),Bh.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(Bh.x,Bh.y).multiplyScalar(-e/Bh.z)}getViewSize(e,t){return this.getViewBounds(e,_U,xU),t.subVectors(xU,_U)}setViewOffset(e,t,i,r,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Gp*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,u=o.fullHeight;s+=o.offsetX*r/l,t-=o.offsetY*i/u,r*=o.width/l,i*=o.height/u}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Sg=-90,wg=1;class L6 extends Qn{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new Fr(Sg,wg,e,t);r.layers=this.layers,this.add(r);const s=new Fr(Sg,wg,e,t);s.layers=this.layers,this.add(s);const o=new Fr(Sg,wg,e,t);o.layers=this.layers,this.add(o);const a=new Fr(Sg,wg,e,t);a.layers=this.layers,this.add(a);const l=new Fr(Sg,wg,e,t);l.layers=this.layers,this.add(l);const u=new Fr(Sg,wg,e,t);u.layers=this.layers,this.add(u)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,r,s,o,a,l]=t;for(const u of t)this.remove(u);if(e===Ma)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===S0)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const u of t)this.add(u),u.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,l,u,h]=this.children,p=e.getRenderTarget(),m=e.getActiveCubeFace(),y=e.getActiveMipmapLevel(),b=e.xr.enabled;e.xr.enabled=!1;const x=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(t,s),e.setRenderTarget(i,1,r),e.render(t,o),e.setRenderTarget(i,2,r),e.render(t,a),e.setRenderTarget(i,3,r),e.render(t,l),e.setRenderTarget(i,4,r),e.render(t,u),i.texture.generateMipmaps=x,e.setRenderTarget(i,5,r),e.render(t,h),e.setRenderTarget(p,m,y),e.xr.enabled=b,i.texture.needsPMREMUpdate=!0}}class L_ extends ur{constructor(e=[],t=zf,i,r,s,o,a,l,u,h){super(e,t,i,r,s,o,a,l,u,h),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class P6 extends gu{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new L_(r),this._setTextureOptions(t),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new gd(5,5,5),s=new El({name:"CubemapFromEquirect",uniforms:T0(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Co,blending:Df});s.uniforms.tEquirect.value=t;const o=new Pi(r,s),a=t.minFilter;return t.minFilter===ou&&(t.minFilter=br),new L6(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t=!0,i=!0,r=!0){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,r);e.setRenderTarget(s)}}class t0 extends Qn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const lne={type:"move"};class rw{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new t0,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new t0,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new ae,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new ae),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new t0,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new ae,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new ae),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,o=null;const a=this._targetRay,l=this._grip,u=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(u&&e.hand){o=!0;for(const x of e.hand.values()){const S=t.getJointPose(x,i),_=this._getHandJoint(u,x);S!==null&&(_.matrix.fromArray(S.transform.matrix),_.matrix.decompose(_.position,_.rotation,_.scale),_.matrixWorldNeedsUpdate=!0,_.jointRadius=S.radius),_.visible=S!==null}const h=u.joints["index-finger-tip"],p=u.joints["thumb-tip"],m=h.position.distanceTo(p.position),y=.02,b=.005;u.inputState.pinching&&m>y+b?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&m<=y-b&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&s!==null&&(r=s),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(lne)))}return a!==null&&(a.visible=r!==null),l!==null&&(l.visible=s!==null),u!==null&&(u.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new t0;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class vT{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new vt(e),this.density=t}clone(){return new vT(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class yT{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new vt(e),this.near=t,this.far=i}clone(){return new yT(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class bT extends Qn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Ro,this.environmentIntensity=1,this.environmentRotation=new Ro,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class _T{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=n_,this.updateRanges=[],this.version=0,this.uuid=Ca()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ca()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ca()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const _o=new ae;class Kp{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)_o.fromBufferAttribute(this,t),_o.applyMatrix4(e),this.setXYZ(t,_o.x,_o.y,_o.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)_o.fromBufferAttribute(this,t),_o.applyNormalMatrix(e),this.setXYZ(t,_o.x,_o.y,_o.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)_o.fromBufferAttribute(this,t),_o.transformDirection(e),this.setXYZ(t,_o.x,_o.y,_o.z);return this}getComponent(e,t){let i=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(i=wo(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=_n(i,this.array)),this.data.array[e*this.data.stride+this.offset+t]=i,this}setX(e,t){return this.normalized&&(t=_n(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=_n(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=_n(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=_n(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=wo(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=wo(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=wo(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=wo(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=_n(t,this.array),i=_n(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=_n(t,this.array),i=_n(i,this.array),r=_n(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=_n(t,this.array),i=_n(i,this.array),r=_n(r,this.array),s=_n(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new ai(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Kp(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class EO extends to{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new vt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Eg;const Oy=new ae,Tg=new ae,Mg=new ae,Ag=new ot,Ly=new ot,I6=new Kt,J1=new ae,Py=new ae,eS=new ae,SU=new ot,ZA=new ot,wU=new ot;class N6 extends Qn{constructor(e=new EO){if(super(),this.isSprite=!0,this.type="Sprite",Eg===void 0){Eg=new fn;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new _T(t,5);Eg.setIndex([0,1,2,0,2,3]),Eg.setAttribute("position",new Kp(i,3,0,!1)),Eg.setAttribute("uv",new Kp(i,2,3,!1))}this.geometry=Eg,this.material=e,this.center=new ot(.5,.5),this.count=1}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Tg.setFromMatrixScale(this.matrixWorld),I6.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Mg.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Tg.multiplyScalar(-Mg.z);const i=this.material.rotation;let r,s;i!==0&&(s=Math.cos(i),r=Math.sin(i));const o=this.center;tS(J1.set(-.5,-.5,0),Mg,o,Tg,r,s),tS(Py.set(.5,-.5,0),Mg,o,Tg,r,s),tS(eS.set(.5,.5,0),Mg,o,Tg,r,s),SU.set(0,0),ZA.set(1,0),wU.set(1,1);let a=e.ray.intersectTriangle(J1,Py,eS,!1,Oy);if(a===null&&(tS(Py.set(-.5,.5,0),Mg,o,Tg,r,s),ZA.set(0,1),a=e.ray.intersectTriangle(J1,eS,Py,!1,Oy),a===null))return;const l=e.ray.origin.distanceTo(Oy);l<e.near||l>e.far||t.push({distance:l,point:Oy.clone(),uv:sa.getInterpolation(Oy,J1,Py,eS,SU,ZA,wU,new ot),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function tS(n,e,t,i,r,s){Ag.subVectors(n,t).addScalar(.5).multiply(i),r!==void 0?(Ly.x=s*Ag.x-r*Ag.y,Ly.y=r*Ag.x+s*Ag.y):Ly.copy(Ag),n.copy(e),n.x+=Ly.x,n.y+=Ly.y,n.applyMatrix4(I6)}const nS=new ae,EU=new ae;class U6 extends Qn{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,r=t.length;i<r;i++){const s=t[i];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,i=0){t=Math.abs(t);const r=this.levels;let s;for(s=0;s<r.length&&!(t<r[s].distance);s++);return r.splice(s,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let i=0;i<t.length;i++)if(t[i].distance===e){const r=t.splice(i,1);return this.remove(r[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,r;for(i=1,r=t.length;i<r;i++){let s=t[i].distance;if(t[i].object.visible&&(s-=s*t[i].hysteresis),e<s)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){nS.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(nS);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){nS.setFromMatrixPosition(e.matrixWorld),EU.setFromMatrixPosition(this.matrixWorld);const i=nS.distanceTo(EU)/e.zoom;t[0].object.visible=!0;let r,s;for(r=1,s=t.length;r<s;r++){let o=t[r].distance;if(t[r].object.visible&&(o-=o*t[r].hysteresis),i>=o)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<s;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let r=0,s=i.length;r<s;r++){const o=i[r];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const TU=new ae,MU=new Vn,AU=new Vn,cne=new ae,CU=new Kt,iS=new ae,KA=new ts,RU=new Kt,QA=new q0;class k6 extends Pi{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=g3,this.bindMatrix=new Kt,this.bindMatrixInverse=new Kt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Vr),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,iS),this.boundingBox.expandByPoint(iS)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new ts),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,iS),this.boundingSphere.expandByPoint(iS)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const i=this.material,r=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),KA.copy(this.boundingSphere),KA.applyMatrix4(r),e.ray.intersectsSphere(KA)!==!1&&(RU.copy(r).invert(),QA.copy(e.ray).applyMatrix4(RU),!(this.boundingBox!==null&&QA.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,QA)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Vn,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===g3?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===p6?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,r=this.geometry;MU.fromBufferAttribute(r.attributes.skinIndex,e),AU.fromBufferAttribute(r.attributes.skinWeight,e),TU.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=AU.getComponent(s);if(o!==0){const a=MU.getComponent(s);CU.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),t.addScaledVector(cne.copy(TU).applyMatrix4(CU),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class TO extends Qn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class hu extends ur{constructor(e=null,t=1,i=1,r,s,o,a,l,u=Ds,h=Ds,p,m){super(null,o,a,l,u,h,r,s,p,m),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const DU=new Kt,une=new Kt;class xT{constructor(e=[],t=[]){this.uuid=Ca(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new Kt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new Kt;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:une;DU.multiplyMatrices(a,t[s]),DU.toArray(i,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new xT(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new hu(t,e,e,eo,oa);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new TO),this.bones.push(o),this.boneInverses.push(new Kt().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.7,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,s=t.length;r<s;r++){const o=t[r];e.bones.push(o.uuid);const a=i[r];e.boneInverses.push(a.toArray())}return e}}class Qp extends ai{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Cg=new Kt,OU=new Kt,rS=[],LU=new Vr,fne=new Kt,Iy=new Pi,Ny=new ts;class z6 extends Pi{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Qp(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,fne)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Vr),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Cg),LU.copy(e.boundingBox).applyMatrix4(Cg),this.boundingBox.union(LU)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new ts),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Cg),Ny.copy(e.boundingSphere).applyMatrix4(Cg),this.boundingSphere.union(Ny)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const i=t.morphTargetInfluences,r=this.morphTexture.source.data.data,s=i.length+1,o=e*s+1;for(let a=0;a<i.length;a++)i[a]=r[o+a]}raycast(e,t){const i=this.matrixWorld,r=this.count;if(Iy.geometry=this.geometry,Iy.material=this.material,Iy.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Ny.copy(this.boundingSphere),Ny.applyMatrix4(i),e.ray.intersectsSphere(Ny)!==!1))for(let s=0;s<r;s++){this.getMatrixAt(s,Cg),OU.multiplyMatrices(i,Cg),Iy.matrixWorld=OU,Iy.raycast(e,rS);for(let o=0,a=rS.length;o<a;o++){const l=rS[o];l.instanceId=s,l.object=this,t.push(l)}rS.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Qp(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const i=t.morphTargetInfluences,r=i.length+1;this.morphTexture===null&&(this.morphTexture=new hu(new Float32Array(r*this.count),r,this.count,uT,oa));const s=this.morphTexture.source.data.data;let o=0;for(let u=0;u<i.length;u++)o+=i[u];const a=this.geometry.morphTargetsRelative?1:1-o,l=r*e;s[l]=a,s.set(i,l+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const JA=new ae,hne=new ae,dne=new cn;class _f{constructor(e=new ae(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=JA.subVectors(i,t).cross(hne.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(JA),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(i,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||dne.getNormalMatrix(e),r=this.coplanarPoint(JA).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const sp=new ts,pne=new ot(.5,.5),sS=new ae;class im{constructor(e=new _f,t=new _f,i=new _f,r=new _f,s=new _f,o=new _f){this.planes=[e,t,i,r,s,o]}set(e,t,i,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=Ma,i=!1){const r=this.planes,s=e.elements,o=s[0],a=s[1],l=s[2],u=s[3],h=s[4],p=s[5],m=s[6],y=s[7],b=s[8],x=s[9],S=s[10],_=s[11],T=s[12],A=s[13],M=s[14],C=s[15];if(r[0].setComponents(u-o,y-h,_-b,C-T).normalize(),r[1].setComponents(u+o,y+h,_+b,C+T).normalize(),r[2].setComponents(u+a,y+p,_+x,C+A).normalize(),r[3].setComponents(u-a,y-p,_-x,C-A).normalize(),i)r[4].setComponents(l,m,S,M).normalize(),r[5].setComponents(u-l,y-m,_-S,C-M).normalize();else if(r[4].setComponents(u-l,y-m,_-S,C-M).normalize(),t===Ma)r[5].setComponents(u+l,y+m,_+S,C+M).normalize();else if(t===S0)r[5].setComponents(l,m,S,M).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),sp.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),sp.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(sp)}intersectsSprite(e){sp.center.set(0,0,0);const t=pne.distanceTo(e.center);return sp.radius=.7071067811865476+t,sp.applyMatrix4(e.matrixWorld),this.intersectsSphere(sp)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(sS.x=r.normal.x>0?e.max.x:e.min.x,sS.y=r.normal.y>0?e.max.y:e.min.y,sS.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(sS)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}const qc=new Kt,Yc=new im;class ST{constructor(){this.coordinateSystem=Ma}intersectsObject(e,t){if(!t.isArrayCamera||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(qc.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Yc.setFromProjectionMatrix(qc,r.coordinateSystem,r.reversedDepth),Yc.intersectsObject(e))return!0}return!1}intersectsSprite(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(qc.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Yc.setFromProjectionMatrix(qc,r.coordinateSystem,r.reversedDepth),Yc.intersectsSprite(e))return!0}return!1}intersectsSphere(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(qc.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Yc.setFromProjectionMatrix(qc,r.coordinateSystem,r.reversedDepth),Yc.intersectsSphere(e))return!0}return!1}intersectsBox(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(qc.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Yc.setFromProjectionMatrix(qc,r.coordinateSystem,r.reversedDepth),Yc.intersectsBox(e))return!0}return!1}containsPoint(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(qc.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Yc.setFromProjectionMatrix(qc,r.coordinateSystem,r.reversedDepth),Yc.containsPoint(e))return!0}return!1}clone(){return new ST}}function eC(n,e){return n-e}function mne(n,e){return n.z-e.z}function gne(n,e){return e.z-n.z}class vne{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,i,r){const s=this.pool,o=this.list;this.index>=s.length&&s.push({start:-1,count:-1,z:-1,index:-1});const a=s[this.index];o.push(a),this.index++,a.start=e,a.count=t,a.z=i,a.index=r}reset(){this.list.length=0,this.index=0}}const ta=new Kt,yne=new vt(1,1,1),PU=new im,bne=new ST,oS=new Vr,op=new ts,Uy=new ae,IU=new ae,_ne=new ae,tC=new vne,$s=new Pi,aS=[];function xne(n,e,t=0){const i=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const r=n.count;for(let s=0;s<r;s++)for(let o=0;o<i;o++)e.setComponent(s+t,o,n.getComponent(s,o))}else e.array.set(n.array,t*i);e.needsUpdate=!0}function ap(n,e){if(n.constructor!==e.constructor){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++)e[i]=n[i]}else{const t=Math.min(n.length,e.length);e.set(new n.constructor(n.buffer,0,t))}}class F6 extends Pi{constructor(e,t,i=t*2,r){super(new fn,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=i,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),i=new hu(t,e,e,eo,oa);this._matricesTexture=i}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),i=new hu(t,e,e,O_,Ff);this._indirectTexture=i}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),i=new hu(t,e,e,eo,oa);i.colorSpace=Wn.workingColorSpace,this._colorsTexture=i}_initializeGeometry(e){const t=this.geometry,i=this._maxVertexCount,r=this._maxIndexCount;if(this._geometryInitialized===!1){for(const s in e.attributes){const o=e.getAttribute(s),{array:a,itemSize:l,normalized:u}=o,h=new a.constructor(i*l),p=new ai(h,l,u);t.setAttribute(s,p)}if(e.getIndex()!==null){const s=i>65535?new Uint32Array(r):new Uint16Array(r);t.setIndex(new ai(s,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const i in t.attributes){if(!e.hasAttribute(i))throw new Error(`THREE.BatchedMesh: Added geometry missing "${i}". All geometries must have consistent attributes.`);const r=e.getAttribute(i),s=t.getAttribute(i);if(r.itemSize!==s.itemSize||r.normalized!==s.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Vr);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let i=0,r=t.length;i<r;i++){if(t[i].active===!1)continue;const s=t[i].geometryIndex;this.getMatrixAt(i,ta),this.getBoundingBoxAt(s,oS).applyMatrix4(ta),e.union(oS)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ts);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let i=0,r=t.length;i<r;i++){if(t[i].active===!1)continue;const s=t[i].geometryIndex;this.getMatrixAt(i,ta),this.getBoundingSphereAt(s,op).applyMatrix4(ta),e.union(op)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const i={visible:!0,active:!0,geometryIndex:e};let r=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(eC),r=this._availableInstanceIds.shift(),this._instanceInfo[r]=i):(r=this._instanceInfo.length,this._instanceInfo.push(i));const s=this._matricesTexture;ta.identity().toArray(s.image.data,r*16),s.needsUpdate=!0;const o=this._colorsTexture;return o&&(yne.toArray(o.image.data,r*4),o.needsUpdate=!0),this._visibilityChanged=!0,r}addGeometry(e,t=-1,i=-1){this._initializeGeometry(e),this._validateGeometry(e);const r={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},s=this._geometryInfo;r.vertexStart=this._nextVertexStart,r.reservedVertexCount=t===-1?e.getAttribute("position").count:t;const o=e.getIndex();if(o!==null&&(r.indexStart=this._nextIndexStart,r.reservedIndexCount=i===-1?o.count:i),r.indexStart!==-1&&r.indexStart+r.reservedIndexCount>this._maxIndexCount||r.vertexStart+r.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let l;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(eC),l=this._availableGeometryIds.shift(),s[l]=r):(l=this._geometryCount,this._geometryCount++,s.push(r)),this.setGeometryAt(l,e),this._nextIndexStart=r.indexStart+r.reservedIndexCount,this._nextVertexStart=r.vertexStart+r.reservedVertexCount,l}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const i=this.geometry,r=i.getIndex()!==null,s=i.getIndex(),o=t.getIndex(),a=this._geometryInfo[e];if(r&&o.count>a.reservedIndexCount||t.attributes.position.count>a.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const l=a.vertexStart,u=a.reservedVertexCount;a.vertexCount=t.getAttribute("position").count;for(const h in i.attributes){const p=t.getAttribute(h),m=i.getAttribute(h);xne(p,m,l);const y=p.itemSize;for(let b=p.count,x=u;b<x;b++){const S=l+b;for(let _=0;_<y;_++)m.setComponent(S,_,0)}m.needsUpdate=!0,m.addUpdateRange(l*y,u*y)}if(r){const h=a.indexStart,p=a.reservedIndexCount;a.indexCount=t.getIndex().count;for(let m=0;m<o.count;m++)s.setX(h+m,l+o.getX(m));for(let m=o.count,y=p;m<y;m++)s.setX(h+m,l);s.needsUpdate=!0,s.addUpdateRange(h,a.reservedIndexCount)}return a.start=r?a.indexStart:a.vertexStart,a.count=r?a.indexCount:a.vertexCount,a.boundingBox=null,t.boundingBox!==null&&(a.boundingBox=t.boundingBox.clone()),a.boundingSphere=null,t.boundingSphere!==null&&(a.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||t[e].active===!1)return this;const i=this._instanceInfo;for(let r=0,s=i.length;r<s;r++)i[r].active&&i[r].geometryIndex===e&&this.deleteInstance(r);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const i=this._geometryInfo,r=i.map((o,a)=>a).sort((o,a)=>i[o].vertexStart-i[a].vertexStart),s=this.geometry;for(let o=0,a=i.length;o<a;o++){const l=r[o],u=i[l];if(u.active!==!1){if(s.index!==null){if(u.indexStart!==t){const{indexStart:h,vertexStart:p,reservedIndexCount:m}=u,y=s.index,b=y.array,x=e-p;for(let S=h;S<h+m;S++)b[S]=b[S]+x;y.array.copyWithin(t,h,h+m),y.addUpdateRange(t,m),u.indexStart=t}t+=u.reservedIndexCount}if(u.vertexStart!==e){const{vertexStart:h,reservedVertexCount:p}=u,m=s.attributes;for(const y in m){const b=m[y],{array:x,itemSize:S}=b;x.copyWithin(e*S,h*S,(h+p)*S),b.addUpdateRange(e*S,p*S)}u.vertexStart=e}e+=u.reservedVertexCount,u.start=s.index?u.indexStart:u.vertexStart,this._nextIndexStart=s.index?u.indexStart+u.reservedIndexCount:0,this._nextVertexStart=u.vertexStart+u.reservedVertexCount}}return this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const i=this.geometry,r=this._geometryInfo[e];if(r.boundingBox===null){const s=new Vr,o=i.index,a=i.attributes.position;for(let l=r.start,u=r.start+r.count;l<u;l++){let h=l;o&&(h=o.getX(h)),s.expandByPoint(Uy.fromBufferAttribute(a,h))}r.boundingBox=s}return t.copy(r.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const i=this.geometry,r=this._geometryInfo[e];if(r.boundingSphere===null){const s=new ts;this.getBoundingBoxAt(e,oS),oS.getCenter(s.center);const o=i.index,a=i.attributes.position;let l=0;for(let u=r.start,h=r.start+r.count;u<h;u++){let p=u;o&&(p=o.getX(p)),Uy.fromBufferAttribute(a,p),l=Math.max(l,s.center.distanceToSquared(Uy))}s.radius=Math.sqrt(l),r.boundingSphere=s}return t.copy(r.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const i=this._matricesTexture,r=this._matricesTexture.image.data;return t.toArray(r,e*16),i.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,t){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t?this:(this._instanceInfo[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);const i=this._geometryInfo[e];return t.vertexStart=i.vertexStart,t.vertexCount=i.vertexCount,t.reservedVertexCount=i.reservedVertexCount,t.indexStart=i.indexStart,t.indexCount=i.indexCount,t.reservedIndexCount=i.reservedIndexCount,t.start=i.start,t.count=i.count,t}setInstanceCount(e){const t=this._availableInstanceIds,i=this._instanceInfo;for(t.sort(eC);t[t.length-1]===i.length-1;)i.pop(),t.pop();if(e<i.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const r=new Int32Array(e),s=new Int32Array(e);ap(this._multiDrawCounts,r),ap(this._multiDrawStarts,s),this._multiDrawCounts=r,this._multiDrawStarts=s,this._maxInstanceCount=e;const o=this._indirectTexture,a=this._matricesTexture,l=this._colorsTexture;o.dispose(),this._initIndirectTexture(),ap(o.image.data,this._indirectTexture.image.data),a.dispose(),this._initMatricesTexture(),ap(a.image.data,this._matricesTexture.image.data),l&&(l.dispose(),this._initColorsTexture(),ap(l.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const i=[...this._geometryInfo].filter(a=>a.active);if(Math.max(...i.map(a=>a.vertexStart+a.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...i.map(l=>l.indexStart+l.reservedIndexCount))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);const s=this.geometry;s.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new fn,this._initializeGeometry(s));const o=this.geometry;s.index&&ap(s.index.array,o.index.array);for(const a in s.attributes)ap(s.attributes[a].array,o.attributes[a].array)}raycast(e,t){const i=this._instanceInfo,r=this._geometryInfo,s=this.matrixWorld,o=this.geometry;$s.material=this.material,$s.geometry.index=o.index,$s.geometry.attributes=o.attributes,$s.geometry.boundingBox===null&&($s.geometry.boundingBox=new Vr),$s.geometry.boundingSphere===null&&($s.geometry.boundingSphere=new ts);for(let a=0,l=i.length;a<l;a++){if(!i[a].visible||!i[a].active)continue;const u=i[a].geometryIndex,h=r[u];$s.geometry.setDrawRange(h.start,h.count),this.getMatrixAt(a,$s.matrixWorld).premultiply(s),this.getBoundingBoxAt(u,$s.geometry.boundingBox),this.getBoundingSphereAt(u,$s.geometry.boundingSphere),$s.raycast(e,aS);for(let p=0,m=aS.length;p<m;p++){const y=aS[p];y.object=this,y.batchId=a,t.push(y)}aS.length=0}$s.material=null,$s.geometry.index=null,$s.geometry.attributes={},$s.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=>({...t,boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=>({...t})),this._availableInstanceIds=e._availableInstanceIds.slice(),this._availableGeometryIds=e._availableGeometryIds.slice(),this._nextIndexStart=e._nextIndexStart,this._nextVertexStart=e._nextVertexStart,this._geometryCount=e._geometryCount,this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._indirectTexture=e._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(e,t,i,r,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=r.getIndex(),a=o===null?1:o.array.BYTES_PER_ELEMENT,l=this._instanceInfo,u=this._multiDrawStarts,h=this._multiDrawCounts,p=this._geometryInfo,m=this.perObjectFrustumCulled,y=this._indirectTexture,b=y.image.data,x=i.isArrayCamera?bne:PU;m&&!i.isArrayCamera&&(ta.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse).multiply(this.matrixWorld),PU.setFromProjectionMatrix(ta,i.coordinateSystem,i.reversedDepth));let S=0;if(this.sortObjects){ta.copy(this.matrixWorld).invert(),Uy.setFromMatrixPosition(i.matrixWorld).applyMatrix4(ta),IU.set(0,0,-1).transformDirection(i.matrixWorld).transformDirection(ta);for(let A=0,M=l.length;A<M;A++)if(l[A].visible&&l[A].active){const C=l[A].geometryIndex;this.getMatrixAt(A,ta),this.getBoundingSphereAt(C,op).applyMatrix4(ta);let R=!1;if(m&&(R=!x.intersectsSphere(op,i)),!R){const L=p[C],I=_ne.subVectors(op.center,Uy).dot(IU);tC.push(L.start,L.count,I,A)}}const _=tC.list,T=this.customSort;T===null?_.sort(s.transparent?gne:mne):T.call(this,_,i);for(let A=0,M=_.length;A<M;A++){const C=_[A];u[S]=C.start*a,h[S]=C.count,b[S]=C.index,S++}tC.reset()}else for(let _=0,T=l.length;_<T;_++)if(l[_].visible&&l[_].active){const A=l[_].geometryIndex;let M=!1;if(m&&(this.getMatrixAt(_,ta),this.getBoundingSphereAt(A,op).applyMatrix4(ta),M=!x.intersectsSphere(op,i)),!M){const C=p[A];u[S]=C.start*a,h[S]=C.count,b[S]=_,S++}}y.needsUpdate=!0,this._multiDrawCount=S,this._visibilityChanged=!1}onBeforeShadow(e,t,i,r,s,o){this.onBeforeRender(e,null,r,s,o)}}class Oo extends to{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new vt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const SE=new ae,wE=new ae,NU=new Kt,ky=new q0,lS=new ts,nC=new ae,UU=new ae;let cd=class extends Qn{constructor(e=new fn,t=new Oo){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)SE.fromBufferAttribute(t,r-1),wE.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=SE.distanceTo(wE);e.setAttribute("lineDistance",new Ut(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),lS.copy(i.boundingSphere),lS.applyMatrix4(r),lS.radius+=s,e.ray.intersectsSphere(lS)===!1)return;NU.copy(r).invert(),ky.copy(e.ray).applyMatrix4(NU);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=this.isLineSegments?2:1,h=i.index,m=i.attributes.position;if(h!==null){const y=Math.max(0,o.start),b=Math.min(h.count,o.start+o.count);for(let x=y,S=b-1;x<S;x+=u){const _=h.getX(x),T=h.getX(x+1),A=cS(this,e,ky,l,_,T,x);A&&t.push(A)}if(this.isLineLoop){const x=h.getX(b-1),S=h.getX(y),_=cS(this,e,ky,l,x,S,b-1);_&&t.push(_)}}else{const y=Math.max(0,o.start),b=Math.min(m.count,o.start+o.count);for(let x=y,S=b-1;x<S;x+=u){const _=cS(this,e,ky,l,x,x+1,x);_&&t.push(_)}if(this.isLineLoop){const x=cS(this,e,ky,l,b-1,y,b-1);x&&t.push(x)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}};function cS(n,e,t,i,r,s,o){const a=n.geometry.attributes.position;if(SE.fromBufferAttribute(a,r),wE.fromBufferAttribute(a,s),t.distanceSqToSegment(SE,wE,nC,UU)>i)return;nC.applyMatrix4(n.matrixWorld);const u=e.ray.origin.distanceTo(nC);if(!(u<e.near||u>e.far))return{distance:u,point:UU.clone().applyMatrix4(n.matrixWorld),index:o,face:null,faceIndex:null,barycoord:null,object:n}}const kU=new ae,zU=new ae;class bu extends cd{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)kU.fromBufferAttribute(t,r),zU.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+kU.distanceTo(zU);e.setAttribute("lineDistance",new Ut(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class B6 extends cd{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class MO extends to{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new vt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const FU=new Kt,b3=new q0,uS=new ts,fS=new ae;class V6 extends Qn{constructor(e=new fn,t=new MO){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),uS.copy(i.boundingSphere),uS.applyMatrix4(r),uS.radius+=s,e.ray.intersectsSphere(uS)===!1)return;FU.copy(r).invert(),b3.copy(e.ray).applyMatrix4(FU);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=i.index,p=i.attributes.position;if(u!==null){const m=Math.max(0,o.start),y=Math.min(u.count,o.start+o.count);for(let b=m,x=y;b<x;b++){const S=u.getX(b);fS.fromBufferAttribute(p,S),BU(fS,S,l,r,e,t,this)}}else{const m=Math.max(0,o.start),y=Math.min(p.count,o.start+o.count);for(let b=m,x=y;b<x;b++)fS.fromBufferAttribute(p,b),BU(fS,b,l,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function BU(n,e,t,i,r,s,o){const a=b3.distanceSqToPoint(n);if(a<t){const l=new ae;b3.closestPointToPoint(n,l),l.applyMatrix4(i);const u=r.ray.origin.distanceTo(l);if(u<r.near||u>r.far)return;s.push({distance:u,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,faceIndex:null,barycoord:null,object:o})}}class G6 extends ur{constructor(e,t,i,r,s=br,o=br,a,l,u){super(e,t,i,r,s,o,a,l,u),this.isVideoTexture=!0,this.generateMipmaps=!1,this._requestVideoFrameCallbackId=0;const h=this;function p(){h.needsUpdate=!0,h._requestVideoFrameCallbackId=e.requestVideoFrameCallback(p)}"requestVideoFrameCallback"in e&&(this._requestVideoFrameCallbackId=e.requestVideoFrameCallback(p))}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}dispose(){this._requestVideoFrameCallbackId!==0&&this.source.data.cancelVideoFrameCallback(this._requestVideoFrameCallbackId),super.dispose()}}class Sne extends G6{constructor(e,t,i,r,s,o,a,l){super({},e,t,i,r,s,o,a,l),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class wne extends ur{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Ds,this.minFilter=Ds,this.generateMipmaps=!1,this.needsUpdate=!0}}class wT extends ur{constructor(e,t,i,r,s,o,a,l,u,h,p,m){super(null,o,a,l,u,h,r,s,p,m),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class Ene extends wT{constructor(e,t,i,r,s,o){super(e,t,i,s,o),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=vl,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class Tne extends wT{constructor(e,t,i){super(void 0,e[0].width,e[0].height,t,i,zf),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class Mne extends ur{constructor(e,t,i,r,s,o,a,l,u){super(e,t,i,r,s,o,a,l,u),this.isCanvasTexture=!0,this.needsUpdate=!0}}class AO extends ur{constructor(e,t,i=Ff,r,s,o,a=Ds,l=Ds,u,h=_0,p=1){if(h!==_0&&h!==x0)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");const m={width:e,height:t,depth:p};super(m,r,s,o,a,l,h,i,u),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new Qh(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class CO extends ur{constructor(e=null){super(),this.sourceTexture=e,this.isExternalTexture=!0}copy(e){return super.copy(e),this.sourceTexture=e.sourceTexture,this}}class ET extends fn{constructor(e=1,t=1,i=4,r=8,s=1){super(),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:i,radialSegments:r,heightSegments:s},t=Math.max(0,t),i=Math.max(1,Math.floor(i)),r=Math.max(3,Math.floor(r)),s=Math.max(1,Math.floor(s));const o=[],a=[],l=[],u=[],h=t/2,p=Math.PI/2*e,m=t,y=2*p+m,b=i*2+s,x=r+1,S=new ae,_=new ae;for(let T=0;T<=b;T++){let A=0,M=0,C=0,R=0;if(T<=i){const P=T/i,U=P*Math.PI/2;M=-h-e*Math.cos(U),C=e*Math.sin(U),R=-e*Math.cos(U),A=P*p}else if(T<=i+s){const P=(T-i)/s;M=-h+P*t,C=e,R=0,A=p+P*m}else{const P=(T-i-s)/i,U=P*Math.PI/2;M=h+e*Math.sin(U),C=e*Math.cos(U),R=e*Math.sin(U),A=p+m+P*p}const L=Math.max(0,Math.min(1,A/y));let I=0;T===0?I=.5/r:T===b&&(I=-.5/r);for(let P=0;P<=r;P++){const U=P/r,B=U*Math.PI*2,F=Math.sin(B),z=Math.cos(B);_.x=-C*z,_.y=M,_.z=C*F,a.push(_.x,_.y,_.z),S.set(-C*z,R,C*F),S.normalize(),l.push(S.x,S.y,S.z),u.push(U+I,L)}if(T>0){const P=(T-1)*x;for(let U=0;U<r;U++){const B=P+U,F=P+U+1,z=T*x+U,W=T*x+U+1;o.push(B,F,z),o.push(F,W,z)}}}this.setIndex(o),this.setAttribute("position",new Ut(a,3)),this.setAttribute("normal",new Ut(l,3)),this.setAttribute("uv",new Ut(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ET(e.radius,e.height,e.capSegments,e.radialSegments,e.heightSegments)}}class TT extends fn{constructor(e=1,t=32,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},t=Math.max(3,t);const s=[],o=[],a=[],l=[],u=new ae,h=new ot;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let p=0,m=3;p<=t;p++,m+=3){const y=i+p/t*r;u.x=e*Math.cos(y),u.y=e*Math.sin(y),o.push(u.x,u.y,u.z),a.push(0,0,1),h.x=(o[m]/e+1)/2,h.y=(o[m+1]/e+1)/2,l.push(h.x,h.y)}for(let p=1;p<=t;p++)s.push(p,p+1,0);this.setIndex(s),this.setAttribute("position",new Ut(o,3)),this.setAttribute("normal",new Ut(a,3)),this.setAttribute("uv",new Ut(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new TT(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Y0 extends fn{constructor(e=1,t=1,i=1,r=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const u=this;r=Math.floor(r),s=Math.floor(s);const h=[],p=[],m=[],y=[];let b=0;const x=[],S=i/2;let _=0;T(),o===!1&&(e>0&&A(!0),t>0&&A(!1)),this.setIndex(h),this.setAttribute("position",new Ut(p,3)),this.setAttribute("normal",new Ut(m,3)),this.setAttribute("uv",new Ut(y,2));function T(){const M=new ae,C=new ae;let R=0;const L=(t-e)/i;for(let I=0;I<=s;I++){const P=[],U=I/s,B=U*(t-e)+e;for(let F=0;F<=r;F++){const z=F/r,W=z*l+a,X=Math.sin(W),j=Math.cos(W);C.x=B*X,C.y=-U*i+S,C.z=B*j,p.push(C.x,C.y,C.z),M.set(X,L,j).normalize(),m.push(M.x,M.y,M.z),y.push(z,1-U),P.push(b++)}x.push(P)}for(let I=0;I<r;I++)for(let P=0;P<s;P++){const U=x[P][I],B=x[P+1][I],F=x[P+1][I+1],z=x[P][I+1];(e>0||P!==0)&&(h.push(U,B,z),R+=3),(t>0||P!==s-1)&&(h.push(B,F,z),R+=3)}u.addGroup(_,R,0),_+=R}function A(M){const C=b,R=new ot,L=new ae;let I=0;const P=M===!0?e:t,U=M===!0?1:-1;for(let F=1;F<=r;F++)p.push(0,S*U,0),m.push(0,U,0),y.push(.5,.5),b++;const B=b;for(let F=0;F<=r;F++){const W=F/r*l+a,X=Math.cos(W),j=Math.sin(W);L.x=P*j,L.y=S*U,L.z=P*X,p.push(L.x,L.y,L.z),m.push(0,U,0),R.x=X*.5+.5,R.y=j*.5*U+.5,y.push(R.x,R.y),b++}for(let F=0;F<r;F++){const z=C+F,W=B+F;M===!0?h.push(W,W+1,z):h.push(W+1,W,z),I+=3}u.addGroup(_,I,M===!0?1:2),_+=I}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Y0(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class P_ extends Y0{constructor(e=1,t=1,i=32,r=1,s=!1,o=0,a=Math.PI*2){super(0,e,t,i,r,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new P_(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class vd extends fn{constructor(e=[],t=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r};const s=[],o=[];a(r),u(i),h(),this.setAttribute("position",new Ut(s,3)),this.setAttribute("normal",new Ut(s.slice(),3)),this.setAttribute("uv",new Ut(o,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function a(T){const A=new ae,M=new ae,C=new ae;for(let R=0;R<t.length;R+=3)y(t[R+0],A),y(t[R+1],M),y(t[R+2],C),l(A,M,C,T)}function l(T,A,M,C){const R=C+1,L=[];for(let I=0;I<=R;I++){L[I]=[];const P=T.clone().lerp(M,I/R),U=A.clone().lerp(M,I/R),B=R-I;for(let F=0;F<=B;F++)F===0&&I===R?L[I][F]=P:L[I][F]=P.clone().lerp(U,F/B)}for(let I=0;I<R;I++)for(let P=0;P<2*(R-I)-1;P++){const U=Math.floor(P/2);P%2===0?(m(L[I][U+1]),m(L[I+1][U]),m(L[I][U])):(m(L[I][U+1]),m(L[I+1][U+1]),m(L[I+1][U]))}}function u(T){const A=new ae;for(let M=0;M<s.length;M+=3)A.x=s[M+0],A.y=s[M+1],A.z=s[M+2],A.normalize().multiplyScalar(T),s[M+0]=A.x,s[M+1]=A.y,s[M+2]=A.z}function h(){const T=new ae;for(let A=0;A<s.length;A+=3){T.x=s[A+0],T.y=s[A+1],T.z=s[A+2];const M=S(T)/2/Math.PI+.5,C=_(T)/Math.PI+.5;o.push(M,1-C)}b(),p()}function p(){for(let T=0;T<o.length;T+=6){const A=o[T+0],M=o[T+2],C=o[T+4],R=Math.max(A,M,C),L=Math.min(A,M,C);R>.9&&L<.1&&(A<.2&&(o[T+0]+=1),M<.2&&(o[T+2]+=1),C<.2&&(o[T+4]+=1))}}function m(T){s.push(T.x,T.y,T.z)}function y(T,A){const M=T*3;A.x=e[M+0],A.y=e[M+1],A.z=e[M+2]}function b(){const T=new ae,A=new ae,M=new ae,C=new ae,R=new ot,L=new ot,I=new ot;for(let P=0,U=0;P<s.length;P+=9,U+=6){T.set(s[P+0],s[P+1],s[P+2]),A.set(s[P+3],s[P+4],s[P+5]),M.set(s[P+6],s[P+7],s[P+8]),R.set(o[U+0],o[U+1]),L.set(o[U+2],o[U+3]),I.set(o[U+4],o[U+5]),C.copy(T).add(A).add(M).divideScalar(3);const B=S(C);x(R,U+0,T,B),x(L,U+2,A,B),x(I,U+4,M,B)}}function x(T,A,M,C){C<0&&T.x===1&&(o[A]=T.x-1),M.x===0&&M.z===0&&(o[A]=C/2/Math.PI+.5)}function S(T){return Math.atan2(T.z,-T.x)}function _(T){return Math.atan2(-T.y,Math.sqrt(T.x*T.x+T.z*T.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new vd(e.vertices,e.indices,e.radius,e.details)}}class MT extends vd{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new MT(e.radius,e.detail)}}const hS=new ae,dS=new ae,iC=new ae,pS=new sa;class H6 extends fn{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),s=Math.cos(Gp*t),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,u=[0,0,0],h=["a","b","c"],p=new Array(3),m={},y=[];for(let b=0;b<l;b+=3){o?(u[0]=o.getX(b),u[1]=o.getX(b+1),u[2]=o.getX(b+2)):(u[0]=b,u[1]=b+1,u[2]=b+2);const{a:x,b:S,c:_}=pS;if(x.fromBufferAttribute(a,u[0]),S.fromBufferAttribute(a,u[1]),_.fromBufferAttribute(a,u[2]),pS.getNormal(iC),p[0]=`${Math.round(x.x*r)},${Math.round(x.y*r)},${Math.round(x.z*r)}`,p[1]=`${Math.round(S.x*r)},${Math.round(S.y*r)},${Math.round(S.z*r)}`,p[2]=`${Math.round(_.x*r)},${Math.round(_.y*r)},${Math.round(_.z*r)}`,!(p[0]===p[1]||p[1]===p[2]||p[2]===p[0]))for(let T=0;T<3;T++){const A=(T+1)%3,M=p[T],C=p[A],R=pS[h[T]],L=pS[h[A]],I=`${M}_${C}`,P=`${C}_${M}`;P in m&&m[P]?(iC.dot(m[P].normal)<=s&&(y.push(R.x,R.y,R.z),y.push(L.x,L.y,L.z)),m[P]=null):I in m||(m[I]={index0:u[T],index1:u[A],normal:iC.clone()})}}for(const b in m)if(m[b]){const{index0:x,index1:S}=m[b];hS.fromBufferAttribute(a,x),dS.fromBufferAttribute(a,S),y.push(hS.x,hS.y,hS.z),y.push(dS.x,dS.y,dS.z)}this.setAttribute("position",new Ut(y,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class hc{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){console.warn("THREE.Curve: .getPoint() not implemented.")}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),s+=i.distanceTo(r),t.push(s),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t=null){const i=this.getLengths();let r=0;const s=i.length;let o;t?o=t:o=e*i[s-1];let a=0,l=s-1,u;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),u=i[r]-o,u<0)a=r+1;else if(u>0)l=r-1;else{l=r;break}if(r=l,i[r]===o)return r/(s-1);const h=i[r],m=i[r+1]-h,y=(o-h)/m;return(r+y)/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),a=this.getPoint(s),l=t||(o.isVector2?new ot:new ae);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t=!1){const i=new ae,r=[],s=[],o=[],a=new ae,l=new Kt;for(let y=0;y<=e;y++){const b=y/e;r[y]=this.getTangentAt(b,new ae)}s[0]=new ae,o[0]=new ae;let u=Number.MAX_VALUE;const h=Math.abs(r[0].x),p=Math.abs(r[0].y),m=Math.abs(r[0].z);h<=u&&(u=h,i.set(1,0,0)),p<=u&&(u=p,i.set(0,1,0)),m<=u&&i.set(0,0,1),a.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let y=1;y<=e;y++){if(s[y]=s[y-1].clone(),o[y]=o[y-1].clone(),a.crossVectors(r[y-1],r[y]),a.length()>Number.EPSILON){a.normalize();const b=Math.acos(Qt(r[y-1].dot(r[y]),-1,1));s[y].applyMatrix4(l.makeRotationAxis(a,b))}o[y].crossVectors(r[y],s[y])}if(t===!0){let y=Math.acos(Qt(s[0].dot(s[e]),-1,1));y/=e,r[0].dot(a.crossVectors(s[0],s[e]))>0&&(y=-y);for(let b=1;b<=e;b++)s[b].applyMatrix4(l.makeRotationAxis(r[b],y*b)),o[b].crossVectors(r[b],s[b])}return{tangents:r,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class AT extends hc{constructor(e=0,t=0,i=1,r=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t=new ot){const i=t,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(o?s=0:s=r),this.aClockwise===!0&&!o&&(s===r?s=-r:s=s-r);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),u=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const h=Math.cos(this.aRotation),p=Math.sin(this.aRotation),m=l-this.aX,y=u-this.aY;l=m*h-y*p+this.aX,u=m*p+y*h+this.aY}return i.set(l,u)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class j6 extends AT{constructor(e,t,i,r,s,o){super(e,t,i,i,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function RO(){let n=0,e=0,t=0,i=0;function r(s,o,a,l){n=s,e=a,t=-3*s+3*o-2*a-l,i=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,u){r(o,a,u*(a-s),u*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,u,h,p){let m=(o-s)/u-(a-s)/(u+h)+(a-o)/h,y=(a-o)/h-(l-o)/(h+p)+(l-a)/p;m*=h,y*=h,r(o,a,m,y)},calc:function(s){const o=s*s,a=o*s;return n+e*s+t*o+i*a}}}const mS=new ae,rC=new RO,sC=new RO,oC=new RO;class CT extends hc{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new ae){const i=t,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let u,h;this.closed||a>0?u=r[(a-1)%s]:(mS.subVectors(r[0],r[1]).add(r[0]),u=mS);const p=r[a%s],m=r[(a+1)%s];if(this.closed||a+2<s?h=r[(a+2)%s]:(mS.subVectors(r[s-1],r[s-2]).add(r[s-1]),h=mS),this.curveType==="centripetal"||this.curveType==="chordal"){const y=this.curveType==="chordal"?.5:.25;let b=Math.pow(u.distanceToSquared(p),y),x=Math.pow(p.distanceToSquared(m),y),S=Math.pow(m.distanceToSquared(h),y);x<1e-4&&(x=1),b<1e-4&&(b=x),S<1e-4&&(S=x),rC.initNonuniformCatmullRom(u.x,p.x,m.x,h.x,b,x,S),sC.initNonuniformCatmullRom(u.y,p.y,m.y,h.y,b,x,S),oC.initNonuniformCatmullRom(u.z,p.z,m.z,h.z,b,x,S)}else this.curveType==="catmullrom"&&(rC.initCatmullRom(u.x,p.x,m.x,h.x,this.tension),sC.initCatmullRom(u.y,p.y,m.y,h.y,this.tension),oC.initCatmullRom(u.z,p.z,m.z,h.z,this.tension));return i.set(rC.calc(l),sC.calc(l),oC.calc(l)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new ae().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function VU(n,e,t,i,r){const s=(i-e)*.5,o=(r-t)*.5,a=n*n,l=n*a;return(2*t-2*i+s+o)*l+(-3*t+3*i-2*s-o)*a+s*n+t}function Ane(n,e){const t=1-n;return t*t*e}function Cne(n,e){return 2*(1-n)*n*e}function Rne(n,e){return n*n*e}function Lb(n,e,t,i){return Ane(n,e)+Cne(n,t)+Rne(n,i)}function Dne(n,e){const t=1-n;return t*t*t*e}function One(n,e){const t=1-n;return 3*t*t*n*e}function Lne(n,e){return 3*(1-n)*n*n*e}function Pne(n,e){return n*n*n*e}function Pb(n,e,t,i,r){return Dne(n,e)+One(n,t)+Lne(n,i)+Pne(n,r)}class DO extends hc{constructor(e=new ot,t=new ot,i=new ot,r=new ot){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new ot){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(Pb(e,r.x,s.x,o.x,a.x),Pb(e,r.y,s.y,o.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class W6 extends hc{constructor(e=new ae,t=new ae,i=new ae,r=new ae){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new ae){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(Pb(e,r.x,s.x,o.x,a.x),Pb(e,r.y,s.y,o.y,a.y),Pb(e,r.z,s.z,o.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class OO extends hc{constructor(e=new ot,t=new ot){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new ot){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new ot){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class LO extends hc{constructor(e=new ae,t=new ae){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new ae){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new ae){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class PO extends hc{constructor(e=new ot,t=new ot,i=new ot){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new ot){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(Lb(e,r.x,s.x,o.x),Lb(e,r.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class RT extends hc{constructor(e=new ae,t=new ae,i=new ae){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new ae){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(Lb(e,r.x,s.x,o.x),Lb(e,r.y,s.y,o.y),Lb(e,r.z,s.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class IO extends hc{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new ot){const i=t,r=this.points,s=(r.length-1)*e,o=Math.floor(s),a=s-o,l=r[o===0?o:o-1],u=r[o],h=r[o>r.length-2?r.length-1:o+1],p=r[o>r.length-3?r.length-1:o+2];return i.set(VU(a,l.x,u.x,h.x,p.x),VU(a,l.y,u.y,h.y,p.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new ot().fromArray(r))}return this}}var EE=Object.freeze({__proto__:null,ArcCurve:j6,CatmullRomCurve3:CT,CubicBezierCurve:DO,CubicBezierCurve3:W6,EllipseCurve:AT,LineCurve:OO,LineCurve3:LO,QuadraticBezierCurve:PO,QuadraticBezierCurve3:RT,SplineCurve:IO});class X6 extends hc{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const i=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new EE[i](t,e))}return this}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const o=r[s]-i,a=this.curves[s],l=a.getLength(),u=l===0?0:1-o/l;return a.getPointAt(u,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let u=0;u<l.length;u++){const h=l[u];i&&i.equals(h)||(t.push(h),i=h)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(new EE[r.type]().fromJSON(r))}return this}}class TE extends X6{constructor(e){super(),this.type="Path",this.currentPoint=new ot,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new OO(this.currentPoint.clone(),new ot(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const s=new PO(this.currentPoint.clone(),new ot(e,t),new ot(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,s,o){const a=new DO(this.currentPoint.clone(),new ot(e,t),new ot(i,r),new ot(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new IO(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,i,r,s,o),this}absarc(e,t,i,r,s,o){return this.absellipse(e,t,i,i,r,s,o),this}ellipse(e,t,i,r,s,o,a,l){const u=this.currentPoint.x,h=this.currentPoint.y;return this.absellipse(e+u,t+h,i,r,s,o,a,l),this}absellipse(e,t,i,r,s,o,a,l){const u=new AT(e,t,i,r,s,o,a,l);if(this.curves.length>0){const p=u.getPoint(0);p.equals(this.currentPoint)||this.lineTo(p.x,p.y)}this.curves.push(u);const h=u.getPoint(1);return this.currentPoint.copy(h),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class td extends TE{constructor(e){super(e),this.uuid=Ca(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(new TE().fromJSON(r))}return this}}function Ine(n,e,t=2){const i=e&&e.length,r=i?e[0]*t:n.length;let s=q6(n,0,r,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,u;if(i&&(s=Fne(n,e,s,t)),n.length>80*t){a=1/0,l=1/0;let h=-1/0,p=-1/0;for(let m=t;m<r;m+=t){const y=n[m],b=n[m+1];y<a&&(a=y),b<l&&(l=b),y>h&&(h=y),b>p&&(p=b)}u=Math.max(h-a,p-l),u=u!==0?32767/u:0}return s_(s,o,t,a,l,u,0),o}function q6(n,e,t,i,r){let s;if(r===Zne(n,e,t,i)>0)for(let o=e;o<t;o+=i)s=GU(o/i|0,n[o],n[o+1],s);else for(let o=t-i;o>=e;o-=i)s=GU(o/i|0,n[o],n[o+1],s);return s&&M0(s,s.next)&&(a_(s),s=s.next),s}function Jp(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(M0(t,t.next)||or(t.prev,t,t.next)===0)){if(a_(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function s_(n,e,t,i,r,s,o){if(!n)return;!o&&s&&jne(n,i,r,s);let a=n;for(;n.prev!==n.next;){const l=n.prev,u=n.next;if(s?Une(n,i,r,s):Nne(n)){e.push(l.i,n.i,u.i),a_(n),n=u.next,a=u.next;continue}if(n=u,n===a){o?o===1?(n=kne(Jp(n),e),s_(n,e,t,i,r,s,2)):o===2&&zne(n,e,t,i,r,s):s_(Jp(n),e,t,i,r,s,1);break}}}function Nne(n){const e=n.prev,t=n,i=n.next;if(or(e,t,i)>=0)return!1;const r=e.x,s=t.x,o=i.x,a=e.y,l=t.y,u=i.y,h=Math.min(r,s,o),p=Math.min(a,l,u),m=Math.max(r,s,o),y=Math.max(a,l,u);let b=i.next;for(;b!==e;){if(b.x>=h&&b.x<=m&&b.y>=p&&b.y<=y&&hb(r,a,s,l,o,u,b.x,b.y)&&or(b.prev,b,b.next)>=0)return!1;b=b.next}return!0}function Une(n,e,t,i){const r=n.prev,s=n,o=n.next;if(or(r,s,o)>=0)return!1;const a=r.x,l=s.x,u=o.x,h=r.y,p=s.y,m=o.y,y=Math.min(a,l,u),b=Math.min(h,p,m),x=Math.max(a,l,u),S=Math.max(h,p,m),_=_3(y,b,e,t,i),T=_3(x,S,e,t,i);let A=n.prevZ,M=n.nextZ;for(;A&&A.z>=_&&M&&M.z<=T;){if(A.x>=y&&A.x<=x&&A.y>=b&&A.y<=S&&A!==r&&A!==o&&hb(a,h,l,p,u,m,A.x,A.y)&&or(A.prev,A,A.next)>=0||(A=A.prevZ,M.x>=y&&M.x<=x&&M.y>=b&&M.y<=S&&M!==r&&M!==o&&hb(a,h,l,p,u,m,M.x,M.y)&&or(M.prev,M,M.next)>=0))return!1;M=M.nextZ}for(;A&&A.z>=_;){if(A.x>=y&&A.x<=x&&A.y>=b&&A.y<=S&&A!==r&&A!==o&&hb(a,h,l,p,u,m,A.x,A.y)&&or(A.prev,A,A.next)>=0)return!1;A=A.prevZ}for(;M&&M.z<=T;){if(M.x>=y&&M.x<=x&&M.y>=b&&M.y<=S&&M!==r&&M!==o&&hb(a,h,l,p,u,m,M.x,M.y)&&or(M.prev,M,M.next)>=0)return!1;M=M.nextZ}return!0}function kne(n,e){let t=n;do{const i=t.prev,r=t.next.next;!M0(i,r)&&$6(i,t,t.next,r)&&o_(i,r)&&o_(r,i)&&(e.push(i.i,t.i,r.i),a_(t),a_(t.next),t=n=r),t=t.next}while(t!==n);return Jp(t)}function zne(n,e,t,i,r,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&qne(o,a)){let l=Z6(o,a);o=Jp(o,o.next),l=Jp(l,l.next),s_(o,e,t,i,r,s,0),s_(l,e,t,i,r,s,0);return}a=a.next}o=o.next}while(o!==n)}function Fne(n,e,t,i){const r=[];for(let s=0,o=e.length;s<o;s++){const a=e[s]*i,l=s<o-1?e[s+1]*i:n.length,u=q6(n,a,l,i,!1);u===u.next&&(u.steiner=!0),r.push(Xne(u))}r.sort(Bne);for(let s=0;s<r.length;s++)t=Vne(r[s],t);return t}function Bne(n,e){let t=n.x-e.x;if(t===0&&(t=n.y-e.y,t===0)){const i=(n.next.y-n.y)/(n.next.x-n.x),r=(e.next.y-e.y)/(e.next.x-e.x);t=i-r}return t}function Vne(n,e){const t=Gne(n,e);if(!t)return e;const i=Z6(t,n);return Jp(i,i.next),Jp(t,t.next)}function Gne(n,e){let t=e;const i=n.x,r=n.y;let s=-1/0,o;if(M0(n,t))return t;do{if(M0(n,t.next))return t.next;if(r<=t.y&&r>=t.next.y&&t.next.y!==t.y){const p=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(p<=i&&p>s&&(s=p,o=t.x<t.next.x?t:t.next,p===i))return o}t=t.next}while(t!==e);if(!o)return null;const a=o,l=o.x,u=o.y;let h=1/0;t=o;do{if(i>=t.x&&t.x>=l&&i!==t.x&&Y6(r<u?i:s,r,l,u,r<u?s:i,r,t.x,t.y)){const p=Math.abs(r-t.y)/(i-t.x);o_(t,n)&&(p<h||p===h&&(t.x>o.x||t.x===o.x&&Hne(o,t)))&&(o=t,h=p)}t=t.next}while(t!==a);return o}function Hne(n,e){return or(n.prev,n,e.prev)<0&&or(e.next,n,n.next)<0}function jne(n,e,t,i){let r=n;do r.z===0&&(r.z=_3(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,Wne(r)}function Wne(n){let e,t=1;do{let i=n,r;n=null;let s=null;for(e=0;i;){e++;let o=i,a=0;for(let u=0;u<t&&(a++,o=o.nextZ,!!o);u++);let l=t;for(;a>0||l>0&&o;)a!==0&&(l===0||!o||i.z<=o.z)?(r=i,i=i.nextZ,a--):(r=o,o=o.nextZ,l--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;i=o}s.nextZ=null,t*=2}while(e>1);return n}function _3(n,e,t,i,r){return n=(n-t)*r|0,e=(e-i)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function Xne(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function Y6(n,e,t,i,r,s,o,a){return(r-o)*(e-a)>=(n-o)*(s-a)&&(n-o)*(i-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(r-o)*(i-a)}function hb(n,e,t,i,r,s,o,a){return!(n===o&&e===a)&&Y6(n,e,t,i,r,s,o,a)}function qne(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!Yne(n,e)&&(o_(n,e)&&o_(e,n)&&$ne(n,e)&&(or(n.prev,n,e.prev)||or(n,e.prev,e))||M0(n,e)&&or(n.prev,n,n.next)>0&&or(e.prev,e,e.next)>0)}function or(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function M0(n,e){return n.x===e.x&&n.y===e.y}function $6(n,e,t,i){const r=vS(or(n,e,t)),s=vS(or(n,e,i)),o=vS(or(t,i,n)),a=vS(or(t,i,e));return!!(r!==s&&o!==a||r===0&&gS(n,t,e)||s===0&&gS(n,i,e)||o===0&&gS(t,n,i)||a===0&&gS(t,e,i))}function gS(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function vS(n){return n>0?1:n<0?-1:0}function Yne(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&$6(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function o_(n,e){return or(n.prev,n,n.next)<0?or(n,e,n.next)>=0&&or(n,n.prev,e)>=0:or(n,e,n.prev)<0||or(n,n.next,e)<0}function $ne(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function Z6(n,e){const t=x3(n.i,n.x,n.y),i=x3(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function GU(n,e,t,i){const r=x3(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function a_(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function x3(n,e,t){return{i:n,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function Zne(n,e,t,i){let r=0;for(let s=e,o=t-i;s<t;s+=i)r+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return r}class Kne{static triangulate(e,t,i=2){return Ine(e,t,i)}}class oc{static area(e){const t=e.length;let i=0;for(let r=t-1,s=0;s<t;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return i*.5}static isClockWise(e){return oc.area(e)<0}static triangulateShape(e,t){const i=[],r=[],s=[];HU(e),jU(i,e);let o=e.length;t.forEach(HU);for(let l=0;l<t.length;l++)r.push(o),o+=t[l].length,jU(i,t[l]);const a=Kne.triangulate(i,r);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function HU(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function jU(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class DT extends fn{constructor(e=new td([new ot(.5,.5),new ot(-.5,.5),new ot(-.5,-.5),new ot(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let a=0,l=e.length;a<l;a++){const u=e[a];o(u)}this.setAttribute("position",new Ut(r,3)),this.setAttribute("uv",new Ut(s,2)),this.computeVertexNormals();function o(a){const l=[],u=t.curveSegments!==void 0?t.curveSegments:12,h=t.steps!==void 0?t.steps:1,p=t.depth!==void 0?t.depth:1;let m=t.bevelEnabled!==void 0?t.bevelEnabled:!0,y=t.bevelThickness!==void 0?t.bevelThickness:.2,b=t.bevelSize!==void 0?t.bevelSize:y-.1,x=t.bevelOffset!==void 0?t.bevelOffset:0,S=t.bevelSegments!==void 0?t.bevelSegments:3;const _=t.extrudePath,T=t.UVGenerator!==void 0?t.UVGenerator:Qne;let A,M=!1,C,R,L,I;_&&(A=_.getSpacedPoints(h),M=!0,m=!1,C=_.computeFrenetFrames(h,!1),R=new ae,L=new ae,I=new ae),m||(S=0,y=0,b=0,x=0);const P=a.extractPoints(u);let U=P.shape;const B=P.holes;if(!oc.isClockWise(U)){U=U.reverse();for(let me=0,ve=B.length;me<ve;me++){const he=B[me];oc.isClockWise(he)&&(B[me]=he.reverse())}}function z(me){const he=10000000000000001e-36;let Ce=me[0];for(let Re=1;Re<=me.length;Re++){const Le=Re%me.length,Ie=me[Le],be=Ie.x-Ce.x,Je=Ie.y-Ce.y,te=be*be+Je*Je,Z=Math.max(Math.abs(Ie.x),Math.abs(Ie.y),Math.abs(Ce.x),Math.abs(Ce.y)),de=he*Z*Z;if(te<=de){me.splice(Le,1),Re--;continue}Ce=Ie}}z(U),B.forEach(z);const W=B.length,X=U;for(let me=0;me<W;me++){const ve=B[me];U=U.concat(ve)}function j(me,ve,he){return ve||console.error("THREE.ExtrudeGeometry: vec does not exist"),me.clone().addScaledVector(ve,he)}const G=U.length;function K(me,ve,he){let Ce,Re,Le;const Ie=me.x-ve.x,be=me.y-ve.y,Je=he.x-me.x,te=he.y-me.y,Z=Ie*Ie+be*be,de=Ie*te-be*Je;if(Math.abs(de)>Number.EPSILON){const Ne=Math.sqrt(Z),Oe=Math.sqrt(Je*Je+te*te),Ae=ve.x-be/Ne,et=ve.y+Ie/Ne,Ze=he.x-te/Oe,ft=he.y+Je/Oe,dt=((Ze-Ae)*te-(ft-et)*Je)/(Ie*te-be*Je);Ce=Ae+Ie*dt-me.x,Re=et+be*dt-me.y;const Xe=Ce*Ce+Re*Re;if(Xe<=2)return new ot(Ce,Re);Le=Math.sqrt(Xe/2)}else{let Ne=!1;Ie>Number.EPSILON?Je>Number.EPSILON&&(Ne=!0):Ie<-Number.EPSILON?Je<-Number.EPSILON&&(Ne=!0):Math.sign(be)===Math.sign(te)&&(Ne=!0),Ne?(Ce=-be,Re=Ie,Le=Math.sqrt(Z)):(Ce=Ie,Re=be,Le=Math.sqrt(Z/2))}return new ot(Ce/Le,Re/Le)}const J=[];for(let me=0,ve=X.length,he=ve-1,Ce=me+1;me<ve;me++,he++,Ce++)he===ve&&(he=0),Ce===ve&&(Ce=0),J[me]=K(X[me],X[he],X[Ce]);const ee=[];let V,Y=J.concat();for(let me=0,ve=W;me<ve;me++){const he=B[me];V=[];for(let Ce=0,Re=he.length,Le=Re-1,Ie=Ce+1;Ce<Re;Ce++,Le++,Ie++)Le===Re&&(Le=0),Ie===Re&&(Ie=0),V[Ce]=K(he[Ce],he[Le],he[Ie]);ee.push(V),Y=Y.concat(V)}let Q;if(S===0)Q=oc.triangulateShape(X,B);else{const me=[],ve=[];for(let he=0;he<S;he++){const Ce=he/S,Re=y*Math.cos(Ce*Math.PI/2),Le=b*Math.sin(Ce*Math.PI/2)+x;for(let Ie=0,be=X.length;Ie<be;Ie++){const Je=j(X[Ie],J[Ie],Le);Ee(Je.x,Je.y,-Re),Ce===0&&me.push(Je)}for(let Ie=0,be=W;Ie<be;Ie++){const Je=B[Ie];V=ee[Ie];const te=[];for(let Z=0,de=Je.length;Z<de;Z++){const Ne=j(Je[Z],V[Z],Le);Ee(Ne.x,Ne.y,-Re),Ce===0&&te.push(Ne)}Ce===0&&ve.push(te)}}Q=oc.triangulateShape(me,ve)}const re=Q.length,ne=b+x;for(let me=0;me<G;me++){const ve=m?j(U[me],Y[me],ne):U[me];M?(L.copy(C.normals[0]).multiplyScalar(ve.x),R.copy(C.binormals[0]).multiplyScalar(ve.y),I.copy(A[0]).add(L).add(R),Ee(I.x,I.y,I.z)):Ee(ve.x,ve.y,0)}for(let me=1;me<=h;me++)for(let ve=0;ve<G;ve++){const he=m?j(U[ve],Y[ve],ne):U[ve];M?(L.copy(C.normals[me]).multiplyScalar(he.x),R.copy(C.binormals[me]).multiplyScalar(he.y),I.copy(A[me]).add(L).add(R),Ee(I.x,I.y,I.z)):Ee(he.x,he.y,p/h*me)}for(let me=S-1;me>=0;me--){const ve=me/S,he=y*Math.cos(ve*Math.PI/2),Ce=b*Math.sin(ve*Math.PI/2)+x;for(let Re=0,Le=X.length;Re<Le;Re++){const Ie=j(X[Re],J[Re],Ce);Ee(Ie.x,Ie.y,p+he)}for(let Re=0,Le=B.length;Re<Le;Re++){const Ie=B[Re];V=ee[Re];for(let be=0,Je=Ie.length;be<Je;be++){const te=j(Ie[be],V[be],Ce);M?Ee(te.x,te.y+A[h-1].y,A[h-1].x+he):Ee(te.x,te.y,p+he)}}}le(),fe();function le(){const me=r.length/3;if(m){let ve=0,he=G*ve;for(let Ce=0;Ce<re;Ce++){const Re=Q[Ce];Te(Re[2]+he,Re[1]+he,Re[0]+he)}ve=h+S*2,he=G*ve;for(let Ce=0;Ce<re;Ce++){const Re=Q[Ce];Te(Re[0]+he,Re[1]+he,Re[2]+he)}}else{for(let ve=0;ve<re;ve++){const he=Q[ve];Te(he[2],he[1],he[0])}for(let ve=0;ve<re;ve++){const he=Q[ve];Te(he[0]+G*h,he[1]+G*h,he[2]+G*h)}}i.addGroup(me,r.length/3-me,0)}function fe(){const me=r.length/3;let ve=0;pe(X,ve),ve+=X.length;for(let he=0,Ce=B.length;he<Ce;he++){const Re=B[he];pe(Re,ve),ve+=Re.length}i.addGroup(me,r.length/3-me,1)}function pe(me,ve){let he=me.length;for(;--he>=0;){const Ce=he;let Re=he-1;Re<0&&(Re=me.length-1);for(let Le=0,Ie=h+S*2;Le<Ie;Le++){const be=G*Le,Je=G*(Le+1),te=ve+Ce+be,Z=ve+Re+be,de=ve+Re+Je,Ne=ve+Ce+Je;xe(te,Z,de,Ne)}}}function Ee(me,ve,he){l.push(me),l.push(ve),l.push(he)}function Te(me,ve,he){ge(me),ge(ve),ge(he);const Ce=r.length/3,Re=T.generateTopUV(i,r,Ce-3,Ce-2,Ce-1);oe(Re[0]),oe(Re[1]),oe(Re[2])}function xe(me,ve,he,Ce){ge(me),ge(ve),ge(Ce),ge(ve),ge(he),ge(Ce);const Re=r.length/3,Le=T.generateSideWallUV(i,r,Re-6,Re-3,Re-2,Re-1);oe(Le[0]),oe(Le[1]),oe(Le[3]),oe(Le[1]),oe(Le[2]),oe(Le[3])}function ge(me){r.push(l[me*3+0]),r.push(l[me*3+1]),r.push(l[me*3+2])}function oe(me){s.push(me.x),s.push(me.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return Jne(t,i,e)}static fromJSON(e,t){const i=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];i.push(a)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new EE[r.type]().fromJSON(r)),new DT(i,e.options)}}const Qne={generateTopUV:function(n,e,t,i,r){const s=e[t*3],o=e[t*3+1],a=e[i*3],l=e[i*3+1],u=e[r*3],h=e[r*3+1];return[new ot(s,o),new ot(a,l),new ot(u,h)]},generateSideWallUV:function(n,e,t,i,r,s){const o=e[t*3],a=e[t*3+1],l=e[t*3+2],u=e[i*3],h=e[i*3+1],p=e[i*3+2],m=e[r*3],y=e[r*3+1],b=e[r*3+2],x=e[s*3],S=e[s*3+1],_=e[s*3+2];return Math.abs(a-h)<Math.abs(o-u)?[new ot(o,1-l),new ot(u,1-p),new ot(m,1-b),new ot(x,1-_)]:[new ot(a,1-l),new ot(h,1-p),new ot(y,1-b),new ot(S,1-_)]}};function Jne(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){const s=n[i];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class OT extends vd{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new OT(e.radius,e.detail)}}class LT extends fn{constructor(e=[new ot(0,-.5),new ot(.5,0),new ot(0,.5)],t=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=Math.floor(t),r=Qt(r,0,Math.PI*2);const s=[],o=[],a=[],l=[],u=[],h=1/t,p=new ae,m=new ot,y=new ae,b=new ae,x=new ae;let S=0,_=0;for(let T=0;T<=e.length-1;T++)switch(T){case 0:S=e[T+1].x-e[T].x,_=e[T+1].y-e[T].y,y.x=_*1,y.y=-S,y.z=_*0,x.copy(y),y.normalize(),l.push(y.x,y.y,y.z);break;case e.length-1:l.push(x.x,x.y,x.z);break;default:S=e[T+1].x-e[T].x,_=e[T+1].y-e[T].y,y.x=_*1,y.y=-S,y.z=_*0,b.copy(y),y.x+=x.x,y.y+=x.y,y.z+=x.z,y.normalize(),l.push(y.x,y.y,y.z),x.copy(b)}for(let T=0;T<=t;T++){const A=i+T*h*r,M=Math.sin(A),C=Math.cos(A);for(let R=0;R<=e.length-1;R++){p.x=e[R].x*M,p.y=e[R].y,p.z=e[R].x*C,o.push(p.x,p.y,p.z),m.x=T/t,m.y=R/(e.length-1),a.push(m.x,m.y);const L=l[3*R+0]*M,I=l[3*R+1],P=l[3*R+0]*C;u.push(L,I,P)}}for(let T=0;T<t;T++)for(let A=0;A<e.length-1;A++){const M=A+T*e.length,C=M,R=M+e.length,L=M+e.length+1,I=M+1;s.push(C,R,I),s.push(L,I,R)}this.setIndex(s),this.setAttribute("position",new Ut(o,3)),this.setAttribute("uv",new Ut(a,2)),this.setAttribute("normal",new Ut(u,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new LT(e.points,e.segments,e.phiStart,e.phiLength)}}class I_ extends vd{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new I_(e.radius,e.detail)}}class jf extends fn{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,o=t/2,a=Math.floor(i),l=Math.floor(r),u=a+1,h=l+1,p=e/a,m=t/l,y=[],b=[],x=[],S=[];for(let _=0;_<h;_++){const T=_*m-o;for(let A=0;A<u;A++){const M=A*p-s;b.push(M,-T,0),x.push(0,0,1),S.push(A/a),S.push(1-_/l)}}for(let _=0;_<l;_++)for(let T=0;T<a;T++){const A=T+u*_,M=T+u*(_+1),C=T+1+u*(_+1),R=T+1+u*_;y.push(A,M,R),y.push(M,C,R)}this.setIndex(y),this.setAttribute("position",new Ut(b,3)),this.setAttribute("normal",new Ut(x,3)),this.setAttribute("uv",new Ut(S,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new jf(e.width,e.height,e.widthSegments,e.heightSegments)}}class PT extends fn{constructor(e=.5,t=1,i=32,r=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:s,thetaLength:o},i=Math.max(3,i),r=Math.max(1,r);const a=[],l=[],u=[],h=[];let p=e;const m=(t-e)/r,y=new ae,b=new ot;for(let x=0;x<=r;x++){for(let S=0;S<=i;S++){const _=s+S/i*o;y.x=p*Math.cos(_),y.y=p*Math.sin(_),l.push(y.x,y.y,y.z),u.push(0,0,1),b.x=(y.x/t+1)/2,b.y=(y.y/t+1)/2,h.push(b.x,b.y)}p+=m}for(let x=0;x<r;x++){const S=x*(i+1);for(let _=0;_<i;_++){const T=_+S,A=T,M=T+i+1,C=T+i+2,R=T+1;a.push(A,M,R),a.push(M,C,R)}}this.setIndex(a),this.setAttribute("position",new Ut(l,3)),this.setAttribute("normal",new Ut(u,3)),this.setAttribute("uv",new Ut(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new PT(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class IT extends fn{constructor(e=new td([new ot(0,.5),new ot(-.5,-.5),new ot(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],r=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)u(e);else for(let h=0;h<e.length;h++)u(e[h]),this.addGroup(a,l,h),a+=l,l=0;this.setIndex(i),this.setAttribute("position",new Ut(r,3)),this.setAttribute("normal",new Ut(s,3)),this.setAttribute("uv",new Ut(o,2));function u(h){const p=r.length/3,m=h.extractPoints(t);let y=m.shape;const b=m.holes;oc.isClockWise(y)===!1&&(y=y.reverse());for(let S=0,_=b.length;S<_;S++){const T=b[S];oc.isClockWise(T)===!0&&(b[S]=T.reverse())}const x=oc.triangulateShape(y,b);for(let S=0,_=b.length;S<_;S++){const T=b[S];y=y.concat(T)}for(let S=0,_=y.length;S<_;S++){const T=y[S];r.push(T.x,T.y,0),s.push(0,0,1),o.push(T.x,T.y)}for(let S=0,_=x.length;S<_;S++){const T=x[S],A=T[0]+p,M=T[1]+p,C=T[2]+p;i.push(A,M,C),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return eie(t,e)}static fromJSON(e,t){const i=[];for(let r=0,s=e.shapes.length;r<s;r++){const o=t[e.shapes[r]];i.push(o)}return new IT(i,e.curveSegments)}}function eie(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}class N_ extends fn{constructor(e=1,t=32,i=16,r=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const l=Math.min(o+a,Math.PI);let u=0;const h=[],p=new ae,m=new ae,y=[],b=[],x=[],S=[];for(let _=0;_<=i;_++){const T=[],A=_/i;let M=0;_===0&&o===0?M=.5/t:_===i&&l===Math.PI&&(M=-.5/t);for(let C=0;C<=t;C++){const R=C/t;p.x=-e*Math.cos(r+R*s)*Math.sin(o+A*a),p.y=e*Math.cos(o+A*a),p.z=e*Math.sin(r+R*s)*Math.sin(o+A*a),b.push(p.x,p.y,p.z),m.copy(p).normalize(),x.push(m.x,m.y,m.z),S.push(R+M,1-A),T.push(u++)}h.push(T)}for(let _=0;_<i;_++)for(let T=0;T<t;T++){const A=h[_][T+1],M=h[_][T],C=h[_+1][T],R=h[_+1][T+1];(_!==0||o>0)&&y.push(A,M,R),(_!==i-1||l<Math.PI)&&y.push(M,C,R)}this.setIndex(y),this.setAttribute("position",new Ut(b,3)),this.setAttribute("normal",new Ut(x,3)),this.setAttribute("uv",new Ut(S,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new N_(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class NT extends vd{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new NT(e.radius,e.detail)}}class UT extends fn{constructor(e=1,t=.4,i=12,r=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:s},i=Math.floor(i),r=Math.floor(r);const o=[],a=[],l=[],u=[],h=new ae,p=new ae,m=new ae;for(let y=0;y<=i;y++)for(let b=0;b<=r;b++){const x=b/r*s,S=y/i*Math.PI*2;p.x=(e+t*Math.cos(S))*Math.cos(x),p.y=(e+t*Math.cos(S))*Math.sin(x),p.z=t*Math.sin(S),a.push(p.x,p.y,p.z),h.x=e*Math.cos(x),h.y=e*Math.sin(x),m.subVectors(p,h).normalize(),l.push(m.x,m.y,m.z),u.push(b/r),u.push(y/i)}for(let y=1;y<=i;y++)for(let b=1;b<=r;b++){const x=(r+1)*y+b-1,S=(r+1)*(y-1)+b-1,_=(r+1)*(y-1)+b,T=(r+1)*y+b;o.push(x,S,T),o.push(S,_,T)}this.setIndex(o),this.setAttribute("position",new Ut(a,3)),this.setAttribute("normal",new Ut(l,3)),this.setAttribute("uv",new Ut(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new UT(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class kT extends fn{constructor(e=1,t=.4,i=64,r=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:s,q:o},i=Math.floor(i),r=Math.floor(r);const a=[],l=[],u=[],h=[],p=new ae,m=new ae,y=new ae,b=new ae,x=new ae,S=new ae,_=new ae;for(let A=0;A<=i;++A){const M=A/i*s*Math.PI*2;T(M,s,o,e,y),T(M+.01,s,o,e,b),S.subVectors(b,y),_.addVectors(b,y),x.crossVectors(S,_),_.crossVectors(x,S),x.normalize(),_.normalize();for(let C=0;C<=r;++C){const R=C/r*Math.PI*2,L=-t*Math.cos(R),I=t*Math.sin(R);p.x=y.x+(L*_.x+I*x.x),p.y=y.y+(L*_.y+I*x.y),p.z=y.z+(L*_.z+I*x.z),l.push(p.x,p.y,p.z),m.subVectors(p,y).normalize(),u.push(m.x,m.y,m.z),h.push(A/i),h.push(C/r)}}for(let A=1;A<=i;A++)for(let M=1;M<=r;M++){const C=(r+1)*(A-1)+(M-1),R=(r+1)*A+(M-1),L=(r+1)*A+M,I=(r+1)*(A-1)+M;a.push(C,R,I),a.push(R,L,I)}this.setIndex(a),this.setAttribute("position",new Ut(l,3)),this.setAttribute("normal",new Ut(u,3)),this.setAttribute("uv",new Ut(h,2));function T(A,M,C,R,L){const I=Math.cos(A),P=Math.sin(A),U=C/M*A,B=Math.cos(U);L.x=R*(2+B)*.5*I,L.y=R*(2+B)*P*.5,L.z=R*Math.sin(U)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new kT(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class ud extends fn{constructor(e=new RT(new ae(-1,-1,0),new ae(-1,1,0),new ae(1,1,0)),t=64,i=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new ae,l=new ae,u=new ot;let h=new ae;const p=[],m=[],y=[],b=[];x(),this.setIndex(b),this.setAttribute("position",new Ut(p,3)),this.setAttribute("normal",new Ut(m,3)),this.setAttribute("uv",new Ut(y,2));function x(){for(let A=0;A<t;A++)S(A);S(s===!1?t:0),T(),_()}function S(A){h=e.getPointAt(A/t,h);const M=o.normals[A],C=o.binormals[A];for(let R=0;R<=r;R++){const L=R/r*Math.PI*2,I=Math.sin(L),P=-Math.cos(L);l.x=P*M.x+I*C.x,l.y=P*M.y+I*C.y,l.z=P*M.z+I*C.z,l.normalize(),m.push(l.x,l.y,l.z),a.x=h.x+i*l.x,a.y=h.y+i*l.y,a.z=h.z+i*l.z,p.push(a.x,a.y,a.z)}}function _(){for(let A=1;A<=t;A++)for(let M=1;M<=r;M++){const C=(r+1)*(A-1)+(M-1),R=(r+1)*A+(M-1),L=(r+1)*A+M,I=(r+1)*(A-1)+M;b.push(C,R,I),b.push(R,L,I)}}function T(){for(let A=0;A<=t;A++)for(let M=0;M<=r;M++)u.x=A/t,u.y=M/r,y.push(u.x,u.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new ud(new EE[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class K6 extends fn{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,r=new ae,s=new ae;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let u=0,h=l.length;u<h;++u){const p=l[u],m=p.start,y=p.count;for(let b=m,x=m+y;b<x;b+=3)for(let S=0;S<3;S++){const _=a.getX(b+S),T=a.getX(b+(S+1)%3);r.fromBufferAttribute(o,_),s.fromBufferAttribute(o,T),WU(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let u=0;u<3;u++){const h=3*a+u,p=3*a+(u+1)%3;r.fromBufferAttribute(o,h),s.fromBufferAttribute(o,p),WU(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new Ut(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function WU(n,e,t){const i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(r)===!0?!1:(t.add(i),t.add(r),!0)}var XU=Object.freeze({__proto__:null,BoxGeometry:gd,CapsuleGeometry:ET,CircleGeometry:TT,ConeGeometry:P_,CylinderGeometry:Y0,DodecahedronGeometry:MT,EdgesGeometry:H6,ExtrudeGeometry:DT,IcosahedronGeometry:OT,LatheGeometry:LT,OctahedronGeometry:I_,PlaneGeometry:jf,PolyhedronGeometry:vd,RingGeometry:PT,ShapeGeometry:IT,SphereGeometry:N_,TetrahedronGeometry:NT,TorusGeometry:UT,TorusKnotGeometry:kT,TubeGeometry:ud,WireframeGeometry:K6});class Q6 extends to{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new vt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class J6 extends El{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class NO extends to{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new vt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new vt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=md,this.normalScale=new ot(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ro,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class e8 extends NO{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new ot(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Qt(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new vt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new vt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new vt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class t8 extends to{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new vt(16777215),this.specular=new vt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new vt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=md,this.normalScale=new ot(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ro,this.combine=D_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class n8 extends to{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new vt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new vt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=md,this.normalScale=new ot(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class i8 extends to{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=md,this.normalScale=new ot(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class r8 extends to{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new vt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new vt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=md,this.normalScale=new ot(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ro,this.combine=D_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class zT extends to{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=y6,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class FT extends to{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class s8 extends to{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new vt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=md,this.normalScale=new ot(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class o8 extends Oo{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Np(n,e){return!n||n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function a8(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function l8(n){function e(r,s){return n[r]-n[s]}const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i}function S3(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,o=0;o!==i;++s){const a=t[s]*e;for(let l=0;l!==e;++l)r[o++]=n[a+l]}return r}function UO(n,e,t,i){let r=1,s=n[0];for(;s!==void 0&&s[i]===void 0;)s=n[r++];if(s===void 0)return;let o=s[i];if(o!==void 0)if(Array.isArray(o))do o=s[i],o!==void 0&&(e.push(s.time),t.push(...o)),s=n[r++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[i],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[r++];while(s!==void 0);else do o=s[i],o!==void 0&&(e.push(s.time),t.push(o)),s=n[r++];while(s!==void 0)}function tie(n,e,t,i,r=30){const s=n.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const u=s.tracks[l],h=u.getValueSize(),p=[],m=[];for(let y=0;y<u.times.length;++y){const b=u.times[y]*r;if(!(b<t||b>=i)){p.push(u.times[y]);for(let x=0;x<h;++x)m.push(u.values[y*h+x])}}p.length!==0&&(u.times=Np(p,u.times.constructor),u.values=Np(m,u.values.constructor),o.push(u))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function nie(n,e=0,t=n,i=30){i<=0&&(i=30);const r=t.tracks.length,s=e/i;for(let o=0;o<r;++o){const a=t.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const u=n.tracks.find(function(_){return _.name===a.name&&_.ValueTypeName===l});if(u===void 0)continue;let h=0;const p=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=p/3);let m=0;const y=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(m=y/3);const b=a.times.length-1;let x;if(s<=a.times[0]){const _=h,T=p-h;x=a.values.slice(_,T)}else if(s>=a.times[b]){const _=b*p+h,T=_+p-h;x=a.values.slice(_,T)}else{const _=a.createInterpolant(),T=h,A=p-h;_.evaluate(s),x=_.resultBuffer.slice(T,A)}l==="quaternion"&&new Os().fromArray(x).normalize().conjugate().toArray(x);const S=u.times.length;for(let _=0;_<S;++_){const T=_*y+m;if(l==="quaternion")Os.multiplyQuaternionsFlat(u.values,T,x,0,u.values,T);else{const A=y-m*2;for(let M=0;M<A;++M)u.values[T+M]-=x[M]}}}return n.blendMode=gO,n}class iie{static convertArray(e,t){return Np(e,t)}static isTypedArray(e){return a8(e)}static getKeyframeOrder(e){return l8(e)}static sortedArray(e,t,i){return S3(e,t,i)}static flattenJSON(e,t,i,r){UO(e,t,i,r)}static subclip(e,t,i,r,s=30){return tie(e,t,i,r,s)}static makeClipAdditive(e,t=0,i=e,r=30){return nie(e,t,i,r)}}class U_{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=i+2;;){if(r===void 0){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(s=r,r=t[++i],e<r)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(i=2,s=a);for(let l=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(r=s,s=t[--i-1],e>=s)break t}o=i,i=0;break n}break e}for(;i<o;){const a=i+o>>>1;e<t[a]?o=a:i=a+1}if(r=t[i],s=t[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=i[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class c8 extends U_{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Pp,endingEnd:Pp}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],l=r[o];if(a===void 0)switch(this.getSettings_().endingStart){case Ip:s=e,a=2*t-i;break;case e_:s=r.length-2,a=t+r[s]-r[s+1];break;default:s=e,a=i}if(l===void 0)switch(this.getSettings_().endingEnd){case Ip:o=e,l=2*i-t;break;case e_:o=1,l=i+r[1]-r[0];break;default:o=e-1,l=t}const u=(i-t)*.5,h=this.valueSize;this._weightPrev=u/(t-a),this._weightNext=u/(l-i),this._offsetPrev=s*h,this._offsetNext=o*h}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,h=this._offsetPrev,p=this._offsetNext,m=this._weightPrev,y=this._weightNext,b=(i-t)/(r-t),x=b*b,S=x*b,_=-m*S+2*m*x-m*b,T=(1+m)*S+(-1.5-2*m)*x+(-.5+m)*b+1,A=(-1-y)*S+(1.5+y)*x+.5*b,M=y*S-y*x;for(let C=0;C!==a;++C)s[C]=_*o[h+C]+T*o[u+C]+A*o[l+C]+M*o[p+C];return s}}class kO extends U_{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,h=(i-t)/(r-t),p=1-h;for(let m=0;m!==a;++m)s[m]=o[u+m]*p+o[l+m]*h;return s}}class u8 extends U_{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class Tl{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Np(t,this.TimeBufferType),this.values=Np(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:Np(e.times,Array),values:Np(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new u8(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new kO(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new c8(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Jb:t=this.InterpolantFactoryMethodDiscrete;break;case _E:t=this.InterpolantFactoryMethodLinear;break;case iw:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Jb;case this.InterpolantFactoryMethodLinear:return _E;case this.InterpolantFactoryMethodSmooth:return iw}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&&i[s]<e;)++s;for(;o!==-1&&i[o]>t;)--o;if(++o,s!==0||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=i.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=i[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(r!==void 0&&a8(r))for(let a=0,l=r.length;a!==l;++a){const u=r[a];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,u),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===iw,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const u=e[a],h=e[a+1];if(u!==h&&(a!==1||u!==e[0]))if(r)l=!0;else{const p=a*i,m=p-i,y=p+i;for(let b=0;b!==i;++b){const x=t[p+b];if(x!==t[m+b]||x!==t[y+b]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const p=a*i,m=o*i;for(let y=0;y!==i;++y)t[m+y]=t[p+y]}++o}}if(s>0){e[o]=e[s];for(let a=s*i,l=o*i,u=0;u!==i;++u)t[l+u]=t[a+u];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}Tl.prototype.ValueTypeName="";Tl.prototype.TimeBufferType=Float32Array;Tl.prototype.ValueBufferType=Float32Array;Tl.prototype.DefaultInterpolation=_E;class rm extends Tl{constructor(e,t,i){super(e,t,i)}}rm.prototype.ValueTypeName="bool";rm.prototype.ValueBufferType=Array;rm.prototype.DefaultInterpolation=Jb;rm.prototype.InterpolantFactoryMethodLinear=void 0;rm.prototype.InterpolantFactoryMethodSmooth=void 0;class zO extends Tl{constructor(e,t,i,r){super(e,t,i,r)}}zO.prototype.ValueTypeName="color";class l_ extends Tl{constructor(e,t,i,r){super(e,t,i,r)}}l_.prototype.ValueTypeName="number";class f8 extends U_{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(i-t)/(r-t);let u=e*a;for(let h=u+a;u!==h;u+=4)Os.slerpFlat(s,0,o,u-a,o,u,l);return s}}class k_ extends Tl{constructor(e,t,i,r){super(e,t,i,r)}InterpolantFactoryMethodLinear(e){return new f8(this.times,this.values,this.getValueSize(),e)}}k_.prototype.ValueTypeName="quaternion";k_.prototype.InterpolantFactoryMethodSmooth=void 0;class sm extends Tl{constructor(e,t,i){super(e,t,i)}}sm.prototype.ValueTypeName="string";sm.prototype.ValueBufferType=Array;sm.prototype.DefaultInterpolation=Jb;sm.prototype.InterpolantFactoryMethodLinear=void 0;sm.prototype.InterpolantFactoryMethodSmooth=void 0;class c_ extends Tl{constructor(e,t,i,r){super(e,t,i,r)}}c_.prototype.ValueTypeName="vector";class u_{constructor(e="",t=-1,i=[],r=dT){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=Ca(),this.userData={},this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let o=0,a=i.length;o!==a;++o)t.push(sie(i[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s.userData=JSON.parse(e.userData||"{}"),s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode,userData:JSON.stringify(e.userData)};for(let s=0,o=i.length;s!==o;++s)t.push(Tl.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],u=[];l.push((a+s-1)%s,a,(a+1)%s),u.push(0,1,0);const h=l8(l);l=S3(l,1,h),u=S3(u,1,h),!r&&l[0]===0&&(l.push(s),u.push(u[0])),o.push(new l_(".morphTargetInfluences["+t[a].name+"]",l,u).scale(1/i))}return new this(e,-1,o)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const u=e[a],h=u.name.match(s);if(h&&h.length>1){const p=h[1];let m=r[p];m||(r[p]=m=[]),m.push(u)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],t,i));return o}static parseAnimation(e,t){if(console.warn("THREE.AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(p,m,y,b,x){if(y.length!==0){const S=[],_=[];UO(y,S,_,b),S.length!==0&&x.push(new p(m,S,_))}},r=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const u=e.hierarchy||[];for(let p=0;p<u.length;p++){const m=u[p].keys;if(!(!m||m.length===0))if(m[0].morphTargets){const y={};let b;for(b=0;b<m.length;b++)if(m[b].morphTargets)for(let x=0;x<m[b].morphTargets.length;x++)y[m[b].morphTargets[x]]=-1;for(const x in y){const S=[],_=[];for(let T=0;T!==m[b].morphTargets.length;++T){const A=m[b];S.push(A.time),_.push(A.morphTarget===x?1:0)}r.push(new l_(".morphTargetInfluence["+x+"]",S,_))}l=y.length*o}else{const y=".bones["+t[p].name+"]";i(c_,y+".position",m,"pos",r),i(k_,y+".quaternion",m,"rot",r),i(c_,y+".scale",m,"scl",r)}}return r.length===0?null:new this(s,l,r,a)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,r=e.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let i=0;i<this.tracks.length;i++)e.push(this.tracks[i].clone());const t=new this.constructor(this.name,this.duration,e,this.blendMode);return t.userData=JSON.parse(JSON.stringify(this.userData)),t}toJSON(){return this.constructor.toJSON(this)}}function rie(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return l_;case"vector":case"vector2":case"vector3":case"vector4":return c_;case"color":return zO;case"quaternion":return k_;case"bool":case"boolean":return rm;case"string":return sm}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function sie(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=rie(n.type);if(n.times===void 0){const t=[],i=[];UO(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const au={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class FO{constructor(e,t,i){const r=this;let s=!1,o=0,a=0,l;const u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.abortController=new AbortController,this.itemStart=function(h){a++,s===!1&&r.onStart!==void 0&&r.onStart(h,o,a),s=!0},this.itemEnd=function(h){o++,r.onProgress!==void 0&&r.onProgress(h,o,a),o===a&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(h){r.onError!==void 0&&r.onError(h)},this.resolveURL=function(h){return l?l(h):h},this.setURLModifier=function(h){return l=h,this},this.addHandler=function(h,p){return u.push(h,p),this},this.removeHandler=function(h){const p=u.indexOf(h);return p!==-1&&u.splice(p,2),this},this.getHandler=function(h){for(let p=0,m=u.length;p<m;p+=2){const y=u[p],b=u[p+1];if(y.global&&(y.lastIndex=0),y.test(h))return b}return null},this.abort=function(){return this.abortController.abort(),this.abortController=new AbortController,this}}}const h8=new FO;class ua{constructor(e){this.manager=e!==void 0?e:h8,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,s){i.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}abort(){return this}}ua.DEFAULT_MATERIAL_NAME="__DEFAULT";const ff={};class oie extends Error{constructor(e,t){super(e),this.response=t}}class Bf extends ua{constructor(e){super(e),this.mimeType="",this.responseType="",this._abortController=new AbortController}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=au.get(`file:${e}`);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(ff[e]!==void 0){ff[e].push({onLoad:t,onProgress:i,onError:r});return}ff[e]=[],ff[e].push({onLoad:t,onProgress:i,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin",signal:typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal}),a=this.mimeType,l=this.responseType;fetch(o).then(u=>{if(u.status===200||u.status===0){if(u.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||u.body===void 0||u.body.getReader===void 0)return u;const h=ff[e],p=u.body.getReader(),m=u.headers.get("X-File-Size")||u.headers.get("Content-Length"),y=m?parseInt(m):0,b=y!==0;let x=0;const S=new ReadableStream({start(_){T();function T(){p.read().then(({done:A,value:M})=>{if(A)_.close();else{x+=M.byteLength;const C=new ProgressEvent("progress",{lengthComputable:b,loaded:x,total:y});for(let R=0,L=h.length;R<L;R++){const I=h[R];I.onProgress&&I.onProgress(C)}_.enqueue(M),T()}},A=>{_.error(A)})}}});return new Response(S)}else throw new oie(`fetch for "${u.url}" responded with ${u.status}: ${u.statusText}`,u)}).then(u=>{switch(l){case"arraybuffer":return u.arrayBuffer();case"blob":return u.blob();case"document":return u.text().then(h=>new DOMParser().parseFromString(h,a));case"json":return u.json();default:if(a==="")return u.text();{const p=/charset="?([^;"\s]*)"?/i.exec(a),m=p&&p[1]?p[1].toLowerCase():void 0,y=new TextDecoder(m);return u.arrayBuffer().then(b=>y.decode(b))}}}).then(u=>{au.add(`file:${e}`,u);const h=ff[e];delete ff[e];for(let p=0,m=h.length;p<m;p++){const y=h[p];y.onLoad&&y.onLoad(u)}}).catch(u=>{const h=ff[e];if(h===void 0)throw this.manager.itemError(e),u;delete ff[e];for(let p=0,m=h.length;p<m;p++){const y=h[p];y.onError&&y.onError(u)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}class aie extends ua{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Bf(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t=[];for(let i=0;i<e.length;i++){const r=u_.parse(e[i]);t.push(r)}return t}}class lie extends ua{constructor(e){super(e)}load(e,t,i,r){const s=this,o=[],a=new wT,l=new Bf(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let u=0;function h(p){l.load(e[p],function(m){const y=s.parse(m,!0);o[p]={width:y.width,height:y.height,format:y.format,mipmaps:y.mipmaps},u+=1,u===6&&(y.mipmapCount===1&&(a.minFilter=br),a.image=o,a.format=y.format,a.needsUpdate=!0,t&&t(a))},i,r)}if(Array.isArray(e))for(let p=0,m=e.length;p<m;++p)h(p);else l.load(e,function(p){const m=s.parse(p,!0);if(m.isCubemap){const y=m.mipmaps.length/m.mipmapCount;for(let b=0;b<y;b++){o[b]={mipmaps:[]};for(let x=0;x<m.mipmapCount;x++)o[b].mipmaps.push(m.mipmaps[b*m.mipmapCount+x]),o[b].format=m.format,o[b].width=m.width,o[b].height=m.height}a.image=o}else a.image.width=m.width,a.image.height=m.height,a.mipmaps=m.mipmaps;m.mipmapCount===1&&(a.minFilter=br),a.format=m.format,a.needsUpdate=!0,t&&t(a)},i,r);return a}}const Rg=new WeakMap;class f_ extends ua{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=au.get(`image:${e}`);if(o!==void 0){if(o.complete===!0)s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0);else{let p=Rg.get(o);p===void 0&&(p=[],Rg.set(o,p)),p.push({onLoad:t,onError:r})}return o}const a=i_("img");function l(){h(),t&&t(this);const p=Rg.get(this)||[];for(let m=0;m<p.length;m++){const y=p[m];y.onLoad&&y.onLoad(this)}Rg.delete(this),s.manager.itemEnd(e)}function u(p){h(),r&&r(p),au.remove(`image:${e}`);const m=Rg.get(this)||[];for(let y=0;y<m.length;y++){const b=m[y];b.onError&&b.onError(p)}Rg.delete(this),s.manager.itemError(e),s.manager.itemEnd(e)}function h(){a.removeEventListener("load",l,!1),a.removeEventListener("error",u,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",u,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),au.add(`image:${e}`,a),s.manager.itemStart(e),a.src=e,a}}class cie extends ua{constructor(e){super(e)}load(e,t,i,r){const s=new L_;s.colorSpace=Ks;const o=new f_(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(u){o.load(e[u],function(h){s.images[u]=h,a++,a===6&&(s.needsUpdate=!0,t&&t(s))},void 0,r)}for(let u=0;u<e.length;++u)l(u);return s}}class uie extends ua{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new hu,a=new Bf(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){let u;try{u=s.parse(l)}catch(h){if(r!==void 0)r(h);else{console.error(h);return}}u.image!==void 0?o.image=u.image:u.data!==void 0&&(o.image.width=u.width,o.image.height=u.height,o.image.data=u.data),o.wrapS=u.wrapS!==void 0?u.wrapS:vl,o.wrapT=u.wrapT!==void 0?u.wrapT:vl,o.magFilter=u.magFilter!==void 0?u.magFilter:br,o.minFilter=u.minFilter!==void 0?u.minFilter:br,o.anisotropy=u.anisotropy!==void 0?u.anisotropy:1,u.colorSpace!==void 0&&(o.colorSpace=u.colorSpace),u.flipY!==void 0&&(o.flipY=u.flipY),u.format!==void 0&&(o.format=u.format),u.type!==void 0&&(o.type=u.type),u.mipmaps!==void 0&&(o.mipmaps=u.mipmaps,o.minFilter=ou),u.mipmapCount===1&&(o.minFilter=br),u.generateMipmaps!==void 0&&(o.generateMipmaps=u.generateMipmaps),o.needsUpdate=!0,t&&t(o,u)},i,r),o}}class d8 extends ua{constructor(e){super(e)}load(e,t,i,r){const s=new ur,o=new f_(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},i,r),s}}class yd extends Qn{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new vt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}class p8 extends yd{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Qn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new vt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const aC=new Kt,qU=new ae,YU=new ae;class BO{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new ot(512,512),this.mapType=wl,this.map=null,this.mapPass=null,this.matrix=new Kt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new im,this._frameExtents=new ot(1,1),this._viewportCount=1,this._viewports=[new Vn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;qU.setFromMatrixPosition(e.matrixWorld),t.position.copy(qU),YU.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(YU),t.updateMatrixWorld(),aC.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(aC,t.coordinateSystem,t.reversedDepth),t.reversedDepth?i.set(.5,0,0,.5,0,.5,0,.5,0,0,1,0,0,0,0,1):i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(aC)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class fie extends BO{constructor(){super(new Fr(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1,this.aspect=1}updateMatrices(e){const t=this.camera,i=w0*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height*this.aspect,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class m8 extends yd{constructor(e,t,i=0,r=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Qn.DEFAULT_UP),this.updateMatrix(),this.target=new Qn,this.distance=i,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new fie}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const $U=new Kt,zy=new ae,lC=new ae;class hie extends BO{constructor(){super(new Fr(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new ot(4,2),this._viewportCount=6,this._viewports=[new Vn(2,1,1,1),new Vn(0,1,1,1),new Vn(3,1,1,1),new Vn(1,1,1,1),new Vn(3,0,1,1),new Vn(1,0,1,1)],this._cubeDirections=[new ae(1,0,0),new ae(-1,0,0),new ae(0,0,1),new ae(0,0,-1),new ae(0,1,0),new ae(0,-1,0)],this._cubeUps=[new ae(0,1,0),new ae(0,1,0),new ae(0,1,0),new ae(0,1,0),new ae(0,0,1),new ae(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),zy.setFromMatrixPosition(e.matrixWorld),i.position.copy(zy),lC.copy(i.position),lC.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(lC),i.updateMatrixWorld(),r.makeTranslation(-zy.x,-zy.y,-zy.z),$U.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix($U,i.coordinateSystem,i.reversedDepth)}}class g8 extends yd{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new hie}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class om extends gT{constructor(e=-1,t=1,i=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,o=i+e,a=r+t,l=r-t;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,h=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=u*this.view.offsetX,o=s+u*this.view.width,a-=h*this.view.offsetY,l=a-h*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class die extends BO{constructor(){super(new om(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class v8 extends yd{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Qn.DEFAULT_UP),this.updateMatrix(),this.target=new Qn,this.shadow=new die}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class y8 extends yd{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class b8 extends yd{constructor(e,t,i=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class _8{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new ae)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*i),t.addScaledVector(o[4],1.092548*(i*r)),t.addScaledVector(o[5],1.092548*(r*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(i*s)),t.addScaledVector(o[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*r),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*i),t.addScaledVector(o[4],2*.429043*i*r),t.addScaledVector(o[5],2*.429043*r*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*i*s),t.addScaledVector(o[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const i=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*i*s,t[8]=.546274*(i*i-r*r)}}class x8 extends yd{constructor(e=new _8,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class BT extends ua{constructor(e){super(e),this.textures={}}load(e,t,i,r){const s=this,o=new Bf(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t=this.textures;function i(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const r=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new vt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(r.dispersion=e.dispersion),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(r.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(r.depthFunc=e.depthFunc),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(r.blendSrc=e.blendSrc),e.blendDst!==void 0&&(r.blendDst=e.blendDst),e.blendEquation!==void 0&&(r.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(r.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(r.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(r.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&r.blendColor!==void 0&&r.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(r.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==void 0&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(r.uniforms[s]={},o.type){case"t":r.uniforms[s].value=i(o.value);break;case"c":r.uniforms[s].value=new vt().setHex(o.value);break;case"v2":r.uniforms[s].value=new ot().fromArray(o.value);break;case"v3":r.uniforms[s].value=new ae().fromArray(o.value);break;case"v4":r.uniforms[s].value=new Vn().fromArray(o.value);break;case"m3":r.uniforms[s].value=new cn().fromArray(o.value);break;case"m4":r.uniforms[s].value=new Kt().fromArray(o.value);break;default:r.uniforms[s].value=o.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new ot().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapRotation!==void 0&&r.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new ot().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=i(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return BT.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:Q6,SpriteMaterial:EO,RawShaderMaterial:J6,ShaderMaterial:El,PointsMaterial:MO,MeshPhysicalMaterial:e8,MeshStandardMaterial:NO,MeshPhongMaterial:t8,MeshToonMaterial:n8,MeshNormalMaterial:i8,MeshLambertMaterial:r8,MeshDepthMaterial:zT,MeshDistanceMaterial:FT,MeshBasicMaterial:Hf,MeshMatcapMaterial:s8,LineDashedMaterial:o8,LineBasicMaterial:Oo,Material:to};return new t[e]}}class w3{static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class VO extends fn{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class S8 extends ua{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Bf(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t={},i={};function r(y,b){if(t[b]!==void 0)return t[b];const S=y.interleavedBuffers[b],_=s(y,S.buffer),T=e0(S.type,_),A=new _T(T,S.stride);return A.uuid=S.uuid,t[b]=A,A}function s(y,b){if(i[b]!==void 0)return i[b];const S=y.arrayBuffers[b],_=new Uint32Array(S).buffer;return i[b]=_,_}const o=e.isInstancedBufferGeometry?new VO:new fn,a=e.data.index;if(a!==void 0){const y=e0(a.type,a.array);o.setIndex(new ai(y,1))}const l=e.data.attributes;for(const y in l){const b=l[y];let x;if(b.isInterleavedBufferAttribute){const S=r(e.data,b.data);x=new Kp(S,b.itemSize,b.offset,b.normalized)}else{const S=e0(b.type,b.array),_=b.isInstancedBufferAttribute?Qp:ai;x=new _(S,b.itemSize,b.normalized)}b.name!==void 0&&(x.name=b.name),b.usage!==void 0&&x.setUsage(b.usage),o.setAttribute(y,x)}const u=e.data.morphAttributes;if(u)for(const y in u){const b=u[y],x=[];for(let S=0,_=b.length;S<_;S++){const T=b[S];let A;if(T.isInterleavedBufferAttribute){const M=r(e.data,T.data);A=new Kp(M,T.itemSize,T.offset,T.normalized)}else{const M=e0(T.type,T.array);A=new ai(M,T.itemSize,T.normalized)}T.name!==void 0&&(A.name=T.name),x.push(A)}o.morphAttributes[y]=x}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const p=e.data.groups||e.data.drawcalls||e.data.offsets;if(p!==void 0)for(let y=0,b=p.length;y!==b;++y){const x=p[y];o.addGroup(x.start,x.count,x.materialIndex)}const m=e.data.boundingSphere;return m!==void 0&&(o.boundingSphere=new ts().fromJSON(m)),e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class pie extends ua{constructor(e){super(e)}load(e,t,i,r){const s=this,o=this.path===""?w3.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new Bf(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let u=null;try{u=JSON.parse(l)}catch(p){r!==void 0&&r(p),console.error("THREE:ObjectLoader: Can't parse "+e+".",p.message);return}const h=u.metadata;if(h===void 0||h.type===void 0||h.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(u,t)},i,r)}async loadAsync(e,t){const i=this,r=this.path===""?w3.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new Bf(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(a)}parse(e,t){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),o=this.parseImages(e.images,function(){t!==void 0&&t(u)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),u=this.parseObject(e.object,s,l,a,i),h=this.parseSkeletons(e.skeletons,u);if(this.bindSkeletons(u,h),this.bindLightTargets(u),t!==void 0){let p=!1;for(const m in o)if(o[m].data instanceof HTMLImageElement){p=!0;break}p===!1&&t(u)}return u}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,r,a,o,t),u=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,u),this.bindLightTargets(l),l}parseShapes(e){const t={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const s=new td().fromJSON(e[i]);t[s.uuid]=s}return t}parseSkeletons(e,t){const i={},r={};if(t.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new xT().fromJSON(e[s],r);i[a.uuid]=a}return i}parseGeometries(e,t){const i={};if(e!==void 0){const r=new S8;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(l);break;default:l.type in XU?a=XU[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),i[l.uuid]=a}}return i}parseMaterials(e,t){const i={},r={};if(e!==void 0){const s=new BT;s.setTextures(t);for(let o=0,a=e.length;o<a;o++){const l=e[o];i[l.uuid]===void 0&&(i[l.uuid]=s.parse(l)),r[l.uuid]=i[l.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],s=u_.parse(r);t[s.uuid]=s}return t}parseImages(e,t){const i=this,r={};let s;function o(l){return i.manager.itemStart(l),s.load(l,function(){i.manager.itemEnd(l)},void 0,function(){i.manager.itemError(l),i.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const u=l,h=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:i.resourcePath+u;return o(h)}else return l.data?{data:e0(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new FO(t);s=new f_(l),s.setCrossOrigin(this.crossOrigin);for(let u=0,h=e.length;u<h;u++){const p=e[u],m=p.url;if(Array.isArray(m)){const y=[];for(let b=0,x=m.length;b<x;b++){const S=m[b],_=a(S);_!==null&&(_ instanceof HTMLImageElement?y.push(_):y.push(new hu(_.data,_.width,_.height)))}r[p.uuid]=new Qh(y)}else{const y=a(p.url);r[p.uuid]=new Qh(y)}}}return r}async parseImagesAsync(e){const t=this,i={};let r;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await r.loadAsync(l)}else return o.data?{data:e0(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){r=new f_(this.manager),r.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],u=l.url;if(Array.isArray(u)){const h=[];for(let p=0,m=u.length;p<m;p++){const y=u[p],b=await s(y);b!==null&&(b instanceof HTMLImageElement?h.push(b):h.push(new hu(b.data,b.width,b.height)))}i[l.uuid]=new Qh(h)}else{const h=await s(l.url);i[l.uuid]=new Qh(h)}}}return i}parseTextures(e,t){function i(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const r={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=t[a.image],u=l.data;let h;Array.isArray(u)?(h=new L_,u.length===6&&(h.needsUpdate=!0)):(u&&u.data?h=new hu:h=new ur,u&&(h.needsUpdate=!0)),h.source=l,h.uuid=a.uuid,a.name!==void 0&&(h.name=a.name),a.mapping!==void 0&&(h.mapping=i(a.mapping,mie)),a.channel!==void 0&&(h.channel=a.channel),a.offset!==void 0&&h.offset.fromArray(a.offset),a.repeat!==void 0&&h.repeat.fromArray(a.repeat),a.center!==void 0&&h.center.fromArray(a.center),a.rotation!==void 0&&(h.rotation=a.rotation),a.wrap!==void 0&&(h.wrapS=i(a.wrap[0],ZU),h.wrapT=i(a.wrap[1],ZU)),a.format!==void 0&&(h.format=a.format),a.internalFormat!==void 0&&(h.internalFormat=a.internalFormat),a.type!==void 0&&(h.type=a.type),a.colorSpace!==void 0&&(h.colorSpace=a.colorSpace),a.minFilter!==void 0&&(h.minFilter=i(a.minFilter,KU)),a.magFilter!==void 0&&(h.magFilter=i(a.magFilter,KU)),a.anisotropy!==void 0&&(h.anisotropy=a.anisotropy),a.flipY!==void 0&&(h.flipY=a.flipY),a.generateMipmaps!==void 0&&(h.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(h.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(h.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(h.compareFunction=a.compareFunction),a.userData!==void 0&&(h.userData=a.userData),r[a.uuid]=h}return r}parseObject(e,t,i,r,s){let o;function a(m){return t[m]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",m),t[m]}function l(m){if(m!==void 0){if(Array.isArray(m)){const y=[];for(let b=0,x=m.length;b<x;b++){const S=m[b];i[S]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",S),y.push(i[S])}return y}return i[m]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",m),i[m]}}function u(m){return r[m]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",m),r[m]}let h,p;switch(e.type){case"Scene":o=new bT,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new vt(e.background):o.background=u(e.background)),e.environment!==void 0&&(o.environment=u(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new yT(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new vT(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&o.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(o.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&o.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":o=new Fr(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new om(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new y8(e.color,e.intensity);break;case"DirectionalLight":o=new v8(e.color,e.intensity),o.target=e.target||"";break;case"PointLight":o=new g8(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new b8(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new m8(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),o.target=e.target||"";break;case"HemisphereLight":o=new p8(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new x8().fromJSON(e);break;case"SkinnedMesh":h=a(e.geometry),p=l(e.material),o=new k6(h,p),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":h=a(e.geometry),p=l(e.material),o=new Pi(h,p);break;case"InstancedMesh":h=a(e.geometry),p=l(e.material);const m=e.count,y=e.instanceMatrix,b=e.instanceColor;o=new z6(h,p,m),o.instanceMatrix=new Qp(new Float32Array(y.array),16),b!==void 0&&(o.instanceColor=new Qp(new Float32Array(b.array),b.itemSize));break;case"BatchedMesh":h=a(e.geometry),p=l(e.material),o=new F6(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,p),o.geometry=h,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._geometryInfo=e.geometryInfo.map(x=>{let S=null,_=null;return x.boundingBox!==void 0&&(S=new Vr().fromJSON(x.boundingBox)),x.boundingSphere!==void 0&&(_=new ts().fromJSON(x.boundingSphere)),{...x,boundingBox:S,boundingSphere:_}}),o._instanceInfo=e.instanceInfo,o._availableInstanceIds=e._availableInstanceIds,o._availableGeometryIds=e._availableGeometryIds,o._nextIndexStart=e.nextIndexStart,o._nextVertexStart=e.nextVertexStart,o._geometryCount=e.geometryCount,o._maxInstanceCount=e.maxInstanceCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._matricesTexture=u(e.matricesTexture.uuid),o._indirectTexture=u(e.indirectTexture.uuid),e.colorsTexture!==void 0&&(o._colorsTexture=u(e.colorsTexture.uuid)),e.boundingSphere!==void 0&&(o.boundingSphere=new ts().fromJSON(e.boundingSphere)),e.boundingBox!==void 0&&(o.boundingBox=new Vr().fromJSON(e.boundingBox));break;case"LOD":o=new U6;break;case"Line":o=new cd(a(e.geometry),l(e.material));break;case"LineLoop":o=new B6(a(e.geometry),l(e.material));break;case"LineSegments":o=new bu(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new V6(a(e.geometry),l(e.material));break;case"Sprite":o=new N6(l(e.material));break;case"Group":o=new t0;break;case"Bone":o=new TO;break;default:o=new Qn}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(o.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const m=e.children;for(let y=0;y<m.length;y++)o.add(this.parseObject(m[y],t,i,r,s))}if(e.animations!==void 0){const m=e.animations;for(let y=0;y<m.length;y++){const b=m[y];o.animations.push(s[b])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const m=e.levels;for(let y=0;y<m.length;y++){const b=m[y],x=o.getObjectByProperty("uuid",b.object);x!==void 0&&o.addLevel(x,b.distance,b.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=t[i.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const i=t.target,r=e.getObjectByProperty("uuid",i);r!==void 0?t.target=r:t.target=new Qn}})}}const mie={UVMapping:oT,CubeReflectionMapping:zf,CubeRefractionMapping:ad,EquirectangularReflectionMapping:$b,EquirectangularRefractionMapping:Zb,CubeUVReflectionMapping:W0},ZU={RepeatWrapping:Kb,ClampToEdgeWrapping:vl,MirroredRepeatWrapping:Qb},KU={NearestFilter:Ds,NearestMipmapNearestFilter:lO,NearestMipmapLinearFilter:Jg,LinearFilter:br,LinearMipmapNearestFilter:Mb,LinearMipmapLinearFilter:ou},cC=new WeakMap;class gie extends ua{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"},this._abortController=new AbortController}setOptions(e){return this.options=e,this}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=au.get(`image-bitmap:${e}`);if(o!==void 0){if(s.manager.itemStart(e),o.then){o.then(u=>{if(cC.has(o)===!0)r&&r(cC.get(o)),s.manager.itemError(e),s.manager.itemEnd(e);else return t&&t(u),s.manager.itemEnd(e),u});return}return setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o}const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader,a.signal=typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal;const l=fetch(e,a).then(function(u){return u.blob()}).then(function(u){return createImageBitmap(u,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(u){return au.add(`image-bitmap:${e}`,u),t&&t(u),s.manager.itemEnd(e),u}).catch(function(u){r&&r(u),cC.set(l,u),au.remove(`image-bitmap:${e}`),s.manager.itemError(e),s.manager.itemEnd(e)});au.add(`image-bitmap:${e}`,l),s.manager.itemStart(e)}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}let yS;class GO{static getContext(){return yS===void 0&&(yS=new(window.AudioContext||window.webkitAudioContext)),yS}static setContext(e){yS=e}}class vie extends ua{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Bf(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const u=l.slice(0);GO.getContext().decodeAudioData(u,function(p){t(p)}).catch(a)}catch(u){a(u)}},i,r);function a(l){r?r(l):console.error(l),s.manager.itemError(e)}}}const QU=new Kt,JU=new Kt,lp=new Kt;class yie{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Fr,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Fr,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,lp.copy(e.projectionMatrix);const r=t.eyeSep/2,s=r*t.near/t.focus,o=t.near*Math.tan(Gp*t.fov*.5)/t.zoom;let a,l;JU.elements[12]=-r,QU.elements[12]=r,a=-o*t.aspect+s,l=o*t.aspect+s,lp.elements[0]=2*t.near/(l-a),lp.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(lp),a=-o*t.aspect-s,l=o*t.aspect-s,lp.elements[0]=2*t.near/(l-a),lp.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(lp)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(JU),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(QU)}}class w8 extends Fr{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}class HO{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=performance.now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=performance.now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}const cp=new ae,uC=new Os,bie=new ae,up=new ae,fp=new ae;class _ie extends Qn{constructor(){super(),this.type="AudioListener",this.context=GO.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new HO}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(cp,uC,bie),up.set(0,0,-1).applyQuaternion(uC),fp.set(0,1,0).applyQuaternion(uC),t.positionX){const i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(cp.x,i),t.positionY.linearRampToValueAtTime(cp.y,i),t.positionZ.linearRampToValueAtTime(cp.z,i),t.forwardX.linearRampToValueAtTime(up.x,i),t.forwardY.linearRampToValueAtTime(up.y,i),t.forwardZ.linearRampToValueAtTime(up.z,i),t.upX.linearRampToValueAtTime(fp.x,i),t.upY.linearRampToValueAtTime(fp.y,i),t.upZ.linearRampToValueAtTime(fp.z,i)}else t.setPosition(cp.x,cp.y,cp.z),t.setOrientation(up.x,up.y,up.z,fp.x,fp.y,fp.z)}}class E8 extends Qn{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),e.sourceType!=="buffer"?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const hp=new ae,ek=new Os,xie=new ae,dp=new ae;class Sie extends E8{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(hp,ek,xie),dp.set(0,0,1).applyQuaternion(ek);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(hp.x,i),t.positionY.linearRampToValueAtTime(hp.y,i),t.positionZ.linearRampToValueAtTime(hp.z,i),t.orientationX.linearRampToValueAtTime(dp.x,i),t.orientationY.linearRampToValueAtTime(dp.y,i),t.orientationZ.linearRampToValueAtTime(dp.z,i)}else t.setPosition(hp.x,hp.y,hp.z),t.setOrientation(dp.x,dp.y,dp.z)}}class wie{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class T8{constructor(e,t,i){this.binding=e,this.valueSize=i;let r,s,o;switch(t){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,s=e*r+r;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==r;++a)i[s+a]=i[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(i,s,0,a,r)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(i,r,l,1-s,t)}o>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let l=t,u=t+t;l!==u;++l)if(i[l]!==i[l+t]){a.setValue(i,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(t,r);for(let s=i,o=r;s!==o;++s)t[s]=t[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,s){if(r>=.5)for(let o=0;o!==s;++o)e[t+o]=e[i+o]}_slerp(e,t,i,r){Os.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,s){const o=this._workIndex*s;Os.multiplyQuaternionsFlat(e,o,e,t,e,i),Os.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,i,r,s){const o=1-r;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[i+a]*r}}_lerpAdditive(e,t,i,r,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[i+o]*r}}}const jO="\\[\\]\\.:\\/",Eie=new RegExp("["+jO+"]","g"),WO="[^"+jO+"]",Tie="[^"+jO.replace("\\.","")+"]",Mie=/((?:WC+[\/:])*)/.source.replace("WC",WO),Aie=/(WCOD+)?/.source.replace("WCOD",Tie),Cie=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",WO),Rie=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",WO),Die=new RegExp("^"+Mie+Aie+Cie+Rie+"$"),Oie=["material","materials","bones","map"];class Lie{constructor(e,t,i){const r=i||Kn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class Kn{constructor(e,t,i){this.path=t,this.parsedPath=i||Kn.parseTrackName(t),this.node=Kn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new Kn.Composite(e,t,i):new Kn(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Eie,"")}static parseTrackName(e){const t=Die.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=i.nodeName.substring(r+1);Oie.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const l=i(a.children);if(l)return l}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)e[t++]=i[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=Kn.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let u=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let h=0;h<e.length;h++)if(e[h].name===u){u=h;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(u!==void 0){if(e[u]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[u]}}const o=e[r];if(o===void 0){const u=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+r+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?a=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Kn.Composite=Lie;Kn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Kn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Kn.prototype.GetterByBindingType=[Kn.prototype._getValue_direct,Kn.prototype._getValue_array,Kn.prototype._getValue_arrayElement,Kn.prototype._getValue_toArray];Kn.prototype.SetterByBindingTypeAndVersioning=[[Kn.prototype._setValue_direct,Kn.prototype._setValue_direct_setNeedsUpdate,Kn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Kn.prototype._setValue_array,Kn.prototype._setValue_array_setNeedsUpdate,Kn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Kn.prototype._setValue_arrayElement,Kn.prototype._setValue_arrayElement_setNeedsUpdate,Kn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Kn.prototype._setValue_fromArray,Kn.prototype._setValue_fromArray_setNeedsUpdate,Kn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Pie{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Ca(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,r=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,u=this.nCachedObjects_;for(let h=0,p=arguments.length;h!==p;++h){const m=arguments[h],y=m.uuid;let b=t[y];if(b===void 0){b=l++,t[y]=b,e.push(m);for(let x=0,S=o;x!==S;++x)s[x].push(new Kn(m,i[x],r[x]))}else if(b<u){a=e[b];const x=--u,S=e[x];t[S.uuid]=b,e[b]=S,t[y]=x,e[x]=m;for(let _=0,T=o;_!==T;++_){const A=s[_],M=A[x];let C=A[b];A[b]=M,C===void 0&&(C=new Kn(m,i[_],r[_])),A[x]=C}}else e[b]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=u}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],u=l.uuid,h=t[u];if(h!==void 0&&h>=s){const p=s++,m=e[p];t[m.uuid]=h,e[h]=m,t[u]=p,e[p]=l;for(let y=0,b=r;y!==b;++y){const x=i[y],S=x[p],_=x[h];x[h]=S,x[p]=_}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const u=arguments[a],h=u.uuid,p=t[h];if(p!==void 0)if(delete t[h],p<s){const m=--s,y=e[m],b=--o,x=e[b];t[y.uuid]=p,e[p]=y,t[x.uuid]=m,e[m]=x,e.pop();for(let S=0,_=r;S!==_;++S){const T=i[S],A=T[m],M=T[b];T[p]=A,T[m]=M,T.pop()}}else{const m=--o,y=e[m];m>0&&(t[y.uuid]=p),e[p]=y,e.pop();for(let b=0,x=r;b!==x;++b){const S=i[b];S[p]=S[m],S.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const i=this._bindingsIndicesByPath;let r=i[e];const s=this._bindings;if(r!==void 0)return s[r];const o=this._paths,a=this._parsedPaths,l=this._objects,u=l.length,h=this.nCachedObjects_,p=new Array(u);r=s.length,i[e]=r,o.push(e),a.push(t),s.push(p);for(let m=h,y=l.length;m!==y;++m){const b=l[m];p[m]=new Kn(b,e,t)}return p}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const r=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],u=e[a];t[u]=i,o[i]=l,o.pop(),s[i]=s[a],s.pop(),r[i]=r[a],r.pop()}}}class M8{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:Pp,endingEnd:Pp};for(let u=0;u!==o;++u){const h=s[u].createInterpolant(null);a[u]=h,h.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=g6,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i=!1){if(e.fadeOut(t),this.fadeIn(t),i===!0){const r=this._clip.duration,s=e._clip.duration,o=s/r,a=r/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,i=!1){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,s=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,u=a.sampleValues;return l[0]=s,l[1]=s+i,u[0]=e/o,u[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*i;l<0||i===0?t=0:(this._startTime=null,t=i*l)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,u=this._propertyBindings;switch(this.blendMode){case gO:for(let h=0,p=l.length;h!==p;++h)l[h].evaluate(o),u[h].accumulateAdditive(a);break;case dT:default:for(let h=0,p=l.length;h!==p;++h)l[h].evaluate(o),u[h].accumulate(r,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const o=i===v6;if(e===0)return s===-1?r:o&&(s&1)===1?t-r:r;if(i===m6){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),r>=t||r<0){const a=Math.floor(r/t);r-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const u=e<0;this._setEndings(u,!u,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(o&&(s&1)===1)return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=Ip,r.endingEnd=Ip):(e?r.endingStart=this.zeroSlopeAtStart?Ip:Pp:r.endingStart=e_,t?r.endingEnd=this.zeroSlopeAtEnd?Ip:Pp:r.endingEnd=e_)}_scheduleFading(e,t,i){const r=this._mixer,s=r.time;let o=this._weightInterpolant;o===null&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=i,this}}const Iie=new Float32Array(1);class Nie extends yu{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,o=e._propertyBindings,a=e._interpolants,l=i.uuid,u=this._bindingsByRootAndName;let h=u[l];h===void 0&&(h={},u[l]=h);for(let p=0;p!==s;++p){const m=r[p],y=m.name;let b=h[y];if(b!==void 0)++b.referenceCount,o[p]=b;else{if(b=o[p],b!==void 0){b._cacheIndex===null&&(++b.referenceCount,this._addInactiveBinding(b,l,y));continue}const x=t&&t._propertyBindings[p].binding.parsedPath;b=new T8(Kn.create(i,y,x),m.ValueTypeName,m.getValueSize()),++b.referenceCount,this._addInactiveBinding(b,l,y),o[p]=b}a[p].resultBuffer=b.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,u=l[l.length-1],h=e._byClipCacheIndex;u._byClipCacheIndex=h,l[h]=u,l.pop(),e._byClipCacheIndex=null;const p=a.actionByRoot,m=(e._localRoot||this._root).uuid;delete p[m],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[t];o===void 0&&(o={},r[t]=o),o[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,o=this._bindingsByRootAndName,a=o[r],l=t[t.length-1],u=e._cacheIndex;l._cacheIndex=u,t[u]=l,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new kO(new Float32Array(2),new Float32Array(2),1,Iie),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=i,t[i]=s}clipAction(e,t,i){const r=t||this._root,s=r.uuid;let o=typeof e=="string"?u_.findByName(r,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let u=null;if(i===void 0&&(o!==null?i=o.blendMode:i=dT),l!==void 0){const p=l.actionByRoot[s];if(p!==void 0&&p.blendMode===i)return p;u=l.knownActions[0],o===null&&(o=u._clip)}if(o===null)return null;const h=new M8(this,o,t,i);return this._bindAction(h,u),this._addInactiveAction(h,a,s),h}existingAction(e,t){const i=t||this._root,r=i.uuid,s=typeof e=="string"?u_.findByName(i,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,r=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let u=0;u!==i;++u)t[u]._update(r,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let u=0;u!==l;++u)a[u].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const u=o[a];this._deactivateAction(u);const h=u._cacheIndex,p=t[t.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,p._cacheIndex=h,t[h]=p,t.pop(),this._removeInactiveBindingsForAction(u)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const o in i){const a=i[o].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const r=this._bindingsByRootAndName,s=r[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class Uie extends _O{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isRenderTarget3D=!0,this.depth=i,this.texture=new mT(null,e,t,i),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}}class XO{constructor(e){this.value=e}clone(){return new XO(this.value.clone===void 0?this.value:this.value.clone())}}let kie=0;class zie extends yu{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:kie++}),this.name="",this.usage=n_,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let i=0,r=t.length;i<r;i++){const s=Array.isArray(t[i])?t[i]:[t[i]];for(let o=0;o<s.length;o++)this.uniforms.push(s[o].clone())}return this}clone(){return new this.constructor().copy(this)}}class Fie extends _T{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class Bie{constructor(e,t,i,r,s,o=!1){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=r,this.count=s,this.normalized=o,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const tk=new Kt;class qO{constructor(e,t,i=0,r=1/0){this.ray=new q0(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new E0,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return tk.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(tk),this}intersectObject(e,t=!0,i=[]){return E3(e,this,i,t),i.sort(nk),i}intersectObjects(e,t=!0,i=[]){for(let r=0,s=e.length;r<s;r++)E3(e[r],this,i,t);return i.sort(nk),i}}function nk(n,e){return n.distance-e.distance}function E3(n,e,t,i){let r=!0;if(n.layers.test(e.layers)&&n.raycast(e,t)===!1&&(r=!1),r===!0&&i===!0){const s=n.children;for(let o=0,a=s.length;o<a;o++)E3(s[o],e,t,!0)}}let Vie=class{constructor(){this._previousTime=0,this._currentTime=0,this._startTime=performance.now(),this._delta=0,this._elapsed=0,this._timescale=1,this._document=null,this._pageVisibilityHandler=null}connect(e){this._document=e,e.hidden!==void 0&&(this._pageVisibilityHandler=Gie.bind(this),e.addEventListener("visibilitychange",this._pageVisibilityHandler,!1))}disconnect(){this._pageVisibilityHandler!==null&&(this._document.removeEventListener("visibilitychange",this._pageVisibilityHandler),this._pageVisibilityHandler=null),this._document=null}getDelta(){return this._delta/1e3}getElapsed(){return this._elapsed/1e3}getTimescale(){return this._timescale}setTimescale(e){return this._timescale=e,this}reset(){return this._currentTime=performance.now()-this._startTime,this}dispose(){this.disconnect()}update(e){return this._pageVisibilityHandler!==null&&this._document.hidden===!0?this._delta=0:(this._previousTime=this._currentTime,this._currentTime=(e!==void 0?e:performance.now())-this._startTime,this._delta=(this._currentTime-this._previousTime)*this._timescale,this._elapsed+=this._delta),this}};function Gie(){this._document.hidden===!1&&this.reset()}class A8{constructor(e=1,t=0,i=0){this.radius=e,this.phi=t,this.theta=i}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Qt(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(Qt(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class Hie{constructor(e=1,t=0,i=0){this.radius=e,this.theta=t,this.y=i}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}class YO{constructor(e,t,i,r){YO.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,i,r)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let i=0;i<4;i++)this.elements[i]=e[i+t];return this}set(e,t,i,r){const s=this.elements;return s[0]=e,s[2]=t,s[1]=i,s[3]=r,this}}const ik=new ot;class jie{constructor(e=new ot(1/0,1/0),t=new ot(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=ik.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,ik).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const rk=new ae,bS=new ae,Dg=new ae,Og=new ae,fC=new ae,Wie=new ae,Xie=new ae;class qie{constructor(e=new ae,t=new ae){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){rk.subVectors(e,this.start),bS.subVectors(this.end,this.start);const i=bS.dot(bS);let s=bS.dot(rk)/i;return t&&(s=Qt(s,0,1)),s}closestPointToPoint(e,t,i){const r=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(r).add(this.start)}distanceSqToLine3(e,t=Wie,i=Xie){const r=10000000000000001e-32;let s,o;const a=this.start,l=e.start,u=this.end,h=e.end;Dg.subVectors(u,a),Og.subVectors(h,l),fC.subVectors(a,l);const p=Dg.dot(Dg),m=Og.dot(Og),y=Og.dot(fC);if(p<=r&&m<=r)return t.copy(a),i.copy(l),t.sub(i),t.dot(t);if(p<=r)s=0,o=y/m,o=Qt(o,0,1);else{const b=Dg.dot(fC);if(m<=r)o=0,s=Qt(-b/p,0,1);else{const x=Dg.dot(Og),S=p*m-x*x;S!==0?s=Qt((x*y-b*m)/S,0,1):s=0,o=(x*s+y)/m,o<0?(o=0,s=Qt(-b/p,0,1)):o>1&&(o=1,s=Qt((x-b)/p,0,1))}}return t.copy(a).add(Dg.multiplyScalar(s)),i.copy(l).add(Og.multiplyScalar(o)),t.sub(i),t.dot(t)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const sk=new ae;class Yie extends Qn{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const i=new fn,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const u=o/l*Math.PI*2,h=a/l*Math.PI*2;r.push(Math.cos(u),Math.sin(u),1,Math.cos(h),Math.sin(h),1)}i.setAttribute("position",new Ut(r,3));const s=new Oo({fog:!1,toneMapped:!1});this.cone=new bu(i,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),sk.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(sk),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Vh=new ae,_S=new Kt,hC=new Kt;class $ie extends bu{constructor(e){const t=C8(e),i=new fn,r=[],s=[];for(let u=0;u<t.length;u++){const h=t[u];h.parent&&h.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(0,0,0),s.push(0,0,0))}i.setAttribute("position",new Ut(r,3)),i.setAttribute("color",new Ut(s,3));const o=new Oo({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,o),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;const a=new vt(255),l=new vt(65280);this.setColors(a,l)}updateMatrixWorld(e){const t=this.bones,i=this.geometry,r=i.getAttribute("position");hC.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(_S.multiplyMatrices(hC,a.matrixWorld),Vh.setFromMatrixPosition(_S),r.setXYZ(o,Vh.x,Vh.y,Vh.z),_S.multiplyMatrices(hC,a.parent.matrixWorld),Vh.setFromMatrixPosition(_S),r.setXYZ(o+1,Vh.x,Vh.y,Vh.z),o+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}setColors(e,t){const r=this.geometry.getAttribute("color");for(let s=0;s<r.count;s+=2)r.setXYZ(s,e.r,e.g,e.b),r.setXYZ(s+1,t.r,t.g,t.b);return r.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}function C8(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push(...C8(n.children[t]));return e}class Zie extends Pi{constructor(e,t,i){const r=new N_(t,4,2),s=new Hf({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const Kie=new ae,ok=new vt,ak=new vt;class Qie extends Qn{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const r=new I_(t);r.rotateY(Math.PI*.5),this.material=new Hf({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),o=new Float32Array(s.count*3);r.setAttribute("color",new ai(o,3)),this.add(new Pi(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");ok.copy(this.light.color),ak.copy(this.light.groundColor);for(let i=0,r=t.count;i<r;i++){const s=i<r/2?ok:ak;t.setXYZ(i,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(Kie.setFromMatrixPosition(this.light.matrixWorld).negate())}}class Jie extends bu{constructor(e=10,t=10,i=4473924,r=8947848){i=new vt(i),r=new vt(r);const s=t/2,o=e/t,a=e/2,l=[],u=[];for(let m=0,y=0,b=-a;m<=t;m++,b+=o){l.push(-a,0,b,a,0,b),l.push(b,0,-a,b,0,a);const x=m===s?i:r;x.toArray(u,y),y+=3,x.toArray(u,y),y+=3,x.toArray(u,y),y+=3,x.toArray(u,y),y+=3}const h=new fn;h.setAttribute("position",new Ut(l,3)),h.setAttribute("color",new Ut(u,3));const p=new Oo({vertexColors:!0,toneMapped:!1});super(h,p),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class ere extends bu{constructor(e=10,t=16,i=8,r=64,s=4473924,o=8947848){s=new vt(s),o=new vt(o);const a=[],l=[];if(t>1)for(let p=0;p<t;p++){const m=p/t*(Math.PI*2),y=Math.sin(m)*e,b=Math.cos(m)*e;a.push(0,0,0),a.push(y,0,b);const x=p&1?s:o;l.push(x.r,x.g,x.b),l.push(x.r,x.g,x.b)}for(let p=0;p<i;p++){const m=p&1?s:o,y=e-e/i*p;for(let b=0;b<r;b++){let x=b/r*(Math.PI*2),S=Math.sin(x)*y,_=Math.cos(x)*y;a.push(S,0,_),l.push(m.r,m.g,m.b),x=(b+1)/r*(Math.PI*2),S=Math.sin(x)*y,_=Math.cos(x)*y,a.push(S,0,_),l.push(m.r,m.g,m.b)}}const u=new fn;u.setAttribute("position",new Ut(a,3)),u.setAttribute("color",new Ut(l,3));const h=new Oo({vertexColors:!0,toneMapped:!1});super(u,h),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const lk=new ae,xS=new ae,ck=new ae;class tre extends Qn{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new fn;r.setAttribute("position",new Ut([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new Oo({fog:!1,toneMapped:!1});this.lightPlane=new cd(r,s),this.add(this.lightPlane),r=new fn,r.setAttribute("position",new Ut([0,0,0,0,0,1],3)),this.targetLine=new cd(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),lk.setFromMatrixPosition(this.light.matrixWorld),xS.setFromMatrixPosition(this.light.target.matrixWorld),ck.subVectors(xS,lk),this.lightPlane.lookAt(xS),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(xS),this.targetLine.scale.z=ck.length()}}const SS=new ae,gr=new gT;class nre extends bu{constructor(e){const t=new fn,i=new Oo({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(b,x){l(b),l(x)}function l(b){r.push(0,0,0),s.push(0,0,0),o[b]===void 0&&(o[b]=[]),o[b].push(r.length/3-1)}t.setAttribute("position",new Ut(r,3)),t.setAttribute("color",new Ut(s,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const u=new vt(16755200),h=new vt(16711680),p=new vt(43775),m=new vt(16777215),y=new vt(3355443);this.setColors(u,h,p,m,y)}setColors(e,t,i,r,s){const a=this.geometry.getAttribute("color");return a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,i.r,i.g,i.b),a.setXYZ(33,i.r,i.g,i.b),a.setXYZ(34,i.r,i.g,i.b),a.setXYZ(35,i.r,i.g,i.b),a.setXYZ(36,i.r,i.g,i.b),a.setXYZ(37,i.r,i.g,i.b),a.setXYZ(38,r.r,r.g,r.b),a.setXYZ(39,r.r,r.g,r.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0,this}update(){const e=this.geometry,t=this.pointMap,i=1,r=1;let s,o;if(gr.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),this.camera.reversedDepth===!0)s=1,o=0;else if(this.camera.coordinateSystem===Ma)s=-1,o=1;else if(this.camera.coordinateSystem===S0)s=0,o=1;else throw new Error("THREE.CameraHelper.update(): Invalid coordinate system: "+this.camera.coordinateSystem);Mr("c",t,e,gr,0,0,s),Mr("t",t,e,gr,0,0,o),Mr("n1",t,e,gr,-i,-r,s),Mr("n2",t,e,gr,i,-r,s),Mr("n3",t,e,gr,-i,r,s),Mr("n4",t,e,gr,i,r,s),Mr("f1",t,e,gr,-i,-r,o),Mr("f2",t,e,gr,i,-r,o),Mr("f3",t,e,gr,-i,r,o),Mr("f4",t,e,gr,i,r,o),Mr("u1",t,e,gr,i*.7,r*1.1,s),Mr("u2",t,e,gr,-i*.7,r*1.1,s),Mr("u3",t,e,gr,0,r*2,s),Mr("cf1",t,e,gr,-i,0,o),Mr("cf2",t,e,gr,i,0,o),Mr("cf3",t,e,gr,0,-r,o),Mr("cf4",t,e,gr,0,r,o),Mr("cn1",t,e,gr,-i,0,s),Mr("cn2",t,e,gr,i,0,s),Mr("cn3",t,e,gr,0,-r,s),Mr("cn4",t,e,gr,0,r,s),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Mr(n,e,t,i,r,s,o){SS.set(r,s,o).unproject(i);const a=e[n];if(a!==void 0){const l=t.getAttribute("position");for(let u=0,h=a.length;u<h;u++)l.setXYZ(a[u],SS.x,SS.y,SS.z)}}const wS=new Vr;class ire extends bu{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),s=new fn;s.setIndex(new ai(i,1)),s.setAttribute("position",new ai(r,3)),super(s,new Oo({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&wS.setFromObject(this.object),wS.isEmpty())return;const e=wS.min,t=wS.max,i=this.geometry.attributes.position,r=i.array;r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=e.x,r[4]=t.y,r[5]=t.z,r[6]=e.x,r[7]=e.y,r[8]=t.z,r[9]=t.x,r[10]=e.y,r[11]=t.z,r[12]=t.x,r[13]=t.y,r[14]=e.z,r[15]=e.x,r[16]=t.y,r[17]=e.z,r[18]=e.x,r[19]=e.y,r[20]=e.z,r[21]=t.x,r[22]=e.y,r[23]=e.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class rre extends bu{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new fn;s.setIndex(new ai(i,1)),s.setAttribute("position",new Ut(r,3)),super(s,new Oo({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class sre extends cd{constructor(e,t=1,i=16776960){const r=i,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new fn;o.setAttribute("position",new Ut(s,3)),o.computeBoundingSphere(),super(o,new Oo({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new fn;l.setAttribute("position",new Ut(a,3)),l.computeBoundingSphere(),this.add(new Pi(l,new Hf({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const uk=new ae;let ES,dC;class ore extends Qn{constructor(e=new ae(0,0,1),t=new ae(0,0,0),i=1,r=16776960,s=i*.2,o=s*.2){super(),this.type="ArrowHelper",ES===void 0&&(ES=new fn,ES.setAttribute("position",new Ut([0,0,0,0,1,0],3)),dC=new P_(.5,1,5,1),dC.translate(0,-.5,0)),this.position.copy(t),this.line=new cd(ES,new Oo({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Pi(dC,new Hf({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{uk.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(uk,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class are extends bu{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new fn;r.setAttribute("position",new Ut(t,3)),r.setAttribute("color",new Ut(i,3));const s=new Oo({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,t,i){const r=new vt,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(i),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class lre{constructor(){this.type="ShapePath",this.color=new vt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new TE,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,r){return this.currentPath.quadraticCurveTo(e,t,i,r),this}bezierCurveTo(e,t,i,r,s,o){return this.currentPath.bezierCurveTo(e,t,i,r,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(_){const T=[];for(let A=0,M=_.length;A<M;A++){const C=_[A],R=new td;R.curves=C.curves,T.push(R)}return T}function i(_,T){const A=T.length;let M=!1;for(let C=A-1,R=0;R<A;C=R++){let L=T[C],I=T[R],P=I.x-L.x,U=I.y-L.y;if(Math.abs(U)>Number.EPSILON){if(U<0&&(L=T[R],P=-P,I=T[C],U=-U),_.y<L.y||_.y>I.y)continue;if(_.y===L.y){if(_.x===L.x)return!0}else{const B=U*(_.x-L.x)-P*(_.y-L.y);if(B===0)return!0;if(B<0)continue;M=!M}}else{if(_.y!==L.y)continue;if(I.x<=_.x&&_.x<=L.x||L.x<=_.x&&_.x<=I.x)return!0}}return M}const r=oc.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const u=[];if(s.length===1)return a=s[0],l=new td,l.curves=a.curves,u.push(l),u;let h=!r(s[0].getPoints());h=e?!h:h;const p=[],m=[];let y=[],b=0,x;m[b]=void 0,y[b]=[];for(let _=0,T=s.length;_<T;_++)a=s[_],x=a.getPoints(),o=r(x),o=e?!o:o,o?(!h&&m[b]&&b++,m[b]={s:new td,p:x},m[b].s.curves=a.curves,h&&b++,y[b]=[]):y[b].push({h:a,p:x[0]});if(!m[0])return t(s);if(m.length>1){let _=!1,T=0;for(let A=0,M=m.length;A<M;A++)p[A]=[];for(let A=0,M=m.length;A<M;A++){const C=y[A];for(let R=0;R<C.length;R++){const L=C[R];let I=!0;for(let P=0;P<m.length;P++)i(L.p,m[P].p)&&(A!==P&&T++,I?(I=!1,p[P].push(L)):_=!0);I&&p[A].push(L)}}T>0&&_===!1&&(y=p)}let S;for(let _=0,T=m.length;_<T;_++){l=m[_].s,u.push(l),S=y[_];for(let A=0,M=S.length;A<M;A++)l.holes.push(S[A].h)}return u}}class cre extends yu{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){console.warn("THREE.Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}}function ure(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2):(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0),n}function fre(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0):(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2),n}function hre(n){return n.repeat.x=1,n.repeat.y=1,n.offset.x=0,n.offset.y=0,n}function T3(n,e,t,i){const r=dre(i);switch(t){case dO:return n*e;case uT:return n*e/r.components*r.byteLength;case O_:return n*e/r.components*r.byteLength;case mO:return n*e*2/r.components*r.byteLength;case fT:return n*e*2/r.components*r.byteLength;case pO:return n*e*3/r.components*r.byteLength;case eo:return n*e*4/r.components*r.byteLength;case hT:return n*e*4/r.components*r.byteLength;case Ab:case Cb:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case Rb:case Db:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case qw:case $w:return Math.max(n,16)*Math.max(e,8)/4;case Xw:case Yw:return Math.max(n,8)*Math.max(e,8)/2;case Zw:case Kw:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case Qw:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case Jw:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case eE:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case tE:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case nE:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case iE:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case rE:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case sE:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case oE:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case aE:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case lE:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case cE:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case uE:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case fE:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case hE:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case dE:case pE:case mE:return Math.ceil(n/4)*Math.ceil(e/4)*16;case gE:case vE:return Math.ceil(n/4)*Math.ceil(e/4)*8;case yE:case bE:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function dre(n){switch(n){case wl:case cO:return{byteLength:1,components:1};case y0:case uO:case X0:return{byteLength:2,components:1};case lT:case cT:return{byteLength:2,components:4};case Ff:case aT:case oa:return{byteLength:4,components:1};case fO:case hO:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}class pre{static contain(e,t){return ure(e,t)}static cover(e,t){return fre(e,t)}static fill(e){return hre(e)}static getByteLength(e,t,i,r){return T3(e,t,i,r)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:rT}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=rT);function R8(){let n=null,e=!1,t=null,i=null;function r(s,o){t(s,o),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function mre(n){const e=new WeakMap;function t(a,l){const u=a.array,h=a.usage,p=u.byteLength,m=n.createBuffer();n.bindBuffer(l,m),n.bufferData(l,u,h),a.onUploadCallback();let y;if(u instanceof Float32Array)y=n.FLOAT;else if(typeof Float16Array<"u"&&u instanceof Float16Array)y=n.HALF_FLOAT;else if(u instanceof Uint16Array)a.isFloat16BufferAttribute?y=n.HALF_FLOAT:y=n.UNSIGNED_SHORT;else if(u instanceof Int16Array)y=n.SHORT;else if(u instanceof Uint32Array)y=n.UNSIGNED_INT;else if(u instanceof Int32Array)y=n.INT;else if(u instanceof Int8Array)y=n.BYTE;else if(u instanceof Uint8Array)y=n.UNSIGNED_BYTE;else if(u instanceof Uint8ClampedArray)y=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+u);return{buffer:m,type:y,bytesPerElement:u.BYTES_PER_ELEMENT,version:a.version,size:p}}function i(a,l,u){const h=l.array,p=l.updateRanges;if(n.bindBuffer(u,a),p.length===0)n.bufferSubData(u,0,h);else{p.sort((y,b)=>y.start-b.start);let m=0;for(let y=1;y<p.length;y++){const b=p[m],x=p[y];x.start<=b.start+b.count+1?b.count=Math.max(b.count,x.start+x.count-b.start):(++m,p[m]=x)}p.length=m+1;for(let y=0,b=p.length;y<b;y++){const x=p[y];n.bufferSubData(u,x.start*h.BYTES_PER_ELEMENT,h,x.start,x.count)}l.clearUpdateRanges()}l.onUploadCallback()}function r(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)}function s(a){a.isInterleavedBufferAttribute&&(a=a.data);const l=e.get(a);l&&(n.deleteBuffer(l.buffer),e.delete(a))}function o(a,l){if(a.isInterleavedBufferAttribute&&(a=a.data),a.isGLBufferAttribute){const h=e.get(a);(!h||h.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}const u=e.get(a);if(u===void 0)e.set(a,t(a,l));else if(u.version<a.version){if(u.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(u.buffer,a,l),u.version=a.version}}return{get:r,remove:s,update:o}}var gre=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,vre=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,yre=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,bre=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,_re=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,xre=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Sre=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,wre=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Ere=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,Tre=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,Mre=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,Are=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Cre=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,Rre=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Dre=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Ore=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,Lre=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Pre=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Ire=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Nre=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Ure=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,kre=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,zre=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,Fre=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,Bre=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Vre=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Gre=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,Hre=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,jre=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Wre=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Xre="gl_FragColor = linearToOutputTexel( gl_FragColor );",qre=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,Yre=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,$re=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,Zre=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,Kre=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,Qre=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,Jre=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,ese=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,tse=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,nse=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,ise=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,rse=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,sse=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,ose=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,ase=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,lse=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,cse=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,use=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,fse=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,hse=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,dse=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,pse=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,mse=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,gse=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,vse=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,yse=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,bse=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,_se=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,xse=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,Sse=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,wse=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Ese=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Tse=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Mse=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Ase=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Cse=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,Rse=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Dse=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Ose=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,Lse=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Pse=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,Ise=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Nse=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Use=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,kse=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,zse=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,Fse=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,Bse=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,Vse=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,Gse=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,Hse=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,jse=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,Wse=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,Xse=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,qse=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,Yse=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,$se=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,Zse=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,Kse=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		float depth = unpackRGBAToDepth( texture2D( depths, uv ) );
		#ifdef USE_REVERSED_DEPTH_BUFFER
			return step( depth, compare );
		#else
			return step( compare, depth );
		#endif
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow( sampler2D shadow, vec2 uv, float compare ) {
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		#ifdef USE_REVERSED_DEPTH_BUFFER
			float hard_shadow = step( distribution.x, compare );
		#else
			float hard_shadow = step( compare, distribution.x );
		#endif
		if ( hard_shadow != 1.0 ) {
			float distance = compare - distribution.x;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,Qse=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,Jse=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,eoe=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,toe=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,noe=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,ioe=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,roe=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,soe=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,ooe=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,aoe=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,loe=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,coe=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,uoe=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,foe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,hoe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,doe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,poe=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const moe=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,goe=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,voe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,yoe=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,boe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,_oe=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,xoe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,Soe=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	#ifdef USE_REVERSED_DEPTH_BUFFER
		float fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];
	#else
		float fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;
	#endif
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,woe=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Eoe=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Toe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,Moe=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Aoe=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Coe=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Roe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Doe=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Ooe=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Loe=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Poe=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Ioe=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Noe=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,Uoe=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,koe=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,zoe=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Foe=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,Boe=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Voe=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Goe=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Hoe=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,joe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Woe=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Xoe=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,qoe=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Yoe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,bn={alphahash_fragment:gre,alphahash_pars_fragment:vre,alphamap_fragment:yre,alphamap_pars_fragment:bre,alphatest_fragment:_re,alphatest_pars_fragment:xre,aomap_fragment:Sre,aomap_pars_fragment:wre,batching_pars_vertex:Ere,batching_vertex:Tre,begin_vertex:Mre,beginnormal_vertex:Are,bsdfs:Cre,iridescence_fragment:Rre,bumpmap_pars_fragment:Dre,clipping_planes_fragment:Ore,clipping_planes_pars_fragment:Lre,clipping_planes_pars_vertex:Pre,clipping_planes_vertex:Ire,color_fragment:Nre,color_pars_fragment:Ure,color_pars_vertex:kre,color_vertex:zre,common:Fre,cube_uv_reflection_fragment:Bre,defaultnormal_vertex:Vre,displacementmap_pars_vertex:Gre,displacementmap_vertex:Hre,emissivemap_fragment:jre,emissivemap_pars_fragment:Wre,colorspace_fragment:Xre,colorspace_pars_fragment:qre,envmap_fragment:Yre,envmap_common_pars_fragment:$re,envmap_pars_fragment:Zre,envmap_pars_vertex:Kre,envmap_physical_pars_fragment:lse,envmap_vertex:Qre,fog_vertex:Jre,fog_pars_vertex:ese,fog_fragment:tse,fog_pars_fragment:nse,gradientmap_pars_fragment:ise,lightmap_pars_fragment:rse,lights_lambert_fragment:sse,lights_lambert_pars_fragment:ose,lights_pars_begin:ase,lights_toon_fragment:cse,lights_toon_pars_fragment:use,lights_phong_fragment:fse,lights_phong_pars_fragment:hse,lights_physical_fragment:dse,lights_physical_pars_fragment:pse,lights_fragment_begin:mse,lights_fragment_maps:gse,lights_fragment_end:vse,logdepthbuf_fragment:yse,logdepthbuf_pars_fragment:bse,logdepthbuf_pars_vertex:_se,logdepthbuf_vertex:xse,map_fragment:Sse,map_pars_fragment:wse,map_particle_fragment:Ese,map_particle_pars_fragment:Tse,metalnessmap_fragment:Mse,metalnessmap_pars_fragment:Ase,morphinstance_vertex:Cse,morphcolor_vertex:Rse,morphnormal_vertex:Dse,morphtarget_pars_vertex:Ose,morphtarget_vertex:Lse,normal_fragment_begin:Pse,normal_fragment_maps:Ise,normal_pars_fragment:Nse,normal_pars_vertex:Use,normal_vertex:kse,normalmap_pars_fragment:zse,clearcoat_normal_fragment_begin:Fse,clearcoat_normal_fragment_maps:Bse,clearcoat_pars_fragment:Vse,iridescence_pars_fragment:Gse,opaque_fragment:Hse,packing:jse,premultiplied_alpha_fragment:Wse,project_vertex:Xse,dithering_fragment:qse,dithering_pars_fragment:Yse,roughnessmap_fragment:$se,roughnessmap_pars_fragment:Zse,shadowmap_pars_fragment:Kse,shadowmap_pars_vertex:Qse,shadowmap_vertex:Jse,shadowmask_pars_fragment:eoe,skinbase_vertex:toe,skinning_pars_vertex:noe,skinning_vertex:ioe,skinnormal_vertex:roe,specularmap_fragment:soe,specularmap_pars_fragment:ooe,tonemapping_fragment:aoe,tonemapping_pars_fragment:loe,transmission_fragment:coe,transmission_pars_fragment:uoe,uv_pars_fragment:foe,uv_pars_vertex:hoe,uv_vertex:doe,worldpos_vertex:poe,background_vert:moe,background_frag:goe,backgroundCube_vert:voe,backgroundCube_frag:yoe,cube_vert:boe,cube_frag:_oe,depth_vert:xoe,depth_frag:Soe,distanceRGBA_vert:woe,distanceRGBA_frag:Eoe,equirect_vert:Toe,equirect_frag:Moe,linedashed_vert:Aoe,linedashed_frag:Coe,meshbasic_vert:Roe,meshbasic_frag:Doe,meshlambert_vert:Ooe,meshlambert_frag:Loe,meshmatcap_vert:Poe,meshmatcap_frag:Ioe,meshnormal_vert:Noe,meshnormal_frag:Uoe,meshphong_vert:koe,meshphong_frag:zoe,meshphysical_vert:Foe,meshphysical_frag:Boe,meshtoon_vert:Voe,meshtoon_frag:Goe,points_vert:Hoe,points_frag:joe,shadow_vert:Woe,shadow_frag:Xoe,sprite_vert:qoe,sprite_frag:Yoe},Mt={common:{diffuse:{value:new vt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new cn},alphaMap:{value:null},alphaMapTransform:{value:new cn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new cn}},envmap:{envMap:{value:null},envMapRotation:{value:new cn},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new cn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new cn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new cn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new cn},normalScale:{value:new ot(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new cn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new cn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new cn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new cn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new vt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new vt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new cn},alphaTest:{value:0},uvTransform:{value:new cn}},sprite:{diffuse:{value:new vt(16777215)},opacity:{value:1},center:{value:new ot(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new cn},alphaMap:{value:null},alphaMapTransform:{value:new cn},alphaTest:{value:0}}},ic={basic:{uniforms:xo([Mt.common,Mt.specularmap,Mt.envmap,Mt.aomap,Mt.lightmap,Mt.fog]),vertexShader:bn.meshbasic_vert,fragmentShader:bn.meshbasic_frag},lambert:{uniforms:xo([Mt.common,Mt.specularmap,Mt.envmap,Mt.aomap,Mt.lightmap,Mt.emissivemap,Mt.bumpmap,Mt.normalmap,Mt.displacementmap,Mt.fog,Mt.lights,{emissive:{value:new vt(0)}}]),vertexShader:bn.meshlambert_vert,fragmentShader:bn.meshlambert_frag},phong:{uniforms:xo([Mt.common,Mt.specularmap,Mt.envmap,Mt.aomap,Mt.lightmap,Mt.emissivemap,Mt.bumpmap,Mt.normalmap,Mt.displacementmap,Mt.fog,Mt.lights,{emissive:{value:new vt(0)},specular:{value:new vt(1118481)},shininess:{value:30}}]),vertexShader:bn.meshphong_vert,fragmentShader:bn.meshphong_frag},standard:{uniforms:xo([Mt.common,Mt.envmap,Mt.aomap,Mt.lightmap,Mt.emissivemap,Mt.bumpmap,Mt.normalmap,Mt.displacementmap,Mt.roughnessmap,Mt.metalnessmap,Mt.fog,Mt.lights,{emissive:{value:new vt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:bn.meshphysical_vert,fragmentShader:bn.meshphysical_frag},toon:{uniforms:xo([Mt.common,Mt.aomap,Mt.lightmap,Mt.emissivemap,Mt.bumpmap,Mt.normalmap,Mt.displacementmap,Mt.gradientmap,Mt.fog,Mt.lights,{emissive:{value:new vt(0)}}]),vertexShader:bn.meshtoon_vert,fragmentShader:bn.meshtoon_frag},matcap:{uniforms:xo([Mt.common,Mt.bumpmap,Mt.normalmap,Mt.displacementmap,Mt.fog,{matcap:{value:null}}]),vertexShader:bn.meshmatcap_vert,fragmentShader:bn.meshmatcap_frag},points:{uniforms:xo([Mt.points,Mt.fog]),vertexShader:bn.points_vert,fragmentShader:bn.points_frag},dashed:{uniforms:xo([Mt.common,Mt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:bn.linedashed_vert,fragmentShader:bn.linedashed_frag},depth:{uniforms:xo([Mt.common,Mt.displacementmap]),vertexShader:bn.depth_vert,fragmentShader:bn.depth_frag},normal:{uniforms:xo([Mt.common,Mt.bumpmap,Mt.normalmap,Mt.displacementmap,{opacity:{value:1}}]),vertexShader:bn.meshnormal_vert,fragmentShader:bn.meshnormal_frag},sprite:{uniforms:xo([Mt.sprite,Mt.fog]),vertexShader:bn.sprite_vert,fragmentShader:bn.sprite_frag},background:{uniforms:{uvTransform:{value:new cn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:bn.background_vert,fragmentShader:bn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new cn}},vertexShader:bn.backgroundCube_vert,fragmentShader:bn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:bn.cube_vert,fragmentShader:bn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:bn.equirect_vert,fragmentShader:bn.equirect_frag},distanceRGBA:{uniforms:xo([Mt.common,Mt.displacementmap,{referencePosition:{value:new ae},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:bn.distanceRGBA_vert,fragmentShader:bn.distanceRGBA_frag},shadow:{uniforms:xo([Mt.lights,Mt.fog,{color:{value:new vt(0)},opacity:{value:1}}]),vertexShader:bn.shadow_vert,fragmentShader:bn.shadow_frag}};ic.physical={uniforms:xo([ic.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new cn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new cn},clearcoatNormalScale:{value:new ot(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new cn},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new cn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new cn},sheen:{value:0},sheenColor:{value:new vt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new cn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new cn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new cn},transmissionSamplerSize:{value:new ot},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new cn},attenuationDistance:{value:0},attenuationColor:{value:new vt(0)},specularColor:{value:new vt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new cn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new cn},anisotropyVector:{value:new ot},anisotropyMap:{value:null},anisotropyMapTransform:{value:new cn}}]),vertexShader:bn.meshphysical_vert,fragmentShader:bn.meshphysical_frag};const TS={r:0,b:0,g:0},pp=new Ro,$oe=new Kt;function Zoe(n,e,t,i,r,s,o){const a=new vt(0);let l=s===!0?0:1,u,h,p=null,m=0,y=null;function b(A){let M=A.isScene===!0?A.background:null;return M&&M.isTexture&&(M=(A.backgroundBlurriness>0?t:e).get(M)),M}function x(A){let M=!1;const C=b(A);C===null?_(a,l):C&&C.isColor&&(_(C,1),M=!0);const R=n.xr.getEnvironmentBlendMode();R==="additive"?i.buffers.color.setClear(0,0,0,1,o):R==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,o),(n.autoClear||M)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function S(A,M){const C=b(M);C&&(C.isCubeTexture||C.mapping===W0)?(h===void 0&&(h=new Pi(new gd(1,1,1),new El({name:"BackgroundCubeMaterial",uniforms:T0(ic.backgroundCube.uniforms),vertexShader:ic.backgroundCube.vertexShader,fragmentShader:ic.backgroundCube.fragmentShader,side:Co,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),h.geometry.deleteAttribute("normal"),h.geometry.deleteAttribute("uv"),h.onBeforeRender=function(R,L,I){this.matrixWorld.copyPosition(I.matrixWorld)},Object.defineProperty(h.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(h)),pp.copy(M.backgroundRotation),pp.x*=-1,pp.y*=-1,pp.z*=-1,C.isCubeTexture&&C.isRenderTargetTexture===!1&&(pp.y*=-1,pp.z*=-1),h.material.uniforms.envMap.value=C,h.material.uniforms.flipEnvMap.value=C.isCubeTexture&&C.isRenderTargetTexture===!1?-1:1,h.material.uniforms.backgroundBlurriness.value=M.backgroundBlurriness,h.material.uniforms.backgroundIntensity.value=M.backgroundIntensity,h.material.uniforms.backgroundRotation.value.setFromMatrix4($oe.makeRotationFromEuler(pp)),h.material.toneMapped=Wn.getTransfer(C.colorSpace)!==pi,(p!==C||m!==C.version||y!==n.toneMapping)&&(h.material.needsUpdate=!0,p=C,m=C.version,y=n.toneMapping),h.layers.enableAll(),A.unshift(h,h.geometry,h.material,0,0,null)):C&&C.isTexture&&(u===void 0&&(u=new Pi(new jf(2,2),new El({name:"BackgroundMaterial",uniforms:T0(ic.background.uniforms),vertexShader:ic.background.vertexShader,fragmentShader:ic.background.fragmentShader,side:kf,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(u)),u.material.uniforms.t2D.value=C,u.material.uniforms.backgroundIntensity.value=M.backgroundIntensity,u.material.toneMapped=Wn.getTransfer(C.colorSpace)!==pi,C.matrixAutoUpdate===!0&&C.updateMatrix(),u.material.uniforms.uvTransform.value.copy(C.matrix),(p!==C||m!==C.version||y!==n.toneMapping)&&(u.material.needsUpdate=!0,p=C,m=C.version,y=n.toneMapping),u.layers.enableAll(),A.unshift(u,u.geometry,u.material,0,0,null))}function _(A,M){A.getRGB(TS,O6(n)),i.buffers.color.setClear(TS.r,TS.g,TS.b,M,o)}function T(){h!==void 0&&(h.geometry.dispose(),h.material.dispose(),h=void 0),u!==void 0&&(u.geometry.dispose(),u.material.dispose(),u=void 0)}return{getClearColor:function(){return a},setClearColor:function(A,M=1){a.set(A),l=M,_(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(A){l=A,_(a,l)},render:x,addToRenderList:S,dispose:T}}function Koe(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},r=m(null);let s=r,o=!1;function a(U,B,F,z,W){let X=!1;const j=p(z,F,B);s!==j&&(s=j,u(s.object)),X=y(U,z,F,W),X&&b(U,z,F,W),W!==null&&e.update(W,n.ELEMENT_ARRAY_BUFFER),(X||o)&&(o=!1,M(U,B,F,z),W!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(W).buffer))}function l(){return n.createVertexArray()}function u(U){return n.bindVertexArray(U)}function h(U){return n.deleteVertexArray(U)}function p(U,B,F){const z=F.wireframe===!0;let W=i[U.id];W===void 0&&(W={},i[U.id]=W);let X=W[B.id];X===void 0&&(X={},W[B.id]=X);let j=X[z];return j===void 0&&(j=m(l()),X[z]=j),j}function m(U){const B=[],F=[],z=[];for(let W=0;W<t;W++)B[W]=0,F[W]=0,z[W]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:B,enabledAttributes:F,attributeDivisors:z,object:U,attributes:{},index:null}}function y(U,B,F,z){const W=s.attributes,X=B.attributes;let j=0;const G=F.getAttributes();for(const K in G)if(G[K].location>=0){const ee=W[K];let V=X[K];if(V===void 0&&(K==="instanceMatrix"&&U.instanceMatrix&&(V=U.instanceMatrix),K==="instanceColor"&&U.instanceColor&&(V=U.instanceColor)),ee===void 0||ee.attribute!==V||V&&ee.data!==V.data)return!0;j++}return s.attributesNum!==j||s.index!==z}function b(U,B,F,z){const W={},X=B.attributes;let j=0;const G=F.getAttributes();for(const K in G)if(G[K].location>=0){let ee=X[K];ee===void 0&&(K==="instanceMatrix"&&U.instanceMatrix&&(ee=U.instanceMatrix),K==="instanceColor"&&U.instanceColor&&(ee=U.instanceColor));const V={};V.attribute=ee,ee&&ee.data&&(V.data=ee.data),W[K]=V,j++}s.attributes=W,s.attributesNum=j,s.index=z}function x(){const U=s.newAttributes;for(let B=0,F=U.length;B<F;B++)U[B]=0}function S(U){_(U,0)}function _(U,B){const F=s.newAttributes,z=s.enabledAttributes,W=s.attributeDivisors;F[U]=1,z[U]===0&&(n.enableVertexAttribArray(U),z[U]=1),W[U]!==B&&(n.vertexAttribDivisor(U,B),W[U]=B)}function T(){const U=s.newAttributes,B=s.enabledAttributes;for(let F=0,z=B.length;F<z;F++)B[F]!==U[F]&&(n.disableVertexAttribArray(F),B[F]=0)}function A(U,B,F,z,W,X,j){j===!0?n.vertexAttribIPointer(U,B,F,W,X):n.vertexAttribPointer(U,B,F,z,W,X)}function M(U,B,F,z){x();const W=z.attributes,X=F.getAttributes(),j=B.defaultAttributeValues;for(const G in X){const K=X[G];if(K.location>=0){let J=W[G];if(J===void 0&&(G==="instanceMatrix"&&U.instanceMatrix&&(J=U.instanceMatrix),G==="instanceColor"&&U.instanceColor&&(J=U.instanceColor)),J!==void 0){const ee=J.normalized,V=J.itemSize,Y=e.get(J);if(Y===void 0)continue;const Q=Y.buffer,re=Y.type,ne=Y.bytesPerElement,le=re===n.INT||re===n.UNSIGNED_INT||J.gpuType===aT;if(J.isInterleavedBufferAttribute){const fe=J.data,pe=fe.stride,Ee=J.offset;if(fe.isInstancedInterleavedBuffer){for(let Te=0;Te<K.locationSize;Te++)_(K.location+Te,fe.meshPerAttribute);U.isInstancedMesh!==!0&&z._maxInstanceCount===void 0&&(z._maxInstanceCount=fe.meshPerAttribute*fe.count)}else for(let Te=0;Te<K.locationSize;Te++)S(K.location+Te);n.bindBuffer(n.ARRAY_BUFFER,Q);for(let Te=0;Te<K.locationSize;Te++)A(K.location+Te,V/K.locationSize,re,ee,pe*ne,(Ee+V/K.locationSize*Te)*ne,le)}else{if(J.isInstancedBufferAttribute){for(let fe=0;fe<K.locationSize;fe++)_(K.location+fe,J.meshPerAttribute);U.isInstancedMesh!==!0&&z._maxInstanceCount===void 0&&(z._maxInstanceCount=J.meshPerAttribute*J.count)}else for(let fe=0;fe<K.locationSize;fe++)S(K.location+fe);n.bindBuffer(n.ARRAY_BUFFER,Q);for(let fe=0;fe<K.locationSize;fe++)A(K.location+fe,V/K.locationSize,re,ee,V*ne,V/K.locationSize*fe*ne,le)}}else if(j!==void 0){const ee=j[G];if(ee!==void 0)switch(ee.length){case 2:n.vertexAttrib2fv(K.location,ee);break;case 3:n.vertexAttrib3fv(K.location,ee);break;case 4:n.vertexAttrib4fv(K.location,ee);break;default:n.vertexAttrib1fv(K.location,ee)}}}}T()}function C(){I();for(const U in i){const B=i[U];for(const F in B){const z=B[F];for(const W in z)h(z[W].object),delete z[W];delete B[F]}delete i[U]}}function R(U){if(i[U.id]===void 0)return;const B=i[U.id];for(const F in B){const z=B[F];for(const W in z)h(z[W].object),delete z[W];delete B[F]}delete i[U.id]}function L(U){for(const B in i){const F=i[B];if(F[U.id]===void 0)continue;const z=F[U.id];for(const W in z)h(z[W].object),delete z[W];delete F[U.id]}}function I(){P(),o=!0,s!==r&&(s=r,u(s.object))}function P(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:a,reset:I,resetDefaultState:P,dispose:C,releaseStatesOfGeometry:R,releaseStatesOfProgram:L,initAttributes:x,enableAttribute:S,disableUnusedAttributes:T}}function Qoe(n,e,t){let i;function r(u){i=u}function s(u,h){n.drawArrays(i,u,h),t.update(h,i,1)}function o(u,h,p){p!==0&&(n.drawArraysInstanced(i,u,h,p),t.update(h,i,p))}function a(u,h,p){if(p===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,u,0,h,0,p);let y=0;for(let b=0;b<p;b++)y+=h[b];t.update(y,i,1)}function l(u,h,p,m){if(p===0)return;const y=e.get("WEBGL_multi_draw");if(y===null)for(let b=0;b<u.length;b++)o(u[b],h[b],m[b]);else{y.multiDrawArraysInstancedWEBGL(i,u,0,h,0,m,0,p);let b=0;for(let x=0;x<p;x++)b+=h[x]*m[x];t.update(b,i,1)}}this.setMode=r,this.render=s,this.renderInstances=o,this.renderMultiDraw=a,this.renderMultiDrawInstances=l}function Joe(n,e,t,i){let r;function s(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const L=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(L.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function o(L){return!(L!==eo&&i.convert(L)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(L){const I=L===X0&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(L!==wl&&i.convert(L)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&L!==oa&&!I)}function l(L){if(L==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";L="mediump"}return L==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let u=t.precision!==void 0?t.precision:"highp";const h=l(u);h!==u&&(console.warn("THREE.WebGLRenderer:",u,"not supported, using",h,"instead."),u=h);const p=t.logarithmicDepthBuffer===!0,m=t.reversedDepthBuffer===!0&&e.has("EXT_clip_control"),y=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),b=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),x=n.getParameter(n.MAX_TEXTURE_SIZE),S=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),_=n.getParameter(n.MAX_VERTEX_ATTRIBS),T=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),A=n.getParameter(n.MAX_VARYING_VECTORS),M=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),C=b>0,R=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:l,textureFormatReadable:o,textureTypeReadable:a,precision:u,logarithmicDepthBuffer:p,reversedDepthBuffer:m,maxTextures:y,maxVertexTextures:b,maxTextureSize:x,maxCubemapSize:S,maxAttributes:_,maxVertexUniforms:T,maxVaryings:A,maxFragmentUniforms:M,vertexTextures:C,maxSamples:R}}function eae(n){const e=this;let t=null,i=0,r=!1,s=!1;const o=new _f,a=new cn,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(p,m){const y=p.length!==0||m||i!==0||r;return r=m,i=p.length,y},this.beginShadows=function(){s=!0,h(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(p,m){t=h(p,m,0)},this.setState=function(p,m,y){const b=p.clippingPlanes,x=p.clipIntersection,S=p.clipShadows,_=n.get(p);if(!r||b===null||b.length===0||s&&!S)s?h(null):u();else{const T=s?0:i,A=T*4;let M=_.clippingState||null;l.value=M,M=h(b,m,A,y);for(let C=0;C!==A;++C)M[C]=t[C];_.clippingState=M,this.numIntersection=x?this.numPlanes:0,this.numPlanes+=T}};function u(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function h(p,m,y,b){const x=p!==null?p.length:0;let S=null;if(x!==0){if(S=l.value,b!==!0||S===null){const _=y+x*4,T=m.matrixWorldInverse;a.getNormalMatrix(T),(S===null||S.length<_)&&(S=new Float32Array(_));for(let A=0,M=y;A!==x;++A,M+=4)o.copy(p[A]).applyMatrix4(T,a),o.normal.toArray(S,M),S[M+3]=o.constant}l.value=S,l.needsUpdate=!0}return e.numPlanes=x,e.numIntersection=0,S}}function tae(n){let e=new WeakMap;function t(o,a){return a===$b?o.mapping=zf:a===Zb&&(o.mapping=ad),o}function i(o){if(o&&o.isTexture){const a=o.mapping;if(a===$b||a===Zb)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const u=new P6(l.height);return u.fromEquirectangularTexture(n,o),e.set(o,u),o.addEventListener("dispose",r),t(u.texture,o.mapping)}else return null}}return o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}const n0=4,fk=[.125,.215,.35,.446,.526,.582],Cp=20,pC=new om,hk=new vt;let mC=null,gC=0,vC=0,yC=!1;const Mp=(1+Math.sqrt(5))/2,Lg=1/Mp,dk=[new ae(-Mp,Lg,0),new ae(Mp,Lg,0),new ae(-Lg,0,Mp),new ae(Lg,0,Mp),new ae(0,Mp,-Lg),new ae(0,Mp,Lg),new ae(-1,1,-1),new ae(1,1,-1),new ae(-1,1,1),new ae(1,1,1)],nae=new ae;class M3{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100,s={}){const{size:o=256,position:a=nae}=s;mC=this._renderer.getRenderTarget(),gC=this._renderer.getActiveCubeFace(),vC=this._renderer.getActiveMipmapLevel(),yC=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(o);const l=this._allocateTargets();return l.depthBuffer=!0,this._sceneToCubeUV(e,i,r,l,a),t>0&&this._blur(l,0,0,t),this._applyPMREM(l),this._cleanup(l),l}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=gk(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=mk(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(mC,gC,vC),this._renderer.xr.enabled=yC,e.scissorTest=!1,MS(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===zf||e.mapping===ad?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),mC=this._renderer.getRenderTarget(),gC=this._renderer.getActiveCubeFace(),vC=this._renderer.getActiveMipmapLevel(),yC=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:br,minFilter:br,generateMipmaps:!1,type:X0,format:eo,colorSpace:ld,depthBuffer:!1},r=pk(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=pk(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=iae(s)),this._blurMaterial=rae(s,e,t)}return r}_compileMaterial(e){const t=new Pi(this._lodPlanes[0],e);this._renderer.compile(t,pC)}_sceneToCubeUV(e,t,i,r,s){const l=new Fr(90,1,t,i),u=[1,-1,1,1,1,1],h=[1,1,1,-1,-1,-1],p=this._renderer,m=p.autoClear,y=p.toneMapping;p.getClearColor(hk),p.toneMapping=fu,p.autoClear=!1,p.state.buffers.depth.getReversed()&&(p.setRenderTarget(r),p.clearDepth(),p.setRenderTarget(null));const x=new Hf({name:"PMREM.Background",side:Co,depthWrite:!1,depthTest:!1}),S=new Pi(new gd,x);let _=!1;const T=e.background;T?T.isColor&&(x.color.copy(T),e.background=null,_=!0):(x.color.copy(hk),_=!0);for(let A=0;A<6;A++){const M=A%3;M===0?(l.up.set(0,u[A],0),l.position.set(s.x,s.y,s.z),l.lookAt(s.x+h[A],s.y,s.z)):M===1?(l.up.set(0,0,u[A]),l.position.set(s.x,s.y,s.z),l.lookAt(s.x,s.y+h[A],s.z)):(l.up.set(0,u[A],0),l.position.set(s.x,s.y,s.z),l.lookAt(s.x,s.y,s.z+h[A]));const C=this._cubeSize;MS(r,M*C,A>2?C:0,C,C),p.setRenderTarget(r),_&&p.render(S,l),p.render(e,l)}S.geometry.dispose(),S.material.dispose(),p.toneMapping=y,p.autoClear=m,e.background=T}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===zf||e.mapping===ad;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=gk()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=mk());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new Pi(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;MS(t,0,0,3*l,2*l),i.setRenderTarget(t),i.render(o,pC)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;const r=this._lodPlanes.length;for(let s=1;s<r;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),a=dk[(r-s-1)%dk.length];this._blur(e,s-1,s,o,a)}t.autoClear=i}_blur(e,t,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,o,a){const l=this._renderer,u=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const h=3,p=new Pi(this._lodPlanes[r],u),m=u.uniforms,y=this._sizeLods[i]-1,b=isFinite(s)?Math.PI/(2*y):2*Math.PI/(2*Cp-1),x=s/b,S=isFinite(s)?1+Math.floor(h*x):Cp;S>Cp&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${S} samples when the maximum is set to ${Cp}`);const _=[];let T=0;for(let L=0;L<Cp;++L){const I=L/x,P=Math.exp(-I*I/2);_.push(P),L===0?T+=P:L<S&&(T+=2*P)}for(let L=0;L<_.length;L++)_[L]=_[L]/T;m.envMap.value=e.texture,m.samples.value=S,m.weights.value=_,m.latitudinal.value=o==="latitudinal",a&&(m.poleAxis.value=a);const{_lodMax:A}=this;m.dTheta.value=b,m.mipInt.value=A-i;const M=this._sizeLods[r],C=3*M*(r>A-n0?r-A+n0:0),R=4*(this._cubeSize-M);MS(t,C,R,3*M,2*M),l.setRenderTarget(t),l.render(p,pC)}}function iae(n){const e=[],t=[],i=[];let r=n;const s=n-n0+1+fk.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);t.push(a);let l=1/a;o>n-n0?l=fk[o-n+n0-1]:o===0&&(l=0),i.push(l);const u=1/(a-2),h=-u,p=1+u,m=[h,h,p,h,p,p,h,h,p,p,h,p],y=6,b=6,x=3,S=2,_=1,T=new Float32Array(x*b*y),A=new Float32Array(S*b*y),M=new Float32Array(_*b*y);for(let R=0;R<y;R++){const L=R%3*2/3-1,I=R>2?0:-1,P=[L,I,0,L+2/3,I,0,L+2/3,I+1,0,L,I,0,L+2/3,I+1,0,L,I+1,0];T.set(P,x*b*R),A.set(m,S*b*R);const U=[R,R,R,R,R,R];M.set(U,_*b*R)}const C=new fn;C.setAttribute("position",new ai(T,x)),C.setAttribute("uv",new ai(A,S)),C.setAttribute("faceIndex",new ai(M,_)),e.push(C),r>n0&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function pk(n,e,t){const i=new gu(n,e,t);return i.texture.mapping=W0,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function MS(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function rae(n,e,t){const i=new Float32Array(Cp),r=new ae(0,1,0);return new El({name:"SphericalGaussianBlur",defines:{n:Cp,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:$O(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Df,depthTest:!1,depthWrite:!1})}function mk(){return new El({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:$O(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Df,depthTest:!1,depthWrite:!1})}function gk(){return new El({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:$O(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Df,depthTest:!1,depthWrite:!1})}function $O(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function sae(n){let e=new WeakMap,t=null;function i(a){if(a&&a.isTexture){const l=a.mapping,u=l===$b||l===Zb,h=l===zf||l===ad;if(u||h){let p=e.get(a);const m=p!==void 0?p.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==m)return t===null&&(t=new M3(n)),p=u?t.fromEquirectangular(a,p):t.fromCubemap(a,p),p.texture.pmremVersion=a.pmremVersion,e.set(a,p),p.texture;if(p!==void 0)return p.texture;{const y=a.image;return u&&y&&y.height>0||h&&y&&r(y)?(t===null&&(t=new M3(n)),p=u?t.fromEquirectangular(a):t.fromCubemap(a),p.texture.pmremVersion=a.pmremVersion,e.set(a,p),a.addEventListener("dispose",s),p.texture):null}}}return a}function r(a){let l=0;const u=6;for(let h=0;h<u;h++)a[h]!==void 0&&l++;return l===u}function s(a){const l=a.target;l.removeEventListener("dispose",s);const u=e.get(l);u!==void 0&&(e.delete(l),u.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:o}}function oae(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(i){const r=t(i);return r===null&&r_("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function aae(n,e,t,i){const r={},s=new WeakMap;function o(p){const m=p.target;m.index!==null&&e.remove(m.index);for(const b in m.attributes)e.remove(m.attributes[b]);m.removeEventListener("dispose",o),delete r[m.id];const y=s.get(m);y&&(e.remove(y),s.delete(m)),i.releaseStatesOfGeometry(m),m.isInstancedBufferGeometry===!0&&delete m._maxInstanceCount,t.memory.geometries--}function a(p,m){return r[m.id]===!0||(m.addEventListener("dispose",o),r[m.id]=!0,t.memory.geometries++),m}function l(p){const m=p.attributes;for(const y in m)e.update(m[y],n.ARRAY_BUFFER)}function u(p){const m=[],y=p.index,b=p.attributes.position;let x=0;if(y!==null){const T=y.array;x=y.version;for(let A=0,M=T.length;A<M;A+=3){const C=T[A+0],R=T[A+1],L=T[A+2];m.push(C,R,R,L,L,C)}}else if(b!==void 0){const T=b.array;x=b.version;for(let A=0,M=T.length/3-1;A<M;A+=3){const C=A+0,R=A+1,L=A+2;m.push(C,R,R,L,L,C)}}else return;const S=new(A6(m)?SO:xO)(m,1);S.version=x;const _=s.get(p);_&&e.remove(_),s.set(p,S)}function h(p){const m=s.get(p);if(m){const y=p.index;y!==null&&m.version<y.version&&u(p)}else u(p);return s.get(p)}return{get:a,update:l,getWireframeAttribute:h}}function lae(n,e,t){let i;function r(m){i=m}let s,o;function a(m){s=m.type,o=m.bytesPerElement}function l(m,y){n.drawElements(i,y,s,m*o),t.update(y,i,1)}function u(m,y,b){b!==0&&(n.drawElementsInstanced(i,y,s,m*o,b),t.update(y,i,b))}function h(m,y,b){if(b===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,y,0,s,m,0,b);let S=0;for(let _=0;_<b;_++)S+=y[_];t.update(S,i,1)}function p(m,y,b,x){if(b===0)return;const S=e.get("WEBGL_multi_draw");if(S===null)for(let _=0;_<m.length;_++)u(m[_]/o,y[_],x[_]);else{S.multiDrawElementsInstancedWEBGL(i,y,0,s,m,0,x,0,b);let _=0;for(let T=0;T<b;T++)_+=y[T]*x[T];t.update(_,i,1)}}this.setMode=r,this.setIndex=a,this.render=l,this.renderInstances=u,this.renderMultiDraw=h,this.renderMultiDrawInstances=p}function cae(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,o,a){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=a*(s/3);break;case n.LINES:t.lines+=a*(s/2);break;case n.LINE_STRIP:t.lines+=a*(s-1);break;case n.LINE_LOOP:t.lines+=a*s;break;case n.POINTS:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function uae(n,e,t){const i=new WeakMap,r=new Vn;function s(o,a,l){const u=o.morphTargetInfluences,h=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,p=h!==void 0?h.length:0;let m=i.get(a);if(m===void 0||m.count!==p){let U=function(){I.dispose(),i.delete(a),a.removeEventListener("dispose",U)};var y=U;m!==void 0&&m.texture.dispose();const b=a.morphAttributes.position!==void 0,x=a.morphAttributes.normal!==void 0,S=a.morphAttributes.color!==void 0,_=a.morphAttributes.position||[],T=a.morphAttributes.normal||[],A=a.morphAttributes.color||[];let M=0;b===!0&&(M=1),x===!0&&(M=2),S===!0&&(M=3);let C=a.attributes.position.count*M,R=1;C>e.maxTextureSize&&(R=Math.ceil(C/e.maxTextureSize),C=e.maxTextureSize);const L=new Float32Array(C*R*4*p),I=new pT(L,C,R,p);I.type=oa,I.needsUpdate=!0;const P=M*4;for(let B=0;B<p;B++){const F=_[B],z=T[B],W=A[B],X=C*R*4*B;for(let j=0;j<F.count;j++){const G=j*P;b===!0&&(r.fromBufferAttribute(F,j),L[X+G+0]=r.x,L[X+G+1]=r.y,L[X+G+2]=r.z,L[X+G+3]=0),x===!0&&(r.fromBufferAttribute(z,j),L[X+G+4]=r.x,L[X+G+5]=r.y,L[X+G+6]=r.z,L[X+G+7]=0),S===!0&&(r.fromBufferAttribute(W,j),L[X+G+8]=r.x,L[X+G+9]=r.y,L[X+G+10]=r.z,L[X+G+11]=W.itemSize===4?r.w:1)}}m={count:p,texture:I,size:new ot(C,R)},i.set(a,m),a.addEventListener("dispose",U)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)l.getUniforms().setValue(n,"morphTexture",o.morphTexture,t);else{let b=0;for(let S=0;S<u.length;S++)b+=u[S];const x=a.morphTargetsRelative?1:1-b;l.getUniforms().setValue(n,"morphTargetBaseInfluence",x),l.getUniforms().setValue(n,"morphTargetInfluences",u)}l.getUniforms().setValue(n,"morphTargetsTexture",m.texture,t),l.getUniforms().setValue(n,"morphTargetsTextureSize",m.size)}return{update:s}}function fae(n,e,t,i){let r=new WeakMap;function s(l){const u=i.render.frame,h=l.geometry,p=e.get(l,h);if(r.get(p)!==u&&(e.update(p),r.set(p,u)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),r.get(l)!==u&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),r.set(l,u))),l.isSkinnedMesh){const m=l.skeleton;r.get(m)!==u&&(m.update(),r.set(m,u))}return p}function o(){r=new WeakMap}function a(l){const u=l.target;u.removeEventListener("dispose",a),t.remove(u.instanceMatrix),u.instanceColor!==null&&t.remove(u.instanceColor)}return{update:s,dispose:o}}const D8=new ur,vk=new AO(1,1),O8=new pT,L8=new mT,P8=new L_,yk=[],bk=[],_k=new Float32Array(16),xk=new Float32Array(9),Sk=new Float32Array(4);function $0(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=yk[r];if(s===void 0&&(s=new Float32Array(r),yk[r]=s),e!==0){i.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function ns(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function is(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function VT(n,e){let t=bk[e];t===void 0&&(t=new Int32Array(e),bk[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function hae(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function dae(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ns(t,e))return;n.uniform2fv(this.addr,e),is(t,e)}}function pae(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(ns(t,e))return;n.uniform3fv(this.addr,e),is(t,e)}}function mae(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ns(t,e))return;n.uniform4fv(this.addr,e),is(t,e)}}function gae(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(ns(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),is(t,e)}else{if(ns(t,i))return;Sk.set(i),n.uniformMatrix2fv(this.addr,!1,Sk),is(t,i)}}function vae(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(ns(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),is(t,e)}else{if(ns(t,i))return;xk.set(i),n.uniformMatrix3fv(this.addr,!1,xk),is(t,i)}}function yae(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(ns(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),is(t,e)}else{if(ns(t,i))return;_k.set(i),n.uniformMatrix4fv(this.addr,!1,_k),is(t,i)}}function bae(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function _ae(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ns(t,e))return;n.uniform2iv(this.addr,e),is(t,e)}}function xae(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(ns(t,e))return;n.uniform3iv(this.addr,e),is(t,e)}}function Sae(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ns(t,e))return;n.uniform4iv(this.addr,e),is(t,e)}}function wae(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function Eae(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ns(t,e))return;n.uniform2uiv(this.addr,e),is(t,e)}}function Tae(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(ns(t,e))return;n.uniform3uiv(this.addr,e),is(t,e)}}function Mae(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ns(t,e))return;n.uniform4uiv(this.addr,e),is(t,e)}}function Aae(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r);let s;this.type===n.SAMPLER_2D_SHADOW?(vk.compareFunction=yO,s=vk):s=D8,t.setTexture2D(e||s,r)}function Cae(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||L8,r)}function Rae(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||P8,r)}function Dae(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||O8,r)}function Oae(n){switch(n){case 5126:return hae;case 35664:return dae;case 35665:return pae;case 35666:return mae;case 35674:return gae;case 35675:return vae;case 35676:return yae;case 5124:case 35670:return bae;case 35667:case 35671:return _ae;case 35668:case 35672:return xae;case 35669:case 35673:return Sae;case 5125:return wae;case 36294:return Eae;case 36295:return Tae;case 36296:return Mae;case 35678:case 36198:case 36298:case 36306:case 35682:return Aae;case 35679:case 36299:case 36307:return Cae;case 35680:case 36300:case 36308:case 36293:return Rae;case 36289:case 36303:case 36311:case 36292:return Dae}}function Lae(n,e){n.uniform1fv(this.addr,e)}function Pae(n,e){const t=$0(e,this.size,2);n.uniform2fv(this.addr,t)}function Iae(n,e){const t=$0(e,this.size,3);n.uniform3fv(this.addr,t)}function Nae(n,e){const t=$0(e,this.size,4);n.uniform4fv(this.addr,t)}function Uae(n,e){const t=$0(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function kae(n,e){const t=$0(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function zae(n,e){const t=$0(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function Fae(n,e){n.uniform1iv(this.addr,e)}function Bae(n,e){n.uniform2iv(this.addr,e)}function Vae(n,e){n.uniform3iv(this.addr,e)}function Gae(n,e){n.uniform4iv(this.addr,e)}function Hae(n,e){n.uniform1uiv(this.addr,e)}function jae(n,e){n.uniform2uiv(this.addr,e)}function Wae(n,e){n.uniform3uiv(this.addr,e)}function Xae(n,e){n.uniform4uiv(this.addr,e)}function qae(n,e,t){const i=this.cache,r=e.length,s=VT(t,r);ns(i,s)||(n.uniform1iv(this.addr,s),is(i,s));for(let o=0;o!==r;++o)t.setTexture2D(e[o]||D8,s[o])}function Yae(n,e,t){const i=this.cache,r=e.length,s=VT(t,r);ns(i,s)||(n.uniform1iv(this.addr,s),is(i,s));for(let o=0;o!==r;++o)t.setTexture3D(e[o]||L8,s[o])}function $ae(n,e,t){const i=this.cache,r=e.length,s=VT(t,r);ns(i,s)||(n.uniform1iv(this.addr,s),is(i,s));for(let o=0;o!==r;++o)t.setTextureCube(e[o]||P8,s[o])}function Zae(n,e,t){const i=this.cache,r=e.length,s=VT(t,r);ns(i,s)||(n.uniform1iv(this.addr,s),is(i,s));for(let o=0;o!==r;++o)t.setTexture2DArray(e[o]||O8,s[o])}function Kae(n){switch(n){case 5126:return Lae;case 35664:return Pae;case 35665:return Iae;case 35666:return Nae;case 35674:return Uae;case 35675:return kae;case 35676:return zae;case 5124:case 35670:return Fae;case 35667:case 35671:return Bae;case 35668:case 35672:return Vae;case 35669:case 35673:return Gae;case 5125:return Hae;case 36294:return jae;case 36295:return Wae;case 36296:return Xae;case 35678:case 36198:case 36298:case 36306:case 35682:return qae;case 35679:case 36299:case 36307:return Yae;case 35680:case 36300:case 36308:case 36293:return $ae;case 36289:case 36303:case 36311:case 36292:return Zae}}class Qae{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=Oae(t.type)}}class Jae{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=Kae(t.type)}}class ele{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const a=r[s];a.setValue(e,t[a.id],i)}}}const bC=/(\w+)(\])?(\[|\.)?/g;function wk(n,e){n.seq.push(e),n.map[e.id]=e}function tle(n,e,t){const i=n.name,r=i.length;for(bC.lastIndex=0;;){const s=bC.exec(i),o=bC.lastIndex;let a=s[1];const l=s[2]==="]",u=s[3];if(l&&(a=a|0),u===void 0||u==="["&&o+2===r){wk(t,u===void 0?new Qae(a,n,e):new Jae(a,n,e));break}else{let p=t.map[a];p===void 0&&(p=new ele(a),wk(t,p)),t=p}}}class sw{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const s=e.getActiveUniform(t,r),o=e.getUniformLocation(t,s.name);tle(s,o,this)}}setValue(e,t,i,r){const s=this.map[t];s!==void 0&&s.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=i[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in t&&i.push(o)}return i}}function Ek(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}const nle=37297;let ile=0;function rle(n,e){const t=n.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o<s;o++){const a=o+1;i.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return i.join(`
`)}const Tk=new cn;function sle(n){Wn._getMatrix(Tk,Wn.workingColorSpace,n);const e=`mat3( ${Tk.elements.map(t=>t.toFixed(4))} )`;switch(Wn.getTransfer(n)){case t_:return[e,"LinearTransferOETF"];case pi:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",n),[e,"LinearTransferOETF"]}}function Mk(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),s=(n.getShaderInfoLog(e)||"").trim();if(i&&s==="")return"";const o=/ERROR: 0:(\d+)/.exec(s);if(o){const a=parseInt(o[1]);return t.toUpperCase()+`

`+s+`

`+rle(n.getShaderSource(e),a)}else return s}function ole(n,e){const t=sle(e);return[`vec4 ${n}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function ale(n,e){let t;switch(e){case l6:t="Linear";break;case c6:t="Reinhard";break;case u6:t="Cineon";break;case aO:t="ACESFilmic";break;case h6:t="AgX";break;case d6:t="Neutral";break;case f6:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const AS=new ae;function lle(){Wn.getLuminanceCoefficients(AS);const n=AS.x.toFixed(4),e=AS.y.toFixed(4),t=AS.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function cle(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(db).join(`
`)}function ule(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function fle(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),o=s.name;let a=1;s.type===n.FLOAT_MAT2&&(a=2),s.type===n.FLOAT_MAT3&&(a=3),s.type===n.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function db(n){return n!==""}function Ak(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Ck(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const hle=/^[ \t]*#include +<([\w\d./]+)>/gm;function A3(n){return n.replace(hle,ple)}const dle=new Map;function ple(n,e){let t=bn[e];if(t===void 0){const i=dle.get(e);if(i!==void 0)t=bn[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return A3(t)}const mle=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Rk(n){return n.replace(mle,gle)}function gle(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function Dk(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function vle(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===sT?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===Tb?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===nc&&(e="SHADOWMAP_TYPE_VSM"),e}function yle(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case zf:case ad:e="ENVMAP_TYPE_CUBE";break;case W0:e="ENVMAP_TYPE_CUBE_UV";break}return e}function ble(n){let e="ENVMAP_MODE_REFLECTION";return n.envMap&&n.envMapMode===ad&&(e="ENVMAP_MODE_REFRACTION"),e}function _le(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case D_:e="ENVMAP_BLENDING_MULTIPLY";break;case o6:e="ENVMAP_BLENDING_MIX";break;case a6:e="ENVMAP_BLENDING_ADD";break}return e}function xle(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:i,maxMip:t}}function Sle(n,e,t,i){const r=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=vle(t),u=yle(t),h=ble(t),p=_le(t),m=xle(t),y=cle(t),b=ule(s),x=r.createProgram();let S,_,T=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(S=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,b].filter(db).join(`
`),S.length>0&&(S+=`
`),_=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,b].filter(db).join(`
`),_.length>0&&(_+=`
`)):(S=[Dk(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,b,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+h:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",t.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(db).join(`
`),_=[Dk(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,b,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.envMap?"#define "+h:"",t.envMap?"#define "+p:"",m?"#define CUBEUV_TEXEL_WIDTH "+m.texelWidth:"",m?"#define CUBEUV_TEXEL_HEIGHT "+m.texelHeight:"",m?"#define CUBEUV_MAX_MIP "+m.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",t.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==fu?"#define TONE_MAPPING":"",t.toneMapping!==fu?bn.tonemapping_pars_fragment:"",t.toneMapping!==fu?ale("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",bn.colorspace_pars_fragment,ole("linearToOutputTexel",t.outputColorSpace),lle(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(db).join(`
`)),o=A3(o),o=Ak(o,t),o=Ck(o,t),a=A3(a),a=Ak(a,t),a=Ck(a,t),o=Rk(o),a=Rk(a),t.isRawShaderMaterial!==!0&&(T=`#version 300 es
`,S=[y,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+S,_=["#define varying in",t.glslVersion===y3?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===y3?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+_);const A=T+S+o,M=T+_+a,C=Ek(r,r.VERTEX_SHADER,A),R=Ek(r,r.FRAGMENT_SHADER,M);r.attachShader(x,C),r.attachShader(x,R),t.index0AttributeName!==void 0?r.bindAttribLocation(x,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(x,0,"position"),r.linkProgram(x);function L(B){if(n.debug.checkShaderErrors){const F=r.getProgramInfoLog(x)||"",z=r.getShaderInfoLog(C)||"",W=r.getShaderInfoLog(R)||"",X=F.trim(),j=z.trim(),G=W.trim();let K=!0,J=!0;if(r.getProgramParameter(x,r.LINK_STATUS)===!1)if(K=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,x,C,R);else{const ee=Mk(r,C,"vertex"),V=Mk(r,R,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(x,r.VALIDATE_STATUS)+`

Material Name: `+B.name+`
Material Type: `+B.type+`

Program Info Log: `+X+`
`+ee+`
`+V)}else X!==""?console.warn("THREE.WebGLProgram: Program Info Log:",X):(j===""||G==="")&&(J=!1);J&&(B.diagnostics={runnable:K,programLog:X,vertexShader:{log:j,prefix:S},fragmentShader:{log:G,prefix:_}})}r.deleteShader(C),r.deleteShader(R),I=new sw(r,x),P=fle(r,x)}let I;this.getUniforms=function(){return I===void 0&&L(this),I};let P;this.getAttributes=function(){return P===void 0&&L(this),P};let U=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return U===!1&&(U=r.getProgramParameter(x,nle)),U},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(x),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=ile++,this.cacheKey=e,this.usedTimes=1,this.program=x,this.vertexShader=C,this.fragmentShader=R,this}let wle=0;class Ele{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return o.has(r)===!1&&(o.add(r),r.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new Tle(e),t.set(e,i)),i}}class Tle{constructor(e){this.id=wle++,this.code=e,this.usedTimes=0}}function Mle(n,e,t,i,r,s,o){const a=new E0,l=new Ele,u=new Set,h=[],p=r.logarithmicDepthBuffer,m=r.vertexTextures;let y=r.precision;const b={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function x(P){return u.add(P),P===0?"uv":`uv${P}`}function S(P,U,B,F,z){const W=F.fog,X=z.geometry,j=P.isMeshStandardMaterial?F.environment:null,G=(P.isMeshStandardMaterial?t:e).get(P.envMap||j),K=G&&G.mapping===W0?G.image.height:null,J=b[P.type];P.precision!==null&&(y=r.getMaxPrecision(P.precision),y!==P.precision&&console.warn("THREE.WebGLProgram.getParameters:",P.precision,"not supported, using",y,"instead."));const ee=X.morphAttributes.position||X.morphAttributes.normal||X.morphAttributes.color,V=ee!==void 0?ee.length:0;let Y=0;X.morphAttributes.position!==void 0&&(Y=1),X.morphAttributes.normal!==void 0&&(Y=2),X.morphAttributes.color!==void 0&&(Y=3);let Q,re,ne,le;if(J){const Ft=ic[J];Q=Ft.vertexShader,re=Ft.fragmentShader}else Q=P.vertexShader,re=P.fragmentShader,l.update(P),ne=l.getVertexShaderID(P),le=l.getFragmentShaderID(P);const fe=n.getRenderTarget(),pe=n.state.buffers.depth.getReversed(),Ee=z.isInstancedMesh===!0,Te=z.isBatchedMesh===!0,xe=!!P.map,ge=!!P.matcap,oe=!!G,me=!!P.aoMap,ve=!!P.lightMap,he=!!P.bumpMap,Ce=!!P.normalMap,Re=!!P.displacementMap,Le=!!P.emissiveMap,Ie=!!P.metalnessMap,be=!!P.roughnessMap,Je=P.anisotropy>0,te=P.clearcoat>0,Z=P.dispersion>0,de=P.iridescence>0,Ne=P.sheen>0,Oe=P.transmission>0,Ae=Je&&!!P.anisotropyMap,et=te&&!!P.clearcoatMap,Ze=te&&!!P.clearcoatNormalMap,ft=te&&!!P.clearcoatRoughnessMap,dt=de&&!!P.iridescenceMap,Xe=de&&!!P.iridescenceThicknessMap,Ke=Ne&&!!P.sheenColorMap,nt=Ne&&!!P.sheenRoughnessMap,ct=!!P.specularMap,ut=!!P.specularColorMap,Vt=!!P.specularIntensityMap,Se=Oe&&!!P.transmissionMap,qe=Oe&&!!P.thicknessMap,st=!!P.gradientMap,St=!!P.alphaMap,Qe=P.alphaTest>0,Fe=!!P.alphaHash,gt=!!P.extensions;let Ct=fu;P.toneMapped&&(fe===null||fe.isXRRenderTarget===!0)&&(Ct=n.toneMapping);const Tt={shaderID:J,shaderType:P.type,shaderName:P.name,vertexShader:Q,fragmentShader:re,defines:P.defines,customVertexShaderID:ne,customFragmentShaderID:le,isRawShaderMaterial:P.isRawShaderMaterial===!0,glslVersion:P.glslVersion,precision:y,batching:Te,batchingColor:Te&&z._colorsTexture!==null,instancing:Ee,instancingColor:Ee&&z.instanceColor!==null,instancingMorph:Ee&&z.morphTexture!==null,supportsVertexTextures:m,outputColorSpace:fe===null?n.outputColorSpace:fe.isXRRenderTarget===!0?fe.texture.colorSpace:ld,alphaToCoverage:!!P.alphaToCoverage,map:xe,matcap:ge,envMap:oe,envMapMode:oe&&G.mapping,envMapCubeUVHeight:K,aoMap:me,lightMap:ve,bumpMap:he,normalMap:Ce,displacementMap:m&&Re,emissiveMap:Le,normalMapObjectSpace:Ce&&P.normalMapType===b6,normalMapTangentSpace:Ce&&P.normalMapType===md,metalnessMap:Ie,roughnessMap:be,anisotropy:Je,anisotropyMap:Ae,clearcoat:te,clearcoatMap:et,clearcoatNormalMap:Ze,clearcoatRoughnessMap:ft,dispersion:Z,iridescence:de,iridescenceMap:dt,iridescenceThicknessMap:Xe,sheen:Ne,sheenColorMap:Ke,sheenRoughnessMap:nt,specularMap:ct,specularColorMap:ut,specularIntensityMap:Vt,transmission:Oe,transmissionMap:Se,thicknessMap:qe,gradientMap:st,opaque:P.transparent===!1&&P.blending===Vp&&P.alphaToCoverage===!1,alphaMap:St,alphaTest:Qe,alphaHash:Fe,combine:P.combine,mapUv:xe&&x(P.map.channel),aoMapUv:me&&x(P.aoMap.channel),lightMapUv:ve&&x(P.lightMap.channel),bumpMapUv:he&&x(P.bumpMap.channel),normalMapUv:Ce&&x(P.normalMap.channel),displacementMapUv:Re&&x(P.displacementMap.channel),emissiveMapUv:Le&&x(P.emissiveMap.channel),metalnessMapUv:Ie&&x(P.metalnessMap.channel),roughnessMapUv:be&&x(P.roughnessMap.channel),anisotropyMapUv:Ae&&x(P.anisotropyMap.channel),clearcoatMapUv:et&&x(P.clearcoatMap.channel),clearcoatNormalMapUv:Ze&&x(P.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:ft&&x(P.clearcoatRoughnessMap.channel),iridescenceMapUv:dt&&x(P.iridescenceMap.channel),iridescenceThicknessMapUv:Xe&&x(P.iridescenceThicknessMap.channel),sheenColorMapUv:Ke&&x(P.sheenColorMap.channel),sheenRoughnessMapUv:nt&&x(P.sheenRoughnessMap.channel),specularMapUv:ct&&x(P.specularMap.channel),specularColorMapUv:ut&&x(P.specularColorMap.channel),specularIntensityMapUv:Vt&&x(P.specularIntensityMap.channel),transmissionMapUv:Se&&x(P.transmissionMap.channel),thicknessMapUv:qe&&x(P.thicknessMap.channel),alphaMapUv:St&&x(P.alphaMap.channel),vertexTangents:!!X.attributes.tangent&&(Ce||Je),vertexColors:P.vertexColors,vertexAlphas:P.vertexColors===!0&&!!X.attributes.color&&X.attributes.color.itemSize===4,pointsUvs:z.isPoints===!0&&!!X.attributes.uv&&(xe||St),fog:!!W,useFog:P.fog===!0,fogExp2:!!W&&W.isFogExp2,flatShading:P.flatShading===!0&&P.wireframe===!1,sizeAttenuation:P.sizeAttenuation===!0,logarithmicDepthBuffer:p,reversedDepthBuffer:pe,skinning:z.isSkinnedMesh===!0,morphTargets:X.morphAttributes.position!==void 0,morphNormals:X.morphAttributes.normal!==void 0,morphColors:X.morphAttributes.color!==void 0,morphTargetsCount:V,morphTextureStride:Y,numDirLights:U.directional.length,numPointLights:U.point.length,numSpotLights:U.spot.length,numSpotLightMaps:U.spotLightMap.length,numRectAreaLights:U.rectArea.length,numHemiLights:U.hemi.length,numDirLightShadows:U.directionalShadowMap.length,numPointLightShadows:U.pointShadowMap.length,numSpotLightShadows:U.spotShadowMap.length,numSpotLightShadowsWithMaps:U.numSpotLightShadowsWithMaps,numLightProbes:U.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:P.dithering,shadowMapEnabled:n.shadowMap.enabled&&B.length>0,shadowMapType:n.shadowMap.type,toneMapping:Ct,decodeVideoTexture:xe&&P.map.isVideoTexture===!0&&Wn.getTransfer(P.map.colorSpace)===pi,decodeVideoTextureEmissive:Le&&P.emissiveMap.isVideoTexture===!0&&Wn.getTransfer(P.emissiveMap.colorSpace)===pi,premultipliedAlpha:P.premultipliedAlpha,doubleSided:P.side===yr,flipSided:P.side===Co,useDepthPacking:P.depthPacking>=0,depthPacking:P.depthPacking||0,index0AttributeName:P.index0AttributeName,extensionClipCullDistance:gt&&P.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(gt&&P.extensions.multiDraw===!0||Te)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:P.customProgramCacheKey()};return Tt.vertexUv1s=u.has(1),Tt.vertexUv2s=u.has(2),Tt.vertexUv3s=u.has(3),u.clear(),Tt}function _(P){const U=[];if(P.shaderID?U.push(P.shaderID):(U.push(P.customVertexShaderID),U.push(P.customFragmentShaderID)),P.defines!==void 0)for(const B in P.defines)U.push(B),U.push(P.defines[B]);return P.isRawShaderMaterial===!1&&(T(U,P),A(U,P),U.push(n.outputColorSpace)),U.push(P.customProgramCacheKey),U.join()}function T(P,U){P.push(U.precision),P.push(U.outputColorSpace),P.push(U.envMapMode),P.push(U.envMapCubeUVHeight),P.push(U.mapUv),P.push(U.alphaMapUv),P.push(U.lightMapUv),P.push(U.aoMapUv),P.push(U.bumpMapUv),P.push(U.normalMapUv),P.push(U.displacementMapUv),P.push(U.emissiveMapUv),P.push(U.metalnessMapUv),P.push(U.roughnessMapUv),P.push(U.anisotropyMapUv),P.push(U.clearcoatMapUv),P.push(U.clearcoatNormalMapUv),P.push(U.clearcoatRoughnessMapUv),P.push(U.iridescenceMapUv),P.push(U.iridescenceThicknessMapUv),P.push(U.sheenColorMapUv),P.push(U.sheenRoughnessMapUv),P.push(U.specularMapUv),P.push(U.specularColorMapUv),P.push(U.specularIntensityMapUv),P.push(U.transmissionMapUv),P.push(U.thicknessMapUv),P.push(U.combine),P.push(U.fogExp2),P.push(U.sizeAttenuation),P.push(U.morphTargetsCount),P.push(U.morphAttributeCount),P.push(U.numDirLights),P.push(U.numPointLights),P.push(U.numSpotLights),P.push(U.numSpotLightMaps),P.push(U.numHemiLights),P.push(U.numRectAreaLights),P.push(U.numDirLightShadows),P.push(U.numPointLightShadows),P.push(U.numSpotLightShadows),P.push(U.numSpotLightShadowsWithMaps),P.push(U.numLightProbes),P.push(U.shadowMapType),P.push(U.toneMapping),P.push(U.numClippingPlanes),P.push(U.numClipIntersection),P.push(U.depthPacking)}function A(P,U){a.disableAll(),U.supportsVertexTextures&&a.enable(0),U.instancing&&a.enable(1),U.instancingColor&&a.enable(2),U.instancingMorph&&a.enable(3),U.matcap&&a.enable(4),U.envMap&&a.enable(5),U.normalMapObjectSpace&&a.enable(6),U.normalMapTangentSpace&&a.enable(7),U.clearcoat&&a.enable(8),U.iridescence&&a.enable(9),U.alphaTest&&a.enable(10),U.vertexColors&&a.enable(11),U.vertexAlphas&&a.enable(12),U.vertexUv1s&&a.enable(13),U.vertexUv2s&&a.enable(14),U.vertexUv3s&&a.enable(15),U.vertexTangents&&a.enable(16),U.anisotropy&&a.enable(17),U.alphaHash&&a.enable(18),U.batching&&a.enable(19),U.dispersion&&a.enable(20),U.batchingColor&&a.enable(21),U.gradientMap&&a.enable(22),P.push(a.mask),a.disableAll(),U.fog&&a.enable(0),U.useFog&&a.enable(1),U.flatShading&&a.enable(2),U.logarithmicDepthBuffer&&a.enable(3),U.reversedDepthBuffer&&a.enable(4),U.skinning&&a.enable(5),U.morphTargets&&a.enable(6),U.morphNormals&&a.enable(7),U.morphColors&&a.enable(8),U.premultipliedAlpha&&a.enable(9),U.shadowMapEnabled&&a.enable(10),U.doubleSided&&a.enable(11),U.flipSided&&a.enable(12),U.useDepthPacking&&a.enable(13),U.dithering&&a.enable(14),U.transmission&&a.enable(15),U.sheen&&a.enable(16),U.opaque&&a.enable(17),U.pointsUvs&&a.enable(18),U.decodeVideoTexture&&a.enable(19),U.decodeVideoTextureEmissive&&a.enable(20),U.alphaToCoverage&&a.enable(21),P.push(a.mask)}function M(P){const U=b[P.type];let B;if(U){const F=ic[U];B=wO.clone(F.uniforms)}else B=P.uniforms;return B}function C(P,U){let B;for(let F=0,z=h.length;F<z;F++){const W=h[F];if(W.cacheKey===U){B=W,++B.usedTimes;break}}return B===void 0&&(B=new Sle(n,U,P,s),h.push(B)),B}function R(P){if(--P.usedTimes===0){const U=h.indexOf(P);h[U]=h[h.length-1],h.pop(),P.destroy()}}function L(P){l.remove(P)}function I(){l.dispose()}return{getParameters:S,getProgramCacheKey:_,getUniforms:M,acquireProgram:C,releaseProgram:R,releaseShaderCache:L,programs:h,dispose:I}}function Ale(){let n=new WeakMap;function e(o){return n.has(o)}function t(o){let a=n.get(o);return a===void 0&&(a={},n.set(o,a)),a}function i(o){n.delete(o)}function r(o,a,l){n.get(o)[a]=l}function s(){n=new WeakMap}return{has:e,get:t,remove:i,update:r,dispose:s}}function Cle(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function Ok(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function Lk(){const n=[];let e=0;const t=[],i=[],r=[];function s(){e=0,t.length=0,i.length=0,r.length=0}function o(p,m,y,b,x,S){let _=n[e];return _===void 0?(_={id:p.id,object:p,geometry:m,material:y,groupOrder:b,renderOrder:p.renderOrder,z:x,group:S},n[e]=_):(_.id=p.id,_.object=p,_.geometry=m,_.material=y,_.groupOrder=b,_.renderOrder=p.renderOrder,_.z=x,_.group=S),e++,_}function a(p,m,y,b,x,S){const _=o(p,m,y,b,x,S);y.transmission>0?i.push(_):y.transparent===!0?r.push(_):t.push(_)}function l(p,m,y,b,x,S){const _=o(p,m,y,b,x,S);y.transmission>0?i.unshift(_):y.transparent===!0?r.unshift(_):t.unshift(_)}function u(p,m){t.length>1&&t.sort(p||Cle),i.length>1&&i.sort(m||Ok),r.length>1&&r.sort(m||Ok)}function h(){for(let p=e,m=n.length;p<m;p++){const y=n[p];if(y.id===null)break;y.id=null,y.object=null,y.geometry=null,y.material=null,y.group=null}}return{opaque:t,transmissive:i,transparent:r,init:s,push:a,unshift:l,finish:h,sort:u}}function Rle(){let n=new WeakMap;function e(i,r){const s=n.get(i);let o;return s===void 0?(o=new Lk,n.set(i,[o])):r>=s.length?(o=new Lk,s.push(o)):o=s[r],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function Dle(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new ae,color:new vt};break;case"SpotLight":t={position:new ae,direction:new ae,color:new vt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new ae,color:new vt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new ae,skyColor:new vt,groundColor:new vt};break;case"RectAreaLight":t={color:new vt,position:new ae,halfWidth:new ae,halfHeight:new ae};break}return n[e.id]=t,t}}}function Ole(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ot};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ot};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ot,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let Lle=0;function Ple(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function Ile(n){const e=new Dle,t=Ole(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let u=0;u<9;u++)i.probe.push(new ae);const r=new ae,s=new Kt,o=new Kt;function a(u){let h=0,p=0,m=0;for(let P=0;P<9;P++)i.probe[P].set(0,0,0);let y=0,b=0,x=0,S=0,_=0,T=0,A=0,M=0,C=0,R=0,L=0;u.sort(Ple);for(let P=0,U=u.length;P<U;P++){const B=u[P],F=B.color,z=B.intensity,W=B.distance,X=B.shadow&&B.shadow.map?B.shadow.map.texture:null;if(B.isAmbientLight)h+=F.r*z,p+=F.g*z,m+=F.b*z;else if(B.isLightProbe){for(let j=0;j<9;j++)i.probe[j].addScaledVector(B.sh.coefficients[j],z);L++}else if(B.isDirectionalLight){const j=e.get(B);if(j.color.copy(B.color).multiplyScalar(B.intensity),B.castShadow){const G=B.shadow,K=t.get(B);K.shadowIntensity=G.intensity,K.shadowBias=G.bias,K.shadowNormalBias=G.normalBias,K.shadowRadius=G.radius,K.shadowMapSize=G.mapSize,i.directionalShadow[y]=K,i.directionalShadowMap[y]=X,i.directionalShadowMatrix[y]=B.shadow.matrix,T++}i.directional[y]=j,y++}else if(B.isSpotLight){const j=e.get(B);j.position.setFromMatrixPosition(B.matrixWorld),j.color.copy(F).multiplyScalar(z),j.distance=W,j.coneCos=Math.cos(B.angle),j.penumbraCos=Math.cos(B.angle*(1-B.penumbra)),j.decay=B.decay,i.spot[x]=j;const G=B.shadow;if(B.map&&(i.spotLightMap[C]=B.map,C++,G.updateMatrices(B),B.castShadow&&R++),i.spotLightMatrix[x]=G.matrix,B.castShadow){const K=t.get(B);K.shadowIntensity=G.intensity,K.shadowBias=G.bias,K.shadowNormalBias=G.normalBias,K.shadowRadius=G.radius,K.shadowMapSize=G.mapSize,i.spotShadow[x]=K,i.spotShadowMap[x]=X,M++}x++}else if(B.isRectAreaLight){const j=e.get(B);j.color.copy(F).multiplyScalar(z),j.halfWidth.set(B.width*.5,0,0),j.halfHeight.set(0,B.height*.5,0),i.rectArea[S]=j,S++}else if(B.isPointLight){const j=e.get(B);if(j.color.copy(B.color).multiplyScalar(B.intensity),j.distance=B.distance,j.decay=B.decay,B.castShadow){const G=B.shadow,K=t.get(B);K.shadowIntensity=G.intensity,K.shadowBias=G.bias,K.shadowNormalBias=G.normalBias,K.shadowRadius=G.radius,K.shadowMapSize=G.mapSize,K.shadowCameraNear=G.camera.near,K.shadowCameraFar=G.camera.far,i.pointShadow[b]=K,i.pointShadowMap[b]=X,i.pointShadowMatrix[b]=B.shadow.matrix,A++}i.point[b]=j,b++}else if(B.isHemisphereLight){const j=e.get(B);j.skyColor.copy(B.color).multiplyScalar(z),j.groundColor.copy(B.groundColor).multiplyScalar(z),i.hemi[_]=j,_++}}S>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Mt.LTC_FLOAT_1,i.rectAreaLTC2=Mt.LTC_FLOAT_2):(i.rectAreaLTC1=Mt.LTC_HALF_1,i.rectAreaLTC2=Mt.LTC_HALF_2)),i.ambient[0]=h,i.ambient[1]=p,i.ambient[2]=m;const I=i.hash;(I.directionalLength!==y||I.pointLength!==b||I.spotLength!==x||I.rectAreaLength!==S||I.hemiLength!==_||I.numDirectionalShadows!==T||I.numPointShadows!==A||I.numSpotShadows!==M||I.numSpotMaps!==C||I.numLightProbes!==L)&&(i.directional.length=y,i.spot.length=x,i.rectArea.length=S,i.point.length=b,i.hemi.length=_,i.directionalShadow.length=T,i.directionalShadowMap.length=T,i.pointShadow.length=A,i.pointShadowMap.length=A,i.spotShadow.length=M,i.spotShadowMap.length=M,i.directionalShadowMatrix.length=T,i.pointShadowMatrix.length=A,i.spotLightMatrix.length=M+C-R,i.spotLightMap.length=C,i.numSpotLightShadowsWithMaps=R,i.numLightProbes=L,I.directionalLength=y,I.pointLength=b,I.spotLength=x,I.rectAreaLength=S,I.hemiLength=_,I.numDirectionalShadows=T,I.numPointShadows=A,I.numSpotShadows=M,I.numSpotMaps=C,I.numLightProbes=L,i.version=Lle++)}function l(u,h){let p=0,m=0,y=0,b=0,x=0;const S=h.matrixWorldInverse;for(let _=0,T=u.length;_<T;_++){const A=u[_];if(A.isDirectionalLight){const M=i.directional[p];M.direction.setFromMatrixPosition(A.matrixWorld),r.setFromMatrixPosition(A.target.matrixWorld),M.direction.sub(r),M.direction.transformDirection(S),p++}else if(A.isSpotLight){const M=i.spot[y];M.position.setFromMatrixPosition(A.matrixWorld),M.position.applyMatrix4(S),M.direction.setFromMatrixPosition(A.matrixWorld),r.setFromMatrixPosition(A.target.matrixWorld),M.direction.sub(r),M.direction.transformDirection(S),y++}else if(A.isRectAreaLight){const M=i.rectArea[b];M.position.setFromMatrixPosition(A.matrixWorld),M.position.applyMatrix4(S),o.identity(),s.copy(A.matrixWorld),s.premultiply(S),o.extractRotation(s),M.halfWidth.set(A.width*.5,0,0),M.halfHeight.set(0,A.height*.5,0),M.halfWidth.applyMatrix4(o),M.halfHeight.applyMatrix4(o),b++}else if(A.isPointLight){const M=i.point[m];M.position.setFromMatrixPosition(A.matrixWorld),M.position.applyMatrix4(S),m++}else if(A.isHemisphereLight){const M=i.hemi[x];M.direction.setFromMatrixPosition(A.matrixWorld),M.direction.transformDirection(S),x++}}}return{setup:a,setupView:l,state:i}}function Pk(n){const e=new Ile(n),t=[],i=[];function r(h){u.camera=h,t.length=0,i.length=0}function s(h){t.push(h)}function o(h){i.push(h)}function a(){e.setup(t)}function l(h){e.setupView(t,h)}const u={lightsArray:t,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:u,setupLights:a,setupLightsView:l,pushLight:s,pushShadow:o}}function Nle(n){let e=new WeakMap;function t(r,s=0){const o=e.get(r);let a;return o===void 0?(a=new Pk(n),e.set(r,[a])):s>=o.length?(a=new Pk(n),o.push(a)):a=o[s],a}function i(){e=new WeakMap}return{get:t,dispose:i}}const Ule=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,kle=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function zle(n,e,t){let i=new im;const r=new ot,s=new ot,o=new Vn,a=new zT({depthPacking:vO}),l=new FT,u={},h=t.maxTextureSize,p={[kf]:Co,[Co]:kf,[yr]:yr},m=new El({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new ot},radius:{value:4}},vertexShader:Ule,fragmentShader:kle}),y=m.clone();y.defines.HORIZONTAL_PASS=1;const b=new fn;b.setAttribute("position",new ai(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const x=new Pi(b,m),S=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=sT;let _=this.type;this.render=function(R,L,I){if(S.enabled===!1||S.autoUpdate===!1&&S.needsUpdate===!1||R.length===0)return;const P=n.getRenderTarget(),U=n.getActiveCubeFace(),B=n.getActiveMipmapLevel(),F=n.state;F.setBlending(Df),F.buffers.depth.getReversed()===!0?F.buffers.color.setClear(0,0,0,0):F.buffers.color.setClear(1,1,1,1),F.buffers.depth.setTest(!0),F.setScissorTest(!1);const z=_!==nc&&this.type===nc,W=_===nc&&this.type!==nc;for(let X=0,j=R.length;X<j;X++){const G=R[X],K=G.shadow;if(K===void 0){console.warn("THREE.WebGLShadowMap:",G,"has no shadow.");continue}if(K.autoUpdate===!1&&K.needsUpdate===!1)continue;r.copy(K.mapSize);const J=K.getFrameExtents();if(r.multiply(J),s.copy(K.mapSize),(r.x>h||r.y>h)&&(r.x>h&&(s.x=Math.floor(h/J.x),r.x=s.x*J.x,K.mapSize.x=s.x),r.y>h&&(s.y=Math.floor(h/J.y),r.y=s.y*J.y,K.mapSize.y=s.y)),K.map===null||z===!0||W===!0){const V=this.type!==nc?{minFilter:Ds,magFilter:Ds}:{};K.map!==null&&K.map.dispose(),K.map=new gu(r.x,r.y,V),K.map.texture.name=G.name+".shadowMap",K.camera.updateProjectionMatrix()}n.setRenderTarget(K.map),n.clear();const ee=K.getViewportCount();for(let V=0;V<ee;V++){const Y=K.getViewport(V);o.set(s.x*Y.x,s.y*Y.y,s.x*Y.z,s.y*Y.w),F.viewport(o),K.updateMatrices(G,V),i=K.getFrustum(),M(L,I,K.camera,G,this.type)}K.isPointLightShadow!==!0&&this.type===nc&&T(K,I),K.needsUpdate=!1}_=this.type,S.needsUpdate=!1,n.setRenderTarget(P,U,B)};function T(R,L){const I=e.update(x);m.defines.VSM_SAMPLES!==R.blurSamples&&(m.defines.VSM_SAMPLES=R.blurSamples,y.defines.VSM_SAMPLES=R.blurSamples,m.needsUpdate=!0,y.needsUpdate=!0),R.mapPass===null&&(R.mapPass=new gu(r.x,r.y)),m.uniforms.shadow_pass.value=R.map.texture,m.uniforms.resolution.value=R.mapSize,m.uniforms.radius.value=R.radius,n.setRenderTarget(R.mapPass),n.clear(),n.renderBufferDirect(L,null,I,m,x,null),y.uniforms.shadow_pass.value=R.mapPass.texture,y.uniforms.resolution.value=R.mapSize,y.uniforms.radius.value=R.radius,n.setRenderTarget(R.map),n.clear(),n.renderBufferDirect(L,null,I,y,x,null)}function A(R,L,I,P){let U=null;const B=I.isPointLight===!0?R.customDistanceMaterial:R.customDepthMaterial;if(B!==void 0)U=B;else if(U=I.isPointLight===!0?l:a,n.localClippingEnabled&&L.clipShadows===!0&&Array.isArray(L.clippingPlanes)&&L.clippingPlanes.length!==0||L.displacementMap&&L.displacementScale!==0||L.alphaMap&&L.alphaTest>0||L.map&&L.alphaTest>0||L.alphaToCoverage===!0){const F=U.uuid,z=L.uuid;let W=u[F];W===void 0&&(W={},u[F]=W);let X=W[z];X===void 0&&(X=U.clone(),W[z]=X,L.addEventListener("dispose",C)),U=X}if(U.visible=L.visible,U.wireframe=L.wireframe,P===nc?U.side=L.shadowSide!==null?L.shadowSide:L.side:U.side=L.shadowSide!==null?L.shadowSide:p[L.side],U.alphaMap=L.alphaMap,U.alphaTest=L.alphaToCoverage===!0?.5:L.alphaTest,U.map=L.map,U.clipShadows=L.clipShadows,U.clippingPlanes=L.clippingPlanes,U.clipIntersection=L.clipIntersection,U.displacementMap=L.displacementMap,U.displacementScale=L.displacementScale,U.displacementBias=L.displacementBias,U.wireframeLinewidth=L.wireframeLinewidth,U.linewidth=L.linewidth,I.isPointLight===!0&&U.isMeshDistanceMaterial===!0){const F=n.properties.get(U);F.light=I}return U}function M(R,L,I,P,U){if(R.visible===!1)return;if(R.layers.test(L.layers)&&(R.isMesh||R.isLine||R.isPoints)&&(R.castShadow||R.receiveShadow&&U===nc)&&(!R.frustumCulled||i.intersectsObject(R))){R.modelViewMatrix.multiplyMatrices(I.matrixWorldInverse,R.matrixWorld);const z=e.update(R),W=R.material;if(Array.isArray(W)){const X=z.groups;for(let j=0,G=X.length;j<G;j++){const K=X[j],J=W[K.materialIndex];if(J&&J.visible){const ee=A(R,J,P,U);R.onBeforeShadow(n,R,L,I,z,ee,K),n.renderBufferDirect(I,null,z,ee,R,K),R.onAfterShadow(n,R,L,I,z,ee,K)}}}else if(W.visible){const X=A(R,W,P,U);R.onBeforeShadow(n,R,L,I,z,X,null),n.renderBufferDirect(I,null,z,X,R,null),R.onAfterShadow(n,R,L,I,z,X,null)}}const F=R.children;for(let z=0,W=F.length;z<W;z++)M(F[z],L,I,P,U)}function C(R){R.target.removeEventListener("dispose",C);for(const I in u){const P=u[I],U=R.target.uuid;U in P&&(P[U].dispose(),delete P[U])}}}const Fle={[Fw]:Bw,[Vw]:jw,[Gw]:Ww,[Zp]:Hw,[Bw]:Fw,[jw]:Vw,[Ww]:Gw,[Hw]:Zp};function Ble(n,e){function t(){let Se=!1;const qe=new Vn;let st=null;const St=new Vn(0,0,0,0);return{setMask:function(Qe){st!==Qe&&!Se&&(n.colorMask(Qe,Qe,Qe,Qe),st=Qe)},setLocked:function(Qe){Se=Qe},setClear:function(Qe,Fe,gt,Ct,Tt){Tt===!0&&(Qe*=Ct,Fe*=Ct,gt*=Ct),qe.set(Qe,Fe,gt,Ct),St.equals(qe)===!1&&(n.clearColor(Qe,Fe,gt,Ct),St.copy(qe))},reset:function(){Se=!1,st=null,St.set(-1,0,0,0)}}}function i(){let Se=!1,qe=!1,st=null,St=null,Qe=null;return{setReversed:function(Fe){if(qe!==Fe){const gt=e.get("EXT_clip_control");Fe?gt.clipControlEXT(gt.LOWER_LEFT_EXT,gt.ZERO_TO_ONE_EXT):gt.clipControlEXT(gt.LOWER_LEFT_EXT,gt.NEGATIVE_ONE_TO_ONE_EXT),qe=Fe;const Ct=Qe;Qe=null,this.setClear(Ct)}},getReversed:function(){return qe},setTest:function(Fe){Fe?fe(n.DEPTH_TEST):pe(n.DEPTH_TEST)},setMask:function(Fe){st!==Fe&&!Se&&(n.depthMask(Fe),st=Fe)},setFunc:function(Fe){if(qe&&(Fe=Fle[Fe]),St!==Fe){switch(Fe){case Fw:n.depthFunc(n.NEVER);break;case Bw:n.depthFunc(n.ALWAYS);break;case Vw:n.depthFunc(n.LESS);break;case Zp:n.depthFunc(n.LEQUAL);break;case Gw:n.depthFunc(n.EQUAL);break;case Hw:n.depthFunc(n.GEQUAL);break;case jw:n.depthFunc(n.GREATER);break;case Ww:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}St=Fe}},setLocked:function(Fe){Se=Fe},setClear:function(Fe){Qe!==Fe&&(qe&&(Fe=1-Fe),n.clearDepth(Fe),Qe=Fe)},reset:function(){Se=!1,st=null,St=null,Qe=null,qe=!1}}}function r(){let Se=!1,qe=null,st=null,St=null,Qe=null,Fe=null,gt=null,Ct=null,Tt=null;return{setTest:function(Ft){Se||(Ft?fe(n.STENCIL_TEST):pe(n.STENCIL_TEST))},setMask:function(Ft){qe!==Ft&&!Se&&(n.stencilMask(Ft),qe=Ft)},setFunc:function(Ft,Xn,qn){(st!==Ft||St!==Xn||Qe!==qn)&&(n.stencilFunc(Ft,Xn,qn),st=Ft,St=Xn,Qe=qn)},setOp:function(Ft,Xn,qn){(Fe!==Ft||gt!==Xn||Ct!==qn)&&(n.stencilOp(Ft,Xn,qn),Fe=Ft,gt=Xn,Ct=qn)},setLocked:function(Ft){Se=Ft},setClear:function(Ft){Tt!==Ft&&(n.clearStencil(Ft),Tt=Ft)},reset:function(){Se=!1,qe=null,st=null,St=null,Qe=null,Fe=null,gt=null,Ct=null,Tt=null}}}const s=new t,o=new i,a=new r,l=new WeakMap,u=new WeakMap;let h={},p={},m=new WeakMap,y=[],b=null,x=!1,S=null,_=null,T=null,A=null,M=null,C=null,R=null,L=new vt(0,0,0),I=0,P=!1,U=null,B=null,F=null,z=null,W=null;const X=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let j=!1,G=0;const K=n.getParameter(n.VERSION);K.indexOf("WebGL")!==-1?(G=parseFloat(/^WebGL (\d)/.exec(K)[1]),j=G>=1):K.indexOf("OpenGL ES")!==-1&&(G=parseFloat(/^OpenGL ES (\d)/.exec(K)[1]),j=G>=2);let J=null,ee={};const V=n.getParameter(n.SCISSOR_BOX),Y=n.getParameter(n.VIEWPORT),Q=new Vn().fromArray(V),re=new Vn().fromArray(Y);function ne(Se,qe,st,St){const Qe=new Uint8Array(4),Fe=n.createTexture();n.bindTexture(Se,Fe),n.texParameteri(Se,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(Se,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let gt=0;gt<st;gt++)Se===n.TEXTURE_3D||Se===n.TEXTURE_2D_ARRAY?n.texImage3D(qe,0,n.RGBA,1,1,St,0,n.RGBA,n.UNSIGNED_BYTE,Qe):n.texImage2D(qe+gt,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,Qe);return Fe}const le={};le[n.TEXTURE_2D]=ne(n.TEXTURE_2D,n.TEXTURE_2D,1),le[n.TEXTURE_CUBE_MAP]=ne(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),le[n.TEXTURE_2D_ARRAY]=ne(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),le[n.TEXTURE_3D]=ne(n.TEXTURE_3D,n.TEXTURE_3D,1,1),s.setClear(0,0,0,1),o.setClear(1),a.setClear(0),fe(n.DEPTH_TEST),o.setFunc(Zp),he(!1),Ce(h3),fe(n.CULL_FACE),me(Df);function fe(Se){h[Se]!==!0&&(n.enable(Se),h[Se]=!0)}function pe(Se){h[Se]!==!1&&(n.disable(Se),h[Se]=!1)}function Ee(Se,qe){return p[Se]!==qe?(n.bindFramebuffer(Se,qe),p[Se]=qe,Se===n.DRAW_FRAMEBUFFER&&(p[n.FRAMEBUFFER]=qe),Se===n.FRAMEBUFFER&&(p[n.DRAW_FRAMEBUFFER]=qe),!0):!1}function Te(Se,qe){let st=y,St=!1;if(Se){st=m.get(qe),st===void 0&&(st=[],m.set(qe,st));const Qe=Se.textures;if(st.length!==Qe.length||st[0]!==n.COLOR_ATTACHMENT0){for(let Fe=0,gt=Qe.length;Fe<gt;Fe++)st[Fe]=n.COLOR_ATTACHMENT0+Fe;st.length=Qe.length,St=!0}}else st[0]!==n.BACK&&(st[0]=n.BACK,St=!0);St&&n.drawBuffers(st)}function xe(Se){return b!==Se?(n.useProgram(Se),b=Se,!0):!1}const ge={[Zh]:n.FUNC_ADD,[HB]:n.FUNC_SUBTRACT,[jB]:n.FUNC_REVERSE_SUBTRACT};ge[WB]=n.MIN,ge[XB]=n.MAX;const oe={[qB]:n.ZERO,[YB]:n.ONE,[$B]:n.SRC_COLOR,[kw]:n.SRC_ALPHA,[t6]:n.SRC_ALPHA_SATURATE,[JB]:n.DST_COLOR,[KB]:n.DST_ALPHA,[ZB]:n.ONE_MINUS_SRC_COLOR,[zw]:n.ONE_MINUS_SRC_ALPHA,[e6]:n.ONE_MINUS_DST_COLOR,[QB]:n.ONE_MINUS_DST_ALPHA,[n6]:n.CONSTANT_COLOR,[i6]:n.ONE_MINUS_CONSTANT_COLOR,[r6]:n.CONSTANT_ALPHA,[s6]:n.ONE_MINUS_CONSTANT_ALPHA};function me(Se,qe,st,St,Qe,Fe,gt,Ct,Tt,Ft){if(Se===Df){x===!0&&(pe(n.BLEND),x=!1);return}if(x===!1&&(fe(n.BLEND),x=!0),Se!==GB){if(Se!==S||Ft!==P){if((_!==Zh||M!==Zh)&&(n.blendEquation(n.FUNC_ADD),_=Zh,M=Zh),Ft)switch(Se){case Vp:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case d3:n.blendFunc(n.ONE,n.ONE);break;case p3:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case m3:n.blendFuncSeparate(n.DST_COLOR,n.ONE_MINUS_SRC_ALPHA,n.ZERO,n.ONE);break;default:console.error("THREE.WebGLState: Invalid blending: ",Se);break}else switch(Se){case Vp:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case d3:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE,n.ONE,n.ONE);break;case p3:console.error("THREE.WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case m3:console.error("THREE.WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:console.error("THREE.WebGLState: Invalid blending: ",Se);break}T=null,A=null,C=null,R=null,L.set(0,0,0),I=0,S=Se,P=Ft}return}Qe=Qe||qe,Fe=Fe||st,gt=gt||St,(qe!==_||Qe!==M)&&(n.blendEquationSeparate(ge[qe],ge[Qe]),_=qe,M=Qe),(st!==T||St!==A||Fe!==C||gt!==R)&&(n.blendFuncSeparate(oe[st],oe[St],oe[Fe],oe[gt]),T=st,A=St,C=Fe,R=gt),(Ct.equals(L)===!1||Tt!==I)&&(n.blendColor(Ct.r,Ct.g,Ct.b,Tt),L.copy(Ct),I=Tt),S=Se,P=!1}function ve(Se,qe){Se.side===yr?pe(n.CULL_FACE):fe(n.CULL_FACE);let st=Se.side===Co;qe&&(st=!st),he(st),Se.blending===Vp&&Se.transparent===!1?me(Df):me(Se.blending,Se.blendEquation,Se.blendSrc,Se.blendDst,Se.blendEquationAlpha,Se.blendSrcAlpha,Se.blendDstAlpha,Se.blendColor,Se.blendAlpha,Se.premultipliedAlpha),o.setFunc(Se.depthFunc),o.setTest(Se.depthTest),o.setMask(Se.depthWrite),s.setMask(Se.colorWrite);const St=Se.stencilWrite;a.setTest(St),St&&(a.setMask(Se.stencilWriteMask),a.setFunc(Se.stencilFunc,Se.stencilRef,Se.stencilFuncMask),a.setOp(Se.stencilFail,Se.stencilZFail,Se.stencilZPass)),Le(Se.polygonOffset,Se.polygonOffsetFactor,Se.polygonOffsetUnits),Se.alphaToCoverage===!0?fe(n.SAMPLE_ALPHA_TO_COVERAGE):pe(n.SAMPLE_ALPHA_TO_COVERAGE)}function he(Se){U!==Se&&(Se?n.frontFace(n.CW):n.frontFace(n.CCW),U=Se)}function Ce(Se){Se!==FB?(fe(n.CULL_FACE),Se!==B&&(Se===h3?n.cullFace(n.BACK):Se===BB?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):pe(n.CULL_FACE),B=Se}function Re(Se){Se!==F&&(j&&n.lineWidth(Se),F=Se)}function Le(Se,qe,st){Se?(fe(n.POLYGON_OFFSET_FILL),(z!==qe||W!==st)&&(n.polygonOffset(qe,st),z=qe,W=st)):pe(n.POLYGON_OFFSET_FILL)}function Ie(Se){Se?fe(n.SCISSOR_TEST):pe(n.SCISSOR_TEST)}function be(Se){Se===void 0&&(Se=n.TEXTURE0+X-1),J!==Se&&(n.activeTexture(Se),J=Se)}function Je(Se,qe,st){st===void 0&&(J===null?st=n.TEXTURE0+X-1:st=J);let St=ee[st];St===void 0&&(St={type:void 0,texture:void 0},ee[st]=St),(St.type!==Se||St.texture!==qe)&&(J!==st&&(n.activeTexture(st),J=st),n.bindTexture(Se,qe||le[Se]),St.type=Se,St.texture=qe)}function te(){const Se=ee[J];Se!==void 0&&Se.type!==void 0&&(n.bindTexture(Se.type,null),Se.type=void 0,Se.texture=void 0)}function Z(){try{n.compressedTexImage2D(...arguments)}catch(Se){console.error("THREE.WebGLState:",Se)}}function de(){try{n.compressedTexImage3D(...arguments)}catch(Se){console.error("THREE.WebGLState:",Se)}}function Ne(){try{n.texSubImage2D(...arguments)}catch(Se){console.error("THREE.WebGLState:",Se)}}function Oe(){try{n.texSubImage3D(...arguments)}catch(Se){console.error("THREE.WebGLState:",Se)}}function Ae(){try{n.compressedTexSubImage2D(...arguments)}catch(Se){console.error("THREE.WebGLState:",Se)}}function et(){try{n.compressedTexSubImage3D(...arguments)}catch(Se){console.error("THREE.WebGLState:",Se)}}function Ze(){try{n.texStorage2D(...arguments)}catch(Se){console.error("THREE.WebGLState:",Se)}}function ft(){try{n.texStorage3D(...arguments)}catch(Se){console.error("THREE.WebGLState:",Se)}}function dt(){try{n.texImage2D(...arguments)}catch(Se){console.error("THREE.WebGLState:",Se)}}function Xe(){try{n.texImage3D(...arguments)}catch(Se){console.error("THREE.WebGLState:",Se)}}function Ke(Se){Q.equals(Se)===!1&&(n.scissor(Se.x,Se.y,Se.z,Se.w),Q.copy(Se))}function nt(Se){re.equals(Se)===!1&&(n.viewport(Se.x,Se.y,Se.z,Se.w),re.copy(Se))}function ct(Se,qe){let st=u.get(qe);st===void 0&&(st=new WeakMap,u.set(qe,st));let St=st.get(Se);St===void 0&&(St=n.getUniformBlockIndex(qe,Se.name),st.set(Se,St))}function ut(Se,qe){const St=u.get(qe).get(Se);l.get(qe)!==St&&(n.uniformBlockBinding(qe,St,Se.__bindingPointIndex),l.set(qe,St))}function Vt(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),o.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),h={},J=null,ee={},p={},m=new WeakMap,y=[],b=null,x=!1,S=null,_=null,T=null,A=null,M=null,C=null,R=null,L=new vt(0,0,0),I=0,P=!1,U=null,B=null,F=null,z=null,W=null,Q.set(0,0,n.canvas.width,n.canvas.height),re.set(0,0,n.canvas.width,n.canvas.height),s.reset(),o.reset(),a.reset()}return{buffers:{color:s,depth:o,stencil:a},enable:fe,disable:pe,bindFramebuffer:Ee,drawBuffers:Te,useProgram:xe,setBlending:me,setMaterial:ve,setFlipSided:he,setCullFace:Ce,setLineWidth:Re,setPolygonOffset:Le,setScissorTest:Ie,activeTexture:be,bindTexture:Je,unbindTexture:te,compressedTexImage2D:Z,compressedTexImage3D:de,texImage2D:dt,texImage3D:Xe,updateUBOMapping:ct,uniformBlockBinding:ut,texStorage2D:Ze,texStorage3D:ft,texSubImage2D:Ne,texSubImage3D:Oe,compressedTexSubImage2D:Ae,compressedTexSubImage3D:et,scissor:Ke,viewport:nt,reset:Vt}}function Vle(n,e,t,i,r,s,o){const a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),u=new ot,h=new WeakMap;let p;const m=new WeakMap;let y=!1;try{y=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function b(te,Z){return y?new OffscreenCanvas(te,Z):i_("canvas")}function x(te,Z,de){let Ne=1;const Oe=Je(te);if((Oe.width>de||Oe.height>de)&&(Ne=de/Math.max(Oe.width,Oe.height)),Ne<1)if(typeof HTMLImageElement<"u"&&te instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&te instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&te instanceof ImageBitmap||typeof VideoFrame<"u"&&te instanceof VideoFrame){const Ae=Math.floor(Ne*Oe.width),et=Math.floor(Ne*Oe.height);p===void 0&&(p=b(Ae,et));const Ze=Z?b(Ae,et):p;return Ze.width=Ae,Ze.height=et,Ze.getContext("2d").drawImage(te,0,0,Ae,et),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Oe.width+"x"+Oe.height+") to ("+Ae+"x"+et+")."),Ze}else return"data"in te&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Oe.width+"x"+Oe.height+")."),te;return te}function S(te){return te.generateMipmaps}function _(te){n.generateMipmap(te)}function T(te){return te.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:te.isWebGL3DRenderTarget?n.TEXTURE_3D:te.isWebGLArrayRenderTarget||te.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function A(te,Z,de,Ne,Oe=!1){if(te!==null){if(n[te]!==void 0)return n[te];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+te+"'")}let Ae=Z;if(Z===n.RED&&(de===n.FLOAT&&(Ae=n.R32F),de===n.HALF_FLOAT&&(Ae=n.R16F),de===n.UNSIGNED_BYTE&&(Ae=n.R8)),Z===n.RED_INTEGER&&(de===n.UNSIGNED_BYTE&&(Ae=n.R8UI),de===n.UNSIGNED_SHORT&&(Ae=n.R16UI),de===n.UNSIGNED_INT&&(Ae=n.R32UI),de===n.BYTE&&(Ae=n.R8I),de===n.SHORT&&(Ae=n.R16I),de===n.INT&&(Ae=n.R32I)),Z===n.RG&&(de===n.FLOAT&&(Ae=n.RG32F),de===n.HALF_FLOAT&&(Ae=n.RG16F),de===n.UNSIGNED_BYTE&&(Ae=n.RG8)),Z===n.RG_INTEGER&&(de===n.UNSIGNED_BYTE&&(Ae=n.RG8UI),de===n.UNSIGNED_SHORT&&(Ae=n.RG16UI),de===n.UNSIGNED_INT&&(Ae=n.RG32UI),de===n.BYTE&&(Ae=n.RG8I),de===n.SHORT&&(Ae=n.RG16I),de===n.INT&&(Ae=n.RG32I)),Z===n.RGB_INTEGER&&(de===n.UNSIGNED_BYTE&&(Ae=n.RGB8UI),de===n.UNSIGNED_SHORT&&(Ae=n.RGB16UI),de===n.UNSIGNED_INT&&(Ae=n.RGB32UI),de===n.BYTE&&(Ae=n.RGB8I),de===n.SHORT&&(Ae=n.RGB16I),de===n.INT&&(Ae=n.RGB32I)),Z===n.RGBA_INTEGER&&(de===n.UNSIGNED_BYTE&&(Ae=n.RGBA8UI),de===n.UNSIGNED_SHORT&&(Ae=n.RGBA16UI),de===n.UNSIGNED_INT&&(Ae=n.RGBA32UI),de===n.BYTE&&(Ae=n.RGBA8I),de===n.SHORT&&(Ae=n.RGBA16I),de===n.INT&&(Ae=n.RGBA32I)),Z===n.RGB&&(de===n.UNSIGNED_INT_5_9_9_9_REV&&(Ae=n.RGB9_E5),de===n.UNSIGNED_INT_10F_11F_11F_REV&&(Ae=n.R11F_G11F_B10F)),Z===n.RGBA){const et=Oe?t_:Wn.getTransfer(Ne);de===n.FLOAT&&(Ae=n.RGBA32F),de===n.HALF_FLOAT&&(Ae=n.RGBA16F),de===n.UNSIGNED_BYTE&&(Ae=et===pi?n.SRGB8_ALPHA8:n.RGBA8),de===n.UNSIGNED_SHORT_4_4_4_4&&(Ae=n.RGBA4),de===n.UNSIGNED_SHORT_5_5_5_1&&(Ae=n.RGB5_A1)}return(Ae===n.R16F||Ae===n.R32F||Ae===n.RG16F||Ae===n.RG32F||Ae===n.RGBA16F||Ae===n.RGBA32F)&&e.get("EXT_color_buffer_float"),Ae}function M(te,Z){let de;return te?Z===null||Z===Ff||Z===b0?de=n.DEPTH24_STENCIL8:Z===oa?de=n.DEPTH32F_STENCIL8:Z===y0&&(de=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):Z===null||Z===Ff||Z===b0?de=n.DEPTH_COMPONENT24:Z===oa?de=n.DEPTH_COMPONENT32F:Z===y0&&(de=n.DEPTH_COMPONENT16),de}function C(te,Z){return S(te)===!0||te.isFramebufferTexture&&te.minFilter!==Ds&&te.minFilter!==br?Math.log2(Math.max(Z.width,Z.height))+1:te.mipmaps!==void 0&&te.mipmaps.length>0?te.mipmaps.length:te.isCompressedTexture&&Array.isArray(te.image)?Z.mipmaps.length:1}function R(te){const Z=te.target;Z.removeEventListener("dispose",R),I(Z),Z.isVideoTexture&&h.delete(Z)}function L(te){const Z=te.target;Z.removeEventListener("dispose",L),U(Z)}function I(te){const Z=i.get(te);if(Z.__webglInit===void 0)return;const de=te.source,Ne=m.get(de);if(Ne){const Oe=Ne[Z.__cacheKey];Oe.usedTimes--,Oe.usedTimes===0&&P(te),Object.keys(Ne).length===0&&m.delete(de)}i.remove(te)}function P(te){const Z=i.get(te);n.deleteTexture(Z.__webglTexture);const de=te.source,Ne=m.get(de);delete Ne[Z.__cacheKey],o.memory.textures--}function U(te){const Z=i.get(te);if(te.depthTexture&&(te.depthTexture.dispose(),i.remove(te.depthTexture)),te.isWebGLCubeRenderTarget)for(let Ne=0;Ne<6;Ne++){if(Array.isArray(Z.__webglFramebuffer[Ne]))for(let Oe=0;Oe<Z.__webglFramebuffer[Ne].length;Oe++)n.deleteFramebuffer(Z.__webglFramebuffer[Ne][Oe]);else n.deleteFramebuffer(Z.__webglFramebuffer[Ne]);Z.__webglDepthbuffer&&n.deleteRenderbuffer(Z.__webglDepthbuffer[Ne])}else{if(Array.isArray(Z.__webglFramebuffer))for(let Ne=0;Ne<Z.__webglFramebuffer.length;Ne++)n.deleteFramebuffer(Z.__webglFramebuffer[Ne]);else n.deleteFramebuffer(Z.__webglFramebuffer);if(Z.__webglDepthbuffer&&n.deleteRenderbuffer(Z.__webglDepthbuffer),Z.__webglMultisampledFramebuffer&&n.deleteFramebuffer(Z.__webglMultisampledFramebuffer),Z.__webglColorRenderbuffer)for(let Ne=0;Ne<Z.__webglColorRenderbuffer.length;Ne++)Z.__webglColorRenderbuffer[Ne]&&n.deleteRenderbuffer(Z.__webglColorRenderbuffer[Ne]);Z.__webglDepthRenderbuffer&&n.deleteRenderbuffer(Z.__webglDepthRenderbuffer)}const de=te.textures;for(let Ne=0,Oe=de.length;Ne<Oe;Ne++){const Ae=i.get(de[Ne]);Ae.__webglTexture&&(n.deleteTexture(Ae.__webglTexture),o.memory.textures--),i.remove(de[Ne])}i.remove(te)}let B=0;function F(){B=0}function z(){const te=B;return te>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+te+" texture units while this GPU supports only "+r.maxTextures),B+=1,te}function W(te){const Z=[];return Z.push(te.wrapS),Z.push(te.wrapT),Z.push(te.wrapR||0),Z.push(te.magFilter),Z.push(te.minFilter),Z.push(te.anisotropy),Z.push(te.internalFormat),Z.push(te.format),Z.push(te.type),Z.push(te.generateMipmaps),Z.push(te.premultiplyAlpha),Z.push(te.flipY),Z.push(te.unpackAlignment),Z.push(te.colorSpace),Z.join()}function X(te,Z){const de=i.get(te);if(te.isVideoTexture&&Ie(te),te.isRenderTargetTexture===!1&&te.isExternalTexture!==!0&&te.version>0&&de.__version!==te.version){const Ne=te.image;if(Ne===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Ne.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{le(de,te,Z);return}}else te.isExternalTexture&&(de.__webglTexture=te.sourceTexture?te.sourceTexture:null);t.bindTexture(n.TEXTURE_2D,de.__webglTexture,n.TEXTURE0+Z)}function j(te,Z){const de=i.get(te);if(te.isRenderTargetTexture===!1&&te.version>0&&de.__version!==te.version){le(de,te,Z);return}t.bindTexture(n.TEXTURE_2D_ARRAY,de.__webglTexture,n.TEXTURE0+Z)}function G(te,Z){const de=i.get(te);if(te.isRenderTargetTexture===!1&&te.version>0&&de.__version!==te.version){le(de,te,Z);return}t.bindTexture(n.TEXTURE_3D,de.__webglTexture,n.TEXTURE0+Z)}function K(te,Z){const de=i.get(te);if(te.version>0&&de.__version!==te.version){fe(de,te,Z);return}t.bindTexture(n.TEXTURE_CUBE_MAP,de.__webglTexture,n.TEXTURE0+Z)}const J={[Kb]:n.REPEAT,[vl]:n.CLAMP_TO_EDGE,[Qb]:n.MIRRORED_REPEAT},ee={[Ds]:n.NEAREST,[lO]:n.NEAREST_MIPMAP_NEAREST,[Jg]:n.NEAREST_MIPMAP_LINEAR,[br]:n.LINEAR,[Mb]:n.LINEAR_MIPMAP_NEAREST,[ou]:n.LINEAR_MIPMAP_LINEAR},V={[_6]:n.NEVER,[M6]:n.ALWAYS,[x6]:n.LESS,[yO]:n.LEQUAL,[S6]:n.EQUAL,[T6]:n.GEQUAL,[w6]:n.GREATER,[E6]:n.NOTEQUAL};function Y(te,Z){if(Z.type===oa&&e.has("OES_texture_float_linear")===!1&&(Z.magFilter===br||Z.magFilter===Mb||Z.magFilter===Jg||Z.magFilter===ou||Z.minFilter===br||Z.minFilter===Mb||Z.minFilter===Jg||Z.minFilter===ou)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(te,n.TEXTURE_WRAP_S,J[Z.wrapS]),n.texParameteri(te,n.TEXTURE_WRAP_T,J[Z.wrapT]),(te===n.TEXTURE_3D||te===n.TEXTURE_2D_ARRAY)&&n.texParameteri(te,n.TEXTURE_WRAP_R,J[Z.wrapR]),n.texParameteri(te,n.TEXTURE_MAG_FILTER,ee[Z.magFilter]),n.texParameteri(te,n.TEXTURE_MIN_FILTER,ee[Z.minFilter]),Z.compareFunction&&(n.texParameteri(te,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(te,n.TEXTURE_COMPARE_FUNC,V[Z.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(Z.magFilter===Ds||Z.minFilter!==Jg&&Z.minFilter!==ou||Z.type===oa&&e.has("OES_texture_float_linear")===!1)return;if(Z.anisotropy>1||i.get(Z).__currentAnisotropy){const de=e.get("EXT_texture_filter_anisotropic");n.texParameterf(te,de.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Z.anisotropy,r.getMaxAnisotropy())),i.get(Z).__currentAnisotropy=Z.anisotropy}}}function Q(te,Z){let de=!1;te.__webglInit===void 0&&(te.__webglInit=!0,Z.addEventListener("dispose",R));const Ne=Z.source;let Oe=m.get(Ne);Oe===void 0&&(Oe={},m.set(Ne,Oe));const Ae=W(Z);if(Ae!==te.__cacheKey){Oe[Ae]===void 0&&(Oe[Ae]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,de=!0),Oe[Ae].usedTimes++;const et=Oe[te.__cacheKey];et!==void 0&&(Oe[te.__cacheKey].usedTimes--,et.usedTimes===0&&P(Z)),te.__cacheKey=Ae,te.__webglTexture=Oe[Ae].texture}return de}function re(te,Z,de){return Math.floor(Math.floor(te/de)/Z)}function ne(te,Z,de,Ne){const Ae=te.updateRanges;if(Ae.length===0)t.texSubImage2D(n.TEXTURE_2D,0,0,0,Z.width,Z.height,de,Ne,Z.data);else{Ae.sort((Xe,Ke)=>Xe.start-Ke.start);let et=0;for(let Xe=1;Xe<Ae.length;Xe++){const Ke=Ae[et],nt=Ae[Xe],ct=Ke.start+Ke.count,ut=re(nt.start,Z.width,4),Vt=re(Ke.start,Z.width,4);nt.start<=ct+1&&ut===Vt&&re(nt.start+nt.count-1,Z.width,4)===ut?Ke.count=Math.max(Ke.count,nt.start+nt.count-Ke.start):(++et,Ae[et]=nt)}Ae.length=et+1;const Ze=n.getParameter(n.UNPACK_ROW_LENGTH),ft=n.getParameter(n.UNPACK_SKIP_PIXELS),dt=n.getParameter(n.UNPACK_SKIP_ROWS);n.pixelStorei(n.UNPACK_ROW_LENGTH,Z.width);for(let Xe=0,Ke=Ae.length;Xe<Ke;Xe++){const nt=Ae[Xe],ct=Math.floor(nt.start/4),ut=Math.ceil(nt.count/4),Vt=ct%Z.width,Se=Math.floor(ct/Z.width),qe=ut,st=1;n.pixelStorei(n.UNPACK_SKIP_PIXELS,Vt),n.pixelStorei(n.UNPACK_SKIP_ROWS,Se),t.texSubImage2D(n.TEXTURE_2D,0,Vt,Se,qe,st,de,Ne,Z.data)}te.clearUpdateRanges(),n.pixelStorei(n.UNPACK_ROW_LENGTH,Ze),n.pixelStorei(n.UNPACK_SKIP_PIXELS,ft),n.pixelStorei(n.UNPACK_SKIP_ROWS,dt)}}function le(te,Z,de){let Ne=n.TEXTURE_2D;(Z.isDataArrayTexture||Z.isCompressedArrayTexture)&&(Ne=n.TEXTURE_2D_ARRAY),Z.isData3DTexture&&(Ne=n.TEXTURE_3D);const Oe=Q(te,Z),Ae=Z.source;t.bindTexture(Ne,te.__webglTexture,n.TEXTURE0+de);const et=i.get(Ae);if(Ae.version!==et.__version||Oe===!0){t.activeTexture(n.TEXTURE0+de);const Ze=Wn.getPrimaries(Wn.workingColorSpace),ft=Z.colorSpace===Sf?null:Wn.getPrimaries(Z.colorSpace),dt=Z.colorSpace===Sf||Ze===ft?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,Z.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Z.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,Z.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,dt);let Xe=x(Z.image,!1,r.maxTextureSize);Xe=be(Z,Xe);const Ke=s.convert(Z.format,Z.colorSpace),nt=s.convert(Z.type);let ct=A(Z.internalFormat,Ke,nt,Z.colorSpace,Z.isVideoTexture);Y(Ne,Z);let ut;const Vt=Z.mipmaps,Se=Z.isVideoTexture!==!0,qe=et.__version===void 0||Oe===!0,st=Ae.dataReady,St=C(Z,Xe);if(Z.isDepthTexture)ct=M(Z.format===x0,Z.type),qe&&(Se?t.texStorage2D(n.TEXTURE_2D,1,ct,Xe.width,Xe.height):t.texImage2D(n.TEXTURE_2D,0,ct,Xe.width,Xe.height,0,Ke,nt,null));else if(Z.isDataTexture)if(Vt.length>0){Se&&qe&&t.texStorage2D(n.TEXTURE_2D,St,ct,Vt[0].width,Vt[0].height);for(let Qe=0,Fe=Vt.length;Qe<Fe;Qe++)ut=Vt[Qe],Se?st&&t.texSubImage2D(n.TEXTURE_2D,Qe,0,0,ut.width,ut.height,Ke,nt,ut.data):t.texImage2D(n.TEXTURE_2D,Qe,ct,ut.width,ut.height,0,Ke,nt,ut.data);Z.generateMipmaps=!1}else Se?(qe&&t.texStorage2D(n.TEXTURE_2D,St,ct,Xe.width,Xe.height),st&&ne(Z,Xe,Ke,nt)):t.texImage2D(n.TEXTURE_2D,0,ct,Xe.width,Xe.height,0,Ke,nt,Xe.data);else if(Z.isCompressedTexture)if(Z.isCompressedArrayTexture){Se&&qe&&t.texStorage3D(n.TEXTURE_2D_ARRAY,St,ct,Vt[0].width,Vt[0].height,Xe.depth);for(let Qe=0,Fe=Vt.length;Qe<Fe;Qe++)if(ut=Vt[Qe],Z.format!==eo)if(Ke!==null)if(Se){if(st)if(Z.layerUpdates.size>0){const gt=T3(ut.width,ut.height,Z.format,Z.type);for(const Ct of Z.layerUpdates){const Tt=ut.data.subarray(Ct*gt/ut.data.BYTES_PER_ELEMENT,(Ct+1)*gt/ut.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Qe,0,0,Ct,ut.width,ut.height,1,Ke,Tt)}Z.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Qe,0,0,0,ut.width,ut.height,Xe.depth,Ke,ut.data)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,Qe,ct,ut.width,ut.height,Xe.depth,0,ut.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else Se?st&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,Qe,0,0,0,ut.width,ut.height,Xe.depth,Ke,nt,ut.data):t.texImage3D(n.TEXTURE_2D_ARRAY,Qe,ct,ut.width,ut.height,Xe.depth,0,Ke,nt,ut.data)}else{Se&&qe&&t.texStorage2D(n.TEXTURE_2D,St,ct,Vt[0].width,Vt[0].height);for(let Qe=0,Fe=Vt.length;Qe<Fe;Qe++)ut=Vt[Qe],Z.format!==eo?Ke!==null?Se?st&&t.compressedTexSubImage2D(n.TEXTURE_2D,Qe,0,0,ut.width,ut.height,Ke,ut.data):t.compressedTexImage2D(n.TEXTURE_2D,Qe,ct,ut.width,ut.height,0,ut.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Se?st&&t.texSubImage2D(n.TEXTURE_2D,Qe,0,0,ut.width,ut.height,Ke,nt,ut.data):t.texImage2D(n.TEXTURE_2D,Qe,ct,ut.width,ut.height,0,Ke,nt,ut.data)}else if(Z.isDataArrayTexture)if(Se){if(qe&&t.texStorage3D(n.TEXTURE_2D_ARRAY,St,ct,Xe.width,Xe.height,Xe.depth),st)if(Z.layerUpdates.size>0){const Qe=T3(Xe.width,Xe.height,Z.format,Z.type);for(const Fe of Z.layerUpdates){const gt=Xe.data.subarray(Fe*Qe/Xe.data.BYTES_PER_ELEMENT,(Fe+1)*Qe/Xe.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,Fe,Xe.width,Xe.height,1,Ke,nt,gt)}Z.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Xe.width,Xe.height,Xe.depth,Ke,nt,Xe.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,ct,Xe.width,Xe.height,Xe.depth,0,Ke,nt,Xe.data);else if(Z.isData3DTexture)Se?(qe&&t.texStorage3D(n.TEXTURE_3D,St,ct,Xe.width,Xe.height,Xe.depth),st&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Xe.width,Xe.height,Xe.depth,Ke,nt,Xe.data)):t.texImage3D(n.TEXTURE_3D,0,ct,Xe.width,Xe.height,Xe.depth,0,Ke,nt,Xe.data);else if(Z.isFramebufferTexture){if(qe)if(Se)t.texStorage2D(n.TEXTURE_2D,St,ct,Xe.width,Xe.height);else{let Qe=Xe.width,Fe=Xe.height;for(let gt=0;gt<St;gt++)t.texImage2D(n.TEXTURE_2D,gt,ct,Qe,Fe,0,Ke,nt,null),Qe>>=1,Fe>>=1}}else if(Vt.length>0){if(Se&&qe){const Qe=Je(Vt[0]);t.texStorage2D(n.TEXTURE_2D,St,ct,Qe.width,Qe.height)}for(let Qe=0,Fe=Vt.length;Qe<Fe;Qe++)ut=Vt[Qe],Se?st&&t.texSubImage2D(n.TEXTURE_2D,Qe,0,0,Ke,nt,ut):t.texImage2D(n.TEXTURE_2D,Qe,ct,Ke,nt,ut);Z.generateMipmaps=!1}else if(Se){if(qe){const Qe=Je(Xe);t.texStorage2D(n.TEXTURE_2D,St,ct,Qe.width,Qe.height)}st&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,Ke,nt,Xe)}else t.texImage2D(n.TEXTURE_2D,0,ct,Ke,nt,Xe);S(Z)&&_(Ne),et.__version=Ae.version,Z.onUpdate&&Z.onUpdate(Z)}te.__version=Z.version}function fe(te,Z,de){if(Z.image.length!==6)return;const Ne=Q(te,Z),Oe=Z.source;t.bindTexture(n.TEXTURE_CUBE_MAP,te.__webglTexture,n.TEXTURE0+de);const Ae=i.get(Oe);if(Oe.version!==Ae.__version||Ne===!0){t.activeTexture(n.TEXTURE0+de);const et=Wn.getPrimaries(Wn.workingColorSpace),Ze=Z.colorSpace===Sf?null:Wn.getPrimaries(Z.colorSpace),ft=Z.colorSpace===Sf||et===Ze?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,Z.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Z.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,Z.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,ft);const dt=Z.isCompressedTexture||Z.image[0].isCompressedTexture,Xe=Z.image[0]&&Z.image[0].isDataTexture,Ke=[];for(let Fe=0;Fe<6;Fe++)!dt&&!Xe?Ke[Fe]=x(Z.image[Fe],!0,r.maxCubemapSize):Ke[Fe]=Xe?Z.image[Fe].image:Z.image[Fe],Ke[Fe]=be(Z,Ke[Fe]);const nt=Ke[0],ct=s.convert(Z.format,Z.colorSpace),ut=s.convert(Z.type),Vt=A(Z.internalFormat,ct,ut,Z.colorSpace),Se=Z.isVideoTexture!==!0,qe=Ae.__version===void 0||Ne===!0,st=Oe.dataReady;let St=C(Z,nt);Y(n.TEXTURE_CUBE_MAP,Z);let Qe;if(dt){Se&&qe&&t.texStorage2D(n.TEXTURE_CUBE_MAP,St,Vt,nt.width,nt.height);for(let Fe=0;Fe<6;Fe++){Qe=Ke[Fe].mipmaps;for(let gt=0;gt<Qe.length;gt++){const Ct=Qe[gt];Z.format!==eo?ct!==null?Se?st&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Fe,gt,0,0,Ct.width,Ct.height,ct,Ct.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Fe,gt,Vt,Ct.width,Ct.height,0,Ct.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Se?st&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Fe,gt,0,0,Ct.width,Ct.height,ct,ut,Ct.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Fe,gt,Vt,Ct.width,Ct.height,0,ct,ut,Ct.data)}}}else{if(Qe=Z.mipmaps,Se&&qe){Qe.length>0&&St++;const Fe=Je(Ke[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,St,Vt,Fe.width,Fe.height)}for(let Fe=0;Fe<6;Fe++)if(Xe){Se?st&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Fe,0,0,0,Ke[Fe].width,Ke[Fe].height,ct,ut,Ke[Fe].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Fe,0,Vt,Ke[Fe].width,Ke[Fe].height,0,ct,ut,Ke[Fe].data);for(let gt=0;gt<Qe.length;gt++){const Tt=Qe[gt].image[Fe].image;Se?st&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Fe,gt+1,0,0,Tt.width,Tt.height,ct,ut,Tt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Fe,gt+1,Vt,Tt.width,Tt.height,0,ct,ut,Tt.data)}}else{Se?st&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Fe,0,0,0,ct,ut,Ke[Fe]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Fe,0,Vt,ct,ut,Ke[Fe]);for(let gt=0;gt<Qe.length;gt++){const Ct=Qe[gt];Se?st&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Fe,gt+1,0,0,ct,ut,Ct.image[Fe]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Fe,gt+1,Vt,ct,ut,Ct.image[Fe])}}}S(Z)&&_(n.TEXTURE_CUBE_MAP),Ae.__version=Oe.version,Z.onUpdate&&Z.onUpdate(Z)}te.__version=Z.version}function pe(te,Z,de,Ne,Oe,Ae){const et=s.convert(de.format,de.colorSpace),Ze=s.convert(de.type),ft=A(de.internalFormat,et,Ze,de.colorSpace),dt=i.get(Z),Xe=i.get(de);if(Xe.__renderTarget=Z,!dt.__hasExternalTextures){const Ke=Math.max(1,Z.width>>Ae),nt=Math.max(1,Z.height>>Ae);Oe===n.TEXTURE_3D||Oe===n.TEXTURE_2D_ARRAY?t.texImage3D(Oe,Ae,ft,Ke,nt,Z.depth,0,et,Ze,null):t.texImage2D(Oe,Ae,ft,Ke,nt,0,et,Ze,null)}t.bindFramebuffer(n.FRAMEBUFFER,te),Le(Z)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,Ne,Oe,Xe.__webglTexture,0,Re(Z)):(Oe===n.TEXTURE_2D||Oe>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&Oe<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,Ne,Oe,Xe.__webglTexture,Ae),t.bindFramebuffer(n.FRAMEBUFFER,null)}function Ee(te,Z,de){if(n.bindRenderbuffer(n.RENDERBUFFER,te),Z.depthBuffer){const Ne=Z.depthTexture,Oe=Ne&&Ne.isDepthTexture?Ne.type:null,Ae=M(Z.stencilBuffer,Oe),et=Z.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Ze=Re(Z);Le(Z)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Ze,Ae,Z.width,Z.height):de?n.renderbufferStorageMultisample(n.RENDERBUFFER,Ze,Ae,Z.width,Z.height):n.renderbufferStorage(n.RENDERBUFFER,Ae,Z.width,Z.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,et,n.RENDERBUFFER,te)}else{const Ne=Z.textures;for(let Oe=0;Oe<Ne.length;Oe++){const Ae=Ne[Oe],et=s.convert(Ae.format,Ae.colorSpace),Ze=s.convert(Ae.type),ft=A(Ae.internalFormat,et,Ze,Ae.colorSpace),dt=Re(Z);de&&Le(Z)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,dt,ft,Z.width,Z.height):Le(Z)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,dt,ft,Z.width,Z.height):n.renderbufferStorage(n.RENDERBUFFER,ft,Z.width,Z.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function Te(te,Z){if(Z&&Z.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,te),!(Z.depthTexture&&Z.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const Ne=i.get(Z.depthTexture);Ne.__renderTarget=Z,(!Ne.__webglTexture||Z.depthTexture.image.width!==Z.width||Z.depthTexture.image.height!==Z.height)&&(Z.depthTexture.image.width=Z.width,Z.depthTexture.image.height=Z.height,Z.depthTexture.needsUpdate=!0),X(Z.depthTexture,0);const Oe=Ne.__webglTexture,Ae=Re(Z);if(Z.depthTexture.format===_0)Le(Z)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Oe,0,Ae):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Oe,0);else if(Z.depthTexture.format===x0)Le(Z)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Oe,0,Ae):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Oe,0);else throw new Error("Unknown depthTexture format")}function xe(te){const Z=i.get(te),de=te.isWebGLCubeRenderTarget===!0;if(Z.__boundDepthTexture!==te.depthTexture){const Ne=te.depthTexture;if(Z.__depthDisposeCallback&&Z.__depthDisposeCallback(),Ne){const Oe=()=>{delete Z.__boundDepthTexture,delete Z.__depthDisposeCallback,Ne.removeEventListener("dispose",Oe)};Ne.addEventListener("dispose",Oe),Z.__depthDisposeCallback=Oe}Z.__boundDepthTexture=Ne}if(te.depthTexture&&!Z.__autoAllocateDepthBuffer){if(de)throw new Error("target.depthTexture not supported in Cube render targets");const Ne=te.texture.mipmaps;Ne&&Ne.length>0?Te(Z.__webglFramebuffer[0],te):Te(Z.__webglFramebuffer,te)}else if(de){Z.__webglDepthbuffer=[];for(let Ne=0;Ne<6;Ne++)if(t.bindFramebuffer(n.FRAMEBUFFER,Z.__webglFramebuffer[Ne]),Z.__webglDepthbuffer[Ne]===void 0)Z.__webglDepthbuffer[Ne]=n.createRenderbuffer(),Ee(Z.__webglDepthbuffer[Ne],te,!1);else{const Oe=te.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Ae=Z.__webglDepthbuffer[Ne];n.bindRenderbuffer(n.RENDERBUFFER,Ae),n.framebufferRenderbuffer(n.FRAMEBUFFER,Oe,n.RENDERBUFFER,Ae)}}else{const Ne=te.texture.mipmaps;if(Ne&&Ne.length>0?t.bindFramebuffer(n.FRAMEBUFFER,Z.__webglFramebuffer[0]):t.bindFramebuffer(n.FRAMEBUFFER,Z.__webglFramebuffer),Z.__webglDepthbuffer===void 0)Z.__webglDepthbuffer=n.createRenderbuffer(),Ee(Z.__webglDepthbuffer,te,!1);else{const Oe=te.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Ae=Z.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,Ae),n.framebufferRenderbuffer(n.FRAMEBUFFER,Oe,n.RENDERBUFFER,Ae)}}t.bindFramebuffer(n.FRAMEBUFFER,null)}function ge(te,Z,de){const Ne=i.get(te);Z!==void 0&&pe(Ne.__webglFramebuffer,te,te.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),de!==void 0&&xe(te)}function oe(te){const Z=te.texture,de=i.get(te),Ne=i.get(Z);te.addEventListener("dispose",L);const Oe=te.textures,Ae=te.isWebGLCubeRenderTarget===!0,et=Oe.length>1;if(et||(Ne.__webglTexture===void 0&&(Ne.__webglTexture=n.createTexture()),Ne.__version=Z.version,o.memory.textures++),Ae){de.__webglFramebuffer=[];for(let Ze=0;Ze<6;Ze++)if(Z.mipmaps&&Z.mipmaps.length>0){de.__webglFramebuffer[Ze]=[];for(let ft=0;ft<Z.mipmaps.length;ft++)de.__webglFramebuffer[Ze][ft]=n.createFramebuffer()}else de.__webglFramebuffer[Ze]=n.createFramebuffer()}else{if(Z.mipmaps&&Z.mipmaps.length>0){de.__webglFramebuffer=[];for(let Ze=0;Ze<Z.mipmaps.length;Ze++)de.__webglFramebuffer[Ze]=n.createFramebuffer()}else de.__webglFramebuffer=n.createFramebuffer();if(et)for(let Ze=0,ft=Oe.length;Ze<ft;Ze++){const dt=i.get(Oe[Ze]);dt.__webglTexture===void 0&&(dt.__webglTexture=n.createTexture(),o.memory.textures++)}if(te.samples>0&&Le(te)===!1){de.__webglMultisampledFramebuffer=n.createFramebuffer(),de.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,de.__webglMultisampledFramebuffer);for(let Ze=0;Ze<Oe.length;Ze++){const ft=Oe[Ze];de.__webglColorRenderbuffer[Ze]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,de.__webglColorRenderbuffer[Ze]);const dt=s.convert(ft.format,ft.colorSpace),Xe=s.convert(ft.type),Ke=A(ft.internalFormat,dt,Xe,ft.colorSpace,te.isXRRenderTarget===!0),nt=Re(te);n.renderbufferStorageMultisample(n.RENDERBUFFER,nt,Ke,te.width,te.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ze,n.RENDERBUFFER,de.__webglColorRenderbuffer[Ze])}n.bindRenderbuffer(n.RENDERBUFFER,null),te.depthBuffer&&(de.__webglDepthRenderbuffer=n.createRenderbuffer(),Ee(de.__webglDepthRenderbuffer,te,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(Ae){t.bindTexture(n.TEXTURE_CUBE_MAP,Ne.__webglTexture),Y(n.TEXTURE_CUBE_MAP,Z);for(let Ze=0;Ze<6;Ze++)if(Z.mipmaps&&Z.mipmaps.length>0)for(let ft=0;ft<Z.mipmaps.length;ft++)pe(de.__webglFramebuffer[Ze][ft],te,Z,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Ze,ft);else pe(de.__webglFramebuffer[Ze],te,Z,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Ze,0);S(Z)&&_(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(et){for(let Ze=0,ft=Oe.length;Ze<ft;Ze++){const dt=Oe[Ze],Xe=i.get(dt);let Ke=n.TEXTURE_2D;(te.isWebGL3DRenderTarget||te.isWebGLArrayRenderTarget)&&(Ke=te.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(Ke,Xe.__webglTexture),Y(Ke,dt),pe(de.__webglFramebuffer,te,dt,n.COLOR_ATTACHMENT0+Ze,Ke,0),S(dt)&&_(Ke)}t.unbindTexture()}else{let Ze=n.TEXTURE_2D;if((te.isWebGL3DRenderTarget||te.isWebGLArrayRenderTarget)&&(Ze=te.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(Ze,Ne.__webglTexture),Y(Ze,Z),Z.mipmaps&&Z.mipmaps.length>0)for(let ft=0;ft<Z.mipmaps.length;ft++)pe(de.__webglFramebuffer[ft],te,Z,n.COLOR_ATTACHMENT0,Ze,ft);else pe(de.__webglFramebuffer,te,Z,n.COLOR_ATTACHMENT0,Ze,0);S(Z)&&_(Ze),t.unbindTexture()}te.depthBuffer&&xe(te)}function me(te){const Z=te.textures;for(let de=0,Ne=Z.length;de<Ne;de++){const Oe=Z[de];if(S(Oe)){const Ae=T(te),et=i.get(Oe).__webglTexture;t.bindTexture(Ae,et),_(Ae),t.unbindTexture()}}}const ve=[],he=[];function Ce(te){if(te.samples>0){if(Le(te)===!1){const Z=te.textures,de=te.width,Ne=te.height;let Oe=n.COLOR_BUFFER_BIT;const Ae=te.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,et=i.get(te),Ze=Z.length>1;if(Ze)for(let dt=0;dt<Z.length;dt++)t.bindFramebuffer(n.FRAMEBUFFER,et.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+dt,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,et.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+dt,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,et.__webglMultisampledFramebuffer);const ft=te.texture.mipmaps;ft&&ft.length>0?t.bindFramebuffer(n.DRAW_FRAMEBUFFER,et.__webglFramebuffer[0]):t.bindFramebuffer(n.DRAW_FRAMEBUFFER,et.__webglFramebuffer);for(let dt=0;dt<Z.length;dt++){if(te.resolveDepthBuffer&&(te.depthBuffer&&(Oe|=n.DEPTH_BUFFER_BIT),te.stencilBuffer&&te.resolveStencilBuffer&&(Oe|=n.STENCIL_BUFFER_BIT)),Ze){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,et.__webglColorRenderbuffer[dt]);const Xe=i.get(Z[dt]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,Xe,0)}n.blitFramebuffer(0,0,de,Ne,0,0,de,Ne,Oe,n.NEAREST),l===!0&&(ve.length=0,he.length=0,ve.push(n.COLOR_ATTACHMENT0+dt),te.depthBuffer&&te.resolveDepthBuffer===!1&&(ve.push(Ae),he.push(Ae),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,he)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,ve))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),Ze)for(let dt=0;dt<Z.length;dt++){t.bindFramebuffer(n.FRAMEBUFFER,et.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+dt,n.RENDERBUFFER,et.__webglColorRenderbuffer[dt]);const Xe=i.get(Z[dt]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,et.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+dt,n.TEXTURE_2D,Xe,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,et.__webglMultisampledFramebuffer)}else if(te.depthBuffer&&te.resolveDepthBuffer===!1&&l){const Z=te.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[Z])}}}function Re(te){return Math.min(r.maxSamples,te.samples)}function Le(te){const Z=i.get(te);return te.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&Z.__useRenderToTexture!==!1}function Ie(te){const Z=o.render.frame;h.get(te)!==Z&&(h.set(te,Z),te.update())}function be(te,Z){const de=te.colorSpace,Ne=te.format,Oe=te.type;return te.isCompressedTexture===!0||te.isVideoTexture===!0||de!==ld&&de!==Sf&&(Wn.getTransfer(de)===pi?(Ne!==eo||Oe!==wl)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",de)),Z}function Je(te){return typeof HTMLImageElement<"u"&&te instanceof HTMLImageElement?(u.width=te.naturalWidth||te.width,u.height=te.naturalHeight||te.height):typeof VideoFrame<"u"&&te instanceof VideoFrame?(u.width=te.displayWidth,u.height=te.displayHeight):(u.width=te.width,u.height=te.height),u}this.allocateTextureUnit=z,this.resetTextureUnits=F,this.setTexture2D=X,this.setTexture2DArray=j,this.setTexture3D=G,this.setTextureCube=K,this.rebindTextures=ge,this.setupRenderTarget=oe,this.updateRenderTargetMipmap=me,this.updateMultisampleRenderTarget=Ce,this.setupDepthRenderbuffer=xe,this.setupFrameBufferTexture=pe,this.useMultisampledRTT=Le}function I8(n,e){function t(i,r=Sf){let s;const o=Wn.getTransfer(r);if(i===wl)return n.UNSIGNED_BYTE;if(i===lT)return n.UNSIGNED_SHORT_4_4_4_4;if(i===cT)return n.UNSIGNED_SHORT_5_5_5_1;if(i===fO)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===hO)return n.UNSIGNED_INT_10F_11F_11F_REV;if(i===cO)return n.BYTE;if(i===uO)return n.SHORT;if(i===y0)return n.UNSIGNED_SHORT;if(i===aT)return n.INT;if(i===Ff)return n.UNSIGNED_INT;if(i===oa)return n.FLOAT;if(i===X0)return n.HALF_FLOAT;if(i===dO)return n.ALPHA;if(i===pO)return n.RGB;if(i===eo)return n.RGBA;if(i===_0)return n.DEPTH_COMPONENT;if(i===x0)return n.DEPTH_STENCIL;if(i===uT)return n.RED;if(i===O_)return n.RED_INTEGER;if(i===mO)return n.RG;if(i===fT)return n.RG_INTEGER;if(i===hT)return n.RGBA_INTEGER;if(i===Ab||i===Cb||i===Rb||i===Db)if(o===pi)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(i===Ab)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===Cb)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===Rb)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===Db)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(i===Ab)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===Cb)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===Rb)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===Db)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===Xw||i===qw||i===Yw||i===$w)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(i===Xw)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===qw)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===Yw)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===$w)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===Zw||i===Kw||i===Qw)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(i===Zw||i===Kw)return o===pi?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(i===Qw)return o===pi?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===Jw||i===eE||i===tE||i===nE||i===iE||i===rE||i===sE||i===oE||i===aE||i===lE||i===cE||i===uE||i===fE||i===hE)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(i===Jw)return o===pi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===eE)return o===pi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===tE)return o===pi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===nE)return o===pi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===iE)return o===pi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===rE)return o===pi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===sE)return o===pi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===oE)return o===pi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===aE)return o===pi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===lE)return o===pi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===cE)return o===pi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===uE)return o===pi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===fE)return o===pi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===hE)return o===pi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===dE||i===pE||i===mE)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(i===dE)return o===pi?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===pE)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===mE)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===gE||i===vE||i===yE||i===bE)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(i===gE)return s.COMPRESSED_RED_RGTC1_EXT;if(i===vE)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===yE)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===bE)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===b0?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:t}}const Gle=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,Hle=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class jle{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t){if(this.texture===null){const i=new CO(e.texture);(e.depthNear!==t.depthNear||e.depthFar!==t.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=i}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,i=new El({vertexShader:Gle,fragmentShader:Hle,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Pi(new jf(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class Wle extends yu{constructor(e,t){super();const i=this;let r=null,s=1,o=null,a="local-floor",l=1,u=null,h=null,p=null,m=null,y=null,b=null;const x=typeof XRWebGLBinding<"u",S=new jle,_={},T=t.getContextAttributes();let A=null,M=null;const C=[],R=[],L=new ot;let I=null;const P=new Fr;P.viewport=new Vn;const U=new Fr;U.viewport=new Vn;const B=[P,U],F=new w8;let z=null,W=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(le){let fe=C[le];return fe===void 0&&(fe=new rw,C[le]=fe),fe.getTargetRaySpace()},this.getControllerGrip=function(le){let fe=C[le];return fe===void 0&&(fe=new rw,C[le]=fe),fe.getGripSpace()},this.getHand=function(le){let fe=C[le];return fe===void 0&&(fe=new rw,C[le]=fe),fe.getHandSpace()};function X(le){const fe=R.indexOf(le.inputSource);if(fe===-1)return;const pe=C[fe];pe!==void 0&&(pe.update(le.inputSource,le.frame,u||o),pe.dispatchEvent({type:le.type,data:le.inputSource}))}function j(){r.removeEventListener("select",X),r.removeEventListener("selectstart",X),r.removeEventListener("selectend",X),r.removeEventListener("squeeze",X),r.removeEventListener("squeezestart",X),r.removeEventListener("squeezeend",X),r.removeEventListener("end",j),r.removeEventListener("inputsourceschange",G);for(let le=0;le<C.length;le++){const fe=R[le];fe!==null&&(R[le]=null,C[le].disconnect(fe))}z=null,W=null,S.reset();for(const le in _)delete _[le];e.setRenderTarget(A),y=null,m=null,p=null,r=null,M=null,ne.stop(),i.isPresenting=!1,e.setPixelRatio(I),e.setSize(L.width,L.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(le){s=le,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(le){a=le,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||o},this.setReferenceSpace=function(le){u=le},this.getBaseLayer=function(){return m!==null?m:y},this.getBinding=function(){return p===null&&x&&(p=new XRWebGLBinding(r,t)),p},this.getFrame=function(){return b},this.getSession=function(){return r},this.setSession=async function(le){if(r=le,r!==null){if(A=e.getRenderTarget(),r.addEventListener("select",X),r.addEventListener("selectstart",X),r.addEventListener("selectend",X),r.addEventListener("squeeze",X),r.addEventListener("squeezestart",X),r.addEventListener("squeezeend",X),r.addEventListener("end",j),r.addEventListener("inputsourceschange",G),T.xrCompatible!==!0&&await t.makeXRCompatible(),I=e.getPixelRatio(),e.getSize(L),x&&"createProjectionLayer"in XRWebGLBinding.prototype){let pe=null,Ee=null,Te=null;T.depth&&(Te=T.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,pe=T.stencil?x0:_0,Ee=T.stencil?b0:Ff);const xe={colorFormat:t.RGBA8,depthFormat:Te,scaleFactor:s};p=this.getBinding(),m=p.createProjectionLayer(xe),r.updateRenderState({layers:[m]}),e.setPixelRatio(1),e.setSize(m.textureWidth,m.textureHeight,!1),M=new gu(m.textureWidth,m.textureHeight,{format:eo,type:wl,depthTexture:new AO(m.textureWidth,m.textureHeight,Ee,void 0,void 0,void 0,void 0,void 0,void 0,pe),stencilBuffer:T.stencil,colorSpace:e.outputColorSpace,samples:T.antialias?4:0,resolveDepthBuffer:m.ignoreDepthValues===!1,resolveStencilBuffer:m.ignoreDepthValues===!1})}else{const pe={antialias:T.antialias,alpha:!0,depth:T.depth,stencil:T.stencil,framebufferScaleFactor:s};y=new XRWebGLLayer(r,t,pe),r.updateRenderState({baseLayer:y}),e.setPixelRatio(1),e.setSize(y.framebufferWidth,y.framebufferHeight,!1),M=new gu(y.framebufferWidth,y.framebufferHeight,{format:eo,type:wl,colorSpace:e.outputColorSpace,stencilBuffer:T.stencil,resolveDepthBuffer:y.ignoreDepthValues===!1,resolveStencilBuffer:y.ignoreDepthValues===!1})}M.isXRRenderTarget=!0,this.setFoveation(l),u=null,o=await r.requestReferenceSpace(a),ne.setContext(r),ne.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return S.getDepthTexture()};function G(le){for(let fe=0;fe<le.removed.length;fe++){const pe=le.removed[fe],Ee=R.indexOf(pe);Ee>=0&&(R[Ee]=null,C[Ee].disconnect(pe))}for(let fe=0;fe<le.added.length;fe++){const pe=le.added[fe];let Ee=R.indexOf(pe);if(Ee===-1){for(let xe=0;xe<C.length;xe++)if(xe>=R.length){R.push(pe),Ee=xe;break}else if(R[xe]===null){R[xe]=pe,Ee=xe;break}if(Ee===-1)break}const Te=C[Ee];Te&&Te.connect(pe)}}const K=new ae,J=new ae;function ee(le,fe,pe){K.setFromMatrixPosition(fe.matrixWorld),J.setFromMatrixPosition(pe.matrixWorld);const Ee=K.distanceTo(J),Te=fe.projectionMatrix.elements,xe=pe.projectionMatrix.elements,ge=Te[14]/(Te[10]-1),oe=Te[14]/(Te[10]+1),me=(Te[9]+1)/Te[5],ve=(Te[9]-1)/Te[5],he=(Te[8]-1)/Te[0],Ce=(xe[8]+1)/xe[0],Re=ge*he,Le=ge*Ce,Ie=Ee/(-he+Ce),be=Ie*-he;if(fe.matrixWorld.decompose(le.position,le.quaternion,le.scale),le.translateX(be),le.translateZ(Ie),le.matrixWorld.compose(le.position,le.quaternion,le.scale),le.matrixWorldInverse.copy(le.matrixWorld).invert(),Te[10]===-1)le.projectionMatrix.copy(fe.projectionMatrix),le.projectionMatrixInverse.copy(fe.projectionMatrixInverse);else{const Je=ge+Ie,te=oe+Ie,Z=Re-be,de=Le+(Ee-be),Ne=me*oe/te*Je,Oe=ve*oe/te*Je;le.projectionMatrix.makePerspective(Z,de,Ne,Oe,Je,te),le.projectionMatrixInverse.copy(le.projectionMatrix).invert()}}function V(le,fe){fe===null?le.matrixWorld.copy(le.matrix):le.matrixWorld.multiplyMatrices(fe.matrixWorld,le.matrix),le.matrixWorldInverse.copy(le.matrixWorld).invert()}this.updateCamera=function(le){if(r===null)return;let fe=le.near,pe=le.far;S.texture!==null&&(S.depthNear>0&&(fe=S.depthNear),S.depthFar>0&&(pe=S.depthFar)),F.near=U.near=P.near=fe,F.far=U.far=P.far=pe,(z!==F.near||W!==F.far)&&(r.updateRenderState({depthNear:F.near,depthFar:F.far}),z=F.near,W=F.far),F.layers.mask=le.layers.mask|6,P.layers.mask=F.layers.mask&3,U.layers.mask=F.layers.mask&5;const Ee=le.parent,Te=F.cameras;V(F,Ee);for(let xe=0;xe<Te.length;xe++)V(Te[xe],Ee);Te.length===2?ee(F,P,U):F.projectionMatrix.copy(P.projectionMatrix),Y(le,F,Ee)};function Y(le,fe,pe){pe===null?le.matrix.copy(fe.matrixWorld):(le.matrix.copy(pe.matrixWorld),le.matrix.invert(),le.matrix.multiply(fe.matrixWorld)),le.matrix.decompose(le.position,le.quaternion,le.scale),le.updateMatrixWorld(!0),le.projectionMatrix.copy(fe.projectionMatrix),le.projectionMatrixInverse.copy(fe.projectionMatrixInverse),le.isPerspectiveCamera&&(le.fov=w0*2*Math.atan(1/le.projectionMatrix.elements[5]),le.zoom=1)}this.getCamera=function(){return F},this.getFoveation=function(){if(!(m===null&&y===null))return l},this.setFoveation=function(le){l=le,m!==null&&(m.fixedFoveation=le),y!==null&&y.fixedFoveation!==void 0&&(y.fixedFoveation=le)},this.hasDepthSensing=function(){return S.texture!==null},this.getDepthSensingMesh=function(){return S.getMesh(F)},this.getCameraTexture=function(le){return _[le]};let Q=null;function re(le,fe){if(h=fe.getViewerPose(u||o),b=fe,h!==null){const pe=h.views;y!==null&&(e.setRenderTargetFramebuffer(M,y.framebuffer),e.setRenderTarget(M));let Ee=!1;pe.length!==F.cameras.length&&(F.cameras.length=0,Ee=!0);for(let oe=0;oe<pe.length;oe++){const me=pe[oe];let ve=null;if(y!==null)ve=y.getViewport(me);else{const Ce=p.getViewSubImage(m,me);ve=Ce.viewport,oe===0&&(e.setRenderTargetTextures(M,Ce.colorTexture,Ce.depthStencilTexture),e.setRenderTarget(M))}let he=B[oe];he===void 0&&(he=new Fr,he.layers.enable(oe),he.viewport=new Vn,B[oe]=he),he.matrix.fromArray(me.transform.matrix),he.matrix.decompose(he.position,he.quaternion,he.scale),he.projectionMatrix.fromArray(me.projectionMatrix),he.projectionMatrixInverse.copy(he.projectionMatrix).invert(),he.viewport.set(ve.x,ve.y,ve.width,ve.height),oe===0&&(F.matrix.copy(he.matrix),F.matrix.decompose(F.position,F.quaternion,F.scale)),Ee===!0&&F.cameras.push(he)}const Te=r.enabledFeatures;if(Te&&Te.includes("depth-sensing")&&r.depthUsage=="gpu-optimized"&&x){p=i.getBinding();const oe=p.getDepthInformation(pe[0]);oe&&oe.isValid&&oe.texture&&S.init(oe,r.renderState)}if(Te&&Te.includes("camera-access")&&x){e.state.unbindTexture(),p=i.getBinding();for(let oe=0;oe<pe.length;oe++){const me=pe[oe].camera;if(me){let ve=_[me];ve||(ve=new CO,_[me]=ve);const he=p.getCameraImage(me);ve.sourceTexture=he}}}}for(let pe=0;pe<C.length;pe++){const Ee=R[pe],Te=C[pe];Ee!==null&&Te!==void 0&&Te.update(Ee,fe,u||o)}Q&&Q(le,fe),fe.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:fe}),b=null}const ne=new R8;ne.setAnimationLoop(re),this.setAnimationLoop=function(le){Q=le},this.dispose=function(){}}}const mp=new Ro,Xle=new Kt;function qle(n,e){function t(S,_){S.matrixAutoUpdate===!0&&S.updateMatrix(),_.value.copy(S.matrix)}function i(S,_){_.color.getRGB(S.fogColor.value,O6(n)),_.isFog?(S.fogNear.value=_.near,S.fogFar.value=_.far):_.isFogExp2&&(S.fogDensity.value=_.density)}function r(S,_,T,A,M){_.isMeshBasicMaterial||_.isMeshLambertMaterial?s(S,_):_.isMeshToonMaterial?(s(S,_),p(S,_)):_.isMeshPhongMaterial?(s(S,_),h(S,_)):_.isMeshStandardMaterial?(s(S,_),m(S,_),_.isMeshPhysicalMaterial&&y(S,_,M)):_.isMeshMatcapMaterial?(s(S,_),b(S,_)):_.isMeshDepthMaterial?s(S,_):_.isMeshDistanceMaterial?(s(S,_),x(S,_)):_.isMeshNormalMaterial?s(S,_):_.isLineBasicMaterial?(o(S,_),_.isLineDashedMaterial&&a(S,_)):_.isPointsMaterial?l(S,_,T,A):_.isSpriteMaterial?u(S,_):_.isShadowMaterial?(S.color.value.copy(_.color),S.opacity.value=_.opacity):_.isShaderMaterial&&(_.uniformsNeedUpdate=!1)}function s(S,_){S.opacity.value=_.opacity,_.color&&S.diffuse.value.copy(_.color),_.emissive&&S.emissive.value.copy(_.emissive).multiplyScalar(_.emissiveIntensity),_.map&&(S.map.value=_.map,t(_.map,S.mapTransform)),_.alphaMap&&(S.alphaMap.value=_.alphaMap,t(_.alphaMap,S.alphaMapTransform)),_.bumpMap&&(S.bumpMap.value=_.bumpMap,t(_.bumpMap,S.bumpMapTransform),S.bumpScale.value=_.bumpScale,_.side===Co&&(S.bumpScale.value*=-1)),_.normalMap&&(S.normalMap.value=_.normalMap,t(_.normalMap,S.normalMapTransform),S.normalScale.value.copy(_.normalScale),_.side===Co&&S.normalScale.value.negate()),_.displacementMap&&(S.displacementMap.value=_.displacementMap,t(_.displacementMap,S.displacementMapTransform),S.displacementScale.value=_.displacementScale,S.displacementBias.value=_.displacementBias),_.emissiveMap&&(S.emissiveMap.value=_.emissiveMap,t(_.emissiveMap,S.emissiveMapTransform)),_.specularMap&&(S.specularMap.value=_.specularMap,t(_.specularMap,S.specularMapTransform)),_.alphaTest>0&&(S.alphaTest.value=_.alphaTest);const T=e.get(_),A=T.envMap,M=T.envMapRotation;A&&(S.envMap.value=A,mp.copy(M),mp.x*=-1,mp.y*=-1,mp.z*=-1,A.isCubeTexture&&A.isRenderTargetTexture===!1&&(mp.y*=-1,mp.z*=-1),S.envMapRotation.value.setFromMatrix4(Xle.makeRotationFromEuler(mp)),S.flipEnvMap.value=A.isCubeTexture&&A.isRenderTargetTexture===!1?-1:1,S.reflectivity.value=_.reflectivity,S.ior.value=_.ior,S.refractionRatio.value=_.refractionRatio),_.lightMap&&(S.lightMap.value=_.lightMap,S.lightMapIntensity.value=_.lightMapIntensity,t(_.lightMap,S.lightMapTransform)),_.aoMap&&(S.aoMap.value=_.aoMap,S.aoMapIntensity.value=_.aoMapIntensity,t(_.aoMap,S.aoMapTransform))}function o(S,_){S.diffuse.value.copy(_.color),S.opacity.value=_.opacity,_.map&&(S.map.value=_.map,t(_.map,S.mapTransform))}function a(S,_){S.dashSize.value=_.dashSize,S.totalSize.value=_.dashSize+_.gapSize,S.scale.value=_.scale}function l(S,_,T,A){S.diffuse.value.copy(_.color),S.opacity.value=_.opacity,S.size.value=_.size*T,S.scale.value=A*.5,_.map&&(S.map.value=_.map,t(_.map,S.uvTransform)),_.alphaMap&&(S.alphaMap.value=_.alphaMap,t(_.alphaMap,S.alphaMapTransform)),_.alphaTest>0&&(S.alphaTest.value=_.alphaTest)}function u(S,_){S.diffuse.value.copy(_.color),S.opacity.value=_.opacity,S.rotation.value=_.rotation,_.map&&(S.map.value=_.map,t(_.map,S.mapTransform)),_.alphaMap&&(S.alphaMap.value=_.alphaMap,t(_.alphaMap,S.alphaMapTransform)),_.alphaTest>0&&(S.alphaTest.value=_.alphaTest)}function h(S,_){S.specular.value.copy(_.specular),S.shininess.value=Math.max(_.shininess,1e-4)}function p(S,_){_.gradientMap&&(S.gradientMap.value=_.gradientMap)}function m(S,_){S.metalness.value=_.metalness,_.metalnessMap&&(S.metalnessMap.value=_.metalnessMap,t(_.metalnessMap,S.metalnessMapTransform)),S.roughness.value=_.roughness,_.roughnessMap&&(S.roughnessMap.value=_.roughnessMap,t(_.roughnessMap,S.roughnessMapTransform)),_.envMap&&(S.envMapIntensity.value=_.envMapIntensity)}function y(S,_,T){S.ior.value=_.ior,_.sheen>0&&(S.sheenColor.value.copy(_.sheenColor).multiplyScalar(_.sheen),S.sheenRoughness.value=_.sheenRoughness,_.sheenColorMap&&(S.sheenColorMap.value=_.sheenColorMap,t(_.sheenColorMap,S.sheenColorMapTransform)),_.sheenRoughnessMap&&(S.sheenRoughnessMap.value=_.sheenRoughnessMap,t(_.sheenRoughnessMap,S.sheenRoughnessMapTransform))),_.clearcoat>0&&(S.clearcoat.value=_.clearcoat,S.clearcoatRoughness.value=_.clearcoatRoughness,_.clearcoatMap&&(S.clearcoatMap.value=_.clearcoatMap,t(_.clearcoatMap,S.clearcoatMapTransform)),_.clearcoatRoughnessMap&&(S.clearcoatRoughnessMap.value=_.clearcoatRoughnessMap,t(_.clearcoatRoughnessMap,S.clearcoatRoughnessMapTransform)),_.clearcoatNormalMap&&(S.clearcoatNormalMap.value=_.clearcoatNormalMap,t(_.clearcoatNormalMap,S.clearcoatNormalMapTransform),S.clearcoatNormalScale.value.copy(_.clearcoatNormalScale),_.side===Co&&S.clearcoatNormalScale.value.negate())),_.dispersion>0&&(S.dispersion.value=_.dispersion),_.iridescence>0&&(S.iridescence.value=_.iridescence,S.iridescenceIOR.value=_.iridescenceIOR,S.iridescenceThicknessMinimum.value=_.iridescenceThicknessRange[0],S.iridescenceThicknessMaximum.value=_.iridescenceThicknessRange[1],_.iridescenceMap&&(S.iridescenceMap.value=_.iridescenceMap,t(_.iridescenceMap,S.iridescenceMapTransform)),_.iridescenceThicknessMap&&(S.iridescenceThicknessMap.value=_.iridescenceThicknessMap,t(_.iridescenceThicknessMap,S.iridescenceThicknessMapTransform))),_.transmission>0&&(S.transmission.value=_.transmission,S.transmissionSamplerMap.value=T.texture,S.transmissionSamplerSize.value.set(T.width,T.height),_.transmissionMap&&(S.transmissionMap.value=_.transmissionMap,t(_.transmissionMap,S.transmissionMapTransform)),S.thickness.value=_.thickness,_.thicknessMap&&(S.thicknessMap.value=_.thicknessMap,t(_.thicknessMap,S.thicknessMapTransform)),S.attenuationDistance.value=_.attenuationDistance,S.attenuationColor.value.copy(_.attenuationColor)),_.anisotropy>0&&(S.anisotropyVector.value.set(_.anisotropy*Math.cos(_.anisotropyRotation),_.anisotropy*Math.sin(_.anisotropyRotation)),_.anisotropyMap&&(S.anisotropyMap.value=_.anisotropyMap,t(_.anisotropyMap,S.anisotropyMapTransform))),S.specularIntensity.value=_.specularIntensity,S.specularColor.value.copy(_.specularColor),_.specularColorMap&&(S.specularColorMap.value=_.specularColorMap,t(_.specularColorMap,S.specularColorMapTransform)),_.specularIntensityMap&&(S.specularIntensityMap.value=_.specularIntensityMap,t(_.specularIntensityMap,S.specularIntensityMapTransform))}function b(S,_){_.matcap&&(S.matcap.value=_.matcap)}function x(S,_){const T=e.get(_).light;S.referencePosition.value.setFromMatrixPosition(T.matrixWorld),S.nearDistance.value=T.shadow.camera.near,S.farDistance.value=T.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function Yle(n,e,t,i){let r={},s={},o=[];const a=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function l(T,A){const M=A.program;i.uniformBlockBinding(T,M)}function u(T,A){let M=r[T.id];M===void 0&&(b(T),M=h(T),r[T.id]=M,T.addEventListener("dispose",S));const C=A.program;i.updateUBOMapping(T,C);const R=e.render.frame;s[T.id]!==R&&(m(T),s[T.id]=R)}function h(T){const A=p();T.__bindingPointIndex=A;const M=n.createBuffer(),C=T.__size,R=T.usage;return n.bindBuffer(n.UNIFORM_BUFFER,M),n.bufferData(n.UNIFORM_BUFFER,C,R),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,A,M),M}function p(){for(let T=0;T<a;T++)if(o.indexOf(T)===-1)return o.push(T),T;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function m(T){const A=r[T.id],M=T.uniforms,C=T.__cache;n.bindBuffer(n.UNIFORM_BUFFER,A);for(let R=0,L=M.length;R<L;R++){const I=Array.isArray(M[R])?M[R]:[M[R]];for(let P=0,U=I.length;P<U;P++){const B=I[P];if(y(B,R,P,C)===!0){const F=B.__offset,z=Array.isArray(B.value)?B.value:[B.value];let W=0;for(let X=0;X<z.length;X++){const j=z[X],G=x(j);typeof j=="number"||typeof j=="boolean"?(B.__data[0]=j,n.bufferSubData(n.UNIFORM_BUFFER,F+W,B.__data)):j.isMatrix3?(B.__data[0]=j.elements[0],B.__data[1]=j.elements[1],B.__data[2]=j.elements[2],B.__data[3]=0,B.__data[4]=j.elements[3],B.__data[5]=j.elements[4],B.__data[6]=j.elements[5],B.__data[7]=0,B.__data[8]=j.elements[6],B.__data[9]=j.elements[7],B.__data[10]=j.elements[8],B.__data[11]=0):(j.toArray(B.__data,W),W+=G.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,F,B.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function y(T,A,M,C){const R=T.value,L=A+"_"+M;if(C[L]===void 0)return typeof R=="number"||typeof R=="boolean"?C[L]=R:C[L]=R.clone(),!0;{const I=C[L];if(typeof R=="number"||typeof R=="boolean"){if(I!==R)return C[L]=R,!0}else if(I.equals(R)===!1)return I.copy(R),!0}return!1}function b(T){const A=T.uniforms;let M=0;const C=16;for(let L=0,I=A.length;L<I;L++){const P=Array.isArray(A[L])?A[L]:[A[L]];for(let U=0,B=P.length;U<B;U++){const F=P[U],z=Array.isArray(F.value)?F.value:[F.value];for(let W=0,X=z.length;W<X;W++){const j=z[W],G=x(j),K=M%C,J=K%G.boundary,ee=K+J;M+=J,ee!==0&&C-ee<G.storage&&(M+=C-ee),F.__data=new Float32Array(G.storage/Float32Array.BYTES_PER_ELEMENT),F.__offset=M,M+=G.storage}}}const R=M%C;return R>0&&(M+=C-R),T.__size=M,T.__cache={},this}function x(T){const A={boundary:0,storage:0};return typeof T=="number"||typeof T=="boolean"?(A.boundary=4,A.storage=4):T.isVector2?(A.boundary=8,A.storage=8):T.isVector3||T.isColor?(A.boundary=16,A.storage=12):T.isVector4?(A.boundary=16,A.storage=16):T.isMatrix3?(A.boundary=48,A.storage=48):T.isMatrix4?(A.boundary=64,A.storage=64):T.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",T),A}function S(T){const A=T.target;A.removeEventListener("dispose",S);const M=o.indexOf(A.__bindingPointIndex);o.splice(M,1),n.deleteBuffer(r[A.id]),delete r[A.id],delete s[A.id]}function _(){for(const T in r)n.deleteBuffer(r[T]);o=[],r={},s={}}return{bind:l,update:u,dispose:_}}class N8{constructor(e={}){const{canvas:t=C6(),context:i=null,depth:r=!0,stencil:s=!1,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:u=!1,powerPreference:h="default",failIfMajorPerformanceCaveat:p=!1,reversedDepthBuffer:m=!1}=e;this.isWebGLRenderer=!0;let y;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");y=i.getContextAttributes().alpha}else y=o;const b=new Uint32Array(4),x=new Int32Array(4);let S=null,_=null;const T=[],A=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=fu,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const M=this;let C=!1;this._outputColorSpace=Ks;let R=0,L=0,I=null,P=-1,U=null;const B=new Vn,F=new Vn;let z=null;const W=new vt(0);let X=0,j=t.width,G=t.height,K=1,J=null,ee=null;const V=new Vn(0,0,j,G),Y=new Vn(0,0,j,G);let Q=!1;const re=new im;let ne=!1,le=!1;const fe=new Kt,pe=new ae,Ee=new Vn,Te={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let xe=!1;function ge(){return I===null?K:1}let oe=i;function me(ce,De){return t.getContext(ce,De)}try{const ce={alpha:!0,depth:r,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:u,powerPreference:h,failIfMajorPerformanceCaveat:p};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${rT}`),t.addEventListener("webglcontextlost",st,!1),t.addEventListener("webglcontextrestored",St,!1),t.addEventListener("webglcontextcreationerror",Qe,!1),oe===null){const De="webgl2";if(oe=me(De,ce),oe===null)throw me(De)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(ce){throw console.error("THREE.WebGLRenderer: "+ce.message),ce}let ve,he,Ce,Re,Le,Ie,be,Je,te,Z,de,Ne,Oe,Ae,et,Ze,ft,dt,Xe,Ke,nt,ct,ut,Vt;function Se(){ve=new oae(oe),ve.init(),ct=new I8(oe,ve),he=new Joe(oe,ve,e,ct),Ce=new Ble(oe,ve),he.reversedDepthBuffer&&m&&Ce.buffers.depth.setReversed(!0),Re=new cae(oe),Le=new Ale,Ie=new Vle(oe,ve,Ce,Le,he,ct,Re),be=new tae(M),Je=new sae(M),te=new mre(oe),ut=new Koe(oe,te),Z=new aae(oe,te,Re,ut),de=new fae(oe,Z,te,Re),Xe=new uae(oe,he,Ie),Ze=new eae(Le),Ne=new Mle(M,be,Je,ve,he,ut,Ze),Oe=new qle(M,Le),Ae=new Rle,et=new Nle(ve),dt=new Zoe(M,be,Je,Ce,de,y,l),ft=new zle(M,de,he),Vt=new Yle(oe,Re,he,Ce),Ke=new Qoe(oe,ve,Re),nt=new lae(oe,ve,Re),Re.programs=Ne.programs,M.capabilities=he,M.extensions=ve,M.properties=Le,M.renderLists=Ae,M.shadowMap=ft,M.state=Ce,M.info=Re}Se();const qe=new Wle(M,oe);this.xr=qe,this.getContext=function(){return oe},this.getContextAttributes=function(){return oe.getContextAttributes()},this.forceContextLoss=function(){const ce=ve.get("WEBGL_lose_context");ce&&ce.loseContext()},this.forceContextRestore=function(){const ce=ve.get("WEBGL_lose_context");ce&&ce.restoreContext()},this.getPixelRatio=function(){return K},this.setPixelRatio=function(ce){ce!==void 0&&(K=ce,this.setSize(j,G,!1))},this.getSize=function(ce){return ce.set(j,G)},this.setSize=function(ce,De,Ve=!0){if(qe.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}j=ce,G=De,t.width=Math.floor(ce*K),t.height=Math.floor(De*K),Ve===!0&&(t.style.width=ce+"px",t.style.height=De+"px"),this.setViewport(0,0,ce,De)},this.getDrawingBufferSize=function(ce){return ce.set(j*K,G*K).floor()},this.setDrawingBufferSize=function(ce,De,Ve){j=ce,G=De,K=Ve,t.width=Math.floor(ce*Ve),t.height=Math.floor(De*Ve),this.setViewport(0,0,ce,De)},this.getCurrentViewport=function(ce){return ce.copy(B)},this.getViewport=function(ce){return ce.copy(V)},this.setViewport=function(ce,De,Ve,He){ce.isVector4?V.set(ce.x,ce.y,ce.z,ce.w):V.set(ce,De,Ve,He),Ce.viewport(B.copy(V).multiplyScalar(K).round())},this.getScissor=function(ce){return ce.copy(Y)},this.setScissor=function(ce,De,Ve,He){ce.isVector4?Y.set(ce.x,ce.y,ce.z,ce.w):Y.set(ce,De,Ve,He),Ce.scissor(F.copy(Y).multiplyScalar(K).round())},this.getScissorTest=function(){return Q},this.setScissorTest=function(ce){Ce.setScissorTest(Q=ce)},this.setOpaqueSort=function(ce){J=ce},this.setTransparentSort=function(ce){ee=ce},this.getClearColor=function(ce){return ce.copy(dt.getClearColor())},this.setClearColor=function(){dt.setClearColor(...arguments)},this.getClearAlpha=function(){return dt.getClearAlpha()},this.setClearAlpha=function(){dt.setClearAlpha(...arguments)},this.clear=function(ce=!0,De=!0,Ve=!0){let He=0;if(ce){let ye=!1;if(I!==null){const it=I.texture.format;ye=it===hT||it===fT||it===O_}if(ye){const it=I.texture.type,bt=it===wl||it===Ff||it===y0||it===b0||it===lT||it===cT,At=dt.getClearColor(),wt=dt.getClearAlpha(),Lt=At.r,Pt=At.g,Nt=At.b;bt?(b[0]=Lt,b[1]=Pt,b[2]=Nt,b[3]=wt,oe.clearBufferuiv(oe.COLOR,0,b)):(x[0]=Lt,x[1]=Pt,x[2]=Nt,x[3]=wt,oe.clearBufferiv(oe.COLOR,0,x))}else He|=oe.COLOR_BUFFER_BIT}De&&(He|=oe.DEPTH_BUFFER_BIT),Ve&&(He|=oe.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),oe.clear(He)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",st,!1),t.removeEventListener("webglcontextrestored",St,!1),t.removeEventListener("webglcontextcreationerror",Qe,!1),dt.dispose(),Ae.dispose(),et.dispose(),Le.dispose(),be.dispose(),Je.dispose(),de.dispose(),ut.dispose(),Vt.dispose(),Ne.dispose(),qe.dispose(),qe.removeEventListener("sessionstart",qn),qe.removeEventListener("sessionend",ii),wi.stop()};function st(ce){ce.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),C=!0}function St(){console.log("THREE.WebGLRenderer: Context Restored."),C=!1;const ce=Re.autoReset,De=ft.enabled,Ve=ft.autoUpdate,He=ft.needsUpdate,ye=ft.type;Se(),Re.autoReset=ce,ft.enabled=De,ft.autoUpdate=Ve,ft.needsUpdate=He,ft.type=ye}function Qe(ce){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",ce.statusMessage)}function Fe(ce){const De=ce.target;De.removeEventListener("dispose",Fe),gt(De)}function gt(ce){Ct(ce),Le.remove(ce)}function Ct(ce){const De=Le.get(ce).programs;De!==void 0&&(De.forEach(function(Ve){Ne.releaseProgram(Ve)}),ce.isShaderMaterial&&Ne.releaseShaderCache(ce))}this.renderBufferDirect=function(ce,De,Ve,He,ye,it){De===null&&(De=Te);const bt=ye.isMesh&&ye.matrixWorld.determinant()<0,At=Ps(ce,De,Ve,He,ye);Ce.setMaterial(He,bt);let wt=Ve.index,Lt=1;if(He.wireframe===!0){if(wt=Z.getWireframeAttribute(Ve),wt===void 0)return;Lt=2}const Pt=Ve.drawRange,Nt=Ve.attributes.position;let It=Pt.start*Lt,Pn=(Pt.start+Pt.count)*Lt;it!==null&&(It=Math.max(It,it.start*Lt),Pn=Math.min(Pn,(it.start+it.count)*Lt)),wt!==null?(It=Math.max(It,0),Pn=Math.min(Pn,wt.count)):Nt!=null&&(It=Math.max(It,0),Pn=Math.min(Pn,Nt.count));const Un=Pn-It;if(Un<0||Un===1/0)return;ut.setup(ye,He,At,Ve,wt);let kn,rn=Ke;if(wt!==null&&(kn=te.get(wt),rn=nt,rn.setIndex(kn)),ye.isMesh)He.wireframe===!0?(Ce.setLineWidth(He.wireframeLinewidth*ge()),rn.setMode(oe.LINES)):rn.setMode(oe.TRIANGLES);else if(ye.isLine){let Ot=He.linewidth;Ot===void 0&&(Ot=1),Ce.setLineWidth(Ot*ge()),ye.isLineSegments?rn.setMode(oe.LINES):ye.isLineLoop?rn.setMode(oe.LINE_LOOP):rn.setMode(oe.LINE_STRIP)}else ye.isPoints?rn.setMode(oe.POINTS):ye.isSprite&&rn.setMode(oe.TRIANGLES);if(ye.isBatchedMesh)if(ye._multiDrawInstances!==null)r_("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),rn.renderMultiDrawInstances(ye._multiDrawStarts,ye._multiDrawCounts,ye._multiDrawCount,ye._multiDrawInstances);else if(ve.get("WEBGL_multi_draw"))rn.renderMultiDraw(ye._multiDrawStarts,ye._multiDrawCounts,ye._multiDrawCount);else{const Ot=ye._multiDrawStarts,zn=ye._multiDrawCounts,mn=ye._multiDrawCount,gi=wt?te.get(wt).bytesPerElement:1,hi=Le.get(He).currentProgram.getUniforms();for(let sn=0;sn<mn;sn++)hi.setValue(oe,"_gl_DrawID",sn),rn.render(Ot[sn]/gi,zn[sn])}else if(ye.isInstancedMesh)rn.renderInstances(It,Un,ye.count);else if(Ve.isInstancedBufferGeometry){const Ot=Ve._maxInstanceCount!==void 0?Ve._maxInstanceCount:1/0,zn=Math.min(Ve.instanceCount,Ot);rn.renderInstances(It,Un,zn)}else rn.render(It,Un)};function Tt(ce,De,Ve){ce.transparent===!0&&ce.side===yr&&ce.forceSinglePass===!1?(ce.side=Co,ce.needsUpdate=!0,Jn(ce,De,Ve),ce.side=kf,ce.needsUpdate=!0,Jn(ce,De,Ve),ce.side=yr):Jn(ce,De,Ve)}this.compile=function(ce,De,Ve=null){Ve===null&&(Ve=ce),_=et.get(Ve),_.init(De),A.push(_),Ve.traverseVisible(function(ye){ye.isLight&&ye.layers.test(De.layers)&&(_.pushLight(ye),ye.castShadow&&_.pushShadow(ye))}),ce!==Ve&&ce.traverseVisible(function(ye){ye.isLight&&ye.layers.test(De.layers)&&(_.pushLight(ye),ye.castShadow&&_.pushShadow(ye))}),_.setupLights();const He=new Set;return ce.traverse(function(ye){if(!(ye.isMesh||ye.isPoints||ye.isLine||ye.isSprite))return;const it=ye.material;if(it)if(Array.isArray(it))for(let bt=0;bt<it.length;bt++){const At=it[bt];Tt(At,Ve,ye),He.add(At)}else Tt(it,Ve,ye),He.add(it)}),_=A.pop(),He},this.compileAsync=function(ce,De,Ve=null){const He=this.compile(ce,De,Ve);return new Promise(ye=>{function it(){if(He.forEach(function(bt){Le.get(bt).currentProgram.isReady()&&He.delete(bt)}),He.size===0){ye(ce);return}setTimeout(it,10)}ve.get("KHR_parallel_shader_compile")!==null?it():setTimeout(it,10)})};let Ft=null;function Xn(ce){Ft&&Ft(ce)}function qn(){wi.stop()}function ii(){wi.start()}const wi=new R8;wi.setAnimationLoop(Xn),typeof self<"u"&&wi.setContext(self),this.setAnimationLoop=function(ce){Ft=ce,qe.setAnimationLoop(ce),ce===null?wi.stop():wi.start()},qe.addEventListener("sessionstart",qn),qe.addEventListener("sessionend",ii),this.render=function(ce,De){if(De!==void 0&&De.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(C===!0)return;if(ce.matrixWorldAutoUpdate===!0&&ce.updateMatrixWorld(),De.parent===null&&De.matrixWorldAutoUpdate===!0&&De.updateMatrixWorld(),qe.enabled===!0&&qe.isPresenting===!0&&(qe.cameraAutoUpdate===!0&&qe.updateCamera(De),De=qe.getCamera()),ce.isScene===!0&&ce.onBeforeRender(M,ce,De,I),_=et.get(ce,A.length),_.init(De),A.push(_),fe.multiplyMatrices(De.projectionMatrix,De.matrixWorldInverse),re.setFromProjectionMatrix(fe,Ma,De.reversedDepth),le=this.localClippingEnabled,ne=Ze.init(this.clippingPlanes,le),S=Ae.get(ce,T.length),S.init(),T.push(S),qe.enabled===!0&&qe.isPresenting===!0){const it=M.xr.getDepthSensingMesh();it!==null&&rs(it,De,-1/0,M.sortObjects)}rs(ce,De,0,M.sortObjects),S.finish(),M.sortObjects===!0&&S.sort(J,ee),xe=qe.enabled===!1||qe.isPresenting===!1||qe.hasDepthSensing()===!1,xe&&dt.addToRenderList(S,ce),this.info.render.frame++,ne===!0&&Ze.beginShadows();const Ve=_.state.shadowsArray;ft.render(Ve,ce,De),ne===!0&&Ze.endShadows(),this.info.autoReset===!0&&this.info.reset();const He=S.opaque,ye=S.transmissive;if(_.setupLights(),De.isArrayCamera){const it=De.cameras;if(ye.length>0)for(let bt=0,At=it.length;bt<At;bt++){const wt=it[bt];Ar(He,ye,ce,wt)}xe&&dt.render(ce);for(let bt=0,At=it.length;bt<At;bt++){const wt=it[bt];_r(S,ce,wt,wt.viewport)}}else ye.length>0&&Ar(He,ye,ce,De),xe&&dt.render(ce),_r(S,ce,De);I!==null&&L===0&&(Ie.updateMultisampleRenderTarget(I),Ie.updateRenderTargetMipmap(I)),ce.isScene===!0&&ce.onAfterRender(M,ce,De),ut.resetDefaultState(),P=-1,U=null,A.pop(),A.length>0?(_=A[A.length-1],ne===!0&&Ze.setGlobalState(M.clippingPlanes,_.state.camera)):_=null,T.pop(),T.length>0?S=T[T.length-1]:S=null};function rs(ce,De,Ve,He){if(ce.visible===!1)return;if(ce.layers.test(De.layers)){if(ce.isGroup)Ve=ce.renderOrder;else if(ce.isLOD)ce.autoUpdate===!0&&ce.update(De);else if(ce.isLight)_.pushLight(ce),ce.castShadow&&_.pushShadow(ce);else if(ce.isSprite){if(!ce.frustumCulled||re.intersectsSprite(ce)){He&&Ee.setFromMatrixPosition(ce.matrixWorld).applyMatrix4(fe);const bt=de.update(ce),At=ce.material;At.visible&&S.push(ce,bt,At,Ve,Ee.z,null)}}else if((ce.isMesh||ce.isLine||ce.isPoints)&&(!ce.frustumCulled||re.intersectsObject(ce))){const bt=de.update(ce),At=ce.material;if(He&&(ce.boundingSphere!==void 0?(ce.boundingSphere===null&&ce.computeBoundingSphere(),Ee.copy(ce.boundingSphere.center)):(bt.boundingSphere===null&&bt.computeBoundingSphere(),Ee.copy(bt.boundingSphere.center)),Ee.applyMatrix4(ce.matrixWorld).applyMatrix4(fe)),Array.isArray(At)){const wt=bt.groups;for(let Lt=0,Pt=wt.length;Lt<Pt;Lt++){const Nt=wt[Lt],It=At[Nt.materialIndex];It&&It.visible&&S.push(ce,bt,It,Ve,Ee.z,Nt)}}else At.visible&&S.push(ce,bt,At,Ve,Ee.z,null)}}const it=ce.children;for(let bt=0,At=it.length;bt<At;bt++)rs(it[bt],De,Ve,He)}function _r(ce,De,Ve,He){const ye=ce.opaque,it=ce.transmissive,bt=ce.transparent;_.setupLightsView(Ve),ne===!0&&Ze.setGlobalState(M.clippingPlanes,Ve),He&&Ce.viewport(B.copy(He)),ye.length>0&&Gr(ye,De,Ve),it.length>0&&Gr(it,De,Ve),bt.length>0&&Gr(bt,De,Ve),Ce.buffers.depth.setTest(!0),Ce.buffers.depth.setMask(!0),Ce.buffers.color.setMask(!0),Ce.setPolygonOffset(!1)}function Ar(ce,De,Ve,He){if((Ve.isScene===!0?Ve.overrideMaterial:null)!==null)return;_.state.transmissionRenderTarget[He.id]===void 0&&(_.state.transmissionRenderTarget[He.id]=new gu(1,1,{generateMipmaps:!0,type:ve.has("EXT_color_buffer_half_float")||ve.has("EXT_color_buffer_float")?X0:wl,minFilter:ou,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Wn.workingColorSpace}));const it=_.state.transmissionRenderTarget[He.id],bt=He.viewport||B;it.setSize(bt.z*M.transmissionResolutionScale,bt.w*M.transmissionResolutionScale);const At=M.getRenderTarget(),wt=M.getActiveCubeFace(),Lt=M.getActiveMipmapLevel();M.setRenderTarget(it),M.getClearColor(W),X=M.getClearAlpha(),X<1&&M.setClearColor(16777215,.5),M.clear(),xe&&dt.render(Ve);const Pt=M.toneMapping;M.toneMapping=fu;const Nt=He.viewport;if(He.viewport!==void 0&&(He.viewport=void 0),_.setupLightsView(He),ne===!0&&Ze.setGlobalState(M.clippingPlanes,He),Gr(ce,Ve,He),Ie.updateMultisampleRenderTarget(it),Ie.updateRenderTargetMipmap(it),ve.has("WEBGL_multisampled_render_to_texture")===!1){let It=!1;for(let Pn=0,Un=De.length;Pn<Un;Pn++){const kn=De[Pn],rn=kn.object,Ot=kn.geometry,zn=kn.material,mn=kn.group;if(zn.side===yr&&rn.layers.test(He.layers)){const gi=zn.side;zn.side=Co,zn.needsUpdate=!0,$i(rn,Ve,He,Ot,zn,mn),zn.side=gi,zn.needsUpdate=!0,It=!0}}It===!0&&(Ie.updateMultisampleRenderTarget(it),Ie.updateRenderTargetMipmap(it))}M.setRenderTarget(At,wt,Lt),M.setClearColor(W,X),Nt!==void 0&&(He.viewport=Nt),M.toneMapping=Pt}function Gr(ce,De,Ve){const He=De.isScene===!0?De.overrideMaterial:null;for(let ye=0,it=ce.length;ye<it;ye++){const bt=ce[ye],At=bt.object,wt=bt.geometry,Lt=bt.group;let Pt=bt.material;Pt.allowOverride===!0&&He!==null&&(Pt=He),At.layers.test(Ve.layers)&&$i(At,De,Ve,wt,Pt,Lt)}}function $i(ce,De,Ve,He,ye,it){ce.onBeforeRender(M,De,Ve,He,ye,it),ce.modelViewMatrix.multiplyMatrices(Ve.matrixWorldInverse,ce.matrixWorld),ce.normalMatrix.getNormalMatrix(ce.modelViewMatrix),ye.onBeforeRender(M,De,Ve,He,ce,it),ye.transparent===!0&&ye.side===yr&&ye.forceSinglePass===!1?(ye.side=Co,ye.needsUpdate=!0,M.renderBufferDirect(Ve,De,He,ye,ce,it),ye.side=kf,ye.needsUpdate=!0,M.renderBufferDirect(Ve,De,He,ye,ce,it),ye.side=yr):M.renderBufferDirect(Ve,De,He,ye,ce,it),ce.onAfterRender(M,De,Ve,He,ye,it)}function Jn(ce,De,Ve){De.isScene!==!0&&(De=Te);const He=Le.get(ce),ye=_.state.lights,it=_.state.shadowsArray,bt=ye.state.version,At=Ne.getParameters(ce,ye.state,it,De,Ve),wt=Ne.getProgramCacheKey(At);let Lt=He.programs;He.environment=ce.isMeshStandardMaterial?De.environment:null,He.fog=De.fog,He.envMap=(ce.isMeshStandardMaterial?Je:be).get(ce.envMap||He.environment),He.envMapRotation=He.environment!==null&&ce.envMap===null?De.environmentRotation:ce.envMapRotation,Lt===void 0&&(ce.addEventListener("dispose",Fe),Lt=new Map,He.programs=Lt);let Pt=Lt.get(wt);if(Pt!==void 0){if(He.currentProgram===Pt&&He.lightsStateVersion===bt)return Hi(ce,At),Pt}else At.uniforms=Ne.getUniforms(ce),ce.onBeforeCompile(At,M),Pt=Ne.acquireProgram(At,wt),Lt.set(wt,Pt),He.uniforms=At.uniforms;const Nt=He.uniforms;return(!ce.isShaderMaterial&&!ce.isRawShaderMaterial||ce.clipping===!0)&&(Nt.clippingPlanes=Ze.uniform),Hi(ce,At),He.needsLights=no(ce),He.lightsStateVersion=bt,He.needsLights&&(Nt.ambientLightColor.value=ye.state.ambient,Nt.lightProbe.value=ye.state.probe,Nt.directionalLights.value=ye.state.directional,Nt.directionalLightShadows.value=ye.state.directionalShadow,Nt.spotLights.value=ye.state.spot,Nt.spotLightShadows.value=ye.state.spotShadow,Nt.rectAreaLights.value=ye.state.rectArea,Nt.ltc_1.value=ye.state.rectAreaLTC1,Nt.ltc_2.value=ye.state.rectAreaLTC2,Nt.pointLights.value=ye.state.point,Nt.pointLightShadows.value=ye.state.pointShadow,Nt.hemisphereLights.value=ye.state.hemi,Nt.directionalShadowMap.value=ye.state.directionalShadowMap,Nt.directionalShadowMatrix.value=ye.state.directionalShadowMatrix,Nt.spotShadowMap.value=ye.state.spotShadowMap,Nt.spotLightMatrix.value=ye.state.spotLightMatrix,Nt.spotLightMap.value=ye.state.spotLightMap,Nt.pointShadowMap.value=ye.state.pointShadowMap,Nt.pointShadowMatrix.value=ye.state.pointShadowMatrix),He.currentProgram=Pt,He.uniformsList=null,Pt}function $n(ce){if(ce.uniformsList===null){const De=ce.currentProgram.getUniforms();ce.uniformsList=sw.seqWithValue(De.seq,ce.uniforms)}return ce.uniformsList}function Hi(ce,De){const Ve=Le.get(ce);Ve.outputColorSpace=De.outputColorSpace,Ve.batching=De.batching,Ve.batchingColor=De.batchingColor,Ve.instancing=De.instancing,Ve.instancingColor=De.instancingColor,Ve.instancingMorph=De.instancingMorph,Ve.skinning=De.skinning,Ve.morphTargets=De.morphTargets,Ve.morphNormals=De.morphNormals,Ve.morphColors=De.morphColors,Ve.morphTargetsCount=De.morphTargetsCount,Ve.numClippingPlanes=De.numClippingPlanes,Ve.numIntersection=De.numClipIntersection,Ve.vertexAlphas=De.vertexAlphas,Ve.vertexTangents=De.vertexTangents,Ve.toneMapping=De.toneMapping}function Ps(ce,De,Ve,He,ye){De.isScene!==!0&&(De=Te),Ie.resetTextureUnits();const it=De.fog,bt=He.isMeshStandardMaterial?De.environment:null,At=I===null?M.outputColorSpace:I.isXRRenderTarget===!0?I.texture.colorSpace:ld,wt=(He.isMeshStandardMaterial?Je:be).get(He.envMap||bt),Lt=He.vertexColors===!0&&!!Ve.attributes.color&&Ve.attributes.color.itemSize===4,Pt=!!Ve.attributes.tangent&&(!!He.normalMap||He.anisotropy>0),Nt=!!Ve.morphAttributes.position,It=!!Ve.morphAttributes.normal,Pn=!!Ve.morphAttributes.color;let Un=fu;He.toneMapped&&(I===null||I.isXRRenderTarget===!0)&&(Un=M.toneMapping);const kn=Ve.morphAttributes.position||Ve.morphAttributes.normal||Ve.morphAttributes.color,rn=kn!==void 0?kn.length:0,Ot=Le.get(He),zn=_.state.lights;if(ne===!0&&(le===!0||ce!==U)){const Gn=ce===U&&He.id===P;Ze.setState(He,ce,Gn)}let mn=!1;He.version===Ot.__version?(Ot.needsLights&&Ot.lightsStateVersion!==zn.state.version||Ot.outputColorSpace!==At||ye.isBatchedMesh&&Ot.batching===!1||!ye.isBatchedMesh&&Ot.batching===!0||ye.isBatchedMesh&&Ot.batchingColor===!0&&ye.colorTexture===null||ye.isBatchedMesh&&Ot.batchingColor===!1&&ye.colorTexture!==null||ye.isInstancedMesh&&Ot.instancing===!1||!ye.isInstancedMesh&&Ot.instancing===!0||ye.isSkinnedMesh&&Ot.skinning===!1||!ye.isSkinnedMesh&&Ot.skinning===!0||ye.isInstancedMesh&&Ot.instancingColor===!0&&ye.instanceColor===null||ye.isInstancedMesh&&Ot.instancingColor===!1&&ye.instanceColor!==null||ye.isInstancedMesh&&Ot.instancingMorph===!0&&ye.morphTexture===null||ye.isInstancedMesh&&Ot.instancingMorph===!1&&ye.morphTexture!==null||Ot.envMap!==wt||He.fog===!0&&Ot.fog!==it||Ot.numClippingPlanes!==void 0&&(Ot.numClippingPlanes!==Ze.numPlanes||Ot.numIntersection!==Ze.numIntersection)||Ot.vertexAlphas!==Lt||Ot.vertexTangents!==Pt||Ot.morphTargets!==Nt||Ot.morphNormals!==It||Ot.morphColors!==Pn||Ot.toneMapping!==Un||Ot.morphTargetsCount!==rn)&&(mn=!0):(mn=!0,Ot.__version=He.version);let gi=Ot.currentProgram;mn===!0&&(gi=Jn(He,De,ye));let hi=!1,sn=!1,Ns=!1;const Xt=gi.getUniforms(),Zi=Ot.uniforms;if(Ce.useProgram(gi.program)&&(hi=!0,sn=!0,Ns=!0),He.id!==P&&(P=He.id,sn=!0),hi||U!==ce){Ce.buffers.depth.getReversed()&&ce.reversedDepth!==!0&&(ce._reversedDepth=!0,ce.updateProjectionMatrix()),Xt.setValue(oe,"projectionMatrix",ce.projectionMatrix),Xt.setValue(oe,"viewMatrix",ce.matrixWorldInverse);const di=Xt.map.cameraPosition;di!==void 0&&di.setValue(oe,pe.setFromMatrixPosition(ce.matrixWorld)),he.logarithmicDepthBuffer&&Xt.setValue(oe,"logDepthBufFC",2/(Math.log(ce.far+1)/Math.LN2)),(He.isMeshPhongMaterial||He.isMeshToonMaterial||He.isMeshLambertMaterial||He.isMeshBasicMaterial||He.isMeshStandardMaterial||He.isShaderMaterial)&&Xt.setValue(oe,"isOrthographic",ce.isOrthographicCamera===!0),U!==ce&&(U=ce,sn=!0,Ns=!0)}if(ye.isSkinnedMesh){Xt.setOptional(oe,ye,"bindMatrix"),Xt.setOptional(oe,ye,"bindMatrixInverse");const Gn=ye.skeleton;Gn&&(Gn.boneTexture===null&&Gn.computeBoneTexture(),Xt.setValue(oe,"boneTexture",Gn.boneTexture,Ie))}ye.isBatchedMesh&&(Xt.setOptional(oe,ye,"batchingTexture"),Xt.setValue(oe,"batchingTexture",ye._matricesTexture,Ie),Xt.setOptional(oe,ye,"batchingIdTexture"),Xt.setValue(oe,"batchingIdTexture",ye._indirectTexture,Ie),Xt.setOptional(oe,ye,"batchingColorTexture"),ye._colorsTexture!==null&&Xt.setValue(oe,"batchingColorTexture",ye._colorsTexture,Ie));const ji=Ve.morphAttributes;if((ji.position!==void 0||ji.normal!==void 0||ji.color!==void 0)&&Xe.update(ye,Ve,gi),(sn||Ot.receiveShadow!==ye.receiveShadow)&&(Ot.receiveShadow=ye.receiveShadow,Xt.setValue(oe,"receiveShadow",ye.receiveShadow)),He.isMeshGouraudMaterial&&He.envMap!==null&&(Zi.envMap.value=wt,Zi.flipEnvMap.value=wt.isCubeTexture&&wt.isRenderTargetTexture===!1?-1:1),He.isMeshStandardMaterial&&He.envMap===null&&De.environment!==null&&(Zi.envMapIntensity.value=De.environmentIntensity),sn&&(Xt.setValue(oe,"toneMappingExposure",M.toneMappingExposure),Ot.needsLights&&Is(Zi,Ns),it&&He.fog===!0&&Oe.refreshFogUniforms(Zi,it),Oe.refreshMaterialUniforms(Zi,He,K,G,_.state.transmissionRenderTarget[ce.id]),sw.upload(oe,$n(Ot),Zi,Ie)),He.isShaderMaterial&&He.uniformsNeedUpdate===!0&&(sw.upload(oe,$n(Ot),Zi,Ie),He.uniformsNeedUpdate=!1),He.isSpriteMaterial&&Xt.setValue(oe,"center",ye.center),Xt.setValue(oe,"modelViewMatrix",ye.modelViewMatrix),Xt.setValue(oe,"normalMatrix",ye.normalMatrix),Xt.setValue(oe,"modelMatrix",ye.matrixWorld),He.isShaderMaterial||He.isRawShaderMaterial){const Gn=He.uniformsGroups;for(let di=0,ro=Gn.length;di<ro;di++){const Hr=Gn[di];Vt.update(Hr,gi),Vt.bind(Hr,gi)}}return gi}function Is(ce,De){ce.ambientLightColor.needsUpdate=De,ce.lightProbe.needsUpdate=De,ce.directionalLights.needsUpdate=De,ce.directionalLightShadows.needsUpdate=De,ce.pointLights.needsUpdate=De,ce.pointLightShadows.needsUpdate=De,ce.spotLights.needsUpdate=De,ce.spotLightShadows.needsUpdate=De,ce.rectAreaLights.needsUpdate=De,ce.hemisphereLights.needsUpdate=De}function no(ce){return ce.isMeshLambertMaterial||ce.isMeshToonMaterial||ce.isMeshPhongMaterial||ce.isMeshStandardMaterial||ce.isShadowMaterial||ce.isShaderMaterial&&ce.lights===!0}this.getActiveCubeFace=function(){return R},this.getActiveMipmapLevel=function(){return L},this.getRenderTarget=function(){return I},this.setRenderTargetTextures=function(ce,De,Ve){const He=Le.get(ce);He.__autoAllocateDepthBuffer=ce.resolveDepthBuffer===!1,He.__autoAllocateDepthBuffer===!1&&(He.__useRenderToTexture=!1),Le.get(ce.texture).__webglTexture=De,Le.get(ce.depthTexture).__webglTexture=He.__autoAllocateDepthBuffer?void 0:Ve,He.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(ce,De){const Ve=Le.get(ce);Ve.__webglFramebuffer=De,Ve.__useDefaultFramebuffer=De===void 0};const Po=oe.createFramebuffer();this.setRenderTarget=function(ce,De=0,Ve=0){I=ce,R=De,L=Ve;let He=!0,ye=null,it=!1,bt=!1;if(ce){const wt=Le.get(ce);if(wt.__useDefaultFramebuffer!==void 0)Ce.bindFramebuffer(oe.FRAMEBUFFER,null),He=!1;else if(wt.__webglFramebuffer===void 0)Ie.setupRenderTarget(ce);else if(wt.__hasExternalTextures)Ie.rebindTextures(ce,Le.get(ce.texture).__webglTexture,Le.get(ce.depthTexture).__webglTexture);else if(ce.depthBuffer){const Nt=ce.depthTexture;if(wt.__boundDepthTexture!==Nt){if(Nt!==null&&Le.has(Nt)&&(ce.width!==Nt.image.width||ce.height!==Nt.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");Ie.setupDepthRenderbuffer(ce)}}const Lt=ce.texture;(Lt.isData3DTexture||Lt.isDataArrayTexture||Lt.isCompressedArrayTexture)&&(bt=!0);const Pt=Le.get(ce).__webglFramebuffer;ce.isWebGLCubeRenderTarget?(Array.isArray(Pt[De])?ye=Pt[De][Ve]:ye=Pt[De],it=!0):ce.samples>0&&Ie.useMultisampledRTT(ce)===!1?ye=Le.get(ce).__webglMultisampledFramebuffer:Array.isArray(Pt)?ye=Pt[Ve]:ye=Pt,B.copy(ce.viewport),F.copy(ce.scissor),z=ce.scissorTest}else B.copy(V).multiplyScalar(K).floor(),F.copy(Y).multiplyScalar(K).floor(),z=Q;if(Ve!==0&&(ye=Po),Ce.bindFramebuffer(oe.FRAMEBUFFER,ye)&&He&&Ce.drawBuffers(ce,ye),Ce.viewport(B),Ce.scissor(F),Ce.setScissorTest(z),it){const wt=Le.get(ce.texture);oe.framebufferTexture2D(oe.FRAMEBUFFER,oe.COLOR_ATTACHMENT0,oe.TEXTURE_CUBE_MAP_POSITIVE_X+De,wt.__webglTexture,Ve)}else if(bt){const wt=De;for(let Lt=0;Lt<ce.textures.length;Lt++){const Pt=Le.get(ce.textures[Lt]);oe.framebufferTextureLayer(oe.FRAMEBUFFER,oe.COLOR_ATTACHMENT0+Lt,Pt.__webglTexture,Ve,wt)}}else if(ce!==null&&Ve!==0){const wt=Le.get(ce.texture);oe.framebufferTexture2D(oe.FRAMEBUFFER,oe.COLOR_ATTACHMENT0,oe.TEXTURE_2D,wt.__webglTexture,Ve)}P=-1},this.readRenderTargetPixels=function(ce,De,Ve,He,ye,it,bt,At=0){if(!(ce&&ce.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let wt=Le.get(ce).__webglFramebuffer;if(ce.isWebGLCubeRenderTarget&&bt!==void 0&&(wt=wt[bt]),wt){Ce.bindFramebuffer(oe.FRAMEBUFFER,wt);try{const Lt=ce.textures[At],Pt=Lt.format,Nt=Lt.type;if(!he.textureFormatReadable(Pt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!he.textureTypeReadable(Nt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}De>=0&&De<=ce.width-He&&Ve>=0&&Ve<=ce.height-ye&&(ce.textures.length>1&&oe.readBuffer(oe.COLOR_ATTACHMENT0+At),oe.readPixels(De,Ve,He,ye,ct.convert(Pt),ct.convert(Nt),it))}finally{const Lt=I!==null?Le.get(I).__webglFramebuffer:null;Ce.bindFramebuffer(oe.FRAMEBUFFER,Lt)}}},this.readRenderTargetPixelsAsync=async function(ce,De,Ve,He,ye,it,bt,At=0){if(!(ce&&ce.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let wt=Le.get(ce).__webglFramebuffer;if(ce.isWebGLCubeRenderTarget&&bt!==void 0&&(wt=wt[bt]),wt)if(De>=0&&De<=ce.width-He&&Ve>=0&&Ve<=ce.height-ye){Ce.bindFramebuffer(oe.FRAMEBUFFER,wt);const Lt=ce.textures[At],Pt=Lt.format,Nt=Lt.type;if(!he.textureFormatReadable(Pt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!he.textureTypeReadable(Nt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const It=oe.createBuffer();oe.bindBuffer(oe.PIXEL_PACK_BUFFER,It),oe.bufferData(oe.PIXEL_PACK_BUFFER,it.byteLength,oe.STREAM_READ),ce.textures.length>1&&oe.readBuffer(oe.COLOR_ATTACHMENT0+At),oe.readPixels(De,Ve,He,ye,ct.convert(Pt),ct.convert(Nt),0);const Pn=I!==null?Le.get(I).__webglFramebuffer:null;Ce.bindFramebuffer(oe.FRAMEBUFFER,Pn);const Un=oe.fenceSync(oe.SYNC_GPU_COMMANDS_COMPLETE,0);return oe.flush(),await Ite(oe,Un,4),oe.bindBuffer(oe.PIXEL_PACK_BUFFER,It),oe.getBufferSubData(oe.PIXEL_PACK_BUFFER,0,it),oe.deleteBuffer(It),oe.deleteSync(Un),it}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(ce,De=null,Ve=0){const He=Math.pow(2,-Ve),ye=Math.floor(ce.image.width*He),it=Math.floor(ce.image.height*He),bt=De!==null?De.x:0,At=De!==null?De.y:0;Ie.setTexture2D(ce,0),oe.copyTexSubImage2D(oe.TEXTURE_2D,Ve,0,0,bt,At,ye,it),Ce.unbindTexture()};const Da=oe.createFramebuffer(),io=oe.createFramebuffer();this.copyTextureToTexture=function(ce,De,Ve=null,He=null,ye=0,it=null){it===null&&(ye!==0?(r_("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),it=ye,ye=0):it=0);let bt,At,wt,Lt,Pt,Nt,It,Pn,Un;const kn=ce.isCompressedTexture?ce.mipmaps[it]:ce.image;if(Ve!==null)bt=Ve.max.x-Ve.min.x,At=Ve.max.y-Ve.min.y,wt=Ve.isBox3?Ve.max.z-Ve.min.z:1,Lt=Ve.min.x,Pt=Ve.min.y,Nt=Ve.isBox3?Ve.min.z:0;else{const ji=Math.pow(2,-ye);bt=Math.floor(kn.width*ji),At=Math.floor(kn.height*ji),ce.isDataArrayTexture?wt=kn.depth:ce.isData3DTexture?wt=Math.floor(kn.depth*ji):wt=1,Lt=0,Pt=0,Nt=0}He!==null?(It=He.x,Pn=He.y,Un=He.z):(It=0,Pn=0,Un=0);const rn=ct.convert(De.format),Ot=ct.convert(De.type);let zn;De.isData3DTexture?(Ie.setTexture3D(De,0),zn=oe.TEXTURE_3D):De.isDataArrayTexture||De.isCompressedArrayTexture?(Ie.setTexture2DArray(De,0),zn=oe.TEXTURE_2D_ARRAY):(Ie.setTexture2D(De,0),zn=oe.TEXTURE_2D),oe.pixelStorei(oe.UNPACK_FLIP_Y_WEBGL,De.flipY),oe.pixelStorei(oe.UNPACK_PREMULTIPLY_ALPHA_WEBGL,De.premultiplyAlpha),oe.pixelStorei(oe.UNPACK_ALIGNMENT,De.unpackAlignment);const mn=oe.getParameter(oe.UNPACK_ROW_LENGTH),gi=oe.getParameter(oe.UNPACK_IMAGE_HEIGHT),hi=oe.getParameter(oe.UNPACK_SKIP_PIXELS),sn=oe.getParameter(oe.UNPACK_SKIP_ROWS),Ns=oe.getParameter(oe.UNPACK_SKIP_IMAGES);oe.pixelStorei(oe.UNPACK_ROW_LENGTH,kn.width),oe.pixelStorei(oe.UNPACK_IMAGE_HEIGHT,kn.height),oe.pixelStorei(oe.UNPACK_SKIP_PIXELS,Lt),oe.pixelStorei(oe.UNPACK_SKIP_ROWS,Pt),oe.pixelStorei(oe.UNPACK_SKIP_IMAGES,Nt);const Xt=ce.isDataArrayTexture||ce.isData3DTexture,Zi=De.isDataArrayTexture||De.isData3DTexture;if(ce.isDepthTexture){const ji=Le.get(ce),Gn=Le.get(De),di=Le.get(ji.__renderTarget),ro=Le.get(Gn.__renderTarget);Ce.bindFramebuffer(oe.READ_FRAMEBUFFER,di.__webglFramebuffer),Ce.bindFramebuffer(oe.DRAW_FRAMEBUFFER,ro.__webglFramebuffer);for(let Hr=0;Hr<wt;Hr++)Xt&&(oe.framebufferTextureLayer(oe.READ_FRAMEBUFFER,oe.COLOR_ATTACHMENT0,Le.get(ce).__webglTexture,ye,Nt+Hr),oe.framebufferTextureLayer(oe.DRAW_FRAMEBUFFER,oe.COLOR_ATTACHMENT0,Le.get(De).__webglTexture,it,Un+Hr)),oe.blitFramebuffer(Lt,Pt,bt,At,It,Pn,bt,At,oe.DEPTH_BUFFER_BIT,oe.NEAREST);Ce.bindFramebuffer(oe.READ_FRAMEBUFFER,null),Ce.bindFramebuffer(oe.DRAW_FRAMEBUFFER,null)}else if(ye!==0||ce.isRenderTargetTexture||Le.has(ce)){const ji=Le.get(ce),Gn=Le.get(De);Ce.bindFramebuffer(oe.READ_FRAMEBUFFER,Da),Ce.bindFramebuffer(oe.DRAW_FRAMEBUFFER,io);for(let di=0;di<wt;di++)Xt?oe.framebufferTextureLayer(oe.READ_FRAMEBUFFER,oe.COLOR_ATTACHMENT0,ji.__webglTexture,ye,Nt+di):oe.framebufferTexture2D(oe.READ_FRAMEBUFFER,oe.COLOR_ATTACHMENT0,oe.TEXTURE_2D,ji.__webglTexture,ye),Zi?oe.framebufferTextureLayer(oe.DRAW_FRAMEBUFFER,oe.COLOR_ATTACHMENT0,Gn.__webglTexture,it,Un+di):oe.framebufferTexture2D(oe.DRAW_FRAMEBUFFER,oe.COLOR_ATTACHMENT0,oe.TEXTURE_2D,Gn.__webglTexture,it),ye!==0?oe.blitFramebuffer(Lt,Pt,bt,At,It,Pn,bt,At,oe.COLOR_BUFFER_BIT,oe.NEAREST):Zi?oe.copyTexSubImage3D(zn,it,It,Pn,Un+di,Lt,Pt,bt,At):oe.copyTexSubImage2D(zn,it,It,Pn,Lt,Pt,bt,At);Ce.bindFramebuffer(oe.READ_FRAMEBUFFER,null),Ce.bindFramebuffer(oe.DRAW_FRAMEBUFFER,null)}else Zi?ce.isDataTexture||ce.isData3DTexture?oe.texSubImage3D(zn,it,It,Pn,Un,bt,At,wt,rn,Ot,kn.data):De.isCompressedArrayTexture?oe.compressedTexSubImage3D(zn,it,It,Pn,Un,bt,At,wt,rn,kn.data):oe.texSubImage3D(zn,it,It,Pn,Un,bt,At,wt,rn,Ot,kn):ce.isDataTexture?oe.texSubImage2D(oe.TEXTURE_2D,it,It,Pn,bt,At,rn,Ot,kn.data):ce.isCompressedTexture?oe.compressedTexSubImage2D(oe.TEXTURE_2D,it,It,Pn,kn.width,kn.height,rn,kn.data):oe.texSubImage2D(oe.TEXTURE_2D,it,It,Pn,bt,At,rn,Ot,kn);oe.pixelStorei(oe.UNPACK_ROW_LENGTH,mn),oe.pixelStorei(oe.UNPACK_IMAGE_HEIGHT,gi),oe.pixelStorei(oe.UNPACK_SKIP_PIXELS,hi),oe.pixelStorei(oe.UNPACK_SKIP_ROWS,sn),oe.pixelStorei(oe.UNPACK_SKIP_IMAGES,Ns),it===0&&De.generateMipmaps&&oe.generateMipmap(zn),Ce.unbindTexture()},this.initRenderTarget=function(ce){Le.get(ce).__webglFramebuffer===void 0&&Ie.setupRenderTarget(ce)},this.initTexture=function(ce){ce.isCubeTexture?Ie.setTextureCube(ce,0):ce.isData3DTexture?Ie.setTexture3D(ce,0):ce.isDataArrayTexture||ce.isCompressedArrayTexture?Ie.setTexture2DArray(ce,0):Ie.setTexture2D(ce,0),Ce.unbindTexture()},this.resetState=function(){R=0,L=0,I=null,Ce.reset(),ut.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Ma}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=Wn._getDrawingBufferColorSpace(e),t.unpackColorSpace=Wn._getUnpackColorSpace()}}const U8=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:aO,AddEquation:Zh,AddOperation:a6,AdditiveAnimationBlendMode:gO,AdditiveBlending:d3,AgXToneMapping:h6,AlphaFormat:dO,AlwaysCompare:M6,AlwaysDepth:Bw,AlwaysStencilFunc:v3,AmbientLight:y8,AnimationAction:M8,AnimationClip:u_,AnimationLoader:aie,AnimationMixer:Nie,AnimationObjectGroup:Pie,AnimationUtils:iie,ArcCurve:j6,ArrayCamera:w8,ArrowHelper:ore,AttachedBindMode:g3,Audio:E8,AudioAnalyser:wie,AudioContext:GO,AudioListener:_ie,AudioLoader:vie,AxesHelper:are,BackSide:Co,BasicDepthPacking:y6,BasicShadowMap:VB,BatchedMesh:F6,Bone:TO,BooleanKeyframeTrack:rm,Box2:jie,Box3:Vr,Box3Helper:rre,BoxGeometry:gd,BoxHelper:ire,BufferAttribute:ai,BufferGeometry:fn,BufferGeometryLoader:S8,ByteType:cO,Cache:au,Camera:gT,CameraHelper:nre,CanvasTexture:Mne,CapsuleGeometry:ET,CatmullRomCurve3:CT,CineonToneMapping:u6,CircleGeometry:TT,ClampToEdgeWrapping:vl,Clock:HO,Color:vt,ColorKeyframeTrack:zO,ColorManagement:Wn,CompressedArrayTexture:Ene,CompressedCubeTexture:Tne,CompressedTexture:wT,CompressedTextureLoader:lie,ConeGeometry:P_,ConstantAlphaFactor:r6,ConstantColorFactor:n6,Controls:cre,CubeCamera:L6,CubeReflectionMapping:zf,CubeRefractionMapping:ad,CubeTexture:L_,CubeTextureLoader:cie,CubeUVReflectionMapping:W0,CubicBezierCurve:DO,CubicBezierCurve3:W6,CubicInterpolant:c8,CullFaceBack:h3,CullFaceFront:BB,CullFaceFrontBack:Iee,CullFaceNone:FB,Curve:hc,CurvePath:X6,CustomBlending:GB,CustomToneMapping:f6,CylinderGeometry:Y0,Cylindrical:Hie,Data3DTexture:mT,DataArrayTexture:pT,DataTexture:hu,DataTextureLoader:uie,DataUtils:$te,DecrementStencilOp:Yee,DecrementWrapStencilOp:Zee,DefaultLoadingManager:h8,DepthFormat:_0,DepthStencilFormat:x0,DepthTexture:AO,DetachedBindMode:p6,DirectionalLight:v8,DirectionalLightHelper:tre,DiscreteInterpolant:u8,DodecahedronGeometry:MT,DoubleSide:yr,DstAlphaFactor:KB,DstColorFactor:JB,DynamicCopyUsage:fte,DynamicDrawUsage:ste,DynamicReadUsage:lte,EdgesGeometry:H6,EllipseCurve:AT,EqualCompare:S6,EqualDepth:Gw,EqualStencilFunc:ete,EquirectangularReflectionMapping:$b,EquirectangularRefractionMapping:Zb,Euler:Ro,EventDispatcher:yu,ExternalTexture:CO,ExtrudeGeometry:DT,FileLoader:Bf,Float16BufferAttribute:nne,Float32BufferAttribute:Ut,FloatType:oa,Fog:yT,FogExp2:vT,FramebufferTexture:wne,FrontSide:kf,Frustum:im,FrustumArray:ST,GLBufferAttribute:Bie,GLSL1:dte,GLSL3:y3,GreaterCompare:w6,GreaterDepth:jw,GreaterEqualCompare:T6,GreaterEqualDepth:Hw,GreaterEqualStencilFunc:rte,GreaterStencilFunc:nte,GridHelper:Jie,Group:t0,HalfFloatType:X0,HemisphereLight:p8,HemisphereLightHelper:Qie,IcosahedronGeometry:OT,ImageBitmapLoader:gie,ImageLoader:f_,ImageUtils:R6,IncrementStencilOp:qee,IncrementWrapStencilOp:$ee,InstancedBufferAttribute:Qp,InstancedBufferGeometry:VO,InstancedInterleavedBuffer:Fie,InstancedMesh:z6,Int16BufferAttribute:ene,Int32BufferAttribute:tne,Int8BufferAttribute:Kte,IntType:aT,InterleavedBuffer:_T,InterleavedBufferAttribute:Kp,Interpolant:U_,InterpolateDiscrete:Jb,InterpolateLinear:_E,InterpolateSmooth:iw,InterpolationSamplingMode:gte,InterpolationSamplingType:mte,InvertStencilOp:Kee,KeepStencilOp:Tp,KeyframeTrack:Tl,LOD:U6,LatheGeometry:LT,Layers:E0,LessCompare:x6,LessDepth:Vw,LessEqualCompare:yO,LessEqualDepth:Zp,LessEqualStencilFunc:tte,LessStencilFunc:Jee,Light:yd,LightProbe:x8,Line:cd,Line3:qie,LineBasicMaterial:Oo,LineCurve:OO,LineCurve3:LO,LineDashedMaterial:o8,LineLoop:B6,LineSegments:bu,LinearFilter:br,LinearInterpolant:kO,LinearMipMapLinearFilter:zee,LinearMipMapNearestFilter:kee,LinearMipmapLinearFilter:ou,LinearMipmapNearestFilter:Mb,LinearSRGBColorSpace:ld,LinearToneMapping:l6,LinearTransfer:t_,Loader:ua,LoaderUtils:w3,LoadingManager:FO,LoopOnce:m6,LoopPingPong:v6,LoopRepeat:g6,MOUSE:zB,Material:to,MaterialLoader:BT,MathUtils:xE,Matrix2:YO,Matrix3:cn,Matrix4:Kt,MaxEquation:XB,Mesh:Pi,MeshBasicMaterial:Hf,MeshDepthMaterial:zT,MeshDistanceMaterial:FT,MeshLambertMaterial:r8,MeshMatcapMaterial:s8,MeshNormalMaterial:i8,MeshPhongMaterial:t8,MeshPhysicalMaterial:e8,MeshStandardMaterial:NO,MeshToonMaterial:n8,MinEquation:WB,MirroredRepeatWrapping:Qb,MixOperation:o6,MultiplyBlending:m3,MultiplyOperation:D_,NearestFilter:Ds,NearestMipMapLinearFilter:Uee,NearestMipMapNearestFilter:Nee,NearestMipmapLinearFilter:Jg,NearestMipmapNearestFilter:lO,NeutralToneMapping:d6,NeverCompare:_6,NeverDepth:Fw,NeverStencilFunc:Qee,NoBlending:Df,NoColorSpace:Sf,NoToneMapping:fu,NormalAnimationBlendMode:dT,NormalBlending:Vp,NotEqualCompare:E6,NotEqualDepth:Ww,NotEqualStencilFunc:ite,NumberKeyframeTrack:l_,Object3D:Qn,ObjectLoader:pie,ObjectSpaceNormalMap:b6,OctahedronGeometry:I_,OneFactor:YB,OneMinusConstantAlphaFactor:s6,OneMinusConstantColorFactor:i6,OneMinusDstAlphaFactor:QB,OneMinusDstColorFactor:e6,OneMinusSrcAlphaFactor:zw,OneMinusSrcColorFactor:ZB,OrthographicCamera:om,PCFShadowMap:sT,PCFSoftShadowMap:Tb,PMREMGenerator:M3,Path:TE,PerspectiveCamera:Fr,Plane:_f,PlaneGeometry:jf,PlaneHelper:sre,PointLight:g8,PointLightHelper:Zie,Points:V6,PointsMaterial:MO,PolarGridHelper:ere,PolyhedronGeometry:vd,PositionalAudio:Sie,PropertyBinding:Kn,PropertyMixer:T8,QuadraticBezierCurve:PO,QuadraticBezierCurve3:RT,Quaternion:Os,QuaternionKeyframeTrack:k_,QuaternionLinearInterpolant:f8,RED_GREEN_RGTC2_Format:yE,RED_RGTC1_Format:gE,REVISION:rT,RGBADepthPacking:vO,RGBAFormat:eo,RGBAIntegerFormat:hT,RGBA_ASTC_10x10_Format:uE,RGBA_ASTC_10x5_Format:aE,RGBA_ASTC_10x6_Format:lE,RGBA_ASTC_10x8_Format:cE,RGBA_ASTC_12x10_Format:fE,RGBA_ASTC_12x12_Format:hE,RGBA_ASTC_4x4_Format:Jw,RGBA_ASTC_5x4_Format:eE,RGBA_ASTC_5x5_Format:tE,RGBA_ASTC_6x5_Format:nE,RGBA_ASTC_6x6_Format:iE,RGBA_ASTC_8x5_Format:rE,RGBA_ASTC_8x6_Format:sE,RGBA_ASTC_8x8_Format:oE,RGBA_BPTC_Format:dE,RGBA_ETC2_EAC_Format:Qw,RGBA_PVRTC_2BPPV1_Format:$w,RGBA_PVRTC_4BPPV1_Format:Yw,RGBA_S3TC_DXT1_Format:Cb,RGBA_S3TC_DXT3_Format:Rb,RGBA_S3TC_DXT5_Format:Db,RGBDepthPacking:Hee,RGBFormat:pO,RGBIntegerFormat:Fee,RGB_BPTC_SIGNED_Format:pE,RGB_BPTC_UNSIGNED_Format:mE,RGB_ETC1_Format:Zw,RGB_ETC2_Format:Kw,RGB_PVRTC_2BPPV1_Format:qw,RGB_PVRTC_4BPPV1_Format:Xw,RGB_S3TC_DXT1_Format:Ab,RGDepthPacking:jee,RGFormat:mO,RGIntegerFormat:fT,RawShaderMaterial:J6,Ray:q0,Raycaster:qO,RectAreaLight:b8,RedFormat:uT,RedIntegerFormat:O_,ReinhardToneMapping:c6,RenderTarget:_O,RenderTarget3D:Uie,RepeatWrapping:Kb,ReplaceStencilOp:Xee,ReverseSubtractEquation:jB,RingGeometry:PT,SIGNED_RED_GREEN_RGTC2_Format:bE,SIGNED_RED_RGTC1_Format:vE,SRGBColorSpace:Ks,SRGBTransfer:pi,Scene:bT,ShaderChunk:bn,ShaderLib:ic,ShaderMaterial:El,ShadowMaterial:Q6,Shape:td,ShapeGeometry:IT,ShapePath:lre,ShapeUtils:oc,ShortType:uO,Skeleton:xT,SkeletonHelper:$ie,SkinnedMesh:k6,Source:Qh,Sphere:ts,SphereGeometry:N_,Spherical:A8,SphericalHarmonics3:_8,SplineCurve:IO,SpotLight:m8,SpotLightHelper:Yie,Sprite:N6,SpriteMaterial:EO,SrcAlphaFactor:kw,SrcAlphaSaturateFactor:t6,SrcColorFactor:$B,StaticCopyUsage:ute,StaticDrawUsage:n_,StaticReadUsage:ate,StereoCamera:yie,StreamCopyUsage:hte,StreamDrawUsage:ote,StreamReadUsage:cte,StringKeyframeTrack:sm,SubtractEquation:HB,SubtractiveBlending:p3,TOUCH:Pee,TangentSpaceNormalMap:md,TetrahedronGeometry:NT,Texture:ur,TextureLoader:d8,TextureUtils:pre,Timer:Vie,TimestampQuery:pte,TorusGeometry:UT,TorusKnotGeometry:kT,Triangle:sa,TriangleFanDrawMode:Gee,TriangleStripDrawMode:Vee,TrianglesDrawMode:Bee,TubeGeometry:ud,UVMapping:oT,Uint16BufferAttribute:xO,Uint32BufferAttribute:SO,Uint8BufferAttribute:Qte,Uint8ClampedBufferAttribute:Jte,Uniform:XO,UniformsGroup:zie,UniformsLib:Mt,UniformsUtils:wO,UnsignedByteType:wl,UnsignedInt101111Type:hO,UnsignedInt248Type:b0,UnsignedInt5999Type:fO,UnsignedIntType:Ff,UnsignedShort4444Type:lT,UnsignedShort5551Type:cT,UnsignedShortType:y0,VSMShadowMap:nc,Vector2:ot,Vector3:ae,Vector4:Vn,VectorKeyframeTrack:c_,VideoFrameTexture:Sne,VideoTexture:G6,WebGL3DRenderTarget:Fte,WebGLArrayRenderTarget:zte,WebGLCoordinateSystem:Ma,WebGLCubeRenderTarget:P6,WebGLRenderTarget:gu,WebGLRenderer:N8,WebGLUtils:I8,WebGPUCoordinateSystem:S0,WebXRController:rw,WireframeGeometry:K6,WrapAroundEnding:e_,ZeroCurvatureEnding:Pp,ZeroFactor:qB,ZeroSlopeEnding:Ip,ZeroStencilOp:Wee,createCanvasElement:C6},Symbol.toStringTag,{value:"Module"}));var _C={exports:{}},xC={},SC={exports:{}},wC={};var Ik;function $le(){if(Ik)return wC;Ik=1;var n=Gf();function e(p,m){return p===m&&(p!==0||1/p===1/m)||p!==p&&m!==m}var t=typeof Object.is=="function"?Object.is:e,i=n.useState,r=n.useEffect,s=n.useLayoutEffect,o=n.useDebugValue;function a(p,m){var y=m(),b=i({inst:{value:y,getSnapshot:m}}),x=b[0].inst,S=b[1];return s(function(){x.value=y,x.getSnapshot=m,l(x)&&S({inst:x})},[p,y,m]),r(function(){return l(x)&&S({inst:x}),p(function(){l(x)&&S({inst:x})})},[p]),o(y),y}function l(p){var m=p.getSnapshot;p=p.value;try{var y=m();return!t(p,y)}catch{return!0}}function u(p,m){return m()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:a;return wC.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:h,wC}var Nk;function Zle(){return Nk||(Nk=1,SC.exports=$le()),SC.exports}var Uk;function Kle(){if(Uk)return xC;Uk=1;var n=Gf(),e=Zle();function t(u,h){return u===h&&(u!==0||1/u===1/h)||u!==u&&h!==h}var i=typeof Object.is=="function"?Object.is:t,r=e.useSyncExternalStore,s=n.useRef,o=n.useEffect,a=n.useMemo,l=n.useDebugValue;return xC.useSyncExternalStoreWithSelector=function(u,h,p,m,y){var b=s(null);if(b.current===null){var x={hasValue:!1,value:null};b.current=x}else x=b.current;b=a(function(){function _(R){if(!T){if(T=!0,A=R,R=m(R),y!==void 0&&x.hasValue){var L=x.value;if(y(L,R))return M=L}return M=R}if(L=M,i(A,R))return L;var I=m(R);return y!==void 0&&y(L,I)?(A=R,L):(A=R,M=I)}var T=!1,A,M,C=p===void 0?null:p;return[function(){return _(h())},C===null?void 0:function(){return _(C())}]},[h,p,m,y]);var S=r(u,b[0],b[1]);return o(function(){x.hasValue=!0,x.value=S},[S]),l(S),S},xC}var kk;function Qle(){return kk||(kk=1,_C.exports=Kle()),_C.exports}var Jle=Qle();const ece=Do(Jle),zk=n=>{let e;const t=new Set,i=(u,h)=>{const p=typeof u=="function"?u(e):u;if(!Object.is(p,e)){const m=e;e=h??(typeof p!="object"||p===null)?p:Object.assign({},e,p),t.forEach(y=>y(e,m))}},r=()=>e,a={setState:i,getState:r,getInitialState:()=>l,subscribe:u=>(t.add(u),()=>t.delete(u))},l=e=n(i,r,a);return a},k8=(n=>n?zk(n):zk),{useSyncExternalStoreWithSelector:tce}=ece,nce=n=>n;function ice(n,e=nce,t){const i=tce(n.subscribe,n.getState,n.getInitialState,e,t);return Rs.useDebugValue(i),i}const Fk=(n,e)=>{const t=k8(n),i=(r,s=e)=>ice(t,r,s);return Object.assign(i,t),i},rce=((n,e)=>n?Fk(n,e):Fk),sce=n=>typeof n=="object"&&typeof n.then=="function",CS=[];function oce(n,e,t=(i,r)=>i===r){if(n===e)return!0;if(!n||!e)return!1;const i=n.length;if(e.length!==i)return!1;for(let r=0;r<i;r++)if(!t(n[r],e[r]))return!1;return!0}function ace(n,e=null,t=!1,i={}){e===null&&(e=[n]);for(const s of CS)if(oce(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return i.lifespan&&i.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,i.lifespan)),s.response;if(!t)throw s.promise}const r={keys:e,equal:i.equal,remove:()=>{const s=CS.indexOf(r);s!==-1&&CS.splice(s,1)},promise:(sce(n)?n:n(...e)).then(s=>{r.response=s,i.lifespan&&i.lifespan>0&&(r.timeout=setTimeout(r.remove,i.lifespan))}).catch(s=>r.error=s)};if(CS.push(r),!t)throw r.promise}const lce=(n,e,t)=>ace(n,e,!1,t);var C3=M4();const cce=Do(C3);function ZO(n,e,t){if(!n)return;if(t(n)===!0)return n;let i=e?n.return:n.child;for(;i;){const r=ZO(i,e,t);if(r)return r;i=e?null:i.sibling}}function z8(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const KO=z8(q.createContext(null));let F8=class extends q.Component{render(){return q.createElement(KO.Provider,{value:this._reactInternals},this.props.children)}};function B8(){const n=q.useContext(KO);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=q.useId();return q.useMemo(()=>{for(const t of[n,n?.alternate]){if(!t)continue;const i=ZO(t,!1,r=>{let s=r.memoizedState;for(;s;){if(s.memoizedState===e)return!0;s=s.next}});if(i)return i}},[n,e])}const uce=Symbol.for("react.context"),fce=n=>n!==null&&typeof n=="object"&&"$$typeof"in n&&n.$$typeof===uce;function hce(){const n=B8(),[e]=q.useState(()=>new Map);e.clear();let t=n;for(;t;){const i=t.type;fce(i)&&i!==KO&&!e.has(i)&&e.set(i,q.use(z8(i))),t=t.return}return e}function dce(){const n=hce();return q.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>i=>q.createElement(e,null,q.createElement(t.Provider,{...i,value:n.get(t)})),e=>q.createElement(F8,{...e})),[n])}function V8(n){let e=n.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const G8=n=>n&&n.isOrthographicCamera,pce=n=>n&&n.hasOwnProperty("current"),mce=n=>n!=null&&(typeof n=="string"||typeof n=="number"||n.isColor),z_=((n,e)=>typeof window<"u"&&(((n=window.document)==null?void 0:n.createElement)||((e=window.navigator)==null?void 0:e.product)==="ReactNative"))()?q.useLayoutEffect:q.useEffect;function H8(n){const e=q.useRef(n);return z_(()=>{e.current=n},[n]),e}function gce(){const n=B8(),e=dce();return q.useMemo(()=>({children:t})=>{const r=!!ZO(n,!0,s=>s.type===q.StrictMode)?q.StrictMode:q.Fragment;return ue.jsx(r,{children:ue.jsx(e,{children:t})})},[n,e])}function vce({set:n}){return z_(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}const yce=(n=>(n=class extends q.Component{constructor(...t){super(...t),this.state={error:!1}}componentDidCatch(t){this.props.set(t)}render(){return this.state.error?null:this.props.children}},n.getDerivedStateFromError=()=>({error:!0}),n))();function j8(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}function Pg(n){var e;return(e=n.__r3f)==null?void 0:e.root.getState()}const rr={obj:n=>n===Object(n)&&!rr.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,nul:n=>n===null,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:i="reference",strict:r=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(rr.str(n)||rr.num(n)||rr.boo(n))return n===e;const s=rr.obj(n);if(s&&i==="reference")return n===e;const o=rr.arr(n);if(o&&t==="reference")return n===e;if((o||s)&&n===e)return!0;let a;for(a in n)if(!(a in e))return!1;if(s&&t==="shallow"&&i==="shallow"){for(a in r?e:n)if(!rr.equ(n[a],e[a],{strict:r,objects:"reference"}))return!1}else for(a in r?e:n)if(n[a]!==e[a])return!1;if(rr.und(a)){if(o&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function bce(n){n.type!=="Scene"&&(n.dispose==null||n.dispose());for(const e in n){const t=n[e];t?.type!=="Scene"&&(t==null||t.dispose==null||t.dispose())}}const W8=["children","key","ref"];function _ce(n){const e={};for(const t in n)W8.includes(t)||(e[t]=n[t]);return e}function ME(n,e,t,i){const r=n;let s=r?.__r3f;return s||(s={root:e,type:t,parent:null,children:[],props:_ce(i),object:r,eventCount:0,handlers:{},isHidden:!1},r&&(r.__r3f=s)),s}function h_(n,e){if(!e.includes("-"))return{root:n,key:e,target:n[e]};if(e in n)return{root:n,key:e,target:n[e]};let t=n;const i=e.split("-");for(const r of i){if(typeof t!="object"||t===null){if(t!==void 0){const s=i.slice(i.indexOf(r)).join("-");return{root:t,key:s,target:void 0}}return{root:n,key:e,target:void 0}}e=r,n=t,t=t[e]}return{root:n,key:e,target:t}}const Bk=/-\d+$/;function AE(n,e){if(rr.str(e.props.attach)){if(Bk.test(e.props.attach)){const r=e.props.attach.replace(Bk,""),{root:s,key:o}=h_(n.object,r);Array.isArray(s[o])||(s[o]=[])}const{root:t,key:i}=h_(n.object,e.props.attach);e.previousAttach=t[i],t[i]=e.object}else rr.fun(e.props.attach)&&(e.previousAttach=e.props.attach(n.object,e.object))}function CE(n,e){if(rr.str(e.props.attach)){const{root:t,key:i}=h_(n.object,e.props.attach),r=e.previousAttach;r===void 0?delete t[i]:t[i]=r}else e.previousAttach==null||e.previousAttach(n.object,e.object);delete e.previousAttach}const R3=[...W8,"args","dispose","attach","object","onUpdate","dispose"],Vk=new Map;function xce(n){let e=Vk.get(n.constructor);try{e||(e=new n.constructor,Vk.set(n.constructor,e))}catch{}return e}function Sce(n,e){const t={};for(const i in e)if(!R3.includes(i)&&!rr.equ(e[i],n.props[i])){t[i]=e[i];for(const r in e)r.startsWith(`${i}-`)&&(t[r]=e[r])}for(const i in n.props){if(R3.includes(i)||e.hasOwnProperty(i))continue;const{root:r,key:s}=h_(n.object,i);if(r.constructor&&r.constructor.length===0){const o=xce(r);rr.und(o)||(t[s]=o[s])}else t[s]=0}return t}const wce=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],Ece=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function Ef(n,e){var t;const i=n.__r3f,r=i&&V8(i).getState(),s=i?.eventCount;for(const a in e){let l=e[a];if(R3.includes(a))continue;if(i&&Ece.test(a)){typeof l=="function"?i.handlers[a]=l:delete i.handlers[a],i.eventCount=Object.keys(i.handlers).length;continue}if(l===void 0)continue;let{root:u,key:h,target:p}=h_(n,a);if(p===void 0&&(typeof u!="object"||u===null))throw Error(`R3F: Cannot set "${a}". Ensure it is an object before setting "${h}".`);if(p instanceof E0&&l instanceof E0)p.mask=l.mask;else if(p instanceof vt&&mce(l))p.set(l);else if(p!==null&&typeof p=="object"&&typeof p.set=="function"&&typeof p.copy=="function"&&l!=null&&l.constructor&&p.constructor===l.constructor)p.copy(l);else if(p!==null&&typeof p=="object"&&typeof p.set=="function"&&Array.isArray(l))typeof p.fromArray=="function"?p.fromArray(l):p.set(...l);else if(p!==null&&typeof p=="object"&&typeof p.set=="function"&&typeof l=="number")typeof p.setScalar=="function"?p.setScalar(l):p.set(l);else{var o;u[h]=l,r&&!r.linear&&wce.includes(h)&&(o=u[h])!=null&&o.isTexture&&u[h].format===eo&&u[h].type===wl&&(u[h].colorSpace=Ks)}}if(i!=null&&i.parent&&r!=null&&r.internal&&(t=i.object)!=null&&t.isObject3D&&s!==i.eventCount){const a=i.object,l=r.internal.interaction.indexOf(a);l>-1&&r.internal.interaction.splice(l,1),i.eventCount&&a.raycast!==null&&r.internal.interaction.push(a)}return i&&i.props.attach===void 0&&(i.object.isBufferGeometry?i.props.attach="geometry":i.object.isMaterial&&(i.props.attach="material")),i&&Z0(i),n}function Z0(n){var e;if(!n.parent)return;n.props.onUpdate==null||n.props.onUpdate(n.object);const t=(e=n.root)==null||e.getState==null?void 0:e.getState();t&&t.internal.frames===0&&t.invalidate()}function Tce(n,e){n.manual||(G8(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix())}const ra=n=>n?.isObject3D;function RS(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function X8(n,e,t,i){const r=t.get(e);r&&(t.delete(e),t.size===0&&(n.delete(i),r.target.releasePointerCapture(i)))}function Mce(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(i=>i!==e),t.initialHits=t.initialHits.filter(i=>i!==e),t.hovered.forEach((i,r)=>{(i.eventObject===e||i.object===e)&&t.hovered.delete(r)}),t.capturedMap.forEach((i,r)=>{X8(t.capturedMap,e,i,r)})}function Ace(n){function e(l){const{internal:u}=n.getState(),h=l.offsetX-u.initialClick[0],p=l.offsetY-u.initialClick[1];return Math.round(Math.sqrt(h*h+p*p))}function t(l){return l.filter(u=>["Move","Over","Enter","Out","Leave"].some(h=>{var p;return(p=u.__r3f)==null?void 0:p.handlers["onPointer"+h]}))}function i(l,u){const h=n.getState(),p=new Set,m=[],y=u?u(h.internal.interaction):h.internal.interaction;for(let _=0;_<y.length;_++){const T=Pg(y[_]);T&&(T.raycaster.camera=void 0)}h.previousRoot||h.events.compute==null||h.events.compute(l,h);function b(_){const T=Pg(_);if(!T||!T.events.enabled||T.raycaster.camera===null)return[];if(T.raycaster.camera===void 0){var A;T.events.compute==null||T.events.compute(l,T,(A=T.previousRoot)==null?void 0:A.getState()),T.raycaster.camera===void 0&&(T.raycaster.camera=null)}return T.raycaster.camera?T.raycaster.intersectObject(_,!0):[]}let x=y.flatMap(b).sort((_,T)=>{const A=Pg(_.object),M=Pg(T.object);return!A||!M?_.distance-T.distance:M.events.priority-A.events.priority||_.distance-T.distance}).filter(_=>{const T=RS(_);return p.has(T)?!1:(p.add(T),!0)});h.events.filter&&(x=h.events.filter(x,h));for(const _ of x){let T=_.object;for(;T;){var S;(S=T.__r3f)!=null&&S.eventCount&&m.push({..._,eventObject:T}),T=T.parent}}if("pointerId"in l&&h.internal.capturedMap.has(l.pointerId))for(let _ of h.internal.capturedMap.get(l.pointerId).values())p.has(RS(_.intersection))||m.push(_.intersection);return m}function r(l,u,h,p){if(l.length){const m={stopped:!1};for(const y of l){let b=Pg(y.object);if(b||y.object.traverseAncestors(x=>{const S=Pg(x);if(S)return b=S,!1}),b){const{raycaster:x,pointer:S,camera:_,internal:T}=b,A=new ae(S.x,S.y,0).unproject(_),M=P=>{var U,B;return(U=(B=T.capturedMap.get(P))==null?void 0:B.has(y.eventObject))!=null?U:!1},C=P=>{const U={intersection:y,target:u.target};T.capturedMap.has(P)?T.capturedMap.get(P).set(y.eventObject,U):T.capturedMap.set(P,new Map([[y.eventObject,U]])),u.target.setPointerCapture(P)},R=P=>{const U=T.capturedMap.get(P);U&&X8(T.capturedMap,y.eventObject,U,P)};let L={};for(let P in u){let U=u[P];typeof U!="function"&&(L[P]=U)}let I={...y,...L,pointer:S,intersections:l,stopped:m.stopped,delta:h,unprojectedPoint:A,ray:x.ray,camera:_,stopPropagation(){const P="pointerId"in u&&T.capturedMap.get(u.pointerId);if((!P||P.has(y.eventObject))&&(I.stopped=m.stopped=!0,T.hovered.size&&Array.from(T.hovered.values()).find(U=>U.eventObject===y.eventObject))){const U=l.slice(0,l.indexOf(y));s([...U,y])}},target:{hasPointerCapture:M,setPointerCapture:C,releasePointerCapture:R},currentTarget:{hasPointerCapture:M,setPointerCapture:C,releasePointerCapture:R},nativeEvent:u};if(p(I),m.stopped===!0)break}}}return l}function s(l){const{internal:u}=n.getState();for(const h of u.hovered.values())if(!l.length||!l.find(p=>p.object===h.object&&p.index===h.index&&p.instanceId===h.instanceId)){const m=h.eventObject.__r3f;if(u.hovered.delete(RS(h)),m!=null&&m.eventCount){const y=m.handlers,b={...h,intersections:l};y.onPointerOut==null||y.onPointerOut(b),y.onPointerLeave==null||y.onPointerLeave(b)}}}function o(l,u){for(let h=0;h<u.length;h++){const p=u[h].__r3f;p==null||p.handlers.onPointerMissed==null||p.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return u=>{const{internal:h}=n.getState();"pointerId"in u&&h.capturedMap.has(u.pointerId)&&requestAnimationFrame(()=>{h.capturedMap.has(u.pointerId)&&(h.capturedMap.delete(u.pointerId),s([]))})}}return function(h){const{onPointerMissed:p,internal:m}=n.getState();m.lastEvent.current=h;const y=l==="onPointerMove",b=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",S=i(h,y?t:void 0),_=b?e(h):0;l==="onPointerDown"&&(m.initialClick=[h.offsetX,h.offsetY],m.initialHits=S.map(A=>A.eventObject)),b&&!S.length&&_<=2&&(o(h,m.interaction),p&&p(h)),y&&s(S);function T(A){const M=A.eventObject,C=M.__r3f;if(!(C!=null&&C.eventCount))return;const R=C.handlers;if(y){if(R.onPointerOver||R.onPointerEnter||R.onPointerOut||R.onPointerLeave){const L=RS(A),I=m.hovered.get(L);I?I.stopped&&A.stopPropagation():(m.hovered.set(L,A),R.onPointerOver==null||R.onPointerOver(A),R.onPointerEnter==null||R.onPointerEnter(A))}R.onPointerMove==null||R.onPointerMove(A)}else{const L=R[l];L?(!b||m.initialHits.includes(M))&&(o(h,m.interaction.filter(I=>!m.initialHits.includes(I))),L(A)):b&&m.initialHits.includes(M)&&o(h,m.interaction.filter(I=>!m.initialHits.includes(I)))}}r(S,h,_,T)}}return{handlePointer:a}}const Gk=n=>!!(n!=null&&n.render),q8=q.createContext(null),Cce=(n,e)=>{const t=rce((a,l)=>{const u=new ae,h=new ae,p=new ae;function m(_=l().camera,T=h,A=l().size){const{width:M,height:C,top:R,left:L}=A,I=M/C;T.isVector3?p.copy(T):p.set(...T);const P=_.getWorldPosition(u).distanceTo(p);if(G8(_))return{width:M/_.zoom,height:C/_.zoom,top:R,left:L,factor:1,distance:P,aspect:I};{const U=_.fov*Math.PI/180,B=2*Math.tan(U/2)*P,F=B*(M/C);return{width:F,height:B,top:R,left:L,factor:M/F,distance:P,aspect:I}}}let y;const b=_=>a(T=>({performance:{...T.performance,current:_}})),x=new ot;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(_=1)=>n(l(),_),advance:(_,T)=>e(_,T,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new HO,pointer:x,mouse:x,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const _=l();y&&clearTimeout(y),_.performance.current!==_.performance.min&&b(_.performance.min),y=setTimeout(()=>b(l().performance.max),_.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:m},setEvents:_=>a(T=>({...T,events:{...T.events,..._}})),setSize:(_,T,A=0,M=0)=>{const C=l().camera,R={width:_,height:T,top:A,left:M};a(L=>({size:R,viewport:{...L.viewport,...m(C,h,R)}}))},setDpr:_=>a(T=>{const A=j8(_);return{viewport:{...T.viewport,dpr:A,initialDpr:T.viewport.initialDpr||A}}}),setFrameloop:(_="always")=>{const T=l().clock;T.stop(),T.elapsedTime=0,_!=="never"&&(T.start(),T.elapsedTime=0),a(()=>({frameloop:_}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:q.createRef(),active:!1,frames:0,priority:0,subscribe:(_,T,A)=>{const M=l().internal;return M.priority=M.priority+(T>0?1:0),M.subscribers.push({ref:_,priority:T,store:A}),M.subscribers=M.subscribers.sort((C,R)=>C.priority-R.priority),()=>{const C=l().internal;C!=null&&C.subscribers&&(C.priority=C.priority-(T>0?1:0),C.subscribers=C.subscribers.filter(R=>R.ref!==_))}}}}}),i=t.getState();let r=i.size,s=i.viewport.dpr,o=i.camera;return t.subscribe(()=>{const{camera:a,size:l,viewport:u,gl:h,set:p}=t.getState();if(l.width!==r.width||l.height!==r.height||u.dpr!==s){r=l,s=u.dpr,Tce(a,l),u.dpr>0&&h.setPixelRatio(u.dpr);const m=typeof HTMLCanvasElement<"u"&&h.domElement instanceof HTMLCanvasElement;h.setSize(l.width,l.height,m)}a!==o&&(o=a,p(m=>({viewport:{...m.viewport,...m.viewport.getCurrentViewport(a)}})))}),t.subscribe(a=>n(a)),t};function Y8(){const n=q.useContext(q8);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function Br(n=t=>t,e){return Y8()(n,e)}function GT(n,e=0){const t=Y8(),i=t.getState().internal.subscribe,r=H8(n);return z_(()=>i(r,e,t),[e,i,t]),null}const Rce=1,Dce=8,Oce=32,Lce=2;var Pce={version:"9.5.0"};function Ice(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Hk={exports:{}},jk={exports:{}},Wk;function Nce(){return Wk||(Wk=1,(function(n){n.exports=function(e){function t(d,g,E,D){return new bv(d,g,E,D)}function i(){}function r(d){var g="https://react.dev/errors/"+d;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)g+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+d+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(d){var g=d,E=d;if(d.alternate)for(;g.return;)g=g.return;else{d=g;do g=d,(g.flags&4098)!==0&&(E=g.return),d=g.return;while(d)}return g.tag===3?E:null}function o(d){if(s(d)!==d)throw Error(r(188))}function a(d){var g=d.alternate;if(!g){if(g=s(d),g===null)throw Error(r(188));return g!==d?null:d}for(var E=d,D=g;;){var k=E.return;if(k===null)break;var H=k.alternate;if(H===null){if(D=k.return,D!==null){E=D;continue}break}if(k.child===H.child){for(H=k.child;H;){if(H===E)return o(k),d;if(H===D)return o(k),g;H=H.sibling}throw Error(r(188))}if(E.return!==D.return)E=k,D=H;else{for(var ie=!1,we=k.child;we;){if(we===E){ie=!0,E=k,D=H;break}if(we===D){ie=!0,D=k,E=H;break}we=we.sibling}if(!ie){for(we=H.child;we;){if(we===E){ie=!0,E=H,D=k;break}if(we===D){ie=!0,D=H,E=k;break}we=we.sibling}if(!ie)throw Error(r(189))}}if(E.alternate!==D)throw Error(r(190))}if(E.tag!==3)throw Error(r(188));return E.stateNode.current===E?d:g}function l(d){var g=d.tag;if(g===5||g===26||g===27||g===6)return d;for(d=d.child;d!==null;){if(g=l(d),g!==null)return g;d=d.sibling}return null}function u(d){var g=d.tag;if(g===5||g===26||g===27||g===6)return d;for(d=d.child;d!==null;){if(d.tag!==4&&(g=u(d),g!==null))return g;d=d.sibling}return null}function h(d){return d===null||typeof d!="object"?null:(d=Il&&d[Il]||d["@@iterator"],typeof d=="function"?d:null)}function p(d){if(d==null)return null;if(typeof d=="function")return d.$$typeof===Oc?null:d.displayName||d.name||null;if(typeof d=="string")return d;switch(d){case Uu:return"Fragment";case zu:return"Profiler";case ku:return"StrictMode";case Om:return"Suspense";case Pl:return"SuspenseList";case Ud:return"Activity"}if(typeof d=="object")switch(d.$$typeof){case Nu:return"Portal";case Ho:return d.displayName||"Context";case Nd:return(d._context.displayName||"Context")+".Consumer";case uh:var g=d.render;return d=d.displayName,d||(d=g.displayName||g.name||"",d=d!==""?"ForwardRef("+d+")":"ForwardRef"),d;case Lm:return g=d.displayName||null,g!==null?g:p(d.type)||"Memo";case bs:g=d._payload,d=d._init;try{return p(d(g))}catch{}}return null}function m(d){return{current:d}}function y(d){0>Hu||(d.current=Wm[Hu],Wm[Hu]=null,Hu--)}function b(d,g){Hu++,Wm[Hu]=d.current,d.current=g}function x(d){return d>>>=0,d===0?32:31-(Xm(d)/t1|0)|0}function S(d){var g=d&42;if(g!==0)return g;switch(d&-d){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return d&261888;case 262144:case 524288:case 1048576:case 2097152:return d&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return d&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return d}}function _(d,g,E){var D=d.pendingLanes;if(D===0)return 0;var k=0,H=d.suspendedLanes,ie=d.pingedLanes;d=d.warmLanes;var we=D&134217727;return we!==0?(D=we&~H,D!==0?k=S(D):(ie&=we,ie!==0?k=S(ie):E||(E=we&~d,E!==0&&(k=S(E))))):(we=D&~H,we!==0?k=S(we):ie!==0?k=S(ie):E||(E=D&~d,E!==0&&(k=S(E)))),k===0?0:g!==0&&g!==k&&(g&H)===0&&(H=k&-k,E=g&-g,H>=E||H===32&&(E&4194048)!==0)?g:k}function T(d,g){return(d.pendingLanes&~(d.suspendedLanes&~d.pingedLanes)&g)===0}function A(d,g){switch(d){case 1:case 2:case 4:case 8:case 64:return g+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function M(){var d=vh;return vh<<=1,(vh&62914560)===0&&(vh=4194304),d}function C(d){for(var g=[],E=0;31>E;E++)g.push(d);return g}function R(d,g){d.pendingLanes|=g,g!==268435456&&(d.suspendedLanes=0,d.pingedLanes=0,d.warmLanes=0)}function L(d,g,E,D,k,H){var ie=d.pendingLanes;d.pendingLanes=E,d.suspendedLanes=0,d.pingedLanes=0,d.warmLanes=0,d.expiredLanes&=E,d.entangledLanes&=E,d.errorRecoveryDisabledLanes&=E,d.shellSuspendCounter=0;var we=d.entanglements,Ye=d.expirationTimes,lt=d.hiddenUpdates;for(E=ie&~E;0<E;){var yt=31-Vs(E),ht=1<<yt;we[yt]=0,Ye[yt]=-1;var Rt=lt[yt];if(Rt!==null)for(lt[yt]=null,yt=0;yt<Rt.length;yt++){var tn=Rt[yt];tn!==null&&(tn.lane&=-536870913)}E&=~ht}D!==0&&I(d,D,0),H!==0&&k===0&&d.tag!==0&&(d.suspendedLanes|=H&~(ie&~g))}function I(d,g,E){d.pendingLanes|=g,d.suspendedLanes&=~g;var D=31-Vs(g);d.entangledLanes|=g,d.entanglements[D]=d.entanglements[D]|1073741824|E&261930}function P(d,g){var E=d.entangledLanes|=g;for(d=d.entanglements;E;){var D=31-Vs(E),k=1<<D;k&g|d[D]&g&&(d[D]|=g),E&=~k}}function U(d,g){var E=g&-g;return E=(E&42)!==0?1:B(E),(E&(d.suspendedLanes|g))!==0?0:E}function B(d){switch(d){case 2:d=1;break;case 8:d=4;break;case 32:d=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:d=128;break;case 268435456:d=134217728;break;default:d=0}return d}function F(d){return d&=-d,2<d?8<d?(d&134217727)!==0?32:268435456:8:2}function z(d){if(typeof ry=="function"&&r1(d),Gs&&typeof Gs.setStrictMode=="function")try{Gs.setStrictMode(Wu,d)}catch{}}function W(d,g){return d===g&&(d!==0||1/d===1/g)||d!==d&&g!==g}function X(d){if(Qm===void 0)try{throw Error()}catch(E){var g=E.stack.trim().match(/\n( *(at )?)/);Qm=g&&g[1]||"",Ka=-1<E.stack.indexOf(`
    at`)?" (<anonymous>)":-1<E.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Qm+d+Ka}function j(d,g){if(!d||Wd)return"";Wd=!0;var E=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var D={DetermineComponentFrameRoot:function(){try{if(g){var ht=function(){throw Error()};if(Object.defineProperty(ht.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ht,[])}catch(tn){var Rt=tn}Reflect.construct(d,[],ht)}else{try{ht.call()}catch(tn){Rt=tn}d.call(ht.prototype)}}else{try{throw Error()}catch(tn){Rt=tn}(ht=d())&&typeof ht.catch=="function"&&ht.catch(function(){})}}catch(tn){if(tn&&Rt&&typeof tn.stack=="string")return[tn.stack,Rt.stack]}return[null,null]}};D.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var k=Object.getOwnPropertyDescriptor(D.DetermineComponentFrameRoot,"name");k&&k.configurable&&Object.defineProperty(D.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var H=D.DetermineComponentFrameRoot(),ie=H[0],we=H[1];if(ie&&we){var Ye=ie.split(`
`),lt=we.split(`
`);for(k=D=0;D<Ye.length&&!Ye[D].includes("DetermineComponentFrameRoot");)D++;for(;k<lt.length&&!lt[k].includes("DetermineComponentFrameRoot");)k++;if(D===Ye.length||k===lt.length)for(D=Ye.length-1,k=lt.length-1;1<=D&&0<=k&&Ye[D]!==lt[k];)k--;for(;1<=D&&0<=k;D--,k--)if(Ye[D]!==lt[k]){if(D!==1||k!==1)do if(D--,k--,0>k||Ye[D]!==lt[k]){var yt=`
`+Ye[D].replace(" at new "," at ");return d.displayName&&yt.includes("<anonymous>")&&(yt=yt.replace("<anonymous>",d.displayName)),yt}while(1<=D&&0<=k);break}}}finally{Wd=!1,Error.prepareStackTrace=E}return(E=d?d.displayName||d.name:"")?X(E):""}function G(d,g){switch(d.tag){case 26:case 27:case 5:return X(d.type);case 16:return X("Lazy");case 13:return d.child!==g&&g!==null?X("Suspense Fallback"):X("Suspense");case 19:return X("SuspenseList");case 0:case 15:return j(d.type,!1);case 11:return j(d.type.render,!1);case 1:return j(d.type,!0);case 31:return X("Activity");default:return""}}function K(d){try{var g="",E=null;do g+=G(d,E),E=d,d=d.return;while(d);return g}catch(D){return`
Error generating stack: `+D.message+`
`+D.stack}}function J(d,g){if(typeof d=="object"&&d!==null){var E=sy.get(d);return E!==void 0?E:(g={value:d,source:g,stack:K(g)},sy.set(d,g),g)}return{value:d,source:g,stack:K(g)}}function ee(d,g){kl[Qa++]=Xd,kl[Qa++]=ci,ci=d,Xd=g}function V(d,g,E){Xo[ho++]=Xr,Xo[ho++]=va,Xo[ho++]=qo,qo=d;var D=Xr;d=va;var k=32-Vs(D)-1;D&=~(1<<k),E+=1;var H=32-Vs(g)+k;if(30<H){var ie=k-k%5;H=(D&(1<<ie)-1).toString(32),D>>=ie,k-=ie,Xr=1<<32-Vs(g)+k|E<<k|D,va=H+d}else Xr=1<<H|E<<k|D,va=d}function Y(d){d.return!==null&&(ee(d,1),V(d,1,0))}function Q(d){for(;d===ci;)ci=kl[--Qa],kl[Qa]=null,Xd=kl[--Qa],kl[Qa]=null;for(;d===qo;)qo=Xo[--ho],Xo[ho]=null,va=Xo[--ho],Xo[ho]=null,Xr=Xo[--ho],Xo[ho]=null}function re(d,g){Xo[ho++]=Xr,Xo[ho++]=va,Xo[ho++]=qo,Xr=g.id,va=g.overflow,qo=d}function ne(d,g){b(qr,g),b(zl,d),b(Or,null),d=vx(g),y(Or),b(Or,d)}function le(){y(Or),y(zl),y(qr)}function fe(d){d.memoizedState!==null&&b(qd,d);var g=Or.current,E=dh(g,d.type);g!==E&&(b(zl,d),b(Or,E))}function pe(d){zl.current===d&&(y(Or),y(zl)),qd.current===d&&(y(qd),Ki?Vu._currentValue=Bu:Vu._currentValue2=Bu)}function Ee(d){var g=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ve(J(g,d)),Jm}function Te(d,g){if(!Ri)throw Error(r(175));Hx(d.stateNode,d.type,d.memoizedProps,g,d)||Ee(d,!0)}function xe(d){for(wr=d.return;wr;)switch(wr.tag){case 5:case 31:case 13:xs=!1;return;case 27:case 3:xs=!0;return;default:wr=wr.return}}function ge(d){if(!Ri||d!==wr)return!1;if(!Cn)return xe(d),Cn=!0,!1;var g=d.tag;if(Sr?g!==3&&g!==27&&(g!==5||gh(d.type)&&!_s(d.type,d.memoizedProps))&&Di&&Ee(d):g!==3&&(g!==5||gh(d.type)&&!_s(d.type,d.memoizedProps))&&Di&&Ee(d),xe(d),g===13){if(!Ri)throw Error(r(316));if(d=d.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(r(317));Di=qv(d)}else if(g===31){if(d=d.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(r(317));Di=Wx(d)}else Di=Sr&&g===27?Nx(d.type,Di):wr?Ix(d.stateNode):null;return!0}function oe(){Ri&&(Di=wr=null,Cn=!1)}function me(){var d=Ja;return d!==null&&(Ws===null?Ws=d:Ws.push.apply(Ws,d),Ja=null),d}function ve(d){Ja===null?Ja=[d]:Ja.push(d)}function he(d,g,E){Ki?(b(Yo,g._currentValue),g._currentValue=E):(b(Yo,g._currentValue2),g._currentValue2=E)}function Ce(d){var g=Yo.current;Ki?d._currentValue=g:d._currentValue2=g,y(Yo)}function Re(d,g,E){for(;d!==null;){var D=d.alternate;if((d.childLanes&g)!==g?(d.childLanes|=g,D!==null&&(D.childLanes|=g)):D!==null&&(D.childLanes&g)!==g&&(D.childLanes|=g),d===E)break;d=d.return}}function Le(d,g,E,D){var k=d.child;for(k!==null&&(k.return=d);k!==null;){var H=k.dependencies;if(H!==null){var ie=k.child;H=H.firstContext;e:for(;H!==null;){var we=H;H=k;for(var Ye=0;Ye<g.length;Ye++)if(we.context===g[Ye]){H.lanes|=E,we=H.alternate,we!==null&&(we.lanes|=E),Re(H.return,E,d),D||(ie=null);break e}H=we.next}}else if(k.tag===18){if(ie=k.return,ie===null)throw Error(r(341));ie.lanes|=E,H=ie.alternate,H!==null&&(H.lanes|=E),Re(ie,E,d),ie=null}else ie=k.child;if(ie!==null)ie.return=k;else for(ie=k;ie!==null;){if(ie===d){ie=null;break}if(k=ie.sibling,k!==null){k.return=ie.return,ie=k;break}ie=ie.return}k=ie}}function Ie(d,g,E,D){d=null;for(var k=g,H=!1;k!==null;){if(!H){if((k.flags&524288)!==0)H=!0;else if((k.flags&262144)!==0)break}if(k.tag===10){var ie=k.alternate;if(ie===null)throw Error(r(387));if(ie=ie.memoizedProps,ie!==null){var we=k.type;Ji(k.pendingProps.value,ie.value)||(d!==null?d.push(we):d=[we])}}else if(k===qd.current){if(ie=k.alternate,ie===null)throw Error(r(387));ie.memoizedState.memoizedState!==k.memoizedState.memoizedState&&(d!==null?d.push(Vu):d=[Vu])}k=k.return}d!==null&&Le(g,d,E,D),g.flags|=262144}function be(d){for(d=d.firstContext;d!==null;){var g=d.context;if(!Ji(Ki?g._currentValue:g._currentValue2,d.memoizedValue))return!0;d=d.next}return!1}function Je(d){bi=d,ya=null,d=d.dependencies,d!==null&&(d.firstContext=null)}function te(d){return de(bi,d)}function Z(d,g){return bi===null&&Je(d),de(d,g)}function de(d,g){var E=Ki?g._currentValue:g._currentValue2;if(g={context:g,memoizedValue:E,next:null},ya===null){if(d===null)throw Error(r(308));ya=g,d.dependencies={lanes:0,firstContext:g},d.flags|=524288}else ya=ya.next=g;return E}function Ne(){return{controller:new s1,data:new Map,refCount:0}}function Oe(d){d.refCount--,d.refCount===0&&Lr(dM,function(){d.controller.abort()})}function Ae(){}function et(d){d!==ri&&d.next===null&&(ri===null?Yd=ri=d:ri=ri.next=d),$o=!0,us||(us=!0,ct())}function Ze(d,g){if(!eg&&$o){eg=!0;do for(var E=!1,D=Yd;D!==null;){if(d!==0){var k=D.pendingLanes;if(k===0)var H=0;else{var ie=D.suspendedLanes,we=D.pingedLanes;H=(1<<31-Vs(42|d)+1)-1,H&=k&~(ie&~we),H=H&201326741?H&201326741|1:H?H|2:0}H!==0&&(E=!0,nt(D,H))}else H=Rn,H=_(D,D===yn?H:0,D.cancelPendingCommit!==null||D.timeoutHandle!==Bs),(H&3)===0||T(D,H)||(E=!0,nt(D,H));D=D.next}while(E);eg=!1}}function ft(){dt()}function dt(){$o=us=!1;var d=0;Uc!==0&&Fu()&&(d=Uc);for(var g=cs(),E=null,D=Yd;D!==null;){var k=D.next,H=Xe(D,g);H===0?(D.next=null,E===null?Yd=k:E.next=k,k===null&&(ri=E)):(E=D,(d!==0||(H&3)!==0)&&($o=!0)),D=k}mr!==0&&mr!==5||Ze(d),Uc!==0&&(Uc=0)}function Xe(d,g){for(var E=d.suspendedLanes,D=d.pingedLanes,k=d.expirationTimes,H=d.pendingLanes&-62914561;0<H;){var ie=31-Vs(H),we=1<<ie,Ye=k[ie];Ye===-1?((we&E)===0||(we&D)!==0)&&(k[ie]=A(we,g)):Ye<=g&&(d.expiredLanes|=we),H&=~we}if(g=yn,E=Rn,E=_(d,d===g?E:0,d.cancelPendingCommit!==null||d.timeoutHandle!==Bs),D=d.callbackNode,E===0||d===g&&(oi===2||oi===9)||d.cancelPendingCommit!==null)return D!==null&&D!==null&&Ym(D),d.callbackNode=null,d.callbackPriority=0;if((E&3)===0||T(d,E)){if(g=E&-E,g===d.callbackPriority)return g;switch(D!==null&&Ym(D),F(E)){case 2:case 8:E=i1;break;case 32:E=jd;break;case 268435456:E=Zm;break;default:E=jd}return D=Ke.bind(null,d),E=Hd(E,D),d.callbackPriority=g,d.callbackNode=E,g}return D!==null&&D!==null&&Ym(D),d.callbackPriority=2,d.callbackNode=null,2}function Ke(d,g){if(mr!==0&&mr!==5)return d.callbackNode=null,d.callbackPriority=0,null;var E=d.callbackNode;if(Ya()&&d.callbackNode!==E)return null;var D=Rn;return D=_(d,d===yn?D:0,d.cancelPendingCommit!==null||d.timeoutHandle!==Bs),D===0?null:(ga(d,D,g),Xe(d,cs()),d.callbackNode!=null&&d.callbackNode===E?Ke.bind(null,d):null)}function nt(d,g){if(Ya())return null;ga(d,g,!0)}function ct(){Ov?Lv(function(){(Tn&6)!==0?Hd($m,ft):dt()}):Hd($m,ft)}function ut(){if(Uc===0){var d=Fl;d===0&&(d=qm,qm<<=1,(qm&261888)===0&&(qm=256)),Uc=d}return Uc}function Vt(d,g){if(yh===null){var E=yh=[];oy=0,Fl=ut(),Er={status:"pending",value:void 0,then:function(D){E.push(D)}}}return oy++,g.then(Se,Se),g}function Se(){if(--oy===0&&yh!==null){Er!==null&&(Er.status="fulfilled");var d=yh;yh=null,Fl=0,Er=null;for(var g=0;g<d.length;g++)(0,d[g])()}}function qe(d,g){var E=[],D={status:"pending",value:null,reason:null,then:function(k){E.push(k)}};return d.then(function(){D.status="fulfilled",D.value=g;for(var k=0;k<E.length;k++)(0,E[k])(g)},function(k){for(D.status="rejected",D.reason=k,k=0;k<E.length;k++)(0,E[k])(void 0)}),D}function st(){var d=kc.current;return d!==null?d:yn.pooledCache}function St(d,g){g===null?b(kc,kc.current):b(kc,g.pool)}function Qe(){var d=st();return d===null?null:{parent:Ki?Oi._currentValue:Oi._currentValue2,pool:d}}function Fe(d,g){if(Ji(d,g))return!0;if(typeof d!="object"||d===null||typeof g!="object"||g===null)return!1;var E=Object.keys(d),D=Object.keys(g);if(E.length!==D.length)return!1;for(D=0;D<E.length;D++){var k=E[D];if(!hM.call(g,k)||!Ji(d[k],g[k]))return!1}return!0}function gt(d){return d=d.status,d==="fulfilled"||d==="rejected"}function Ct(d,g,E){switch(E=d[E],E===void 0?d.push(g):E!==g&&(g.then(Ae,Ae),g=E),g.status){case"fulfilled":return g.value;case"rejected":throw d=g.reason,Xn(d),d;default:if(typeof g.status=="string")g.then(Ae,Ae);else{if(d=yn,d!==null&&100<d.shellSuspendCounter)throw Error(r(482));d=g,d.status="pending",d.then(function(D){if(g.status==="pending"){var k=g;k.status="fulfilled",k.value=D}},function(D){if(g.status==="pending"){var k=g;k.status="rejected",k.reason=D}})}switch(g.status){case"fulfilled":return g.value;case"rejected":throw d=g.reason,Xn(d),d}throw Ss=g,Tr}}function Tt(d){try{var g=d._init;return g(d._payload)}catch(E){throw E!==null&&typeof E=="object"&&typeof E.then=="function"?(Ss=E,Tr):E}}function Ft(){if(Ss===null)throw Error(r(459));var d=Ss;return Ss=null,d}function Xn(d){if(d===Tr||d===Ko)throw Error(r(483))}function qn(d){var g=Xu;return Xu+=1,zc===null&&(zc=[]),Ct(zc,d,g)}function ii(d,g){g=g.props.ref,d.ref=g!==void 0?g:null}function wi(d,g){throw g.$$typeof===Iu?Error(r(525)):(d=Object.prototype.toString.call(g),Error(r(31,d==="[object Object]"?"object with keys {"+Object.keys(g).join(", ")+"}":d)))}function rs(d){function g(Be,Ue){if(d){var We=Be.deletions;We===null?(Be.deletions=[Ue],Be.flags|=16):We.push(Ue)}}function E(Be,Ue){if(!d)return null;for(;Ue!==null;)g(Be,Ue),Ue=Ue.sibling;return null}function D(Be){for(var Ue=new Map;Be!==null;)Be.key!==null?Ue.set(Be.key,Be):Ue.set(Be.index,Be),Be=Be.sibling;return Ue}function k(Be,Ue){return Be=uo(Be,Ue),Be.index=0,Be.sibling=null,Be}function H(Be,Ue,We){return Be.index=We,d?(We=Be.alternate,We!==null?(We=We.index,We<Ue?(Be.flags|=67108866,Ue):We):(Be.flags|=67108866,Ue)):(Be.flags|=1048576,Ue)}function ie(Be){return d&&Be.alternate===null&&(Be.flags|=67108866),Be}function we(Be,Ue,We,mt){return Ue===null||Ue.tag!==6?(Ue=_v(We,Be.mode,mt),Ue.return=Be,Ue):(Ue=k(Ue,We),Ue.return=Be,Ue)}function Ye(Be,Ue,We,mt){var Wt=We.type;return Wt===Uu?yt(Be,Ue,We.props.children,mt,We.key):Ue!==null&&(Ue.elementType===Wt||typeof Wt=="object"&&Wt!==null&&Wt.$$typeof===bs&&Tt(Wt)===Ue.type)?(Ue=k(Ue,We.props),ii(Ue,We),Ue.return=Be,Ue):(Ue=Ll(We.type,We.key,We.props,null,Be.mode,mt),ii(Ue,We),Ue.return=Be,Ue)}function lt(Be,Ue,We,mt){return Ue===null||Ue.tag!==4||Ue.stateNode.containerInfo!==We.containerInfo||Ue.stateNode.implementation!==We.implementation?(Ue=Sv(We,Be.mode,mt),Ue.return=Be,Ue):(Ue=k(Ue,We.children||[]),Ue.return=Be,Ue)}function yt(Be,Ue,We,mt,Wt){return Ue===null||Ue.tag!==7?(Ue=Go(We,Be.mode,mt,Wt),Ue.return=Be,Ue):(Ue=k(Ue,We),Ue.return=Be,Ue)}function ht(Be,Ue,We){if(typeof Ue=="string"&&Ue!==""||typeof Ue=="number"||typeof Ue=="bigint")return Ue=_v(""+Ue,Be.mode,We),Ue.return=Be,Ue;if(typeof Ue=="object"&&Ue!==null){switch(Ue.$$typeof){case $a:return We=Ll(Ue.type,Ue.key,Ue.props,null,Be.mode,We),ii(We,Ue),We.return=Be,We;case Nu:return Ue=Sv(Ue,Be.mode,We),Ue.return=Be,Ue;case bs:return Ue=Tt(Ue),ht(Be,Ue,We)}if(Lc(Ue)||h(Ue))return Ue=Go(Ue,Be.mode,We,null),Ue.return=Be,Ue;if(typeof Ue.then=="function")return ht(Be,qn(Ue),We);if(Ue.$$typeof===Ho)return ht(Be,Z(Be,Ue),We);wi(Be,Ue)}return null}function Rt(Be,Ue,We,mt){var Wt=Ue!==null?Ue.key:null;if(typeof We=="string"&&We!==""||typeof We=="number"||typeof We=="bigint")return Wt!==null?null:we(Be,Ue,""+We,mt);if(typeof We=="object"&&We!==null){switch(We.$$typeof){case $a:return We.key===Wt?Ye(Be,Ue,We,mt):null;case Nu:return We.key===Wt?lt(Be,Ue,We,mt):null;case bs:return We=Tt(We),Rt(Be,Ue,We,mt)}if(Lc(We)||h(We))return Wt!==null?null:yt(Be,Ue,We,mt,null);if(typeof We.then=="function")return Rt(Be,Ue,qn(We),mt);if(We.$$typeof===Ho)return Rt(Be,Ue,Z(Be,We),mt);wi(Be,We)}return null}function tn(Be,Ue,We,mt,Wt){if(typeof mt=="string"&&mt!==""||typeof mt=="number"||typeof mt=="bigint")return Be=Be.get(We)||null,we(Ue,Be,""+mt,Wt);if(typeof mt=="object"&&mt!==null){switch(mt.$$typeof){case $a:return Be=Be.get(mt.key===null?We:mt.key)||null,Ye(Ue,Be,mt,Wt);case Nu:return Be=Be.get(mt.key===null?We:mt.key)||null,lt(Ue,Be,mt,Wt);case bs:return mt=Tt(mt),tn(Be,Ue,We,mt,Wt)}if(Lc(mt)||h(mt))return Be=Be.get(We)||null,yt(Ue,Be,mt,Wt,null);if(typeof mt.then=="function")return tn(Be,Ue,We,qn(mt),Wt);if(mt.$$typeof===Ho)return tn(Be,Ue,We,Z(Ue,mt),Wt);wi(Ue,mt)}return null}function nr(Be,Ue,We,mt){for(var Wt=null,Bi=null,qt=Ue,Fn=Ue=0,Pr=null;qt!==null&&Fn<We.length;Fn++){qt.index>Fn?(Pr=qt,qt=null):Pr=qt.sibling;var Yn=Rt(Be,qt,We[Fn],mt);if(Yn===null){qt===null&&(qt=Pr);break}d&&qt&&Yn.alternate===null&&g(Be,qt),Ue=H(Yn,Ue,Fn),Bi===null?Wt=Yn:Bi.sibling=Yn,Bi=Yn,qt=Pr}if(Fn===We.length)return E(Be,qt),Cn&&ee(Be,Fn),Wt;if(qt===null){for(;Fn<We.length;Fn++)qt=ht(Be,We[Fn],mt),qt!==null&&(Ue=H(qt,Ue,Fn),Bi===null?Wt=qt:Bi.sibling=qt,Bi=qt);return Cn&&ee(Be,Fn),Wt}for(qt=D(qt);Fn<We.length;Fn++)Pr=tn(qt,Be,Fn,We[Fn],mt),Pr!==null&&(d&&Pr.alternate!==null&&qt.delete(Pr.key===null?Fn:Pr.key),Ue=H(Pr,Ue,Fn),Bi===null?Wt=Pr:Bi.sibling=Pr,Bi=Pr);return d&&qt.forEach(function(ea){return g(Be,ea)}),Cn&&ee(Be,Fn),Wt}function Mh(Be,Ue,We,mt){if(We==null)throw Error(r(151));for(var Wt=null,Bi=null,qt=Ue,Fn=Ue=0,Pr=null,Yn=We.next();qt!==null&&!Yn.done;Fn++,Yn=We.next()){qt.index>Fn?(Pr=qt,qt=null):Pr=qt.sibling;var ea=Rt(Be,qt,Yn.value,mt);if(ea===null){qt===null&&(qt=Pr);break}d&&qt&&ea.alternate===null&&g(Be,qt),Ue=H(ea,Ue,Fn),Bi===null?Wt=ea:Bi.sibling=ea,Bi=ea,qt=Pr}if(Yn.done)return E(Be,qt),Cn&&ee(Be,Fn),Wt;if(qt===null){for(;!Yn.done;Fn++,Yn=We.next())Yn=ht(Be,Yn.value,mt),Yn!==null&&(Ue=H(Yn,Ue,Fn),Bi===null?Wt=Yn:Bi.sibling=Yn,Bi=Yn);return Cn&&ee(Be,Fn),Wt}for(qt=D(qt);!Yn.done;Fn++,Yn=We.next())Yn=tn(qt,Be,Fn,Yn.value,mt),Yn!==null&&(d&&Yn.alternate!==null&&qt.delete(Yn.key===null?Fn:Yn.key),Ue=H(Yn,Ue,Fn),Bi===null?Wt=Yn:Bi.sibling=Yn,Bi=Yn);return d&&qt.forEach(function(pM){return g(Be,pM)}),Cn&&ee(Be,Fn),Wt}function Xc(Be,Ue,We,mt){if(typeof We=="object"&&We!==null&&We.type===Uu&&We.key===null&&(We=We.props.children),typeof We=="object"&&We!==null){switch(We.$$typeof){case $a:e:{for(var Wt=We.key;Ue!==null;){if(Ue.key===Wt){if(Wt=We.type,Wt===Uu){if(Ue.tag===7){E(Be,Ue.sibling),mt=k(Ue,We.props.children),mt.return=Be,Be=mt;break e}}else if(Ue.elementType===Wt||typeof Wt=="object"&&Wt!==null&&Wt.$$typeof===bs&&Tt(Wt)===Ue.type){E(Be,Ue.sibling),mt=k(Ue,We.props),ii(mt,We),mt.return=Be,Be=mt;break e}E(Be,Ue);break}else g(Be,Ue);Ue=Ue.sibling}We.type===Uu?(mt=Go(We.props.children,Be.mode,mt,We.key),mt.return=Be,Be=mt):(mt=Ll(We.type,We.key,We.props,null,Be.mode,mt),ii(mt,We),mt.return=Be,Be=mt)}return ie(Be);case Nu:e:{for(Wt=We.key;Ue!==null;){if(Ue.key===Wt)if(Ue.tag===4&&Ue.stateNode.containerInfo===We.containerInfo&&Ue.stateNode.implementation===We.implementation){E(Be,Ue.sibling),mt=k(Ue,We.children||[]),mt.return=Be,Be=mt;break e}else{E(Be,Ue);break}else g(Be,Ue);Ue=Ue.sibling}mt=Sv(We,Be.mode,mt),mt.return=Be,Be=mt}return ie(Be);case bs:return We=Tt(We),Xc(Be,Ue,We,mt)}if(Lc(We))return nr(Be,Ue,We,mt);if(h(We)){if(Wt=h(We),typeof Wt!="function")throw Error(r(150));return We=Wt.call(We),Mh(Be,Ue,We,mt)}if(typeof We.then=="function")return Xc(Be,Ue,qn(We),mt);if(We.$$typeof===Ho)return Xc(Be,Ue,Z(Be,We),mt);wi(Be,We)}return typeof We=="string"&&We!==""||typeof We=="number"||typeof We=="bigint"?(We=""+We,Ue!==null&&Ue.tag===6?(E(Be,Ue.sibling),mt=k(Ue,We),mt.return=Be,Be=mt):(E(Be,Ue),mt=_v(We,Be.mode,mt),mt.return=Be,Be=mt),ie(Be)):E(Be,Ue)}return function(Be,Ue,We,mt){try{Xu=0;var Wt=Xc(Be,Ue,We,mt);return zc=null,Wt}catch(qt){if(qt===Tr||qt===Ko)throw qt;var Bi=t(29,qt,null,Be.mode);return Bi.lanes=mt,Bi.return=Be,Bi}}}function _r(){for(var d=tl,g=qu=tl=0;g<d;){var E=$r[g];$r[g++]=null;var D=$r[g];$r[g++]=null;var k=$r[g];$r[g++]=null;var H=$r[g];if($r[g++]=null,D!==null&&k!==null){var ie=D.pending;ie===null?k.next=k:(k.next=ie.next,ie.next=k),D.pending=k}H!==0&&Jn(E,k,H)}}function Ar(d,g,E,D){$r[tl++]=d,$r[tl++]=g,$r[tl++]=E,$r[tl++]=D,qu|=D,d.lanes|=D,d=d.alternate,d!==null&&(d.lanes|=D)}function Gr(d,g,E,D){return Ar(d,g,E,D),$n(d)}function $i(d,g){return Ar(d,null,null,g),$n(d)}function Jn(d,g,E){d.lanes|=E;var D=d.alternate;D!==null&&(D.lanes|=E);for(var k=!1,H=d.return;H!==null;)H.childLanes|=E,D=H.alternate,D!==null&&(D.childLanes|=E),H.tag===22&&(d=H.stateNode,d===null||d._visibility&1||(k=!0)),d=H,H=H.return;return d.tag===3?(H=d.stateNode,k&&g!==null&&(k=31-Vs(E),d=H.hiddenUpdates,D=d[k],D===null?d[k]=[g]:D.push(g),g.lane=E|536870912),H):null}function $n(d){if(50<Hn)throw Hn=0,ep=null,Error(r(185));for(var g=d.return;g!==null;)d=g,g=d.return;return d.tag===3?d.stateNode:null}function Hi(d){d.updateQueue={baseState:d.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ps(d,g){d=d.updateQueue,g.updateQueue===d&&(g.updateQueue={baseState:d.baseState,firstBaseUpdate:d.firstBaseUpdate,lastBaseUpdate:d.lastBaseUpdate,shared:d.shared,callbacks:null})}function Is(d){return{lane:d,tag:0,payload:null,callback:null,next:null}}function no(d,g,E){var D=d.updateQueue;if(D===null)return null;if(D=D.shared,(Tn&2)!==0){var k=D.pending;return k===null?g.next=g:(g.next=k.next,k.next=g),D.pending=g,g=$n(d),Jn(d,null,E),g}return Ar(d,D,g,E),$n(d)}function Po(d,g,E){if(g=g.updateQueue,g!==null&&(g=g.shared,(E&4194048)!==0)){var D=g.lanes;D&=d.pendingLanes,E|=D,g.lanes=E,P(d,E)}}function Da(d,g){var E=d.updateQueue,D=d.alternate;if(D!==null&&(D=D.updateQueue,E===D)){var k=null,H=null;if(E=E.firstBaseUpdate,E!==null){do{var ie={lane:E.lane,tag:E.tag,payload:E.payload,callback:null,next:null};H===null?k=H=ie:H=H.next=ie,E=E.next}while(E!==null);H===null?k=H=g:H=H.next=g}else k=H=g;E={baseState:D.baseState,firstBaseUpdate:k,lastBaseUpdate:H,shared:D.shared,callbacks:D.callbacks},d.updateQueue=E;return}d=E.lastBaseUpdate,d===null?E.firstBaseUpdate=g:d.next=g,E.lastBaseUpdate=g}function io(){if(ng){var d=Er;if(d!==null)throw d}}function ce(d,g,E,D){ng=!1;var k=d.updateQueue;po=!1;var H=k.firstBaseUpdate,ie=k.lastBaseUpdate,we=k.shared.pending;if(we!==null){k.shared.pending=null;var Ye=we,lt=Ye.next;Ye.next=null,ie===null?H=lt:ie.next=lt,ie=Ye;var yt=d.alternate;yt!==null&&(yt=yt.updateQueue,we=yt.lastBaseUpdate,we!==ie&&(we===null?yt.firstBaseUpdate=lt:we.next=lt,yt.lastBaseUpdate=Ye))}if(H!==null){var ht=k.baseState;ie=0,yt=lt=Ye=null,we=H;do{var Rt=we.lane&-536870913,tn=Rt!==we.lane;if(tn?(Rn&Rt)===Rt:(D&Rt)===Rt){Rt!==0&&Rt===Fl&&(ng=!0),yt!==null&&(yt=yt.next={lane:0,tag:we.tag,payload:we.payload,callback:null,next:null});e:{var nr=d,Mh=we;Rt=g;var Xc=E;switch(Mh.tag){case 1:if(nr=Mh.payload,typeof nr=="function"){ht=nr.call(Xc,ht,Rt);break e}ht=nr;break e;case 3:nr.flags=nr.flags&-65537|128;case 0:if(nr=Mh.payload,Rt=typeof nr=="function"?nr.call(Xc,ht,Rt):nr,Rt==null)break e;ht=Dm({},ht,Rt);break e;case 2:po=!0}}Rt=we.callback,Rt!==null&&(d.flags|=64,tn&&(d.flags|=8192),tn=k.callbacks,tn===null?k.callbacks=[Rt]:tn.push(Rt))}else tn={lane:Rt,tag:we.tag,payload:we.payload,callback:we.callback,next:null},yt===null?(lt=yt=tn,Ye=ht):yt=yt.next=tn,ie|=Rt;if(we=we.next,we===null){if(we=k.shared.pending,we===null)break;tn=we,we=tn.next,tn.next=null,k.lastBaseUpdate=tn,k.shared.pending=null}}while(!0);yt===null&&(Ye=ht),k.baseState=Ye,k.firstBaseUpdate=lt,k.lastBaseUpdate=yt,H===null&&(k.shared.lanes=0),Vl|=ie,d.lanes=ie,d.memoizedState=ht}}function De(d,g){if(typeof d!="function")throw Error(r(191,d));d.call(g)}function Ve(d,g){var E=d.callbacks;if(E!==null)for(d.callbacks=null,d=0;d<E.length;d++)De(E[d],g)}function He(d,g){d=il,b(Fc,d),b(Yu,g),il=d|g.baseLanes}function ye(){b(Fc,il),b(Yu,Yu.current)}function it(){il=Fc.current,y(Yu),y(Fc)}function bt(d){var g=d.alternate;b(Xi,Xi.current&1),b(Hs,d),js===null&&(g===null||Yu.current!==null||g.memoizedState!==null)&&(js=d)}function At(d){b(Xi,Xi.current),b(Hs,d),js===null&&(js=d)}function wt(d){d.tag===22?(b(Xi,Xi.current),b(Hs,d),js===null&&(js=d)):Lt()}function Lt(){b(Xi,Xi.current),b(Hs,Hs.current)}function Pt(d){y(Hs),js===d&&(js=null),y(Xi)}function Nt(d){for(var g=d;g!==null;){if(g.tag===13){var E=g.memoizedState;if(E!==null&&(E=E.dehydrated,E===null||Ic(E)||zm(E)))return g}else if(g.tag===19&&(g.memoizedProps.revealOrder==="forwards"||g.memoizedProps.revealOrder==="backwards"||g.memoizedProps.revealOrder==="unstable_legacy-backwards"||g.memoizedProps.revealOrder==="together")){if((g.flags&128)!==0)return g}else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===d)break;for(;g.sibling===null;){if(g.return===null||g.return===d)return null;g=g.return}g.sibling.return=g.return,g=g.sibling}return null}function It(){throw Error(r(321))}function Pn(d,g){if(g===null)return!1;for(var E=0;E<g.length&&E<d.length;E++)if(!Ji(d[E],g[E]))return!1;return!0}function Un(d,g,E,D,k,H){return Bl=H,an=g,g.memoizedState=null,g.updateQueue=null,g.lanes=0,Ht.H=d===null||d.memoizedState===null?ki:nl,In=!1,H=E(D,k),In=!1,hn&&(H=rn(g,E,D,k)),kn(d),H}function kn(d){Ht.H=mo;var g=Gt!==null&&Gt.next!==null;if(Bl=0,Jt=Gt=an=null,vn=!1,Qo=0,ba=null,g)throw Error(r(300));d===null||Ei||(d=d.dependencies,d!==null&&be(d)&&(Ei=!0))}function rn(d,g,E,D){an=d;var k=0;do{if(hn&&(ba=null),Qo=0,hn=!1,25<=k)throw Error(r(301));if(k+=1,Jt=Gt=null,d.updateQueue!=null){var H=d.updateQueue;H.lastEffect=null,H.events=null,H.stores=null,H.memoCache!=null&&(H.memoCache.index=0)}Ht.H=Bc,H=g(E,D)}while(hn);return H}function Ot(){var d=Ht.H,g=d.useState()[0];return g=typeof g.then=="function"?Xt(g):g,d=d.useState()[0],(Gt!==null?Gt.memoizedState:null)!==d&&(an.flags|=1024),g}function zn(){var d=fs!==0;return fs=0,d}function mn(d,g,E){g.updateQueue=d.updateQueue,g.flags&=-2053,d.lanes&=~E}function gi(d){if(vn){for(d=d.memoizedState;d!==null;){var g=d.queue;g!==null&&(g.pending=null),d=d.next}vn=!1}Bl=0,Jt=Gt=an=null,hn=!1,Qo=fs=0,ba=null}function hi(){var d={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Jt===null?an.memoizedState=Jt=d:Jt=Jt.next=d,Jt}function sn(){if(Gt===null){var d=an.alternate;d=d!==null?d.memoizedState:null}else d=Gt.next;var g=Jt===null?an.memoizedState:Jt.next;if(g!==null)Jt=g,Gt=d;else{if(d===null)throw an.alternate===null?Error(r(467)):Error(r(310));Gt=d,d={memoizedState:Gt.memoizedState,baseState:Gt.baseState,baseQueue:Gt.baseQueue,queue:Gt.queue,next:null},Jt===null?an.memoizedState=Jt=d:Jt=Jt.next=d}return Jt}function Ns(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Xt(d){var g=Qo;return Qo+=1,ba===null&&(ba=[]),d=Ct(ba,d,g),g=an,(Jt===null?g.memoizedState:Jt.next)===null&&(g=g.alternate,Ht.H=g===null||g.memoizedState===null?ki:nl),d}function Zi(d){if(d!==null&&typeof d=="object"){if(typeof d.then=="function")return Xt(d);if(d.$$typeof===Ho)return te(d)}throw Error(r(438,String(d)))}function ji(d){var g=null,E=an.updateQueue;if(E!==null&&(g=E.memoCache),g==null){var D=an.alternate;D!==null&&(D=D.updateQueue,D!==null&&(D=D.memoCache,D!=null&&(g={data:D.data.map(function(k){return k.slice()}),index:0})))}if(g==null&&(g={data:[],index:0}),E===null&&(E=Ns(),an.updateQueue=E),E.memoCache=g,E=g.data[g.index],E===void 0)for(E=g.data[g.index]=Array(d),D=0;D<d;D++)E[D]=Ev;return g.index++,E}function Gn(d,g){return typeof g=="function"?g(d):g}function di(d){var g=sn();return ro(g,Gt,d)}function ro(d,g,E){var D=d.queue;if(D===null)throw Error(r(311));D.lastRenderedReducer=E;var k=d.baseQueue,H=D.pending;if(H!==null){if(k!==null){var ie=k.next;k.next=H.next,H.next=ie}g.baseQueue=k=H,D.pending=null}if(H=d.baseState,k===null)d.memoizedState=H;else{g=k.next;var we=ie=null,Ye=null,lt=g,yt=!1;do{var ht=lt.lane&-536870913;if(ht!==lt.lane?(Rn&ht)===ht:(Bl&ht)===ht){var Rt=lt.revertLane;if(Rt===0)Ye!==null&&(Ye=Ye.next={lane:0,revertLane:0,gesture:null,action:lt.action,hasEagerState:lt.hasEagerState,eagerState:lt.eagerState,next:null}),ht===Fl&&(yt=!0);else if((Bl&Rt)===Rt){lt=lt.next,Rt===Fl&&(yt=!0);continue}else ht={lane:0,revertLane:lt.revertLane,gesture:null,action:lt.action,hasEagerState:lt.hasEagerState,eagerState:lt.eagerState,next:null},Ye===null?(we=Ye=ht,ie=H):Ye=Ye.next=ht,an.lanes|=Rt,Vl|=Rt;ht=lt.action,In&&E(H,ht),H=lt.hasEagerState?lt.eagerState:E(H,ht)}else Rt={lane:ht,revertLane:lt.revertLane,gesture:lt.gesture,action:lt.action,hasEagerState:lt.hasEagerState,eagerState:lt.eagerState,next:null},Ye===null?(we=Ye=Rt,ie=H):Ye=Ye.next=Rt,an.lanes|=ht,Vl|=ht;lt=lt.next}while(lt!==null&&lt!==g);if(Ye===null?ie=H:Ye.next=we,!Ji(H,d.memoizedState)&&(Ei=!0,yt&&(E=Er,E!==null)))throw E;d.memoizedState=H,d.baseState=ie,d.baseQueue=Ye,D.lastRenderedState=H}return k===null&&(D.lanes=0),[d.memoizedState,D.dispatch]}function Hr(d){var g=sn(),E=g.queue;if(E===null)throw Error(r(311));E.lastRenderedReducer=d;var D=E.dispatch,k=E.pending,H=g.memoizedState;if(k!==null){E.pending=null;var ie=k=k.next;do H=d(H,ie.action),ie=ie.next;while(ie!==k);Ji(H,g.memoizedState)||(Ei=!0),g.memoizedState=H,g.baseQueue===null&&(g.baseState=H),E.lastRenderedState=H}return[H,D]}function ha(d,g,E){var D=an,k=sn(),H=Cn;if(H){if(E===void 0)throw Error(r(407));E=E()}else E=g();var ie=!Ji((Gt||k).memoizedState,E);if(ie&&(k.memoizedState=E,Ei=!0),k=k.queue,Uo(_u.bind(null,D,k,d),[d]),k.getSnapshot!==g||ie||Jt!==null&&Jt.memoizedState.tag&1){if(D.flags|=2048,os(9,{destroy:void 0},qf.bind(null,D,k,E,g),null),yn===null)throw Error(r(349));H||(Bl&127)!==0||bd(D,g,E)}return E}function bd(d,g,E){d.flags|=16384,d={getSnapshot:g,value:E},g=an.updateQueue,g===null?(g=Ns(),an.updateQueue=g,g.stores=[d]):(E=g.stores,E===null?g.stores=[d]:E.push(d))}function qf(d,g,E,D){g.value=E,g.getSnapshot=D,Oa(g)&&_d(d)}function _u(d,g,E){return E(function(){Oa(g)&&_d(d)})}function Oa(d){var g=d.getSnapshot;d=d.value;try{var E=g();return!Ji(d,E)}catch{return!0}}function _d(d){var g=$i(d,2);g!==null&&Ni(g,d,2)}function dc(d){var g=hi();if(typeof d=="function"){var E=d;if(d=E(),In){z(!0);try{E()}finally{z(!1)}}}return g.memoizedState=g.baseState=d,g.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gn,lastRenderedState:d},g}function Io(d,g,E,D){return d.baseState=E,ro(d,Gt,typeof D=="function"?D:Gn)}function ss(d,g,E,D,k){if(um(d))throw Error(r(485));if(d=g.action,d!==null){var H={payload:k,action:d,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(ie){H.listeners.push(ie)}};Ht.T!==null?E(!0):H.isTransition=!1,D(H),E=g.pending,E===null?(H.next=g.pending=H,La(g,H)):(H.next=E.next,g.pending=E.next=H)}}function La(d,g){var E=g.action,D=g.payload,k=d.state;if(g.isTransition){var H=Ht.T,ie={};Ht.T=ie;try{var we=E(k,D),Ye=Ht.S;Ye!==null&&Ye(ie,we),xu(d,g,we)}catch(lt){No(d,g,lt)}finally{H!==null&&ie.types!==null&&(H.types=ie.types),Ht.T=H}}else try{H=E(k,D),xu(d,g,H)}catch(lt){No(d,g,lt)}}function xu(d,g,E){E!==null&&typeof E=="object"&&typeof E.then=="function"?E.then(function(D){so(d,g,D)},function(D){return No(d,g,D)}):so(d,g,E)}function so(d,g,E){g.status="fulfilled",g.value=E,Su(g),d.state=E,g=d.pending,g!==null&&(E=g.next,E===g?d.pending=null:(E=E.next,g.next=E,La(d,E)))}function No(d,g,E){var D=d.pending;if(d.pending=null,D!==null){D=D.next;do g.status="rejected",g.reason=E,Su(g),g=g.next;while(g!==D)}d.action=null}function Su(d){d=d.listeners;for(var g=0;g<d.length;g++)(0,d[g])()}function wu(d,g){return g}function pc(d,g){if(Cn){var E=yn.formState;if(E!==null){e:{var D=an;if(Cn){if(Di){var k=Px(Di,xs);if(k){Di=Ix(k),D=Hv(k);break e}}Ee(D)}D=!1}D&&(g=E[0])}}E=hi(),E.memoizedState=E.baseState=g,D={pending:null,lanes:0,dispatch:null,lastRenderedReducer:wu,lastRenderedState:g},E.queue=D,E=ma.bind(null,an,D),D.dispatch=E,D=dc(!1);var H=cm.bind(null,an,!1,D.queue);return D=hi(),k={state:g,dispatch:null,action:d,pending:null},D.queue=k,E=ss.bind(null,an,k,H,E),k.dispatch=E,D.memoizedState=d,[g,E,!1]}function Pa(d){var g=sn();return oo(g,Gt,d)}function oo(d,g,E){if(g=ro(d,g,wu)[0],d=di(Gn)[0],typeof g=="object"&&g!==null&&typeof g.then=="function")try{var D=Xt(g)}catch(ie){throw ie===Tr?Ko:ie}else D=g;g=sn();var k=g.queue,H=k.dispatch;return E!==g.memoizedState&&(an.flags|=2048,os(9,{destroy:void 0},gs.bind(null,k,E),null)),[D,H,d]}function gs(d,g){d.action=g}function Ia(d){var g=sn(),E=Gt;if(E!==null)return oo(g,E,d);sn(),g=g.memoizedState,E=sn();var D=E.queue.dispatch;return E.memoizedState=d,[g,D,!1]}function os(d,g,E,D){return d={tag:d,create:E,deps:D,inst:g,next:null},g=an.updateQueue,g===null&&(g=Ns(),an.updateQueue=g),E=g.lastEffect,E===null?g.lastEffect=d.next=d:(D=E.next,E.next=d,d.next=D,g.lastEffect=d),d}function Eu(){return sn().memoizedState}function da(d,g,E,D){var k=hi();an.flags|=d,k.memoizedState=os(1|g,{destroy:void 0},E,D===void 0?null:D)}function mc(d,g,E,D){var k=sn();D=D===void 0?null:D;var H=k.memoizedState.inst;Gt!==null&&D!==null&&Pn(D,Gt.memoizedState.deps)?k.memoizedState=os(g,H,E,D):(an.flags|=d,k.memoizedState=os(1|g,H,E,D))}function gc(d,g){da(8390656,8,d,g)}function Uo(d,g){mc(2048,8,d,g)}function vc(d){an.flags|=4;var g=an.updateQueue;if(g===null)g=Ns(),an.updateQueue=g,g.events=[d];else{var E=g.events;E===null?g.events=[d]:E.push(d)}}function Ai(d){var g=sn().memoizedState;return vc({ref:g,nextImpl:d}),function(){if((Tn&2)!==0)throw Error(r(440));return g.impl.apply(void 0,arguments)}}function pa(d,g){return mc(4,2,d,g)}function Ml(d,g){return mc(4,4,d,g)}function Na(d,g){if(typeof g=="function"){d=d();var E=g(d);return function(){typeof E=="function"?E():g(null)}}if(g!=null)return d=d(),g.current=d,function(){g.current=null}}function yc(d,g,E){E=E!=null?E.concat([d]):null,mc(4,4,Na.bind(null,g,d),E)}function bc(){}function Ua(d,g){var E=sn();g=g===void 0?null:g;var D=E.memoizedState;return g!==null&&Pn(g,D[1])?D[0]:(E.memoizedState=[d,g],d)}function ka(d,g){var E=sn();g=g===void 0?null:g;var D=E.memoizedState;if(g!==null&&Pn(g,D[1]))return D[0];if(D=d(),In){z(!0);try{d()}finally{z(!1)}}return E.memoizedState=[D,g],D}function fr(d,g,E){return E===void 0||(Bl&1073741824)!==0&&(Rn&261930)===0?d.memoizedState=g:(d.memoizedState=E,d=Rl(),an.lanes|=d,Vl|=d,E)}function xd(d,g,E,D){return Ji(E,g)?E:Yu.current!==null?(d=fr(d,E,D),Ji(d,g)||(Ei=!0),d):(Bl&42)===0||(Bl&1073741824)!==0&&(Rn&261930)===0?(Ei=!0,d.memoizedState=E):(d=Rl(),an.lanes|=d,Vl|=d,g)}function Tu(d,g,E,D,k){var H=jo();An(H!==0&&8>H?H:8);var ie=Ht.T,we={};Ht.T=we,cm(d,!1,g,E);try{var Ye=k(),lt=Ht.S;if(lt!==null&&lt(we,Ye),Ye!==null&&typeof Ye=="object"&&typeof Ye.then=="function"){var yt=qe(Ye,D);_c(d,g,yt,Ci(d))}else _c(d,g,D,Ci(d))}catch(ht){_c(d,g,{then:function(){},status:"rejected",reason:ht},Ci())}finally{An(H),ie!==null&&we.types!==null&&(ie.types=we.types),Ht.T=ie}}function Mu(d){var g=d.memoizedState;if(g!==null)return g;g={memoizedState:Bu,baseState:Bu,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gn,lastRenderedState:Bu},next:null};var E={};return g.next={memoizedState:E,baseState:E,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gn,lastRenderedState:E},next:null},d.memoizedState=g,d=d.alternate,d!==null&&(d.memoizedState=g),g}function Yf(){return te(Vu)}function $f(){return sn().memoizedState}function jr(){return sn().memoizedState}function ao(d){for(var g=d.return;g!==null;){switch(g.tag){case 24:case 3:var E=Ci();d=Is(E);var D=no(g,d,E);D!==null&&(Ni(D,g,E),Po(D,g,E)),g={cache:Ne()},d.payload=g;return}g=g.return}}function as(d,g,E){var D=Ci();E={lane:D,revertLane:0,gesture:null,action:E,hasEagerState:!1,eagerState:null,next:null},um(d)?X_(g,E):(E=Gr(d,g,E,D),E!==null&&(Ni(E,d,D),q_(E,g,D)))}function ma(d,g,E){var D=Ci();_c(d,g,E,D)}function _c(d,g,E,D){var k={lane:D,revertLane:0,gesture:null,action:E,hasEagerState:!1,eagerState:null,next:null};if(um(d))X_(g,k);else{var H=d.alternate;if(d.lanes===0&&(H===null||H.lanes===0)&&(H=g.lastRenderedReducer,H!==null))try{var ie=g.lastRenderedState,we=H(ie,E);if(k.hasEagerState=!0,k.eagerState=we,Ji(we,ie))return Ar(d,g,k,0),yn===null&&_r(),!1}catch{}if(E=Gr(d,g,k,D),E!==null)return Ni(E,d,D),q_(E,g,D),!0}return!1}function cm(d,g,E,D){if(D={lane:2,revertLane:ut(),gesture:null,action:D,hasEagerState:!1,eagerState:null,next:null},um(d)){if(g)throw Error(r(479))}else g=Gr(d,E,D,2),g!==null&&Ni(g,d,2)}function um(d){var g=d.alternate;return d===an||g!==null&&g===an}function X_(d,g){hn=vn=!0;var E=d.pending;E===null?g.next=g:(g.next=E.next,E.next=g),d.pending=g}function q_(d,g,E){if((E&4194048)!==0){var D=g.lanes;D&=d.pendingLanes,E|=D,g.lanes=E,P(d,E)}}function tv(d,g,E,D){g=d.memoizedState,E=E(D,g),E=E==null?g:Dm({},g,E),d.memoizedState=E,d.lanes===0&&(d.updateQueue.baseState=E)}function fm(d,g,E,D,k,H,ie){return d=d.stateNode,typeof d.shouldComponentUpdate=="function"?d.shouldComponentUpdate(D,H,ie):g.prototype&&g.prototype.isPureReactComponent?!Fe(E,D)||!Fe(k,H):!0}function Y_(d,g,E,D){d=g.state,typeof g.componentWillReceiveProps=="function"&&g.componentWillReceiveProps(E,D),typeof g.UNSAFE_componentWillReceiveProps=="function"&&g.UNSAFE_componentWillReceiveProps(E,D),g.state!==d&&$d.enqueueReplaceState(g,g.state,null)}function Au(d,g){var E=g;if("ref"in g){E={};for(var D in g)D!=="ref"&&(E[D]=g[D])}if(d=d.defaultProps){E===g&&(E=Dm({},E));for(var k in d)E[k]===void 0&&(E[k]=d[k])}return E}function hm(d,g){try{var E=d.onUncaughtError;E(g.value,{componentStack:g.stack})}catch(D){setTimeout(function(){throw D})}}function nv(d,g,E){try{var D=d.onCaughtError;D(E.value,{componentStack:E.stack,errorBoundary:g.tag===1?g.stateNode:null})}catch(k){setTimeout(function(){throw k})}}function iv(d,g,E){return E=Is(E),E.tag=3,E.payload={element:null},E.callback=function(){hm(d,g)},E}function $_(d){return d=Is(d),d.tag=3,d}function Z_(d,g,E,D){var k=E.type.getDerivedStateFromError;if(typeof k=="function"){var H=D.value;d.payload=function(){return k(H)},d.callback=function(){nv(g,E,D)}}var ie=E.stateNode;ie!==null&&typeof ie.componentDidCatch=="function"&&(d.callback=function(){nv(g,E,D),typeof k!="function"&&(Gl===null?Gl=new Set([this]):Gl.add(this));var we=D.stack;this.componentDidCatch(D.value,{componentStack:we!==null?we:""})})}function rM(d,g,E,D,k){if(E.flags|=32768,D!==null&&typeof D=="object"&&typeof D.then=="function"){if(g=E.alternate,g!==null&&Ie(g,E,k,!0),E=Hs.current,E!==null){switch(E.tag){case 31:case 13:return js===null?oh():E.alternate===null&&Fi===0&&(Fi=3),E.flags&=-257,E.flags|=65536,E.lanes=k,D===el?E.flags|=16384:(g=E.updateQueue,g===null?E.updateQueue=new Set([D]):g.add(D),ch(d,D,k)),!1;case 22:return E.flags|=65536,D===el?E.flags|=16384:(g=E.updateQueue,g===null?(g={transitions:null,markerInstances:null,retryQueue:new Set([D])},E.updateQueue=g):(E=g.retryQueue,E===null?g.retryQueue=new Set([D]):E.add(D)),ch(d,D,k)),!1}throw Error(r(435,E.tag))}return ch(d,D,k),oh(),!1}if(Cn)return g=Hs.current,g!==null?((g.flags&65536)===0&&(g.flags|=256),g.flags|=65536,g.lanes=k,D!==Jm&&(d=Error(r(422),{cause:D}),ve(J(d,E)))):(D!==Jm&&(g=Error(r(423),{cause:D}),ve(J(g,E))),d=d.current.alternate,d.flags|=65536,k&=-k,d.lanes|=k,D=J(D,E),k=iv(d.stateNode,D,k),Da(d,k),Fi!==4&&(Fi=2)),!1;var H=Error(r(520),{cause:D});if(H=J(H,E),Kd===null?Kd=[H]:Kd.push(H),Fi!==4&&(Fi=2),g===null)return!0;D=J(D,E),E=g;do{switch(E.tag){case 3:return E.flags|=65536,d=k&-k,E.lanes|=d,d=iv(E.stateNode,D,d),Da(E,d),!1;case 1:if(g=E.type,H=E.stateNode,(E.flags&128)===0&&(typeof g.getDerivedStateFromError=="function"||H!==null&&typeof H.componentDidCatch=="function"&&(Gl===null||!Gl.has(H))))return E.flags|=65536,k&=-k,E.lanes|=k,k=$_(k),Z_(k,d,E,D),Da(E,k),!1}E=E.return}while(E!==null);return!1}function Wr(d,g,E,D){g.child=d===null?ay(g,null,E,D):Yr(g,d.child,E,D)}function K_(d,g,E,D,k){E=E.render;var H=g.ref;if("ref"in D){var ie={};for(var we in D)we!=="ref"&&(ie[we]=D[we])}else ie=D;return Je(g),D=Un(d,g,E,ie,H,k),we=zn(),d!==null&&!Ei?(mn(d,g,k),za(d,g,k)):(Cn&&we&&Y(g),g.flags|=1,Wr(d,g,D,k),g.child)}function Q_(d,g,E,D,k){if(d===null){var H=E.type;return typeof H=="function"&&!Lu(H)&&H.defaultProps===void 0&&E.compare===null?(g.tag=15,g.type=H,J_(d,g,H,D,k)):(d=Ll(E.type,null,D,g,g.mode,k),d.ref=g.ref,d.return=g,g.child=d)}if(H=d.child,!wd(d,k)){var ie=H.memoizedProps;if(E=E.compare,E=E!==null?E:Fe,E(ie,D)&&d.ref===g.ref)return za(d,g,k)}return g.flags|=1,d=uo(H,D),d.ref=g.ref,d.return=g,g.child=d}function J_(d,g,E,D,k){if(d!==null){var H=d.memoizedProps;if(Fe(H,D)&&d.ref===g.ref)if(Ei=!1,g.pendingProps=D=H,wd(d,k))(d.flags&131072)!==0&&(Ei=!0);else return g.lanes=d.lanes,za(d,g,k)}return pm(d,g,E,D,k)}function ex(d,g,E,D){var k=D.children,H=d!==null?d.memoizedState:null;if(d===null&&g.stateNode===null&&(g.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),D.mode==="hidden"){if((g.flags&128)!==0){if(H=H!==null?H.baseLanes|E:E,d!==null){for(D=g.child=d.child,k=0;D!==null;)k=k|D.lanes|D.childLanes,D=D.sibling;D=k&~H}else D=0,g.child=null;return Zf(d,g,H,E,D)}if((E&536870912)!==0)g.memoizedState={baseLanes:0,cachePool:null},d!==null&&St(g,H!==null?H.cachePool:null),H!==null?He(g,H):ye(),wt(g);else return D=g.lanes=536870912,Zf(d,g,H!==null?H.baseLanes|E:E,E,D)}else H!==null?(St(g,H.cachePool),He(g,H),Lt(),g.memoizedState=null):(d!==null&&St(g,null),ye(),Lt());return Wr(d,g,k,E),g.child}function Cu(d,g){return d!==null&&d.tag===22||g.stateNode!==null||(g.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),g.sibling}function Zf(d,g,E,D,k){var H=st();return H=H===null?null:{parent:Ki?Oi._currentValue:Oi._currentValue2,pool:H},g.memoizedState={baseLanes:E,cachePool:H},d!==null&&St(g,null),ye(),wt(g),d!==null&&Ie(d,g,D,!0),g.childLanes=k,null}function dm(d,g){return g=xc({mode:g.mode,children:g.children},d.mode),g.ref=d.ref,d.child=g,g.return=d,g}function rv(d,g,E){return Yr(g,d.child,null,E),d=dm(g,g.pendingProps),d.flags|=2,Pt(g),g.memoizedState=null,d}function tx(d,g,E){var D=g.pendingProps,k=(g.flags&128)!==0;if(g.flags&=-129,d===null){if(Cn){if(D.mode==="hidden")return d=dm(g,D),g.lanes=536870912,Cu(null,d);if(At(g),(d=Di)?(d=Wv(d,xs),d!==null&&(g.memoizedState={dehydrated:d,treeContext:qo!==null?{id:Xr,overflow:va}:null,retryLane:536870912,hydrationErrors:null},E=xv(d),E.return=g,g.child=E,wr=g,Di=null)):d=null,d===null)throw Ee(g);return g.lanes=536870912,null}return dm(g,D)}var H=d.memoizedState;if(H!==null){var ie=H.dehydrated;if(At(g),k)if(g.flags&256)g.flags&=-257,g=rv(d,g,E);else if(g.memoizedState!==null)g.child=d.child,g.flags|=128,g=null;else throw Error(r(558));else if(Ei||Ie(d,g,E,!1),k=(E&d.childLanes)!==0,Ei||k){if(D=yn,D!==null&&(ie=U(D,E),ie!==0&&ie!==H.retryLane))throw H.retryLane=ie,$i(d,ie),Ni(D,d,ie),ws;oh(),g=rv(d,g,E)}else d=H.treeContext,Ri&&(Di=zx(ie),wr=g,Cn=!0,Ja=null,xs=!1,d!==null&&re(g,d)),g=dm(g,D),g.flags|=4096;return g}return d=uo(d.child,{mode:D.mode,children:D.children}),d.ref=g.ref,g.child=d,d.return=g,d}function Sd(d,g){var E=g.ref;if(E===null)d!==null&&d.ref!==null&&(g.flags|=4194816);else{if(typeof E!="function"&&typeof E!="object")throw Error(r(284));(d===null||d.ref!==E)&&(g.flags|=4194816)}}function pm(d,g,E,D,k){return Je(g),E=Un(d,g,E,D,void 0,k),D=zn(),d!==null&&!Ei?(mn(d,g,k),za(d,g,k)):(Cn&&D&&Y(g),g.flags|=1,Wr(d,g,E,k),g.child)}function sv(d,g,E,D,k,H){return Je(g),g.updateQueue=null,E=rn(g,D,E,k),kn(d),D=zn(),d!==null&&!Ei?(mn(d,g,H),za(d,g,H)):(Cn&&D&&Y(g),g.flags|=1,Wr(d,g,E,H),g.child)}function Ru(d,g,E,D,k){if(Je(g),g.stateNode===null){var H=Za,ie=E.contextType;typeof ie=="object"&&ie!==null&&(H=te(ie)),H=new E(D,H),g.memoizedState=H.state!==null&&H.state!==void 0?H.state:null,H.updater=$d,g.stateNode=H,H._reactInternals=g,H=g.stateNode,H.props=D,H.state=g.memoizedState,H.refs={},Hi(g),ie=E.contextType,H.context=typeof ie=="object"&&ie!==null?te(ie):Za,H.state=g.memoizedState,ie=E.getDerivedStateFromProps,typeof ie=="function"&&(tv(g,E,ie,D),H.state=g.memoizedState),typeof E.getDerivedStateFromProps=="function"||typeof H.getSnapshotBeforeUpdate=="function"||typeof H.UNSAFE_componentWillMount!="function"&&typeof H.componentWillMount!="function"||(ie=H.state,typeof H.componentWillMount=="function"&&H.componentWillMount(),typeof H.UNSAFE_componentWillMount=="function"&&H.UNSAFE_componentWillMount(),ie!==H.state&&$d.enqueueReplaceState(H,H.state,null),ce(g,D,H,k),io(),H.state=g.memoizedState),typeof H.componentDidMount=="function"&&(g.flags|=4194308),D=!0}else if(d===null){H=g.stateNode;var we=g.memoizedProps,Ye=Au(E,we);H.props=Ye;var lt=H.context,yt=E.contextType;ie=Za,typeof yt=="object"&&yt!==null&&(ie=te(yt));var ht=E.getDerivedStateFromProps;yt=typeof ht=="function"||typeof H.getSnapshotBeforeUpdate=="function",we=g.pendingProps!==we,yt||typeof H.UNSAFE_componentWillReceiveProps!="function"&&typeof H.componentWillReceiveProps!="function"||(we||lt!==ie)&&Y_(g,H,D,ie),po=!1;var Rt=g.memoizedState;H.state=Rt,ce(g,D,H,k),io(),lt=g.memoizedState,we||Rt!==lt||po?(typeof ht=="function"&&(tv(g,E,ht,D),lt=g.memoizedState),(Ye=po||fm(g,E,Ye,D,Rt,lt,ie))?(yt||typeof H.UNSAFE_componentWillMount!="function"&&typeof H.componentWillMount!="function"||(typeof H.componentWillMount=="function"&&H.componentWillMount(),typeof H.UNSAFE_componentWillMount=="function"&&H.UNSAFE_componentWillMount()),typeof H.componentDidMount=="function"&&(g.flags|=4194308)):(typeof H.componentDidMount=="function"&&(g.flags|=4194308),g.memoizedProps=D,g.memoizedState=lt),H.props=D,H.state=lt,H.context=ie,D=Ye):(typeof H.componentDidMount=="function"&&(g.flags|=4194308),D=!1)}else{H=g.stateNode,Ps(d,g),ie=g.memoizedProps,yt=Au(E,ie),H.props=yt,ht=g.pendingProps,Rt=H.context,lt=E.contextType,Ye=Za,typeof lt=="object"&&lt!==null&&(Ye=te(lt)),we=E.getDerivedStateFromProps,(lt=typeof we=="function"||typeof H.getSnapshotBeforeUpdate=="function")||typeof H.UNSAFE_componentWillReceiveProps!="function"&&typeof H.componentWillReceiveProps!="function"||(ie!==ht||Rt!==Ye)&&Y_(g,H,D,Ye),po=!1,Rt=g.memoizedState,H.state=Rt,ce(g,D,H,k),io();var tn=g.memoizedState;ie!==ht||Rt!==tn||po||d!==null&&d.dependencies!==null&&be(d.dependencies)?(typeof we=="function"&&(tv(g,E,we,D),tn=g.memoizedState),(yt=po||fm(g,E,yt,D,Rt,tn,Ye)||d!==null&&d.dependencies!==null&&be(d.dependencies))?(lt||typeof H.UNSAFE_componentWillUpdate!="function"&&typeof H.componentWillUpdate!="function"||(typeof H.componentWillUpdate=="function"&&H.componentWillUpdate(D,tn,Ye),typeof H.UNSAFE_componentWillUpdate=="function"&&H.UNSAFE_componentWillUpdate(D,tn,Ye)),typeof H.componentDidUpdate=="function"&&(g.flags|=4),typeof H.getSnapshotBeforeUpdate=="function"&&(g.flags|=1024)):(typeof H.componentDidUpdate!="function"||ie===d.memoizedProps&&Rt===d.memoizedState||(g.flags|=4),typeof H.getSnapshotBeforeUpdate!="function"||ie===d.memoizedProps&&Rt===d.memoizedState||(g.flags|=1024),g.memoizedProps=D,g.memoizedState=tn),H.props=D,H.state=tn,H.context=Ye,D=yt):(typeof H.componentDidUpdate!="function"||ie===d.memoizedProps&&Rt===d.memoizedState||(g.flags|=4),typeof H.getSnapshotBeforeUpdate!="function"||ie===d.memoizedProps&&Rt===d.memoizedState||(g.flags|=1024),D=!1)}return H=D,Sd(d,g),D=(g.flags&128)!==0,H||D?(H=g.stateNode,E=D&&typeof E.getDerivedStateFromError!="function"?null:H.render(),g.flags|=1,d!==null&&D?(g.child=Yr(g,d.child,null,k),g.child=Yr(g,null,E,k)):Wr(d,g,E,k),g.memoizedState=H.state,d=g.child):d=za(d,g,k),d}function nx(d,g,E,D){return oe(),g.flags|=256,Wr(d,g,E,D),g.child}function ov(d){return{baseLanes:d,cachePool:Qe()}}function av(d,g,E){return d=d!==null?d.childLanes&~E:0,g&&(d|=Es),d}function lv(d,g,E){var D=g.pendingProps,k=!1,H=(g.flags&128)!==0,ie;if((ie=H)||(ie=d!==null&&d.memoizedState===null?!1:(Xi.current&2)!==0),ie&&(k=!0,g.flags&=-129),ie=(g.flags&32)!==0,g.flags&=-33,d===null){if(Cn){if(k?bt(g):Lt(),(d=Di)?(d=Gx(d,xs),d!==null&&(g.memoizedState={dehydrated:d,treeContext:qo!==null?{id:Xr,overflow:va}:null,retryLane:536870912,hydrationErrors:null},E=xv(d),E.return=g,g.child=E,wr=g,Di=null)):d=null,d===null)throw Ee(g);return zm(d)?g.lanes=32:g.lanes=536870912,null}var we=D.children;return D=D.fallback,k?(Lt(),k=g.mode,we=xc({mode:"hidden",children:we},k),D=Go(D,k,E,null),we.return=g,D.return=g,we.sibling=D,g.child=we,D=g.child,D.memoizedState=ov(E),D.childLanes=av(d,ie,E),g.memoizedState=$u,Cu(null,D)):(bt(g),mm(g,we))}var Ye=d.memoizedState;if(Ye!==null&&(we=Ye.dehydrated,we!==null)){if(H)g.flags&256?(bt(g),g.flags&=-257,g=Du(d,g,E)):g.memoizedState!==null?(Lt(),g.child=d.child,g.flags|=128,g=null):(Lt(),we=D.fallback,k=g.mode,D=xc({mode:"visible",children:D.children},k),we=Go(we,k,E,null),we.flags|=2,D.return=g,we.return=g,D.sibling=we,g.child=D,Yr(g,d.child,null,E),D=g.child,D.memoizedState=ov(E),D.childLanes=av(d,ie,E),g.memoizedState=$u,g=Cu(null,D));else if(bt(g),zm(we))ie=Fm(we).digest,D=Error(r(419)),D.stack="",D.digest=ie,ve({value:D,source:null,stack:null}),g=Du(d,g,E);else if(Ei||Ie(d,g,E,!1),ie=(E&d.childLanes)!==0,Ei||ie){if(ie=yn,ie!==null&&(D=U(ie,E),D!==0&&D!==Ye.retryLane))throw Ye.retryLane=D,$i(d,D),Ni(ie,d,D),ws;Ic(we)||oh(),g=Du(d,g,E)}else Ic(we)?(g.flags|=192,g.child=d.child,g=null):(d=Ye.treeContext,Ri&&(Di=Fx(we),wr=g,Cn=!0,Ja=null,xs=!1,d!==null&&re(g,d)),g=mm(g,D.children),g.flags|=4096);return g}return k?(Lt(),we=D.fallback,k=g.mode,Ye=d.child,H=Ye.sibling,D=uo(Ye,{mode:"hidden",children:D.children}),D.subtreeFlags=Ye.subtreeFlags&65011712,H!==null?we=uo(H,we):(we=Go(we,k,E,null),we.flags|=2),we.return=g,D.return=g,D.sibling=we,g.child=D,Cu(null,D),D=g.child,we=d.child.memoizedState,we===null?we=ov(E):(k=we.cachePool,k!==null?(Ye=Ki?Oi._currentValue:Oi._currentValue2,k=k.parent!==Ye?{parent:Ye,pool:Ye}:k):k=Qe(),we={baseLanes:we.baseLanes|E,cachePool:k}),D.memoizedState=we,D.childLanes=av(d,ie,E),g.memoizedState=$u,Cu(d.child,D)):(bt(g),E=d.child,d=E.sibling,E=uo(E,{mode:"visible",children:D.children}),E.return=g,E.sibling=null,d!==null&&(ie=g.deletions,ie===null?(g.deletions=[d],g.flags|=16):ie.push(d)),g.child=E,g.memoizedState=null,E)}function mm(d,g){return g=xc({mode:"visible",children:g},d.mode),g.return=d,d.child=g}function xc(d,g){return d=t(22,d,null,g),d.lanes=0,d}function Du(d,g,E){return Yr(g,d.child,null,E),d=mm(g,g.pendingProps.children),d.flags|=2,g.memoizedState=null,d}function ix(d,g,E){d.lanes|=g;var D=d.alternate;D!==null&&(D.lanes|=g),Re(d.return,g,E)}function Kf(d,g,E,D,k,H){var ie=d.memoizedState;ie===null?d.memoizedState={isBackwards:g,rendering:null,renderingStartTime:0,last:D,tail:E,tailMode:k,treeForkCount:H}:(ie.isBackwards=g,ie.rendering=null,ie.renderingStartTime=0,ie.last=D,ie.tail=E,ie.tailMode=k,ie.treeForkCount=H)}function cv(d,g,E){var D=g.pendingProps,k=D.revealOrder,H=D.tail;D=D.children;var ie=Xi.current,we=(ie&2)!==0;if(we?(ie=ie&1|2,g.flags|=128):ie&=1,b(Xi,ie),Wr(d,g,D,E),D=Cn?Xd:0,!we&&d!==null&&(d.flags&128)!==0)e:for(d=g.child;d!==null;){if(d.tag===13)d.memoizedState!==null&&ix(d,E,g);else if(d.tag===19)ix(d,E,g);else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===g)break e;for(;d.sibling===null;){if(d.return===null||d.return===g)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}switch(k){case"forwards":for(E=g.child,k=null;E!==null;)d=E.alternate,d!==null&&Nt(d)===null&&(k=E),E=E.sibling;E=k,E===null?(k=g.child,g.child=null):(k=E.sibling,E.sibling=null),Kf(g,!1,k,E,H,D);break;case"backwards":case"unstable_legacy-backwards":for(E=null,k=g.child,g.child=null;k!==null;){if(d=k.alternate,d!==null&&Nt(d)===null){g.child=k;break}d=k.sibling,k.sibling=E,E=k,k=d}Kf(g,!0,E,null,H,D);break;case"together":Kf(g,!1,null,null,void 0,D);break;default:g.memoizedState=null}return g.child}function za(d,g,E){if(d!==null&&(g.dependencies=d.dependencies),Vl|=g.lanes,(E&g.childLanes)===0)if(d!==null){if(Ie(d,g,E,!1),(E&g.childLanes)===0)return null}else return null;if(d!==null&&g.child!==d.child)throw Error(r(153));if(g.child!==null){for(d=g.child,E=uo(d,d.pendingProps),g.child=E,E.return=g;d.sibling!==null;)d=d.sibling,E=E.sibling=uo(d,d.pendingProps),E.return=g;E.sibling=null}return g.child}function wd(d,g){return(d.lanes&g)!==0?!0:(d=d.dependencies,!!(d!==null&&be(d)))}function uv(d,g,E){switch(g.tag){case 3:ne(g,g.stateNode.containerInfo),he(g,Oi,d.memoizedState.cache),oe();break;case 27:case 5:fe(g);break;case 4:ne(g,g.stateNode.containerInfo);break;case 10:he(g,g.type,g.memoizedProps.value);break;case 31:if(g.memoizedState!==null)return g.flags|=128,At(g),null;break;case 13:var D=g.memoizedState;if(D!==null)return D.dehydrated!==null?(bt(g),g.flags|=128,null):(E&g.child.childLanes)!==0?lv(d,g,E):(bt(g),d=za(d,g,E),d!==null?d.sibling:null);bt(g);break;case 19:var k=(d.flags&128)!==0;if(D=(E&g.childLanes)!==0,D||(Ie(d,g,E,!1),D=(E&g.childLanes)!==0),k){if(D)return cv(d,g,E);g.flags|=128}if(k=g.memoizedState,k!==null&&(k.rendering=null,k.tail=null,k.lastEffect=null),b(Xi,Xi.current),D)break;return null;case 22:return g.lanes=0,ex(d,g,E,g.pendingProps);case 24:he(g,Oi,d.memoizedState.cache)}return za(d,g,E)}function fv(d,g,E){if(d!==null)if(d.memoizedProps!==g.pendingProps)Ei=!0;else{if(!wd(d,E)&&(g.flags&128)===0)return Ei=!1,uv(d,g,E);Ei=(d.flags&131072)!==0}else Ei=!1,Cn&&(g.flags&1048576)!==0&&V(g,Xd,g.index);switch(g.lanes=0,g.tag){case 16:e:{var D=g.pendingProps;if(d=Tt(g.elementType),g.type=d,typeof d=="function")Lu(d)?(D=Au(d,D),g.tag=1,g=Ru(null,g,d,D,E)):(g.tag=0,g=pm(null,g,d,D,E));else{if(d!=null){var k=d.$$typeof;if(k===uh){g.tag=11,g=K_(null,g,d,D,E);break e}else if(k===Lm){g.tag=14,g=Q_(null,g,d,D,E);break e}}throw g=p(d)||d,Error(r(306,g,""))}}return g;case 0:return pm(d,g,g.type,g.pendingProps,E);case 1:return D=g.type,k=Au(D,g.pendingProps),Ru(d,g,D,k,E);case 3:e:{if(ne(g,g.stateNode.containerInfo),d===null)throw Error(r(387));var H=g.pendingProps;k=g.memoizedState,D=k.element,Ps(d,g),ce(g,H,null,E);var ie=g.memoizedState;if(H=ie.cache,he(g,Oi,H),H!==k.cache&&Le(g,[Oi],E,!0),io(),H=ie.element,Ri&&k.isDehydrated)if(k={element:H,isDehydrated:!1,cache:ie.cache},g.updateQueue.baseState=k,g.memoizedState=k,g.flags&256){g=nx(d,g,H,E);break e}else if(H!==D){D=J(Error(r(424)),g),ve(D),g=nx(d,g,H,E);break e}else for(Ri&&(Di=kx(g.stateNode.containerInfo),wr=g,Cn=!0,Ja=null,xs=!0),E=ay(g,null,H,E),g.child=E;E;)E.flags=E.flags&-3|4096,E=E.sibling;else{if(oe(),H===D){g=za(d,g,E);break e}Wr(d,g,H,E)}g=g.child}return g;case 26:if(Wo)return Sd(d,g),d===null?(E=Zv(g.type,null,g.pendingProps,null))?g.memoizedState=E:Cn||(g.stateNode=Hm(g.type,g.pendingProps,qr.current,g)):g.memoizedState=Zv(g.type,d.memoizedProps,g.pendingProps,d.memoizedState),null;case 27:if(Sr)return fe(g),d===null&&Sr&&Cn&&(D=g.stateNode=jm(g.type,g.pendingProps,qr.current,Or.current,!1),wr=g,xs=!0,Di=jv(g.type,D,Di)),Wr(d,g,g.pendingProps.children,E),Sd(d,g),d===null&&(g.flags|=4194304),g.child;case 5:return d===null&&Cn&&(Kx(g.type,g.pendingProps,Or.current),(k=D=Di)&&(D=Bx(D,g.type,g.pendingProps,xs),D!==null?(g.stateNode=D,wr=g,Di=Ux(D),xs=!1,k=!0):k=!1),k||Ee(g)),fe(g),k=g.type,H=g.pendingProps,ie=d!==null?d.memoizedProps:null,D=H.children,_s(k,H)?D=null:ie!==null&&_s(k,ie)&&(g.flags|=32),g.memoizedState!==null&&(k=Un(d,g,Ot,null,null,E),Ki?Vu._currentValue=k:Vu._currentValue2=k),Sd(d,g),Wr(d,g,D,E),g.child;case 6:return d===null&&Cn&&($v(g.pendingProps,Or.current),(d=E=Di)&&(E=Vx(E,g.pendingProps,xs),E!==null?(g.stateNode=E,wr=g,Di=null,d=!0):d=!1),d||Ee(g)),null;case 13:return lv(d,g,E);case 4:return ne(g,g.stateNode.containerInfo),D=g.pendingProps,d===null?g.child=Yr(g,null,D,E):Wr(d,g,D,E),g.child;case 11:return K_(d,g,g.type,g.pendingProps,E);case 7:return Wr(d,g,g.pendingProps,E),g.child;case 8:return Wr(d,g,g.pendingProps.children,E),g.child;case 12:return Wr(d,g,g.pendingProps.children,E),g.child;case 10:return D=g.pendingProps,he(g,g.type,D.value),Wr(d,g,D.children,E),g.child;case 9:return k=g.type._context,D=g.pendingProps.children,Je(g),k=te(k),D=D(k),g.flags|=1,Wr(d,g,D,E),g.child;case 14:return Q_(d,g,g.type,g.pendingProps,E);case 15:return J_(d,g,g.type,g.pendingProps,E);case 19:return cv(d,g,E);case 31:return tx(d,g,E);case 22:return ex(d,g,E,g.pendingProps);case 24:return Je(g),D=te(Oi),d===null?(k=st(),k===null&&(k=yn,H=Ne(),k.pooledCache=H,H.refCount++,H!==null&&(k.pooledCacheLanes|=E),k=H),g.memoizedState={parent:D,cache:k},Hi(g),he(g,Oi,k)):((d.lanes&E)!==0&&(Ps(d,g),ce(g,null,null,E),io()),k=d.memoizedState,H=g.memoizedState,k.parent!==D?(k={parent:D,cache:D},g.memoizedState=k,g.lanes===0&&(g.memoizedState=g.updateQueue.baseState=k),he(g,Oi,D)):(D=H.cache,he(g,Oi,D),D!==k.cache&&Le(g,[Oi],E,!0))),Wr(d,g,g.pendingProps.children,E),g.child;case 29:throw g.pendingProps}throw Error(r(156,g.tag))}function ko(d){d.flags|=4}function Ed(d){fo&&(d.flags|=8)}function rx(d,g){if(d!==null&&d.child===g.child)return!1;if((g.flags&16)!==0)return!0;for(d=g.child;d!==null;){if((d.flags&8218)!==0||(d.subtreeFlags&8218)!==0)return!0;d=d.sibling}return!1}function hv(d,g,E,D){if(On)for(E=g.child;E!==null;){if(E.tag===5||E.tag===6)zd(d,E.stateNode);else if(!(E.tag===4||Sr&&E.tag===27)&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===g)break;for(;E.sibling===null;){if(E.return===null||E.return===g)return;E=E.return}E.sibling.return=E.return,E=E.sibling}else if(fo)for(var k=g.child;k!==null;){if(k.tag===5){var H=k.stateNode;E&&D&&(H=Lx(H,k.type,k.memoizedProps)),zd(d,H)}else if(k.tag===6)H=k.stateNode,E&&D&&(H=Gv(H,k.memoizedProps)),zd(d,H);else if(k.tag!==4){if(k.tag===22&&k.memoizedState!==null)H=k.child,H!==null&&(H.return=k),hv(d,k,!0,!0);else if(k.child!==null){k.child.return=k,k=k.child;continue}}if(k===g)break;for(;k.sibling===null;){if(k.return===null||k.return===g)return;k=k.return}k.sibling.return=k.return,k=k.sibling}}function sx(d,g,E,D){var k=!1;if(fo)for(var H=g.child;H!==null;){if(H.tag===5){var ie=H.stateNode;E&&D&&(ie=Lx(ie,H.type,H.memoizedProps)),Bv(d,ie)}else if(H.tag===6)ie=H.stateNode,E&&D&&(ie=Gv(ie,H.memoizedProps)),Bv(d,ie);else if(H.tag!==4){if(H.tag===22&&H.memoizedState!==null)k=H.child,k!==null&&(k.return=H),sx(d,H,!0,!0),k=!0;else if(H.child!==null){H.child.return=H,H=H.child;continue}}if(H===g)break;for(;H.sibling===null;){if(H.return===null||H.return===g)return k;H=H.return}H.sibling.return=H.return,H=H.sibling}return k}function ox(d,g){if(fo&&rx(d,g)){d=g.stateNode;var E=d.containerInfo,D=Fv();sx(D,g,!1,!1),d.pendingChildren=D,ko(g),Ox(E,D)}}function dv(d,g,E,D){if(On)d.memoizedProps!==D&&ko(g);else if(fo){var k=d.stateNode,H=d.memoizedProps;if((d=rx(d,g))||H!==D){var ie=Or.current;H=Dx(k,E,H,D,!d,null),H===k?g.stateNode=k:(Ed(g),Fs(H,E,D,ie)&&ko(g),g.stateNode=H,d&&hv(H,g,!1,!1))}else g.stateNode=k}}function vs(d,g,E,D,k){if((d.mode&32)!==0&&(E===null?Fd(g,D):mh(g,E,D))){if(d.flags|=16777216,(k&335544128)===k||Cv(g,D))if(Ui(d.stateNode,g,D))d.flags|=8192;else if(Dn())d.flags|=8192;else throw Ss=el,tg}else d.flags&=-16777217}function Qf(d,g){if(ey(g)){if(d.flags|=16777216,!ty(g))if(Dn())d.flags|=8192;else throw Ss=el,tg}else d.flags&=-16777217}function Td(d,g){g!==null&&(d.flags|=4),d.flags&16384&&(g=d.tag!==22?M():536870912,d.lanes|=g,Eh|=g)}function Jf(d,g){if(!Cn)switch(d.tailMode){case"hidden":g=d.tail;for(var E=null;g!==null;)g.alternate!==null&&(E=g),g=g.sibling;E===null?d.tail=null:E.sibling=null;break;case"collapsed":E=d.tail;for(var D=null;E!==null;)E.alternate!==null&&(D=E),E=E.sibling;D===null?g||d.tail===null?d.tail=null:d.tail.sibling=null:D.sibling=null}}function vi(d){var g=d.alternate!==null&&d.alternate.child===d.child,E=0,D=0;if(g)for(var k=d.child;k!==null;)E|=k.lanes|k.childLanes,D|=k.subtreeFlags&65011712,D|=k.flags&65011712,k.return=d,k=k.sibling;else for(k=d.child;k!==null;)E|=k.lanes|k.childLanes,D|=k.subtreeFlags,D|=k.flags,k.return=d,k=k.sibling;return d.subtreeFlags|=D,d.childLanes=E,g}function ax(d,g,E){var D=g.pendingProps;switch(Q(g),g.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vi(g),null;case 1:return vi(g),null;case 3:return E=g.stateNode,D=null,d!==null&&(D=d.memoizedState.cache),g.memoizedState.cache!==D&&(g.flags|=2048),Ce(Oi),le(),E.pendingContext&&(E.context=E.pendingContext,E.pendingContext=null),(d===null||d.child===null)&&(ge(g)?ko(g):d===null||d.memoizedState.isDehydrated&&(g.flags&256)===0||(g.flags|=1024,me())),ox(d,g),vi(g),null;case 26:if(Wo){var k=g.type,H=g.memoizedState;return d===null?(ko(g),H!==null?(vi(g),Qf(g,H)):(vi(g),vs(g,k,null,D,E))):H?H!==d.memoizedState?(ko(g),vi(g),Qf(g,H)):(vi(g),g.flags&=-16777217):(H=d.memoizedProps,On?H!==D&&ko(g):dv(d,g,k,D),vi(g),vs(g,k,H,D,E)),null}case 27:if(Sr){if(pe(g),E=qr.current,k=g.type,d!==null&&g.stateNode!=null)On?d.memoizedProps!==D&&ko(g):dv(d,g,k,D);else{if(!D){if(g.stateNode===null)throw Error(r(166));return vi(g),null}d=Or.current,ge(g)?Te(g,d):(d=jm(k,D,E,d,!0),g.stateNode=d,ko(g))}return vi(g),null}case 5:if(pe(g),k=g.type,d!==null&&g.stateNode!=null)dv(d,g,k,D);else{if(!D){if(g.stateNode===null)throw Error(r(166));return vi(g),null}if(H=Or.current,ge(g))Te(g,H),Yx(g.stateNode,k,D,H)&&(g.flags|=64);else{var ie=Mv(k,D,qr.current,H,g);Ed(g),hv(ie,g,!1,!1),g.stateNode=ie,Fs(ie,k,D,H)&&ko(g)}}return vi(g),vs(g,g.type,d===null?null:d.memoizedProps,g.pendingProps,E),null;case 6:if(d&&g.stateNode!=null)E=d.memoizedProps,On?E!==D&&ko(g):fo&&(E!==D?(d=qr.current,E=Or.current,Ed(g),g.stateNode=Nl(D,d,E,g)):g.stateNode=d.stateNode);else{if(typeof D!="string"&&g.stateNode===null)throw Error(r(166));if(d=qr.current,E=Or.current,ge(g)){if(!Ri)throw Error(r(176));if(d=g.stateNode,E=g.memoizedProps,D=null,k=wr,k!==null)switch(k.tag){case 27:case 5:D=k.memoizedProps}cM(d,E,g,D)||Ee(g,!0)}else Ed(g),g.stateNode=Nl(D,d,E,g)}return vi(g),null;case 31:if(E=g.memoizedState,d===null||d.memoizedState!==null){if(D=ge(g),E!==null){if(d===null){if(!D)throw Error(r(318));if(!Ri)throw Error(r(556));if(d=g.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(r(557));Xv(d,g)}else oe(),(g.flags&128)===0&&(g.memoizedState=null),g.flags|=4;vi(g),d=!1}else E=me(),d!==null&&d.memoizedState!==null&&(d.memoizedState.hydrationErrors=E),d=!0;if(!d)return g.flags&256?(Pt(g),g):(Pt(g),null);if((g.flags&128)!==0)throw Error(r(558))}return vi(g),null;case 13:if(D=g.memoizedState,d===null||d.memoizedState!==null&&d.memoizedState.dehydrated!==null){if(k=ge(g),D!==null&&D.dehydrated!==null){if(d===null){if(!k)throw Error(r(318));if(!Ri)throw Error(r(344));if(k=g.memoizedState,k=k!==null?k.dehydrated:null,!k)throw Error(r(317));jx(k,g)}else oe(),(g.flags&128)===0&&(g.memoizedState=null),g.flags|=4;vi(g),k=!1}else k=me(),d!==null&&d.memoizedState!==null&&(d.memoizedState.hydrationErrors=k),k=!0;if(!k)return g.flags&256?(Pt(g),g):(Pt(g),null)}return Pt(g),(g.flags&128)!==0?(g.lanes=E,g):(E=D!==null,d=d!==null&&d.memoizedState!==null,E&&(D=g.child,k=null,D.alternate!==null&&D.alternate.memoizedState!==null&&D.alternate.memoizedState.cachePool!==null&&(k=D.alternate.memoizedState.cachePool.pool),H=null,D.memoizedState!==null&&D.memoizedState.cachePool!==null&&(H=D.memoizedState.cachePool.pool),H!==k&&(D.flags|=2048)),E!==d&&E&&(g.child.flags|=8192),Td(g,g.updateQueue),vi(g),null);case 4:return le(),ox(d,g),d===null&&li(g.stateNode.containerInfo),vi(g),null;case 10:return Ce(g.type),vi(g),null;case 19:if(y(Xi),D=g.memoizedState,D===null)return vi(g),null;if(k=(g.flags&128)!==0,H=D.rendering,H===null)if(k)Jf(D,!1);else{if(Fi!==0||d!==null&&(d.flags&128)!==0)for(d=g.child;d!==null;){if(H=Nt(d),H!==null){for(g.flags|=128,Jf(D,!1),d=H.updateQueue,g.updateQueue=d,Td(g,d),g.subtreeFlags=0,d=E,E=g.child;E!==null;)Am(E,d),E=E.sibling;return b(Xi,Xi.current&1|2),Cn&&ee(g,D.treeForkCount),g.child}d=d.sibling}D.tail!==null&&cs()>Wc&&(g.flags|=128,k=!0,Jf(D,!1),g.lanes=4194304)}else{if(!k)if(d=Nt(H),d!==null){if(g.flags|=128,k=!0,d=d.updateQueue,g.updateQueue=d,Td(g,d),Jf(D,!0),D.tail===null&&D.tailMode==="hidden"&&!H.alternate&&!Cn)return vi(g),null}else 2*cs()-D.renderingStartTime>Wc&&E!==536870912&&(g.flags|=128,k=!0,Jf(D,!1),g.lanes=4194304);D.isBackwards?(H.sibling=g.child,g.child=H):(d=D.last,d!==null?d.sibling=H:g.child=H,D.last=H)}return D.tail!==null?(d=D.tail,D.rendering=d,D.tail=d.sibling,D.renderingStartTime=cs(),d.sibling=null,E=Xi.current,b(Xi,k?E&1|2:E&1),Cn&&ee(g,D.treeForkCount),d):(vi(g),null);case 22:case 23:return Pt(g),it(),D=g.memoizedState!==null,d!==null?d.memoizedState!==null!==D&&(g.flags|=8192):D&&(g.flags|=8192),D?(E&536870912)!==0&&(g.flags&128)===0&&(vi(g),g.subtreeFlags&6&&(g.flags|=8192)):vi(g),E=g.updateQueue,E!==null&&Td(g,E.retryQueue),E=null,d!==null&&d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(E=d.memoizedState.cachePool.pool),D=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(D=g.memoizedState.cachePool.pool),D!==E&&(g.flags|=2048),d!==null&&y(kc),null;case 24:return E=null,d!==null&&(E=d.memoizedState.cache),g.memoizedState.cache!==E&&(g.flags|=2048),Ce(Oi),vi(g),null;case 25:return null;case 30:return null}throw Error(r(156,g.tag))}function pv(d,g){switch(Q(g),g.tag){case 1:return d=g.flags,d&65536?(g.flags=d&-65537|128,g):null;case 3:return Ce(Oi),le(),d=g.flags,(d&65536)!==0&&(d&128)===0?(g.flags=d&-65537|128,g):null;case 26:case 27:case 5:return pe(g),null;case 31:if(g.memoizedState!==null){if(Pt(g),g.alternate===null)throw Error(r(340));oe()}return d=g.flags,d&65536?(g.flags=d&-65537|128,g):null;case 13:if(Pt(g),d=g.memoizedState,d!==null&&d.dehydrated!==null){if(g.alternate===null)throw Error(r(340));oe()}return d=g.flags,d&65536?(g.flags=d&-65537|128,g):null;case 19:return y(Xi),null;case 4:return le(),null;case 10:return Ce(g.type),null;case 22:case 23:return Pt(g),it(),d!==null&&y(kc),d=g.flags,d&65536?(g.flags=d&-65537|128,g):null;case 24:return Ce(Oi),null;case 25:return null;default:return null}}function lx(d,g){switch(Q(g),g.tag){case 3:Ce(Oi),le();break;case 26:case 27:case 5:pe(g);break;case 4:le();break;case 31:g.memoizedState!==null&&Pt(g);break;case 13:Pt(g);break;case 19:y(Xi);break;case 10:Ce(g.type);break;case 22:case 23:Pt(g),it(),d!==null&&y(kc);break;case 24:Ce(Oi)}}function Fa(d,g){try{var E=g.updateQueue,D=E!==null?E.lastEffect:null;if(D!==null){var k=D.next;E=k;do{if((E.tag&d)===d){D=void 0;var H=E.create,ie=E.inst;D=H(),ie.destroy=D}E=E.next}while(E!==k)}}catch(we){Zt(g,g.return,we)}}function Ba(d,g,E){try{var D=g.updateQueue,k=D!==null?D.lastEffect:null;if(k!==null){var H=k.next;D=H;do{if((D.tag&d)===d){var ie=D.inst,we=ie.destroy;if(we!==void 0){ie.destroy=void 0,k=g;var Ye=E,lt=we;try{lt()}catch(yt){Zt(k,Ye,yt)}}}D=D.next}while(D!==H)}}catch(yt){Zt(g,g.return,yt)}}function eh(d){var g=d.updateQueue;if(g!==null){var E=d.stateNode;try{Ve(g,E)}catch(D){Zt(d,d.return,D)}}}function gm(d,g,E){E.props=Au(d.type,d.memoizedProps),E.state=d.memoizedState;try{E.componentWillUnmount()}catch(D){Zt(d,g,D)}}function th(d,g){try{var E=d.ref;if(E!==null){switch(d.tag){case 26:case 27:case 5:var D=hh(d.stateNode);break;case 30:D=d.stateNode;break;default:D=d.stateNode}typeof E=="function"?d.refCleanup=E(D):E.current=D}}catch(k){Zt(d,g,k)}}function ls(d,g){var E=d.ref,D=d.refCleanup;if(E!==null)if(typeof D=="function")try{D()}catch(k){Zt(d,g,k)}finally{d.refCleanup=null,d=d.alternate,d!=null&&(d.refCleanup=null)}else if(typeof E=="function")try{E(null)}catch(k){Zt(d,g,k)}else E.current=null}function Ou(d){var g=d.type,E=d.memoizedProps,D=d.stateNode;try{Sx(D,g,E,d)}catch(k){Zt(d,d.return,k)}}function Md(d,g,E){try{wx(d.stateNode,d.type,E,g,d)}catch(D){Zt(d,d.return,D)}}function mv(d){return d.tag===5||d.tag===3||(Wo?d.tag===26:!1)||(Sr?d.tag===27&&Gu(d.type):!1)||d.tag===4}function Al(d){e:for(;;){for(;d.sibling===null;){if(d.return===null||mv(d.return))return null;d=d.return}for(d.sibling.return=d.return,d=d.sibling;d.tag!==5&&d.tag!==6&&d.tag!==18;){if(Sr&&d.tag===27&&Gu(d.type)||d.flags&2||d.child===null||d.tag===4)continue e;d.child.return=d,d=d.child}if(!(d.flags&2))return d.stateNode}}function vm(d,g,E){var D=d.tag;if(D===5||D===6)d=d.stateNode,g?Tx(E,d,g):Nv(E,d);else if(D!==4&&(Sr&&D===27&&Gu(d.type)&&(E=d.stateNode,g=null),d=d.child,d!==null))for(vm(d,g,E),d=d.sibling;d!==null;)vm(d,g,E),d=d.sibling}function Ad(d,g,E){var D=d.tag;if(D===5||D===6)d=d.stateNode,g?Ex(E,d,g):Iv(E,d);else if(D!==4&&(Sr&&D===27&&Gu(d.type)&&(E=d.stateNode),d=d.child,d!==null))for(Ad(d,g,E),d=d.sibling;d!==null;)Ad(d,g,E),d=d.sibling}function gv(d,g,E){d=d.containerInfo;try{Vv(d,E)}catch(D){Zt(g,g.return,D)}}function cx(d){var g=d.stateNode,E=d.memoizedProps;try{dr(d.type,E,g,d)}catch(D){Zt(d,d.return,D)}}function sM(d,g){for(Pm(d.containerInfo),er=g;er!==null;)if(d=er,g=d.child,(d.subtreeFlags&1028)!==0&&g!==null)g.return=d,er=g;else for(;er!==null;){d=er;var E=d.alternate;switch(g=d.flags,d.tag){case 0:if((g&4)!==0&&(g=d.updateQueue,g=g!==null?g.events:null,g!==null))for(var D=0;D<g.length;D++){var k=g[D];k.ref.impl=k.nextImpl}break;case 11:case 15:break;case 1:if((g&1024)!==0&&E!==null){g=void 0,D=d,k=E.memoizedProps,E=E.memoizedState;var H=D.stateNode;try{var ie=Au(D.type,k);g=H.getSnapshotBeforeUpdate(ie,E),H.__reactInternalSnapshotBeforeUpdate=g}catch(we){Zt(D,D.return,we)}}break;case 3:(g&1024)!==0&&On&&zv(d.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((g&1024)!==0)throw Error(r(163))}if(g=d.sibling,g!==null){g.return=d.return,er=g;break}er=d.return}}function ux(d,g,E){var D=E.flags;switch(E.tag){case 0:case 11:case 15:ys(d,E),D&4&&Fa(5,E);break;case 1:if(ys(d,E),D&4)if(d=E.stateNode,g===null)try{d.componentDidMount()}catch(ie){Zt(E,E.return,ie)}else{var k=Au(E.type,g.memoizedProps);g=g.memoizedState;try{d.componentDidUpdate(k,g,d.__reactInternalSnapshotBeforeUpdate)}catch(ie){Zt(E,E.return,ie)}}D&64&&eh(E),D&512&&th(E,E.return);break;case 3:if(ys(d,E),D&64&&(D=E.updateQueue,D!==null)){if(d=null,E.child!==null)switch(E.child.tag){case 27:case 5:d=hh(E.child.stateNode);break;case 1:d=E.child.stateNode}try{Ve(D,d)}catch(ie){Zt(E,E.return,ie)}}break;case 27:Sr&&g===null&&D&4&&cx(E);case 26:case 5:if(ys(d,E),g===null){if(D&4)Ou(E);else if(D&64){d=E.type,g=E.memoizedProps,k=E.stateNode;try{Xx(k,d,g,E)}catch(ie){Zt(E,E.return,ie)}}}D&512&&th(E,E.return);break;case 12:ys(d,E);break;case 31:ys(d,E),D&4&&Fo(d,E);break;case 13:ys(d,E),D&4&&Rd(d,E),D&64&&(D=E.memoizedState,D!==null&&(D=D.dehydrated,D!==null&&(E=oM.bind(null,E),Bm(D,E))));break;case 22:if(D=E.memoizedState!==null||qi,!D){g=g!==null&&g.memoizedState!==null||Yi,k=qi;var H=Yi;qi=D,(Yi=g)&&!H?Vo(d,E,(E.subtreeFlags&8772)!==0):ys(d,E),qi=k,Yi=H}break;case 30:break;default:ys(d,E)}}function vv(d){var g=d.alternate;g!==null&&(d.alternate=null,vv(g)),d.child=null,d.deletions=null,d.sibling=null,d.tag===5&&(g=d.stateNode,g!==null&&Im(g)),d.stateNode=null,d.return=null,d.dependencies=null,d.memoizedProps=null,d.memoizedState=null,d.pendingProps=null,d.stateNode=null,d.updateQueue=null}function zo(d,g,E){for(E=E.child;E!==null;)Cd(d,g,E),E=E.sibling}function Cd(d,g,E){if(Gs&&typeof Gs.onCommitFiberUnmount=="function")try{Gs.onCommitFiberUnmount(Wu,E)}catch{}switch(E.tag){case 26:if(Wo){Yi||ls(E,g),zo(d,g,E),E.memoizedState?Nc(E.memoizedState):E.stateNode&&Jv(E.stateNode);break}case 27:if(Sr){Yi||ls(E,g);var D=zi,k=tr;Gu(E.type)&&(zi=E.stateNode,tr=!1),zo(d,g,E),Dr(E.stateNode),zi=D,tr=k;break}case 5:Yi||ls(E,g);case 6:if(On){if(D=zi,k=tr,zi=null,zo(d,g,E),zi=D,tr=k,zi!==null)if(tr)try{Uv(zi,E.stateNode)}catch(H){Zt(E,g,H)}else try{Mx(zi,E.stateNode)}catch(H){Zt(E,g,H)}}else zo(d,g,E);break;case 18:On&&zi!==null&&(tr?Vm(zi,E.stateNode):Yv(zi,E.stateNode));break;case 4:On?(D=zi,k=tr,zi=E.stateNode.containerInfo,tr=!0,zo(d,g,E),zi=D,tr=k):(fo&&gv(E.stateNode,E,Fv()),zo(d,g,E));break;case 0:case 11:case 14:case 15:Ba(2,E,g),Yi||Ba(4,E,g),zo(d,g,E);break;case 1:Yi||(ls(E,g),D=E.stateNode,typeof D.componentWillUnmount=="function"&&gm(E,g,D)),zo(d,g,E);break;case 21:zo(d,g,E);break;case 22:Yi=(D=Yi)||E.memoizedState!==null,zo(d,g,E),Yi=D;break;default:zo(d,g,E)}}function Fo(d,g){if(Ri&&g.memoizedState===null&&(d=g.alternate,d!==null&&(d=d.memoizedState,d!==null))){d=d.dehydrated;try{uM(d)}catch(E){Zt(g,g.return,E)}}}function Rd(d,g){if(Ri&&g.memoizedState===null&&(d=g.alternate,d!==null&&(d=d.memoizedState,d!==null&&(d=d.dehydrated,d!==null))))try{fM(d)}catch(E){Zt(g,g.return,E)}}function Bo(d){switch(d.tag){case 31:case 13:case 19:var g=d.stateNode;return g===null&&(g=d.stateNode=new cy),g;case 22:return d=d.stateNode,g=d._retryCache,g===null&&(g=d._retryCache=new cy),g;default:throw Error(r(435,d.tag))}}function Cl(d,g){var E=Bo(d);g.forEach(function(D){if(!E.has(D)){E.add(D);var k=aM.bind(null,d,D);D.then(k,k)}})}function Cr(d,g){var E=g.deletions;if(E!==null)for(var D=0;D<E.length;D++){var k=E[D],H=d,ie=g;if(On){var we=ie;e:for(;we!==null;){switch(we.tag){case 27:if(Sr){if(Gu(we.type)){zi=we.stateNode,tr=!1;break e}break}case 5:zi=we.stateNode,tr=!1;break e;case 3:case 4:zi=we.stateNode.containerInfo,tr=!0;break e}we=we.return}if(zi===null)throw Error(r(160));Cd(H,ie,k),zi=null,tr=!1}else Cd(H,ie,k);H=k.alternate,H!==null&&(H.return=null),k.return=null}if(g.subtreeFlags&13886)for(g=g.child;g!==null;)Dd(g,d),g=g.sibling}function Dd(d,g){var E=d.alternate,D=d.flags;switch(d.tag){case 0:case 11:case 14:case 15:Cr(g,d),Rr(d),D&4&&(Ba(3,d,d.return),Fa(3,d),Ba(5,d,d.return));break;case 1:Cr(g,d),Rr(d),D&512&&(Yi||E===null||ls(E,E.return)),D&64&&qi&&(d=d.updateQueue,d!==null&&(D=d.callbacks,D!==null&&(E=d.shared.hiddenCallbacks,d.shared.hiddenCallbacks=E===null?D:E.concat(D))));break;case 26:if(Wo){var k=si;if(Cr(g,d),Rr(d),D&512&&(Yi||E===null||ls(E,E.return)),D&4){D=E!==null?E.memoizedState:null;var H=d.memoizedState;E===null?H===null?d.stateNode===null?d.stateNode=Qx(k,d.type,d.memoizedProps,d):Qv(k,d.type,d.stateNode):d.stateNode=Kv(k,H,d.memoizedProps):D!==H?(D===null?E.stateNode!==null&&Jv(E.stateNode):Nc(D),H===null?Qv(k,d.type,d.stateNode):Kv(k,H,d.memoizedProps)):H===null&&d.stateNode!==null&&Md(d,d.memoizedProps,E.memoizedProps)}break}case 27:if(Sr){Cr(g,d),Rr(d),D&512&&(Yi||E===null||ls(E,E.return)),E!==null&&D&4&&Md(d,d.memoizedProps,E.memoizedProps);break}case 5:if(Cr(g,d),Rr(d),D&512&&(Yi||E===null||ls(E,E.return)),On){if(d.flags&32){k=d.stateNode;try{kv(k)}catch(ht){Zt(d,d.return,ht)}}D&4&&d.stateNode!=null&&(k=d.memoizedProps,Md(d,k,E!==null?E.memoizedProps:k)),D&1024&&(bh=!0)}else fo&&d.alternate!==null&&(d.alternate.stateNode=d.stateNode);break;case 6:if(Cr(g,d),Rr(d),D&4&&On){if(d.stateNode===null)throw Error(r(162));D=d.memoizedProps,E=E!==null?E.memoizedProps:D,k=d.stateNode;try{xx(k,E,D)}catch(ht){Zt(d,d.return,ht)}}break;case 3:if(Wo?(Jx(),k=si,si=Gd(g.containerInfo),Cr(g,d),si=k):Cr(g,d),Rr(d),D&4){if(On&&Ri&&E!==null&&E.memoizedState.isDehydrated)try{qx(g.containerInfo)}catch(ht){Zt(d,d.return,ht)}if(fo){D=g.containerInfo,E=g.pendingChildren;try{Vv(D,E)}catch(ht){Zt(d,d.return,ht)}}}bh&&(bh=!1,ym(d));break;case 4:Wo?(E=si,si=Gd(d.stateNode.containerInfo),Cr(g,d),Rr(d),si=E):(Cr(g,d),Rr(d)),D&4&&fo&&gv(d.stateNode,d,d.stateNode.pendingChildren);break;case 12:Cr(g,d),Rr(d);break;case 31:Cr(g,d),Rr(d),D&4&&(D=d.updateQueue,D!==null&&(d.updateQueue=null,Cl(d,D)));break;case 13:Cr(g,d),Rr(d),d.child.flags&8192&&d.memoizedState!==null!=(E!==null&&E.memoizedState!==null)&&(Qd=cs()),D&4&&(D=d.updateQueue,D!==null&&(d.updateQueue=null,Cl(d,D)));break;case 22:k=d.memoizedState!==null;var ie=E!==null&&E.memoizedState!==null,we=qi,Ye=Yi;if(qi=we||k,Yi=Ye||ie,Cr(g,d),Yi=Ye,qi=we,Rr(d),D&8192&&(g=d.stateNode,g._visibility=k?g._visibility&-2:g._visibility|1,k&&(E===null||ie||qi||Yi||Sc(d)),On)){e:if(E=null,On)for(g=d;;){if(g.tag===5||Wo&&g.tag===26){if(E===null){ie=E=g;try{H=ie.stateNode,k?lM(H):Cx(ie.stateNode,ie.memoizedProps)}catch(ht){Zt(ie,ie.return,ht)}}}else if(g.tag===6){if(E===null){ie=g;try{var lt=ie.stateNode;k?Ax(lt):Rx(lt,ie.memoizedProps)}catch(ht){Zt(ie,ie.return,ht)}}}else if(g.tag===18){if(E===null){ie=g;try{var yt=ie.stateNode;k?$x(yt):Zx(ie.stateNode)}catch(ht){Zt(ie,ie.return,ht)}}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===d)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===d)break e;for(;g.sibling===null;){if(g.return===null||g.return===d)break e;E===g&&(E=null),g=g.return}E===g&&(E=null),g.sibling.return=g.return,g=g.sibling}}D&4&&(D=d.updateQueue,D!==null&&(E=D.retryQueue,E!==null&&(D.retryQueue=null,Cl(d,E))));break;case 19:Cr(g,d),Rr(d),D&4&&(D=d.updateQueue,D!==null&&(d.updateQueue=null,Cl(d,D)));break;case 30:break;case 21:break;default:Cr(g,d),Rr(d)}}function Rr(d){var g=d.flags;if(g&2){try{for(var E,D=d.return;D!==null;){if(mv(D)){E=D;break}D=D.return}if(On){if(E==null)throw Error(r(160));switch(E.tag){case 27:if(Sr){var k=E.stateNode,H=Al(d);Ad(d,H,k);break}case 5:var ie=E.stateNode;E.flags&32&&(kv(ie),E.flags&=-33);var we=Al(d);Ad(d,we,ie);break;case 3:case 4:var Ye=E.stateNode.containerInfo,lt=Al(d);vm(d,lt,Ye);break;default:throw Error(r(161))}}}catch(yt){Zt(d,d.return,yt)}d.flags&=-3}g&4096&&(d.flags&=-4097)}function ym(d){if(d.subtreeFlags&1024)for(d=d.child;d!==null;){var g=d;ym(g),g.tag===5&&g.flags&1024&&Dv(g.stateNode),d=d.sibling}}function ys(d,g){if(g.subtreeFlags&8772)for(g=g.child;g!==null;)ux(d,g.alternate,g),g=g.sibling}function Sc(d){for(d=d.child;d!==null;){var g=d;switch(g.tag){case 0:case 11:case 14:case 15:Ba(4,g,g.return),Sc(g);break;case 1:ls(g,g.return);var E=g.stateNode;typeof E.componentWillUnmount=="function"&&gm(g,g.return,E),Sc(g);break;case 27:Sr&&Dr(g.stateNode);case 26:case 5:ls(g,g.return),Sc(g);break;case 22:g.memoizedState===null&&Sc(g);break;case 30:Sc(g);break;default:Sc(g)}d=d.sibling}}function Vo(d,g,E){for(E=E&&(g.subtreeFlags&8772)!==0,g=g.child;g!==null;){var D=g.alternate,k=d,H=g,ie=H.flags;switch(H.tag){case 0:case 11:case 15:Vo(k,H,E),Fa(4,H);break;case 1:if(Vo(k,H,E),D=H,k=D.stateNode,typeof k.componentDidMount=="function")try{k.componentDidMount()}catch(lt){Zt(D,D.return,lt)}if(D=H,k=D.updateQueue,k!==null){var we=D.stateNode;try{var Ye=k.shared.hiddenCallbacks;if(Ye!==null)for(k.shared.hiddenCallbacks=null,k=0;k<Ye.length;k++)De(Ye[k],we)}catch(lt){Zt(D,D.return,lt)}}E&&ie&64&&eh(H),th(H,H.return);break;case 27:Sr&&cx(H);case 26:case 5:Vo(k,H,E),E&&D===null&&ie&4&&Ou(H),th(H,H.return);break;case 12:Vo(k,H,E);break;case 31:Vo(k,H,E),E&&ie&4&&Fo(k,H);break;case 13:Vo(k,H,E),E&&ie&4&&Rd(k,H);break;case 22:H.memoizedState===null&&Vo(k,H,E),th(H,H.return);break;case 30:break;default:Vo(k,H,E)}g=g.sibling}}function wc(d,g){var E=null;d!==null&&d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(E=d.memoizedState.cachePool.pool),d=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(d=g.memoizedState.cachePool.pool),d!==E&&(d!=null&&d.refCount++,E!=null&&Oe(E))}function yv(d,g){d=null,g.alternate!==null&&(d=g.alternate.memoizedState.cache),g=g.memoizedState.cache,g!==d&&(g.refCount++,d!=null&&Oe(d))}function Ii(d,g,E,D){if(g.subtreeFlags&10256)for(g=g.child;g!==null;)bm(d,g,E,D),g=g.sibling}function bm(d,g,E,D){var k=g.flags;switch(g.tag){case 0:case 11:case 15:Ii(d,g,E,D),k&2048&&Fa(9,g);break;case 1:Ii(d,g,E,D);break;case 3:Ii(d,g,E,D),k&2048&&(d=null,g.alternate!==null&&(d=g.alternate.memoizedState.cache),g=g.memoizedState.cache,g!==d&&(g.refCount++,d!=null&&Oe(d)));break;case 12:if(k&2048){Ii(d,g,E,D),d=g.stateNode;try{var H=g.memoizedProps,ie=H.id,we=H.onPostCommit;typeof we=="function"&&we(ie,g.alternate===null?"mount":"update",d.passiveEffectDuration,-0)}catch(Ye){Zt(g,g.return,Ye)}}else Ii(d,g,E,D);break;case 31:Ii(d,g,E,D);break;case 13:Ii(d,g,E,D);break;case 23:break;case 22:H=g.stateNode,ie=g.alternate,g.memoizedState!==null?H._visibility&2?Ii(d,g,E,D):nh(d,g):H._visibility&2?Ii(d,g,E,D):(H._visibility|=2,Us(d,g,E,D,(g.subtreeFlags&10256)!==0||!1)),k&2048&&wc(ie,g);break;case 24:Ii(d,g,E,D),k&2048&&yv(g.alternate,g);break;default:Ii(d,g,E,D)}}function Us(d,g,E,D,k){for(k=k&&((g.subtreeFlags&10256)!==0||!1),g=g.child;g!==null;){var H=d,ie=g,we=E,Ye=D,lt=ie.flags;switch(ie.tag){case 0:case 11:case 15:Us(H,ie,we,Ye,k),Fa(8,ie);break;case 23:break;case 22:var yt=ie.stateNode;ie.memoizedState!==null?yt._visibility&2?Us(H,ie,we,Ye,k):nh(H,ie):(yt._visibility|=2,Us(H,ie,we,Ye,k)),k&&lt&2048&&wc(ie.alternate,ie);break;case 24:Us(H,ie,we,Ye,k),k&&lt&2048&&yv(ie.alternate,ie);break;default:Us(H,ie,we,Ye,k)}g=g.sibling}}function nh(d,g){if(g.subtreeFlags&10256)for(g=g.child;g!==null;){var E=d,D=g,k=D.flags;switch(D.tag){case 22:nh(E,D),k&2048&&wc(D.alternate,D);break;case 24:nh(E,D),k&2048&&yv(D.alternate,D);break;default:nh(E,D)}g=g.sibling}}function Va(d,g,E){if(d.subtreeFlags&go)for(d=d.child;d!==null;)Ec(d,g,E),d=d.sibling}function Ec(d,g,E){switch(d.tag){case 26:if(Va(d,g,E),d.flags&go)if(d.memoizedState!==null)e1(E,si,d.memoizedState,d.memoizedProps);else{var D=d.stateNode,k=d.type;d=d.memoizedProps,((g&335544128)===g||Cv(k,d))&&Nm(E,D,k,d)}break;case 5:Va(d,g,E),d.flags&go&&(D=d.stateNode,k=d.type,d=d.memoizedProps,((g&335544128)===g||Cv(k,d))&&Nm(E,D,k,d));break;case 3:case 4:Wo?(D=si,si=Gd(d.stateNode.containerInfo),Va(d,g,E),si=D):Va(d,g,E);break;case 22:d.memoizedState===null&&(D=d.alternate,D!==null&&D.memoizedState!==null?(D=go,go=16777216,Va(d,g,E),go=D):Va(d,g,E));break;default:Va(d,g,E)}}function _m(d){var g=d.alternate;if(g!==null&&(d=g.child,d!==null)){g.child=null;do g=d.sibling,d.sibling=null,d=g;while(d!==null)}}function ih(d){var g=d.deletions;if((d.flags&16)!==0){if(g!==null)for(var E=0;E<g.length;E++){var D=g[E];er=D,lo(D,d)}_m(d)}if(d.subtreeFlags&10256)for(d=d.child;d!==null;)xm(d),d=d.sibling}function xm(d){switch(d.tag){case 0:case 11:case 15:ih(d),d.flags&2048&&Ba(9,d,d.return);break;case 3:ih(d);break;case 12:ih(d);break;case 22:var g=d.stateNode;d.memoizedState!==null&&g._visibility&2&&(d.return===null||d.return.tag!==13)?(g._visibility&=-3,Od(d)):ih(d);break;default:ih(d)}}function Od(d){var g=d.deletions;if((d.flags&16)!==0){if(g!==null)for(var E=0;E<g.length;E++){var D=g[E];er=D,lo(D,d)}_m(d)}for(d=d.child;d!==null;){switch(g=d,g.tag){case 0:case 11:case 15:Ba(8,g,g.return),Od(g);break;case 22:E=g.stateNode,E._visibility&2&&(E._visibility&=-3,Od(g));break;default:Od(g)}d=d.sibling}}function lo(d,g){for(;er!==null;){var E=er;switch(E.tag){case 0:case 11:case 15:Ba(8,E,g);break;case 23:case 22:if(E.memoizedState!==null&&E.memoizedState.cachePool!==null){var D=E.memoizedState.cachePool.pool;D!=null&&D.refCount++}break;case 24:Oe(E.memoizedState.cache)}if(D=E.child,D!==null)D.return=E,er=D;else e:for(E=d;er!==null;){D=er;var k=D.sibling,H=D.return;if(vv(D),D===E){er=null;break e}if(k!==null){k.return=H,er=k;break e}er=H}}}function Tc(d){var g=on(d);if(g!=null){if(typeof g.memoizedProps["data-testname"]!="string")throw Error(r(364));return g}if(d=Qi(d),d===null)throw Error(r(362));return d.stateNode.current}function Mc(d,g){var E=d.tag;switch(g.$$typeof){case Jo:if(d.type===g.value)return!0;break;case xh:e:{for(g=g.value,d=[d,0],E=0;E<d.length;){var D=d[E++],k=D.tag,H=d[E++],ie=g[H];if(k!==5&&k!==26&&k!==27||!Pc(D)){for(;ie!=null&&Mc(D,ie);)H++,ie=g[H];if(H===g.length){g=!0;break e}else for(D=D.child;D!==null;)d.push(D,H),D=D.sibling}}g=!1}return g;case Sh:if((E===5||E===26||E===27)&&Pv(d.stateNode,g.value))return!0;break;case Vc:if((E===5||E===6||E===26||E===27)&&(d=Bd(d),d!==null&&0<=d.indexOf(g.value)))return!0;break;case Zd:if((E===5||E===26||E===27)&&(d=d.memoizedProps["data-testname"],typeof d=="string"&&d.toLowerCase()===g.value.toLowerCase()))return!0;break;default:throw Error(r(365))}return!1}function rh(d){switch(d.$$typeof){case Jo:return"<"+(p(d.value)||"Unknown")+">";case xh:return":has("+(rh(d)||"")+")";case Sh:return'[role="'+d.value+'"]';case Vc:return'"'+d.value+'"';case Zd:return'[data-testname="'+d.value+'"]';default:throw Error(r(365))}}function sh(d,g){var E=[];d=[d,0];for(var D=0;D<d.length;){var k=d[D++],H=k.tag,ie=d[D++],we=g[ie];if(H!==5&&H!==26&&H!==27||!Pc(k)){for(;we!=null&&Mc(k,we);)ie++,we=g[ie];if(ie===g.length)E.push(k);else for(k=k.child;k!==null;)d.push(k,ie),k=k.sibling}}return E}function ks(d,g){if(!xr)throw Error(r(363));d=Tc(d),d=sh(d,g),g=[],d=Array.from(d);for(var E=0;E<d.length;){var D=d[E++],k=D.tag;if(k===5||k===26||k===27)Pc(D)||g.push(D.stateNode);else for(D=D.child;D!==null;)d.push(D),D=D.sibling}return g}function Ci(){return(Tn&2)!==0&&Rn!==0?Rn&-Rn:Ht.T!==null?ut():ph()}function Rl(){if(Es===0)if((Rn&536870912)===0||Cn){var d=ju;ju<<=1,(ju&3932160)===0&&(ju=262144),Es=d}else Es=536870912;return d=Hs.current,d!==null&&(d.flags|=32),Es}function Ni(d,g,E){(d===yn&&(oi===2||oi===9)||d.cancelPendingCommit!==null)&&(Wi(d,0),Ha(d,Rn,Es,!1)),R(d,E),((Tn&2)===0||d!==yn)&&(d===yn&&((Tn&2)===0&&(jc|=E),Fi===4&&Ha(d,Rn,Es,!1)),et(d))}function ga(d,g,E){if((Tn&6)!==0)throw Error(r(327));var D=!E&&(g&127)===0&&(g&d.expiredLanes)===0||T(d,g),k=D?dx(d,g):ja(d,g,!0),H=D;do{if(k===0){Gc&&!D&&Ha(d,g,0,!1);break}else{if(E=d.current.alternate,H&&!fx(E)){k=ja(d,g,!1),H=!1;continue}if(k===2){if(H=g,d.errorRecoveryDisabledLanes&H)var ie=0;else ie=d.pendingLanes&-536870913,ie=ie!==0?ie:ie&536870912?536870912:0;if(ie!==0){g=ie;e:{var we=d;k=Kd;var Ye=Ri&&we.current.memoizedState.isDehydrated;if(Ye&&(Wi(we,ie).flags|=256),ie=ja(we,ie,!1),ie!==2){if(Hc&&!Ye){we.errorRecoveryDisabledLanes|=H,jc|=H,k=4;break e}H=Ws,Ws=k,H!==null&&(Ws===null?Ws=H:Ws.push.apply(Ws,H))}k=ie}if(H=!1,k!==2)continue}}if(k===1){Wi(d,0),Ha(d,g,0,!0);break}e:{switch(D=d,H=k,H){case 0:case 1:throw Error(r(345));case 4:if((g&4194048)!==g)break;case 6:Ha(D,g,Es,!_a);break e;case 2:Ws=null;break;case 3:case 5:break;default:throw Error(r(329))}if((g&62914560)===g&&(k=Qd+300-cs(),10<k)){if(Ha(D,g,Es,!_a),_(D,0,!0)!==0)break e;rl=g,D.timeoutHandle=Av(Ga.bind(null,D,E,Ws,Jd,ig,g,Es,jc,Eh,_a,H,"Throttled",-0,0),k);break e}Ga(D,E,Ws,Jd,ig,g,Es,jc,Eh,_a,H,null,-0,0)}}break}while(!0);et(d)}function Ga(d,g,E,D,k,H,ie,we,Ye,lt,yt,ht,Rt,tn){if(d.timeoutHandle=Bs,ht=g.subtreeFlags,ht&8192||(ht&16785408)===16785408){ht=Rv(),Ec(g,H,ht);var nr=(H&62914560)===H?Qd-cs():(H&4194048)===H?Ku-cs():0;if(nr=_x(ht,nr),nr!==null){rl=H,d.cancelPendingCommit=nr(Xa.bind(null,d,g,H,E,D,k,ie,we,Ye,yt,ht,null,Rt,tn)),Ha(d,H,ie,!lt);return}}Xa(d,g,H,E,D,k,ie,we,Ye)}function fx(d){for(var g=d;;){var E=g.tag;if((E===0||E===11||E===15)&&g.flags&16384&&(E=g.updateQueue,E!==null&&(E=E.stores,E!==null)))for(var D=0;D<E.length;D++){var k=E[D],H=k.getSnapshot;k=k.value;try{if(!Ji(H(),k))return!1}catch{return!1}}if(E=g.child,g.subtreeFlags&16384&&E!==null)E.return=g,g=E;else{if(g===d)break;for(;g.sibling===null;){if(g.return===null||g.return===d)return!0;g=g.return}g.sibling.return=g.return,g=g.sibling}}return!0}function Ha(d,g,E,D){g&=~wh,g&=~jc,d.suspendedLanes|=g,d.pingedLanes&=~g,D&&(d.warmLanes|=g),D=d.expirationTimes;for(var k=g;0<k;){var H=31-Vs(k),ie=1<<H;D[H]=-1,k&=~ie}E!==0&&I(d,E,g)}function Sm(){return(Tn&6)===0?(Ze(0),!1):!0}function wm(){if(Mn!==null){if(oi===0)var d=Mn.return;else d=Mn,ya=bi=null,gi(d),zc=null,Xu=0,d=Mn;for(;d!==null;)lx(d.alternate,d),d=d.return;Mn=null}}function Wi(d,g){var E=d.timeoutHandle;E!==Bs&&(d.timeoutHandle=Bs,bx(E)),E=d.cancelPendingCommit,E!==null&&(d.cancelPendingCommit=null,E()),rl=0,wm(),yn=d,Mn=E=uo(d.current,null),Rn=g,oi=0,pr=null,_a=!1,Gc=T(d,g),Hc=!1,Eh=Es=wh=jc=Vl=Fi=0,Ws=Kd=null,ig=!1,(g&8)!==0&&(g|=g&32);var D=d.entangledLanes;if(D!==0)for(d=d.entanglements,D&=g;0<D;){var k=31-Vs(D),H=1<<k;g|=d[k],D&=~H}return il=g,_r(),E}function yi(d,g){an=null,Ht.H=mo,g===Tr||g===Ko?(g=Ft(),oi=3):g===tg?(g=Ft(),oi=4):oi=g===ws?8:g!==null&&typeof g=="object"&&typeof g.then=="function"?6:1,pr=g,Mn===null&&(Fi=1,hm(d,J(g,d.current)))}function Dn(){var d=Hs.current;return d===null?!0:(Rn&4194048)===Rn?js===null:(Rn&62914560)===Rn||(Rn&536870912)!==0?d===js:!1}function Dl(){var d=Ht.H;return Ht.H=mo,d===null?mo:d}function co(){var d=Ht.A;return Ht.A=_h,d}function oh(){Fi=4,_a||(Rn&4194048)!==Rn&&Hs.current!==null||(Gc=!0),(Vl&134217727)===0&&(jc&134217727)===0||yn===null||Ha(yn,Rn,Es,!1)}function ja(d,g,E){var D=Tn;Tn|=2;var k=Dl(),H=co();(yn!==d||Rn!==g)&&(Jd=null,Wi(d,g)),g=!1;var ie=Fi;e:do try{if(oi!==0&&Mn!==null){var we=Mn,Ye=pr;switch(oi){case 8:wm(),ie=6;break e;case 3:case 2:case 9:case 6:Hs.current===null&&(g=!0);var lt=oi;if(oi=0,pr=null,Wa(d,we,Ye,lt),E&&Gc){ie=0;break e}break;default:lt=oi,oi=0,pr=null,Wa(d,we,Ye,lt)}}hx(),ie=Fi;break}catch(yt){yi(d,yt)}while(!0);return g&&d.shellSuspendCounter++,ya=bi=null,Tn=D,Ht.H=k,Ht.A=H,Mn===null&&(yn=null,Rn=0,_r()),ie}function hx(){for(;Mn!==null;)Ac(Mn)}function dx(d,g){var E=Tn;Tn|=2;var D=Dl(),k=co();yn!==d||Rn!==g?(Jd=null,Wc=cs()+500,Wi(d,g)):Gc=T(d,g);e:do try{if(oi!==0&&Mn!==null){g=Mn;var H=pr;t:switch(oi){case 1:oi=0,pr=null,Wa(d,g,H,1);break;case 2:case 9:if(gt(H)){oi=0,pr=null,Em(g);break}g=function(){oi!==2&&oi!==9||yn!==d||(oi=7),et(d)},H.then(g,g);break e;case 3:oi=7;break e;case 4:oi=5;break e;case 7:gt(H)?(oi=0,pr=null,Em(g)):(oi=0,pr=null,Wa(d,g,H,7));break;case 5:var ie=null;switch(Mn.tag){case 26:ie=Mn.memoizedState;case 5:case 27:var we=Mn,Ye=we.type,lt=we.pendingProps;if(ie?ty(ie):Ui(we.stateNode,Ye,lt)){oi=0,pr=null;var yt=we.sibling;if(yt!==null)Mn=yt;else{var ht=we.return;ht!==null?(Mn=ht,lh(ht)):Mn=null}break t}}oi=0,pr=null,Wa(d,g,H,5);break;case 6:oi=0,pr=null,Wa(d,g,H,6);break;case 8:wm(),Fi=6;break e;default:throw Error(r(462))}}ah();break}catch(Rt){yi(d,Rt)}while(!0);return ya=bi=null,Ht.H=D,Ht.A=k,Tn=E,Mn!==null?0:(yn=null,Rn=0,_r(),Fi)}function ah(){for(;Mn!==null&&!n1();)Ac(Mn)}function Ac(d){var g=fv(d.alternate,d,il);d.memoizedProps=d.pendingProps,g===null?lh(d):Mn=g}function Em(d){var g=d,E=g.alternate;switch(g.tag){case 15:case 0:g=sv(E,g,g.pendingProps,g.type,void 0,Rn);break;case 11:g=sv(E,g,g.pendingProps,g.type.render,g.ref,Rn);break;case 5:gi(g);default:lx(E,g),g=Mn=Am(g,il),g=fv(E,g,il)}d.memoizedProps=d.pendingProps,g===null?lh(d):Mn=g}function Wa(d,g,E,D){ya=bi=null,gi(g),zc=null,Xu=0;var k=g.return;try{if(rM(d,k,g,E,Rn)){Fi=1,hm(d,J(E,d.current)),Mn=null;return}}catch(H){if(k!==null)throw Mn=k,H;Fi=1,hm(d,J(E,d.current)),Mn=null;return}g.flags&32768?(Cn||D===1?d=!0:Gc||(Rn&536870912)!==0?d=!1:(_a=d=!0,(D===2||D===9||D===3||D===6)&&(D=Hs.current,D!==null&&D.tag===13&&(D.flags|=16384))),Cc(g,d)):lh(g)}function lh(d){var g=d;do{if((g.flags&32768)!==0){Cc(g,_a);return}d=g.return;var E=ax(g.alternate,g,il);if(E!==null){Mn=E;return}if(g=g.sibling,g!==null){Mn=g;return}Mn=g=d}while(g!==null);Fi===0&&(Fi=5)}function Cc(d,g){do{var E=pv(d.alternate,d);if(E!==null){E.flags&=32767,Mn=E;return}if(E=d.return,E!==null&&(E.flags|=32768,E.subtreeFlags=0,E.deletions=null),!g&&(d=d.sibling,d!==null)){Mn=d;return}Mn=d=E}while(d!==null);Fi=6,Mn=null}function Xa(d,g,E,D,k,H,ie,we,Ye){d.cancelPendingCommit=null;do Ya();while(mr!==0);if((Tn&6)!==0)throw Error(r(327));if(g!==null){if(g===d.current)throw Error(r(177));if(H=g.lanes|g.childLanes,H|=qu,L(d,E,H,ie,we,Ye),d===yn&&(Mn=yn=null,Rn=0),Qu=g,Hl=d,rl=E,Th=H,rg=k,uy=D,(g.subtreeFlags&10256)!==0||(g.flags&10256)!==0?(d.callbackNode=null,d.callbackPriority=0,hr(jd,function(){return Ld(),null})):(d.callbackNode=null,d.callbackPriority=0),D=(g.flags&13878)!==0,(g.subtreeFlags&13878)!==0||D){D=Ht.T,Ht.T=null,k=jo(),An(2),ie=Tn,Tn|=4;try{sM(d,g,E)}finally{Tn=ie,An(k),Ht.T=D}}mr=1,Ol(),qa(),Tm()}}function Ol(){if(mr===1){mr=0;var d=Hl,g=Qu,E=(g.flags&13878)!==0;if((g.subtreeFlags&13878)!==0||E){E=Ht.T,Ht.T=null;var D=jo();An(2);var k=Tn;Tn|=4;try{Dd(g,d),yx(d.containerInfo)}finally{Tn=k,An(D),Ht.T=E}}d.current=g,mr=2}}function qa(){if(mr===2){mr=0;var d=Hl,g=Qu,E=(g.flags&8772)!==0;if((g.subtreeFlags&8772)!==0||E){E=Ht.T,Ht.T=null;var D=jo();An(2);var k=Tn;Tn|=4;try{ux(d,g.alternate,g)}finally{Tn=k,An(D),Ht.T=E}}mr=3}}function Tm(){if(mr===4||mr===3){mr=0,iy();var d=Hl,g=Qu,E=rl,D=uy;(g.subtreeFlags&10256)!==0||(g.flags&10256)!==0?mr=5:(mr=0,Qu=Hl=null,Mm(d,d.pendingLanes));var k=d.pendingLanes;if(k===0&&(Gl=null),F(E),g=g.stateNode,Gs&&typeof Gs.onCommitFiberRoot=="function")try{Gs.onCommitFiberRoot(Wu,g,void 0,(g.current.flags&128)===128)}catch{}if(D!==null){g=Ht.T,k=jo(),An(2),Ht.T=null;try{for(var H=d.onRecoverableError,ie=0;ie<D.length;ie++){var we=D[ie];H(we.value,{componentStack:we.stack})}}finally{Ht.T=g,An(k)}}(rl&3)!==0&&Ya(),et(d),k=d.pendingLanes,(E&261930)!==0&&(k&42)!==0?d===ep?Hn++:(Hn=0,ep=d):Hn=0,Ri&&Vd(),Ze(0)}}function Mm(d,g){(d.pooledCacheLanes&=g)===0&&(g=d.pooledCache,g!=null&&(d.pooledCache=null,Oe(g)))}function Ya(){return Ol(),qa(),Tm(),Ld()}function Ld(){if(mr!==5)return!1;var d=Hl,g=Th;Th=0;var E=F(rl),D=32>E?32:E;E=Ht.T;var k=jo();try{An(D),Ht.T=null,D=rg,rg=null;var H=Hl,ie=rl;if(mr=0,Qu=Hl=null,rl=0,(Tn&6)!==0)throw Error(r(331));var we=Tn;if(Tn|=4,xm(H.current),bm(H,H.current,ie,D),Tn=we,Ze(0,!1),Gs&&typeof Gs.onPostCommitFiberRoot=="function")try{Gs.onPostCommitFiberRoot(Wu,H)}catch{}return!0}finally{An(k),Ht.T=E,Mm(d,g)}}function Rc(d,g,E){g=J(E,g),g=iv(d.stateNode,g,2),d=no(d,g,2),d!==null&&(R(d,2),et(d))}function Zt(d,g,E){if(d.tag===3)Rc(d,d,E);else for(;g!==null;){if(g.tag===3){Rc(g,d,E);break}else if(g.tag===1){var D=g.stateNode;if(typeof g.type.getDerivedStateFromError=="function"||typeof D.componentDidCatch=="function"&&(Gl===null||!Gl.has(D))){d=J(E,d),E=$_(2),D=no(g,E,2),D!==null&&(Z_(E,D,g,d),R(D,2),et(D));break}}g=g.return}}function ch(d,g,E){var D=d.pingCache;if(D===null){D=d.pingCache=new vo;var k=new Set;D.set(g,k)}else k=D.get(g),k===void 0&&(k=new Set,D.set(g,k));k.has(E)||(Hc=!0,k.add(E),d=px.bind(null,d,g,E),g.then(d,d))}function px(d,g,E){var D=d.pingCache;D!==null&&D.delete(g),d.pingedLanes|=d.suspendedLanes&E,d.warmLanes&=~E,yn===d&&(Rn&E)===E&&(Fi===4||Fi===3&&(Rn&62914560)===Rn&&300>cs()-Qd?(Tn&2)===0&&Wi(d,0):wh|=E,Eh===Rn&&(Eh=0)),et(d)}function mx(d,g){g===0&&(g=M()),d=$i(d,g),d!==null&&(R(d,g),et(d))}function oM(d){var g=d.memoizedState,E=0;g!==null&&(E=g.retryLane),mx(d,E)}function aM(d,g){var E=0;switch(d.tag){case 31:case 13:var D=d.stateNode,k=d.memoizedState;k!==null&&(E=k.retryLane);break;case 19:D=d.stateNode;break;case 22:D=d.stateNode._retryCache;break;default:throw Error(r(314))}D!==null&&D.delete(g),mx(d,E)}function hr(d,g){return Hd(d,g)}function bv(d,g,E,D){this.tag=d,this.key=E,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=g,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=D,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lu(d){return d=d.prototype,!(!d||!d.isReactComponent)}function uo(d,g){var E=d.alternate;return E===null?(E=t(d.tag,g,d.key,d.mode),E.elementType=d.elementType,E.type=d.type,E.stateNode=d.stateNode,E.alternate=d,d.alternate=E):(E.pendingProps=g,E.type=d.type,E.flags=0,E.subtreeFlags=0,E.deletions=null),E.flags=d.flags&65011712,E.childLanes=d.childLanes,E.lanes=d.lanes,E.child=d.child,E.memoizedProps=d.memoizedProps,E.memoizedState=d.memoizedState,E.updateQueue=d.updateQueue,g=d.dependencies,E.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext},E.sibling=d.sibling,E.index=d.index,E.ref=d.ref,E.refCleanup=d.refCleanup,E}function Am(d,g){d.flags&=65011714;var E=d.alternate;return E===null?(d.childLanes=0,d.lanes=g,d.child=null,d.subtreeFlags=0,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=E.childLanes,d.lanes=E.lanes,d.child=E.child,d.subtreeFlags=0,d.deletions=null,d.memoizedProps=E.memoizedProps,d.memoizedState=E.memoizedState,d.updateQueue=E.updateQueue,d.type=E.type,g=E.dependencies,d.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext}),d}function Ll(d,g,E,D,k,H){var ie=0;if(D=d,typeof d=="function")Lu(d)&&(ie=1);else if(typeof d=="string")ie=Wo&&Sr?Gm(d,E,Or.current)?26:ny(d)?27:5:Wo?Gm(d,E,Or.current)?26:5:Sr&&ny(d)?27:5;else e:switch(d){case Ud:return d=t(31,E,g,k),d.elementType=Ud,d.lanes=H,d;case Uu:return Go(E.children,k,H,g);case ku:ie=8,k|=24;break;case zu:return d=t(12,E,g,k|2),d.elementType=zu,d.lanes=H,d;case Om:return d=t(13,E,g,k),d.elementType=Om,d.lanes=H,d;case Pl:return d=t(19,E,g,k),d.elementType=Pl,d.lanes=H,d;default:if(typeof d=="object"&&d!==null)switch(d.$$typeof){case Ho:ie=10;break e;case Nd:ie=9;break e;case uh:ie=11;break e;case Lm:ie=14;break e;case bs:ie=16,D=null;break e}ie=29,E=Error(r(130,d===null?"null":typeof d,"")),D=null}return g=t(ie,E,g,k),g.elementType=d,g.type=D,g.lanes=H,g}function Go(d,g,E,D){return d=t(7,d,D,g),d.lanes=E,d}function _v(d,g,E){return d=t(6,d,null,g),d.lanes=E,d}function xv(d){var g=t(18,null,null,0);return g.stateNode=d,g}function Sv(d,g,E){return g=t(4,d.children!==null?d.children:[],d.key,g),g.lanes=E,g.stateNode={containerInfo:d.containerInfo,pendingChildren:null,implementation:d.implementation},g}function gx(d,g,E,D,k,H,ie,we,Ye){this.tag=1,this.containerInfo=d,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Bs,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=C(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=C(0),this.hiddenUpdates=C(null),this.identifierPrefix=D,this.onUncaughtError=k,this.onCaughtError=H,this.onRecoverableError=ie,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Ye,this.incompleteTransitions=new Map}function Dc(d,g,E,D,k,H,ie,we,Ye,lt,yt,ht){return d=new gx(d,g,E,ie,Ye,lt,yt,ht,we),g=1,H===!0&&(g|=24),H=t(3,null,null,g),d.current=H,H.stateNode=d,g=Ne(),g.refCount++,d.pooledCache=g,g.refCount++,H.memoizedState={element:D,isDehydrated:E,cache:g},Hi(H),d}function Cm(d){return d?(d=Za,d):Za}function Pd(d){var g=d._reactInternals;if(g===void 0)throw typeof d.render=="function"?Error(r(188)):(d=Object.keys(d).join(","),Error(r(268,d)));return d=a(g),d=d!==null?l(d):null,d===null?null:hh(d.stateNode)}function wv(d,g,E,D,k,H){k=Cm(k),D.context===null?D.context=k:D.pendingContext=k,D=Is(g),D.payload={element:E},H=H===void 0?null:H,H!==null&&(D.callback=H),E=no(d,D,g),E!==null&&(Ni(E,d,g),Po(E,d,g))}function Pu(d,g){if(d=d.memoizedState,d!==null&&d.dehydrated!==null){var E=d.retryLane;d.retryLane=E!==0&&E<g?E:g}}function Id(d,g){Pu(d,g),(d=d.alternate)&&Pu(d,g)}var gn={},Rm=Rs,zs=cce,Dm=Object.assign,Iu=Symbol.for("react.element"),$a=Symbol.for("react.transitional.element"),Nu=Symbol.for("react.portal"),Uu=Symbol.for("react.fragment"),ku=Symbol.for("react.strict_mode"),zu=Symbol.for("react.profiler"),Nd=Symbol.for("react.consumer"),Ho=Symbol.for("react.context"),uh=Symbol.for("react.forward_ref"),Om=Symbol.for("react.suspense"),Pl=Symbol.for("react.suspense_list"),Lm=Symbol.for("react.memo"),bs=Symbol.for("react.lazy"),Ud=Symbol.for("react.activity"),Ev=Symbol.for("react.memo_cache_sentinel"),Il=Symbol.iterator,Oc=Symbol.for("react.client.reference"),Lc=Array.isArray,Ht=Rm.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Tv=e.rendererVersion,kd=e.rendererPackageName,fh=e.extraDevToolsConfig,hh=e.getPublicInstance,vx=e.getRootHostContext,dh=e.getChildHostContext,Pm=e.prepareForCommit,yx=e.resetAfterCommit,Mv=e.createInstance;e.cloneMutableInstance;var zd=e.appendInitialChild,Fs=e.finalizeInitialChildren,_s=e.shouldSetTextContent,Nl=e.createTextInstance;e.cloneMutableTextInstance;var Av=e.scheduleTimeout,bx=e.cancelTimeout,Bs=e.noTimeout,Ki=e.isPrimaryRenderer;e.warnsIfNotActing;var On=e.supportsMutation,fo=e.supportsPersistence,Ri=e.supportsHydration,on=e.getInstanceFromNode;e.beforeActiveInstanceBlur;var li=e.preparePortalMount;e.prepareScopeUpdate,e.getInstanceFromScope;var An=e.setCurrentUpdatePriority,jo=e.getCurrentUpdatePriority,ph=e.resolveUpdatePriority;e.trackSchedulerEvent,e.resolveEventType,e.resolveEventTimeStamp;var Fu=e.shouldAttemptEagerTransition,Im=e.detachDeletedInstance;e.requestPostPaintCallback;var Fd=e.maySuspendCommit,mh=e.maySuspendCommitOnUpdate,Cv=e.maySuspendCommitInSyncRender,Ui=e.preloadInstance,Rv=e.startSuspendingCommit,Nm=e.suspendInstance;e.suspendOnActiveViewTransition;var _x=e.waitForCommitToBeReady;e.getSuspendedCommitReason;var Bu=e.NotPendingTransition,Vu=e.HostTransitionContext,Dv=e.resetFormInstance;e.bindToConsole;var Ov=e.supportsMicrotasks,Lv=e.scheduleMicrotask,xr=e.supportsTestSelectors,Qi=e.findFiberRoot,Um=e.getBoundingRect,Bd=e.getTextContent,Pc=e.isHiddenSubtree,Pv=e.matchAccessibilityRole,Ul=e.setFocusIfFocusable,km=e.setupIntersectionObserver,Iv=e.appendChild,Nv=e.appendChildToContainer,xx=e.commitTextUpdate,Sx=e.commitMount,wx=e.commitUpdate,Ex=e.insertBefore,Tx=e.insertInContainerBefore,Mx=e.removeChild,Uv=e.removeChildFromContainer,kv=e.resetTextContent,lM=e.hideInstance,Ax=e.hideTextInstance,Cx=e.unhideInstance,Rx=e.unhideTextInstance;e.cancelViewTransitionName,e.cancelRootViewTransitionName,e.restoreRootViewTransitionName,e.cloneRootViewTransitionContainer,e.removeRootViewTransitionClone,e.measureClonedInstance,e.hasInstanceChanged,e.hasInstanceAffectedParent,e.startViewTransition,e.startGestureTransition,e.stopViewTransition,e.getCurrentGestureOffset,e.createViewTransitionInstance;var zv=e.clearContainer;e.createFragmentInstance,e.updateFragmentInstanceFiber,e.commitNewChildToFragmentInstance,e.deleteChildFromFragmentInstance;var Dx=e.cloneInstance,Fv=e.createContainerChildSet,Bv=e.appendChildToContainerChildSet,Ox=e.finalizeContainerChildren,Vv=e.replaceContainerChildren,Lx=e.cloneHiddenInstance,Gv=e.cloneHiddenTextInstance,Ic=e.isSuspenseInstancePending,zm=e.isSuspenseInstanceFallback,Fm=e.getSuspenseInstanceFallbackErrorDetails,Bm=e.registerSuspenseInstanceRetry,Px=e.canHydrateFormStateMarker,Hv=e.isFormStateMarkerMatching,Ix=e.getNextHydratableSibling,Nx=e.getNextHydratableSiblingAfterSingleton,Ux=e.getFirstHydratableChild,kx=e.getFirstHydratableChildWithinContainer,zx=e.getFirstHydratableChildWithinActivityInstance,Fx=e.getFirstHydratableChildWithinSuspenseInstance,jv=e.getFirstHydratableChildWithinSingleton,Bx=e.canHydrateInstance,Vx=e.canHydrateTextInstance,Wv=e.canHydrateActivityInstance,Gx=e.canHydrateSuspenseInstance,Hx=e.hydrateInstance,cM=e.hydrateTextInstance,Xv=e.hydrateActivityInstance,jx=e.hydrateSuspenseInstance,Wx=e.getNextHydratableInstanceAfterActivityInstance,qv=e.getNextHydratableInstanceAfterSuspenseInstance,Xx=e.commitHydratedInstance,qx=e.commitHydratedContainer,uM=e.commitHydratedActivityInstance,fM=e.commitHydratedSuspenseInstance,Yx=e.finalizeHydratedChildren,Vd=e.flushHydrationEvents;e.clearActivityBoundary;var Yv=e.clearSuspenseBoundary;e.clearActivityBoundaryFromContainer;var Vm=e.clearSuspenseBoundaryFromContainer,$x=e.hideDehydratedBoundary,Zx=e.unhideDehydratedBoundary,gh=e.shouldDeleteUnhydratedTailInstances;e.diffHydratedPropsForDevWarnings,e.diffHydratedTextForDevWarnings,e.describeHydratableInstanceForDevWarnings;var Kx=e.validateHydratableInstance,$v=e.validateHydratableTextInstance,Wo=e.supportsResources,Gm=e.isHostHoistableType,Gd=e.getHoistableRoot,Zv=e.getResource,Kv=e.acquireResource,Nc=e.releaseResource,Qx=e.hydrateHoistable,Qv=e.mountHoistable,Jv=e.unmountHoistable,Hm=e.createHoistableInstance,Jx=e.prepareToCommitHoistables,ey=e.mayResourceSuspendCommit,ty=e.preloadResource,e1=e.suspendResource,Sr=e.supportsSingletons,jm=e.resolveSingletonInstance,dr=e.acquireSingletonInstance,Dr=e.releaseSingletonInstance,ny=e.isHostSingletonType,Gu=e.isSingletonScope,Wm=[],Hu=-1,Za={},Vs=Math.clz32?Math.clz32:x,Xm=Math.log,t1=Math.LN2,qm=256,ju=262144,vh=4194304,Hd=zs.unstable_scheduleCallback,Ym=zs.unstable_cancelCallback,n1=zs.unstable_shouldYield,iy=zs.unstable_requestPaint,cs=zs.unstable_now,$m=zs.unstable_ImmediatePriority,i1=zs.unstable_UserBlockingPriority,jd=zs.unstable_NormalPriority,Zm=zs.unstable_IdlePriority,ry=zs.log,r1=zs.unstable_setDisableYieldValue,Wu=null,Gs=null,Ji=typeof Object.is=="function"?Object.is:W,Km=typeof reportError=="function"?reportError:function(d){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var g=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof d=="object"&&d!==null&&typeof d.message=="string"?String(d.message):String(d),error:d});if(!window.dispatchEvent(g))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",d);return}console.error(d)},hM=Object.prototype.hasOwnProperty,Qm,Ka,Wd=!1,sy=new WeakMap,kl=[],Qa=0,ci=null,Xd=0,Xo=[],ho=0,qo=null,Xr=1,va="",Or=m(null),zl=m(null),qr=m(null),qd=m(null),wr=null,Di=null,Cn=!1,Ja=null,xs=!1,Jm=Error(r(519)),Yo=m(null),bi=null,ya=null,s1=typeof AbortController<"u"?AbortController:function(){var d=[],g=this.signal={aborted:!1,addEventListener:function(E,D){d.push(D)}};this.abort=function(){g.aborted=!0,d.forEach(function(E){return E()})}},Lr=zs.unstable_scheduleCallback,dM=zs.unstable_NormalPriority,Oi={$$typeof:Ho,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},Yd=null,ri=null,us=!1,$o=!1,eg=!1,Uc=0,yh=null,oy=0,Fl=0,Er=null,Zo=Ht.S;Ht.S=function(d,g){Ku=cs(),typeof g=="object"&&g!==null&&typeof g.then=="function"&&Vt(d,g),Zo!==null&&Zo(d,g)};var kc=m(null),Tr=Error(r(460)),tg=Error(r(474)),Ko=Error(r(542)),el={then:function(){}},Ss=null,zc=null,Xu=0,Yr=rs(!0),ay=rs(!1),$r=[],tl=0,qu=0,po=!1,ng=!1,Yu=m(null),Fc=m(0),Hs=m(null),js=null,Xi=m(0),Bl=0,an=null,Gt=null,Jt=null,vn=!1,hn=!1,In=!1,fs=0,Qo=0,ba=null,ly=0,mo={readContext:te,use:Zi,useCallback:It,useContext:It,useEffect:It,useImperativeHandle:It,useLayoutEffect:It,useInsertionEffect:It,useMemo:It,useReducer:It,useRef:It,useState:It,useDebugValue:It,useDeferredValue:It,useTransition:It,useSyncExternalStore:It,useId:It,useHostTransitionStatus:It,useFormState:It,useActionState:It,useOptimistic:It,useMemoCache:It,useCacheRefresh:It};mo.useEffectEvent=It;var ki={readContext:te,use:Zi,useCallback:function(d,g){return hi().memoizedState=[d,g===void 0?null:g],d},useContext:te,useEffect:gc,useImperativeHandle:function(d,g,E){E=E!=null?E.concat([d]):null,da(4194308,4,Na.bind(null,g,d),E)},useLayoutEffect:function(d,g){return da(4194308,4,d,g)},useInsertionEffect:function(d,g){da(4,2,d,g)},useMemo:function(d,g){var E=hi();g=g===void 0?null:g;var D=d();if(In){z(!0);try{d()}finally{z(!1)}}return E.memoizedState=[D,g],D},useReducer:function(d,g,E){var D=hi();if(E!==void 0){var k=E(g);if(In){z(!0);try{E(g)}finally{z(!1)}}}else k=g;return D.memoizedState=D.baseState=k,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:d,lastRenderedState:k},D.queue=d,d=d.dispatch=as.bind(null,an,d),[D.memoizedState,d]},useRef:function(d){var g=hi();return d={current:d},g.memoizedState=d},useState:function(d){d=dc(d);var g=d.queue,E=ma.bind(null,an,g);return g.dispatch=E,[d.memoizedState,E]},useDebugValue:bc,useDeferredValue:function(d,g){var E=hi();return fr(E,d,g)},useTransition:function(){var d=dc(!1);return d=Tu.bind(null,an,d.queue,!0,!1),hi().memoizedState=d,[!1,d]},useSyncExternalStore:function(d,g,E){var D=an,k=hi();if(Cn){if(E===void 0)throw Error(r(407));E=E()}else{if(E=g(),yn===null)throw Error(r(349));(Rn&127)!==0||bd(D,g,E)}k.memoizedState=E;var H={value:E,getSnapshot:g};return k.queue=H,gc(_u.bind(null,D,H,d),[d]),D.flags|=2048,os(9,{destroy:void 0},qf.bind(null,D,H,E,g),null),E},useId:function(){var d=hi(),g=yn.identifierPrefix;if(Cn){var E=va,D=Xr;E=(D&~(1<<32-Vs(D)-1)).toString(32)+E,g="_"+g+"R_"+E,E=fs++,0<E&&(g+="H"+E.toString(32)),g+="_"}else E=ly++,g="_"+g+"r_"+E.toString(32)+"_";return d.memoizedState=g},useHostTransitionStatus:Yf,useFormState:pc,useActionState:pc,useOptimistic:function(d){var g=hi();g.memoizedState=g.baseState=d;var E={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return g.queue=E,g=cm.bind(null,an,!0,E),E.dispatch=g,[d,g]},useMemoCache:ji,useCacheRefresh:function(){return hi().memoizedState=ao.bind(null,an)},useEffectEvent:function(d){var g=hi(),E={impl:d};return g.memoizedState=E,function(){if((Tn&2)!==0)throw Error(r(440));return E.impl.apply(void 0,arguments)}}},nl={readContext:te,use:Zi,useCallback:Ua,useContext:te,useEffect:Uo,useImperativeHandle:yc,useInsertionEffect:pa,useLayoutEffect:Ml,useMemo:ka,useReducer:di,useRef:Eu,useState:function(){return di(Gn)},useDebugValue:bc,useDeferredValue:function(d,g){var E=sn();return xd(E,Gt.memoizedState,d,g)},useTransition:function(){var d=di(Gn)[0],g=sn().memoizedState;return[typeof d=="boolean"?d:Xt(d),g]},useSyncExternalStore:ha,useId:$f,useHostTransitionStatus:Yf,useFormState:Pa,useActionState:Pa,useOptimistic:function(d,g){var E=sn();return Io(E,Gt,d,g)},useMemoCache:ji,useCacheRefresh:jr};nl.useEffectEvent=Ai;var Bc={readContext:te,use:Zi,useCallback:Ua,useContext:te,useEffect:Uo,useImperativeHandle:yc,useInsertionEffect:pa,useLayoutEffect:Ml,useMemo:ka,useReducer:Hr,useRef:Eu,useState:function(){return Hr(Gn)},useDebugValue:bc,useDeferredValue:function(d,g){var E=sn();return Gt===null?fr(E,d,g):xd(E,Gt.memoizedState,d,g)},useTransition:function(){var d=Hr(Gn)[0],g=sn().memoizedState;return[typeof d=="boolean"?d:Xt(d),g]},useSyncExternalStore:ha,useId:$f,useHostTransitionStatus:Yf,useFormState:Ia,useActionState:Ia,useOptimistic:function(d,g){var E=sn();return Gt!==null?Io(E,Gt,d,g):(E.baseState=d,[d,E.queue.dispatch])},useMemoCache:ji,useCacheRefresh:jr};Bc.useEffectEvent=Ai;var $d={enqueueSetState:function(d,g,E){d=d._reactInternals;var D=Ci(),k=Is(D);k.payload=g,E!=null&&(k.callback=E),g=no(d,k,D),g!==null&&(Ni(g,d,D),Po(g,d,D))},enqueueReplaceState:function(d,g,E){d=d._reactInternals;var D=Ci(),k=Is(D);k.tag=1,k.payload=g,E!=null&&(k.callback=E),g=no(d,k,D),g!==null&&(Ni(g,d,D),Po(g,d,D))},enqueueForceUpdate:function(d,g){d=d._reactInternals;var E=Ci(),D=Is(E);D.tag=2,g!=null&&(D.callback=g),g=no(d,D,E),g!==null&&(Ni(g,d,E),Po(g,d,E))}},ws=Error(r(461)),Ei=!1,$u={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null},qi=!1,Yi=!1,bh=!1,cy=typeof WeakSet=="function"?WeakSet:Set,er=null,zi=null,tr=!1,si=null,go=8192,_h={getCacheForType:function(d){var g=te(Oi),E=g.data.get(d);return E===void 0&&(E=d(),g.data.set(d,E)),E},cacheSignal:function(){return te(Oi).controller.signal}},Jo=0,xh=1,Sh=2,Zd=3,Vc=4;if(typeof Symbol=="function"&&Symbol.for){var Zu=Symbol.for;Jo=Zu("selector.component"),xh=Zu("selector.has_pseudo_class"),Sh=Zu("selector.role"),Zd=Zu("selector.test_id"),Vc=Zu("selector.text")}var vo=typeof WeakMap=="function"?WeakMap:Map,Tn=0,yn=null,Mn=null,Rn=0,oi=0,pr=null,_a=!1,Gc=!1,Hc=!1,il=0,Fi=0,Vl=0,jc=0,wh=0,Es=0,Eh=0,Kd=null,Ws=null,ig=!1,Qd=0,Ku=0,Wc=1/0,Jd=null,Gl=null,mr=0,Hl=null,Qu=null,rl=0,Th=0,rg=null,uy=null,Hn=0,ep=null;return gn.attemptContinuousHydration=function(d){if(d.tag===13||d.tag===31){var g=$i(d,67108864);g!==null&&Ni(g,d,67108864),Id(d,67108864)}},gn.attemptHydrationAtCurrentPriority=function(d){if(d.tag===13||d.tag===31){var g=Ci();g=B(g);var E=$i(d,g);E!==null&&Ni(E,d,g),Id(d,g)}},gn.attemptSynchronousHydration=function(d){switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var g=S(d.pendingLanes);if(g!==0){for(d.pendingLanes|=2,d.entangledLanes|=2;g;){var E=1<<31-Vs(g);d.entanglements[1]|=E,g&=~E}et(d),(Tn&6)===0&&(Wc=cs()+500,Ze(0))}}break;case 31:case 13:g=$i(d,2),g!==null&&Ni(g,d,2),Sm(),Id(d,2)}},gn.batchedUpdates=function(d,g){return d(g)},gn.createComponentSelector=function(d){return{$$typeof:Jo,value:d}},gn.createContainer=function(d,g,E,D,k,H,ie,we,Ye,lt){return Dc(d,g,!1,null,E,D,H,null,ie,we,Ye,lt)},gn.createHasPseudoClassSelector=function(d){return{$$typeof:xh,value:d}},gn.createHydrationContainer=function(d,g,E,D,k,H,ie,we,Ye,lt,yt,ht,Rt,tn){var nr;return d=Dc(E,D,!0,d,k,H,we,tn,Ye,lt,yt,ht),d.context=Cm(null),E=d.current,D=Ci(),D=B(D),k=Is(D),k.callback=(nr=g)!=null?nr:null,no(E,k,D),g=D,d.current.lanes=g,R(d,g),et(d),d},gn.createPortal=function(d,g,E){var D=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Nu,key:D==null?null:""+D,children:d,containerInfo:g,implementation:E}},gn.createRoleSelector=function(d){return{$$typeof:Sh,value:d}},gn.createTestNameSelector=function(d){return{$$typeof:Zd,value:d}},gn.createTextSelector=function(d){return{$$typeof:Vc,value:d}},gn.defaultOnCaughtError=function(d){console.error(d)},gn.defaultOnRecoverableError=function(d){Km(d)},gn.defaultOnUncaughtError=function(d){Km(d)},gn.deferredUpdates=function(d){var g=Ht.T,E=jo();try{return An(32),Ht.T=null,d()}finally{An(E),Ht.T=g}},gn.discreteUpdates=function(d,g,E,D,k){var H=Ht.T,ie=jo();try{return An(2),Ht.T=null,d(g,E,D,k)}finally{An(ie),Ht.T=H,Tn===0&&(Wc=cs()+500)}},gn.findAllNodes=ks,gn.findBoundingRects=function(d,g){if(!xr)throw Error(r(363));g=ks(d,g),d=[];for(var E=0;E<g.length;E++)d.push(Um(g[E]));for(g=d.length-1;0<g;g--){E=d[g];for(var D=E.x,k=D+E.width,H=E.y,ie=H+E.height,we=g-1;0<=we;we--)if(g!==we){var Ye=d[we],lt=Ye.x,yt=lt+Ye.width,ht=Ye.y,Rt=ht+Ye.height;if(D>=lt&&H>=ht&&k<=yt&&ie<=Rt){d.splice(g,1);break}else if(D!==lt||E.width!==Ye.width||Rt<H||ht>ie){if(!(H!==ht||E.height!==Ye.height||yt<D||lt>k)){lt>D&&(Ye.width+=lt-D,Ye.x=D),yt<k&&(Ye.width=k-lt),d.splice(g,1);break}}else{ht>H&&(Ye.height+=ht-H,Ye.y=H),Rt<ie&&(Ye.height=ie-ht),d.splice(g,1);break}}}return d},gn.findHostInstance=Pd,gn.findHostInstanceWithNoPortals=function(d){return d=a(d),d=d!==null?u(d):null,d===null?null:hh(d.stateNode)},gn.findHostInstanceWithWarning=function(d){return Pd(d)},gn.flushPassiveEffects=Ya,gn.flushSyncFromReconciler=function(d){var g=Tn;Tn|=1;var E=Ht.T,D=jo();try{if(An(2),Ht.T=null,d)return d()}finally{An(D),Ht.T=E,Tn=g,(Tn&6)===0&&Ze(0)}},gn.flushSyncWork=Sm,gn.focusWithin=function(d,g){if(!xr)throw Error(r(363));for(d=Tc(d),g=sh(d,g),g=Array.from(g),d=0;d<g.length;){var E=g[d++],D=E.tag;if(!Pc(E)){if((D===5||D===26||D===27)&&Ul(E.stateNode))return!0;for(E=E.child;E!==null;)g.push(E),E=E.sibling}}return!1},gn.getFindAllNodesFailureDescription=function(d,g){if(!xr)throw Error(r(363));var E=0,D=[];d=[Tc(d),0];for(var k=0;k<d.length;){var H=d[k++],ie=H.tag,we=d[k++],Ye=g[we];if((ie!==5&&ie!==26&&ie!==27||!Pc(H))&&(Mc(H,Ye)&&(D.push(rh(Ye)),we++,we>E&&(E=we)),we<g.length))for(H=H.child;H!==null;)d.push(H,we),H=H.sibling}if(E<g.length){for(d=[];E<g.length;E++)d.push(rh(g[E]));return`findAllNodes was able to match part of the selector:
  `+(D.join(" > ")+`

No matching component was found for:
  `)+d.join(" > ")}return null},gn.getPublicRootInstance=function(d){if(d=d.current,!d.child)return null;switch(d.child.tag){case 27:case 5:return hh(d.child.stateNode);default:return d.child.stateNode}},gn.injectIntoDevTools=function(){var d={bundleType:0,version:Tv,rendererPackageName:kd,currentDispatcherRef:Ht,reconcilerVersion:"19.2.0"};if(fh!==null&&(d.rendererConfig=fh),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")d=!1;else{var g=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(g.isDisabled||!g.supportsFiber)d=!0;else{try{Wu=g.inject(d),Gs=g}catch{}d=!!g.checkDCE}}return d},gn.isAlreadyRendering=function(){return(Tn&6)!==0},gn.observeVisibleRects=function(d,g,E,D){if(!xr)throw Error(r(363));d=ks(d,g);var k=km(d,E,D).disconnect;return{disconnect:function(){k()}}},gn.shouldError=function(){return null},gn.shouldSuspend=function(){return!1},gn.startHostTransition=function(d,g,E,D){if(d.tag!==5)throw Error(r(476));var k=Mu(d).queue;Tu(d,k,g,Bu,E===null?i:function(){var H=Mu(d);return H.next===null&&(H=d.alternate.memoizedState),_c(d,H.next.queue,{},Ci()),E(D)})},gn.updateContainer=function(d,g,E,D){var k=g.current,H=Ci();return wv(k,H,d,g,E,D),H},gn.updateContainerSync=function(d,g,E,D){return wv(g.current,2,d,g,E,D),2},gn},n.exports.default=n.exports,Object.defineProperty(n.exports,"__esModule",{value:!0})})(jk)),jk.exports}var Xk;function Uce(){return Xk||(Xk=1,Hk.exports=Nce()),Hk.exports}var kce=Uce();const zce=Ice(kce);function Fce(n){const e=zce(n);return e.injectIntoDevTools(),e}const $8=0,A0={},Bce=/^three(?=[A-Z])/,HT=n=>`${n[0].toUpperCase()}${n.slice(1)}`;let Vce=0;const Gce=n=>typeof n=="function";function Z8(n){if(Gce(n)){const e=`${Vce++}`;return A0[e]=n,e}else Object.assign(A0,n)}function K8(n,e){const t=HT(n),i=A0[t];if(n!=="primitive"&&!i)throw new Error(`R3F: ${t} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(n==="primitive"&&!e.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(e.args!==void 0&&!Array.isArray(e.args))throw new Error("R3F: The args prop must be an array!")}function Hce(n,e,t){var i;return n=HT(n)in A0?n:n.replace(Bce,""),K8(n,e),n==="primitive"&&(i=e.object)!=null&&i.__r3f&&delete e.object.__r3f,ME(e.object,t,n,e)}function jce(n){if(!n.isHidden){var e;n.props.attach&&(e=n.parent)!=null&&e.object?CE(n.parent,n):ra(n.object)&&(n.object.visible=!1),n.isHidden=!0,Z0(n)}}function Q8(n){if(n.isHidden){var e;n.props.attach&&(e=n.parent)!=null&&e.object?AE(n.parent,n):ra(n.object)&&n.props.visible!==!1&&(n.object.visible=!0),n.isHidden=!1,Z0(n)}}function QO(n,e,t){const i=e.root.getState();if(!(!n.parent&&n.object!==i.scene)){if(!e.object){var r,s;const o=A0[HT(e.type)];e.object=(r=e.props.object)!=null?r:new o(...(s=e.props.args)!=null?s:[]),e.object.__r3f=e}if(Ef(e.object,e.props),e.props.attach)AE(n,e);else if(ra(e.object)&&ra(n.object)){const o=n.object.children.indexOf(t?.object);if(t&&o!==-1){const a=n.object.children.indexOf(e.object);if(a!==-1){n.object.children.splice(a,1);const l=a<o?o-1:o;n.object.children.splice(l,0,e.object)}else e.object.parent=n.object,n.object.children.splice(o,0,e.object),e.object.dispatchEvent({type:"added"}),n.object.dispatchEvent({type:"childadded",child:e.object})}else n.object.add(e.object)}for(const o of e.children)QO(e,o);Z0(e)}}function EC(n,e){e&&(e.parent=n,n.children.push(e),QO(n,e))}function qk(n,e,t){if(!e||!t)return;e.parent=n;const i=n.children.indexOf(t);i!==-1?n.children.splice(i,0,e):n.children.push(e),QO(n,e,t)}function J8(n){if(typeof n.dispose=="function"){const e=()=>{try{n.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT<"u"?e():C3.unstable_scheduleCallback(C3.unstable_IdlePriority,e)}}function D3(n,e,t){if(!e)return;e.parent=null;const i=n.children.indexOf(e);i!==-1&&n.children.splice(i,1),e.props.attach?CE(n,e):ra(e.object)&&ra(n.object)&&(n.object.remove(e.object),Mce(V8(e),e.object));const r=e.props.dispose!==null&&t!==!1;for(let s=e.children.length-1;s>=0;s--){const o=e.children[s];D3(e,o,r)}e.children.length=0,delete e.object.__r3f,r&&e.type!=="primitive"&&e.object.type!=="Scene"&&J8(e.object),t===void 0&&Z0(e)}function Wce(n,e){for(const t of[n,n.alternate])if(t!==null)if(typeof t.ref=="function"){t.refCleanup==null||t.refCleanup();const i=t.ref(e);typeof i=="function"&&(t.refCleanup=i)}else t.ref&&(t.ref.current=e)}const ow=[];function Xce(){for(const[t]of ow){const i=t.parent;if(i){t.props.attach?CE(i,t):ra(t.object)&&ra(i.object)&&i.object.remove(t.object);for(const r of t.children)r.props.attach?CE(t,r):ra(r.object)&&ra(t.object)&&t.object.remove(r.object)}t.isHidden&&Q8(t),t.object.__r3f&&delete t.object.__r3f,t.type!=="primitive"&&J8(t.object)}for(const[t,i,r]of ow){t.props=i;const s=t.parent;if(s){var n,e;const o=A0[HT(t.type)];t.object=(n=t.props.object)!=null?n:new o(...(e=t.props.args)!=null?e:[]),t.object.__r3f=t,Wce(r,t.object),Ef(t.object,t.props),t.props.attach?AE(s,t):ra(t.object)&&ra(s.object)&&s.object.add(t.object);for(const a of t.children)a.props.attach?AE(t,a):ra(a.object)&&ra(t.object)&&t.object.add(a.object);Z0(t)}}ow.length=0}const TC=()=>{},Yk={};let DS=$8;const qce=0,Yce=4,O3=Fce({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:Hce,removeChild:D3,appendChild:EC,appendInitialChild:EC,insertBefore:qk,appendChildToContainer(n,e){const t=n.getState().scene.__r3f;!e||!t||EC(t,e)},removeChildFromContainer(n,e){const t=n.getState().scene.__r3f;!e||!t||D3(t,e)},insertInContainerBefore(n,e,t){const i=n.getState().scene.__r3f;!e||!t||!i||qk(i,e,t)},getRootHostContext:()=>Yk,getChildHostContext:()=>Yk,commitUpdate(n,e,t,i,r){var s,o,a;K8(e,i);let l=!1;if((n.type==="primitive"&&t.object!==i.object||((s=i.args)==null?void 0:s.length)!==((o=t.args)==null?void 0:o.length)||(a=i.args)!=null&&a.some((h,p)=>{var m;return h!==((m=t.args)==null?void 0:m[p])}))&&(l=!0),l)ow.push([n,{...i},r]);else{const h=Sce(n,i);Object.keys(h).length&&(Object.assign(n.props,h),Ef(n.object,h))}(r.sibling===null||(r.flags&Yce)===qce)&&Xce()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:n=>n?.object,prepareForCommit:()=>null,preparePortalMount:n=>ME(n.getState().scene,n,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:jce,unhideInstance:Q8,createTextInstance:TC,hideTextInstance:TC,unhideTextInstance:TC,scheduleTimeout:typeof setTimeout=="function"?setTimeout:void 0,cancelTimeout:typeof clearTimeout=="function"?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:q.createContext(null),setCurrentUpdatePriority(n){DS=n},getCurrentUpdatePriority(){return DS},resolveUpdatePriority(){var n;if(DS!==$8)return DS;switch(typeof window<"u"&&((n=window.event)==null?void 0:n.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Lce;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Dce;default:return Oce}},resetFormInstance(){},rendererPackageName:"@react-three/fiber",rendererVersion:Pce.version,applyViewTransitionName(n,e,t){},restoreViewTransitionName(n,e){},cancelViewTransitionName(n,e,t){},cancelRootViewTransitionName(n){},restoreRootViewTransitionName(n){},InstanceMeasurement:null,measureInstance:n=>null,wasInstanceInViewport:n=>!0,hasInstanceChanged:(n,e)=>!1,hasInstanceAffectedParent:(n,e)=>!1,suspendOnActiveViewTransition(n,e){},startGestureTransition:()=>null,startViewTransition:()=>null,stopViewTransition(n){},createViewTransitionInstance:n=>null,getCurrentGestureOffset(n){throw new Error("startGestureTransition is not yet supported in react-three-fiber.")},cloneMutableInstance(n,e){return n},cloneMutableTextInstance(n){return n},cloneRootViewTransitionContainer(n){throw new Error("Not implemented.")},removeRootViewTransitionClone(n,e){throw new Error("Not implemented.")},createFragmentInstance:n=>null,updateFragmentInstanceFiber(n,e){},commitNewChildToFragmentInstance(n,e){},deleteChildFromFragmentInstance(n,e){},measureClonedInstance:n=>null,maySuspendCommitOnUpdate:(n,e,t)=>!1,maySuspendCommitInSyncRender:(n,e)=>!1,startSuspendingCommit:()=>null,getSuspendedCommitReason:(n,e)=>null}),em=new Map,Ig={objects:"shallow",strict:!1};function $ce(n,e){if(!e&&typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:t,height:i,top:r,left:s}=n.parentElement.getBoundingClientRect();return{width:t,height:i,top:r,left:s}}else if(!e&&typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0};return{width:0,height:0,top:0,left:0,...e}}function Zce(n){const e=em.get(n),t=e?.fiber,i=e?.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,s=i||Cce(I3,Zk),o=t||O3.createContainer(s,Rce,null,!1,null,"",r,r,r,null);e||em.set(n,{fiber:o,store:s});let a,l,u=!1,h=null;return{async configure(p={}){let m;h=new Promise(V=>m=V);let{gl:y,size:b,scene:x,events:S,onCreated:_,shadows:T=!1,linear:A=!1,flat:M=!1,legacy:C=!1,orthographic:R=!1,frameloop:L="always",dpr:I=[1,2],performance:P,raycaster:U,camera:B,onPointerMissed:F}=p,z=s.getState(),W=z.gl;if(!z.gl){const V={canvas:n,powerPreference:"high-performance",antialias:!0,alpha:!0},Y=typeof y=="function"?await y(V):y;Gk(Y)?W=Y:W=new N8({...V,...y}),z.set({gl:W})}let X=z.raycaster;X||z.set({raycaster:X=new qO});const{params:j,...G}=U||{};if(rr.equ(G,X,Ig)||Ef(X,{...G}),rr.equ(j,X.params,Ig)||Ef(X,{params:{...X.params,...j}}),!z.camera||z.camera===l&&!rr.equ(l,B,Ig)){l=B;const V=B?.isCamera,Y=V?B:R?new om(0,0,0,0,.1,1e3):new Fr(75,0,.1,1e3);V||(Y.position.z=5,B&&(Ef(Y,B),Y.manual||("aspect"in B||"left"in B||"right"in B||"bottom"in B||"top"in B)&&(Y.manual=!0,Y.updateProjectionMatrix())),!z.camera&&!(B!=null&&B.rotation)&&Y.lookAt(0,0,0)),z.set({camera:Y}),X.camera=Y}if(!z.scene){let V;x!=null&&x.isScene?(V=x,ME(V,s,"",{})):(V=new bT,ME(V,s,"",{}),x&&Ef(V,x)),z.set({scene:V})}S&&!z.events.handlers&&z.set({events:S(s)});const K=$ce(n,b);if(rr.equ(K,z.size,Ig)||z.setSize(K.width,K.height,K.top,K.left),I&&z.viewport.dpr!==j8(I)&&z.setDpr(I),z.frameloop!==L&&z.setFrameloop(L),z.onPointerMissed||z.set({onPointerMissed:F}),P&&!rr.equ(P,z.performance,Ig)&&z.set(V=>({performance:{...V.performance,...P}})),!z.xr){var J;const V=(re,ne)=>{const le=s.getState();le.frameloop!=="never"&&Zk(re,!0,le,ne)},Y=()=>{const re=s.getState();re.gl.xr.enabled=re.gl.xr.isPresenting,re.gl.xr.setAnimationLoop(re.gl.xr.isPresenting?V:null),re.gl.xr.isPresenting||I3(re)},Q={connect(){const re=s.getState().gl;re.xr.addEventListener("sessionstart",Y),re.xr.addEventListener("sessionend",Y)},disconnect(){const re=s.getState().gl;re.xr.removeEventListener("sessionstart",Y),re.xr.removeEventListener("sessionend",Y)}};typeof((J=W.xr)==null?void 0:J.addEventListener)=="function"&&Q.connect(),z.set({xr:Q})}if(W.shadowMap){const V=W.shadowMap.enabled,Y=W.shadowMap.type;if(W.shadowMap.enabled=!!T,rr.boo(T))W.shadowMap.type=Tb;else if(rr.str(T)){var ee;const Q={basic:VB,percentage:sT,soft:Tb,variance:nc};W.shadowMap.type=(ee=Q[T])!=null?ee:Tb}else rr.obj(T)&&Object.assign(W.shadowMap,T);(V!==W.shadowMap.enabled||Y!==W.shadowMap.type)&&(W.shadowMap.needsUpdate=!0)}return Wn.enabled=!C,u||(W.outputColorSpace=A?ld:Ks,W.toneMapping=M?fu:aO),z.legacy!==C&&z.set(()=>({legacy:C})),z.linear!==A&&z.set(()=>({linear:A})),z.flat!==M&&z.set(()=>({flat:M})),y&&!rr.fun(y)&&!Gk(y)&&!rr.equ(y,W,Ig)&&Ef(W,y),a=_,u=!0,m(),this},render(p){return!u&&!h&&this.configure(),h.then(()=>{O3.updateContainer(ue.jsx(Kce,{store:s,children:p,onCreated:a,rootElement:n}),o,null,()=>{})}),s},unmount(){eV(n)}}}function Kce({store:n,children:e,onCreated:t,rootElement:i}){return z_(()=>{const r=n.getState();r.set(s=>({internal:{...s.internal,active:!0}})),t&&t(r),n.getState().events.connected||r.events.connect==null||r.events.connect(i)},[]),ue.jsx(q8.Provider,{value:n,children:e})}function eV(n,e){const t=em.get(n),i=t?.fiber;if(i){const r=t?.store.getState();r&&(r.internal.active=!1),O3.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{try{var s,o,a,l;r.events.disconnect==null||r.events.disconnect(),(s=r.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=r.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=r.gl)!=null&&l.xr&&r.xr.disconnect(),bce(r.scene),em.delete(n)}catch{}},500)})}}function Qce(n,e){const t={callback:n};return e.add(t),()=>{e.delete(t)}}const tV=new Set,Jce=new Set,eue=new Set,tue=n=>Qce(n,tV);function MC(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function Ib(n,e){switch(n){case"before":return MC(tV,e);case"after":return MC(Jce,e);case"tail":return MC(eue,e)}}let AC,CC;function L3(n,e,t){let i=e.clock.getDelta();e.frameloop==="never"&&typeof n=="number"&&(i=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),AC=e.internal.subscribers;for(let r=0;r<AC.length;r++)CC=AC[r],CC.ref.current(CC.store.getState(),i,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}let RE=!1,P3=!1,RC,$k,Ng;function nV(n){$k=requestAnimationFrame(nV),RE=!0,RC=0,Ib("before",n),P3=!0;for(const t of em.values()){var e;Ng=t.store.getState(),Ng.internal.active&&(Ng.frameloop==="always"||Ng.internal.frames>0)&&!((e=Ng.gl.xr)!=null&&e.isPresenting)&&(RC+=L3(n,Ng))}if(P3=!1,Ib("after",n),RC===0)return Ib("tail",n),RE=!1,cancelAnimationFrame($k)}function I3(n,e=1){var t;if(!n)return em.forEach(i=>I3(i.store.getState(),e));(t=n.gl.xr)!=null&&t.isPresenting||!n.internal.active||n.frameloop==="never"||(e>1?n.internal.frames=Math.min(60,n.internal.frames+e):P3?n.internal.frames=2:n.internal.frames=1,RE||(RE=!0,requestAnimationFrame(nV)))}function Zk(n,e=!0,t,i){if(e&&Ib("before",n),t)L3(n,t,i);else for(const r of em.values())L3(n,r.store.getState());e&&Ib("after",n)}const DC={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function nue(n){const{handlePointer:e}=Ace(n);return{priority:1,enabled:!0,compute(t,i,r){i.pointer.set(t.offsetX/i.size.width*2-1,-(t.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(DC).reduce((t,i)=>({...t,[i]:e(i)}),{}),update:()=>{var t;const{events:i,internal:r}=n.getState();(t=r.lastEvent)!=null&&t.current&&i.handlers&&i.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{const{set:i,events:r}=n.getState();if(r.disconnect==null||r.disconnect(),i(s=>({events:{...s.events,connected:t}})),r.handlers)for(const s in r.handlers){const o=r.handlers[s],[a,l]=DC[s];t.addEventListener(a,o,{passive:l})}},disconnect:()=>{const{set:t,events:i}=n.getState();if(i.connected){if(i.handlers)for(const r in i.handlers){const s=i.handlers[r],[o]=DC[r];i.connected.removeEventListener(o,s)}t(r=>({events:{...r.events,connected:void 0}}))}}}}function Kk(n,e){let t;return(...i)=>{window.clearTimeout(t),t=window.setTimeout(()=>n(...i),e)}}function iue({debounce:n,scroll:e,polyfill:t,offsetSize:i}={debounce:0,scroll:!1,offsetSize:!1}){const r=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!r)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,o]=q.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),a=q.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),l=n?typeof n=="number"?n:n.scroll:null,u=n?typeof n=="number"?n:n.resize:null,h=q.useRef(!1);q.useEffect(()=>(h.current=!0,()=>{h.current=!1}));const[p,m,y]=q.useMemo(()=>{const _=()=>{if(!a.current.element)return;const{left:T,top:A,width:M,height:C,bottom:R,right:L,x:I,y:P}=a.current.element.getBoundingClientRect(),U={left:T,top:A,width:M,height:C,bottom:R,right:L,x:I,y:P};a.current.element instanceof HTMLElement&&i&&(U.height=a.current.element.offsetHeight,U.width=a.current.element.offsetWidth),Object.freeze(U),h.current&&!aue(a.current.lastBounds,U)&&o(a.current.lastBounds=U)};return[_,u?Kk(_,u):_,l?Kk(_,l):_]},[o,i,l,u]);function b(){a.current.scrollContainers&&(a.current.scrollContainers.forEach(_=>_.removeEventListener("scroll",y,!0)),a.current.scrollContainers=null),a.current.resizeObserver&&(a.current.resizeObserver.disconnect(),a.current.resizeObserver=null),a.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",a.current.orientationHandler))}function x(){a.current.element&&(a.current.resizeObserver=new r(y),a.current.resizeObserver.observe(a.current.element),e&&a.current.scrollContainers&&a.current.scrollContainers.forEach(_=>_.addEventListener("scroll",y,{capture:!0,passive:!0})),a.current.orientationHandler=()=>{y()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",a.current.orientationHandler))}const S=_=>{!_||_===a.current.element||(b(),a.current.element=_,a.current.scrollContainers=iV(_),x())};return sue(y,!!e),rue(m),q.useEffect(()=>{b(),x()},[e,y,m]),q.useEffect(()=>b,[]),[S,s,p]}function rue(n){q.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[n])}function sue(n,e){q.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>{window.removeEventListener("scroll",t,!0)}}},[n,e])}function iV(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:i,overflowY:r}=window.getComputedStyle(n);return[t,i,r].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...iV(n.parentElement)]}const oue=["x","y","top","bottom","left","right","width","height"],aue=(n,e)=>oue.every(t=>n[t]===e[t]);function lue({ref:n,children:e,fallback:t,resize:i,style:r,gl:s,events:o=nue,eventSource:a,eventPrefix:l,shadows:u,linear:h,flat:p,legacy:m,orthographic:y,frameloop:b,dpr:x,performance:S,raycaster:_,camera:T,scene:A,onPointerMissed:M,onCreated:C,...R}){q.useMemo(()=>Z8(U8),[]);const L=gce(),[I,P]=iue({scroll:!0,debounce:{scroll:50,resize:0},...i}),U=q.useRef(null),B=q.useRef(null);q.useImperativeHandle(n,()=>U.current);const F=H8(M),[z,W]=q.useState(!1),[X,j]=q.useState(!1);if(z)throw z;if(X)throw X;const G=q.useRef(null);z_(()=>{const J=U.current;if(P.width>0&&P.height>0&&J){G.current||(G.current=Zce(J));async function ee(){await G.current.configure({gl:s,scene:A,events:o,shadows:u,linear:h,flat:p,legacy:m,orthographic:y,frameloop:b,dpr:x,performance:S,raycaster:_,camera:T,size:P,onPointerMissed:(...V)=>F.current==null?void 0:F.current(...V),onCreated:V=>{V.events.connect==null||V.events.connect(a?pce(a)?a.current:a:B.current),l&&V.setEvents({compute:(Y,Q)=>{const re=Y[l+"X"],ne=Y[l+"Y"];Q.pointer.set(re/Q.size.width*2-1,-(ne/Q.size.height)*2+1),Q.raycaster.setFromCamera(Q.pointer,Q.camera)}}),C?.(V)}}),G.current.render(ue.jsx(L,{children:ue.jsx(yce,{set:j,children:ue.jsx(q.Suspense,{fallback:ue.jsx(vce,{set:W}),children:e??null})})}))}ee()}}),q.useEffect(()=>{const J=U.current;if(J)return()=>eV(J)},[]);const K=a?"none":"auto";return ue.jsx("div",{ref:B,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:K,...r},...R,children:ue.jsx("div",{ref:I,style:{width:"100%",height:"100%"},children:ue.jsx("canvas",{ref:U,style:{display:"block"},children:t})})})}function cue(n){return ue.jsx(F8,{children:ue.jsx(lue,{...n})})}const ir={LEFT:1,RIGHT:2,MIDDLE:4},je=Object.freeze({NONE:0,ROTATE:1,TRUCK:2,SCREEN_PAN:4,OFFSET:8,DOLLY:16,ZOOM:32,TOUCH_ROTATE:64,TOUCH_TRUCK:128,TOUCH_SCREEN_PAN:256,TOUCH_OFFSET:512,TOUCH_DOLLY:1024,TOUCH_ZOOM:2048,TOUCH_DOLLY_TRUCK:4096,TOUCH_DOLLY_SCREEN_PAN:8192,TOUCH_DOLLY_OFFSET:16384,TOUCH_DOLLY_ROTATE:32768,TOUCH_ZOOM_TRUCK:65536,TOUCH_ZOOM_OFFSET:131072,TOUCH_ZOOM_SCREEN_PAN:262144,TOUCH_ZOOM_ROTATE:524288}),Ug={NONE:0,IN:1,OUT:-1};function gp(n){return n.isPerspectiveCamera}function qh(n){return n.isOrthographicCamera}const Gh=Math.PI*2,Qk=Math.PI/2,rV=1e-5,Fy=Math.PI/180;function Ql(n,e,t){return Math.max(e,Math.min(t,n))}function Li(n,e=rV){return Math.abs(n)<e}function ui(n,e,t=rV){return Li(n-e,t)}function Jk(n,e){return Math.round(n/e)*e}function By(n){return isFinite(n)?n:n<0?-Number.MAX_VALUE:Number.MAX_VALUE}function Vy(n){return Math.abs(n)<Number.MAX_VALUE?n:n*(1/0)}function OS(n,e,t,i,r=1/0,s){i=Math.max(1e-4,i);const o=2/i,a=o*s,l=1/(1+a+.48*a*a+.235*a*a*a);let u=n-e;const h=e,p=r*i;u=Ql(u,-p,p),e=n-u;const m=(t.value+o*u)*s;t.value=(t.value-o*m)*l;let y=e+(u+m)*l;return h-n>0==y>h&&(y=h,t.value=(y-h)/s),y}function e2(n,e,t,i,r=1/0,s,o){i=Math.max(1e-4,i);const a=2/i,l=a*s,u=1/(1+l+.48*l*l+.235*l*l*l);let h=e.x,p=e.y,m=e.z,y=n.x-h,b=n.y-p,x=n.z-m;const S=h,_=p,T=m,A=r*i,M=A*A,C=y*y+b*b+x*x;if(C>M){const X=Math.sqrt(C);y=y/X*A,b=b/X*A,x=x/X*A}h=n.x-y,p=n.y-b,m=n.z-x;const R=(t.x+a*y)*s,L=(t.y+a*b)*s,I=(t.z+a*x)*s;t.x=(t.x-a*R)*u,t.y=(t.y-a*L)*u,t.z=(t.z-a*I)*u,o.x=h+(y+R)*u,o.y=p+(b+L)*u,o.z=m+(x+I)*u;const P=S-n.x,U=_-n.y,B=T-n.z,F=o.x-S,z=o.y-_,W=o.z-T;return P*F+U*z+B*W>0&&(o.x=S,o.y=_,o.z=T,t.x=(o.x-S)/s,t.y=(o.y-_)/s,t.z=(o.z-T)/s),o}function OC(n,e){e.set(0,0),n.forEach(t=>{e.x+=t.clientX,e.y+=t.clientY}),e.x/=n.length,e.y/=n.length}function LC(n,e){return qh(n)?(console.warn(`${e} is not supported in OrthographicCamera`),!0):!1}let uue=class{constructor(){this._listeners={}}addEventListener(e,t){const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}removeAllEventListeners(e){if(!e){this._listeners={};return}Array.isArray(this._listeners[e])&&(this._listeners[e].length=0)}dispatchEvent(e){const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e)}}};var PC;const fue="3.1.0",LS=1/8,hue=/Mac/.test((PC=globalThis?.navigator)===null||PC===void 0?void 0:PC.platform);let en,t2,PS,IC,na,En,ni,kg,Gy,$c,Zc,vp,n2,i2,wa,zg,Fg,r2,NC,s2,UC,kC,IS,Zr=class N3 extends uue{static install(e){en=e.THREE,t2=Object.freeze(new en.Vector3(0,0,0)),PS=Object.freeze(new en.Vector3(0,1,0)),IC=Object.freeze(new en.Vector3(0,0,1)),na=new en.Vector2,En=new en.Vector3,ni=new en.Vector3,kg=new en.Vector3,Gy=new en.Vector3,$c=new en.Vector3,Zc=new en.Vector3,vp=new en.Vector3,n2=new en.Vector3,i2=new en.Vector3,wa=new en.Spherical,zg=new en.Spherical,Fg=new en.Box3,r2=new en.Box3,NC=new en.Sphere,s2=new en.Quaternion,UC=new en.Quaternion,kC=new en.Matrix4,IS=new en.Raycaster}static get ACTION(){return je}set verticalDragToForward(e){console.warn("camera-controls: `verticalDragToForward` was removed. Use `mouseButtons.left = CameraControls.ACTION.SCREEN_PAN` instead.")}constructor(e,t){super(),this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.minDistance=Number.EPSILON,this.maxDistance=1/0,this.infinityDolly=!1,this.minZoom=.01,this.maxZoom=1/0,this.smoothTime=.25,this.draggingSmoothTime=.125,this.maxSpeed=1/0,this.azimuthRotateSpeed=1,this.polarRotateSpeed=1,this.dollySpeed=1,this.dollyDragInverted=!1,this.truckSpeed=2,this.dollyToCursor=!1,this.dragToOffset=!1,this.boundaryFriction=0,this.restThreshold=.01,this.colliderMeshes=[],this.cancel=()=>{},this._enabled=!0,this._state=je.NONE,this._viewport=null,this._changedDolly=0,this._changedZoom=0,this._hasRested=!0,this._boundaryEnclosesCamera=!1,this._needsUpdate=!0,this._updatedLastTime=!1,this._elementRect=new DOMRect,this._isDragging=!1,this._dragNeedsUpdate=!0,this._activePointers=[],this._lockedPointer=null,this._interactiveArea=new DOMRect(0,0,1,1),this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._isUserControllingOffset=!1,this._isUserControllingZoom=!1,this._lastDollyDirection=Ug.NONE,this._thetaVelocity={value:0},this._phiVelocity={value:0},this._radiusVelocity={value:0},this._targetVelocity=new en.Vector3,this._focalOffsetVelocity=new en.Vector3,this._zoomVelocity={value:0},this._truckInternal=(_,T,A,M)=>{let C,R;if(gp(this._camera)){const L=En.copy(this._camera.position).sub(this._target),I=this._camera.getEffectiveFOV()*Fy,P=L.length()*Math.tan(I*.5);C=this.truckSpeed*_*P/this._elementRect.height,R=this.truckSpeed*T*P/this._elementRect.height}else if(qh(this._camera)){const L=this._camera;C=this.truckSpeed*_*(L.right-L.left)/L.zoom/this._elementRect.width,R=this.truckSpeed*T*(L.top-L.bottom)/L.zoom/this._elementRect.height}else return;M?(A?this.setFocalOffset(this._focalOffsetEnd.x+C,this._focalOffsetEnd.y,this._focalOffsetEnd.z,!0):this.truck(C,0,!0),this.forward(-R,!0)):A?this.setFocalOffset(this._focalOffsetEnd.x+C,this._focalOffsetEnd.y+R,this._focalOffsetEnd.z,!0):this.truck(C,R,!0)},this._rotateInternal=(_,T)=>{const A=Gh*this.azimuthRotateSpeed*_/this._elementRect.height,M=Gh*this.polarRotateSpeed*T/this._elementRect.height;this.rotate(A,M,!0)},this._dollyInternal=(_,T,A)=>{const M=Math.pow(.95,-_*this.dollySpeed),C=this._sphericalEnd.radius,R=this._sphericalEnd.radius*M,L=Ql(R,this.minDistance,this.maxDistance),I=L-R;this.infinityDolly&&this.dollyToCursor?this._dollyToNoClamp(R,!0):this.infinityDolly&&!this.dollyToCursor?(this.dollyInFixed(I,!0),this._dollyToNoClamp(L,!0)):this._dollyToNoClamp(L,!0),this.dollyToCursor&&(this._changedDolly+=(this.infinityDolly?R:L)-C,this._dollyControlCoord.set(T,A)),this._lastDollyDirection=Math.sign(-_)},this._zoomInternal=(_,T,A)=>{const M=Math.pow(.95,_*this.dollySpeed),C=this._zoom,R=this._zoom*M;this.zoomTo(R,!0),this.dollyToCursor&&(this._changedZoom+=R-C,this._dollyControlCoord.set(T,A))},typeof en>"u"&&console.error("camera-controls: `THREE` is undefined. You must first run `CameraControls.install( { THREE: THREE } )`. Check the docs for further information."),this._camera=e,this._yAxisUpSpace=new en.Quaternion().setFromUnitVectors(this._camera.up,PS),this._yAxisUpSpaceInverse=this._yAxisUpSpace.clone().invert(),this._state=je.NONE,this._target=new en.Vector3,this._targetEnd=this._target.clone(),this._focalOffset=new en.Vector3,this._focalOffsetEnd=this._focalOffset.clone(),this._spherical=new en.Spherical().setFromVector3(En.copy(this._camera.position).applyQuaternion(this._yAxisUpSpace)),this._sphericalEnd=this._spherical.clone(),this._lastDistance=this._spherical.radius,this._zoom=this._camera.zoom,this._zoomEnd=this._zoom,this._lastZoom=this._zoom,this._nearPlaneCorners=[new en.Vector3,new en.Vector3,new en.Vector3,new en.Vector3],this._updateNearPlaneCorners(),this._boundary=new en.Box3(new en.Vector3(-1/0,-1/0,-1/0),new en.Vector3(1/0,1/0,1/0)),this._cameraUp0=this._camera.up.clone(),this._target0=this._target.clone(),this._position0=this._camera.position.clone(),this._zoom0=this._zoom,this._focalOffset0=this._focalOffset.clone(),this._dollyControlCoord=new en.Vector2,this.mouseButtons={left:je.ROTATE,middle:je.DOLLY,right:je.TRUCK,wheel:gp(this._camera)?je.DOLLY:qh(this._camera)?je.ZOOM:je.NONE},this.touches={one:je.TOUCH_ROTATE,two:gp(this._camera)?je.TOUCH_DOLLY_TRUCK:qh(this._camera)?je.TOUCH_ZOOM_TRUCK:je.NONE,three:je.TOUCH_TRUCK};const i=new en.Vector2,r=new en.Vector2,s=new en.Vector2,o=_=>{if(!this._enabled||!this._domElement)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const M=this._domElement.getBoundingClientRect(),C=_.clientX/M.width,R=_.clientY/M.height;if(C<this._interactiveArea.left||C>this._interactiveArea.right||R<this._interactiveArea.top||R>this._interactiveArea.bottom)return}const T=_.pointerType!=="mouse"?null:(_.buttons&ir.LEFT)===ir.LEFT?ir.LEFT:(_.buttons&ir.MIDDLE)===ir.MIDDLE?ir.MIDDLE:(_.buttons&ir.RIGHT)===ir.RIGHT?ir.RIGHT:null;if(T!==null){const M=this._findPointerByMouseButton(T);M&&this._disposePointer(M)}if((_.buttons&ir.LEFT)===ir.LEFT&&this._lockedPointer)return;const A={pointerId:_.pointerId,clientX:_.clientX,clientY:_.clientY,deltaX:0,deltaY:0,mouseButton:T};this._activePointers.push(A),this._domElement.ownerDocument.removeEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",l),this._domElement.ownerDocument.addEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",l),this._isDragging=!0,m(_)},a=_=>{_.cancelable&&_.preventDefault();const T=_.pointerId,A=this._lockedPointer||this._findPointerById(T);if(A){if(A.clientX=_.clientX,A.clientY=_.clientY,A.deltaX=_.movementX,A.deltaY=_.movementY,this._state=0,_.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else(!this._isDragging&&this._lockedPointer||this._isDragging&&(_.buttons&ir.LEFT)===ir.LEFT)&&(this._state=this._state|this.mouseButtons.left),this._isDragging&&(_.buttons&ir.MIDDLE)===ir.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),this._isDragging&&(_.buttons&ir.RIGHT)===ir.RIGHT&&(this._state=this._state|this.mouseButtons.right);y()}},l=_=>{const T=this._findPointerById(_.pointerId);if(!(T&&T===this._lockedPointer)){if(T&&this._disposePointer(T),_.pointerType==="touch")switch(this._activePointers.length){case 0:this._state=je.NONE;break;case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else this._state=je.NONE;b()}};let u=-1;const h=_=>{if(!this._domElement||!this._enabled||this.mouseButtons.wheel===je.NONE)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const R=this._domElement.getBoundingClientRect(),L=_.clientX/R.width,I=_.clientY/R.height;if(L<this._interactiveArea.left||L>this._interactiveArea.right||I<this._interactiveArea.top||I>this._interactiveArea.bottom)return}if(_.preventDefault(),this.dollyToCursor||this.mouseButtons.wheel===je.ROTATE||this.mouseButtons.wheel===je.TRUCK){const R=performance.now();u-R<1e3&&this._getClientRect(this._elementRect),u=R}const T=hue?-1:-3,A=_.deltaMode===1||_.ctrlKey?_.deltaY/T:_.deltaY/(T*10),M=this.dollyToCursor?(_.clientX-this._elementRect.x)/this._elementRect.width*2-1:0,C=this.dollyToCursor?(_.clientY-this._elementRect.y)/this._elementRect.height*-2+1:0;switch(this.mouseButtons.wheel){case je.ROTATE:{this._rotateInternal(_.deltaX,_.deltaY),this._isUserControllingRotate=!0;break}case je.TRUCK:{this._truckInternal(_.deltaX,_.deltaY,!1,!1),this._isUserControllingTruck=!0;break}case je.SCREEN_PAN:{this._truckInternal(_.deltaX,_.deltaY,!1,!0),this._isUserControllingTruck=!0;break}case je.OFFSET:{this._truckInternal(_.deltaX,_.deltaY,!0,!1),this._isUserControllingOffset=!0;break}case je.DOLLY:{this._dollyInternal(-A,M,C),this._isUserControllingDolly=!0;break}case je.ZOOM:{this._zoomInternal(-A,M,C),this._isUserControllingZoom=!0;break}}this.dispatchEvent({type:"control"})},p=_=>{if(!(!this._domElement||!this._enabled)){if(this.mouseButtons.right===N3.ACTION.NONE){const T=_ instanceof PointerEvent?_.pointerId:0,A=this._findPointerById(T);A&&this._disposePointer(A),this._domElement.ownerDocument.removeEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",l);return}_.preventDefault()}},m=_=>{if(!this._enabled)return;if(OC(this._activePointers,na),this._getClientRect(this._elementRect),i.copy(na),r.copy(na),this._activePointers.length>=2){const A=na.x-this._activePointers[1].clientX,M=na.y-this._activePointers[1].clientY,C=Math.sqrt(A*A+M*M);s.set(0,C);const R=(this._activePointers[0].clientX+this._activePointers[1].clientX)*.5,L=(this._activePointers[0].clientY+this._activePointers[1].clientY)*.5;r.set(R,L)}if(this._state=0,!_)this._lockedPointer&&(this._state=this._state|this.mouseButtons.left);else if("pointerType"in _&&_.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else!this._lockedPointer&&(_.buttons&ir.LEFT)===ir.LEFT&&(this._state=this._state|this.mouseButtons.left),(_.buttons&ir.MIDDLE)===ir.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),(_.buttons&ir.RIGHT)===ir.RIGHT&&(this._state=this._state|this.mouseButtons.right);((this._state&je.ROTATE)===je.ROTATE||(this._state&je.TOUCH_ROTATE)===je.TOUCH_ROTATE||(this._state&je.TOUCH_DOLLY_ROTATE)===je.TOUCH_DOLLY_ROTATE||(this._state&je.TOUCH_ZOOM_ROTATE)===je.TOUCH_ZOOM_ROTATE)&&(this._sphericalEnd.theta=this._spherical.theta,this._sphericalEnd.phi=this._spherical.phi,this._thetaVelocity.value=0,this._phiVelocity.value=0),((this._state&je.TRUCK)===je.TRUCK||(this._state&je.SCREEN_PAN)===je.SCREEN_PAN||(this._state&je.TOUCH_TRUCK)===je.TOUCH_TRUCK||(this._state&je.TOUCH_SCREEN_PAN)===je.TOUCH_SCREEN_PAN||(this._state&je.TOUCH_DOLLY_TRUCK)===je.TOUCH_DOLLY_TRUCK||(this._state&je.TOUCH_DOLLY_SCREEN_PAN)===je.TOUCH_DOLLY_SCREEN_PAN||(this._state&je.TOUCH_ZOOM_TRUCK)===je.TOUCH_ZOOM_TRUCK||(this._state&je.TOUCH_ZOOM_SCREEN_PAN)===je.TOUCH_DOLLY_SCREEN_PAN)&&(this._targetEnd.copy(this._target),this._targetVelocity.set(0,0,0)),((this._state&je.DOLLY)===je.DOLLY||(this._state&je.TOUCH_DOLLY)===je.TOUCH_DOLLY||(this._state&je.TOUCH_DOLLY_TRUCK)===je.TOUCH_DOLLY_TRUCK||(this._state&je.TOUCH_DOLLY_SCREEN_PAN)===je.TOUCH_DOLLY_SCREEN_PAN||(this._state&je.TOUCH_DOLLY_OFFSET)===je.TOUCH_DOLLY_OFFSET||(this._state&je.TOUCH_DOLLY_ROTATE)===je.TOUCH_DOLLY_ROTATE)&&(this._sphericalEnd.radius=this._spherical.radius,this._radiusVelocity.value=0),((this._state&je.ZOOM)===je.ZOOM||(this._state&je.TOUCH_ZOOM)===je.TOUCH_ZOOM||(this._state&je.TOUCH_ZOOM_TRUCK)===je.TOUCH_ZOOM_TRUCK||(this._state&je.TOUCH_ZOOM_SCREEN_PAN)===je.TOUCH_ZOOM_SCREEN_PAN||(this._state&je.TOUCH_ZOOM_OFFSET)===je.TOUCH_ZOOM_OFFSET||(this._state&je.TOUCH_ZOOM_ROTATE)===je.TOUCH_ZOOM_ROTATE)&&(this._zoomEnd=this._zoom,this._zoomVelocity.value=0),((this._state&je.OFFSET)===je.OFFSET||(this._state&je.TOUCH_OFFSET)===je.TOUCH_OFFSET||(this._state&je.TOUCH_DOLLY_OFFSET)===je.TOUCH_DOLLY_OFFSET||(this._state&je.TOUCH_ZOOM_OFFSET)===je.TOUCH_ZOOM_OFFSET)&&(this._focalOffsetEnd.copy(this._focalOffset),this._focalOffsetVelocity.set(0,0,0)),this.dispatchEvent({type:"controlstart"})},y=()=>{if(!this._enabled||!this._dragNeedsUpdate)return;this._dragNeedsUpdate=!1,OC(this._activePointers,na);const T=this._domElement&&this._domElement.ownerDocument.pointerLockElement===this._domElement?this._lockedPointer||this._activePointers[0]:null,A=T?-T.deltaX:r.x-na.x,M=T?-T.deltaY:r.y-na.y;if(r.copy(na),((this._state&je.ROTATE)===je.ROTATE||(this._state&je.TOUCH_ROTATE)===je.TOUCH_ROTATE||(this._state&je.TOUCH_DOLLY_ROTATE)===je.TOUCH_DOLLY_ROTATE||(this._state&je.TOUCH_ZOOM_ROTATE)===je.TOUCH_ZOOM_ROTATE)&&(this._rotateInternal(A,M),this._isUserControllingRotate=!0),(this._state&je.DOLLY)===je.DOLLY||(this._state&je.ZOOM)===je.ZOOM){const C=this.dollyToCursor?(i.x-this._elementRect.x)/this._elementRect.width*2-1:0,R=this.dollyToCursor?(i.y-this._elementRect.y)/this._elementRect.height*-2+1:0,L=this.dollyDragInverted?-1:1;(this._state&je.DOLLY)===je.DOLLY?(this._dollyInternal(L*M*LS,C,R),this._isUserControllingDolly=!0):(this._zoomInternal(L*M*LS,C,R),this._isUserControllingZoom=!0)}if((this._state&je.TOUCH_DOLLY)===je.TOUCH_DOLLY||(this._state&je.TOUCH_ZOOM)===je.TOUCH_ZOOM||(this._state&je.TOUCH_DOLLY_TRUCK)===je.TOUCH_DOLLY_TRUCK||(this._state&je.TOUCH_ZOOM_TRUCK)===je.TOUCH_ZOOM_TRUCK||(this._state&je.TOUCH_DOLLY_SCREEN_PAN)===je.TOUCH_DOLLY_SCREEN_PAN||(this._state&je.TOUCH_ZOOM_SCREEN_PAN)===je.TOUCH_ZOOM_SCREEN_PAN||(this._state&je.TOUCH_DOLLY_OFFSET)===je.TOUCH_DOLLY_OFFSET||(this._state&je.TOUCH_ZOOM_OFFSET)===je.TOUCH_ZOOM_OFFSET||(this._state&je.TOUCH_DOLLY_ROTATE)===je.TOUCH_DOLLY_ROTATE||(this._state&je.TOUCH_ZOOM_ROTATE)===je.TOUCH_ZOOM_ROTATE){const C=na.x-this._activePointers[1].clientX,R=na.y-this._activePointers[1].clientY,L=Math.sqrt(C*C+R*R),I=s.y-L;s.set(0,L);const P=this.dollyToCursor?(r.x-this._elementRect.x)/this._elementRect.width*2-1:0,U=this.dollyToCursor?(r.y-this._elementRect.y)/this._elementRect.height*-2+1:0;(this._state&je.TOUCH_DOLLY)===je.TOUCH_DOLLY||(this._state&je.TOUCH_DOLLY_ROTATE)===je.TOUCH_DOLLY_ROTATE||(this._state&je.TOUCH_DOLLY_TRUCK)===je.TOUCH_DOLLY_TRUCK||(this._state&je.TOUCH_DOLLY_SCREEN_PAN)===je.TOUCH_DOLLY_SCREEN_PAN||(this._state&je.TOUCH_DOLLY_OFFSET)===je.TOUCH_DOLLY_OFFSET?(this._dollyInternal(I*LS,P,U),this._isUserControllingDolly=!0):(this._zoomInternal(I*LS,P,U),this._isUserControllingZoom=!0)}((this._state&je.TRUCK)===je.TRUCK||(this._state&je.TOUCH_TRUCK)===je.TOUCH_TRUCK||(this._state&je.TOUCH_DOLLY_TRUCK)===je.TOUCH_DOLLY_TRUCK||(this._state&je.TOUCH_ZOOM_TRUCK)===je.TOUCH_ZOOM_TRUCK)&&(this._truckInternal(A,M,!1,!1),this._isUserControllingTruck=!0),((this._state&je.SCREEN_PAN)===je.SCREEN_PAN||(this._state&je.TOUCH_SCREEN_PAN)===je.TOUCH_SCREEN_PAN||(this._state&je.TOUCH_DOLLY_SCREEN_PAN)===je.TOUCH_DOLLY_SCREEN_PAN||(this._state&je.TOUCH_ZOOM_SCREEN_PAN)===je.TOUCH_ZOOM_SCREEN_PAN)&&(this._truckInternal(A,M,!1,!0),this._isUserControllingTruck=!0),((this._state&je.OFFSET)===je.OFFSET||(this._state&je.TOUCH_OFFSET)===je.TOUCH_OFFSET||(this._state&je.TOUCH_DOLLY_OFFSET)===je.TOUCH_DOLLY_OFFSET||(this._state&je.TOUCH_ZOOM_OFFSET)===je.TOUCH_ZOOM_OFFSET)&&(this._truckInternal(A,M,!0,!1),this._isUserControllingOffset=!0),this.dispatchEvent({type:"control"})},b=()=>{OC(this._activePointers,na),r.copy(na),this._dragNeedsUpdate=!1,(this._activePointers.length===0||this._activePointers.length===1&&this._activePointers[0]===this._lockedPointer)&&(this._isDragging=!1),this._activePointers.length===0&&this._domElement&&(this._domElement.ownerDocument.removeEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",l),this.dispatchEvent({type:"controlend"}))};this.lockPointer=()=>{!this._enabled||!this._domElement||(this.cancel(),this._lockedPointer={pointerId:-1,clientX:0,clientY:0,deltaX:0,deltaY:0,mouseButton:null},this._activePointers.push(this._lockedPointer),this._domElement.ownerDocument.removeEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",l),this._domElement.requestPointerLock(),this._domElement.ownerDocument.addEventListener("pointerlockchange",x),this._domElement.ownerDocument.addEventListener("pointerlockerror",S),this._domElement.ownerDocument.addEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",l),m())},this.unlockPointer=()=>{var _,T,A;this._lockedPointer!==null&&(this._disposePointer(this._lockedPointer),this._lockedPointer=null),(_=this._domElement)===null||_===void 0||_.ownerDocument.exitPointerLock(),(T=this._domElement)===null||T===void 0||T.ownerDocument.removeEventListener("pointerlockchange",x),(A=this._domElement)===null||A===void 0||A.ownerDocument.removeEventListener("pointerlockerror",S),this.cancel()};const x=()=>{this._domElement&&this._domElement.ownerDocument.pointerLockElement===this._domElement||this.unlockPointer()},S=()=>{this.unlockPointer()};this._addAllEventListeners=_=>{this._domElement=_,this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none",this._domElement.addEventListener("pointerdown",o),this._domElement.addEventListener("pointercancel",l),this._domElement.addEventListener("wheel",h,{passive:!1}),this._domElement.addEventListener("contextmenu",p)},this._removeAllEventListeners=()=>{this._domElement&&(this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect="",this._domElement.removeEventListener("pointerdown",o),this._domElement.removeEventListener("pointercancel",l),this._domElement.removeEventListener("wheel",h,{passive:!1}),this._domElement.removeEventListener("contextmenu",p),this._domElement.ownerDocument.removeEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",l),this._domElement.ownerDocument.removeEventListener("pointerlockchange",x),this._domElement.ownerDocument.removeEventListener("pointerlockerror",S))},this.cancel=()=>{this._state!==je.NONE&&(this._state=je.NONE,this._activePointers.length=0,b())},t&&this.connect(t),this.update(0)}get camera(){return this._camera}set camera(e){this._camera=e,this.updateCameraUp(),this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._domElement&&(e?(this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none"):(this.cancel(),this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect=""))}get active(){return!this._hasRested}get currentAction(){return this._state}get distance(){return this._spherical.radius}set distance(e){this._spherical.radius===e&&this._sphericalEnd.radius===e||(this._spherical.radius=e,this._sphericalEnd.radius=e,this._needsUpdate=!0)}get azimuthAngle(){return this._spherical.theta}set azimuthAngle(e){this._spherical.theta===e&&this._sphericalEnd.theta===e||(this._spherical.theta=e,this._sphericalEnd.theta=e,this._needsUpdate=!0)}get polarAngle(){return this._spherical.phi}set polarAngle(e){this._spherical.phi===e&&this._sphericalEnd.phi===e||(this._spherical.phi=e,this._sphericalEnd.phi=e,this._needsUpdate=!0)}get boundaryEnclosesCamera(){return this._boundaryEnclosesCamera}set boundaryEnclosesCamera(e){this._boundaryEnclosesCamera=e,this._needsUpdate=!0}set interactiveArea(e){this._interactiveArea.width=Ql(e.width,0,1),this._interactiveArea.height=Ql(e.height,0,1),this._interactiveArea.x=Ql(e.x,0,1-this._interactiveArea.width),this._interactiveArea.y=Ql(e.y,0,1-this._interactiveArea.height)}addEventListener(e,t){super.addEventListener(e,t)}removeEventListener(e,t){super.removeEventListener(e,t)}rotate(e,t,i=!1){return this.rotateTo(this._sphericalEnd.theta+e,this._sphericalEnd.phi+t,i)}rotateAzimuthTo(e,t=!1){return this.rotateTo(e,this._sphericalEnd.phi,t)}rotatePolarTo(e,t=!1){return this.rotateTo(this._sphericalEnd.theta,e,t)}rotateTo(e,t,i=!1){this._isUserControllingRotate=!1;const r=Ql(e,this.minAzimuthAngle,this.maxAzimuthAngle),s=Ql(t,this.minPolarAngle,this.maxPolarAngle);this._sphericalEnd.theta=r,this._sphericalEnd.phi=s,this._sphericalEnd.makeSafe(),this._needsUpdate=!0,i||(this._spherical.theta=this._sphericalEnd.theta,this._spherical.phi=this._sphericalEnd.phi);const o=!i||ui(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&ui(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold);return this._createOnRestPromise(o)}dolly(e,t=!1){return this.dollyTo(this._sphericalEnd.radius-e,t)}dollyTo(e,t=!1){return this._isUserControllingDolly=!1,this._lastDollyDirection=Ug.NONE,this._changedDolly=0,this._dollyToNoClamp(Ql(e,this.minDistance,this.maxDistance),t)}_dollyToNoClamp(e,t=!1){const i=this._sphericalEnd.radius;if(this.colliderMeshes.length>=1){const o=this._collisionTest(),a=ui(o,this._spherical.radius);if(!(i>e)&&a)return Promise.resolve();this._sphericalEnd.radius=Math.min(e,o)}else this._sphericalEnd.radius=e;this._needsUpdate=!0,t||(this._spherical.radius=this._sphericalEnd.radius);const s=!t||ui(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(s)}dollyInFixed(e,t=!1){this._targetEnd.add(this._getCameraDirection(Gy).multiplyScalar(e)),t||this._target.copy(this._targetEnd);const i=!t||ui(this._target.x,this._targetEnd.x,this.restThreshold)&&ui(this._target.y,this._targetEnd.y,this.restThreshold)&&ui(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(i)}zoom(e,t=!1){return this.zoomTo(this._zoomEnd+e,t)}zoomTo(e,t=!1){this._isUserControllingZoom=!1,this._zoomEnd=Ql(e,this.minZoom,this.maxZoom),this._needsUpdate=!0,t||(this._zoom=this._zoomEnd);const i=!t||ui(this._zoom,this._zoomEnd,this.restThreshold);return this._changedZoom=0,this._createOnRestPromise(i)}pan(e,t,i=!1){return console.warn("`pan` has been renamed to `truck`"),this.truck(e,t,i)}truck(e,t,i=!1){this._camera.updateMatrix(),$c.setFromMatrixColumn(this._camera.matrix,0),Zc.setFromMatrixColumn(this._camera.matrix,1),$c.multiplyScalar(e),Zc.multiplyScalar(-t);const r=En.copy($c).add(Zc),s=ni.copy(this._targetEnd).add(r);return this.moveTo(s.x,s.y,s.z,i)}forward(e,t=!1){En.setFromMatrixColumn(this._camera.matrix,0),En.crossVectors(this._camera.up,En),En.multiplyScalar(e);const i=ni.copy(this._targetEnd).add(En);return this.moveTo(i.x,i.y,i.z,t)}elevate(e,t=!1){return En.copy(this._camera.up).multiplyScalar(e),this.moveTo(this._targetEnd.x+En.x,this._targetEnd.y+En.y,this._targetEnd.z+En.z,t)}moveTo(e,t,i,r=!1){this._isUserControllingTruck=!1;const s=En.set(e,t,i).sub(this._targetEnd);this._encloseToBoundary(this._targetEnd,s,this.boundaryFriction),this._needsUpdate=!0,r||this._target.copy(this._targetEnd);const o=!r||ui(this._target.x,this._targetEnd.x,this.restThreshold)&&ui(this._target.y,this._targetEnd.y,this.restThreshold)&&ui(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(o)}lookInDirectionOf(e,t,i,r=!1){const a=En.set(e,t,i).sub(this._targetEnd).normalize().multiplyScalar(-this._sphericalEnd.radius).add(this._targetEnd);return this.setPosition(a.x,a.y,a.z,r)}fitToBox(e,t,{cover:i=!1,paddingLeft:r=0,paddingRight:s=0,paddingBottom:o=0,paddingTop:a=0}={}){const l=[],u=e.isBox3?Fg.copy(e):Fg.setFromObject(e);u.isEmpty()&&(console.warn("camera-controls: fitTo() cannot be used with an empty box. Aborting"),Promise.resolve());const h=Jk(this._sphericalEnd.theta,Qk),p=Jk(this._sphericalEnd.phi,Qk);l.push(this.rotateTo(h,p,t));const m=En.setFromSpherical(this._sphericalEnd).normalize(),y=s2.setFromUnitVectors(m,IC),b=ui(Math.abs(m.y),1);b&&y.multiply(UC.setFromAxisAngle(PS,h)),y.multiply(this._yAxisUpSpaceInverse);const x=r2.makeEmpty();ni.copy(u.min).applyQuaternion(y),x.expandByPoint(ni),ni.copy(u.min).setX(u.max.x).applyQuaternion(y),x.expandByPoint(ni),ni.copy(u.min).setY(u.max.y).applyQuaternion(y),x.expandByPoint(ni),ni.copy(u.max).setZ(u.min.z).applyQuaternion(y),x.expandByPoint(ni),ni.copy(u.min).setZ(u.max.z).applyQuaternion(y),x.expandByPoint(ni),ni.copy(u.max).setY(u.min.y).applyQuaternion(y),x.expandByPoint(ni),ni.copy(u.max).setX(u.min.x).applyQuaternion(y),x.expandByPoint(ni),ni.copy(u.max).applyQuaternion(y),x.expandByPoint(ni),x.min.x-=r,x.min.y-=o,x.max.x+=s,x.max.y+=a,y.setFromUnitVectors(IC,m),b&&y.premultiply(UC.invert()),y.premultiply(this._yAxisUpSpace);const S=x.getSize(En),_=x.getCenter(ni).applyQuaternion(y);if(gp(this._camera)){const T=this.getDistanceToFitBox(S.x,S.y,S.z,i);l.push(this.moveTo(_.x,_.y,_.z,t)),l.push(this.dollyTo(T,t)),l.push(this.setFocalOffset(0,0,0,t))}else if(qh(this._camera)){const T=this._camera,A=T.right-T.left,M=T.top-T.bottom,C=i?Math.max(A/S.x,M/S.y):Math.min(A/S.x,M/S.y);l.push(this.moveTo(_.x,_.y,_.z,t)),l.push(this.zoomTo(C,t)),l.push(this.setFocalOffset(0,0,0,t))}return Promise.all(l)}fitToSphere(e,t){const i=[],s="isObject3D"in e?N3.createBoundingSphere(e,NC):NC.copy(e);if(i.push(this.moveTo(s.center.x,s.center.y,s.center.z,t)),gp(this._camera)){const o=this.getDistanceToFitSphere(s.radius);i.push(this.dollyTo(o,t))}else if(qh(this._camera)){const o=this._camera.right-this._camera.left,a=this._camera.top-this._camera.bottom,l=2*s.radius,u=Math.min(o/l,a/l);i.push(this.zoomTo(u,t))}return i.push(this.setFocalOffset(0,0,0,t)),Promise.all(i)}setLookAt(e,t,i,r,s,o,a=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=Ug.NONE,this._changedDolly=0;const l=ni.set(r,s,o),u=En.set(e,t,i);this._targetEnd.copy(l),this._sphericalEnd.setFromVector3(u.sub(l).applyQuaternion(this._yAxisUpSpace)),this._needsUpdate=!0,a||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const h=!a||ui(this._target.x,this._targetEnd.x,this.restThreshold)&&ui(this._target.y,this._targetEnd.y,this.restThreshold)&&ui(this._target.z,this._targetEnd.z,this.restThreshold)&&ui(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&ui(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&ui(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(h)}lerp(e,t,i,r=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=Ug.NONE,this._changedDolly=0;const s=En.set(...e.target);if("spherical"in e)wa.set(...e.spherical);else{const p=ni.set(...e.position);wa.setFromVector3(p.sub(s).applyQuaternion(this._yAxisUpSpace))}const o=kg.set(...t.target);if("spherical"in t)zg.set(...t.spherical);else{const p=ni.set(...t.position);zg.setFromVector3(p.sub(o).applyQuaternion(this._yAxisUpSpace))}this._targetEnd.copy(s.lerp(o,i));const a=zg.theta-wa.theta,l=zg.phi-wa.phi,u=zg.radius-wa.radius;this._sphericalEnd.set(wa.radius+u*i,wa.phi+l*i,wa.theta+a*i),this._needsUpdate=!0,r||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const h=!r||ui(this._target.x,this._targetEnd.x,this.restThreshold)&&ui(this._target.y,this._targetEnd.y,this.restThreshold)&&ui(this._target.z,this._targetEnd.z,this.restThreshold)&&ui(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&ui(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&ui(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(h)}lerpLookAt(e,t,i,r,s,o,a,l,u,h,p,m,y,b=!1){return this.lerp({position:[e,t,i],target:[r,s,o]},{position:[a,l,u],target:[h,p,m]},y,b)}setPosition(e,t,i,r=!1){return this.setLookAt(e,t,i,this._targetEnd.x,this._targetEnd.y,this._targetEnd.z,r)}setTarget(e,t,i,r=!1){const s=this.getPosition(En),o=this.setLookAt(s.x,s.y,s.z,e,t,i,r);return this._sphericalEnd.phi=Ql(this._sphericalEnd.phi,this.minPolarAngle,this.maxPolarAngle),o}setFocalOffset(e,t,i,r=!1){this._isUserControllingOffset=!1,this._focalOffsetEnd.set(e,t,i),this._needsUpdate=!0,r||this._focalOffset.copy(this._focalOffsetEnd);const s=!r||ui(this._focalOffset.x,this._focalOffsetEnd.x,this.restThreshold)&&ui(this._focalOffset.y,this._focalOffsetEnd.y,this.restThreshold)&&ui(this._focalOffset.z,this._focalOffsetEnd.z,this.restThreshold);return this._createOnRestPromise(s)}setOrbitPoint(e,t,i){this._camera.updateMatrixWorld(),$c.setFromMatrixColumn(this._camera.matrixWorldInverse,0),Zc.setFromMatrixColumn(this._camera.matrixWorldInverse,1),vp.setFromMatrixColumn(this._camera.matrixWorldInverse,2);const r=En.set(e,t,i),s=r.distanceTo(this._camera.position),o=r.sub(this._camera.position);$c.multiplyScalar(o.x),Zc.multiplyScalar(o.y),vp.multiplyScalar(o.z),En.copy($c).add(Zc).add(vp),En.z=En.z+s,this.dollyTo(s,!1),this.setFocalOffset(-En.x,En.y,-En.z,!1),this.moveTo(e,t,i,!1)}setBoundary(e){if(!e){this._boundary.min.set(-1/0,-1/0,-1/0),this._boundary.max.set(1/0,1/0,1/0),this._needsUpdate=!0;return}this._boundary.copy(e),this._boundary.clampPoint(this._targetEnd,this._targetEnd),this._needsUpdate=!0}setViewport(e,t,i,r){if(e===null){this._viewport=null;return}this._viewport=this._viewport||new en.Vector4,typeof e=="number"?this._viewport.set(e,t,i,r):this._viewport.copy(e)}getDistanceToFitBox(e,t,i,r=!1){if(LC(this._camera,"getDistanceToFitBox"))return this._spherical.radius;const s=e/t,o=this._camera.getEffectiveFOV()*Fy,a=this._camera.aspect;return((r?s>a:s<a)?t:e/a)*.5/Math.tan(o*.5)+i*.5}getDistanceToFitSphere(e){if(LC(this._camera,"getDistanceToFitSphere"))return this._spherical.radius;const t=this._camera.getEffectiveFOV()*Fy,i=Math.atan(Math.tan(t*.5)*this._camera.aspect)*2,r=1<this._camera.aspect?t:i;return e/Math.sin(r*.5)}getTarget(e,t=!0){return(e&&e.isVector3?e:new en.Vector3).copy(t?this._targetEnd:this._target)}getPosition(e,t=!0){return(e&&e.isVector3?e:new en.Vector3).setFromSpherical(t?this._sphericalEnd:this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(t?this._targetEnd:this._target)}getSpherical(e,t=!0){return(e||new en.Spherical).copy(t?this._sphericalEnd:this._spherical)}getFocalOffset(e,t=!0){return(e&&e.isVector3?e:new en.Vector3).copy(t?this._focalOffsetEnd:this._focalOffset)}normalizeRotations(){return this._sphericalEnd.theta=(this._sphericalEnd.theta%Gh+Gh)%Gh,this._sphericalEnd.theta>Math.PI&&(this._sphericalEnd.theta-=Gh),this._spherical.theta+=Gh*Math.round((this._sphericalEnd.theta-this._spherical.theta)/Gh),this}stop(){this._focalOffset.copy(this._focalOffsetEnd),this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd),this._zoom=this._zoomEnd}reset(e=!1){if(!ui(this._camera.up.x,this._cameraUp0.x)||!ui(this._camera.up.y,this._cameraUp0.y)||!ui(this._camera.up.z,this._cameraUp0.z)){this._camera.up.copy(this._cameraUp0);const i=this.getPosition(En);this.updateCameraUp(),this.setPosition(i.x,i.y,i.z)}const t=[this.setLookAt(this._position0.x,this._position0.y,this._position0.z,this._target0.x,this._target0.y,this._target0.z,e),this.setFocalOffset(this._focalOffset0.x,this._focalOffset0.y,this._focalOffset0.z,e),this.zoomTo(this._zoom0,e)];return Promise.all(t)}saveState(){this._cameraUp0.copy(this._camera.up),this.getTarget(this._target0),this.getPosition(this._position0),this._zoom0=this._zoom,this._focalOffset0.copy(this._focalOffset)}updateCameraUp(){this._yAxisUpSpace.setFromUnitVectors(this._camera.up,PS),this._yAxisUpSpaceInverse.copy(this._yAxisUpSpace).invert()}applyCameraUp(){const e=En.subVectors(this._target,this._camera.position).normalize(),t=ni.crossVectors(e,this._camera.up);this._camera.up.crossVectors(t,e).normalize(),this._camera.updateMatrixWorld();const i=this.getPosition(En);this.updateCameraUp(),this.setPosition(i.x,i.y,i.z)}update(e){const t=this._sphericalEnd.theta-this._spherical.theta,i=this._sphericalEnd.phi-this._spherical.phi,r=this._sphericalEnd.radius-this._spherical.radius,s=n2.subVectors(this._targetEnd,this._target),o=i2.subVectors(this._focalOffsetEnd,this._focalOffset),a=this._zoomEnd-this._zoom;if(Li(t))this._thetaVelocity.value=0,this._spherical.theta=this._sphericalEnd.theta;else{const p=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.theta=OS(this._spherical.theta,this._sphericalEnd.theta,this._thetaVelocity,p,1/0,e),this._needsUpdate=!0}if(Li(i))this._phiVelocity.value=0,this._spherical.phi=this._sphericalEnd.phi;else{const p=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.phi=OS(this._spherical.phi,this._sphericalEnd.phi,this._phiVelocity,p,1/0,e),this._needsUpdate=!0}if(Li(r))this._radiusVelocity.value=0,this._spherical.radius=this._sphericalEnd.radius;else{const p=this._isUserControllingDolly?this.draggingSmoothTime:this.smoothTime;this._spherical.radius=OS(this._spherical.radius,this._sphericalEnd.radius,this._radiusVelocity,p,this.maxSpeed,e),this._needsUpdate=!0}if(Li(s.x)&&Li(s.y)&&Li(s.z))this._targetVelocity.set(0,0,0),this._target.copy(this._targetEnd);else{const p=this._isUserControllingTruck?this.draggingSmoothTime:this.smoothTime;e2(this._target,this._targetEnd,this._targetVelocity,p,this.maxSpeed,e,this._target),this._needsUpdate=!0}if(Li(o.x)&&Li(o.y)&&Li(o.z))this._focalOffsetVelocity.set(0,0,0),this._focalOffset.copy(this._focalOffsetEnd);else{const p=this._isUserControllingOffset?this.draggingSmoothTime:this.smoothTime;e2(this._focalOffset,this._focalOffsetEnd,this._focalOffsetVelocity,p,this.maxSpeed,e,this._focalOffset),this._needsUpdate=!0}if(Li(a))this._zoomVelocity.value=0,this._zoom=this._zoomEnd;else{const p=this._isUserControllingZoom?this.draggingSmoothTime:this.smoothTime;this._zoom=OS(this._zoom,this._zoomEnd,this._zoomVelocity,p,1/0,e)}if(this.dollyToCursor){if(gp(this._camera)&&this._changedDolly!==0){const p=this._spherical.radius-this._lastDistance,m=this._camera,y=this._getCameraDirection(Gy),b=En.copy(y).cross(m.up).normalize();b.lengthSq()===0&&(b.x=1);const x=ni.crossVectors(b,y),S=this._sphericalEnd.radius*Math.tan(m.getEffectiveFOV()*Fy*.5),T=(this._sphericalEnd.radius-p-this._sphericalEnd.radius)/this._sphericalEnd.radius,A=kg.copy(this._targetEnd).add(b.multiplyScalar(this._dollyControlCoord.x*S*m.aspect)).add(x.multiplyScalar(this._dollyControlCoord.y*S)),M=En.copy(this._targetEnd).lerp(A,T),C=this._lastDollyDirection===Ug.IN&&this._spherical.radius<=this.minDistance,R=this._lastDollyDirection===Ug.OUT&&this.maxDistance<=this._spherical.radius;if(this.infinityDolly&&(C||R)){this._sphericalEnd.radius-=p,this._spherical.radius-=p;const I=ni.copy(y).multiplyScalar(-p);M.add(I)}this._boundary.clampPoint(M,M);const L=ni.subVectors(M,this._targetEnd);this._targetEnd.copy(M),this._target.add(L),this._changedDolly-=p,Li(this._changedDolly)&&(this._changedDolly=0)}else if(qh(this._camera)&&this._changedZoom!==0){const p=this._zoom-this._lastZoom,m=this._camera,y=En.set(this._dollyControlCoord.x,this._dollyControlCoord.y,(m.near+m.far)/(m.near-m.far)).unproject(m),b=ni.set(0,0,-1).applyQuaternion(m.quaternion),x=kg.copy(y).add(b.multiplyScalar(-y.dot(m.up))),_=-(this._zoom-p-this._zoom)/this._zoom,T=this._getCameraDirection(Gy),A=this._targetEnd.dot(T),M=En.copy(this._targetEnd).lerp(x,_),C=M.dot(T),R=T.multiplyScalar(C-A);M.sub(R),this._boundary.clampPoint(M,M);const L=ni.subVectors(M,this._targetEnd);this._targetEnd.copy(M),this._target.add(L),this._changedZoom-=p,Li(this._changedZoom)&&(this._changedZoom=0)}}this._camera.zoom!==this._zoom&&(this._camera.zoom=this._zoom,this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0),this._dragNeedsUpdate=!0;const l=this._collisionTest();this._spherical.radius=Math.min(this._spherical.radius,l),this._spherical.makeSafe(),this._camera.position.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(this._target),this._camera.lookAt(this._target),(!Li(this._focalOffset.x)||!Li(this._focalOffset.y)||!Li(this._focalOffset.z))&&($c.setFromMatrixColumn(this._camera.matrix,0),Zc.setFromMatrixColumn(this._camera.matrix,1),vp.setFromMatrixColumn(this._camera.matrix,2),$c.multiplyScalar(this._focalOffset.x),Zc.multiplyScalar(-this._focalOffset.y),vp.multiplyScalar(this._focalOffset.z),En.copy($c).add(Zc).add(vp),this._camera.position.add(En),this._camera.updateMatrixWorld()),this._boundaryEnclosesCamera&&this._encloseToBoundary(this._camera.position.copy(this._target),En.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse),1);const h=this._needsUpdate;return h&&!this._updatedLastTime?(this._hasRested=!1,this.dispatchEvent({type:"wake"}),this.dispatchEvent({type:"update"})):h?(this.dispatchEvent({type:"update"}),Li(t,this.restThreshold)&&Li(i,this.restThreshold)&&Li(r,this.restThreshold)&&Li(s.x,this.restThreshold)&&Li(s.y,this.restThreshold)&&Li(s.z,this.restThreshold)&&Li(o.x,this.restThreshold)&&Li(o.y,this.restThreshold)&&Li(o.z,this.restThreshold)&&Li(a,this.restThreshold)&&!this._hasRested&&(this._hasRested=!0,this.dispatchEvent({type:"rest"}))):!h&&this._updatedLastTime&&this.dispatchEvent({type:"sleep"}),this._lastDistance=this._spherical.radius,this._lastZoom=this._zoom,this._updatedLastTime=h,this._needsUpdate=!1,h}toJSON(){return JSON.stringify({enabled:this._enabled,minDistance:this.minDistance,maxDistance:By(this.maxDistance),minZoom:this.minZoom,maxZoom:By(this.maxZoom),minPolarAngle:this.minPolarAngle,maxPolarAngle:By(this.maxPolarAngle),minAzimuthAngle:By(this.minAzimuthAngle),maxAzimuthAngle:By(this.maxAzimuthAngle),smoothTime:this.smoothTime,draggingSmoothTime:this.draggingSmoothTime,dollySpeed:this.dollySpeed,truckSpeed:this.truckSpeed,dollyToCursor:this.dollyToCursor,target:this._targetEnd.toArray(),position:En.setFromSpherical(this._sphericalEnd).add(this._targetEnd).toArray(),zoom:this._zoomEnd,focalOffset:this._focalOffsetEnd.toArray(),target0:this._target0.toArray(),position0:this._position0.toArray(),zoom0:this._zoom0,focalOffset0:this._focalOffset0.toArray()})}fromJSON(e,t=!1){const i=JSON.parse(e);this.enabled=i.enabled,this.minDistance=i.minDistance,this.maxDistance=Vy(i.maxDistance),this.minZoom=i.minZoom,this.maxZoom=Vy(i.maxZoom),this.minPolarAngle=i.minPolarAngle,this.maxPolarAngle=Vy(i.maxPolarAngle),this.minAzimuthAngle=Vy(i.minAzimuthAngle),this.maxAzimuthAngle=Vy(i.maxAzimuthAngle),this.smoothTime=i.smoothTime,this.draggingSmoothTime=i.draggingSmoothTime,this.dollySpeed=i.dollySpeed,this.truckSpeed=i.truckSpeed,this.dollyToCursor=i.dollyToCursor,this._target0.fromArray(i.target0),this._position0.fromArray(i.position0),this._zoom0=i.zoom0,this._focalOffset0.fromArray(i.focalOffset0),this.moveTo(i.target[0],i.target[1],i.target[2],t),wa.setFromVector3(En.fromArray(i.position).sub(this._targetEnd).applyQuaternion(this._yAxisUpSpace)),this.rotateTo(wa.theta,wa.phi,t),this.dollyTo(wa.radius,t),this.zoomTo(i.zoom,t),this.setFocalOffset(i.focalOffset[0],i.focalOffset[1],i.focalOffset[2],t),this._needsUpdate=!0}connect(e){if(this._domElement){console.warn("camera-controls is already connected.");return}e.setAttribute("data-camera-controls-version",fue),this._addAllEventListeners(e),this._getClientRect(this._elementRect)}disconnect(){this.cancel(),this._removeAllEventListeners(),this._domElement&&(this._domElement.removeAttribute("data-camera-controls-version"),this._domElement=void 0)}dispose(){this.removeAllEventListeners(),this.disconnect()}_getTargetDirection(e){return e.setFromSpherical(this._spherical).divideScalar(this._spherical.radius).applyQuaternion(this._yAxisUpSpaceInverse)}_getCameraDirection(e){return this._getTargetDirection(e).negate()}_findPointerById(e){return this._activePointers.find(t=>t.pointerId===e)}_findPointerByMouseButton(e){return this._activePointers.find(t=>t.mouseButton===e)}_disposePointer(e){this._activePointers.splice(this._activePointers.indexOf(e),1)}_encloseToBoundary(e,t,i){const r=t.lengthSq();if(r===0)return e;const s=ni.copy(t).add(e),a=this._boundary.clampPoint(s,kg).sub(s),l=a.lengthSq();if(l===0)return e.add(t);if(l===r)return e;if(i===0)return e.add(t).add(a);{const u=1+i*l/t.dot(a);return e.add(ni.copy(t).multiplyScalar(u)).add(a.multiplyScalar(1-i))}}_updateNearPlaneCorners(){if(gp(this._camera)){const e=this._camera,t=e.near,i=e.getEffectiveFOV()*Fy,r=Math.tan(i*.5)*t,s=r*e.aspect;this._nearPlaneCorners[0].set(-s,-r,0),this._nearPlaneCorners[1].set(s,-r,0),this._nearPlaneCorners[2].set(s,r,0),this._nearPlaneCorners[3].set(-s,r,0)}else if(qh(this._camera)){const e=this._camera,t=1/e.zoom,i=e.left*t,r=e.right*t,s=e.top*t,o=e.bottom*t;this._nearPlaneCorners[0].set(i,s,0),this._nearPlaneCorners[1].set(r,s,0),this._nearPlaneCorners[2].set(r,o,0),this._nearPlaneCorners[3].set(i,o,0)}}_collisionTest(){let e=1/0;if(!(this.colliderMeshes.length>=1)||LC(this._camera,"_collisionTest"))return e;const i=this._getTargetDirection(Gy);kC.lookAt(t2,i,this._camera.up);for(let r=0;r<4;r++){const s=ni.copy(this._nearPlaneCorners[r]);s.applyMatrix4(kC);const o=kg.addVectors(this._target,s);IS.set(o,i),IS.far=this._spherical.radius+1;const a=IS.intersectObjects(this.colliderMeshes);a.length!==0&&a[0].distance<e&&(e=a[0].distance)}return e}_getClientRect(e){if(!this._domElement)return;const t=this._domElement.getBoundingClientRect();return e.x=t.left,e.y=t.top,this._viewport?(e.x+=this._viewport.x,e.y+=t.height-this._viewport.w-this._viewport.y,e.width=this._viewport.z,e.height=this._viewport.w):(e.width=t.width,e.height=t.height),e}_createOnRestPromise(e){return e?Promise.resolve():(this._hasRested=!1,this.dispatchEvent({type:"transitionstart"}),new Promise(t=>{const i=()=>{this.removeEventListener("rest",i),t()};this.addEventListener("rest",i)}))}_addAllEventListeners(e){}_removeAllEventListeners(){}get dampingFactor(){return console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead."),0}set dampingFactor(e){console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead.")}get draggingDampingFactor(){return console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead."),0}set draggingDampingFactor(e){console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead.")}static createBoundingSphere(e,t=new en.Sphere){const i=t,r=i.center;Fg.makeEmpty(),e.traverseVisible(o=>{o.isMesh&&Fg.expandByObject(o)}),Fg.getCenter(r);let s=0;return e.traverseVisible(o=>{if(!o.isMesh)return;const a=o;if(!a.geometry)return;const l=a.geometry.clone();l.applyMatrix4(a.matrixWorld);const h=l.attributes.position;for(let p=0,m=h.count;p<m;p++)En.fromBufferAttribute(h,p),s=Math.max(s,r.distanceToSquared(En))}),i.radius=Math.sqrt(s),i}};var Nb;(function(n){n.HOLD_START="holdStart",n.HOLD_END="holdEnd",n.HOLDING="holding"})(Nb||(Nb={}));class due{constructor(){this._listeners={}}addEventListener(e,t){const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}removeEventListener(e,t){const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e)}}}class pue extends due{constructor(e){super(),this._enabled=!0,this._holding=!1,this._intervalId=-1,this._deltaTime=0,this._elapsedTime=0,this._lastTime=0,this._holdStart=t=>{if(!this._enabled||this._holding)return;this._deltaTime=0,this._elapsedTime=0,this._lastTime=performance.now(),this.dispatchEvent({type:Nb.HOLD_START,deltaTime:this._deltaTime,elapsedTime:this._elapsedTime,originalEvent:t}),this._holding=!0;const i=()=>{this._intervalId=this.holdIntervalDelay?window.setTimeout(i,this.holdIntervalDelay):window.requestAnimationFrame(i);const r=performance.now();this._deltaTime=r-this._lastTime,this._elapsedTime+=this._deltaTime,this._lastTime=performance.now(),this.dispatchEvent({type:Nb.HOLDING,deltaTime:this._deltaTime,elapsedTime:this._elapsedTime,originalEvent:t})};this._intervalId=this.holdIntervalDelay?window.setTimeout(i,this.holdIntervalDelay):window.requestAnimationFrame(i)},this._holdEnd=t=>{if(!this._enabled||!this._holding)return;const i=performance.now();this._deltaTime=i-this._lastTime,this._elapsedTime+=this._deltaTime,this._lastTime=performance.now(),this.dispatchEvent({type:Nb.HOLD_END,deltaTime:this._deltaTime,elapsedTime:this._elapsedTime,originalEvent:t}),window.clearTimeout(this._intervalId),window.cancelAnimationFrame(this._intervalId),this._holding=!1},this.holdIntervalDelay=e}get enabled(){return this._enabled}set enabled(e){this._enabled!==e&&(this._enabled=e,this._enabled||this._holdEnd())}get holding(){return this._holding}}class NS extends pue{constructor(e,t){if(typeof e!="string"){console.error("KeyboardKeyHold: the first argument has to be a KeyboardEvent.code string.");return}super(t),this._holdStart=this._holdStart.bind(this),this._holdEnd=this._holdEnd.bind(this);const i=s=>{mue(s)||s.code===e&&this._holdStart(s)},r=s=>{s.code===e&&this._holdEnd(s)};document.addEventListener("keydown",i),document.addEventListener("keyup",r),window.addEventListener("blur",this._holdEnd)}}function mue(n){const e=n.target;return e.tagName==="INPUT"||e.tagName==="SELECT"||e.tagName==="TEXTAREA"||e.isContentEditable}var US={exports:{}},o2;function gue(){if(o2)return US.exports;o2=1;var n=typeof Reflect=="object"?Reflect:null,e=n&&typeof n.apply=="function"?n.apply:function(C,R,L){return Function.prototype.apply.call(C,R,L)},t;n&&typeof n.ownKeys=="function"?t=n.ownKeys:Object.getOwnPropertySymbols?t=function(C){return Object.getOwnPropertyNames(C).concat(Object.getOwnPropertySymbols(C))}:t=function(C){return Object.getOwnPropertyNames(C)};function i(M){console&&console.warn&&console.warn(M)}var r=Number.isNaN||function(C){return C!==C};function s(){s.init.call(this)}US.exports=s,US.exports.once=_,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var o=10;function a(M){if(typeof M!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof M)}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(M){if(typeof M!="number"||M<0||r(M))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+M+".");o=M}}),s.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(C){if(typeof C!="number"||C<0||r(C))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+C+".");return this._maxListeners=C,this};function l(M){return M._maxListeners===void 0?s.defaultMaxListeners:M._maxListeners}s.prototype.getMaxListeners=function(){return l(this)},s.prototype.emit=function(C){for(var R=[],L=1;L<arguments.length;L++)R.push(arguments[L]);var I=C==="error",P=this._events;if(P!==void 0)I=I&&P.error===void 0;else if(!I)return!1;if(I){var U;if(R.length>0&&(U=R[0]),U instanceof Error)throw U;var B=new Error("Unhandled error."+(U?" ("+U.message+")":""));throw B.context=U,B}var F=P[C];if(F===void 0)return!1;if(typeof F=="function")e(F,this,R);else for(var z=F.length,W=b(F,z),L=0;L<z;++L)e(W[L],this,R);return!0};function u(M,C,R,L){var I,P,U;if(a(R),P=M._events,P===void 0?(P=M._events=Object.create(null),M._eventsCount=0):(P.newListener!==void 0&&(M.emit("newListener",C,R.listener?R.listener:R),P=M._events),U=P[C]),U===void 0)U=P[C]=R,++M._eventsCount;else if(typeof U=="function"?U=P[C]=L?[R,U]:[U,R]:L?U.unshift(R):U.push(R),I=l(M),I>0&&U.length>I&&!U.warned){U.warned=!0;var B=new Error("Possible EventEmitter memory leak detected. "+U.length+" "+String(C)+" listeners added. Use emitter.setMaxListeners() to increase limit");B.name="MaxListenersExceededWarning",B.emitter=M,B.type=C,B.count=U.length,i(B)}return M}s.prototype.addListener=function(C,R){return u(this,C,R,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(C,R){return u(this,C,R,!0)};function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(M,C,R){var L={fired:!1,wrapFn:void 0,target:M,type:C,listener:R},I=h.bind(L);return I.listener=R,L.wrapFn=I,I}s.prototype.once=function(C,R){return a(R),this.on(C,p(this,C,R)),this},s.prototype.prependOnceListener=function(C,R){return a(R),this.prependListener(C,p(this,C,R)),this},s.prototype.removeListener=function(C,R){var L,I,P,U,B;if(a(R),I=this._events,I===void 0)return this;if(L=I[C],L===void 0)return this;if(L===R||L.listener===R)--this._eventsCount===0?this._events=Object.create(null):(delete I[C],I.removeListener&&this.emit("removeListener",C,L.listener||R));else if(typeof L!="function"){for(P=-1,U=L.length-1;U>=0;U--)if(L[U]===R||L[U].listener===R){B=L[U].listener,P=U;break}if(P<0)return this;P===0?L.shift():x(L,P),L.length===1&&(I[C]=L[0]),I.removeListener!==void 0&&this.emit("removeListener",C,B||R)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(C){var R,L,I;if(L=this._events,L===void 0)return this;if(L.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):L[C]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete L[C]),this;if(arguments.length===0){var P=Object.keys(L),U;for(I=0;I<P.length;++I)U=P[I],U!=="removeListener"&&this.removeAllListeners(U);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(R=L[C],typeof R=="function")this.removeListener(C,R);else if(R!==void 0)for(I=R.length-1;I>=0;I--)this.removeListener(C,R[I]);return this};function m(M,C,R){var L=M._events;if(L===void 0)return[];var I=L[C];return I===void 0?[]:typeof I=="function"?R?[I.listener||I]:[I]:R?S(I):b(I,I.length)}s.prototype.listeners=function(C){return m(this,C,!0)},s.prototype.rawListeners=function(C){return m(this,C,!1)},s.listenerCount=function(M,C){return typeof M.listenerCount=="function"?M.listenerCount(C):y.call(M,C)},s.prototype.listenerCount=y;function y(M){var C=this._events;if(C!==void 0){var R=C[M];if(typeof R=="function")return 1;if(R!==void 0)return R.length}return 0}s.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]};function b(M,C){for(var R=new Array(C),L=0;L<C;++L)R[L]=M[L];return R}function x(M,C){for(;C+1<M.length;C++)M[C]=M[C+1];M.pop()}function S(M){for(var C=new Array(M.length),R=0;R<C.length;++R)C[R]=M[R].listener||M[R];return C}function _(M,C){return new Promise(function(R,L){function I(U){M.removeListener(C,P),L(U)}function P(){typeof M.removeListener=="function"&&M.removeListener("error",I),R([].slice.call(arguments))}A(M,C,P,{once:!0}),C!=="error"&&T(M,I,{once:!0})})}function T(M,C,R){typeof M.on=="function"&&A(M,"error",C,R)}function A(M,C,R,L){if(typeof M.on=="function")L.once?M.once(C,R):M.on(C,R);else if(typeof M.addEventListener=="function")M.addEventListener(C,function I(P){L.once&&M.removeEventListener(C,I),R(P)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof M)}return US.exports}var vue=gue();function yue(){const n=arguments[0];for(let e=1,t=arguments.length;e<t;e++)if(arguments[e])for(const i in arguments[e])n[i]=arguments[e][i];return n}let es=yue;typeof Object.assign=="function"&&(es=Object.assign);function xl(n,e,t,i){const r=n._nodes.get(e);let s=null;return r&&(i==="mixed"?s=r.out&&r.out[t]||r.undirected&&r.undirected[t]:i==="directed"?s=r.out&&r.out[t]:s=r.undirected&&r.undirected[t]),s}function Cs(n){return typeof n=="object"&&n!==null}function sV(n){let e;for(e in n)return!1;return!0}function ll(n,e,t){Object.defineProperty(n,e,{enumerable:!1,configurable:!1,writable:!0,value:t})}function $l(n,e,t){const i={enumerable:!0,configurable:!0};typeof t=="function"?i.get=t:(i.value=t,i.writable=!1),Object.defineProperty(n,e,i)}function a2(n){return!(!Cs(n)||n.attributes&&!Array.isArray(n.attributes))}function bue(){let n=Math.floor(Math.random()*256)&255;return()=>n++}function Lf(){const n=arguments;let e=null,t=-1;return{[Symbol.iterator](){return this},next(){let i=null;do{if(e===null){if(t++,t>=n.length)return{done:!0};e=n[t][Symbol.iterator]()}if(i=e.next(),i.done){e=null;continue}break}while(!0);return i}}}function K0(){return{[Symbol.iterator](){return this},next(){return{done:!0}}}}class JO extends Error{constructor(e){super(),this.name="GraphError",this.message=e}}class Dt extends JO{constructor(e){super(e),this.name="InvalidArgumentsGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,Dt.prototype.constructor)}}class _t extends JO{constructor(e){super(e),this.name="NotFoundGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,_t.prototype.constructor)}}class $t extends JO{constructor(e){super(e),this.name="UsageGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,$t.prototype.constructor)}}function oV(n,e){this.key=n,this.attributes=e,this.clear()}oV.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.undirectedLoops=0,this.directedLoops=0,this.in={},this.out={},this.undirected={}};function aV(n,e){this.key=n,this.attributes=e,this.clear()}aV.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedLoops=0,this.in={},this.out={}};function lV(n,e){this.key=n,this.attributes=e,this.clear()}lV.prototype.clear=function(){this.undirectedDegree=0,this.undirectedLoops=0,this.undirected={}};function Q0(n,e,t,i,r){this.key=e,this.attributes=r,this.undirected=n,this.source=t,this.target=i}Q0.prototype.attach=function(){let n="out",e="in";this.undirected&&(n=e="undirected");const t=this.source.key,i=this.target.key;this.source[n][i]=this,!(this.undirected&&t===i)&&(this.target[e][t]=this)};Q0.prototype.attachMulti=function(){let n="out",e="in";const t=this.source.key,i=this.target.key;this.undirected&&(n=e="undirected");const r=this.source[n],s=r[i];if(typeof s>"u"){r[i]=this,this.undirected&&t===i||(this.target[e][t]=this);return}s.previous=this,this.next=s,r[i]=this,this.target[e][t]=this};Q0.prototype.detach=function(){const n=this.source.key,e=this.target.key;let t="out",i="in";this.undirected&&(t=i="undirected"),delete this.source[t][e],delete this.target[i][n]};Q0.prototype.detachMulti=function(){const n=this.source.key,e=this.target.key;let t="out",i="in";this.undirected&&(t=i="undirected"),this.previous===void 0?this.next===void 0?(delete this.source[t][e],delete this.target[i][n]):(this.next.previous=void 0,this.source[t][e]=this.next,this.target[i][n]=this.next):(this.previous.next=this.next,this.next!==void 0&&(this.next.previous=this.previous))};const cV=0,uV=1,_ue=2,fV=3;function Wf(n,e,t,i,r,s,o){let a,l,u,h;if(i=""+i,t===cV){if(a=n._nodes.get(i),!a)throw new _t(`Graph.${e}: could not find the "${i}" node in the graph.`);u=r,h=s}else if(t===fV){if(r=""+r,l=n._edges.get(r),!l)throw new _t(`Graph.${e}: could not find the "${r}" edge in the graph.`);const p=l.source.key,m=l.target.key;if(i===p)a=l.target;else if(i===m)a=l.source;else throw new _t(`Graph.${e}: the "${i}" node is not attached to the "${r}" edge (${p}, ${m}).`);u=s,h=o}else{if(l=n._edges.get(i),!l)throw new _t(`Graph.${e}: could not find the "${i}" edge in the graph.`);t===uV?a=l.source:a=l.target,u=r,h=s}return[a,u,h]}function xue(n,e,t){n.prototype[e]=function(i,r,s){const[o,a]=Wf(this,e,t,i,r,s);return o.attributes[a]}}function Sue(n,e,t){n.prototype[e]=function(i,r){const[s]=Wf(this,e,t,i,r);return s.attributes}}function wue(n,e,t){n.prototype[e]=function(i,r,s){const[o,a]=Wf(this,e,t,i,r,s);return o.attributes.hasOwnProperty(a)}}function Eue(n,e,t){n.prototype[e]=function(i,r,s,o){const[a,l,u]=Wf(this,e,t,i,r,s,o);return a.attributes[l]=u,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:l}),this}}function Tue(n,e,t){n.prototype[e]=function(i,r,s,o){const[a,l,u]=Wf(this,e,t,i,r,s,o);if(typeof u!="function")throw new Dt(`Graph.${e}: updater should be a function.`);const h=a.attributes,p=u(h[l]);return h[l]=p,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:l}),this}}function Mue(n,e,t){n.prototype[e]=function(i,r,s){const[o,a]=Wf(this,e,t,i,r,s);return delete o.attributes[a],this.emit("nodeAttributesUpdated",{key:o.key,type:"remove",attributes:o.attributes,name:a}),this}}function Aue(n,e,t){n.prototype[e]=function(i,r,s){const[o,a]=Wf(this,e,t,i,r,s);if(!Cs(a))throw new Dt(`Graph.${e}: provided attributes are not a plain object.`);return o.attributes=a,this.emit("nodeAttributesUpdated",{key:o.key,type:"replace",attributes:o.attributes}),this}}function Cue(n,e,t){n.prototype[e]=function(i,r,s){const[o,a]=Wf(this,e,t,i,r,s);if(!Cs(a))throw new Dt(`Graph.${e}: provided attributes are not a plain object.`);return es(o.attributes,a),this.emit("nodeAttributesUpdated",{key:o.key,type:"merge",attributes:o.attributes,data:a}),this}}function Rue(n,e,t){n.prototype[e]=function(i,r,s){const[o,a]=Wf(this,e,t,i,r,s);if(typeof a!="function")throw new Dt(`Graph.${e}: provided updater is not a function.`);return o.attributes=a(o.attributes),this.emit("nodeAttributesUpdated",{key:o.key,type:"update",attributes:o.attributes}),this}}const Due=[{name:n=>`get${n}Attribute`,attacher:xue},{name:n=>`get${n}Attributes`,attacher:Sue},{name:n=>`has${n}Attribute`,attacher:wue},{name:n=>`set${n}Attribute`,attacher:Eue},{name:n=>`update${n}Attribute`,attacher:Tue},{name:n=>`remove${n}Attribute`,attacher:Mue},{name:n=>`replace${n}Attributes`,attacher:Aue},{name:n=>`merge${n}Attributes`,attacher:Cue},{name:n=>`update${n}Attributes`,attacher:Rue}];function Oue(n){Due.forEach(function({name:e,attacher:t}){t(n,e("Node"),cV),t(n,e("Source"),uV),t(n,e("Target"),_ue),t(n,e("Opposite"),fV)})}function Lue(n,e,t){n.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new $t(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new $t(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=xl(this,o,a,t),!s)throw new _t(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(t!=="mixed")throw new $t(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new _t(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return s.attributes[r]}}function Pue(n,e,t){n.prototype[e]=function(i){let r;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new $t(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>1){if(this.multi)throw new $t(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+i,o=""+arguments[1];if(r=xl(this,s,o,t),!r)throw new _t(`Graph.${e}: could not find an edge for the given path ("${s}" - "${o}").`)}else{if(t!=="mixed")throw new $t(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,r=this._edges.get(i),!r)throw new _t(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return r.attributes}}function Iue(n,e,t){n.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new $t(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new $t(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=xl(this,o,a,t),!s)throw new _t(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(t!=="mixed")throw new $t(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new _t(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return s.attributes.hasOwnProperty(r)}}function Nue(n,e,t){n.prototype[e]=function(i,r,s){let o;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new $t(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new $t(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+i,l=""+r;if(r=arguments[2],s=arguments[3],o=xl(this,a,l,t),!o)throw new _t(`Graph.${e}: could not find an edge for the given path ("${a}" - "${l}").`)}else{if(t!=="mixed")throw new $t(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,o=this._edges.get(i),!o)throw new _t(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return o.attributes[r]=s,this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:r}),this}}function Uue(n,e,t){n.prototype[e]=function(i,r,s){let o;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new $t(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new $t(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+i,l=""+r;if(r=arguments[2],s=arguments[3],o=xl(this,a,l,t),!o)throw new _t(`Graph.${e}: could not find an edge for the given path ("${a}" - "${l}").`)}else{if(t!=="mixed")throw new $t(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,o=this._edges.get(i),!o)throw new _t(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(typeof s!="function")throw new Dt(`Graph.${e}: updater should be a function.`);return o.attributes[r]=s(o.attributes[r]),this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:r}),this}}function kue(n,e,t){n.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new $t(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new $t(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=xl(this,o,a,t),!s)throw new _t(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(t!=="mixed")throw new $t(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new _t(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return delete s.attributes[r],this.emit("edgeAttributesUpdated",{key:s.key,type:"remove",attributes:s.attributes,name:r}),this}}function zue(n,e,t){n.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new $t(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new $t(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=xl(this,o,a,t),!s)throw new _t(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(t!=="mixed")throw new $t(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new _t(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(!Cs(r))throw new Dt(`Graph.${e}: provided attributes are not a plain object.`);return s.attributes=r,this.emit("edgeAttributesUpdated",{key:s.key,type:"replace",attributes:s.attributes}),this}}function Fue(n,e,t){n.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new $t(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new $t(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=xl(this,o,a,t),!s)throw new _t(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(t!=="mixed")throw new $t(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new _t(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(!Cs(r))throw new Dt(`Graph.${e}: provided attributes are not a plain object.`);return es(s.attributes,r),this.emit("edgeAttributesUpdated",{key:s.key,type:"merge",attributes:s.attributes,data:r}),this}}function Bue(n,e,t){n.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new $t(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new $t(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=xl(this,o,a,t),!s)throw new _t(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(t!=="mixed")throw new $t(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new _t(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(typeof r!="function")throw new Dt(`Graph.${e}: provided updater is not a function.`);return s.attributes=r(s.attributes),this.emit("edgeAttributesUpdated",{key:s.key,type:"update",attributes:s.attributes}),this}}const Vue=[{name:n=>`get${n}Attribute`,attacher:Lue},{name:n=>`get${n}Attributes`,attacher:Pue},{name:n=>`has${n}Attribute`,attacher:Iue},{name:n=>`set${n}Attribute`,attacher:Nue},{name:n=>`update${n}Attribute`,attacher:Uue},{name:n=>`remove${n}Attribute`,attacher:kue},{name:n=>`replace${n}Attributes`,attacher:zue},{name:n=>`merge${n}Attributes`,attacher:Fue},{name:n=>`update${n}Attributes`,attacher:Bue}];function Gue(n){Vue.forEach(function({name:e,attacher:t}){t(n,e("Edge"),"mixed"),t(n,e("DirectedEdge"),"directed"),t(n,e("UndirectedEdge"),"undirected")})}const Hue=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function jue(n,e,t,i){let r=!1;for(const s in e){if(s===i)continue;const o=e[s];if(r=t(o.key,o.attributes,o.source.key,o.target.key,o.source.attributes,o.target.attributes,o.undirected),n&&r)return o.key}}function Wue(n,e,t,i){let r,s,o,a=!1;for(const l in e)if(l!==i){r=e[l];do{if(s=r.source,o=r.target,a=t(r.key,r.attributes,s.key,o.key,s.attributes,o.attributes,r.undirected),n&&a)return r.key;r=r.next}while(r!==void 0)}}function zC(n,e){const t=Object.keys(n),i=t.length;let r,s=0;return{[Symbol.iterator](){return this},next(){do if(r)r=r.next;else{if(s>=i)return{done:!0};const o=t[s++];if(o===e){r=void 0;continue}r=n[o]}while(!r);return{done:!1,value:{edge:r.key,attributes:r.attributes,source:r.source.key,target:r.target.key,sourceAttributes:r.source.attributes,targetAttributes:r.target.attributes,undirected:r.undirected}}}}}function Xue(n,e,t,i){const r=e[t];if(!r)return;const s=r.source,o=r.target;if(i(r.key,r.attributes,s.key,o.key,s.attributes,o.attributes,r.undirected)&&n)return r.key}function que(n,e,t,i){let r=e[t];if(!r)return;let s=!1;do{if(s=i(r.key,r.attributes,r.source.key,r.target.key,r.source.attributes,r.target.attributes,r.undirected),n&&s)return r.key;r=r.next}while(r!==void 0)}function FC(n,e){let t=n[e];if(t.next!==void 0)return{[Symbol.iterator](){return this},next(){if(!t)return{done:!0};const r={edge:t.key,attributes:t.attributes,source:t.source.key,target:t.target.key,sourceAttributes:t.source.attributes,targetAttributes:t.target.attributes,undirected:t.undirected};return t=t.next,{done:!1,value:r}}};let i=!1;return{[Symbol.iterator](){return this},next(){return i===!0?{done:!0}:(i=!0,{done:!1,value:{edge:t.key,attributes:t.attributes,source:t.source.key,target:t.target.key,sourceAttributes:t.source.attributes,targetAttributes:t.target.attributes,undirected:t.undirected}})}}}function Yue(n,e){if(n.size===0)return[];if(e==="mixed"||e===n.type)return Array.from(n._edges.keys());const t=e==="undirected"?n.undirectedSize:n.directedSize,i=new Array(t),r=e==="undirected",s=n._edges.values();let o=0,a,l;for(;a=s.next(),a.done!==!0;)l=a.value,l.undirected===r&&(i[o++]=l.key);return i}function hV(n,e,t,i){if(e.size===0)return;const r=t!=="mixed"&&t!==e.type,s=t==="undirected";let o,a,l=!1;const u=e._edges.values();for(;o=u.next(),o.done!==!0;){if(a=o.value,r&&a.undirected!==s)continue;const{key:h,attributes:p,source:m,target:y}=a;if(l=i(h,p,m.key,y.key,m.attributes,y.attributes,a.undirected),n&&l)return h}}function $ue(n,e){if(n.size===0)return K0();const t=e!=="mixed"&&e!==n.type,i=e==="undirected",r=n._edges.values();return{[Symbol.iterator](){return this},next(){let s,o;for(;;){if(s=r.next(),s.done)return s;if(o=s.value,!(t&&o.undirected!==i))break}return{value:{edge:o.key,attributes:o.attributes,source:o.source.key,target:o.target.key,sourceAttributes:o.source.attributes,targetAttributes:o.target.attributes,undirected:o.undirected},done:!1}}}}function eL(n,e,t,i,r,s){const o=e?Wue:jue;let a;if(t!=="undirected"&&(i!=="out"&&(a=o(n,r.in,s),n&&a)||i!=="in"&&(a=o(n,r.out,s,i?void 0:r.key),n&&a))||t!=="directed"&&(a=o(n,r.undirected,s),n&&a))return a}function Zue(n,e,t,i){const r=[];return eL(!1,n,e,t,i,function(s){r.push(s)}),r}function Kue(n,e,t){let i=K0();return n!=="undirected"&&(e!=="out"&&typeof t.in<"u"&&(i=Lf(i,zC(t.in))),e!=="in"&&typeof t.out<"u"&&(i=Lf(i,zC(t.out,e?void 0:t.key)))),n!=="directed"&&typeof t.undirected<"u"&&(i=Lf(i,zC(t.undirected))),i}function tL(n,e,t,i,r,s,o){const a=t?que:Xue;let l;if(e!=="undirected"&&(typeof r.in<"u"&&i!=="out"&&(l=a(n,r.in,s,o),n&&l)||typeof r.out<"u"&&i!=="in"&&(i||r.key!==s)&&(l=a(n,r.out,s,o),n&&l))||e!=="directed"&&typeof r.undirected<"u"&&(l=a(n,r.undirected,s,o),n&&l))return l}function Que(n,e,t,i,r){const s=[];return tL(!1,n,e,t,i,r,function(o){s.push(o)}),s}function Jue(n,e,t,i){let r=K0();return n!=="undirected"&&(typeof t.in<"u"&&e!=="out"&&i in t.in&&(r=Lf(r,FC(t.in,i))),typeof t.out<"u"&&e!=="in"&&i in t.out&&(e||t.key!==i)&&(r=Lf(r,FC(t.out,i)))),n!=="directed"&&typeof t.undirected<"u"&&i in t.undirected&&(r=Lf(r,FC(t.undirected,i))),r}function efe(n,e){const{name:t,type:i,direction:r}=e;n.prototype[t]=function(s,o){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return[];if(!arguments.length)return Yue(this,i);if(arguments.length===1){s=""+s;const a=this._nodes.get(s);if(typeof a>"u")throw new _t(`Graph.${t}: could not find the "${s}" node in the graph.`);return Zue(this.multi,i==="mixed"?this.type:i,r,a)}if(arguments.length===2){s=""+s,o=""+o;const a=this._nodes.get(s);if(!a)throw new _t(`Graph.${t}:  could not find the "${s}" source node in the graph.`);if(!this._nodes.has(o))throw new _t(`Graph.${t}:  could not find the "${o}" target node in the graph.`);return Que(i,this.multi,r,a,o)}throw new Dt(`Graph.${t}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function tfe(n,e){const{name:t,type:i,direction:r}=e,s="forEach"+t[0].toUpperCase()+t.slice(1,-1);n.prototype[s]=function(u,h,p){if(!(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)){if(arguments.length===1)return p=u,hV(!1,this,i,p);if(arguments.length===2){u=""+u,p=h;const m=this._nodes.get(u);if(typeof m>"u")throw new _t(`Graph.${s}: could not find the "${u}" node in the graph.`);return eL(!1,this.multi,i==="mixed"?this.type:i,r,m,p)}if(arguments.length===3){u=""+u,h=""+h;const m=this._nodes.get(u);if(!m)throw new _t(`Graph.${s}:  could not find the "${u}" source node in the graph.`);if(!this._nodes.has(h))throw new _t(`Graph.${s}:  could not find the "${h}" target node in the graph.`);return tL(!1,i,this.multi,r,m,h,p)}throw new Dt(`Graph.${s}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)}};const o="map"+t[0].toUpperCase()+t.slice(1);n.prototype[o]=function(){const u=Array.prototype.slice.call(arguments),h=u.pop();let p;if(u.length===0){let m=0;i!=="directed"&&(m+=this.undirectedSize),i!=="undirected"&&(m+=this.directedSize),p=new Array(m);let y=0;u.push((b,x,S,_,T,A,M)=>{p[y++]=h(b,x,S,_,T,A,M)})}else p=[],u.push((m,y,b,x,S,_,T)=>{p.push(h(m,y,b,x,S,_,T))});return this[s].apply(this,u),p};const a="filter"+t[0].toUpperCase()+t.slice(1);n.prototype[a]=function(){const u=Array.prototype.slice.call(arguments),h=u.pop(),p=[];return u.push((m,y,b,x,S,_,T)=>{h(m,y,b,x,S,_,T)&&p.push(m)}),this[s].apply(this,u),p};const l="reduce"+t[0].toUpperCase()+t.slice(1);n.prototype[l]=function(){let u=Array.prototype.slice.call(arguments);if(u.length<2||u.length>4)throw new Dt(`Graph.${l}: invalid number of arguments (expecting 2, 3 or 4 and got ${u.length}).`);if(typeof u[u.length-1]=="function"&&typeof u[u.length-2]!="function")throw new Dt(`Graph.${l}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let h,p;u.length===2?(h=u[0],p=u[1],u=[]):u.length===3?(h=u[1],p=u[2],u=[u[0]]):u.length===4&&(h=u[2],p=u[3],u=[u[0],u[1]]);let m=p;return u.push((y,b,x,S,_,T,A)=>{m=h(m,y,b,x,S,_,T,A)}),this[s].apply(this,u),m}}function nfe(n,e){const{name:t,type:i,direction:r}=e,s="find"+t[0].toUpperCase()+t.slice(1,-1);n.prototype[s]=function(l,u,h){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return!1;if(arguments.length===1)return h=l,hV(!0,this,i,h);if(arguments.length===2){l=""+l,h=u;const p=this._nodes.get(l);if(typeof p>"u")throw new _t(`Graph.${s}: could not find the "${l}" node in the graph.`);return eL(!0,this.multi,i==="mixed"?this.type:i,r,p,h)}if(arguments.length===3){l=""+l,u=""+u;const p=this._nodes.get(l);if(!p)throw new _t(`Graph.${s}:  could not find the "${l}" source node in the graph.`);if(!this._nodes.has(u))throw new _t(`Graph.${s}:  could not find the "${u}" target node in the graph.`);return tL(!0,i,this.multi,r,p,u,h)}throw new Dt(`Graph.${s}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)};const o="some"+t[0].toUpperCase()+t.slice(1,-1);n.prototype[o]=function(){const l=Array.prototype.slice.call(arguments),u=l.pop();return l.push((p,m,y,b,x,S,_)=>u(p,m,y,b,x,S,_)),!!this[s].apply(this,l)};const a="every"+t[0].toUpperCase()+t.slice(1,-1);n.prototype[a]=function(){const l=Array.prototype.slice.call(arguments),u=l.pop();return l.push((p,m,y,b,x,S,_)=>!u(p,m,y,b,x,S,_)),!this[s].apply(this,l)}}function ife(n,e){const{name:t,type:i,direction:r}=e,s=t.slice(0,-1)+"Entries";n.prototype[s]=function(o,a){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return K0();if(!arguments.length)return $ue(this,i);if(arguments.length===1){o=""+o;const l=this._nodes.get(o);if(!l)throw new _t(`Graph.${s}: could not find the "${o}" node in the graph.`);return Kue(i,r,l)}if(arguments.length===2){o=""+o,a=""+a;const l=this._nodes.get(o);if(!l)throw new _t(`Graph.${s}:  could not find the "${o}" source node in the graph.`);if(!this._nodes.has(a))throw new _t(`Graph.${s}:  could not find the "${a}" target node in the graph.`);return Jue(i,r,l,a)}throw new Dt(`Graph.${s}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function rfe(n){Hue.forEach(e=>{efe(n,e),tfe(n,e),nfe(n,e),ife(n,e)})}const sfe=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function jT(){this.A=null,this.B=null}jT.prototype.wrap=function(n){this.A===null?this.A=n:this.B===null&&(this.B=n)};jT.prototype.has=function(n){return this.A!==null&&n in this.A||this.B!==null&&n in this.B};function Hy(n,e,t,i,r){for(const s in i){const o=i[s],a=o.source,l=o.target,u=a===t?l:a;if(e&&e.has(u.key))continue;const h=r(u.key,u.attributes);if(n&&h)return u.key}}function nL(n,e,t,i,r){if(e!=="mixed"){if(e==="undirected")return Hy(n,null,i,i.undirected,r);if(typeof t=="string")return Hy(n,null,i,i[t],r)}const s=new jT;let o;if(e!=="undirected"){if(t!=="out"){if(o=Hy(n,null,i,i.in,r),n&&o)return o;s.wrap(i.in)}if(t!=="in"){if(o=Hy(n,s,i,i.out,r),n&&o)return o;s.wrap(i.out)}}if(e!=="directed"&&(o=Hy(n,s,i,i.undirected,r),n&&o))return o}function ofe(n,e,t){if(n!=="mixed"){if(n==="undirected")return Object.keys(t.undirected);if(typeof e=="string")return Object.keys(t[e])}const i=[];return nL(!1,n,e,t,function(r){i.push(r)}),i}function jy(n,e,t){const i=Object.keys(t),r=i.length;let s=0;return{[Symbol.iterator](){return this},next(){let o=null;do{if(s>=r)return n&&n.wrap(t),{done:!0};const a=t[i[s++]],l=a.source,u=a.target;if(o=l===e?u:l,n&&n.has(o.key)){o=null;continue}}while(o===null);return{done:!1,value:{neighbor:o.key,attributes:o.attributes}}}}}function afe(n,e,t){if(n!=="mixed"){if(n==="undirected")return jy(null,t,t.undirected);if(typeof e=="string")return jy(null,t,t[e])}let i=K0();const r=new jT;return n!=="undirected"&&(e!=="out"&&(i=Lf(i,jy(r,t,t.in))),e!=="in"&&(i=Lf(i,jy(r,t,t.out)))),n!=="directed"&&(i=Lf(i,jy(r,t,t.undirected))),i}function lfe(n,e){const{name:t,type:i,direction:r}=e;n.prototype[t]=function(s){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return[];s=""+s;const o=this._nodes.get(s);if(typeof o>"u")throw new _t(`Graph.${t}: could not find the "${s}" node in the graph.`);return ofe(i==="mixed"?this.type:i,r,o)}}function cfe(n,e){const{name:t,type:i,direction:r}=e,s="forEach"+t[0].toUpperCase()+t.slice(1,-1);n.prototype[s]=function(u,h){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return;u=""+u;const p=this._nodes.get(u);if(typeof p>"u")throw new _t(`Graph.${s}: could not find the "${u}" node in the graph.`);nL(!1,i==="mixed"?this.type:i,r,p,h)};const o="map"+t[0].toUpperCase()+t.slice(1);n.prototype[o]=function(u,h){const p=[];return this[s](u,(m,y)=>{p.push(h(m,y))}),p};const a="filter"+t[0].toUpperCase()+t.slice(1);n.prototype[a]=function(u,h){const p=[];return this[s](u,(m,y)=>{h(m,y)&&p.push(m)}),p};const l="reduce"+t[0].toUpperCase()+t.slice(1);n.prototype[l]=function(u,h,p){if(arguments.length<3)throw new Dt(`Graph.${l}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let m=p;return this[s](u,(y,b)=>{m=h(m,y,b)}),m}}function ufe(n,e){const{name:t,type:i,direction:r}=e,s=t[0].toUpperCase()+t.slice(1,-1),o="find"+s;n.prototype[o]=function(u,h){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return;u=""+u;const p=this._nodes.get(u);if(typeof p>"u")throw new _t(`Graph.${o}: could not find the "${u}" node in the graph.`);return nL(!0,i==="mixed"?this.type:i,r,p,h)};const a="some"+s;n.prototype[a]=function(u,h){return!!this[o](u,h)};const l="every"+s;n.prototype[l]=function(u,h){return!this[o](u,(m,y)=>!h(m,y))}}function ffe(n,e){const{name:t,type:i,direction:r}=e,s=t.slice(0,-1)+"Entries";n.prototype[s]=function(o){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return K0();o=""+o;const a=this._nodes.get(o);if(typeof a>"u")throw new _t(`Graph.${s}: could not find the "${o}" node in the graph.`);return afe(i==="mixed"?this.type:i,r,a)}}function hfe(n){sfe.forEach(e=>{lfe(n,e),cfe(n,e),ufe(n,e),ffe(n,e)})}function kS(n,e,t,i,r){const s=i._nodes.values(),o=i.type;let a,l,u,h,p,m;for(;a=s.next(),a.done!==!0;){let y=!1;if(l=a.value,o!=="undirected"){h=l.out;for(u in h){p=h[u];do m=p.target,y=!0,r(l.key,m.key,l.attributes,m.attributes,p.key,p.attributes,p.undirected),p=p.next;while(p)}}if(o!=="directed"){h=l.undirected;for(u in h)if(!(e&&l.key>u)){p=h[u];do m=p.target,m.key!==u&&(m=p.source),y=!0,r(l.key,m.key,l.attributes,m.attributes,p.key,p.attributes,p.undirected),p=p.next;while(p)}}t&&!y&&r(l.key,null,l.attributes,null,null,null,null)}}function dfe(n,e){const t={key:n};return sV(e.attributes)||(t.attributes=es({},e.attributes)),t}function pfe(n,e,t){const i={key:e,source:t.source.key,target:t.target.key};return sV(t.attributes)||(i.attributes=es({},t.attributes)),n==="mixed"&&t.undirected&&(i.undirected=!0),i}function mfe(n){if(!Cs(n))throw new Dt('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in n))throw new Dt("Graph.import: serialized node is missing its key.");if("attributes"in n&&(!Cs(n.attributes)||n.attributes===null))throw new Dt("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function gfe(n){if(!Cs(n))throw new Dt('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in n))throw new Dt("Graph.import: serialized edge is missing its source.");if(!("target"in n))throw new Dt("Graph.import: serialized edge is missing its target.");if("attributes"in n&&(!Cs(n.attributes)||n.attributes===null))throw new Dt("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in n&&typeof n.undirected!="boolean")throw new Dt("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}const vfe=bue(),yfe=new Set(["directed","undirected","mixed"]),l2=new Set(["domain","_events","_eventsCount","_maxListeners"]),bfe=[{name:n=>`${n}Edge`,generateKey:!0},{name:n=>`${n}DirectedEdge`,generateKey:!0,type:"directed"},{name:n=>`${n}UndirectedEdge`,generateKey:!0,type:"undirected"},{name:n=>`${n}EdgeWithKey`},{name:n=>`${n}DirectedEdgeWithKey`,type:"directed"},{name:n=>`${n}UndirectedEdgeWithKey`,type:"undirected"}],_fe={allowSelfLoops:!0,multi:!1,type:"mixed"};function xfe(n,e,t){if(t&&!Cs(t))throw new Dt(`Graph.addNode: invalid attributes. Expecting an object but got "${t}"`);if(e=""+e,t=t||{},n._nodes.has(e))throw new $t(`Graph.addNode: the "${e}" node already exist in the graph.`);const i=new n.NodeDataClass(e,t);return n._nodes.set(e,i),n.emit("nodeAdded",{key:e,attributes:t}),i}function c2(n,e,t){const i=new n.NodeDataClass(e,t);return n._nodes.set(e,i),n.emit("nodeAdded",{key:e,attributes:t}),i}function dV(n,e,t,i,r,s,o,a){if(!i&&n.type==="undirected")throw new $t(`Graph.${e}: you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead.`);if(i&&n.type==="directed")throw new $t(`Graph.${e}: you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead.`);if(a&&!Cs(a))throw new Dt(`Graph.${e}: invalid attributes. Expecting an object but got "${a}"`);if(s=""+s,o=""+o,a=a||{},!n.allowSelfLoops&&s===o)throw new $t(`Graph.${e}: source & target are the same ("${s}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);const l=n._nodes.get(s),u=n._nodes.get(o);if(!l)throw new _t(`Graph.${e}: source node "${s}" not found.`);if(!u)throw new _t(`Graph.${e}: target node "${o}" not found.`);const h={key:null,undirected:i,source:s,target:o,attributes:a};if(t)r=n._edgeKeyGenerator();else if(r=""+r,n._edges.has(r))throw new $t(`Graph.${e}: the "${r}" edge already exists in the graph.`);if(!n.multi&&(i?typeof l.undirected[o]<"u":typeof l.out[o]<"u"))throw new $t(`Graph.${e}: an edge linking "${s}" to "${o}" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option.`);const p=new Q0(i,r,l,u,a);n._edges.set(r,p);const m=s===o;return i?(l.undirectedDegree++,u.undirectedDegree++,m&&(l.undirectedLoops++,n._undirectedSelfLoopCount++)):(l.outDegree++,u.inDegree++,m&&(l.directedLoops++,n._directedSelfLoopCount++)),n.multi?p.attachMulti():p.attach(),i?n._undirectedSize++:n._directedSize++,h.key=r,n.emit("edgeAdded",h),r}function Sfe(n,e,t,i,r,s,o,a,l){if(!i&&n.type==="undirected")throw new $t(`Graph.${e}: you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead.`);if(i&&n.type==="directed")throw new $t(`Graph.${e}: you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead.`);if(a){if(l){if(typeof a!="function")throw new Dt(`Graph.${e}: invalid updater function. Expecting a function but got "${a}"`)}else if(!Cs(a))throw new Dt(`Graph.${e}: invalid attributes. Expecting an object but got "${a}"`)}s=""+s,o=""+o;let u;if(l&&(u=a,a=void 0),!n.allowSelfLoops&&s===o)throw new $t(`Graph.${e}: source & target are the same ("${s}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);let h=n._nodes.get(s),p=n._nodes.get(o),m,y;if(!t&&(m=n._edges.get(r),m)){if((m.source.key!==s||m.target.key!==o)&&(!i||m.source.key!==o||m.target.key!==s))throw new $t(`Graph.${e}: inconsistency detected when attempting to merge the "${r}" edge with "${s}" source & "${o}" target vs. ("${m.source.key}", "${m.target.key}").`);y=m}if(!y&&!n.multi&&h&&(y=i?h.undirected[o]:h.out[o]),y){const T=[y.key,!1,!1,!1];if(l?!u:!a)return T;if(l){const A=y.attributes;y.attributes=u(A),n.emit("edgeAttributesUpdated",{type:"replace",key:y.key,attributes:y.attributes})}else es(y.attributes,a),n.emit("edgeAttributesUpdated",{type:"merge",key:y.key,attributes:y.attributes,data:a});return T}a=a||{},l&&u&&(a=u(a));const b={key:null,undirected:i,source:s,target:o,attributes:a};if(t)r=n._edgeKeyGenerator();else if(r=""+r,n._edges.has(r))throw new $t(`Graph.${e}: the "${r}" edge already exists in the graph.`);let x=!1,S=!1;h||(h=c2(n,s,{}),x=!0,s===o&&(p=h,S=!0)),p||(p=c2(n,o,{}),S=!0),m=new Q0(i,r,h,p,a),n._edges.set(r,m);const _=s===o;return i?(h.undirectedDegree++,p.undirectedDegree++,_&&(h.undirectedLoops++,n._undirectedSelfLoopCount++)):(h.outDegree++,p.inDegree++,_&&(h.directedLoops++,n._directedSelfLoopCount++)),n.multi?m.attachMulti():m.attach(),i?n._undirectedSize++:n._directedSize++,b.key=r,n.emit("edgeAdded",b),[r,!0,x,S]}function Bg(n,e){n._edges.delete(e.key);const{source:t,target:i,attributes:r}=e,s=e.undirected,o=t===i;s?(t.undirectedDegree--,i.undirectedDegree--,o&&(t.undirectedLoops--,n._undirectedSelfLoopCount--)):(t.outDegree--,i.inDegree--,o&&(t.directedLoops--,n._directedSelfLoopCount--)),n.multi?e.detachMulti():e.detach(),s?n._undirectedSize--:n._directedSize--,n.emit("edgeDropped",{key:e.key,attributes:r,source:t.key,target:i.key,undirected:s})}class Si extends vue.EventEmitter{constructor(e){if(super(),e=es({},_fe,e),typeof e.multi!="boolean")throw new Dt(`Graph.constructor: invalid 'multi' option. Expecting a boolean but got "${e.multi}".`);if(!yfe.has(e.type))throw new Dt(`Graph.constructor: invalid 'type' option. Should be one of "mixed", "directed" or "undirected" but got "${e.type}".`);if(typeof e.allowSelfLoops!="boolean")throw new Dt(`Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got "${e.allowSelfLoops}".`);const t=e.type==="mixed"?oV:e.type==="directed"?aV:lV;ll(this,"NodeDataClass",t);const i="geid_"+vfe()+"_";let r=0;const s=()=>{let o;do o=i+r++;while(this._edges.has(o));return o};ll(this,"_attributes",{}),ll(this,"_nodes",new Map),ll(this,"_edges",new Map),ll(this,"_directedSize",0),ll(this,"_undirectedSize",0),ll(this,"_directedSelfLoopCount",0),ll(this,"_undirectedSelfLoopCount",0),ll(this,"_edgeKeyGenerator",s),ll(this,"_options",e),l2.forEach(o=>ll(this,o,this[o])),$l(this,"order",()=>this._nodes.size),$l(this,"size",()=>this._edges.size),$l(this,"directedSize",()=>this._directedSize),$l(this,"undirectedSize",()=>this._undirectedSize),$l(this,"selfLoopCount",()=>this._directedSelfLoopCount+this._undirectedSelfLoopCount),$l(this,"directedSelfLoopCount",()=>this._directedSelfLoopCount),$l(this,"undirectedSelfLoopCount",()=>this._undirectedSelfLoopCount),$l(this,"multi",this._options.multi),$l(this,"type",this._options.type),$l(this,"allowSelfLoops",this._options.allowSelfLoops),$l(this,"implementation",()=>"graphology")}_resetInstanceCounters(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0}hasNode(e){return this._nodes.has(""+e)}hasDirectedEdge(e,t){if(this.type==="undirected")return!1;if(arguments.length===1){const i=""+e,r=this._edges.get(i);return!!r&&!r.undirected}else if(arguments.length===2){e=""+e,t=""+t;const i=this._nodes.get(e);return i?i.out.hasOwnProperty(t):!1}throw new Dt(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasUndirectedEdge(e,t){if(this.type==="directed")return!1;if(arguments.length===1){const i=""+e,r=this._edges.get(i);return!!r&&r.undirected}else if(arguments.length===2){e=""+e,t=""+t;const i=this._nodes.get(e);return i?i.undirected.hasOwnProperty(t):!1}throw new Dt(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasEdge(e,t){if(arguments.length===1){const i=""+e;return this._edges.has(i)}else if(arguments.length===2){e=""+e,t=""+t;const i=this._nodes.get(e);return i?typeof i.out<"u"&&i.out.hasOwnProperty(t)||typeof i.undirected<"u"&&i.undirected.hasOwnProperty(t):!1}throw new Dt(`Graph.hasEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}directedEdge(e,t){if(this.type==="undirected")return;if(e=""+e,t=""+t,this.multi)throw new $t("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");const i=this._nodes.get(e);if(!i)throw new _t(`Graph.directedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(t))throw new _t(`Graph.directedEdge: could not find the "${t}" target node in the graph.`);const r=i.out&&i.out[t]||void 0;if(r)return r.key}undirectedEdge(e,t){if(this.type==="directed")return;if(e=""+e,t=""+t,this.multi)throw new $t("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");const i=this._nodes.get(e);if(!i)throw new _t(`Graph.undirectedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(t))throw new _t(`Graph.undirectedEdge: could not find the "${t}" target node in the graph.`);const r=i.undirected&&i.undirected[t]||void 0;if(r)return r.key}edge(e,t){if(this.multi)throw new $t("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");e=""+e,t=""+t;const i=this._nodes.get(e);if(!i)throw new _t(`Graph.edge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(t))throw new _t(`Graph.edge: could not find the "${t}" target node in the graph.`);const r=i.out&&i.out[t]||i.undirected&&i.undirected[t]||void 0;if(r)return r.key}areDirectedNeighbors(e,t){e=""+e,t=""+t;const i=this._nodes.get(e);if(!i)throw new _t(`Graph.areDirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:t in i.in||t in i.out}areOutNeighbors(e,t){e=""+e,t=""+t;const i=this._nodes.get(e);if(!i)throw new _t(`Graph.areOutNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:t in i.out}areInNeighbors(e,t){e=""+e,t=""+t;const i=this._nodes.get(e);if(!i)throw new _t(`Graph.areInNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:t in i.in}areUndirectedNeighbors(e,t){e=""+e,t=""+t;const i=this._nodes.get(e);if(!i)throw new _t(`Graph.areUndirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="directed"?!1:t in i.undirected}areNeighbors(e,t){e=""+e,t=""+t;const i=this._nodes.get(e);if(!i)throw new _t(`Graph.areNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&(t in i.in||t in i.out)||this.type!=="directed"&&t in i.undirected}areInboundNeighbors(e,t){e=""+e,t=""+t;const i=this._nodes.get(e);if(!i)throw new _t(`Graph.areInboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&t in i.in||this.type!=="directed"&&t in i.undirected}areOutboundNeighbors(e,t){e=""+e,t=""+t;const i=this._nodes.get(e);if(!i)throw new _t(`Graph.areOutboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&t in i.out||this.type!=="directed"&&t in i.undirected}inDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new _t(`Graph.inDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.inDegree}outDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new _t(`Graph.outDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.outDegree}directedDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new _t(`Graph.directedDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.inDegree+t.outDegree}undirectedDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new _t(`Graph.undirectedDegree: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:t.undirectedDegree}inboundDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new _t(`Graph.inboundDegree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=t.undirectedDegree),this.type!=="undirected"&&(i+=t.inDegree),i}outboundDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new _t(`Graph.outboundDegree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=t.undirectedDegree),this.type!=="undirected"&&(i+=t.outDegree),i}degree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new _t(`Graph.degree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=t.undirectedDegree),this.type!=="undirected"&&(i+=t.inDegree+t.outDegree),i}inDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new _t(`Graph.inDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.inDegree-t.directedLoops}outDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new _t(`Graph.outDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.outDegree-t.directedLoops}directedDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new _t(`Graph.directedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.inDegree+t.outDegree-t.directedLoops*2}undirectedDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new _t(`Graph.undirectedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:t.undirectedDegree-t.undirectedLoops*2}inboundDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new _t(`Graph.inboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=t.undirectedDegree,r+=t.undirectedLoops*2),this.type!=="undirected"&&(i+=t.inDegree,r+=t.directedLoops),i-r}outboundDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new _t(`Graph.outboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=t.undirectedDegree,r+=t.undirectedLoops*2),this.type!=="undirected"&&(i+=t.outDegree,r+=t.directedLoops),i-r}degreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new _t(`Graph.degreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=t.undirectedDegree,r+=t.undirectedLoops*2),this.type!=="undirected"&&(i+=t.inDegree+t.outDegree,r+=t.directedLoops*2),i-r}source(e){e=""+e;const t=this._edges.get(e);if(!t)throw new _t(`Graph.source: could not find the "${e}" edge in the graph.`);return t.source.key}target(e){e=""+e;const t=this._edges.get(e);if(!t)throw new _t(`Graph.target: could not find the "${e}" edge in the graph.`);return t.target.key}extremities(e){e=""+e;const t=this._edges.get(e);if(!t)throw new _t(`Graph.extremities: could not find the "${e}" edge in the graph.`);return[t.source.key,t.target.key]}opposite(e,t){e=""+e,t=""+t;const i=this._edges.get(t);if(!i)throw new _t(`Graph.opposite: could not find the "${t}" edge in the graph.`);const r=i.source.key,s=i.target.key;if(e===r)return s;if(e===s)return r;throw new _t(`Graph.opposite: the "${e}" node is not attached to the "${t}" edge (${r}, ${s}).`)}hasExtremity(e,t){e=""+e,t=""+t;const i=this._edges.get(e);if(!i)throw new _t(`Graph.hasExtremity: could not find the "${e}" edge in the graph.`);return i.source.key===t||i.target.key===t}isUndirected(e){e=""+e;const t=this._edges.get(e);if(!t)throw new _t(`Graph.isUndirected: could not find the "${e}" edge in the graph.`);return t.undirected}isDirected(e){e=""+e;const t=this._edges.get(e);if(!t)throw new _t(`Graph.isDirected: could not find the "${e}" edge in the graph.`);return!t.undirected}isSelfLoop(e){e=""+e;const t=this._edges.get(e);if(!t)throw new _t(`Graph.isSelfLoop: could not find the "${e}" edge in the graph.`);return t.source===t.target}addNode(e,t){return xfe(this,e,t).key}mergeNode(e,t){if(t&&!Cs(t))throw new Dt(`Graph.mergeNode: invalid attributes. Expecting an object but got "${t}"`);e=""+e,t=t||{};let i=this._nodes.get(e);return i?(t&&(es(i.attributes,t),this.emit("nodeAttributesUpdated",{type:"merge",key:e,attributes:i.attributes,data:t})),[e,!1]):(i=new this.NodeDataClass(e,t),this._nodes.set(e,i),this.emit("nodeAdded",{key:e,attributes:t}),[e,!0])}updateNode(e,t){if(t&&typeof t!="function")throw new Dt(`Graph.updateNode: invalid updater function. Expecting a function but got "${t}"`);e=""+e;let i=this._nodes.get(e);if(i){if(t){const s=i.attributes;i.attributes=t(s),this.emit("nodeAttributesUpdated",{type:"replace",key:e,attributes:i.attributes})}return[e,!1]}const r=t?t({}):{};return i=new this.NodeDataClass(e,r),this._nodes.set(e,i),this.emit("nodeAdded",{key:e,attributes:r}),[e,!0]}dropNode(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new _t(`Graph.dropNode: could not find the "${e}" node in the graph.`);let i;if(this.type!=="undirected"){for(const r in t.out){i=t.out[r];do Bg(this,i),i=i.next;while(i)}for(const r in t.in){i=t.in[r];do Bg(this,i),i=i.next;while(i)}}if(this.type!=="directed")for(const r in t.undirected){i=t.undirected[r];do Bg(this,i),i=i.next;while(i)}this._nodes.delete(e),this.emit("nodeDropped",{key:e,attributes:t.attributes})}dropEdge(e){let t;if(arguments.length>1){const i=""+arguments[0],r=""+arguments[1];if(t=xl(this,i,r,this.type),!t)throw new _t(`Graph.dropEdge: could not find the "${i}" -> "${r}" edge in the graph.`)}else if(e=""+e,t=this._edges.get(e),!t)throw new _t(`Graph.dropEdge: could not find the "${e}" edge in the graph.`);return Bg(this,t),this}dropDirectedEdge(e,t){if(arguments.length<2)throw new $t("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new $t("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");e=""+e,t=""+t;const i=xl(this,e,t,"directed");if(!i)throw new _t(`Graph.dropDirectedEdge: could not find a "${e}" -> "${t}" edge in the graph.`);return Bg(this,i),this}dropUndirectedEdge(e,t){if(arguments.length<2)throw new $t("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new $t("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");const i=xl(this,e,t,"undirected");if(!i)throw new _t(`Graph.dropUndirectedEdge: could not find a "${e}" -> "${t}" edge in the graph.`);return Bg(this,i),this}clear(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")}clearEdges(){const e=this._nodes.values();let t;for(;t=e.next(),t.done!==!0;)t.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")}getAttribute(e){return this._attributes[e]}getAttributes(){return this._attributes}hasAttribute(e){return this._attributes.hasOwnProperty(e)}setAttribute(e,t){return this._attributes[e]=t,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}updateAttribute(e,t){if(typeof t!="function")throw new Dt("Graph.updateAttribute: updater should be a function.");const i=this._attributes[e];return this._attributes[e]=t(i),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}removeAttribute(e){return delete this._attributes[e],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:e}),this}replaceAttributes(e){if(!Cs(e))throw new Dt("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=e,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this}mergeAttributes(e){if(!Cs(e))throw new Dt("Graph.mergeAttributes: provided attributes are not a plain object.");return es(this._attributes,e),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:e}),this}updateAttributes(e){if(typeof e!="function")throw new Dt("Graph.updateAttributes: provided updater is not a function.");return this._attributes=e(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this}updateEachNodeAttributes(e,t){if(typeof e!="function")throw new Dt("Graph.updateEachNodeAttributes: expecting an updater function.");if(t&&!a2(t))throw new Dt("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const i=this._nodes.values();let r,s;for(;r=i.next(),r.done!==!0;)s=r.value,s.attributes=e(s.key,s.attributes);this.emit("eachNodeAttributesUpdated",{hints:t||null})}updateEachEdgeAttributes(e,t){if(typeof e!="function")throw new Dt("Graph.updateEachEdgeAttributes: expecting an updater function.");if(t&&!a2(t))throw new Dt("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const i=this._edges.values();let r,s,o,a;for(;r=i.next(),r.done!==!0;)s=r.value,o=s.source,a=s.target,s.attributes=e(s.key,s.attributes,o.key,a.key,o.attributes,a.attributes,s.undirected);this.emit("eachEdgeAttributesUpdated",{hints:t||null})}forEachAdjacencyEntry(e){if(typeof e!="function")throw new Dt("Graph.forEachAdjacencyEntry: expecting a callback.");kS(!1,!1,!1,this,e)}forEachAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new Dt("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");kS(!1,!1,!0,this,e)}forEachAssymetricAdjacencyEntry(e){if(typeof e!="function")throw new Dt("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");kS(!1,!0,!1,this,e)}forEachAssymetricAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new Dt("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");kS(!1,!0,!0,this,e)}nodes(){return Array.from(this._nodes.keys())}forEachNode(e){if(typeof e!="function")throw new Dt("Graph.forEachNode: expecting a callback.");const t=this._nodes.values();let i,r;for(;i=t.next(),i.done!==!0;)r=i.value,e(r.key,r.attributes)}findNode(e){if(typeof e!="function")throw new Dt("Graph.findNode: expecting a callback.");const t=this._nodes.values();let i,r;for(;i=t.next(),i.done!==!0;)if(r=i.value,e(r.key,r.attributes))return r.key}mapNodes(e){if(typeof e!="function")throw new Dt("Graph.mapNode: expecting a callback.");const t=this._nodes.values();let i,r;const s=new Array(this.order);let o=0;for(;i=t.next(),i.done!==!0;)r=i.value,s[o++]=e(r.key,r.attributes);return s}someNode(e){if(typeof e!="function")throw new Dt("Graph.someNode: expecting a callback.");const t=this._nodes.values();let i,r;for(;i=t.next(),i.done!==!0;)if(r=i.value,e(r.key,r.attributes))return!0;return!1}everyNode(e){if(typeof e!="function")throw new Dt("Graph.everyNode: expecting a callback.");const t=this._nodes.values();let i,r;for(;i=t.next(),i.done!==!0;)if(r=i.value,!e(r.key,r.attributes))return!1;return!0}filterNodes(e){if(typeof e!="function")throw new Dt("Graph.filterNodes: expecting a callback.");const t=this._nodes.values();let i,r;const s=[];for(;i=t.next(),i.done!==!0;)r=i.value,e(r.key,r.attributes)&&s.push(r.key);return s}reduceNodes(e,t){if(typeof e!="function")throw new Dt("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new Dt("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");let i=t;const r=this._nodes.values();let s,o;for(;s=r.next(),s.done!==!0;)o=s.value,i=e(i,o.key,o.attributes);return i}nodeEntries(){const e=this._nodes.values();return{[Symbol.iterator](){return this},next(){const t=e.next();if(t.done)return t;const i=t.value;return{value:{node:i.key,attributes:i.attributes},done:!1}}}}export(){const e=new Array(this._nodes.size);let t=0;this._nodes.forEach((r,s)=>{e[t++]=dfe(s,r)});const i=new Array(this._edges.size);return t=0,this._edges.forEach((r,s)=>{i[t++]=pfe(this.type,s,r)}),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:e,edges:i}}import(e,t=!1){if(e instanceof Si)return e.forEachNode((l,u)=>{t?this.mergeNode(l,u):this.addNode(l,u)}),e.forEachEdge((l,u,h,p,m,y,b)=>{t?b?this.mergeUndirectedEdgeWithKey(l,h,p,u):this.mergeDirectedEdgeWithKey(l,h,p,u):b?this.addUndirectedEdgeWithKey(l,h,p,u):this.addDirectedEdgeWithKey(l,h,p,u)}),this;if(!Cs(e))throw new Dt("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(e.attributes){if(!Cs(e.attributes))throw new Dt("Graph.import: invalid attributes. Expecting a plain object.");t?this.mergeAttributes(e.attributes):this.replaceAttributes(e.attributes)}let i,r,s,o,a;if(e.nodes){if(s=e.nodes,!Array.isArray(s))throw new Dt("Graph.import: invalid nodes. Expecting an array.");for(i=0,r=s.length;i<r;i++){o=s[i],mfe(o);const{key:l,attributes:u}=o;t?this.mergeNode(l,u):this.addNode(l,u)}}if(e.edges){let l=!1;if(this.type==="undirected"&&(l=!0),s=e.edges,!Array.isArray(s))throw new Dt("Graph.import: invalid edges. Expecting an array.");for(i=0,r=s.length;i<r;i++){a=s[i],gfe(a);const{source:u,target:h,attributes:p,undirected:m=l}=a;let y;"key"in a?(y=t?m?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:m?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey,y.call(this,a.key,u,h,p)):(y=t?m?this.mergeUndirectedEdge:this.mergeDirectedEdge:m?this.addUndirectedEdge:this.addDirectedEdge,y.call(this,u,h,p))}}return this}nullCopy(e){const t=new Si(es({},this._options,e));return t.replaceAttributes(es({},this.getAttributes())),t}emptyCopy(e){const t=this.nullCopy(e);return this._nodes.forEach((i,r)=>{const s=es({},i.attributes);i=new t.NodeDataClass(r,s),t._nodes.set(r,i)}),t}copy(e){if(e=e||{},typeof e.type=="string"&&e.type!==this.type&&e.type!=="mixed")throw new $t(`Graph.copy: cannot create an incompatible copy from "${this.type}" type to "${e.type}" because this would mean losing information about the current graph.`);if(typeof e.multi=="boolean"&&e.multi!==this.multi&&e.multi!==!0)throw new $t("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if(typeof e.allowSelfLoops=="boolean"&&e.allowSelfLoops!==this.allowSelfLoops&&e.allowSelfLoops!==!0)throw new $t("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");const t=this.emptyCopy(e),i=this._edges.values();let r,s;for(;r=i.next(),r.done!==!0;)s=r.value,dV(t,"copy",!1,s.undirected,s.key,s.source.key,s.target.key,es({},s.attributes));return t}toJSON(){return this.export()}toString(){return"[object Graph]"}inspect(){const e={};this._nodes.forEach((s,o)=>{e[o]=s.attributes});const t={},i={};this._edges.forEach((s,o)=>{const a=s.undirected?"--":"->";let l="",u=s.source.key,h=s.target.key,p;s.undirected&&u>h&&(p=u,u=h,h=p);const m=`(${u})${a}(${h})`;o.startsWith("geid_")?this.multi&&(typeof i[m]>"u"?i[m]=0:i[m]++,l+=`${i[m]}. `):l+=`[${o}]: `,l+=m,t[l]=s.attributes});const r={};for(const s in this)this.hasOwnProperty(s)&&!l2.has(s)&&typeof this[s]!="function"&&typeof s!="symbol"&&(r[s]=this[s]);return r.attributes=this._attributes,r.nodes=e,r.edges=t,ll(r,"constructor",this.constructor),r}}typeof Symbol<"u"&&(Si.prototype[Symbol.for("nodejs.util.inspect.custom")]=Si.prototype.inspect);bfe.forEach(n=>{["add","merge","update"].forEach(e=>{const t=n.name(e),i=e==="add"?dV:Sfe;n.generateKey?Si.prototype[t]=function(r,s,o){return i(this,t,!0,(n.type||this.type)==="undirected",null,r,s,o,e==="update")}:Si.prototype[t]=function(r,s,o,a){return i(this,t,!1,(n.type||this.type)==="undirected",r,s,o,a,e==="update")}})});Oue(Si);Gue(Si);rfe(Si);hfe(Si);class pV extends Si{constructor(e){const t=es({type:"directed"},e);if("multi"in t&&t.multi!==!1)throw new Dt("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(t.type!=="directed")throw new Dt('DirectedGraph.from: inconsistent "'+t.type+'" type in given options!');super(t)}}class mV extends Si{constructor(e){const t=es({type:"undirected"},e);if("multi"in t&&t.multi!==!1)throw new Dt("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(t.type!=="undirected")throw new Dt('UndirectedGraph.from: inconsistent "'+t.type+'" type in given options!');super(t)}}class gV extends Si{constructor(e){const t=es({multi:!0},e);if("multi"in t&&t.multi!==!0)throw new Dt("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");super(t)}}class vV extends Si{constructor(e){const t=es({type:"directed",multi:!0},e);if("multi"in t&&t.multi!==!0)throw new Dt("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(t.type!=="directed")throw new Dt('MultiDirectedGraph.from: inconsistent "'+t.type+'" type in given options!');super(t)}}class yV extends Si{constructor(e){const t=es({type:"undirected",multi:!0},e);if("multi"in t&&t.multi!==!0)throw new Dt("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(t.type!=="undirected")throw new Dt('MultiUndirectedGraph.from: inconsistent "'+t.type+'" type in given options!');super(t)}}function J0(n){n.from=function(e,t){const i=es({},e.options,t),r=new n(i);return r.import(e),r}}J0(Si);J0(pV);J0(mV);J0(gV);J0(vV);J0(yV);Si.Graph=Si;Si.DirectedGraph=pV;Si.UndirectedGraph=mV;Si.MultiGraph=gV;Si.MultiDirectedGraph=vV;Si.MultiUndirectedGraph=yV;Si.InvalidArgumentsGraphError=Dt;Si.NotFoundGraphError=_t;Si.UsageGraphError=$t;const wfe=n=>n;function bV(n,e=wfe){const t=Rs.useSyncExternalStore(n.subscribe,Rs.useCallback(()=>e(n.getState()),[n,e]),Rs.useCallback(()=>e(n.getInitialState()),[n,e]));return Rs.useDebugValue(t),t}const u2=n=>{const e=k8(n),t=i=>bV(e,i);return Object.assign(t,e),t},Efe=(n=>n?u2(n):u2),f2=n=>Symbol.iterator in n,h2=n=>"entries"in n,d2=(n,e)=>{const t=n instanceof Map?n:new Map(n.entries()),i=e instanceof Map?e:new Map(e.entries());if(t.size!==i.size)return!1;for(const[r,s]of t)if(!i.has(r)||!Object.is(s,i.get(r)))return!1;return!0},Tfe=(n,e)=>{const t=n[Symbol.iterator](),i=e[Symbol.iterator]();let r=t.next(),s=i.next();for(;!r.done&&!s.done;){if(!Object.is(r.value,s.value))return!1;r=t.next(),s=i.next()}return!!r.done&&!!s.done};function Mfe(n,e){return Object.is(n,e)?!0:typeof n!="object"||n===null||typeof e!="object"||e===null||Object.getPrototypeOf(n)!==Object.getPrototypeOf(e)?!1:f2(n)&&f2(e)?h2(n)&&h2(e)?d2(n,e):Tfe(n,e):d2({entries:()=>Object.entries(n)},{entries:()=>Object.entries(e)})}function Afe(n){const e=Rs.useRef(void 0);return t=>{const i=n(t);return Mfe(e.current,i)?e.current:e.current=i}}const pb=(n,e)=>{const t=n[0].index!==null,i=new Set(Object.keys(n[0].attributes)),r=new Set(Object.keys(n[0].morphAttributes)),s={},o={},a=n[0].morphTargetsRelative,l=new fn;let u=0;if(n.forEach((h,p)=>{let m=0;if(t!==(h.index!==null))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+p+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(let y in h.attributes){if(!i.has(y))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+p+'. All geometries must have compatible attributes; make sure "'+y+'" attribute exists among all geometries, or in none of them.'),null;s[y]===void 0&&(s[y]=[]),s[y].push(h.attributes[y]),m++}if(m!==i.size)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+p+". Make sure all geometries have the same number of attributes."),null;if(a!==h.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+p+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(let y in h.morphAttributes){if(!r.has(y))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+p+".  .morphAttributes must be consistent throughout all geometries."),null;o[y]===void 0&&(o[y]=[]),o[y].push(h.morphAttributes[y])}if(l.userData.mergedUserData=l.userData.mergedUserData||[],l.userData.mergedUserData.push(h.userData),e){let y;if(h.index)y=h.index.count;else if(h.attributes.position!==void 0)y=h.attributes.position.count;else return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+p+". The geometry must have either an index or a position attribute"),null;l.addGroup(u,y,p),u+=y}}),t){let h=0;const p=[];n.forEach(m=>{const y=m.index;for(let b=0;b<y.count;++b)p.push(y.getX(b)+h);h+=m.attributes.position.count}),l.setIndex(p)}for(let h in s){const p=p2(s[h]);if(!p)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+h+" attribute."),null;l.setAttribute(h,p)}for(let h in o){const p=o[h][0].length;if(p===0)break;l.morphAttributes=l.morphAttributes||{},l.morphAttributes[h]=[];for(let m=0;m<p;++m){const y=[];for(let x=0;x<o[h].length;++x)y.push(o[h][x][m]);const b=p2(y);if(!b)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+h+" morphAttribute."),null;l.morphAttributes[h].push(b)}}return l},p2=n=>{let e,t,i,r=0;if(n.forEach(s=>{if(e===void 0&&(e=s.array.constructor),e!==s.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(t===void 0&&(t=s.itemSize),t!==s.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(i===void 0&&(i=s.normalized),i!==s.normalized)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;r+=s.array.length}),e&&t){const s=new e(r);let o=0;return n.forEach(a=>{s.set(a.array,o),o+=a.array.length}),new ai(s,t,i)}};function Cfe(n,e=Math.PI/3){const t=Math.cos(e),i=(1+1e-10)*100,r=[new ae,new ae,new ae],s=new ae,o=new ae,a=new ae,l=new ae;function u(x){const S=~~(x.x*i),_=~~(x.y*i),T=~~(x.z*i);return`${S},${_},${T}`}const h=n.index?n.toNonIndexed():n,p=h.attributes.position,m={};for(let x=0,S=p.count/3;x<S;x++){const _=3*x,T=r[0].fromBufferAttribute(p,_+0),A=r[1].fromBufferAttribute(p,_+1),M=r[2].fromBufferAttribute(p,_+2);s.subVectors(M,A),o.subVectors(T,A);const C=new ae().crossVectors(s,o).normalize();for(let R=0;R<3;R++){const L=r[R],I=u(L);I in m||(m[I]=[]),m[I].push(C)}}const y=new Float32Array(p.count*3),b=new ai(y,3,!1);for(let x=0,S=p.count/3;x<S;x++){const _=3*x,T=r[0].fromBufferAttribute(p,_+0),A=r[1].fromBufferAttribute(p,_+1),M=r[2].fromBufferAttribute(p,_+2);s.subVectors(M,A),o.subVectors(T,A),a.crossVectors(s,o).normalize();for(let C=0;C<3;C++){const R=r[C],L=u(R),I=m[L];l.set(0,0,0);for(let P=0,U=I.length;P<U;P++){const B=I[P];a.dot(B)>t&&l.add(B)}l.normalize(),b.setXYZ(_+C,l.x,l.y,l.z)}}return h.setAttribute("normal",b),h}const BC=new im,VC=new ae,Vg=new ae,Zl=new ae,hf=new ae,Kc=new ae,df=new ae,pf=new ae,Wy=new ae,Xy=new ae,qy=new ae,zS=new ae,Yy=new ae,$y=new ae,Zy=new ae;class m2{constructor(e,t,i){this.camera=e,this.scene=t,this.startPoint=new ae,this.endPoint=new ae,this.collection=[],this.deep=i||Number.MAX_VALUE}select(e,t){return this.startPoint=e||this.startPoint,this.endPoint=t||this.endPoint,this.collection=[],this.updateFrustum(this.startPoint,this.endPoint),this.searchChildInFrustum(BC,this.scene),this.collection}updateFrustum(e,t){if(e=e||this.startPoint,t=t||this.endPoint,e.x===t.x&&(t.x+=Number.EPSILON),e.y===t.y&&(t.y+=Number.EPSILON),this.camera.updateProjectionMatrix(),this.camera.updateMatrixWorld(),this.camera.isPerspectiveCamera){Vg.copy(e),Vg.x=Math.min(e.x,t.x),Vg.y=Math.max(e.y,t.y),t.x=Math.max(e.x,t.x),t.y=Math.min(e.y,t.y),Zl.setFromMatrixPosition(this.camera.matrixWorld),hf.copy(Vg),Kc.set(t.x,Vg.y,0),df.copy(t),pf.set(Vg.x,t.y,0),hf.unproject(this.camera),Kc.unproject(this.camera),df.unproject(this.camera),pf.unproject(this.camera),Yy.copy(hf).sub(Zl),$y.copy(Kc).sub(Zl),Zy.copy(df).sub(Zl),Yy.normalize(),$y.normalize(),Zy.normalize(),Yy.multiplyScalar(this.deep),$y.multiplyScalar(this.deep),Zy.multiplyScalar(this.deep),Yy.add(Zl),$y.add(Zl),Zy.add(Zl);var i=BC.planes;i[0].setFromCoplanarPoints(Zl,hf,Kc),i[1].setFromCoplanarPoints(Zl,Kc,df),i[2].setFromCoplanarPoints(df,pf,Zl),i[3].setFromCoplanarPoints(pf,hf,Zl),i[4].setFromCoplanarPoints(Kc,df,pf),i[5].setFromCoplanarPoints(Zy,$y,Yy),i[5].normal.multiplyScalar(-1)}else if(this.camera.isOrthographicCamera){const r=Math.min(e.x,t.x),s=Math.max(e.y,t.y),o=Math.max(e.x,t.x),a=Math.min(e.y,t.y);hf.set(r,s,-1),Kc.set(o,s,-1),df.set(o,a,-1),pf.set(r,a,-1),Wy.set(r,s,1),Xy.set(o,s,1),qy.set(o,a,1),zS.set(r,a,1),hf.unproject(this.camera),Kc.unproject(this.camera),df.unproject(this.camera),pf.unproject(this.camera),Wy.unproject(this.camera),Xy.unproject(this.camera),qy.unproject(this.camera),zS.unproject(this.camera);var i=BC.planes;i[0].setFromCoplanarPoints(hf,Wy,Xy),i[1].setFromCoplanarPoints(Kc,Xy,qy),i[2].setFromCoplanarPoints(qy,zS,pf),i[3].setFromCoplanarPoints(zS,Wy,hf),i[4].setFromCoplanarPoints(Kc,df,pf),i[5].setFromCoplanarPoints(qy,Xy,Wy),i[5].normal.multiplyScalar(-1)}else console.error("THREE.SelectionBox: Unsupported camera type.")}searchChildInFrustum(e,t){if((t.isMesh||t.isLine||t.isPoints)&&t.material!==void 0&&(t.geometry.boundingSphere===null&&t.geometry.computeBoundingSphere(),VC.copy(t.geometry.boundingSphere.center),VC.applyMatrix4(t.matrixWorld),e.containsPoint(VC)&&this.collection.push(t)),t.children.length>0)for(let i=0;i<t.children.length;i++)this.searchChildInFrustum(e,t.children[i])}}var Ky={},GC,g2;function Xf(){return g2||(g2=1,GC=function(e){return e!==null&&typeof e=="object"&&typeof e.addUndirectedEdgeWithKey=="function"&&typeof e.dropNode=="function"&&typeof e.multi=="boolean"}),GC}var v2;function Rfe(){if(v2)return Ky;v2=1;var n=Xf();function e(s,o,a,l){var u=o+"Centrality";if(!n(a))throw new Error("graphology-centrality/"+u+": the given graph is not a valid graphology instance.");if(o!=="degree"&&a.type==="undirected")throw new Error("graphology-centrality/"+u+": cannot compute "+o+" centrality on an undirected graph.");l=l||{};var h=l.nodeCentralityAttribute||u,p=a.order-1,m=a[o].bind(a);if(s){a.updateEachNodeAttributes(function(b,x){return x[h]=m(b)/p,x},{attributes:[h]});return}var y={};return a.forEachNode(function(b){y[b]=m(b)/p}),y}var t=e.bind(null,!1,"degree"),i=e.bind(null,!1,"inDegree"),r=e.bind(null,!1,"outDegree");return t.assign=e.bind(null,!0,"degree"),i.assign=e.bind(null,!0,"inDegree"),r.assign=e.bind(null,!0,"outDegree"),Ky.degreeCentrality=t,Ky.inDegreeCentrality=i,Ky.outDegreeCentrality=r,Ky}var Dfe=Rfe();function aw(n,e){return n==null||e==null?NaN:n<e?-1:n>e?1:n>=e?0:NaN}function Ofe(n,e){return n==null||e==null?NaN:e<n?-1:e>n?1:e>=n?0:NaN}function _V(n){let e,t,i;n.length!==2?(e=aw,t=(a,l)=>aw(n(a),l),i=(a,l)=>n(a)-l):(e=n===aw||n===Ofe?n:Lfe,t=n,i=n);function r(a,l,u=0,h=a.length){if(u<h){if(e(l,l)!==0)return h;do{const p=u+h>>>1;t(a[p],l)<0?u=p+1:h=p}while(u<h)}return u}function s(a,l,u=0,h=a.length){if(u<h){if(e(l,l)!==0)return h;do{const p=u+h>>>1;t(a[p],l)<=0?u=p+1:h=p}while(u<h)}return u}function o(a,l,u=0,h=a.length){const p=r(a,l,u,h-1);return p>u&&i(a[p-1],l)>-i(a[p],l)?p-1:p}return{left:r,center:o,right:s}}function Lfe(){return 0}function Pfe(n){return n===null?NaN:+n}const Ife=_V(aw),Nfe=Ife.right;_V(Pfe).center;const Ufe=Math.sqrt(50),kfe=Math.sqrt(10),zfe=Math.sqrt(2);function DE(n,e,t){const i=(e-n)/Math.max(0,t),r=Math.floor(Math.log10(i)),s=i/Math.pow(10,r),o=s>=Ufe?10:s>=kfe?5:s>=zfe?2:1;let a,l,u;return r<0?(u=Math.pow(10,-r)/o,a=Math.round(n*u),l=Math.round(e*u),a/u<n&&++a,l/u>e&&--l,u=-u):(u=Math.pow(10,r)*o,a=Math.round(n/u),l=Math.round(e/u),a*u<n&&++a,l*u>e&&--l),l<a&&.5<=t&&t<2?DE(n,e,t*2):[a,l,u]}function Ffe(n,e,t){if(e=+e,n=+n,t=+t,!(t>0))return[];if(n===e)return[n];const i=e<n,[r,s,o]=i?DE(e,n,t):DE(n,e,t);if(!(s>=r))return[];const a=s-r+1,l=new Array(a);if(i)if(o<0)for(let u=0;u<a;++u)l[u]=(s-u)/-o;else for(let u=0;u<a;++u)l[u]=(s-u)*o;else if(o<0)for(let u=0;u<a;++u)l[u]=(r+u)/-o;else for(let u=0;u<a;++u)l[u]=(r+u)*o;return l}function U3(n,e,t){return e=+e,n=+n,t=+t,DE(n,e,t)[2]}function Bfe(n,e,t){e=+e,n=+n,t=+t;const i=e<n,r=i?U3(e,n,t):U3(n,e,t);return(i?-1:1)*(r<0?1/-r:r)}function Vfe(n,e){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(e).domain(n);break}return this}function iL(n,e,t){n.prototype=e.prototype=t,t.constructor=n}function xV(n,e){var t=Object.create(n.prototype);for(var i in e)t[i]=e[i];return t}function F_(){}var d_=.7,OE=1/d_,u0="\\s*([+-]?\\d+)\\s*",p_="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",du="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Gfe=/^#([0-9a-f]{3,8})$/,Hfe=new RegExp(`^rgb\\(${u0},${u0},${u0}\\)$`),jfe=new RegExp(`^rgb\\(${du},${du},${du}\\)$`),Wfe=new RegExp(`^rgba\\(${u0},${u0},${u0},${p_}\\)$`),Xfe=new RegExp(`^rgba\\(${du},${du},${du},${p_}\\)$`),qfe=new RegExp(`^hsl\\(${p_},${du},${du}\\)$`),Yfe=new RegExp(`^hsla\\(${p_},${du},${du},${p_}\\)$`),y2={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};iL(F_,m_,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:b2,formatHex:b2,formatHex8:$fe,formatHsl:Zfe,formatRgb:_2,toString:_2});function b2(){return this.rgb().formatHex()}function $fe(){return this.rgb().formatHex8()}function Zfe(){return SV(this).formatHsl()}function _2(){return this.rgb().formatRgb()}function m_(n){var e,t;return n=(n+"").trim().toLowerCase(),(e=Gfe.exec(n))?(t=e[1].length,e=parseInt(e[1],16),t===6?x2(e):t===3?new aa(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?FS(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?FS(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Hfe.exec(n))?new aa(e[1],e[2],e[3],1):(e=jfe.exec(n))?new aa(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Wfe.exec(n))?FS(e[1],e[2],e[3],e[4]):(e=Xfe.exec(n))?FS(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=qfe.exec(n))?E2(e[1],e[2]/100,e[3]/100,1):(e=Yfe.exec(n))?E2(e[1],e[2]/100,e[3]/100,e[4]):y2.hasOwnProperty(n)?x2(y2[n]):n==="transparent"?new aa(NaN,NaN,NaN,0):null}function x2(n){return new aa(n>>16&255,n>>8&255,n&255,1)}function FS(n,e,t,i){return i<=0&&(n=e=t=NaN),new aa(n,e,t,i)}function Kfe(n){return n instanceof F_||(n=m_(n)),n?(n=n.rgb(),new aa(n.r,n.g,n.b,n.opacity)):new aa}function k3(n,e,t,i){return arguments.length===1?Kfe(n):new aa(n,e,t,i??1)}function aa(n,e,t,i){this.r=+n,this.g=+e,this.b=+t,this.opacity=+i}iL(aa,k3,xV(F_,{brighter(n){return n=n==null?OE:Math.pow(OE,n),new aa(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?d_:Math.pow(d_,n),new aa(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new aa(Hp(this.r),Hp(this.g),Hp(this.b),LE(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:S2,formatHex:S2,formatHex8:Qfe,formatRgb:w2,toString:w2}));function S2(){return`#${Up(this.r)}${Up(this.g)}${Up(this.b)}`}function Qfe(){return`#${Up(this.r)}${Up(this.g)}${Up(this.b)}${Up((isNaN(this.opacity)?1:this.opacity)*255)}`}function w2(){const n=LE(this.opacity);return`${n===1?"rgb(":"rgba("}${Hp(this.r)}, ${Hp(this.g)}, ${Hp(this.b)}${n===1?")":`, ${n})`}`}function LE(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function Hp(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function Up(n){return n=Hp(n),(n<16?"0":"")+n.toString(16)}function E2(n,e,t,i){return i<=0?n=e=t=NaN:t<=0||t>=1?n=e=NaN:e<=0&&(n=NaN),new sc(n,e,t,i)}function SV(n){if(n instanceof sc)return new sc(n.h,n.s,n.l,n.opacity);if(n instanceof F_||(n=m_(n)),!n)return new sc;if(n instanceof sc)return n;n=n.rgb();var e=n.r/255,t=n.g/255,i=n.b/255,r=Math.min(e,t,i),s=Math.max(e,t,i),o=NaN,a=s-r,l=(s+r)/2;return a?(e===s?o=(t-i)/a+(t<i)*6:t===s?o=(i-e)/a+2:o=(e-t)/a+4,a/=l<.5?s+r:2-s-r,o*=60):a=l>0&&l<1?0:o,new sc(o,a,l,n.opacity)}function Jfe(n,e,t,i){return arguments.length===1?SV(n):new sc(n,e,t,i??1)}function sc(n,e,t,i){this.h=+n,this.s=+e,this.l=+t,this.opacity=+i}iL(sc,Jfe,xV(F_,{brighter(n){return n=n==null?OE:Math.pow(OE,n),new sc(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?d_:Math.pow(d_,n),new sc(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,e=isNaN(n)||isNaN(this.s)?0:this.s,t=this.l,i=t+(t<.5?t:1-t)*e,r=2*t-i;return new aa(HC(n>=240?n-240:n+120,r,i),HC(n,r,i),HC(n<120?n+240:n-120,r,i),this.opacity)},clamp(){return new sc(T2(this.h),BS(this.s),BS(this.l),LE(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=LE(this.opacity);return`${n===1?"hsl(":"hsla("}${T2(this.h)}, ${BS(this.s)*100}%, ${BS(this.l)*100}%${n===1?")":`, ${n})`}`}}));function T2(n){return n=(n||0)%360,n<0?n+360:n}function BS(n){return Math.max(0,Math.min(1,n||0))}function HC(n,e,t){return(n<60?e+(t-e)*n/60:n<180?t:n<240?e+(t-e)*(240-n)/60:e)*255}const rL=n=>()=>n;function ehe(n,e){return function(t){return n+t*e}}function the(n,e,t){return n=Math.pow(n,t),e=Math.pow(e,t)-n,t=1/t,function(i){return Math.pow(n+i*e,t)}}function nhe(n){return(n=+n)==1?wV:function(e,t){return t-e?the(e,t,n):rL(isNaN(e)?t:e)}}function wV(n,e){var t=e-n;return t?ehe(n,t):rL(isNaN(n)?e:n)}const M2=(function n(e){var t=nhe(e);function i(r,s){var o=t((r=k3(r)).r,(s=k3(s)).r),a=t(r.g,s.g),l=t(r.b,s.b),u=wV(r.opacity,s.opacity);return function(h){return r.r=o(h),r.g=a(h),r.b=l(h),r.opacity=u(h),r+""}}return i.gamma=n,i})(1);function ihe(n,e){e||(e=[]);var t=n?Math.min(e.length,n.length):0,i=e.slice(),r;return function(s){for(r=0;r<t;++r)i[r]=n[r]*(1-s)+e[r]*s;return i}}function rhe(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function she(n,e){var t=e?e.length:0,i=n?Math.min(t,n.length):0,r=new Array(i),s=new Array(t),o;for(o=0;o<i;++o)r[o]=sL(n[o],e[o]);for(;o<t;++o)s[o]=e[o];return function(a){for(o=0;o<i;++o)s[o]=r[o](a);return s}}function ohe(n,e){var t=new Date;return n=+n,e=+e,function(i){return t.setTime(n*(1-i)+e*i),t}}function PE(n,e){return n=+n,e=+e,function(t){return n*(1-t)+e*t}}function ahe(n,e){var t={},i={},r;(n===null||typeof n!="object")&&(n={}),(e===null||typeof e!="object")&&(e={});for(r in e)r in n?t[r]=sL(n[r],e[r]):i[r]=e[r];return function(s){for(r in t)i[r]=t[r](s);return i}}var z3=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,jC=new RegExp(z3.source,"g");function lhe(n){return function(){return n}}function che(n){return function(e){return n(e)+""}}function uhe(n,e){var t=z3.lastIndex=jC.lastIndex=0,i,r,s,o=-1,a=[],l=[];for(n=n+"",e=e+"";(i=z3.exec(n))&&(r=jC.exec(e));)(s=r.index)>t&&(s=e.slice(t,s),a[o]?a[o]+=s:a[++o]=s),(i=i[0])===(r=r[0])?a[o]?a[o]+=r:a[++o]=r:(a[++o]=null,l.push({i:o,x:PE(i,r)})),t=jC.lastIndex;return t<e.length&&(s=e.slice(t),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?che(l[0].x):lhe(e):(e=l.length,function(u){for(var h=0,p;h<e;++h)a[(p=l[h]).i]=p.x(u);return a.join("")})}function sL(n,e){var t=typeof e,i;return e==null||t==="boolean"?rL(e):(t==="number"?PE:t==="string"?(i=m_(e))?(e=i,M2):uhe:e instanceof m_?M2:e instanceof Date?ohe:rhe(e)?ihe:Array.isArray(e)?she:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?ahe:PE)(n,e)}function fhe(n,e){return n=+n,e=+e,function(t){return Math.round(n*(1-t)+e*t)}}function hhe(n){return function(){return n}}function dhe(n){return+n}var A2=[0,1];function i0(n){return n}function F3(n,e){return(e-=n=+n)?function(t){return(t-n)/e}:hhe(isNaN(e)?NaN:.5)}function phe(n,e){var t;return n>e&&(t=n,n=e,e=t),function(i){return Math.max(n,Math.min(e,i))}}function mhe(n,e,t){var i=n[0],r=n[1],s=e[0],o=e[1];return r<i?(i=F3(r,i),s=t(o,s)):(i=F3(i,r),s=t(s,o)),function(a){return s(i(a))}}function ghe(n,e,t){var i=Math.min(n.length,e.length)-1,r=new Array(i),s=new Array(i),o=-1;for(n[i]<n[0]&&(n=n.slice().reverse(),e=e.slice().reverse());++o<i;)r[o]=F3(n[o],n[o+1]),s[o]=t(e[o],e[o+1]);return function(a){var l=Nfe(n,a,1,i)-1;return s[l](r[l](a))}}function vhe(n,e){return e.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown())}function yhe(){var n=A2,e=A2,t=sL,i,r,s,o=i0,a,l,u;function h(){var m=Math.min(n.length,e.length);return o!==i0&&(o=phe(n[0],n[m-1])),a=m>2?ghe:mhe,l=u=null,p}function p(m){return m==null||isNaN(m=+m)?s:(l||(l=a(n.map(i),e,t)))(i(o(m)))}return p.invert=function(m){return o(r((u||(u=a(e,n.map(i),PE)))(m)))},p.domain=function(m){return arguments.length?(n=Array.from(m,dhe),h()):n.slice()},p.range=function(m){return arguments.length?(e=Array.from(m),h()):e.slice()},p.rangeRound=function(m){return e=Array.from(m),t=fhe,h()},p.clamp=function(m){return arguments.length?(o=m?!0:i0,h()):o!==i0},p.interpolate=function(m){return arguments.length?(t=m,h()):t},p.unknown=function(m){return arguments.length?(s=m,p):s},function(m,y){return i=m,r=y,h()}}function bhe(){return yhe()(i0,i0)}function _he(n){return Math.abs(n=Math.round(n))>=1e21?n.toLocaleString("en").replace(/,/g,""):n.toString(10)}function IE(n,e){if(!isFinite(n)||n===0)return null;var t=(n=e?n.toExponential(e-1):n.toExponential()).indexOf("e"),i=n.slice(0,t);return[i.length>1?i[0]+i.slice(2):i,+n.slice(t+1)]}function C0(n){return n=IE(Math.abs(n)),n?n[1]:NaN}function xhe(n,e){return function(t,i){for(var r=t.length,s=[],o=0,a=n[0],l=0;r>0&&a>0&&(l+a+1>i&&(a=Math.max(1,i-l)),s.push(t.substring(r-=a,r+a)),!((l+=a+1)>i));)a=n[o=(o+1)%n.length];return s.reverse().join(e)}}function She(n){return function(e){return e.replace(/[0-9]/g,function(t){return n[+t]})}}var whe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function NE(n){if(!(e=whe.exec(n)))throw new Error("invalid format: "+n);var e;return new oL({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}NE.prototype=oL.prototype;function oL(n){this.fill=n.fill===void 0?" ":n.fill+"",this.align=n.align===void 0?">":n.align+"",this.sign=n.sign===void 0?"-":n.sign+"",this.symbol=n.symbol===void 0?"":n.symbol+"",this.zero=!!n.zero,this.width=n.width===void 0?void 0:+n.width,this.comma=!!n.comma,this.precision=n.precision===void 0?void 0:+n.precision,this.trim=!!n.trim,this.type=n.type===void 0?"":n.type+""}oL.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Ehe(n){e:for(var e=n.length,t=1,i=-1,r;t<e;++t)switch(n[t]){case".":i=r=t;break;case"0":i===0&&(i=t),r=t;break;default:if(!+n[t])break e;i>0&&(i=0);break}return i>0?n.slice(0,i)+n.slice(r+1):n}var UE;function The(n,e){var t=IE(n,e);if(!t)return UE=void 0,n.toPrecision(e);var i=t[0],r=t[1],s=r-(UE=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,o=i.length;return s===o?i:s>o?i+new Array(s-o+1).join("0"):s>0?i.slice(0,s)+"."+i.slice(s):"0."+new Array(1-s).join("0")+IE(n,Math.max(0,e+s-1))[0]}function C2(n,e){var t=IE(n,e);if(!t)return n+"";var i=t[0],r=t[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}const R2={"%":(n,e)=>(n*100).toFixed(e),b:n=>Math.round(n).toString(2),c:n=>n+"",d:_he,e:(n,e)=>n.toExponential(e),f:(n,e)=>n.toFixed(e),g:(n,e)=>n.toPrecision(e),o:n=>Math.round(n).toString(8),p:(n,e)=>C2(n*100,e),r:C2,s:The,X:n=>Math.round(n).toString(16).toUpperCase(),x:n=>Math.round(n).toString(16)};function D2(n){return n}var O2=Array.prototype.map,L2=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Mhe(n){var e=n.grouping===void 0||n.thousands===void 0?D2:xhe(O2.call(n.grouping,Number),n.thousands+""),t=n.currency===void 0?"":n.currency[0]+"",i=n.currency===void 0?"":n.currency[1]+"",r=n.decimal===void 0?".":n.decimal+"",s=n.numerals===void 0?D2:She(O2.call(n.numerals,String)),o=n.percent===void 0?"%":n.percent+"",a=n.minus===void 0?"":n.minus+"",l=n.nan===void 0?"NaN":n.nan+"";function u(p,m){p=NE(p);var y=p.fill,b=p.align,x=p.sign,S=p.symbol,_=p.zero,T=p.width,A=p.comma,M=p.precision,C=p.trim,R=p.type;R==="n"?(A=!0,R="g"):R2[R]||(M===void 0&&(M=12),C=!0,R="g"),(_||y==="0"&&b==="=")&&(_=!0,y="0",b="=");var L=(m&&m.prefix!==void 0?m.prefix:"")+(S==="$"?t:S==="#"&&/[boxX]/.test(R)?"0"+R.toLowerCase():""),I=(S==="$"?i:/[%p]/.test(R)?o:"")+(m&&m.suffix!==void 0?m.suffix:""),P=R2[R],U=/[defgprs%]/.test(R);M=M===void 0?6:/[gprs]/.test(R)?Math.max(1,Math.min(21,M)):Math.max(0,Math.min(20,M));function B(F){var z=L,W=I,X,j,G;if(R==="c")W=P(F)+W,F="";else{F=+F;var K=F<0||1/F<0;if(F=isNaN(F)?l:P(Math.abs(F),M),C&&(F=Ehe(F)),K&&+F==0&&x!=="+"&&(K=!1),z=(K?x==="("?x:a:x==="-"||x==="("?"":x)+z,W=(R==="s"&&!isNaN(F)&&UE!==void 0?L2[8+UE/3]:"")+W+(K&&x==="("?")":""),U){for(X=-1,j=F.length;++X<j;)if(G=F.charCodeAt(X),48>G||G>57){W=(G===46?r+F.slice(X+1):F.slice(X))+W,F=F.slice(0,X);break}}}A&&!_&&(F=e(F,1/0));var J=z.length+F.length+W.length,ee=J<T?new Array(T-J+1).join(y):"";switch(A&&_&&(F=e(ee+F,ee.length?T-W.length:1/0),ee=""),b){case"<":F=z+F+W+ee;break;case"=":F=z+ee+F+W;break;case"^":F=ee.slice(0,J=ee.length>>1)+z+F+W+ee.slice(J);break;default:F=ee+z+F+W;break}return s(F)}return B.toString=function(){return p+""},B}function h(p,m){var y=Math.max(-8,Math.min(8,Math.floor(C0(m)/3)))*3,b=Math.pow(10,-y),x=u((p=NE(p),p.type="f",p),{suffix:L2[8+y/3]});return function(S){return x(b*S)}}return{format:u,formatPrefix:h}}var VS,EV,TV;Ahe({thousands:",",grouping:[3],currency:["$",""]});function Ahe(n){return VS=Mhe(n),EV=VS.format,TV=VS.formatPrefix,VS}function Che(n){return Math.max(0,-C0(Math.abs(n)))}function Rhe(n,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(C0(e)/3)))*3-C0(Math.abs(n)))}function Dhe(n,e){return n=Math.abs(n),e=Math.abs(e)-n,Math.max(0,C0(e)-C0(n))+1}function Ohe(n,e,t,i){var r=Bfe(n,e,t),s;switch(i=NE(i??",f"),i.type){case"s":{var o=Math.max(Math.abs(n),Math.abs(e));return i.precision==null&&!isNaN(s=Rhe(r,o))&&(i.precision=s),TV(i,o)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(s=Dhe(r,Math.max(Math.abs(n),Math.abs(e))))&&(i.precision=s-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(s=Che(r))&&(i.precision=s-(i.type==="%")*2);break}}return EV(i)}function Lhe(n){var e=n.domain;return n.ticks=function(t){var i=e();return Ffe(i[0],i[i.length-1],t??10)},n.tickFormat=function(t,i){var r=e();return Ohe(r[0],r[r.length-1],t??10,i)},n.nice=function(t){t==null&&(t=10);var i=e(),r=0,s=i.length-1,o=i[r],a=i[s],l,u,h=10;for(a<o&&(u=o,o=a,a=u,u=r,r=s,s=u);h-- >0;){if(u=U3(o,a,t),u===l)return i[r]=o,i[s]=a,e(i);if(u>0)o=Math.floor(o/u)*u,a=Math.ceil(a/u)*u;else if(u<0)o=Math.ceil(o*u)/u,a=Math.floor(a*u)/u;else break;l=u}return n},n}function MV(){var n=bhe();return n.copy=function(){return vhe(n,MV())},Vfe.apply(n,arguments),Lhe(n)}var WC,P2;function aL(){if(P2)return WC;P2=1;function n(t){return!t||typeof t!="object"||typeof t=="function"||Array.isArray(t)||t instanceof Set||t instanceof Map||t instanceof RegExp||t instanceof Date}function e(t,i){t=t||{};var r={};for(var s in i){var o=t[s],a=i[s];if(!n(a)){r[s]=e(o,a);continue}o===void 0?r[s]=a:r[s]=o}return r}return WC=e,WC}var GS={},XC={},I2;function AV(){return I2||(I2=1,(function(n){var e=Math.pow(2,8)-1,t=Math.pow(2,16)-1,i=Math.pow(2,32)-1,r=Math.pow(2,7)-1,s=Math.pow(2,15)-1,o=Math.pow(2,31)-1;n.getPointerArray=function(l){var u=l-1;if(u<=e)return Uint8Array;if(u<=t)return Uint16Array;if(u<=i)return Uint32Array;throw new Error("mnemonist: Pointer Array of size > 4294967295 is not supported.")},n.getSignedPointerArray=function(l){var u=l-1;return u<=r?Int8Array:u<=s?Int16Array:u<=o?Int32Array:Float64Array},n.getNumberType=function(l){return l===(l|0)?Math.sign(l)===-1?l<=127&&l>=-128?Int8Array:l<=32767&&l>=-32768?Int16Array:Int32Array:l<=255?Uint8Array:l<=65535?Uint16Array:Uint32Array:Float64Array};var a={Uint8Array:1,Int8Array:2,Uint16Array:3,Int16Array:4,Uint32Array:5,Int32Array:6,Float32Array:7,Float64Array:8};n.getMinimalRepresentation=function(l,u){var h=null,p=0,m,y,b,x,S;for(x=0,S=l.length;x<S;x++)b=u?u(l[x]):l[x],y=n.getNumberType(b),m=a[y.name],m>p&&(p=m,h=y);return h},n.isTypedArray=function(l){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView(l)},n.concat=function(){var l=0,u,h,p;for(u=0,p=arguments.length;u<p;u++)l+=arguments[u].length;var m=new arguments[0].constructor(l);for(u=0,h=0;u<p;u++)m.set(arguments[u],h),h+=arguments[u].length;return m},n.indices=function(l){for(var u=n.getPointerArray(l),h=new u(l),p=0;p<l;p++)h[p]=p;return h}})(XC)),XC}var Qy={},N2;function WT(){if(N2)return Qy;N2=1;function n(i){return typeof i!="number"||isNaN(i)?1:i}function e(i,r){var s={},o=function(u){return typeof u>"u"?r:u};typeof r=="function"&&(o=r);var a=function(u){return o(u[i])},l=function(){return o(void 0)};return typeof i=="string"?(s.fromAttributes=a,s.fromGraph=function(u,h){return a(u.getNodeAttributes(h))},s.fromEntry=function(u,h){return a(h)}):typeof i=="function"?(s.fromAttributes=function(){throw new Error("graphology-utils/getters/createNodeValueGetter: irrelevant usage.")},s.fromGraph=function(u,h){return o(i(h,u.getNodeAttributes(h)))},s.fromEntry=function(u,h){return o(i(u,h))}):(s.fromAttributes=l,s.fromGraph=l,s.fromEntry=l),s}function t(i,r){var s={},o=function(u){return typeof u>"u"?r:u};typeof r=="function"&&(o=r);var a=function(u){return o(u[i])},l=function(){return o(void 0)};return typeof i=="string"?(s.fromAttributes=a,s.fromGraph=function(u,h){return a(u.getEdgeAttributes(h))},s.fromEntry=function(u,h){return a(h)},s.fromPartialEntry=s.fromEntry,s.fromMinimalEntry=s.fromEntry):typeof i=="function"?(s.fromAttributes=function(){throw new Error("graphology-utils/getters/createEdgeValueGetter: irrelevant usage.")},s.fromGraph=function(u,h){var p=u.extremities(h);return o(i(h,u.getEdgeAttributes(h),p[0],p[1],u.getNodeAttributes(p[0]),u.getNodeAttributes(p[1]),u.isUndirected(h)))},s.fromEntry=function(u,h,p,m,y,b,x){return o(i(u,h,p,m,y,b,x))},s.fromPartialEntry=function(u,h,p,m){return o(i(u,h,p,m))},s.fromMinimalEntry=function(u,h){return o(i(u,h))}):(s.fromAttributes=l,s.fromGraph=l,s.fromEntry=l,s.fromMinimalEntry=l),s}return Qy.createNodeValueGetter=e,Qy.createEdgeValueGetter=t,Qy.createEdgeWeightGetter=function(i){return t(i,n)},Qy}var U2;function Phe(){if(U2)return GS;U2=1;var n=AV(),e=WT().createEdgeWeightGetter;function t(s,o){return s==="outbound"||s==="inbound"?o.directedSize+o.undirectedSize*2:s==="in"||s==="out"||s==="directed"?o.directedSize:o.undirectedSize*2}function i(s,o){o=o||"outbound";var a=s[o+"Neighbors"].bind(s),l=t(o,s),u=n.getPointerArray(l),h=n.getPointerArray(s.order);this.graph=s,this.neighborhood=new h(l),this.starts=new u(s.order+1),this.nodes=s.nodes();var p={},m,y,b,x,S,_,T=0;for(m=0,y=s.order;m<y;m++)p[this.nodes[m]]=m;for(m=0,y=s.order;m<y;m++)for(S=this.nodes[m],_=a(S),this.starts[m]=T,b=0,x=_.length;b<x;b++)this.neighborhood[T++]=p[_[b]];this.starts[m]=l}i.prototype.bounds=function(s){return[this.starts[s],this.starts[s+1]]},i.prototype.project=function(){var s=this,o={};return s.nodes.forEach(function(a,l){o[a]=Array.from(s.neighborhood.slice(s.starts[l],s.starts[l+1])).map(function(u){return s.nodes[u]})}),o},i.prototype.collect=function(s){var o,a,l={};for(o=0,a=s.length;o<a;o++)l[this.nodes[o]]=s[o];return l},i.prototype.assign=function(s,o){var a=0;this.graph.updateEachNodeAttributes(function(l,u){return u[s]=o[a++],u},{attributes:[s]})},GS.NeighborhoodIndex=i;function r(s,o,a){a=a||"outbound";var l=s[a+"Edges"].bind(s),u=t(a,s),h=n.getPointerArray(u),p=n.getPointerArray(s.order),m=e(o).fromMinimalEntry;this.graph=s,this.neighborhood=new p(u),this.weights=new Float64Array(u),this.outDegrees=new Float64Array(s.order),this.starts=new h(s.order+1),this.nodes=s.nodes();var y={},b,x,S,_,T,A,M,C,R,L=0;for(b=0,x=s.order;b<x;b++)y[this.nodes[b]]=b;for(b=0,x=s.order;b<x;b++)for(T=this.nodes[b],M=l(T),this.starts[b]=L,S=0,_=M.length;S<_;S++)C=M[S],A=s.opposite(T,C),R=m(C,s.getEdgeAttributes(C)),this.neighborhood[L]=y[A],this.weights[L++]=R,this.outDegrees[b]+=R;this.starts[b]=u}return r.prototype.bounds=i.prototype.bounds,r.prototype.project=i.prototype.project,r.prototype.collect=i.prototype.collect,r.prototype.assign=i.prototype.assign,GS.WeightedNeighborhoodIndex=r,GS}var qC,k2;function Ihe(){if(k2)return qC;k2=1;var n=Xf(),e=aL(),t=Phe().WeightedNeighborhoodIndex,i={nodePagerankAttribute:"pagerank",getEdgeWeight:"weight",alpha:.85,maxIterations:100,tolerance:1e-6};function r(o,a,l){if(!n(a))throw new Error("graphology-metrics/centrality/pagerank: the given graph is not a valid graphology instance.");l=e(l,i);var u=l.alpha,h=l.maxIterations,p=l.tolerance,m=l.nodePagerankAttribute,y=a.order,b=1/y,x=new t(a,l.getEdgeWeight),S,_,T,A,M=new Float64Array(a.order),C=new Float64Array(x.weights.length),R=[];for(S=0;S<y;S++)for(M[S]=b,T=x.starts[S+1],A=x.outDegrees[S],A===0&&R.push(S),_=x.starts[S];_<T;_++)C[_]=x.weights[_]/A;for(var L=0,I=0,P,U,B,F=!1;L<h;){for(B=M,M=new Float64Array(a.order),P=0,S=0,T=R.length;S<T;S++)P+=B[R[S]];for(P*=u,S=0;S<y;S++){for(T=x.starts[S+1],_=x.starts[S];_<T;_++)U=x.neighborhood[_],M[U]+=u*B[S]*C[_];M[S]+=P*b+(1-u)*b}for(I=0,S=0;S<y;S++)I+=Math.abs(M[S]-B[S]);if(I<y*p){F=!0;break}L++}if(!F)throw Error("graphology-metrics/centrality/pagerank: failed to converge.");if(o){x.assign(m,M);return}return x.collect(M)}var s=r.bind(null,!1);return s.assign=r.bind(null,!0),qC=s,qC}var Nhe=Ihe();const Uhe=Do(Nhe);var Kl={},yp={},YC,z2;function khe(){if(z2)return YC;z2=1;function n(e){if(typeof e!="function")throw new Error("obliterator/iterator: expecting a function!");this.next=e}return typeof Symbol<"u"&&(n.prototype[Symbol.iterator]=function(){return this}),n.of=function(){var e=arguments,t=e.length,i=0;return new n(function(){return i>=t?{done:!0}:{done:!1,value:e[i++]}})},n.empty=function(){var e=new n(function(){return{done:!0}});return e},n.fromSequence=function(e){var t=0,i=e.length;return new n(function(){return t>=i?{done:!0}:{done:!1,value:e[t++]}})},n.is=function(e){return e instanceof n?!0:typeof e=="object"&&e!==null&&typeof e.next=="function"},YC=n,YC}var HS={},F2;function zhe(){return F2||(F2=1,HS.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u",HS.SYMBOL_SUPPORT=typeof Symbol<"u"),HS}var $C,B2;function lL(){if(B2)return $C;B2=1;var n=zhe(),e=n.ARRAY_BUFFER_SUPPORT,t=n.SYMBOL_SUPPORT;return $C=function(r,s){var o,a,l,u,h;if(!r)throw new Error("obliterator/forEach: invalid iterable.");if(typeof s!="function")throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(r)||e&&ArrayBuffer.isView(r)||typeof r=="string"||r.toString()==="[object Arguments]"){for(l=0,u=r.length;l<u;l++)s(r[l],l);return}if(typeof r.forEach=="function"){r.forEach(s);return}if(t&&Symbol.iterator in r&&typeof r.next!="function"&&(r=r[Symbol.iterator]()),typeof r.next=="function"){for(o=r,l=0;h=o.next(),h.done!==!0;)s(h.value,l),l++;return}for(a in r)r.hasOwnProperty(a)&&s(r[a],a)},$C}var ZC,V2;function Fhe(){if(V2)return ZC;V2=1;var n=khe(),e=lL();function t(){this.clear()}return t.prototype.clear=function(){this.items=[],this.offset=0,this.size=0},t.prototype.enqueue=function(i){return this.items.push(i),++this.size},t.prototype.dequeue=function(){if(this.size){var i=this.items[this.offset];return++this.offset*2>=this.items.length&&(this.items=this.items.slice(this.offset),this.offset=0),this.size--,i}},t.prototype.peek=function(){if(this.size)return this.items[this.offset]},t.prototype.forEach=function(i,r){r=arguments.length>1?r:this;for(var s=this.offset,o=0,a=this.items.length;s<a;s++,o++)i.call(r,this.items[s],o,this)},t.prototype.toArray=function(){return this.items.slice(this.offset)},t.prototype.values=function(){var i=this.items,r=this.offset;return new n(function(){if(r>=i.length)return{done:!0};var s=i[r];return r++,{value:s,done:!1}})},t.prototype.entries=function(){var i=this.items,r=this.offset,s=0;return new n(function(){if(r>=i.length)return{done:!0};var o=i[r];return r++,{value:[s++,o],done:!1}})},typeof Symbol<"u"&&(t.prototype[Symbol.iterator]=t.prototype.values),t.prototype.toString=function(){return this.toArray().join(",")},t.prototype.toJSON=function(){return this.toArray()},t.prototype.inspect=function(){var i=this.toArray();return Object.defineProperty(i,"constructor",{value:t,enumerable:!1}),i},typeof Symbol<"u"&&(t.prototype[Symbol.for("nodejs.util.inspect.custom")]=t.prototype.inspect),t.from=function(i){var r=new t;return e(i,function(s){r.enqueue(s)}),r},t.of=function(){return t.from(arguments)},ZC=t,ZC}var KC,G2;function Bhe(){return G2||(G2=1,KC=function(e,t){var i=t.length;if(i!==0){var r=e.length;e.length+=i;for(var s=0;s<i;s++)e[r+s]=t[s]}}),KC}var H2;function Vhe(){if(H2)return yp;H2=1;var n=Xf(),e=Fhe(),t=Bhe();function i(u,h,p){if(!n(u))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<3)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 3.");if(!u.hasNode(h))throw new Error('graphology-shortest-path: the "'+h+'" source node does not exist in the given graph.');if(!u.hasNode(p))throw new Error('graphology-shortest-path: the "'+p+'" target node does not exist in the given graph.');if(h=""+h,p=""+p,h===p)return[h];var m=u.inboundNeighbors.bind(u),y=u.outboundNeighbors.bind(u),b={},x={};b[h]=null,x[p]=null;var S=[h],_=[p],T,A,M,C,R,L,I,P,U=!1;e:for(;S.length&&_.length;)if(S.length<=_.length){for(T=S,S=[],R=0,I=T.length;R<I;R++)for(A=T[R],M=y(A),L=0,P=M.length;L<P;L++)if(C=M[L],C in b||(S.push(C),b[C]=A),C in x){U=!0;break e}}else for(T=_,_=[],R=0,I=T.length;R<I;R++)for(A=T[R],M=m(A),L=0,P=M.length;L<P;L++)if(C=M[L],C in x||(_.push(C),x[C]=A),C in b){U=!0;break e}if(!U)return null;for(var B=[];C;)B.unshift(C),C=b[C];for(C=x[B[B.length-1]];C;)B.push(C),C=x[C];return B.length?B:null}function r(u,h){if(!n(u))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<2)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 2.");if(!u.hasNode(h))throw new Error('graphology-shortest-path: the "'+h+'" source node does not exist in the given graph.');h=""+h;var p={},m={},y,b,x,S,_,T;for(p[h]=!0,m[h]=[h];Object.keys(p).length;){y=p,p={};for(x in y)for(b=u.outboundNeighbors(x),_=0,T=b.length;_<T;_++)S=b[_],m[S]||(m[S]=m[x].concat(S),p[S]=!0)}return m}function s(u,h,p){if(!n(h))throw new Error("graphology-shortest-path: invalid graphology instance.");if(!h.hasNode(p))throw new Error('graphology-shortest-path: the "'+p+'" source node does not exist in the given graph.');p=""+p;var m=new Set,y={},b=0;y[p]=0;for(var x=[p],S,_,T;x.length!==0;){var A=[];for(S=0,_=x.length;S<_;S++)T=x[S],!m.has(T)&&(m.add(T),t(A,h[u](T)),y[T]=b);b++,x=A}return y}var o=s.bind(null,"outboundNeighbors"),a=s.bind(null,"neighbors");function l(u,h){h=""+h;var p=[],m={},y={},b=u.nodes(),x,S,_,T,A,M,C,R,L;for(M=0,R=b.length;M<R;M++)T=b[M],m[T]=[],y[T]=0;var I={};y[h]=1,I[h]=0;for(var P=e.of(h);P.size;)for(T=P.dequeue(),p.push(T),x=I[T],S=y[T],_=u.outboundNeighbors(T),C=0,L=_.length;C<L;C++)A=_[C],A in I||(P.enqueue(A),I[A]=x+1),I[A]===x+1&&(y[A]+=S,m[A].push(T));return[p,m,y]}return yp.bidirectional=i,yp.singleSource=r,yp.singleSourceLength=o,yp.undirectedSingleSourceLength=a,yp.brandes=l,yp}var QC={},j2;function Ghe(){if(j2)return QC;j2=1;var n=function(){return!0};return QC.edgePathFromNodePath=function(e,t){var i=t.length,r,s,o,a;if(i<2)return s=t[0],a=e.multi?e.findEdge(s,s,n):e.edge(s,s),a?[a]:[];i--;var l=new Array(i);for(r=0;r<i;r++){if(s=t[r],o=t[r+1],a=e.multi?e.findOutboundEdge(s,o,n):e.edge(s,o),a===void 0)throw new Error("graphology-shortest-path: given path is impossible in given graph.");l[r]=a}return l},QC}var Jy={},Gg={},W2;function Hhe(){if(W2)return Gg;W2=1;var n=function(r,s){return r<s?-1:r>s?1:0},e=function(r,s){return r<s?1:r>s?-1:0};function t(r){return function(s,o){return r(o,s)}}function i(r){return r===2?function(s,o){return s[0]<o[0]?-1:s[0]>o[0]?1:s[1]<o[1]?-1:s[1]>o[1]?1:0}:function(s,o){for(var a=0;a<r;){if(s[a]<o[a])return-1;if(s[a]>o[a])return 1;a++}return 0}}return Gg.DEFAULT_COMPARATOR=n,Gg.DEFAULT_REVERSE_COMPARATOR=e,Gg.reverseComparator=t,Gg.createTupleComparator=i,Gg}var Hg={},X2;function jhe(){if(X2)return Hg;X2=1;var n=lL(),e=AV();function t(o){return Array.isArray(o)||e.isTypedArray(o)}function i(o){if(typeof o.length=="number")return o.length;if(typeof o.size=="number")return o.size}function r(o){var a=i(o),l=typeof a=="number"?new Array(a):[],u=0;return n(o,function(h){l[u++]=h}),l}function s(o){var a=i(o),l=typeof a=="number"?e.getPointerArray(a):Array,u=typeof a=="number"?new Array(a):[],h=typeof a=="number"?new l(a):[],p=0;return n(o,function(m){u[p]=m,h[p]=p++}),[u,h]}return Hg.isArrayLike=t,Hg.guessLength=i,Hg.toArray=r,Hg.toArrayWithIndices=s,Hg}var JC,q2;function CV(){if(q2)return JC;q2=1;var n=lL(),e=Hhe(),t=jhe(),i=e.DEFAULT_COMPARATOR,r=e.reverseComparator;function s(_,T,A,M){for(var C=T[M],R,L;M>A;){if(R=M-1>>1,L=T[R],_(C,L)<0){T[M]=L,M=R;continue}break}T[M]=C}function o(_,T,A){for(var M=T.length,C=A,R=T[A],L=2*A+1,I;L<M;)I=L+1,I<M&&_(T[L],T[I])>=0&&(L=I),T[A]=T[L],A=L,L=2*A+1;T[A]=R,s(_,T,C,A)}function a(_,T,A){T.push(A),s(_,T,0,T.length-1)}function l(_,T){var A=T.pop();if(T.length!==0){var M=T[0];return T[0]=A,o(_,T,0),M}return A}function u(_,T,A){if(T.length===0)throw new Error("mnemonist/heap.replace: cannot pop an empty heap.");var M=T[0];return T[0]=A,o(_,T,0),M}function h(_,T,A){var M;return T.length!==0&&_(T[0],A)<0&&(M=T[0],T[0]=A,A=M,o(_,T,0)),A}function p(_,T){for(var A=T.length,M=A>>1,C=M;--C>=0;)o(_,T,C)}function m(_,T){for(var A=T.length,M=0,C=new Array(A);M<A;)C[M++]=l(_,T);return C}function y(_,T,A){arguments.length===2&&(A=T,T=_,_=i);var M=r(_),C,R,L,I=1/0,P;if(T===1){if(t.isArrayLike(A)){for(C=0,R=A.length;C<R;C++)L=A[C],(I===1/0||_(L,I)<0)&&(I=L);return P=new A.constructor(1),P[0]=I,P}return n(A,function(B){(I===1/0||_(B,I)<0)&&(I=B)}),[I]}if(t.isArrayLike(A)){if(T>=A.length)return A.slice().sort(_);for(P=A.slice(0,T),p(M,P),C=T,R=A.length;C<R;C++)M(A[C],P[0])>0&&u(M,P,A[C]);return P.sort(_)}var U=t.guessLength(A);return U!==null&&U<T&&(T=U),P=new Array(T),C=0,n(A,function(B){C<T?P[C]=B:(C===T&&p(M,P),M(B,P[0])>0&&u(M,P,B)),C++}),P.length>C&&(P.length=C),P.sort(_)}function b(_,T,A){arguments.length===2&&(A=T,T=_,_=i);var M=r(_),C,R,L,I=-1/0,P;if(T===1){if(t.isArrayLike(A)){for(C=0,R=A.length;C<R;C++)L=A[C],(I===-1/0||_(L,I)>0)&&(I=L);return P=new A.constructor(1),P[0]=I,P}return n(A,function(B){(I===-1/0||_(B,I)>0)&&(I=B)}),[I]}if(t.isArrayLike(A)){if(T>=A.length)return A.slice().sort(M);for(P=A.slice(0,T),p(_,P),C=T,R=A.length;C<R;C++)_(A[C],P[0])>0&&u(_,P,A[C]);return P.sort(M)}var U=t.guessLength(A);return U!==null&&U<T&&(T=U),P=new Array(T),C=0,n(A,function(B){C<T?P[C]=B:(C===T&&p(_,P),_(B,P[0])>0&&u(_,P,B)),C++}),P.length>C&&(P.length=C),P.sort(M)}function x(_){if(this.clear(),this.comparator=_||i,typeof this.comparator!="function")throw new Error("mnemonist/Heap.constructor: given comparator should be a function.")}x.prototype.clear=function(){this.items=[],this.size=0},x.prototype.push=function(_){return a(this.comparator,this.items,_),++this.size},x.prototype.peek=function(){return this.items[0]},x.prototype.pop=function(){return this.size!==0&&this.size--,l(this.comparator,this.items)},x.prototype.replace=function(_){return u(this.comparator,this.items,_)},x.prototype.pushpop=function(_){return h(this.comparator,this.items,_)},x.prototype.consume=function(){return this.size=0,m(this.comparator,this.items)},x.prototype.toArray=function(){return m(this.comparator,this.items.slice())},x.prototype.inspect=function(){var _=this.toArray();return Object.defineProperty(_,"constructor",{value:x,enumerable:!1}),_},typeof Symbol<"u"&&(x.prototype[Symbol.for("nodejs.util.inspect.custom")]=x.prototype.inspect);function S(_){if(this.clear(),this.comparator=_||i,typeof this.comparator!="function")throw new Error("mnemonist/MaxHeap.constructor: given comparator should be a function.");this.comparator=r(this.comparator)}return S.prototype=x.prototype,x.from=function(_,T){var A=new x(T),M;return t.isArrayLike(_)?M=_.slice():M=t.toArray(_),p(A.comparator,M),A.items=M,A.size=M.length,A},S.from=function(_,T){var A=new S(T),M;return t.isArrayLike(_)?M=_.slice():M=t.toArray(_),p(A.comparator,M),A.items=M,A.size=M.length,A},x.siftUp=o,x.siftDown=s,x.push=a,x.pop=l,x.replace=u,x.pushpop=h,x.heapify=p,x.consume=m,x.nsmallest=y,x.nlargest=b,x.MinHeap=x,x.MaxHeap=S,JC=x,JC}var Y2;function Whe(){if(Y2)return Jy;Y2=1;var n=Xf(),e=WT().createEdgeWeightGetter,t=CV(),i="weight";function r(p,m){return p[0]>m[0]?1:p[0]<m[0]?-1:p[1]>m[1]?1:p[1]<m[1]?-1:p[2]>m[2]?1:p[2]<m[2]?-1:0}function s(p,m){return p[0]>m[0]?1:p[0]<m[0]?-1:p[1]>m[1]?1:p[1]<m[1]?-1:p[2]>m[2]?1:p[2]<m[2]?-1:p[3]>m[3]?1:p[3]<m[3]?-1:0}function o(p,m,y,b){if(m=""+m,y=""+y,!n(p))throw new Error("graphology-shortest-path/dijkstra: invalid graphology instance.");if(m&&!p.hasNode(m))throw new Error('graphology-shortest-path/dijkstra: the "'+m+'" source node does not exist in the given graph.');if(y&&!p.hasNode(y))throw new Error('graphology-shortest-path/dijkstra: the "'+y+'" target node does not exist in the given graph.');if(b=e(b||i).fromMinimalEntry,m===y)return[0,[m]];var x=[{},{}],S=[{},{}],_=[new t(r),new t(r)],T=[{},{}];S[0][m]=[m],S[1][y]=[y],T[0][m]=0,T[1][y]=0;var A=[],M=1/0,C=0,R=1,L,I,P,U,B,F,z,W,X;for(_[0].push([0,C++,m]),_[1].push([0,C++,y]);_[0].size&&_[1].size;)if(R=1-R,L=_[R].pop(),U=L[0],B=L[2],!(B in x[R])){if(x[R][B]=U,B in x[1-R])return[M,A];for(I=R===1?p.inboundEdges(B):p.outboundEdges(B),W=0,X=I.length;W<X;W++){if(z=I[W],F=p.opposite(B,z),P=x[R][B]+b(z,p.getEdgeAttributes(z)),F in x[R]&&P<x[R][F])throw Error("graphology-shortest-path/dijkstra: contradictory paths found. Do some of your edges have a negative weight?");(!(F in T[R])||P<T[R][F])&&(T[R][F]=P,_[R].push([P,C++,F]),S[R][F]=S[R][B].concat(F),F in T[0]&&F in T[1]&&(U=T[0][F]+T[1][F],(A.length===0||M>U)&&(M=U,A=S[0][F].concat(S[1][F].slice(0,-1).reverse()))))}}return[1/0,null]}function a(p,m,y,b,x,S){if(!n(p))throw new Error("graphology-shortest-path/dijkstra: invalid graphology instance.");y=e(y||i).fromMinimalEntry;var _={},T={},A=new t(r),M=0,C,R,L,I,P,U,B,F,z,W,X;for(F=0,W=m.length;F<W;F++)I=m[F],T[I]=0,A.push([0,M++,I]),S&&(S[I]=[I]);for(;A.size;)if(R=A.pop(),B=R[0],I=R[2],!(I in _)){if(_[I]=B,I===x)break;for(C=p.outboundEdges(I),z=0,X=C.length;z<X;z++){if(U=C[z],P=p.opposite(I,U),L=y(U,p.getEdgeAttributes(U))+_[I],P in _&&L<_[P])throw Error("graphology-shortest-path/dijkstra: contradictory paths found. Do some of your edges have a negative weight?");(!(P in T)||L<T[P])&&(T[P]=L,A.push([L,M++,P]),S&&(S[P]=S[I].concat(P)))}}return _}function l(p,m,y){var b={};return a(p,[m],y,0,null,b),b}function u(p,m,y,b){return o(p,m,y,b)[1]}function h(p,m,y){m=""+m,y=e(y||i).fromMinimalEntry;var b=[],x={},S={},_=p.nodes(),T,A,M,C,R,L,I,P,U,B;for(U=0,B=_.length;U<B;U++)L=_[U],x[L]=[],S[L]=0;var F={};S[m]=1;var z={};z[m]=0;var W=0,X=new t(s);for(X.push([0,W++,m,m]);X.size;)if(A=X.pop(),C=A[0],M=A[2],L=A[3],!(L in F))for(S[L]+=S[M],b.push(L),F[L]=C,T=p.outboundEdges(L),U=0,B=T.length;U<B;U++)P=T[U],I=p.opposite(L,P),R=C+y(P,p.getEdgeAttributes(P)),!(I in F)&&(!(I in z)||R<z[I])?(z[I]=R,X.push([R,W++,L,I]),S[I]=0,x[I]=[L]):R===z[I]&&(S[I]+=S[L],x[I].push(L));return[b,x,S]}return Jy.bidirectional=u,Jy.singleSource=l,Jy.brandes=h,Jy}var eR={},$2;function Xhe(){if($2)return eR;$2=1;var n=Xf(),e=WT().createEdgeWeightGetter,t=CV(),i="weight";function r(o,a){return o[0]>a[0]?1:o[0]<a[0]?-1:o[1]>a[1]?1:o[1]<a[1]?-1:0}function s(o,a,l,u,h,p){if(!n(o))throw new Error("graphology-shortest-path/astar: invalid graphology instance.");if(a&&!o.hasNode(a))throw new Error('graphology-shortest-path/astar: the "'+a+'" source node does not exist in the given graph.');if(l&&!o.hasNode(l))throw new Error('graphology-shortest-path/astar: the "'+l+'" target node does not exist in the given graph.');if(u=e(u||i).fromMinimalEntry,a===l)return[a];h=h||function(){return 0},p=p||{};var m=0,y=new t(r);y.push([0,m++,a,0,null]);var b={},x={},S,_,T,A,M,C,R,L,I,P,U,B;function F(z,W,X,j){if(B=_===X?j:X,P=u(z,W),P!==null){if(U=A+P,b.hasOwnProperty(B)){if(T=b[B],L=T[0],I=T[1],L<=U)return}else I=h(B,l);p.cutoff&&U+I>p.cutoff||(b[B]=[U,I],y.push([U+I,m++,B,U,_]))}}for(;y.size!==0;){if(S=y.pop(),_=S[2],A=S[3],M=S[4],_===l){for(C=[_],R=M;R!==null;)C.push(R),R=x[R];return C.reverse(),C}x.hasOwnProperty(_)&&(x[_]===null||(L=b[_][0],L<A))||(x[_]=M,o.forEachOutboundEdge(_,F))}return null}return eR.bidirectional=s,eR}var Z2;function qhe(){if(Z2)return Kl;Z2=1;var n=Vhe(),e=Ghe();return Kl.unweighted=n,Kl.dijkstra=Whe(),Kl.astar=Xhe(),Kl.bidirectional=n.bidirectional,Kl.singleSource=n.singleSource,Kl.singleSourceLength=n.singleSourceLength,Kl.undirectedSingleSourceLength=n.undirectedSingleSourceLength,Kl.brandes=n.brandes,Kl.edgePathFromNodePath=e.edgePathFromNodePath,Kl}qhe();var cL=V_(),un=n=>B_(n,cL),uL=V_();un.write=n=>B_(n,uL);var XT=V_();un.onStart=n=>B_(n,XT);var fL=V_();un.onFrame=n=>B_(n,fL);var hL=V_();un.onFinish=n=>B_(n,hL);var f0=[];un.setTimeout=(n,e)=>{const t=un.now()+e,i=()=>{const s=f0.findIndex(o=>o.cancel==i);~s&&f0.splice(s,1),ed-=~s?1:0},r={time:t,handler:n,cancel:i};return f0.splice(RV(t),0,r),ed+=1,DV(),r};var RV=n=>~(~f0.findIndex(e=>e.time>n)||~f0.length);un.cancel=n=>{XT.delete(n),fL.delete(n),hL.delete(n),cL.delete(n),uL.delete(n)};un.sync=n=>{B3=!0,un.batchedUpdates(n),B3=!1};un.throttle=n=>{let e;function t(){try{n(...e)}finally{e=null}}function i(...r){e=r,un.onStart(t)}return i.handler=n,i.cancel=()=>{XT.delete(t),e=null},i};var dL=typeof window<"u"?window.requestAnimationFrame:(()=>{});un.use=n=>dL=n;un.now=typeof performance<"u"?()=>performance.now():Date.now;un.batchedUpdates=n=>n();un.catch=console.error;un.frameLoop="always";un.advance=()=>{un.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):LV()};var Jh=-1,ed=0,B3=!1;function B_(n,e){B3?(e.delete(n),n(0)):(e.add(n),DV())}function DV(){Jh<0&&(Jh=0,un.frameLoop!=="demand"&&dL(OV))}function Yhe(){Jh=-1}function OV(){~Jh&&(dL(OV),un.batchedUpdates(LV))}function LV(){const n=Jh;Jh=un.now();const e=RV(Jh);if(e&&(PV(f0.splice(0,e),t=>t.handler()),ed-=e),!ed){Yhe();return}XT.flush(),cL.flush(n?Math.min(64,Jh-n):16.667),fL.flush(),uL.flush(),hL.flush()}function V_(){let n=new Set,e=n;return{add(t){ed+=e==n&&!n.has(t)?1:0,n.add(t)},delete(t){return ed-=e==n&&n.has(t)?1:0,n.delete(t)},flush(t){e.size&&(n=new Set,ed-=e.size,PV(e,i=>i(t)&&n.add(i)),ed+=n.size,e=n)}}}function PV(n,e){n.forEach(t=>{try{e(t)}catch(i){un.catch(i)}})}var $he=Object.defineProperty,Zhe=(n,e)=>{for(var t in e)$he(n,t,{get:e[t],enumerable:!0})},fc={};Zhe(fc,{assign:()=>Qhe,colors:()=>nd,createStringInterpolator:()=>mL,skipAnimation:()=>NV,to:()=>IV,willAdvance:()=>gL});function V3(){}var Khe=(n,e,t)=>Object.defineProperty(n,e,{value:t,writable:!0,configurable:!0}),Et={arr:Array.isArray,obj:n=>!!n&&n.constructor.name==="Object",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",und:n=>n===void 0};function gf(n,e){if(Et.arr(n)){if(!Et.arr(e)||n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}return n===e}var fi=(n,e)=>n.forEach(e);function Vf(n,e,t){if(Et.arr(n)){for(let i=0;i<n.length;i++)e.call(t,n[i],`${i}`);return}for(const i in n)n.hasOwnProperty(i)&&e.call(t,n[i],i)}var yl=n=>Et.und(n)?[]:Et.arr(n)?n:[n];function Ub(n,e){if(n.size){const t=Array.from(n);n.clear(),fi(t,e)}}var mb=(n,...e)=>Ub(n,t=>t(...e)),pL=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),mL,IV,nd=null,NV=!1,gL=V3,Qhe=n=>{n.to&&(IV=n.to),n.now&&(un.now=n.now),n.colors!==void 0&&(nd=n.colors),n.skipAnimation!=null&&(NV=n.skipAnimation),n.createStringInterpolator&&(mL=n.createStringInterpolator),n.requestAnimationFrame&&un.use(n.requestAnimationFrame),n.batchedUpdates&&(un.batchedUpdates=n.batchedUpdates),n.willAdvance&&(gL=n.willAdvance),n.frameLoop&&(un.frameLoop=n.frameLoop)},kb=new Set,pl=[],tR=[],kE=0,qT={get idle(){return!kb.size&&!pl.length},start(n){kE>n.priority?(kb.add(n),un.onStart(Jhe)):(UV(n),un(G3))},advance:G3,sort(n){if(kE)un.onFrame(()=>qT.sort(n));else{const e=pl.indexOf(n);~e&&(pl.splice(e,1),kV(n))}},clear(){pl=[],kb.clear()}};function Jhe(){kb.forEach(UV),kb.clear(),un(G3)}function UV(n){pl.includes(n)||kV(n)}function kV(n){pl.splice(ede(pl,e=>e.priority>n.priority),0,n)}function G3(n){const e=tR;for(let t=0;t<pl.length;t++){const i=pl[t];kE=i.priority,i.idle||(gL(i),i.advance(n),i.idle||e.push(i))}return kE=0,tR=pl,tR.length=0,pl=e,pl.length>0}function ede(n,e){const t=n.findIndex(e);return t<0?n.length:t}var tde={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},ac="[-+]?\\d*\\.?\\d+",zE=ac+"%";function YT(...n){return"\\(\\s*("+n.join(")\\s*,\\s*(")+")\\s*\\)"}var nde=new RegExp("rgb"+YT(ac,ac,ac)),ide=new RegExp("rgba"+YT(ac,ac,ac,ac)),rde=new RegExp("hsl"+YT(ac,zE,zE)),sde=new RegExp("hsla"+YT(ac,zE,zE,ac)),ode=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,ade=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,lde=/^#([0-9a-fA-F]{6})$/,cde=/^#([0-9a-fA-F]{8})$/;function ude(n){let e;return typeof n=="number"?n>>>0===n&&n>=0&&n<=4294967295?n:null:(e=lde.exec(n))?parseInt(e[1]+"ff",16)>>>0:nd&&nd[n]!==void 0?nd[n]:(e=nde.exec(n))?(jg(e[1])<<24|jg(e[2])<<16|jg(e[3])<<8|255)>>>0:(e=ide.exec(n))?(jg(e[1])<<24|jg(e[2])<<16|jg(e[3])<<8|J2(e[4]))>>>0:(e=ode.exec(n))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=cde.exec(n))?parseInt(e[1],16)>>>0:(e=ade.exec(n))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=rde.exec(n))?(K2(Q2(e[1]),jS(e[2]),jS(e[3]))|255)>>>0:(e=sde.exec(n))?(K2(Q2(e[1]),jS(e[2]),jS(e[3]))|J2(e[4]))>>>0:null}function nR(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function K2(n,e,t){const i=t<.5?t*(1+e):t+e-t*e,r=2*t-i,s=nR(r,i,n+1/3),o=nR(r,i,n),a=nR(r,i,n-1/3);return Math.round(s*255)<<24|Math.round(o*255)<<16|Math.round(a*255)<<8}function jg(n){const e=parseInt(n,10);return e<0?0:e>255?255:e}function Q2(n){return(parseFloat(n)%360+360)%360/360}function J2(n){const e=parseFloat(n);return e<0?0:e>1?255:Math.round(e*255)}function jS(n){const e=parseFloat(n);return e<0?0:e>100?1:e/100}function ez(n){let e=ude(n);if(e===null)return n;e=e||0;const t=(e&4278190080)>>>24,i=(e&16711680)>>>16,r=(e&65280)>>>8,s=(e&255)/255;return`rgba(${t}, ${i}, ${r}, ${s})`}var g_=(n,e,t)=>{if(Et.fun(n))return n;if(Et.arr(n))return g_({range:n,output:e,extrapolate:t});if(Et.str(n.output[0]))return mL(n);const i=n,r=i.output,s=i.range||[0,1],o=i.extrapolateLeft||i.extrapolate||"extend",a=i.extrapolateRight||i.extrapolate||"extend",l=i.easing||(u=>u);return u=>{const h=hde(u,s);return fde(u,s[h],s[h+1],r[h],r[h+1],l,o,a,i.map)}};function fde(n,e,t,i,r,s,o,a,l){let u=l?l(n):n;if(u<e){if(o==="identity")return u;o==="clamp"&&(u=e)}if(u>t){if(a==="identity")return u;a==="clamp"&&(u=t)}return i===r?i:e===t?n<=e?i:r:(e===-1/0?u=-u:t===1/0?u=u-e:u=(u-e)/(t-e),u=s(u),i===-1/0?u=-u:r===1/0?u=u+i:u=u*(r-i)+i,u)}function hde(n,e){for(var t=1;t<e.length-1&&!(e[t]>=n);++t);return t-1}var dde={linear:n=>n},v_=Symbol.for("FluidValue.get"),R0=Symbol.for("FluidValue.observers"),nu=n=>!!(n&&n[v_]),ul=n=>n&&n[v_]?n[v_]():n,tz=n=>n[R0]||null;function pde(n,e){n.eventObserved?n.eventObserved(e):n(e)}function FE(n,e){const t=n[R0];t&&t.forEach(i=>{pde(i,e)})}var mde=class{constructor(n){if(!n&&!(n=this.get))throw Error("Unknown getter");gde(this,n)}},gde=(n,e)=>zV(n,v_,e);function G_(n,e){if(n[v_]){let t=n[R0];t||zV(n,R0,t=new Set),t.has(e)||(t.add(e),n.observerAdded&&n.observerAdded(t.size,e))}return e}function BE(n,e){const t=n[R0];if(t&&t.has(e)){const i=t.size-1;i?t.delete(e):n[R0]=null,n.observerRemoved&&n.observerRemoved(i,e)}}var zV=(n,e,t)=>Object.defineProperty(n,e,{value:t,writable:!0,configurable:!0}),lw=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,vde=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,nz=new RegExp(`(${lw.source})(%|[a-z]+)`,"i"),yde=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,$T=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,FV=n=>{const[e,t]=bde(n);if(!e||pL())return n;const i=window.getComputedStyle(document.documentElement).getPropertyValue(e);if(i)return i.trim();if(t&&t.startsWith("--")){const r=window.getComputedStyle(document.documentElement).getPropertyValue(t);return r||n}else{if(t&&$T.test(t))return FV(t);if(t)return t}return n},bde=n=>{const e=$T.exec(n);if(!e)return[,];const[,t,i]=e;return[t,i]},iR,_de=(n,e,t,i,r)=>`rgba(${Math.round(e)}, ${Math.round(t)}, ${Math.round(i)}, ${r})`,BV=n=>{iR||(iR=nd?new RegExp(`(${Object.keys(nd).join("|")})(?!\\w)`,"g"):/^\b$/);const e=n.output.map(s=>ul(s).replace($T,FV).replace(vde,ez).replace(iR,ez)),t=e.map(s=>s.match(lw).map(Number)),r=t[0].map((s,o)=>t.map(a=>{if(!(o in a))throw Error('The arity of each "output" value must be equal');return a[o]})).map(s=>g_({...n,output:s}));return s=>{const o=!nz.test(e[0])&&e.find(l=>nz.test(l))?.replace(lw,"");let a=0;return e[0].replace(lw,()=>`${r[a++](s)}${o||""}`).replace(yde,_de)}},vL="react-spring: ",VV=n=>{const e=n;let t=!1;if(typeof e!="function")throw new TypeError(`${vL}once requires a function parameter`);return(...i)=>{t||(e(...i),t=!0)}},xde=VV(console.warn);function Sde(){xde(`${vL}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var wde=VV(console.warn);function Ede(){wde(`${vL}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function ZT(n){return Et.str(n)&&(n[0]=="#"||/\d/.test(n)||!pL()&&$T.test(n)||n in(nd||{}))}var yL=pL()?q.useEffect:q.useLayoutEffect,Tde=()=>{const n=q.useRef(!1);return yL(()=>(n.current=!0,()=>{n.current=!1}),[]),n};function GV(){const n=q.useState()[1],e=Tde();return()=>{e.current&&n(Math.random())}}var HV=n=>q.useEffect(n,Mde),Mde=[];function iz(n){const e=q.useRef(void 0);return q.useEffect(()=>{e.current=n}),e.current}var y_=Symbol.for("Animated:node"),Ade=n=>!!n&&n[y_]===n,eu=n=>n&&n[y_],bL=(n,e)=>Khe(n,y_,e),KT=n=>n&&n[y_]&&n[y_].getPayload(),jV=class{constructor(){bL(this,this)}getPayload(){return this.payload||[]}},QT=class WV extends jV{constructor(e){super(),this._value=e,this.done=!0,this.durationProgress=0,Et.num(this._value)&&(this.lastPosition=this._value)}static create(e){return new WV(e)}getPayload(){return[this]}getValue(){return this._value}setValue(e,t){return Et.num(e)&&(this.lastPosition=e,t&&(e=Math.round(e/t)*t,this.done&&(this.lastPosition=e))),this._value===e?!1:(this._value=e,!0)}reset(){const{done:e}=this;this.done=!1,Et.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,e&&(this.lastVelocity=null),this.v0=null)}},VE=class XV extends QT{constructor(e){super(0),this._string=null,this._toString=g_({output:[e,e]})}static create(e){return new XV(e)}getValue(){const e=this._string;return e??(this._string=this._toString(this._value))}setValue(e){if(Et.str(e)){if(e==this._string)return!1;this._string=e,this._value=1}else if(super.setValue(e))this._string=null;else return!1;return!0}reset(e){e&&(this._toString=g_({output:[this.getValue(),e]})),this._value=0,super.reset()}},GE={dependencies:null},_L=class extends jV{constructor(n){super(),this.source=n,this.setValue(n)}getValue(n){const e={};return Vf(this.source,(t,i)=>{Ade(t)?e[i]=t.getValue(n):nu(t)?e[i]=ul(t):n||(e[i]=t)}),e}setValue(n){this.source=n,this.payload=this._makePayload(n)}reset(){this.payload&&fi(this.payload,n=>n.reset())}_makePayload(n){if(n){const e=new Set;return Vf(n,this._addToPayload,e),Array.from(e)}}_addToPayload(n){GE.dependencies&&nu(n)&&GE.dependencies.add(n);const e=KT(n);e&&fi(e,t=>this.add(t))}},Cde=class qV extends _L{constructor(e){super(e)}static create(e){return new qV(e)}getValue(){return this.source.map(e=>e.getValue())}setValue(e){const t=this.getPayload();return e.length==t.length?t.map((i,r)=>i.setValue(e[r])).some(Boolean):(super.setValue(e.map(Rde)),!0)}};function Rde(n){return(ZT(n)?VE:QT).create(n)}function H3(n){const e=eu(n);return e?e.constructor:Et.arr(n)?Cde:ZT(n)?VE:QT}var rz=(n,e)=>{const t=!Et.fun(n)||n.prototype&&n.prototype.isReactComponent;return q.forwardRef((i,r)=>{const s=q.useRef(null),o=t&&q.useCallback(b=>{s.current=Lde(r,b)},[r]),[a,l]=Ode(i,e),u=GV(),h=()=>{const b=s.current;if(t&&!b)return;(b?e.applyAnimatedValues(b,a.getValue(!0)):!1)===!1&&u()},p=new Dde(h,l),m=q.useRef(void 0);yL(()=>(m.current=p,fi(l,b=>G_(b,p)),()=>{m.current&&(fi(m.current.deps,b=>BE(b,m.current)),un.cancel(m.current.update))})),q.useEffect(h,[]),HV(()=>()=>{const b=m.current;fi(b.deps,x=>BE(x,b))});const y=e.getComponentProps(a.getValue());return q.createElement(n,{...y,ref:o})})},Dde=class{constructor(n,e){this.update=n,this.deps=e}eventObserved(n){n.type=="change"&&un.write(this.update)}};function Ode(n,e){const t=new Set;return GE.dependencies=t,n.style&&(n={...n,style:e.createAnimatedStyle(n.style)}),n=new _L(n),GE.dependencies=null,[n,t]}function Lde(n,e){return n&&(Et.fun(n)?n(e):n.current=e),e}var sz=Symbol.for("AnimatedComponent"),Pde=(n,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:t=r=>new _L(r),getComponentProps:i=r=>r}={})=>{const r={applyAnimatedValues:e,createAnimatedStyle:t,getComponentProps:i},s=o=>{const a=oz(o)||"Anonymous";return Et.str(o)?o=s[o]||(s[o]=rz(o,r)):o=o[sz]||(o[sz]=rz(o,r)),o.displayName=`Animated(${a})`,o};return Vf(n,(o,a)=>{Et.arr(n)&&(a=oz(o)),s[a]=s(o)}),{animated:s}},oz=n=>Et.str(n)?n:n&&Et.str(n.displayName)?n.displayName:Et.fun(n)&&n.name||null;function Rp(n,...e){return Et.fun(n)?n(...e):n}var zb=(n,e)=>n===!0||!!(e&&n&&(Et.fun(n)?n(e):yl(n).includes(e))),YV=(n,e)=>Et.obj(n)?e&&n[e]:n,$V=(n,e)=>n.default===!0?n[e]:n.default?n.default[e]:void 0,Ide=n=>n,xL=(n,e=Ide)=>{let t=Nde;n.default&&n.default!==!0&&(n=n.default,t=Object.keys(n));const i={};for(const r of t){const s=e(n[r],r);Et.und(s)||(i[r]=s)}return i},Nde=["config","onProps","onStart","onChange","onPause","onResume","onRest"],Ude={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function kde(n){const e={};let t=0;if(Vf(n,(i,r)=>{Ude[r]||(e[r]=i,t++)}),t)return e}function ZV(n){const e=kde(n);if(e){const t={to:e};return Vf(n,(i,r)=>r in e||(t[r]=i)),t}return{...n}}function b_(n){return n=ul(n),Et.arr(n)?n.map(b_):ZT(n)?fc.createStringInterpolator({range:[0,1],output:[n,n]})(1):n}function zde(n){for(const e in n)return!0;return!1}function j3(n){return Et.fun(n)||Et.arr(n)&&Et.obj(n[0])}function Fde(n,e){n.ref?.delete(n),e?.delete(n)}function Bde(n,e){e&&n.ref!==e&&(n.ref?.delete(n),e.add(n),n.ref=e)}var Vde={default:{tension:170,friction:26}},W3={...Vde.default,mass:1,damping:1,easing:dde.linear,clamp:!1},Gde=class{constructor(){this.velocity=0,Object.assign(this,W3)}};function Hde(n,e,t){t&&(t={...t},az(t,e),e={...t,...e}),az(n,e),Object.assign(n,e);for(const o in W3)n[o]==null&&(n[o]=W3[o]);let{frequency:i,damping:r}=n;const{mass:s}=n;return Et.und(i)||(i<.01&&(i=.01),r<0&&(r=0),n.tension=Math.pow(2*Math.PI/i,2)*s,n.friction=4*Math.PI*r*s/i),n}function az(n,e){if(!Et.und(e.decay))n.duration=void 0;else{const t=!Et.und(e.tension)||!Et.und(e.friction);(t||!Et.und(e.frequency)||!Et.und(e.damping)||!Et.und(e.mass))&&(n.duration=void 0,n.decay=void 0),t&&(n.frequency=void 0)}}var lz=[],jde=class{constructor(){this.changed=!1,this.values=lz,this.toValues=null,this.fromValues=lz,this.config=new Gde,this.immediate=!1}};function KV(n,{key:e,props:t,defaultProps:i,state:r,actions:s}){return new Promise((o,a)=>{let l,u,h=zb(t.cancel??i?.cancel,e);if(h)y();else{Et.und(t.pause)||(r.paused=zb(t.pause,e));let b=i?.pause;b!==!0&&(b=r.paused||zb(b,e)),l=Rp(t.delay||0,e),b?(r.resumeQueue.add(m),s.pause()):(s.resume(),m())}function p(){r.resumeQueue.add(m),r.timeouts.delete(u),u.cancel(),l=u.time-un.now()}function m(){l>0&&!fc.skipAnimation?(r.delayed=!0,u=un.setTimeout(y,l),r.pauseQueue.add(p),r.timeouts.add(u)):y()}function y(){r.delayed&&(r.delayed=!1),r.pauseQueue.delete(p),r.timeouts.delete(u),n<=(r.cancelId||0)&&(h=!0);try{s.start({...t,callId:n,cancel:h},o)}catch(b){a(b)}}})}var SL=(n,e)=>e.length==1?e[0]:e.some(t=>t.cancelled)?h0(n.get()):e.every(t=>t.noop)?QV(n.get()):rc(n.get(),e.every(t=>t.finished)),QV=n=>({value:n,noop:!0,finished:!0,cancelled:!1}),rc=(n,e,t=!1)=>({value:n,finished:e,cancelled:t}),h0=n=>({value:n,cancelled:!0,finished:!1});function JV(n,e,t,i){const{callId:r,parentId:s,onRest:o}=e,{asyncTo:a,promise:l}=t;return!s&&n===a&&!e.reset?l:t.promise=(async()=>{t.asyncId=r,t.asyncTo=n;const u=xL(e,(S,_)=>_==="onRest"?void 0:S);let h,p;const m=new Promise((S,_)=>(h=S,p=_)),y=S=>{const _=r<=(t.cancelId||0)&&h0(i)||r!==t.asyncId&&rc(i,!1);if(_)throw S.result=_,p(S),S},b=(S,_)=>{const T=new cz,A=new uz;return(async()=>{if(fc.skipAnimation)throw __(t),A.result=rc(i,!1),p(A),A;y(T);const M=Et.obj(S)?{...S}:{..._,to:S};M.parentId=r,Vf(u,(R,L)=>{Et.und(M[L])&&(M[L]=R)});const C=await i.start(M);return y(T),t.paused&&await new Promise(R=>{t.resumeQueue.add(R)}),C})()};let x;if(fc.skipAnimation)return __(t),rc(i,!1);try{let S;Et.arr(n)?S=(async _=>{for(const T of _)await b(T)})(n):S=Promise.resolve(n(b,i.stop.bind(i))),await Promise.all([S.then(h),m]),x=rc(i.get(),!0,!1)}catch(S){if(S instanceof cz)x=S.result;else if(S instanceof uz)x=S.result;else throw S}finally{r==t.asyncId&&(t.asyncId=s,t.asyncTo=s?a:void 0,t.promise=s?l:void 0)}return Et.fun(o)&&un.batchedUpdates(()=>{o(x,i,i.item)}),x})()}function __(n,e){Ub(n.timeouts,t=>t.cancel()),n.pauseQueue.clear(),n.resumeQueue.clear(),n.asyncId=n.asyncTo=n.promise=void 0,e&&(n.cancelId=e)}var cz=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},uz=class extends Error{constructor(){super("SkipAnimationSignal")}},X3=n=>n instanceof wL,Wde=1,wL=class extends mde{constructor(){super(...arguments),this.id=Wde++,this._priority=0}get priority(){return this._priority}set priority(n){this._priority!=n&&(this._priority=n,this._onPriorityChange(n))}get(){const n=eu(this);return n&&n.getValue()}to(...n){return fc.to(this,n)}interpolate(...n){return Sde(),fc.to(this,n)}toJSON(){return this.get()}observerAdded(n){n==1&&this._attach()}observerRemoved(n){n==0&&this._detach()}_attach(){}_detach(){}_onChange(n,e=!1){FE(this,{type:"change",parent:this,value:n,idle:e})}_onPriorityChange(n){this.idle||qT.sort(this),FE(this,{type:"priority",parent:this,priority:n})}},tm=Symbol.for("SpringPhase"),eG=1,q3=2,Y3=4,rR=n=>(n[tm]&eG)>0,Hh=n=>(n[tm]&q3)>0,eb=n=>(n[tm]&Y3)>0,fz=(n,e)=>e?n[tm]|=q3|eG:n[tm]&=~q3,hz=(n,e)=>e?n[tm]|=Y3:n[tm]&=~Y3,Xde=class extends wL{constructor(n,e){if(super(),this.animation=new jde,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!Et.und(n)||!Et.und(e)){const t=Et.obj(n)?{...n}:{...e,from:n};Et.und(t.default)&&(t.default=!0),this.start(t)}}get idle(){return!(Hh(this)||this._state.asyncTo)||eb(this)}get goal(){return ul(this.animation.to)}get velocity(){const n=eu(this);return n instanceof QT?n.lastVelocity||0:n.getPayload().map(e=>e.lastVelocity||0)}get hasAnimated(){return rR(this)}get isAnimating(){return Hh(this)}get isPaused(){return eb(this)}get isDelayed(){return this._state.delayed}advance(n){let e=!0,t=!1;const i=this.animation;let{toValues:r}=i;const{config:s}=i,o=KT(i.to);!o&&nu(i.to)&&(r=yl(ul(i.to))),i.values.forEach((u,h)=>{if(u.done)return;const p=u.constructor==VE?1:o?o[h].lastPosition:r[h];let m=i.immediate,y=p;if(!m){if(y=u.lastPosition,s.tension<=0){u.done=!0;return}let b=u.elapsedTime+=n;const x=i.fromValues[h],S=u.v0!=null?u.v0:u.v0=Et.arr(s.velocity)?s.velocity[h]:s.velocity;let _;const T=s.precision||(x==p?.005:Math.min(1,Math.abs(p-x)*.001));if(Et.und(s.duration))if(s.decay){const A=s.decay===!0?.998:s.decay,M=Math.exp(-(1-A)*b);y=x+S/(1-A)*(1-M),m=Math.abs(u.lastPosition-y)<=T,_=S*M}else{_=u.lastVelocity==null?S:u.lastVelocity;const A=s.restVelocity||T/10,M=s.clamp?0:s.bounce,C=!Et.und(M),R=x==p?u.v0>0:x<p;let L,I=!1;const P=1,U=Math.ceil(n/P);for(let B=0;B<U&&(L=Math.abs(_)>A,!(!L&&(m=Math.abs(p-y)<=T,m)));++B){C&&(I=y==p||y>p==R,I&&(_=-_*M,y=p));const F=-s.tension*1e-6*(y-p),z=-s.friction*.001*_,W=(F+z)/s.mass;_=_+W*P,y=y+_*P}}else{let A=1;s.duration>0&&(this._memoizedDuration!==s.duration&&(this._memoizedDuration=s.duration,u.durationProgress>0&&(u.elapsedTime=s.duration*u.durationProgress,b=u.elapsedTime+=n)),A=(s.progress||0)+b/this._memoizedDuration,A=A>1?1:A<0?0:A,u.durationProgress=A),y=x+s.easing(A)*(p-x),_=(y-u.lastPosition)/n,m=A==1}u.lastVelocity=_,Number.isNaN(y)&&(console.warn("Got NaN while animating:",this),m=!0)}o&&!o[h].done&&(m=!1),m?u.done=!0:e=!1,u.setValue(y,s.round)&&(t=!0)});const a=eu(this),l=a.getValue();if(e){const u=ul(i.to);(l!==u||t)&&!s.decay?(a.setValue(u),this._onChange(u)):t&&s.decay&&this._onChange(l),this._stop()}else t&&this._onChange(l)}set(n){return un.batchedUpdates(()=>{this._stop(),this._focus(n),this._set(n)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(Hh(this)){const{to:n,config:e}=this.animation;un.batchedUpdates(()=>{this._onStart(),e.decay||this._set(n,!1),this._stop()})}return this}update(n){return(this.queue||(this.queue=[])).push(n),this}start(n,e){let t;return Et.und(n)?(t=this.queue||[],this.queue=[]):t=[Et.obj(n)?n:{...e,to:n}],Promise.all(t.map(i=>this._update(i))).then(i=>SL(this,i))}stop(n){const{to:e}=this.animation;return this._focus(this.get()),__(this._state,n&&this._lastCallId),un.batchedUpdates(()=>this._stop(e,n)),this}reset(){this._update({reset:!0})}eventObserved(n){n.type=="change"?this._start():n.type=="priority"&&(this.priority=n.priority+1)}_prepareNode(n){const e=this.key||"";let{to:t,from:i}=n;t=Et.obj(t)?t[e]:t,(t==null||j3(t))&&(t=void 0),i=Et.obj(i)?i[e]:i,i==null&&(i=void 0);const r={to:t,from:i};return rR(this)||(n.reverse&&([t,i]=[i,t]),i=ul(i),Et.und(i)?eu(this)||this._set(t):this._set(i)),r}_update({...n},e){const{key:t,defaultProps:i}=this;n.default&&Object.assign(i,xL(n,(o,a)=>/^on/.test(a)?YV(o,t):o)),pz(this,n,"onProps"),nb(this,"onProps",n,this);const r=this._prepareNode(n);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const s=this._state;return KV(++this._lastCallId,{key:t,props:n,defaultProps:i,state:s,actions:{pause:()=>{eb(this)||(hz(this,!0),mb(s.pauseQueue),nb(this,"onPause",rc(this,tb(this,this.animation.to)),this))},resume:()=>{eb(this)&&(hz(this,!1),Hh(this)&&this._resume(),mb(s.resumeQueue),nb(this,"onResume",rc(this,tb(this,this.animation.to)),this))},start:this._merge.bind(this,r)}}).then(o=>{if(n.loop&&o.finished&&!(e&&o.noop)){const a=tG(n);if(a)return this._update(a,!0)}return o})}_merge(n,e,t){if(e.cancel)return this.stop(!0),t(h0(this));const i=!Et.und(n.to),r=!Et.und(n.from);if(i||r)if(e.callId>this._lastToId)this._lastToId=e.callId;else return t(h0(this));const{key:s,defaultProps:o,animation:a}=this,{to:l,from:u}=a;let{to:h=l,from:p=u}=n;r&&!i&&(!e.default||Et.und(h))&&(h=p),e.reverse&&([h,p]=[p,h]);const m=!gf(p,u);m&&(a.from=p),p=ul(p);const y=!gf(h,l);y&&this._focus(h);const b=j3(e.to),{config:x}=a,{decay:S,velocity:_}=x;(i||r)&&(x.velocity=0),e.config&&!b&&Hde(x,Rp(e.config,s),e.config!==o.config?Rp(o.config,s):void 0);let T=eu(this);if(!T||Et.und(h))return t(rc(this,!0));const A=Et.und(e.reset)?r&&!e.default:!Et.und(p)&&zb(e.reset,s),M=A?p:this.get(),C=b_(h),R=Et.num(C)||Et.arr(C)||ZT(C),L=!b&&(!R||zb(o.immediate||e.immediate,s));if(y){const B=H3(h);if(B!==T.constructor)if(L)T=this._set(C);else throw Error(`Cannot animate between ${T.constructor.name} and ${B.name}, as the "to" prop suggests`)}const I=T.constructor;let P=nu(h),U=!1;if(!P){const B=A||!rR(this)&&m;(y||B)&&(U=gf(b_(M),C),P=!U),(!gf(a.immediate,L)&&!L||!gf(x.decay,S)||!gf(x.velocity,_))&&(P=!0)}if(U&&Hh(this)&&(a.changed&&!A?P=!0:P||this._stop(l)),!b&&((P||nu(l))&&(a.values=T.getPayload(),a.toValues=nu(h)?null:I==VE?[1]:yl(C)),a.immediate!=L&&(a.immediate=L,!L&&!A&&this._set(l)),P)){const{onRest:B}=a;fi(Yde,z=>pz(this,e,z));const F=rc(this,tb(this,l));mb(this._pendingCalls,F),this._pendingCalls.add(t),a.changed&&un.batchedUpdates(()=>{a.changed=!A,B?.(F,this),A?Rp(o.onRest,F):a.onStart?.(F,this)})}A&&this._set(M),b?t(JV(e.to,e,this._state,this)):P?this._start():Hh(this)&&!y?this._pendingCalls.add(t):t(QV(M))}_focus(n){const e=this.animation;n!==e.to&&(tz(this)&&this._detach(),e.to=n,tz(this)&&this._attach())}_attach(){let n=0;const{to:e}=this.animation;nu(e)&&(G_(e,this),X3(e)&&(n=e.priority+1)),this.priority=n}_detach(){const{to:n}=this.animation;nu(n)&&BE(n,this)}_set(n,e=!0){const t=ul(n);if(!Et.und(t)){const i=eu(this);if(!i||!gf(t,i.getValue())){const r=H3(t);!i||i.constructor!=r?bL(this,r.create(t)):i.setValue(t),i&&un.batchedUpdates(()=>{this._onChange(t,e)})}}return eu(this)}_onStart(){const n=this.animation;n.changed||(n.changed=!0,nb(this,"onStart",rc(this,tb(this,n.to)),this))}_onChange(n,e){e||(this._onStart(),Rp(this.animation.onChange,n,this)),Rp(this.defaultProps.onChange,n,this),super._onChange(n,e)}_start(){const n=this.animation;eu(this).reset(ul(n.to)),n.immediate||(n.fromValues=n.values.map(e=>e.lastPosition)),Hh(this)||(fz(this,!0),eb(this)||this._resume())}_resume(){fc.skipAnimation?this.finish():qT.start(this)}_stop(n,e){if(Hh(this)){fz(this,!1);const t=this.animation;fi(t.values,r=>{r.done=!0}),t.toValues&&(t.onChange=t.onPause=t.onResume=void 0),FE(this,{type:"idle",parent:this});const i=e?h0(this.get()):rc(this.get(),tb(this,n??t.to));mb(this._pendingCalls,i),t.changed&&(t.changed=!1,nb(this,"onRest",i,this))}}};function tb(n,e){const t=b_(e),i=b_(n.get());return gf(i,t)}function tG(n,e=n.loop,t=n.to){const i=Rp(e);if(i){const r=i!==!0&&ZV(i),s=(r||n).reverse,o=!r||r.reset;return x_({...n,loop:e,default:!1,pause:void 0,to:!s||j3(t)?t:void 0,from:o?n.from:void 0,reset:o,...r})}}function x_(n){const{to:e,from:t}=n=ZV(n),i=new Set;return Et.obj(e)&&dz(e,i),Et.obj(t)&&dz(t,i),n.keys=i.size?Array.from(i):null,n}function qde(n){const e=x_(n);return Et.und(e.default)&&(e.default=xL(e)),e}function dz(n,e){Vf(n,(t,i)=>t!=null&&e.add(i))}var Yde=["onStart","onRest","onChange","onPause","onResume"];function pz(n,e,t){n.animation[t]=e[t]!==$V(e,t)?YV(e[t],n.key):void 0}function nb(n,e,...t){n.animation[e]?.(...t),n.defaultProps[e]?.(...t)}var $de=["onStart","onChange","onRest"],Zde=1,Kde=class{constructor(e,t){this.id=Zde++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),t&&(this._flush=t),e&&this.start({default:!0,...e})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(e=>e.idle&&!e.isDelayed&&!e.isPaused)}get item(){return this._item}set item(e){this._item=e}get(){const e={};return this.each((t,i)=>e[i]=t.get()),e}set(e){for(const t in e){const i=e[t];Et.und(i)||this.springs[t].set(i)}}update(e){return e&&this.queue.push(x_(e)),this}start(e){let{queue:t}=this;return e?t=yl(e).map(x_):this.queue=[],this._flush?this._flush(this,t):(oG(this,t),$3(this,t))}stop(e,t){if(e!==!!e&&(t=e),t){const i=this.springs;fi(yl(t),r=>i[r].stop(!!e))}else __(this._state,this._lastAsyncId),this.each(i=>i.stop(!!e));return this}pause(e){if(Et.und(e))this.start({pause:!0});else{const t=this.springs;fi(yl(e),i=>t[i].pause())}return this}resume(e){if(Et.und(e))this.start({pause:!1});else{const t=this.springs;fi(yl(e),i=>t[i].resume())}return this}each(e){Vf(this.springs,e)}_onFrame(){const{onStart:e,onChange:t,onRest:i}=this._events,r=this._active.size>0,s=this._changed.size>0;(r&&!this._started||s&&!this._started)&&(this._started=!0,Ub(e,([l,u])=>{u.value=this.get(),l(u,this,this._item)}));const o=!r&&this._started,a=s||o&&i.size?this.get():null;s&&t.size&&Ub(t,([l,u])=>{u.value=a,l(u,this,this._item)}),o&&(this._started=!1,Ub(i,([l,u])=>{u.value=a,l(u,this,this._item)}))}eventObserved(e){if(e.type=="change")this._changed.add(e.parent),e.idle||this._active.add(e.parent);else if(e.type=="idle")this._active.delete(e.parent);else return;un.onFrame(this._onFrame)}};function $3(n,e){return Promise.all(e.map(t=>nG(n,t))).then(t=>SL(n,t))}async function nG(n,e,t){const{keys:i,to:r,from:s,loop:o,onRest:a,onResolve:l}=e,u=Et.obj(e.default)&&e.default;o&&(e.loop=!1),r===!1&&(e.to=null),s===!1&&(e.from=null);const h=Et.arr(r)||Et.fun(r)?r:void 0;h?(e.to=void 0,e.onRest=void 0,u&&(u.onRest=void 0)):fi($de,x=>{const S=e[x];if(Et.fun(S)){const _=n._events[x];e[x]=({finished:T,cancelled:A})=>{const M=_.get(S);M?(T||(M.finished=!1),A&&(M.cancelled=!0)):_.set(S,{value:null,finished:T||!1,cancelled:A||!1})},u&&(u[x]=e[x])}});const p=n._state;e.pause===!p.paused?(p.paused=e.pause,mb(e.pause?p.pauseQueue:p.resumeQueue)):p.paused&&(e.pause=!0);const m=(i||Object.keys(n.springs)).map(x=>n.springs[x].start(e)),y=e.cancel===!0||$V(e,"cancel")===!0;(h||y&&p.asyncId)&&m.push(KV(++n._lastAsyncId,{props:e,state:p,actions:{pause:V3,resume:V3,start(x,S){y?(__(p,n._lastAsyncId),S(h0(n))):(x.onRest=a,S(JV(h,x,p,n)))}}})),p.paused&&await new Promise(x=>{p.resumeQueue.add(x)});const b=SL(n,await Promise.all(m));if(o&&b.finished&&!(t&&b.noop)){const x=tG(e,o,r);if(x)return oG(n,[x]),nG(n,x,!0)}return l&&un.batchedUpdates(()=>l(b,n,n.item)),b}function mz(n,e){const t={...n.springs};return e&&fi(yl(e),i=>{Et.und(i.keys)&&(i=x_(i)),Et.obj(i.to)||(i={...i,to:void 0}),sG(t,i,r=>rG(r))}),iG(n,t),t}function iG(n,e){Vf(e,(t,i)=>{n.springs[i]||(n.springs[i]=t,G_(t,n))})}function rG(n,e){const t=new Xde;return t.key=n,e&&G_(t,e),t}function sG(n,e,t){e.keys&&fi(e.keys,i=>{(n[i]||(n[i]=t(i)))._prepareNode(e)})}function oG(n,e){fi(e,t=>{sG(n.springs,t,i=>rG(i,n))})}var Qde=q.createContext({pause:!1,immediate:!1}),Jde=()=>{const n=[],e=function(i){Ede();const r=[];return fi(n,(s,o)=>{if(Et.und(i))r.push(s.start());else{const a=t(i,s,o);a&&r.push(s.start(a))}}),r};e.current=n,e.add=function(i){n.includes(i)||n.push(i)},e.delete=function(i){const r=n.indexOf(i);~r&&n.splice(r,1)},e.pause=function(){return fi(n,i=>i.pause(...arguments)),this},e.resume=function(){return fi(n,i=>i.resume(...arguments)),this},e.set=function(i){fi(n,(r,s)=>{const o=Et.fun(i)?i(s,r):i;o&&r.set(o)})},e.start=function(i){const r=[];return fi(n,(s,o)=>{if(Et.und(i))r.push(s.start());else{const a=this._getProps(i,s,o);a&&r.push(s.start(a))}}),r},e.stop=function(){return fi(n,i=>i.stop(...arguments)),this},e.update=function(i){return fi(n,(r,s)=>r.update(this._getProps(i,r,s))),this};const t=function(i,r,s){return Et.fun(i)?i(s,r):i};return e._getProps=t,e};function epe(n,e,t){const i=Et.fun(e)&&e;i&&!t&&(t=[]);const r=q.useMemo(()=>i||arguments.length==3?Jde():void 0,[]),s=q.useRef(0),o=GV(),a=q.useMemo(()=>({ctrls:[],queue:[],flush(_,T){const A=mz(_,T);return s.current>0&&!a.queue.length&&!Object.keys(A).some(C=>!_.springs[C])?$3(_,T):new Promise(C=>{iG(_,A),a.queue.push(()=>{C($3(_,T))}),o()})}}),[]),l=q.useRef([...a.ctrls]),u=q.useRef([]),h=iz(n)||0;q.useMemo(()=>{fi(l.current.slice(n,h),_=>{Fde(_,r),_.stop(!0)}),l.current.length=n,p(h,n)},[n]),q.useMemo(()=>{p(0,Math.min(h,n))},t);function p(_,T){for(let A=_;A<T;A++){const M=l.current[A]||(l.current[A]=new Kde(null,a.flush)),C=i?i(A,M):e[A];C&&(u.current[A]=qde(C))}}const m=l.current.map((_,T)=>mz(_,u.current[T])),y=q.useContext(Qde),b=iz(y),x=y!==b&&zde(y);yL(()=>{s.current++,a.ctrls=l.current;const{queue:_}=a;_.length&&(a.queue=[],fi(_,T=>T())),fi(l.current,(T,A)=>{r?.add(T),x&&T.start({default:y});const M=u.current[A];M&&(Bde(T,M.ref),T.ref?T.queue.push(M):T.start(M))})}),HV(()=>()=>{fi(a.ctrls,_=>_.stop(!0))});const S=m.map(_=>({..._}));return r?[S,r]:S}function la(n,e){const t=Et.fun(n),[[i],r]=epe(1,t?n:[n],t?e||[]:e);return t||arguments.length==2?[i,r]:i}var tpe=class extends wL{constructor(n,e){super(),this.source=n,this.idle=!0,this._active=new Set,this.calc=g_(...e);const t=this._get(),i=H3(t);bL(this,i.create(t))}advance(n){const e=this._get(),t=this.get();gf(e,t)||(eu(this).setValue(e),this._onChange(e,this.idle)),!this.idle&&gz(this._active)&&sR(this)}_get(){const n=Et.arr(this.source)?this.source.map(ul):yl(ul(this.source));return this.calc(...n)}_start(){this.idle&&!gz(this._active)&&(this.idle=!1,fi(KT(this),n=>{n.done=!1}),fc.skipAnimation?(un.batchedUpdates(()=>this.advance()),sR(this)):qT.start(this))}_attach(){let n=1;fi(yl(this.source),e=>{nu(e)&&G_(e,this),X3(e)&&(e.idle||this._active.add(e),n=Math.max(n,e.priority+1))}),this.priority=n,this._start()}_detach(){fi(yl(this.source),n=>{nu(n)&&BE(n,this)}),this._active.clear(),sR(this)}eventObserved(n){n.type=="change"?n.idle?this.advance():(this._active.add(n.parent),this._start()):n.type=="idle"?this._active.delete(n.parent):n.type=="priority"&&(this.priority=yl(this.source).reduce((e,t)=>Math.max(e,(X3(t)?t.priority:0)+1),0))}};function npe(n){return n.idle!==!1}function gz(n){return!n.size||Array.from(n).every(npe)}function sR(n){n.idle||(n.idle=!0,fi(KT(n),e=>{e.done=!0}),FE(n,{type:"idle",parent:n}))}fc.assign({createStringInterpolator:BV,to:(n,e)=>new tpe(n,e)});var ipe=["primitive"].concat(Object.keys(U8).filter(n=>/^[A-Z]/.test(n)).map(n=>n[0].toLowerCase()+n.slice(1)));fc.assign({createStringInterpolator:BV,colors:tde,frameLoop:"demand"});tue(()=>{un.advance()});var rpe=Pde(ipe,{applyAnimatedValues:Ef}),ar=rpe.animated;const H_=new ae,EL=new ae,spe=new ae,vz=new ot;function ope(n,e,t){const i=H_.setFromMatrixPosition(n.matrixWorld);i.project(e);const r=t.width/2,s=t.height/2;return[i.x*r+r,-(i.y*s)+s]}function ape(n,e){const t=H_.setFromMatrixPosition(n.matrixWorld),i=EL.setFromMatrixPosition(e.matrixWorld),r=t.sub(i),s=e.getWorldDirection(spe);return r.angleTo(s)>Math.PI/2}function lpe(n,e,t,i){const r=H_.setFromMatrixPosition(n.matrixWorld),s=r.clone();s.project(e),vz.set(s.x,s.y),t.setFromCamera(vz,e);const o=t.intersectObjects(i,!0);if(o.length){const a=o[0].distance;return r.distanceTo(t.ray.origin)<a}return!0}function cpe(n,e){if(e instanceof om)return e.zoom;if(e instanceof Fr){const t=H_.setFromMatrixPosition(n.matrixWorld),i=EL.setFromMatrixPosition(e.matrixWorld),r=e.fov*Math.PI/180,s=t.distanceTo(i);return 1/(2*Math.tan(r/2)*s)}else return 1}function upe(n,e,t){if(e instanceof Fr||e instanceof om){const i=H_.setFromMatrixPosition(n.matrixWorld),r=EL.setFromMatrixPosition(e.matrixWorld),s=i.distanceTo(r),o=(t[1]-t[0])/(e.far-e.near),a=t[1]-o*e.far;return Math.round(o*s+a)}}const Z3=n=>Math.abs(n)<1e-10?0:n;function aG(n,e,t=""){let i="matrix3d(";for(let r=0;r!==16;r++)i+=Z3(e[r]*n.elements[r])+(r!==15?",":")");return t+i}const fpe=(n=>e=>aG(e,n))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),hpe=(n=>(e,t)=>aG(e,n(t),"translate(-50%,-50%)"))(n=>[1/n,1/n,1/n,1,-1/n,-1/n,-1/n,-1,1/n,1/n,1/n,1,1,1,1,1]);function dpe(n){return n&&typeof n=="object"&&"current"in n}const TL=q.forwardRef(({children:n,eps:e=.001,style:t,className:i,prepend:r,center:s,fullscreen:o,portal:a,distanceFactor:l,sprite:u=!1,transform:h=!1,occlude:p,onOcclude:m,castShadow:y,receiveShadow:b,material:x,geometry:S,zIndexRange:_=[16777271,0],calculatePosition:T=ope,as:A="div",wrapperClass:M,pointerEvents:C="auto",...R},L)=>{const{gl:I,camera:P,scene:U,size:B,raycaster:F,events:z,viewport:W}=Br(),[X]=q.useState(()=>document.createElement(A)),j=q.useRef(null),G=q.useRef(null),K=q.useRef(0),J=q.useRef([0,0]),ee=q.useRef(null),V=q.useRef(null),Y=a?.current||z.connected||I.domElement.parentNode,Q=q.useRef(null),re=q.useRef(!1),ne=q.useMemo(()=>p&&p!=="blending"||Array.isArray(p)&&p.length&&dpe(p[0]),[p]);q.useLayoutEffect(()=>{const Te=I.domElement;p&&p==="blending"?(Te.style.zIndex=`${Math.floor(_[0]/2)}`,Te.style.position="absolute",Te.style.pointerEvents="none"):(Te.style.zIndex=null,Te.style.position=null,Te.style.pointerEvents=null)},[p]),q.useLayoutEffect(()=>{if(G.current){const Te=j.current=C4.createRoot(X);if(U.updateMatrixWorld(),h)X.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const xe=T(G.current,P,B);X.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${xe[0]}px,${xe[1]}px,0);transform-origin:0 0;`}return Y&&(r?Y.prepend(X):Y.appendChild(X)),()=>{Y&&Y.removeChild(X),Te.unmount()}}},[Y,h]),q.useLayoutEffect(()=>{M&&(X.className=M)},[M]);const le=q.useMemo(()=>h?{position:"absolute",top:0,left:0,width:B.width,height:B.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:s?"translate3d(-50%,-50%,0)":"none",...o&&{top:-B.height/2,left:-B.width/2,width:B.width,height:B.height},...t},[t,s,o,B,h]),fe=q.useMemo(()=>({position:"absolute",pointerEvents:C}),[C]);q.useLayoutEffect(()=>{if(re.current=!1,h){var Te;(Te=j.current)==null||Te.render(q.createElement("div",{ref:ee,style:le},q.createElement("div",{ref:V,style:fe},q.createElement("div",{ref:L,className:i,style:t,children:n}))))}else{var xe;(xe=j.current)==null||xe.render(q.createElement("div",{ref:L,style:le,className:i,children:n}))}});const pe=q.useRef(!0);GT(Te=>{if(G.current){P.updateMatrixWorld(),G.current.updateWorldMatrix(!0,!1);const xe=h?J.current:T(G.current,P,B);if(h||Math.abs(K.current-P.zoom)>e||Math.abs(J.current[0]-xe[0])>e||Math.abs(J.current[1]-xe[1])>e){const ge=ape(G.current,P);let oe=!1;ne&&(Array.isArray(p)?oe=p.map(Ce=>Ce.current):p!=="blending"&&(oe=[U]));const me=pe.current;if(oe){const Ce=lpe(G.current,P,F,oe);pe.current=Ce&&!ge}else pe.current=!ge;me!==pe.current&&(m?m(!pe.current):X.style.display=pe.current?"block":"none");const ve=Math.floor(_[0]/2),he=p?ne?[_[0],ve]:[ve-1,0]:_;if(X.style.zIndex=`${upe(G.current,P,he)}`,h){const[Ce,Re]=[B.width/2,B.height/2],Le=P.projectionMatrix.elements[5]*Re,{isOrthographicCamera:Ie,top:be,left:Je,bottom:te,right:Z}=P,de=fpe(P.matrixWorldInverse),Ne=Ie?`scale(${Le})translate(${Z3(-(Z+Je)/2)}px,${Z3((be+te)/2)}px)`:`translateZ(${Le}px)`;let Oe=G.current.matrixWorld;u&&(Oe=P.matrixWorldInverse.clone().transpose().copyPosition(Oe).scale(G.current.scale),Oe.elements[3]=Oe.elements[7]=Oe.elements[11]=0,Oe.elements[15]=1),X.style.width=B.width+"px",X.style.height=B.height+"px",X.style.perspective=Ie?"":`${Le}px`,ee.current&&V.current&&(ee.current.style.transform=`${Ne}${de}translate(${Ce}px,${Re}px)`,V.current.style.transform=hpe(Oe,1/((l||10)/400)))}else{const Ce=l===void 0?1:cpe(G.current,P)*l;X.style.transform=`translate3d(${xe[0]}px,${xe[1]}px,0) scale(${Ce})`}J.current=xe,K.current=P.zoom}}if(!ne&&Q.current&&!re.current)if(h){if(ee.current){const xe=ee.current.children[0];if(xe!=null&&xe.clientWidth&&xe!=null&&xe.clientHeight){const{isOrthographicCamera:ge}=P;if(ge||S)R.scale&&(Array.isArray(R.scale)?R.scale instanceof ae?Q.current.scale.copy(R.scale.clone().divideScalar(1)):Q.current.scale.set(1/R.scale[0],1/R.scale[1],1/R.scale[2]):Q.current.scale.setScalar(1/R.scale));else{const oe=(l||10)/400,me=xe.clientWidth*oe,ve=xe.clientHeight*oe;Q.current.scale.set(me,ve,1)}re.current=!0}}}else{const xe=X.children[0];if(xe!=null&&xe.clientWidth&&xe!=null&&xe.clientHeight){const ge=1/W.factor,oe=xe.clientWidth*ge,me=xe.clientHeight*ge;Q.current.scale.set(oe,me,1),re.current=!0}Q.current.lookAt(Te.camera.position)}});const Ee=q.useMemo(()=>({vertexShader:h?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom"
            is false.
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;

            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[h]);return q.createElement("group",od({},R,{ref:G}),p&&!ne&&q.createElement("mesh",{castShadow:y,receiveShadow:b,ref:Q},S||q.createElement("planeGeometry",null),x||q.createElement("shaderMaterial",{side:yr,vertexShader:Ee.vertexShader,fragmentShader:Ee.fragmentShader})))});function jp(n,e="pointer",t="auto",i=document.body){q.useEffect(()=>{if(n)return i.style.cursor=e,()=>{i.style.cursor=t}},[n])}function ppe(n,e,t){return Math.max(e,Math.min(n,t))}const Gi={toVector(n,e){return n===void 0&&(n=e),Array.isArray(n)?n:[n,n]},add(n,e){return[n[0]+e[0],n[1]+e[1]]},sub(n,e){return[n[0]-e[0],n[1]-e[1]]},addTo(n,e){n[0]+=e[0],n[1]+=e[1]},subTo(n,e){n[0]-=e[0],n[1]-=e[1]}};function yz(n,e,t){return e===0||Math.abs(e)===1/0?Math.pow(n,t*5):n*e*t/(e+t*n)}function bz(n,e,t,i=.15){return i===0?ppe(n,e,t):n<e?-yz(e-n,t-e,i)+e:n>t?+yz(n-t,t-e,i)+t:n}function mpe(n,[e,t],[i,r]){const[[s,o],[a,l]]=n;return[bz(e,s,o,i),bz(t,a,l,r)]}function gpe(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function vpe(n){var e=gpe(n,"string");return typeof e=="symbol"?e:String(e)}function zr(n,e,t){return e=vpe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function _z(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function lr(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?_z(Object(t),!0).forEach(function(i){zr(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):_z(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}const lG={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function xz(n){return n?n[0].toUpperCase()+n.slice(1):""}const ype=["enter","leave"];function bpe(n=!1,e){return n&&!ype.includes(e)}function _pe(n,e="",t=!1){const i=lG[n],r=i&&i[e]||e;return"on"+xz(n)+xz(r)+(bpe(t,r)?"Capture":"")}const xpe=["gotpointercapture","lostpointercapture"];function Spe(n){let e=n.substring(2).toLowerCase();const t=!!~e.indexOf("passive");t&&(e=e.replace("passive",""));const i=xpe.includes(e)?"capturecapture":"capture",r=!!~e.indexOf(i);return r&&(e=e.replace("capture","")),{device:e,capture:r,passive:t}}function wpe(n,e=""){const t=lG[n],i=t&&t[e]||e;return n+i}function JT(n){return"touches"in n}function cG(n){return JT(n)?"touch":"pointerType"in n?n.pointerType:"mouse"}function Epe(n){return Array.from(n.touches).filter(e=>{var t,i;return e.target===n.currentTarget||((t=n.currentTarget)===null||t===void 0||(i=t.contains)===null||i===void 0?void 0:i.call(t,e.target))})}function Tpe(n){return n.type==="touchend"||n.type==="touchcancel"?n.changedTouches:n.targetTouches}function uG(n){return JT(n)?Tpe(n)[0]:n}function K3(n,e){try{const t=e.clientX-n.clientX,i=e.clientY-n.clientY,r=(e.clientX+n.clientX)/2,s=(e.clientY+n.clientY)/2,o=Math.hypot(t,i);return{angle:-(Math.atan2(t,i)*180)/Math.PI,distance:o,origin:[r,s]}}catch{}return null}function Mpe(n){return Epe(n).map(e=>e.identifier)}function Sz(n,e){const[t,i]=Array.from(n.touches).filter(r=>e.includes(r.identifier));return K3(t,i)}function oR(n){const e=uG(n);return JT(n)?e.identifier:e.pointerId}function D0(n){const e=uG(n);return[e.clientX,e.clientY]}const wz=40,Ez=800;function fG(n){let{deltaX:e,deltaY:t,deltaMode:i}=n;return i===1?(e*=wz,t*=wz):i===2&&(e*=Ez,t*=Ez),[e,t]}function Ape(n){var e,t;const{scrollX:i,scrollY:r,scrollLeft:s,scrollTop:o}=n.currentTarget;return[(e=i??s)!==null&&e!==void 0?e:0,(t=r??o)!==null&&t!==void 0?t:0]}function Cpe(n){const e={};if("buttons"in n&&(e.buttons=n.buttons),"shiftKey"in n){const{shiftKey:t,altKey:i,metaKey:r,ctrlKey:s}=n;Object.assign(e,{shiftKey:t,altKey:i,metaKey:r,ctrlKey:s})}return e}function HE(n,...e){return typeof n=="function"?n(...e):n}function Rpe(){}function Dpe(...n){return n.length===0?Rpe:n.length===1?n[0]:function(){let e;for(const t of n)e=t.apply(this,arguments)||e;return e}}function Tz(n,e){return Object.assign({},e,n||{})}const Ope=32;class hG{constructor(e,t,i){this.ctrl=e,this.args=t,this.key=i,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:t,ingKey:i,args:r}=this;t[i]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=r,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const t=this.state,i=this.config;t._active||(this.reset(),this.computeInitial(),t._active=!0,t.target=e.target,t.currentTarget=e.currentTarget,t.lastOffset=i.from?HE(i.from,t):t.offset,t.offset=t.lastOffset,t.startTime=t.timeStamp=e.timeStamp)}computeValues(e){const t=this.state;t._values=e,t.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:t,config:i,shared:r}=this;t.args=this.args;let s=0;if(e&&(t.event=e,i.preventDefault&&e.cancelable&&t.event.preventDefault(),t.type=e.type,r.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,r.locked=!!document.pointerLockElement,Object.assign(r,Cpe(e)),r.down=r.pressed=r.buttons%2===1||r.touches>0,s=e.timeStamp-t.timeStamp,t.timeStamp=e.timeStamp,t.elapsedTime=t.timeStamp-t.startTime),t._active){const R=t._delta.map(Math.abs);Gi.addTo(t._distance,R)}this.axisIntent&&this.axisIntent(e);const[o,a]=t._movement,[l,u]=i.threshold,{_step:h,values:p}=t;if(i.hasCustomTransform?(h[0]===!1&&(h[0]=Math.abs(o)>=l&&p[0]),h[1]===!1&&(h[1]=Math.abs(a)>=u&&p[1])):(h[0]===!1&&(h[0]=Math.abs(o)>=l&&Math.sign(o)*l),h[1]===!1&&(h[1]=Math.abs(a)>=u&&Math.sign(a)*u)),t.intentional=h[0]!==!1||h[1]!==!1,!t.intentional)return;const m=[0,0];if(i.hasCustomTransform){const[R,L]=p;m[0]=h[0]!==!1?R-h[0]:0,m[1]=h[1]!==!1?L-h[1]:0}else m[0]=h[0]!==!1?o-h[0]:0,m[1]=h[1]!==!1?a-h[1]:0;this.restrictToAxis&&!t._blocked&&this.restrictToAxis(m);const y=t.offset,b=t._active&&!t._blocked||t.active;b&&(t.first=t._active&&!t.active,t.last=!t._active&&t.active,t.active=r[this.ingKey]=t._active,e&&(t.first&&("bounds"in i&&(t._bounds=HE(i.bounds,t)),this.setup&&this.setup()),t.movement=m,this.computeOffset()));const[x,S]=t.offset,[[_,T],[A,M]]=t._bounds;t.overflow=[x<_?-1:x>T?1:0,S<A?-1:S>M?1:0],t._movementBound[0]=t.overflow[0]?t._movementBound[0]===!1?t._movement[0]:t._movementBound[0]:!1,t._movementBound[1]=t.overflow[1]?t._movementBound[1]===!1?t._movement[1]:t._movementBound[1]:!1;const C=t._active?i.rubberband||[0,0]:[0,0];if(t.offset=mpe(t._bounds,t.offset,C),t.delta=Gi.sub(t.offset,y),this.computeMovement(),b&&(!t.last||s>Ope)){t.delta=Gi.sub(t.offset,y);const R=t.delta.map(Math.abs);Gi.addTo(t.distance,R),t.direction=t.delta.map(Math.sign),t._direction=t._delta.map(Math.sign),!t.first&&s>0&&(t.velocity=[R[0]/s,R[1]/s],t.timeDelta=s)}}emit(){const e=this.state,t=this.shared,i=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!i.triggerAllEvents)return;const r=this.handler(lr(lr(lr({},t),e),{},{[this.aliasKey]:e.values}));r!==void 0&&(e.memo=r)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function Lpe([n,e],t){const i=Math.abs(n),r=Math.abs(e);if(i>r&&i>t)return"x";if(r>i&&r>t)return"y"}class j_ extends hG{constructor(...e){super(...e),zr(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=Gi.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=Gi.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const t=this.state,i=this.config;if(!t.axis&&e){const r=typeof i.axisThreshold=="object"?i.axisThreshold[cG(e)]:i.axisThreshold;t.axis=Lpe(t._movement,r)}t._blocked=(i.lockDirection||!!i.axis)&&!t.axis||!!i.axis&&i.axis!==t.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0;break}}}const Ppe=n=>n,Mz=.15,dG={enabled(n=!0){return n},eventOptions(n,e,t){return lr(lr({},t.shared.eventOptions),n)},preventDefault(n=!1){return n},triggerAllEvents(n=!1){return n},rubberband(n=0){switch(n){case!0:return[Mz,Mz];case!1:return[0,0];default:return Gi.toVector(n)}},from(n){if(typeof n=="function")return n;if(n!=null)return Gi.toVector(n)},transform(n,e,t){const i=n||t.shared.transform;return this.hasCustomTransform=!!i,i||Ppe},threshold(n){return Gi.toVector(n,0)}},Ipe=0,am=lr(lr({},dG),{},{axis(n,e,{axis:t}){if(this.lockDirection=t==="lock",!this.lockDirection)return t},axisThreshold(n=Ipe){return n},bounds(n={}){if(typeof n=="function")return s=>am.bounds(n(s));if("current"in n)return()=>n.current;if(typeof HTMLElement=="function"&&n instanceof HTMLElement)return n;const{left:e=-1/0,right:t=1/0,top:i=-1/0,bottom:r=1/0}=n;return[[e,t],[i,r]]}}),Az={ArrowRight:(n,e=1)=>[n*e,0],ArrowLeft:(n,e=1)=>[-1*n*e,0],ArrowUp:(n,e=1)=>[0,-1*n*e],ArrowDown:(n,e=1)=>[0,n*e]};class Npe extends j_{constructor(...e){super(...e),zr(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const t=e._bounds.getBoundingClientRect(),i=e.currentTarget.getBoundingClientRect(),r={left:t.left-i.left+e.offset[0],right:t.right-i.right+e.offset[0],top:t.top-i.top+e.offset[1],bottom:t.bottom-i.bottom+e.offset[1]};e._bounds=am.bounds(r)}}cancel(){const e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){const t=this.config,i=this.state;if(e.buttons!=null&&(Array.isArray(t.pointerButtons)?!t.pointerButtons.includes(e.buttons):t.pointerButtons!==-1&&t.pointerButtons!==e.buttons))return;const r=this.ctrl.setEventIds(e);t.pointerCapture&&e.target.setPointerCapture(e.pointerId),!(r&&r.size>1&&i._pointerActive)&&(this.start(e),this.setupPointer(e),i._pointerId=oR(e),i._pointerActive=!0,this.computeValues(D0(e)),this.computeInitial(),t.preventScrollAxis&&cG(e)!=="mouse"?(i._active=!1,this.setupScrollPrevention(e)):t.delay>0?(this.setupDelayTrigger(e),t.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){const t=this.state;t._active=!0,t._preventScroll=!0,t._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const t=this.state,i=this.config;if(!t._pointerActive)return;const r=oR(e);if(t._pointerId!==void 0&&r!==t._pointerId)return;const s=D0(e);if(document.pointerLockElement===e.target?t._delta=[e.movementX,e.movementY]:(t._delta=Gi.sub(s,t._values),this.computeValues(s)),Gi.addTo(t._movement,t._delta),this.compute(e),t._delayed&&t.intentional){this.timeoutStore.remove("dragDelay"),t.active=!1,this.startPointerDrag(e);return}if(i.preventScrollAxis&&!t._preventScroll)if(t.axis)if(t.axis===i.preventScrollAxis||i.preventScrollAxis==="xy"){t._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(e);return}else return;this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch{}const t=this.state,i=this.config;if(!t._active||!t._pointerActive)return;const r=oR(e);if(t._pointerId!==void 0&&r!==t._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[s,o]=t._distance;if(t.tap=s<=i.tapsThreshold&&o<=i.tapsThreshold,t.tap&&i.filterTaps)t._force=!0;else{const[a,l]=t._delta,[u,h]=t._movement,[p,m]=i.swipe.velocity,[y,b]=i.swipe.distance,x=i.swipe.duration;if(t.elapsedTime<x){const S=Math.abs(a/t.timeDelta),_=Math.abs(l/t.timeDelta);S>p&&Math.abs(u)>y&&(t.swipe[0]=Math.sign(a)),_>m&&Math.abs(h)>b&&(t.swipe[1]=Math.sign(l))}}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){const t=this.config,i=t.device;t.pointerLock&&e.currentTarget.requestPointerLock(),t.pointerCapture||(this.eventStore.add(this.sharedConfig.window,i,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,Upe(e);const t=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",t),this.eventStore.add(this.sharedConfig.window,"touch","cancel",t),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(e)},this.config.delay)}keyDown(e){const t=Az[e.key];if(t){const i=this.state,r=e.shiftKey?10:e.altKey?.1:1;this.start(e),i._delta=t(this.config.keyboardDisplacement,r),i._keyboardActive=!0,Gi.addTo(i._movement,i._delta),this.compute(e),this.emit()}}keyUp(e){e.key in Az&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const t=this.config.device;e(t,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(t,"change",this.pointerMove.bind(this)),e(t,"end",this.pointerUp.bind(this)),e(t,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function Upe(n){"persist"in n&&typeof n.persist=="function"&&n.persist()}const W_=typeof window<"u"&&window.document&&window.document.createElement;function pG(){return W_&&"ontouchstart"in window}function kpe(){return pG()||W_&&window.navigator.maxTouchPoints>1}function zpe(){return W_&&"onpointerdown"in window}function Fpe(){return W_&&"exitPointerLock"in window.document}function Bpe(){try{return"constructor"in GestureEvent}catch{return!1}}const fl={isBrowser:W_,gesture:Bpe(),touch:pG(),touchscreen:kpe(),pointer:zpe(),pointerLock:Fpe()},Vpe=250,Gpe=180,Hpe=.5,jpe=50,Wpe=250,Xpe=10,Cz={mouse:0,touch:0,pen:8},qpe=lr(lr({},am),{},{device(n,e,{pointer:{touch:t=!1,lock:i=!1,mouse:r=!1}={}}){return this.pointerLock=i&&fl.pointerLock,fl.touch&&t?"touch":this.pointerLock?"mouse":fl.pointer&&!r?"pointer":fl.touch?"touch":"mouse"},preventScrollAxis(n,e,{preventScroll:t}){if(this.preventScrollDelay=typeof t=="number"?t:t||t===void 0&&n?Vpe:void 0,!(!fl.touchscreen||t===!1))return n||(t!==void 0?"y":void 0)},pointerCapture(n,e,{pointer:{capture:t=!0,buttons:i=1,keys:r=!0}={}}){return this.pointerButtons=i,this.keys=r,!this.pointerLock&&this.device==="pointer"&&t},threshold(n,e,{filterTaps:t=!1,tapsThreshold:i=3,axis:r=void 0}){const s=Gi.toVector(n,t?i:r?1:0);return this.filterTaps=t,this.tapsThreshold=i,s},swipe({velocity:n=Hpe,distance:e=jpe,duration:t=Wpe}={}){return{velocity:this.transform(Gi.toVector(n)),distance:this.transform(Gi.toVector(e)),duration:t}},delay(n=0){switch(n){case!0:return Gpe;case!1:return 0;default:return n}},axisThreshold(n){return n?lr(lr({},Cz),n):Cz},keyboardDisplacement(n=Xpe){return n}});function mG(n){const[e,t]=n.overflow,[i,r]=n._delta,[s,o]=n._direction;(e<0&&i>0&&s<0||e>0&&i<0&&s>0)&&(n._movement[0]=n._movementBound[0]),(t<0&&r>0&&o<0||t>0&&r<0&&o>0)&&(n._movement[1]=n._movementBound[1])}const Ype=30,$pe=100;class Zpe extends hG{constructor(...e){super(...e),zr(this,"ingKey","pinching"),zr(this,"aliasKey","da")}init(){this.state.offset=[1,0],this.state.lastOffset=[1,0],this.state._pointerEvents=new Map}reset(){super.reset();const e=this.state;e._touchIds=[],e.canceled=!1,e.cancel=this.cancel.bind(this),e.turns=0}computeOffset(){const{type:e,movement:t,lastOffset:i}=this.state;e==="wheel"?this.state.offset=Gi.add(t,i):this.state.offset=[(1+t[0])*i[0],t[1]+i[1]]}computeMovement(){const{offset:e,lastOffset:t}=this.state;this.state.movement=[e[0]/t[0],e[1]-t[1]]}axisIntent(){const e=this.state,[t,i]=e._movement;if(!e.axis){const r=Math.abs(t)*Ype-Math.abs(i);r<0?e.axis="angle":r>0&&(e.axis="scale")}}restrictToAxis(e){this.config.lockDirection&&(this.state.axis==="scale"?e[1]=0:this.state.axis==="angle"&&(e[0]=0))}cancel(){const e=this.state;e.canceled||setTimeout(()=>{e.canceled=!0,e._active=!1,this.compute(),this.emit()},0)}touchStart(e){this.ctrl.setEventIds(e);const t=this.state,i=this.ctrl.touchIds;if(t._active&&t._touchIds.every(s=>i.has(s))||i.size<2)return;this.start(e),t._touchIds=Array.from(i).slice(0,2);const r=Sz(e,t._touchIds);r&&this.pinchStart(e,r)}pointerStart(e){if(e.buttons!=null&&e.buttons%2!==1)return;this.ctrl.setEventIds(e),e.target.setPointerCapture(e.pointerId);const t=this.state,i=t._pointerEvents,r=this.ctrl.pointerIds;if(t._active&&Array.from(i.keys()).every(o=>r.has(o))||(i.size<2&&i.set(e.pointerId,e),t._pointerEvents.size<2))return;this.start(e);const s=K3(...Array.from(i.values()));s&&this.pinchStart(e,s)}pinchStart(e,t){const i=this.state;i.origin=t.origin,this.computeValues([t.distance,t.angle]),this.computeInitial(),this.compute(e),this.emit()}touchMove(e){if(!this.state._active)return;const t=Sz(e,this.state._touchIds);t&&this.pinchMove(e,t)}pointerMove(e){const t=this.state._pointerEvents;if(t.has(e.pointerId)&&t.set(e.pointerId,e),!this.state._active)return;const i=K3(...Array.from(t.values()));i&&this.pinchMove(e,i)}pinchMove(e,t){const i=this.state,r=i._values[1],s=t.angle-r;let o=0;Math.abs(s)>270&&(o+=Math.sign(s)),this.computeValues([t.distance,t.angle-360*o]),i.origin=t.origin,i.turns=o,i._movement=[i._values[0]/i._initial[0]-1,i._values[1]-i._initial[1]],this.compute(e),this.emit()}touchEnd(e){this.ctrl.setEventIds(e),this.state._active&&this.state._touchIds.some(t=>!this.ctrl.touchIds.has(t))&&(this.state._active=!1,this.compute(e),this.emit())}pointerEnd(e){const t=this.state;this.ctrl.setEventIds(e);try{e.target.releasePointerCapture(e.pointerId)}catch{}t._pointerEvents.has(e.pointerId)&&t._pointerEvents.delete(e.pointerId),t._active&&t._pointerEvents.size<2&&(t._active=!1,this.compute(e),this.emit())}gestureStart(e){e.cancelable&&e.preventDefault();const t=this.state;t._active||(this.start(e),this.computeValues([e.scale,e.rotation]),t.origin=[e.clientX,e.clientY],this.compute(e),this.emit())}gestureMove(e){if(e.cancelable&&e.preventDefault(),!this.state._active)return;const t=this.state;this.computeValues([e.scale,e.rotation]),t.origin=[e.clientX,e.clientY];const i=t._movement;t._movement=[e.scale-1,e.rotation],t._delta=Gi.sub(t._movement,i),this.compute(e),this.emit()}gestureEnd(e){this.state._active&&(this.state._active=!1,this.compute(e),this.emit())}wheel(e){const t=this.config.modifierKey;t&&(Array.isArray(t)?!t.find(i=>e[i]):!e[t])||(this.state._active?this.wheelChange(e):this.wheelStart(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this)))}wheelStart(e){this.start(e),this.wheelChange(e)}wheelChange(e){"uv"in e||e.cancelable&&e.preventDefault();const i=this.state;i._delta=[-fG(e)[1]/$pe*i.offset[0],0],Gi.addTo(i._movement,i._delta),mG(i),this.state.origin=[e.clientX,e.clientY],this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){const t=this.config.device;t&&(e(t,"start",this[t+"Start"].bind(this)),e(t,"change",this[t+"Move"].bind(this)),e(t,"end",this[t+"End"].bind(this)),e(t,"cancel",this[t+"End"].bind(this)),e("lostPointerCapture","",this[t+"End"].bind(this))),this.config.pinchOnWheel&&e("wheel","",this.wheel.bind(this),{passive:!1})}}const Kpe=lr(lr({},dG),{},{device(n,e,{shared:t,pointer:{touch:i=!1}={}}){if(t.target&&!fl.touch&&fl.gesture)return"gesture";if(fl.touch&&i)return"touch";if(fl.touchscreen){if(fl.pointer)return"pointer";if(fl.touch)return"touch"}},bounds(n,e,{scaleBounds:t={},angleBounds:i={}}){const r=o=>{const a=Tz(HE(t,o),{min:-1/0,max:1/0});return[a.min,a.max]},s=o=>{const a=Tz(HE(i,o),{min:-1/0,max:1/0});return[a.min,a.max]};return typeof t!="function"&&typeof i!="function"?[r(),s()]:o=>[r(o),s(o)]},threshold(n,e,t){return this.lockDirection=t.axis==="lock",Gi.toVector(n,this.lockDirection?[.1,3]:0)},modifierKey(n){return n===void 0?"ctrlKey":n},pinchOnWheel(n=!0){return n}});class Qpe extends j_{constructor(...e){super(...e),zr(this,"ingKey","moving")}move(e){this.config.mouseOnly&&e.pointerType!=="mouse"||(this.state._active?this.moveChange(e):this.moveStart(e),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(e){this.start(e),this.computeValues(D0(e)),this.compute(e),this.computeInitial(),this.emit()}moveChange(e){if(!this.state._active)return;const t=D0(e),i=this.state;i._delta=Gi.sub(t,i._values),Gi.addTo(i._movement,i._delta),this.computeValues(t),this.compute(e),this.emit()}moveEnd(e){this.state._active&&(this.state._active=!1,this.compute(e),this.emit())}bind(e){e("pointer","change",this.move.bind(this)),e("pointer","leave",this.moveEnd.bind(this))}}const Jpe=lr(lr({},am),{},{mouseOnly:(n=!0)=>n});class eme extends j_{constructor(...e){super(...e),zr(this,"ingKey","scrolling")}scroll(e){this.state._active||this.start(e),this.scrollChange(e),this.timeoutStore.add("scrollEnd",this.scrollEnd.bind(this))}scrollChange(e){e.cancelable&&e.preventDefault();const t=this.state,i=Ape(e);t._delta=Gi.sub(i,t._values),Gi.addTo(t._movement,t._delta),this.computeValues(i),this.compute(e),this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){e("scroll","",this.scroll.bind(this))}}const tme=am;class nme extends j_{constructor(...e){super(...e),zr(this,"ingKey","wheeling")}wheel(e){this.state._active||this.start(e),this.wheelChange(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(e){const t=this.state;t._delta=fG(e),Gi.addTo(t._movement,t._delta),mG(t),this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){e("wheel","",this.wheel.bind(this))}}const ime=am;class rme extends j_{constructor(...e){super(...e),zr(this,"ingKey","hovering")}enter(e){this.config.mouseOnly&&e.pointerType!=="mouse"||(this.start(e),this.computeValues(D0(e)),this.compute(e),this.emit())}leave(e){if(this.config.mouseOnly&&e.pointerType!=="mouse")return;const t=this.state;if(!t._active)return;t._active=!1;const i=D0(e);t._movement=t._delta=Gi.sub(i,t._values),this.computeValues(i),this.compute(e),t.delta=t.movement,this.emit()}bind(e){e("pointer","enter",this.enter.bind(this)),e("pointer","leave",this.leave.bind(this))}}const sme=lr(lr({},am),{},{mouseOnly:(n=!0)=>n}),ML=new Map,Q3=new Map;function ome(n){ML.set(n.key,n.engine),Q3.set(n.key,n.resolver)}const ame={key:"drag",engine:Npe,resolver:qpe},lme={key:"hover",engine:rme,resolver:sme},cme={key:"move",engine:Qpe,resolver:Jpe},ume={key:"pinch",engine:Zpe,resolver:Kpe},fme={key:"scroll",engine:eme,resolver:tme},hme={key:"wheel",engine:nme,resolver:ime};function dme(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function pme(n,e){if(n==null)return{};var t=dme(n,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}const mme={target(n){if(n)return()=>"current"in n?n.current:n},enabled(n=!0){return n},window(n=fl.isBrowser?window:void 0){return n},eventOptions({passive:n=!0,capture:e=!1}={}){return{passive:n,capture:e}},transform(n){return n}},gme=["target","eventOptions","window","enabled","transform"];function cw(n={},e){const t={};for(const[i,r]of Object.entries(e))switch(typeof r){case"function":t[i]=r.call(t,n[i],i,n);break;case"object":t[i]=cw(n[i],r);break;case"boolean":r&&(t[i]=n[i]);break}return t}function vme(n,e,t={}){const i=n,{target:r,eventOptions:s,window:o,enabled:a,transform:l}=i,u=pme(i,gme);if(t.shared=cw({target:r,eventOptions:s,window:o,enabled:a,transform:l},mme),e){const h=Q3.get(e);t[e]=cw(lr({shared:t.shared},u),h)}else for(const h in u){const p=Q3.get(h);p&&(t[h]=cw(lr({shared:t.shared},u[h]),p))}return t}class gG{constructor(e,t){zr(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=t}add(e,t,i,r,s){const o=this._listeners,a=wpe(t,i),l=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},u=lr(lr({},l),s);e.addEventListener(a,r,u);const h=()=>{e.removeEventListener(a,r,u),o.delete(h)};return o.add(h),h}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}}class yme{constructor(){zr(this,"_timeouts",new Map)}add(e,t,i=140,...r){this.remove(e),this._timeouts.set(e,window.setTimeout(t,i,...r))}remove(e){const t=this._timeouts.get(e);t&&window.clearTimeout(t)}clean(){this._timeouts.forEach(e=>{window.clearTimeout(e)}),this._timeouts.clear()}}class bme{constructor(e){zr(this,"gestures",new Set),zr(this,"_targetEventStore",new gG(this)),zr(this,"gestureEventStores",{}),zr(this,"gestureTimeoutStores",{}),zr(this,"handlers",{}),zr(this,"config",{}),zr(this,"pointerIds",new Set),zr(this,"touchIds",new Set),zr(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),_me(this,e)}setEventIds(e){if(JT(e))return this.touchIds=new Set(Mpe(e)),this.touchIds;if("pointerId"in e)return e.type==="pointerup"||e.type==="pointercancel"?this.pointerIds.delete(e.pointerId):e.type==="pointerdown"&&this.pointerIds.add(e.pointerId),this.pointerIds}applyHandlers(e,t){this.handlers=e,this.nativeHandlers=t}applyConfig(e,t){this.config=vme(e,t,this.config)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const t=this.config.shared,i={};let r;if(!(t.target&&(r=t.target(),!r))){if(t.enabled){for(const o of this.gestures){const a=this.config[o],l=Rz(i,a.eventOptions,!!r);if(a.enabled){const u=ML.get(o);new u(this,e,o).bind(l)}}const s=Rz(i,t.eventOptions,!!r);for(const o in this.nativeHandlers)s(o,"",a=>this.nativeHandlers[o](lr(lr({},this.state.shared),{},{event:a,args:e})),void 0,!0)}for(const s in i)i[s]=Dpe(...i[s]);if(!r)return i;for(const s in i){const{device:o,capture:a,passive:l}=Spe(s);this._targetEventStore.add(r,o,"",i[s],{capture:a,passive:l})}}}}function Wg(n,e){n.gestures.add(e),n.gestureEventStores[e]=new gG(n,e),n.gestureTimeoutStores[e]=new yme}function _me(n,e){e.drag&&Wg(n,"drag"),e.wheel&&Wg(n,"wheel"),e.scroll&&Wg(n,"scroll"),e.move&&Wg(n,"move"),e.pinch&&Wg(n,"pinch"),e.hover&&Wg(n,"hover")}const Rz=(n,e,t)=>(i,r,s,o={},a=!1)=>{var l,u;const h=(l=o.capture)!==null&&l!==void 0?l:e.capture,p=(u=o.passive)!==null&&u!==void 0?u:e.passive;let m=a?i:_pe(i,r,h);t&&p&&(m+="Passive"),n[m]=n[m]||[],n[m].push(s)},xme=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function Sme(n){const e={},t={},i=new Set;for(let r in n)xme.test(r)?(i.add(RegExp.lastMatch),t[r]=n[r]):e[r]=n[r];return[t,e,i]}function Xg(n,e,t,i,r,s){if(!n.has(t)||!ML.has(i))return;const o=t+"Start",a=t+"End",l=u=>{let h;return u.first&&o in e&&e[o](u),t in e&&(h=e[t](u)),u.last&&a in e&&e[a](u),h};r[i]=l,s[i]=s[i]||{}}function wme(n,e){const[t,i,r]=Sme(n),s={};return Xg(r,t,"onDrag","drag",s,e),Xg(r,t,"onWheel","wheel",s,e),Xg(r,t,"onScroll","scroll",s,e),Xg(r,t,"onPinch","pinch",s,e),Xg(r,t,"onMove","move",s,e),Xg(r,t,"onHover","hover",s,e),{handlers:s,config:e,nativeHandlers:i}}function Eme(n,e={},t,i){const r=Rs.useMemo(()=>new bme(n),[]);if(r.applyHandlers(n,i),r.applyConfig(e,t),Rs.useEffect(r.effect.bind(r)),Rs.useEffect(()=>r.clean.bind(r),[]),e.target===void 0)return r.bind.bind(r)}function Tme(n){return n.forEach(ome),function(t,i){const{handlers:r,nativeHandlers:s,config:o}=wme(t,i||{});return Eme(r,o,void 0,s)}}function Mme(n,e){return Tme([ame,ume,fme,hme,cme,lme])(n,e||{})}const vG=q.forwardRef(function({children:e,follow:t=!0,lockX:i=!1,lockY:r=!1,lockZ:s=!1,...o},a){const l=q.useRef(null),u=q.useRef(null),h=new Os;return GT(({camera:p})=>{if(!t||!u.current)return;const m=l.current.rotation.clone();u.current.updateMatrix(),u.current.updateWorldMatrix(!1,!1),u.current.getWorldQuaternion(h),p.getWorldQuaternion(l.current.quaternion).premultiply(h.invert()),i&&(l.current.rotation.x=m.x),r&&(l.current.rotation.y=m.y),s&&(l.current.rotation.z=m.z)}),q.useImperativeHandle(a,()=>u.current,[]),q.createElement("group",od({ref:u},o),q.createElement("group",{ref:l},e))});function Ame(){var n=Object.create(null);function e(r,s){var o=r.id,a=r.name,l=r.dependencies;l===void 0&&(l=[]);var u=r.init;u===void 0&&(u=function(){});var h=r.getTransferables;if(h===void 0&&(h=null),!n[o])try{l=l.map(function(m){return m&&m.isWorkerModule&&(e(m,function(y){if(y instanceof Error)throw y}),m=n[m.id].value),m}),u=i("<"+a+">.init",u),h&&(h=i("<"+a+">.getTransferables",h));var p=null;typeof u=="function"?p=u.apply(void 0,l):console.error("worker module init function failed to rehydrate"),n[o]={id:o,value:p,getTransferables:h},s(p)}catch(m){m&&m.noLog||console.error(m),s(m)}}function t(r,s){var o,a=r.id,l=r.args;(!n[a]||typeof n[a].value!="function")&&s(new Error("Worker module "+a+": not found or its 'init' did not return a function"));try{var u=(o=n[a]).value.apply(o,l);u&&typeof u.then=="function"?u.then(h,function(p){return s(p instanceof Error?p:new Error(""+p))}):h(u)}catch(p){s(p)}function h(p){try{var m=n[a].getTransferables&&n[a].getTransferables(p);(!m||!Array.isArray(m)||!m.length)&&(m=void 0),s(p,m)}catch(y){console.error(y),s(y)}}}function i(r,s){var o=void 0;self.troikaDefine=function(l){return o=l};var a=URL.createObjectURL(new Blob(["/** "+r.replace(/\*/g,"")+` **/

troikaDefine(
`+s+`
)`],{type:"application/javascript"}));try{importScripts(a)}catch(l){console.error(l)}return URL.revokeObjectURL(a),delete self.troikaDefine,o}self.addEventListener("message",function(r){var s=r.data,o=s.messageId,a=s.action,l=s.data;try{a==="registerModule"&&e(l,function(u){u instanceof Error?postMessage({messageId:o,success:!1,error:u.message}):postMessage({messageId:o,success:!0,result:{isCallable:typeof u=="function"}})}),a==="callModule"&&t(l,function(u,h){u instanceof Error?postMessage({messageId:o,success:!1,error:u.message}):postMessage({messageId:o,success:!0,result:u},h||void 0)})}catch(u){postMessage({messageId:o,success:!1,error:u.stack})}})}function Cme(n){var e=function(){for(var t=[],i=arguments.length;i--;)t[i]=arguments[i];return e._getInitResult().then(function(r){if(typeof r=="function")return r.apply(void 0,t);throw new Error("Worker module function was called but `init` did not return a callable function")})};return e._getInitResult=function(){var t=n.dependencies,i=n.init;t=Array.isArray(t)?t.map(function(s){return s&&(s=s.onMainThread||s,s._getInitResult&&(s=s._getInitResult())),s}):[];var r=Promise.all(t).then(function(s){return i.apply(null,s)});return e._getInitResult=function(){return r},r},e}var yG=function(){var n=!1;if(typeof window<"u"&&typeof window.document<"u")try{var e=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));e.terminate(),n=!0}catch(t){console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+t.message+"]")}return yG=function(){return n},n},Rme=0,Dme=0,aR=!1,Fb=Object.create(null),Bb=Object.create(null),J3=Object.create(null);function ev(n){if((!n||typeof n.init!="function")&&!aR)throw new Error("requires `options.init` function");var e=n.dependencies,t=n.init,i=n.getTransferables,r=n.workerId,s=Cme(n);r==null&&(r="#default");var o="workerModule"+ ++Rme,a=n.name||o,l=null;e=e&&e.map(function(h){return typeof h=="function"&&!h.workerModuleData&&(aR=!0,h=ev({workerId:r,name:"<"+a+"> function dependency: "+h.name,init:`function(){return (
`+uw(h)+`
)}`}),aR=!1),h&&h.workerModuleData&&(h=h.workerModuleData),h});function u(){for(var h=[],p=arguments.length;p--;)h[p]=arguments[p];if(!yG())return s.apply(void 0,h);if(!l){l=Dz(r,"registerModule",u.workerModuleData);var m=function(){l=null,Bb[r].delete(m)};(Bb[r]||(Bb[r]=new Set)).add(m)}return l.then(function(y){var b=y.isCallable;if(b)return Dz(r,"callModule",{id:o,args:h});throw new Error("Worker module function was called but `init` did not return a callable function")})}return u.workerModuleData={isWorkerModule:!0,id:o,name:a,dependencies:e,init:uw(t),getTransferables:i&&uw(i)},u.onMainThread=s,u}function Ome(n){Bb[n]&&Bb[n].forEach(function(e){e()}),Fb[n]&&(Fb[n].terminate(),delete Fb[n])}function uw(n){var e=n.toString();return!/^function/.test(e)&&/^\w+\s*\(/.test(e)&&(e="function "+e),e}function Lme(n){var e=Fb[n];if(!e){var t=uw(Ame);e=Fb[n]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+n.replace(/\*/g,"")+` **/

;(`+t+")()"],{type:"application/javascript"}))),e.onmessage=function(i){var r=i.data,s=r.messageId,o=J3[s];if(!o)throw new Error("WorkerModule response with empty or unknown messageId");delete J3[s],o(r)}}return e}function Dz(n,e,t){return new Promise(function(i,r){var s=++Dme;J3[s]=function(o){o.success?i(o.result):r(new Error("Error in worker "+e+" call: "+o.error))},Lme(n).postMessage({messageId:s,action:e,data:t})})}function bG(){var n=(function(e){function t(J,ee,V,Y,Q,re,ne,le){var fe=1-ne;le.x=fe*fe*J+2*fe*ne*V+ne*ne*Q,le.y=fe*fe*ee+2*fe*ne*Y+ne*ne*re}function i(J,ee,V,Y,Q,re,ne,le,fe,pe){var Ee=1-fe;pe.x=Ee*Ee*Ee*J+3*Ee*Ee*fe*V+3*Ee*fe*fe*Q+fe*fe*fe*ne,pe.y=Ee*Ee*Ee*ee+3*Ee*Ee*fe*Y+3*Ee*fe*fe*re+fe*fe*fe*le}function r(J,ee){for(var V=/([MLQCZ])([^MLQCZ]*)/g,Y,Q,re,ne,le;Y=V.exec(J);){var fe=Y[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(pe){return parseFloat(pe)});switch(Y[1]){case"M":ne=Q=fe[0],le=re=fe[1];break;case"L":(fe[0]!==ne||fe[1]!==le)&&ee("L",ne,le,ne=fe[0],le=fe[1]);break;case"Q":{ee("Q",ne,le,ne=fe[2],le=fe[3],fe[0],fe[1]);break}case"C":{ee("C",ne,le,ne=fe[4],le=fe[5],fe[0],fe[1],fe[2],fe[3]);break}case"Z":(ne!==Q||le!==re)&&ee("L",ne,le,Q,re);break}}}function s(J,ee,V){V===void 0&&(V=16);var Y={x:0,y:0};r(J,function(Q,re,ne,le,fe,pe,Ee,Te,xe){switch(Q){case"L":ee(re,ne,le,fe);break;case"Q":{for(var ge=re,oe=ne,me=1;me<V;me++)t(re,ne,pe,Ee,le,fe,me/(V-1),Y),ee(ge,oe,Y.x,Y.y),ge=Y.x,oe=Y.y;break}case"C":{for(var ve=re,he=ne,Ce=1;Ce<V;Ce++)i(re,ne,pe,Ee,Te,xe,le,fe,Ce/(V-1),Y),ee(ve,he,Y.x,Y.y),ve=Y.x,he=Y.y;break}}})}var o="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",a="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",l=new WeakMap,u={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function h(J,ee){var V=J.getContext?J.getContext("webgl",u):J,Y=l.get(V);if(!Y){let ve=function(be){var Je=re[be];if(!Je&&(Je=re[be]=V.getExtension(be),!Je))throw new Error(be+" not supported");return Je},he=function(be,Je){var te=V.createShader(Je);return V.shaderSource(te,be),V.compileShader(te),te},Ce=function(be,Je,te,Z){if(!ne[be]){var de={},Ne={},Oe=V.createProgram();V.attachShader(Oe,he(Je,V.VERTEX_SHADER)),V.attachShader(Oe,he(te,V.FRAGMENT_SHADER)),V.linkProgram(Oe),ne[be]={program:Oe,transaction:function(et){V.useProgram(Oe),et({setUniform:function(ft,dt){for(var Xe=[],Ke=arguments.length-2;Ke-- >0;)Xe[Ke]=arguments[Ke+2];var nt=Ne[dt]||(Ne[dt]=V.getUniformLocation(Oe,dt));V["uniform"+ft].apply(V,[nt].concat(Xe))},setAttribute:function(ft,dt,Xe,Ke,nt){var ct=de[ft];ct||(ct=de[ft]={buf:V.createBuffer(),loc:V.getAttribLocation(Oe,ft),data:null}),V.bindBuffer(V.ARRAY_BUFFER,ct.buf),V.vertexAttribPointer(ct.loc,dt,V.FLOAT,!1,0,0),V.enableVertexAttribArray(ct.loc),Q?V.vertexAttribDivisor(ct.loc,Ke):ve("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(ct.loc,Ke),nt!==ct.data&&(V.bufferData(V.ARRAY_BUFFER,nt,Xe),ct.data=nt)}})}}}ne[be].transaction(Z)},Re=function(be,Je){fe++;try{V.activeTexture(V.TEXTURE0+fe);var te=le[be];te||(te=le[be]=V.createTexture(),V.bindTexture(V.TEXTURE_2D,te),V.texParameteri(V.TEXTURE_2D,V.TEXTURE_MIN_FILTER,V.NEAREST),V.texParameteri(V.TEXTURE_2D,V.TEXTURE_MAG_FILTER,V.NEAREST)),V.bindTexture(V.TEXTURE_2D,te),Je(te,fe)}finally{fe--}},Le=function(be,Je,te){var Z=V.createFramebuffer();pe.push(Z),V.bindFramebuffer(V.FRAMEBUFFER,Z),V.activeTexture(V.TEXTURE0+Je),V.bindTexture(V.TEXTURE_2D,be),V.framebufferTexture2D(V.FRAMEBUFFER,V.COLOR_ATTACHMENT0,V.TEXTURE_2D,be,0);try{te(Z)}finally{V.deleteFramebuffer(Z),V.bindFramebuffer(V.FRAMEBUFFER,pe[--pe.length-1]||null)}},Ie=function(){re={},ne={},le={},fe=-1,pe.length=0};var Ee=ve,Te=he,xe=Ce,ge=Re,oe=Le,me=Ie,Q=typeof WebGL2RenderingContext<"u"&&V instanceof WebGL2RenderingContext,re={},ne={},le={},fe=-1,pe=[];V.canvas.addEventListener("webglcontextlost",function(be){Ie(),be.preventDefault()},!1),l.set(V,Y={gl:V,isWebGL2:Q,getExtension:ve,withProgram:Ce,withTexture:Re,withTextureFramebuffer:Le,handleContextLoss:Ie})}ee(Y)}function p(J,ee,V,Y,Q,re,ne,le){ne===void 0&&(ne=15),le===void 0&&(le=null),h(J,function(fe){var pe=fe.gl,Ee=fe.withProgram,Te=fe.withTexture;Te("copy",function(xe,ge){pe.texImage2D(pe.TEXTURE_2D,0,pe.RGBA,Q,re,0,pe.RGBA,pe.UNSIGNED_BYTE,ee),Ee("copy",o,a,function(oe){var me=oe.setUniform,ve=oe.setAttribute;ve("aUV",2,pe.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),me("1i","image",ge),pe.bindFramebuffer(pe.FRAMEBUFFER,le||null),pe.disable(pe.BLEND),pe.colorMask(ne&8,ne&4,ne&2,ne&1),pe.viewport(V,Y,Q,re),pe.scissor(V,Y,Q,re),pe.drawArrays(pe.TRIANGLES,0,3)})})})}function m(J,ee,V){var Y=J.width,Q=J.height;h(J,function(re){var ne=re.gl,le=new Uint8Array(Y*Q*4);ne.readPixels(0,0,Y,Q,ne.RGBA,ne.UNSIGNED_BYTE,le),J.width=ee,J.height=V,p(ne,le,0,0,Y,Q)})}var y=Object.freeze({__proto__:null,withWebGLContext:h,renderImageData:p,resizeWebGLCanvasWithoutClearing:m});function b(J,ee,V,Y,Q,re){re===void 0&&(re=1);var ne=new Uint8Array(J*ee),le=Y[2]-Y[0],fe=Y[3]-Y[1],pe=[];s(V,function(ve,he,Ce,Re){pe.push({x1:ve,y1:he,x2:Ce,y2:Re,minX:Math.min(ve,Ce),minY:Math.min(he,Re),maxX:Math.max(ve,Ce),maxY:Math.max(he,Re)})}),pe.sort(function(ve,he){return ve.maxX-he.maxX});for(var Ee=0;Ee<J;Ee++)for(var Te=0;Te<ee;Te++){var xe=oe(Y[0]+le*(Ee+.5)/J,Y[1]+fe*(Te+.5)/ee),ge=Math.pow(1-Math.abs(xe)/Q,re)/2;xe<0&&(ge=1-ge),ge=Math.max(0,Math.min(255,Math.round(ge*255))),ne[Te*J+Ee]=ge}return ne;function oe(ve,he){for(var Ce=1/0,Re=1/0,Le=pe.length;Le--;){var Ie=pe[Le];if(Ie.maxX+Re<=ve)break;if(ve+Re>Ie.minX&&he-Re<Ie.maxY&&he+Re>Ie.minY){var be=_(ve,he,Ie.x1,Ie.y1,Ie.x2,Ie.y2);be<Ce&&(Ce=be,Re=Math.sqrt(Ce))}}return me(ve,he)&&(Re=-Re),Re}function me(ve,he){for(var Ce=0,Re=pe.length;Re--;){var Le=pe[Re];if(Le.maxX<=ve)break;var Ie=Le.y1>he!=Le.y2>he&&ve<(Le.x2-Le.x1)*(he-Le.y1)/(Le.y2-Le.y1)+Le.x1;Ie&&(Ce+=Le.y1<Le.y2?1:-1)}return Ce!==0}}function x(J,ee,V,Y,Q,re,ne,le,fe,pe){re===void 0&&(re=1),le===void 0&&(le=0),fe===void 0&&(fe=0),pe===void 0&&(pe=0),S(J,ee,V,Y,Q,re,ne,null,le,fe,pe)}function S(J,ee,V,Y,Q,re,ne,le,fe,pe,Ee){re===void 0&&(re=1),fe===void 0&&(fe=0),pe===void 0&&(pe=0),Ee===void 0&&(Ee=0);for(var Te=b(J,ee,V,Y,Q,re),xe=new Uint8Array(Te.length*4),ge=0;ge<Te.length;ge++)xe[ge*4+Ee]=Te[ge];p(ne,xe,fe,pe,J,ee,1<<3-Ee,le)}function _(J,ee,V,Y,Q,re){var ne=Q-V,le=re-Y,fe=ne*ne+le*le,pe=fe?Math.max(0,Math.min(1,((J-V)*ne+(ee-Y)*le)/fe)):0,Ee=J-(V+pe*ne),Te=ee-(Y+pe*le);return Ee*Ee+Te*Te}var T=Object.freeze({__proto__:null,generate:b,generateIntoCanvas:x,generateIntoFramebuffer:S}),A="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",M="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",C="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",R=new Float32Array([0,0,2,0,0,2]),L=null,I=!1,P={},U=new WeakMap;function B(J){if(!I&&!X(J))throw new Error("WebGL generation not supported")}function F(J,ee,V,Y,Q,re,ne){if(re===void 0&&(re=1),ne===void 0&&(ne=null),!ne&&(ne=L,!ne)){var le=typeof OffscreenCanvas=="function"?new OffscreenCanvas(1,1):typeof document<"u"?document.createElement("canvas"):null;if(!le)throw new Error("OffscreenCanvas or DOM canvas not supported");ne=L=le.getContext("webgl",{depth:!1})}B(ne);var fe=new Uint8Array(J*ee*4);h(ne,function(xe){var ge=xe.gl,oe=xe.withTexture,me=xe.withTextureFramebuffer;oe("readable",function(ve,he){ge.texImage2D(ge.TEXTURE_2D,0,ge.RGBA,J,ee,0,ge.RGBA,ge.UNSIGNED_BYTE,null),me(ve,he,function(Ce){W(J,ee,V,Y,Q,re,ge,Ce,0,0,0),ge.readPixels(0,0,J,ee,ge.RGBA,ge.UNSIGNED_BYTE,fe)})})});for(var pe=new Uint8Array(J*ee),Ee=0,Te=0;Ee<fe.length;Ee+=4)pe[Te++]=fe[Ee];return pe}function z(J,ee,V,Y,Q,re,ne,le,fe,pe){re===void 0&&(re=1),le===void 0&&(le=0),fe===void 0&&(fe=0),pe===void 0&&(pe=0),W(J,ee,V,Y,Q,re,ne,null,le,fe,pe)}function W(J,ee,V,Y,Q,re,ne,le,fe,pe,Ee){re===void 0&&(re=1),fe===void 0&&(fe=0),pe===void 0&&(pe=0),Ee===void 0&&(Ee=0),B(ne);var Te=[];s(V,function(xe,ge,oe,me){Te.push(xe,ge,oe,me)}),Te=new Float32Array(Te),h(ne,function(xe){var ge=xe.gl,oe=xe.isWebGL2,me=xe.getExtension,ve=xe.withProgram,he=xe.withTexture,Ce=xe.withTextureFramebuffer,Re=xe.handleContextLoss;if(he("rawDistances",function(Le,Ie){(J!==Le._lastWidth||ee!==Le._lastHeight)&&ge.texImage2D(ge.TEXTURE_2D,0,ge.RGBA,Le._lastWidth=J,Le._lastHeight=ee,0,ge.RGBA,ge.UNSIGNED_BYTE,null),ve("main",A,M,function(be){var Je=be.setAttribute,te=be.setUniform,Z=!oe&&me("ANGLE_instanced_arrays"),de=!oe&&me("EXT_blend_minmax");Je("aUV",2,ge.STATIC_DRAW,0,R),Je("aLineSegment",4,ge.DYNAMIC_DRAW,1,Te),te.apply(void 0,["4f","uGlyphBounds"].concat(Y)),te("1f","uMaxDistance",Q),te("1f","uExponent",re),Ce(Le,Ie,function(Ne){ge.enable(ge.BLEND),ge.colorMask(!0,!0,!0,!0),ge.viewport(0,0,J,ee),ge.scissor(0,0,J,ee),ge.blendFunc(ge.ONE,ge.ONE),ge.blendEquationSeparate(ge.FUNC_ADD,oe?ge.MAX:de.MAX_EXT),ge.clear(ge.COLOR_BUFFER_BIT),oe?ge.drawArraysInstanced(ge.TRIANGLES,0,3,Te.length/4):Z.drawArraysInstancedANGLE(ge.TRIANGLES,0,3,Te.length/4)})}),ve("post",o,C,function(be){be.setAttribute("aUV",2,ge.STATIC_DRAW,0,R),be.setUniform("1i","tex",Ie),ge.bindFramebuffer(ge.FRAMEBUFFER,le),ge.disable(ge.BLEND),ge.colorMask(Ee===0,Ee===1,Ee===2,Ee===3),ge.viewport(fe,pe,J,ee),ge.scissor(fe,pe,J,ee),ge.drawArrays(ge.TRIANGLES,0,3)})}),ge.isContextLost())throw Re(),new Error("webgl context lost")})}function X(J){var ee=!J||J===L?P:J.canvas||J,V=U.get(ee);if(V===void 0){I=!0;var Y=null;try{var Q=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],re=F(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,J);V=re&&Q.length===re.length&&re.every(function(ne,le){return ne===Q[le]}),V||(Y="bad trial run results",console.info(Q,re))}catch(ne){V=!1,Y=ne.message}Y&&console.warn("WebGL SDF generation not supported:",Y),I=!1,U.set(ee,V)}return V}var j=Object.freeze({__proto__:null,generate:F,generateIntoCanvas:z,generateIntoFramebuffer:W,isSupported:X});function G(J,ee,V,Y,Q,re){Q===void 0&&(Q=Math.max(Y[2]-Y[0],Y[3]-Y[1])/2),re===void 0&&(re=1);try{return F.apply(j,arguments)}catch(ne){return console.info("WebGL SDF generation failed, falling back to JS",ne),b.apply(T,arguments)}}function K(J,ee,V,Y,Q,re,ne,le,fe,pe){Q===void 0&&(Q=Math.max(Y[2]-Y[0],Y[3]-Y[1])/2),re===void 0&&(re=1),le===void 0&&(le=0),fe===void 0&&(fe=0),pe===void 0&&(pe=0);try{return z.apply(j,arguments)}catch(Ee){return console.info("WebGL SDF generation failed, falling back to JS",Ee),x.apply(T,arguments)}}return e.forEachPathCommand=r,e.generate=G,e.generateIntoCanvas=K,e.javascript=T,e.pathToLineSegments=s,e.webgl=j,e.webglUtils=y,Object.defineProperty(e,"__esModule",{value:!0}),e})({});return n}function Pme(){var n=(function(e){var t={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},i={},r={};i.L=1,r[1]="L",Object.keys(t).forEach(function(Re,Le){i[Re]=1<<Le+1,r[i[Re]]=Re}),Object.freeze(i);var s=i.LRI|i.RLI|i.FSI,o=i.L|i.R|i.AL,a=i.B|i.S|i.WS|i.ON|i.FSI|i.LRI|i.RLI|i.PDI,l=i.BN|i.RLE|i.LRE|i.RLO|i.LRO|i.PDF,u=i.S|i.WS|i.B|s|i.PDI|l,h=null;function p(){if(!h){h=new Map;var Re=function(Ie){if(t.hasOwnProperty(Ie)){var be=0;t[Ie].split(",").forEach(function(Je){var te=Je.split("+"),Z=te[0],de=te[1];Z=parseInt(Z,36),de=de?parseInt(de,36):0,h.set(be+=Z,i[Ie]);for(var Ne=0;Ne<de;Ne++)h.set(++be,i[Ie])})}};for(var Le in t)Re(Le)}}function m(Re){return p(),h.get(Re.codePointAt(0))||i.L}function y(Re){return r[m(Re)]}var b={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function x(Re,Le){var Ie=36,be=0,Je=new Map,te=Le&&new Map,Z;return Re.split(",").forEach(function de(Ne){if(Ne.indexOf("+")!==-1)for(var Oe=+Ne;Oe--;)de(Z);else{Z=Ne;var Ae=Ne.split(">"),et=Ae[0],Ze=Ae[1];et=String.fromCodePoint(be+=parseInt(et,Ie)),Ze=String.fromCodePoint(be+=parseInt(Ze,Ie)),Je.set(et,Ze),Le&&te.set(Ze,et)}}),{map:Je,reverseMap:te}}var S,_,T;function A(){if(!S){var Re=x(b.pairs,!0),Le=Re.map,Ie=Re.reverseMap;S=Le,_=Ie,T=x(b.canonical,!1).map}}function M(Re){return A(),S.get(Re)||null}function C(Re){return A(),_.get(Re)||null}function R(Re){return A(),T.get(Re)||null}var L=i.L,I=i.R,P=i.EN,U=i.ES,B=i.ET,F=i.AN,z=i.CS,W=i.B,X=i.S,j=i.ON,G=i.BN,K=i.NSM,J=i.AL,ee=i.LRO,V=i.RLO,Y=i.LRE,Q=i.RLE,re=i.PDF,ne=i.LRI,le=i.RLI,fe=i.FSI,pe=i.PDI;function Ee(Re,Le){for(var Ie=125,be=new Uint32Array(Re.length),Je=0;Je<Re.length;Je++)be[Je]=m(Re[Je]);var te=new Map;function Z(jr,ao){var as=be[jr];be[jr]=ao,te.set(as,te.get(as)-1),as&a&&te.set(a,te.get(a)-1),te.set(ao,(te.get(ao)||0)+1),ao&a&&te.set(a,(te.get(a)||0)+1)}for(var de=new Uint8Array(Re.length),Ne=new Map,Oe=[],Ae=null,et=0;et<Re.length;et++)Ae||Oe.push(Ae={start:et,end:Re.length-1,level:Le==="rtl"?1:Le==="ltr"?0:Yf(et,!1)}),be[et]&W&&(Ae.end=et,Ae=null);for(var Ze=Q|Y|V|ee|s|pe|re|W,ft=function(jr){return jr+(jr&1?1:2)},dt=function(jr){return jr+(jr&1?2:1)},Xe=0;Xe<Oe.length;Xe++){Ae=Oe[Xe];var Ke=[{_level:Ae.level,_override:0,_isolate:0}],nt=void 0,ct=0,ut=0,Vt=0;te.clear();for(var Se=Ae.start;Se<=Ae.end;Se++){var qe=be[Se];if(nt=Ke[Ke.length-1],te.set(qe,(te.get(qe)||0)+1),qe&a&&te.set(a,(te.get(a)||0)+1),qe&Ze)if(qe&(Q|Y)){de[Se]=nt._level;var st=(qe===Q?dt:ft)(nt._level);st<=Ie&&!ct&&!ut?Ke.push({_level:st,_override:0,_isolate:0}):ct||ut++}else if(qe&(V|ee)){de[Se]=nt._level;var St=(qe===V?dt:ft)(nt._level);St<=Ie&&!ct&&!ut?Ke.push({_level:St,_override:qe&V?I:L,_isolate:0}):ct||ut++}else if(qe&s){qe&fe&&(qe=Yf(Se+1,!0)===1?le:ne),de[Se]=nt._level,nt._override&&Z(Se,nt._override);var Qe=(qe===le?dt:ft)(nt._level);Qe<=Ie&&ct===0&&ut===0?(Vt++,Ke.push({_level:Qe,_override:0,_isolate:1,_isolInitIndex:Se})):ct++}else if(qe&pe){if(ct>0)ct--;else if(Vt>0){for(ut=0;!Ke[Ke.length-1]._isolate;)Ke.pop();var Fe=Ke[Ke.length-1]._isolInitIndex;Fe!=null&&(Ne.set(Fe,Se),Ne.set(Se,Fe)),Ke.pop(),Vt--}nt=Ke[Ke.length-1],de[Se]=nt._level,nt._override&&Z(Se,nt._override)}else qe&re?(ct===0&&(ut>0?ut--:!nt._isolate&&Ke.length>1&&(Ke.pop(),nt=Ke[Ke.length-1])),de[Se]=nt._level):qe&W&&(de[Se]=Ae.level);else de[Se]=nt._level,nt._override&&qe!==G&&Z(Se,nt._override)}for(var gt=[],Ct=null,Tt=Ae.start;Tt<=Ae.end;Tt++){var Ft=be[Tt];if(!(Ft&l)){var Xn=de[Tt],qn=Ft&s,ii=Ft===pe;Ct&&Xn===Ct._level?(Ct._end=Tt,Ct._endsWithIsolInit=qn):gt.push(Ct={_start:Tt,_end:Tt,_level:Xn,_startsWithPDI:ii,_endsWithIsolInit:qn})}}for(var wi=[],rs=0;rs<gt.length;rs++){var _r=gt[rs];if(!_r._startsWithPDI||_r._startsWithPDI&&!Ne.has(_r._start)){for(var Ar=[Ct=_r],Gr=void 0;Ct&&Ct._endsWithIsolInit&&(Gr=Ne.get(Ct._end))!=null;)for(var $i=rs+1;$i<gt.length;$i++)if(gt[$i]._start===Gr){Ar.push(Ct=gt[$i]);break}for(var Jn=[],$n=0;$n<Ar.length;$n++)for(var Hi=Ar[$n],Ps=Hi._start;Ps<=Hi._end;Ps++)Jn.push(Ps);for(var Is=de[Jn[0]],no=Ae.level,Po=Jn[0]-1;Po>=0;Po--)if(!(be[Po]&l)){no=de[Po];break}var Da=Jn[Jn.length-1],io=de[Da],ce=Ae.level;if(!(be[Da]&s)){for(var De=Da+1;De<=Ae.end;De++)if(!(be[De]&l)){ce=de[De];break}}wi.push({_seqIndices:Jn,_sosType:Math.max(no,Is)%2?I:L,_eosType:Math.max(ce,io)%2?I:L})}}for(var Ve=0;Ve<wi.length;Ve++){var He=wi[Ve],ye=He._seqIndices,it=He._sosType,bt=He._eosType,At=de[ye[0]]&1?I:L;if(te.get(K))for(var wt=0;wt<ye.length;wt++){var Lt=ye[wt];if(be[Lt]&K){for(var Pt=it,Nt=wt-1;Nt>=0;Nt--)if(!(be[ye[Nt]]&l)){Pt=be[ye[Nt]];break}Z(Lt,Pt&(s|pe)?j:Pt)}}if(te.get(P))for(var It=0;It<ye.length;It++){var Pn=ye[It];if(be[Pn]&P)for(var Un=It-1;Un>=-1;Un--){var kn=Un===-1?it:be[ye[Un]];if(kn&o){kn===J&&Z(Pn,F);break}}}if(te.get(J))for(var rn=0;rn<ye.length;rn++){var Ot=ye[rn];be[Ot]&J&&Z(Ot,I)}if(te.get(U)||te.get(z))for(var zn=1;zn<ye.length-1;zn++){var mn=ye[zn];if(be[mn]&(U|z)){for(var gi=0,hi=0,sn=zn-1;sn>=0&&(gi=be[ye[sn]],!!(gi&l));sn--);for(var Ns=zn+1;Ns<ye.length&&(hi=be[ye[Ns]],!!(hi&l));Ns++);gi===hi&&(be[mn]===U?gi===P:gi&(P|F))&&Z(mn,gi)}}if(te.get(P))for(var Xt=0;Xt<ye.length;Xt++){var Zi=ye[Xt];if(be[Zi]&P){for(var ji=Xt-1;ji>=0&&be[ye[ji]]&(B|l);ji--)Z(ye[ji],P);for(Xt++;Xt<ye.length&&be[ye[Xt]]&(B|l|P);Xt++)be[ye[Xt]]!==P&&Z(ye[Xt],P)}}if(te.get(B)||te.get(U)||te.get(z))for(var Gn=0;Gn<ye.length;Gn++){var di=ye[Gn];if(be[di]&(B|U|z)){Z(di,j);for(var ro=Gn-1;ro>=0&&be[ye[ro]]&l;ro--)Z(ye[ro],j);for(var Hr=Gn+1;Hr<ye.length&&be[ye[Hr]]&l;Hr++)Z(ye[Hr],j)}}if(te.get(P))for(var ha=0,bd=it;ha<ye.length;ha++){var qf=ye[ha],_u=be[qf];_u&P?bd===L&&Z(qf,L):_u&o&&(bd=_u)}if(te.get(a)){var Oa=I|P|F,_d=Oa|L,dc=[];{for(var Io=[],ss=0;ss<ye.length;ss++)if(be[ye[ss]]&a){var La=Re[ye[ss]],xu=void 0;if(M(La)!==null)if(Io.length<63)Io.push({char:La,seqIndex:ss});else break;else if((xu=C(La))!==null)for(var so=Io.length-1;so>=0;so--){var No=Io[so].char;if(No===xu||No===C(R(La))||M(R(No))===La){dc.push([Io[so].seqIndex,ss]),Io.length=so;break}}}dc.sort(function(jr,ao){return jr[0]-ao[0]})}for(var Su=0;Su<dc.length;Su++){for(var wu=dc[Su],pc=wu[0],Pa=wu[1],oo=!1,gs=0,Ia=pc+1;Ia<Pa;Ia++){var os=ye[Ia];if(be[os]&_d){oo=!0;var Eu=be[os]&Oa?I:L;if(Eu===At){gs=Eu;break}}}if(oo&&!gs){gs=it;for(var da=pc-1;da>=0;da--){var mc=ye[da];if(be[mc]&_d){var gc=be[mc]&Oa?I:L;gc!==At?gs=gc:gs=At;break}}}if(gs){if(be[ye[pc]]=be[ye[Pa]]=gs,gs!==At){for(var Uo=pc+1;Uo<ye.length;Uo++)if(!(be[ye[Uo]]&l)){m(Re[ye[Uo]])&K&&(be[ye[Uo]]=gs);break}}if(gs!==At){for(var vc=Pa+1;vc<ye.length;vc++)if(!(be[ye[vc]]&l)){m(Re[ye[vc]])&K&&(be[ye[vc]]=gs);break}}}}for(var Ai=0;Ai<ye.length;Ai++)if(be[ye[Ai]]&a){for(var pa=Ai,Ml=Ai,Na=it,yc=Ai-1;yc>=0;yc--)if(be[ye[yc]]&l)pa=yc;else{Na=be[ye[yc]]&Oa?I:L;break}for(var bc=bt,Ua=Ai+1;Ua<ye.length;Ua++)if(be[ye[Ua]]&(a|l))Ml=Ua;else{bc=be[ye[Ua]]&Oa?I:L;break}for(var ka=pa;ka<=Ml;ka++)be[ye[ka]]=Na===bc?Na:At;Ai=Ml}}}for(var fr=Ae.start;fr<=Ae.end;fr++){var xd=de[fr],Tu=be[fr];if(xd&1?Tu&(L|P|F)&&de[fr]++:Tu&I?de[fr]++:Tu&(F|P)&&(de[fr]+=2),Tu&l&&(de[fr]=fr===0?Ae.level:de[fr-1]),fr===Ae.end||m(Re[fr])&(X|W))for(var Mu=fr;Mu>=0&&m(Re[Mu])&u;Mu--)de[Mu]=Ae.level}}return{levels:de,paragraphs:Oe};function Yf(jr,ao){for(var as=jr;as<Re.length;as++){var ma=be[as];if(ma&(I|J))return 1;if(ma&(W|L)||ao&&ma===pe)return 0;if(ma&s){var _c=$f(as);as=_c===-1?Re.length:_c}}return 0}function $f(jr){for(var ao=1,as=jr+1;as<Re.length;as++){var ma=be[as];if(ma&W)break;if(ma&pe){if(--ao===0)return as}else ma&s&&ao++}return-1}}var Te="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",xe;function ge(){if(!xe){var Re=x(Te,!0),Le=Re.map,Ie=Re.reverseMap;Ie.forEach(function(be,Je){Le.set(Je,be)}),xe=Le}}function oe(Re){return ge(),xe.get(Re)||null}function me(Re,Le,Ie,be){var Je=Re.length;Ie=Math.max(0,Ie==null?0:+Ie),be=Math.min(Je-1,be==null?Je-1:+be);for(var te=new Map,Z=Ie;Z<=be;Z++)if(Le[Z]&1){var de=oe(Re[Z]);de!==null&&te.set(Z,de)}return te}function ve(Re,Le,Ie,be){var Je=Re.length;Ie=Math.max(0,Ie==null?0:+Ie),be=Math.min(Je-1,be==null?Je-1:+be);var te=[];return Le.paragraphs.forEach(function(Z){var de=Math.max(Ie,Z.start),Ne=Math.min(be,Z.end);if(de<Ne){for(var Oe=Le.levels.slice(de,Ne+1),Ae=Ne;Ae>=de&&m(Re[Ae])&u;Ae--)Oe[Ae]=Z.level;for(var et=Z.level,Ze=1/0,ft=0;ft<Oe.length;ft++){var dt=Oe[ft];dt>et&&(et=dt),dt<Ze&&(Ze=dt|1)}for(var Xe=et;Xe>=Ze;Xe--)for(var Ke=0;Ke<Oe.length;Ke++)if(Oe[Ke]>=Xe){for(var nt=Ke;Ke+1<Oe.length&&Oe[Ke+1]>=Xe;)Ke++;Ke>nt&&te.push([nt+de,Ke+de])}}}),te}function he(Re,Le,Ie,be){var Je=Ce(Re,Le,Ie,be),te=[].concat(Re);return Je.forEach(function(Z,de){te[de]=(Le.levels[Z]&1?oe(Re[Z]):null)||Re[Z]}),te.join("")}function Ce(Re,Le,Ie,be){for(var Je=ve(Re,Le,Ie,be),te=[],Z=0;Z<Re.length;Z++)te[Z]=Z;return Je.forEach(function(de){for(var Ne=de[0],Oe=de[1],Ae=te.slice(Ne,Oe+1),et=Ae.length;et--;)te[Oe-et]=Ae[et]}),te}return e.closingToOpeningBracket=C,e.getBidiCharType=m,e.getBidiCharTypeName=y,e.getCanonicalBracket=R,e.getEmbeddingLevels=Ee,e.getMirroredCharacter=oe,e.getMirroredCharactersMap=me,e.getReorderSegments=ve,e.getReorderedIndices=Ce,e.getReorderedString=he,e.openingToClosingBracket=M,Object.defineProperty(e,"__esModule",{value:!0}),e})({});return n}const _G=/\bvoid\s+main\s*\(\s*\)\s*{/g;function eD(n){const e=/^[ \t]*#include +<([\w\d./]+)>/gm;function t(i,r){let s=bn[r];return s?eD(s):i}return n.replace(e,t)}const Ms=[];for(let n=0;n<256;n++)Ms[n]=(n<16?"0":"")+n.toString(16);function Ime(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Ms[n&255]+Ms[n>>8&255]+Ms[n>>16&255]+Ms[n>>24&255]+"-"+Ms[e&255]+Ms[e>>8&255]+"-"+Ms[e>>16&15|64]+Ms[e>>24&255]+"-"+Ms[t&63|128]+Ms[t>>8&255]+"-"+Ms[t>>16&255]+Ms[t>>24&255]+Ms[i&255]+Ms[i>>8&255]+Ms[i>>16&255]+Ms[i>>24&255]).toUpperCase()}const bp=Object.assign||function(){let n=arguments[0];for(let e=1,t=arguments.length;e<t;e++){let i=arguments[e];if(i)for(let r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])}return n},Nme=Date.now(),Oz=new WeakMap,Lz=new Map;let Ume=1e10;function tD(n,e){const t=Bme(e);let i=Oz.get(n);if(i||Oz.set(n,i=Object.create(null)),i[t])return new i[t];const r=`_onBeforeCompile${t}`,s=function(u,h){n.onBeforeCompile.call(this,u,h);const p=this.customProgramCacheKey()+"|"+u.vertexShader+"|"+u.fragmentShader;let m=Lz[p];if(!m){const y=kme(this,u,e,t);m=Lz[p]=y}u.vertexShader=m.vertexShader,u.fragmentShader=m.fragmentShader,bp(u.uniforms,this.uniforms),e.timeUniform&&(u.uniforms[e.timeUniform]={get value(){return Date.now()-Nme}}),this[r]&&this[r](u)},o=function(){return a(e.chained?n:n.clone())},a=function(u){const h=Object.create(u,l);return Object.defineProperty(h,"baseMaterial",{value:n}),Object.defineProperty(h,"id",{value:Ume++}),h.uuid=Ime(),h.uniforms=bp({},u.uniforms,e.uniforms),h.defines=bp({},u.defines,e.defines),h.defines[`TROIKA_DERIVED_MATERIAL_${t}`]="",h.extensions=bp({},u.extensions,e.extensions),h._listeners=void 0,h},l={constructor:{value:o},isDerivedMaterial:{value:!0},type:{get:()=>n.type,set:u=>{n.type=u}},isDerivedFrom:{writable:!0,configurable:!0,value:function(u){const h=this.baseMaterial;return u===h||h.isDerivedMaterial&&h.isDerivedFrom(u)||!1}},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return n.customProgramCacheKey()+"|"+t}},onBeforeCompile:{get(){return s},set(u){this[r]=u}},copy:{writable:!0,configurable:!0,value:function(u){return n.copy.call(this,u),!n.isShaderMaterial&&!n.isDerivedMaterial&&(bp(this.extensions,u.extensions),bp(this.defines,u.defines),bp(this.uniforms,wO.clone(u.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const u=new n.constructor;return a(u).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let u=this._depthMaterial;return u||(u=this._depthMaterial=tD(n.isDerivedMaterial?n.getDepthMaterial():new zT({depthPacking:vO}),e),u.defines.IS_DEPTH_MATERIAL="",u.uniforms=this.uniforms),u}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let u=this._distanceMaterial;return u||(u=this._distanceMaterial=tD(n.isDerivedMaterial?n.getDistanceMaterial():new FT,e),u.defines.IS_DISTANCE_MATERIAL="",u.uniforms=this.uniforms),u}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:u,_distanceMaterial:h}=this;u&&u.dispose(),h&&h.dispose(),n.dispose.call(this)}}};return i[t]=o,new o}function kme(n,{vertexShader:e,fragmentShader:t},i,r){let{vertexDefs:s,vertexMainIntro:o,vertexMainOutro:a,vertexTransform:l,fragmentDefs:u,fragmentMainIntro:h,fragmentMainOutro:p,fragmentColorTransform:m,customRewriter:y,timeUniform:b}=i;if(s=s||"",o=o||"",a=a||"",u=u||"",h=h||"",p=p||"",(l||y)&&(e=eD(e)),(m||y)&&(t=t.replace(/^[ \t]*#include <((?:tonemapping|encodings|colorspace|fog|premultiplied_alpha|dithering)_fragment)>/gm,`
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`),t=eD(t)),y){let x=y({vertexShader:e,fragmentShader:t});e=x.vertexShader,t=x.fragmentShader}if(m){let x=[];t=t.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,S=>(x.push(S),"")),p=`${m}
${x.join(`
`)}
${p}`}if(b){const x=`
uniform float ${b};
`;s=x+s,u=x+u}return l&&(e=`vec3 troika_position_${r};
vec3 troika_normal_${r};
vec2 troika_uv_${r};
${e}
`,s=`${s}
void troikaVertexTransform${r}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${l}
}
`,o=`
troika_position_${r} = vec3(position);
troika_normal_${r} = vec3(normal);
troika_uv_${r} = vec2(uv);
troikaVertexTransform${r}(troika_position_${r}, troika_normal_${r}, troika_uv_${r});
${o}
`,e=e.replace(/\b(position|normal|uv)\b/g,(x,S,_,T)=>/\battribute\s+vec[23]\s+$/.test(T.substr(0,_))?S:`troika_${S}_${r}`),n.map&&n.map.channel>0||(e=e.replace(/\bMAP_UV\b/g,`troika_uv_${r}`))),e=Pz(e,r,s,o,a),t=Pz(t,r,u,h,p),{vertexShader:e,fragmentShader:t}}function Pz(n,e,t,i,r){return(i||r||t)&&(n=n.replace(_G,`
${t}
void troikaOrigMain${e}() {`),n+=`
void main() {
  ${i}
  troikaOrigMain${e}();
  ${r}
}`),n}function zme(n,e){return n==="uniforms"?void 0:typeof e=="function"?e.toString():e}let Fme=0;const Iz=new Map;function Bme(n){const e=JSON.stringify(n,zme);let t=Iz.get(e);return t==null&&Iz.set(e,t=++Fme),t}function Vme(){return typeof window>"u"&&(self.window=self),(function(n){var e={parse:function(r){var s=e._bin,o=new Uint8Array(r);if(s.readASCII(o,0,4)=="ttcf"){var a=4;s.readUshort(o,a),a+=2,s.readUshort(o,a),a+=2;var l=s.readUint(o,a);a+=4;for(var u=[],h=0;h<l;h++){var p=s.readUint(o,a);a+=4,u.push(e._readFont(o,p))}return u}return[e._readFont(o,0)]},_readFont:function(r,s){var o=e._bin,a=s;o.readFixed(r,s),s+=4;var l=o.readUshort(r,s);s+=2,o.readUshort(r,s),s+=2,o.readUshort(r,s),s+=2,o.readUshort(r,s),s+=2;for(var u=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GDEF","GPOS","GSUB","SVG "],h={_data:r,_offset:a},p={},m=0;m<l;m++){var y=o.readASCII(r,s,4);s+=4,o.readUint(r,s),s+=4;var b=o.readUint(r,s);s+=4;var x=o.readUint(r,s);s+=4,p[y]={offset:b,length:x}}for(m=0;m<u.length;m++){var S=u[m];p[S]&&(h[S.trim()]=e[S.trim()].parse(r,p[S].offset,p[S].length,h))}return h},_tabOffset:function(r,s,o){for(var a=e._bin,l=a.readUshort(r,o+4),u=o+12,h=0;h<l;h++){var p=a.readASCII(r,u,4);u+=4,a.readUint(r,u),u+=4;var m=a.readUint(r,u);if(u+=4,a.readUint(r,u),u+=4,p==s)return m}return 0}};e._bin={readFixed:function(r,s){return(r[s]<<8|r[s+1])+(r[s+2]<<8|r[s+3])/65540},readF2dot14:function(r,s){return e._bin.readShort(r,s)/16384},readInt:function(r,s){return e._bin._view(r).getInt32(s)},readInt8:function(r,s){return e._bin._view(r).getInt8(s)},readShort:function(r,s){return e._bin._view(r).getInt16(s)},readUshort:function(r,s){return e._bin._view(r).getUint16(s)},readUshorts:function(r,s,o){for(var a=[],l=0;l<o;l++)a.push(e._bin.readUshort(r,s+2*l));return a},readUint:function(r,s){return e._bin._view(r).getUint32(s)},readUint64:function(r,s){return 4294967296*e._bin.readUint(r,s)+e._bin.readUint(r,s+4)},readASCII:function(r,s,o){for(var a="",l=0;l<o;l++)a+=String.fromCharCode(r[s+l]);return a},readUnicode:function(r,s,o){for(var a="",l=0;l<o;l++){var u=r[s++]<<8|r[s++];a+=String.fromCharCode(u)}return a},_tdec:typeof window<"u"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(r,s,o){var a=e._bin._tdec;return a&&s==0&&o==r.length?a.decode(r):e._bin.readASCII(r,s,o)},readBytes:function(r,s,o){for(var a=[],l=0;l<o;l++)a.push(r[s+l]);return a},readASCIIArray:function(r,s,o){for(var a=[],l=0;l<o;l++)a.push(String.fromCharCode(r[s+l]));return a},_view:function(r){return r._dataView||(r._dataView=r.buffer?new DataView(r.buffer,r.byteOffset,r.byteLength):new DataView(new Uint8Array(r).buffer))}},e._lctf={},e._lctf.parse=function(r,s,o,a,l){var u=e._bin,h={},p=s;u.readFixed(r,s),s+=4;var m=u.readUshort(r,s);s+=2;var y=u.readUshort(r,s);s+=2;var b=u.readUshort(r,s);return s+=2,h.scriptList=e._lctf.readScriptList(r,p+m),h.featureList=e._lctf.readFeatureList(r,p+y),h.lookupList=e._lctf.readLookupList(r,p+b,l),h},e._lctf.readLookupList=function(r,s,o){var a=e._bin,l=s,u=[],h=a.readUshort(r,s);s+=2;for(var p=0;p<h;p++){var m=a.readUshort(r,s);s+=2;var y=e._lctf.readLookupTable(r,l+m,o);u.push(y)}return u},e._lctf.readLookupTable=function(r,s,o){var a=e._bin,l=s,u={tabs:[]};u.ltype=a.readUshort(r,s),s+=2,u.flag=a.readUshort(r,s),s+=2;var h=a.readUshort(r,s);s+=2;for(var p=u.ltype,m=0;m<h;m++){var y=a.readUshort(r,s);s+=2;var b=o(r,p,l+y,u);u.tabs.push(b)}return u},e._lctf.numOfOnes=function(r){for(var s=0,o=0;o<32;o++)(r>>>o&1)!=0&&s++;return s},e._lctf.readClassDef=function(r,s){var o=e._bin,a=[],l=o.readUshort(r,s);if(s+=2,l==1){var u=o.readUshort(r,s);s+=2;var h=o.readUshort(r,s);s+=2;for(var p=0;p<h;p++)a.push(u+p),a.push(u+p),a.push(o.readUshort(r,s)),s+=2}if(l==2){var m=o.readUshort(r,s);for(s+=2,p=0;p<m;p++)a.push(o.readUshort(r,s)),s+=2,a.push(o.readUshort(r,s)),s+=2,a.push(o.readUshort(r,s)),s+=2}return a},e._lctf.getInterval=function(r,s){for(var o=0;o<r.length;o+=3){var a=r[o],l=r[o+1];if(r[o+2],a<=s&&s<=l)return o}return-1},e._lctf.readCoverage=function(r,s){var o=e._bin,a={};a.fmt=o.readUshort(r,s),s+=2;var l=o.readUshort(r,s);return s+=2,a.fmt==1&&(a.tab=o.readUshorts(r,s,l)),a.fmt==2&&(a.tab=o.readUshorts(r,s,3*l)),a},e._lctf.coverageIndex=function(r,s){var o=r.tab;if(r.fmt==1)return o.indexOf(s);if(r.fmt==2){var a=e._lctf.getInterval(o,s);if(a!=-1)return o[a+2]+(s-o[a])}return-1},e._lctf.readFeatureList=function(r,s){var o=e._bin,a=s,l=[],u=o.readUshort(r,s);s+=2;for(var h=0;h<u;h++){var p=o.readASCII(r,s,4);s+=4;var m=o.readUshort(r,s);s+=2;var y=e._lctf.readFeatureTable(r,a+m);y.tag=p.trim(),l.push(y)}return l},e._lctf.readFeatureTable=function(r,s){var o=e._bin,a=s,l={},u=o.readUshort(r,s);s+=2,u>0&&(l.featureParams=a+u);var h=o.readUshort(r,s);s+=2,l.tab=[];for(var p=0;p<h;p++)l.tab.push(o.readUshort(r,s+2*p));return l},e._lctf.readScriptList=function(r,s){var o=e._bin,a=s,l={},u=o.readUshort(r,s);s+=2;for(var h=0;h<u;h++){var p=o.readASCII(r,s,4);s+=4;var m=o.readUshort(r,s);s+=2,l[p.trim()]=e._lctf.readScriptTable(r,a+m)}return l},e._lctf.readScriptTable=function(r,s){var o=e._bin,a=s,l={},u=o.readUshort(r,s);s+=2,u>0&&(l.default=e._lctf.readLangSysTable(r,a+u));var h=o.readUshort(r,s);s+=2;for(var p=0;p<h;p++){var m=o.readASCII(r,s,4);s+=4;var y=o.readUshort(r,s);s+=2,l[m.trim()]=e._lctf.readLangSysTable(r,a+y)}return l},e._lctf.readLangSysTable=function(r,s){var o=e._bin,a={};o.readUshort(r,s),s+=2,a.reqFeature=o.readUshort(r,s),s+=2;var l=o.readUshort(r,s);return s+=2,a.features=o.readUshorts(r,s,l),a},e.CFF={},e.CFF.parse=function(r,s,o){var a=e._bin;(r=new Uint8Array(r.buffer,s,o))[s=0],r[++s],r[++s],r[++s],s++;var l=[];s=e.CFF.readIndex(r,s,l);for(var u=[],h=0;h<l.length-1;h++)u.push(a.readASCII(r,s+l[h],l[h+1]-l[h]));s+=l[l.length-1];var p=[];s=e.CFF.readIndex(r,s,p);var m=[];for(h=0;h<p.length-1;h++)m.push(e.CFF.readDict(r,s+p[h],s+p[h+1]));s+=p[p.length-1];var y=m[0],b=[];s=e.CFF.readIndex(r,s,b);var x=[];for(h=0;h<b.length-1;h++)x.push(a.readASCII(r,s+b[h],b[h+1]-b[h]));if(s+=b[b.length-1],e.CFF.readSubrs(r,s,y),y.CharStrings){s=y.CharStrings,b=[],s=e.CFF.readIndex(r,s,b);var S=[];for(h=0;h<b.length-1;h++)S.push(a.readBytes(r,s+b[h],b[h+1]-b[h]));y.CharStrings=S}if(y.ROS){s=y.FDArray;var _=[];for(s=e.CFF.readIndex(r,s,_),y.FDArray=[],h=0;h<_.length-1;h++){var T=e.CFF.readDict(r,s+_[h],s+_[h+1]);e.CFF._readFDict(r,T,x),y.FDArray.push(T)}s+=_[_.length-1],s=y.FDSelect,y.FDSelect=[];var A=r[s];if(s++,A!=3)throw A;var M=a.readUshort(r,s);for(s+=2,h=0;h<M+1;h++)y.FDSelect.push(a.readUshort(r,s),r[s+2]),s+=3}return y.Encoding&&(y.Encoding=e.CFF.readEncoding(r,y.Encoding,y.CharStrings.length)),y.charset&&(y.charset=e.CFF.readCharset(r,y.charset,y.CharStrings.length)),e.CFF._readFDict(r,y,x),y},e.CFF._readFDict=function(r,s,o){var a;for(var l in s.Private&&(a=s.Private[1],s.Private=e.CFF.readDict(r,a,a+s.Private[0]),s.Private.Subrs&&e.CFF.readSubrs(r,a+s.Private.Subrs,s.Private)),s)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(l)!=-1&&(s[l]=o[s[l]-426+35])},e.CFF.readSubrs=function(r,s,o){var a=e._bin,l=[];s=e.CFF.readIndex(r,s,l);var u,h=l.length;u=h<1240?107:h<33900?1131:32768,o.Bias=u,o.Subrs=[];for(var p=0;p<l.length-1;p++)o.Subrs.push(a.readBytes(r,s+l[p],l[p+1]-l[p]))},e.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],e.CFF.glyphByUnicode=function(r,s){for(var o=0;o<r.charset.length;o++)if(r.charset[o]==s)return o;return-1},e.CFF.glyphBySE=function(r,s){return s<0||s>255?-1:e.CFF.glyphByUnicode(r,e.CFF.tableSE[s])},e.CFF.readEncoding=function(r,s,o){e._bin;var a=[".notdef"],l=r[s];if(s++,l!=0)throw"error: unknown encoding format: "+l;var u=r[s];s++;for(var h=0;h<u;h++)a.push(r[s+h]);return a},e.CFF.readCharset=function(r,s,o){var a=e._bin,l=[".notdef"],u=r[s];if(s++,u==0)for(var h=0;h<o;h++){var p=a.readUshort(r,s);s+=2,l.push(p)}else{if(u!=1&&u!=2)throw"error: format: "+u;for(;l.length<o;){p=a.readUshort(r,s),s+=2;var m=0;for(u==1?(m=r[s],s++):(m=a.readUshort(r,s),s+=2),h=0;h<=m;h++)l.push(p),p++}}return l},e.CFF.readIndex=function(r,s,o){var a=e._bin,l=a.readUshort(r,s)+1,u=r[s+=2];if(s++,u==1)for(var h=0;h<l;h++)o.push(r[s+h]);else if(u==2)for(h=0;h<l;h++)o.push(a.readUshort(r,s+2*h));else if(u==3)for(h=0;h<l;h++)o.push(16777215&a.readUint(r,s+3*h-1));else if(l!=1)throw"unsupported offset size: "+u+", count: "+l;return(s+=l*u)-1},e.CFF.getCharString=function(r,s,o){var a=e._bin,l=r[s],u=r[s+1];r[s+2],r[s+3],r[s+4];var h=1,p=null,m=null;l<=20&&(p=l,h=1),l==12&&(p=100*l+u,h=2),21<=l&&l<=27&&(p=l,h=1),l==28&&(m=a.readShort(r,s+1),h=3),29<=l&&l<=31&&(p=l,h=1),32<=l&&l<=246&&(m=l-139,h=1),247<=l&&l<=250&&(m=256*(l-247)+u+108,h=2),251<=l&&l<=254&&(m=256*-(l-251)-u-108,h=2),l==255&&(m=a.readInt(r,s+1)/65535,h=5),o.val=m??"o"+p,o.size=h},e.CFF.readCharString=function(r,s,o){for(var a=s+o,l=e._bin,u=[];s<a;){var h=r[s],p=r[s+1];r[s+2],r[s+3],r[s+4];var m=1,y=null,b=null;h<=20&&(y=h,m=1),h==12&&(y=100*h+p,m=2),h!=19&&h!=20||(y=h,m=2),21<=h&&h<=27&&(y=h,m=1),h==28&&(b=l.readShort(r,s+1),m=3),29<=h&&h<=31&&(y=h,m=1),32<=h&&h<=246&&(b=h-139,m=1),247<=h&&h<=250&&(b=256*(h-247)+p+108,m=2),251<=h&&h<=254&&(b=256*-(h-251)-p-108,m=2),h==255&&(b=l.readInt(r,s+1)/65535,m=5),u.push(b??"o"+y),s+=m}return u},e.CFF.readDict=function(r,s,o){for(var a=e._bin,l={},u=[];s<o;){var h=r[s],p=r[s+1];r[s+2],r[s+3],r[s+4];var m=1,y=null,b=null;if(h==28&&(b=a.readShort(r,s+1),m=3),h==29&&(b=a.readInt(r,s+1),m=5),32<=h&&h<=246&&(b=h-139,m=1),247<=h&&h<=250&&(b=256*(h-247)+p+108,m=2),251<=h&&h<=254&&(b=256*-(h-251)-p-108,m=2),h==255)throw b=a.readInt(r,s+1)/65535,m=5,"unknown number";if(h==30){var x=[];for(m=1;;){var S=r[s+m];m++;var _=S>>4,T=15&S;if(_!=15&&x.push(_),T!=15&&x.push(T),T==15)break}for(var A="",M=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],C=0;C<x.length;C++)A+=M[x[C]];b=parseFloat(A)}h<=21&&(y=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][h],m=1,h==12&&(y=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][p],m=2)),y!=null?(l[y]=u.length==1?u[0]:u,u=[]):u.push(b),s+=m}return l},e.cmap={},e.cmap.parse=function(r,s,o){r=new Uint8Array(r.buffer,s,o),s=0;var a=e._bin,l={};a.readUshort(r,s),s+=2;var u=a.readUshort(r,s);s+=2;var h=[];l.tables=[];for(var p=0;p<u;p++){var m=a.readUshort(r,s);s+=2;var y=a.readUshort(r,s);s+=2;var b=a.readUint(r,s);s+=4;var x="p"+m+"e"+y,S=h.indexOf(b);if(S==-1){var _;S=l.tables.length,h.push(b);var T=a.readUshort(r,b);T==0?_=e.cmap.parse0(r,b):T==4?_=e.cmap.parse4(r,b):T==6?_=e.cmap.parse6(r,b):T==12?_=e.cmap.parse12(r,b):console.debug("unknown format: "+T,m,y,b),l.tables.push(_)}if(l[x]!=null)throw"multiple tables for one platform+encoding";l[x]=S}return l},e.cmap.parse0=function(r,s){var o=e._bin,a={};a.format=o.readUshort(r,s),s+=2;var l=o.readUshort(r,s);s+=2,o.readUshort(r,s),s+=2,a.map=[];for(var u=0;u<l-6;u++)a.map.push(r[s+u]);return a},e.cmap.parse4=function(r,s){var o=e._bin,a=s,l={};l.format=o.readUshort(r,s),s+=2;var u=o.readUshort(r,s);s+=2,o.readUshort(r,s),s+=2;var h=o.readUshort(r,s);s+=2;var p=h/2;l.searchRange=o.readUshort(r,s),s+=2,l.entrySelector=o.readUshort(r,s),s+=2,l.rangeShift=o.readUshort(r,s),s+=2,l.endCount=o.readUshorts(r,s,p),s+=2*p,s+=2,l.startCount=o.readUshorts(r,s,p),s+=2*p,l.idDelta=[];for(var m=0;m<p;m++)l.idDelta.push(o.readShort(r,s)),s+=2;for(l.idRangeOffset=o.readUshorts(r,s,p),s+=2*p,l.glyphIdArray=[];s<a+u;)l.glyphIdArray.push(o.readUshort(r,s)),s+=2;return l},e.cmap.parse6=function(r,s){var o=e._bin,a={};a.format=o.readUshort(r,s),s+=2,o.readUshort(r,s),s+=2,o.readUshort(r,s),s+=2,a.firstCode=o.readUshort(r,s),s+=2;var l=o.readUshort(r,s);s+=2,a.glyphIdArray=[];for(var u=0;u<l;u++)a.glyphIdArray.push(o.readUshort(r,s)),s+=2;return a},e.cmap.parse12=function(r,s){var o=e._bin,a={};a.format=o.readUshort(r,s),s+=2,s+=2,o.readUint(r,s),s+=4,o.readUint(r,s),s+=4;var l=o.readUint(r,s);s+=4,a.groups=[];for(var u=0;u<l;u++){var h=s+12*u,p=o.readUint(r,h+0),m=o.readUint(r,h+4),y=o.readUint(r,h+8);a.groups.push([p,m,y])}return a},e.glyf={},e.glyf.parse=function(r,s,o,a){for(var l=[],u=0;u<a.maxp.numGlyphs;u++)l.push(null);return l},e.glyf._parseGlyf=function(r,s){var o=e._bin,a=r._data,l=e._tabOffset(a,"glyf",r._offset)+r.loca[s];if(r.loca[s]==r.loca[s+1])return null;var u={};if(u.noc=o.readShort(a,l),l+=2,u.xMin=o.readShort(a,l),l+=2,u.yMin=o.readShort(a,l),l+=2,u.xMax=o.readShort(a,l),l+=2,u.yMax=o.readShort(a,l),l+=2,u.xMin>=u.xMax||u.yMin>=u.yMax)return null;if(u.noc>0){u.endPts=[];for(var h=0;h<u.noc;h++)u.endPts.push(o.readUshort(a,l)),l+=2;var p=o.readUshort(a,l);if(l+=2,a.length-l<p)return null;u.instructions=o.readBytes(a,l,p),l+=p;var m=u.endPts[u.noc-1]+1;for(u.flags=[],h=0;h<m;h++){var y=a[l];if(l++,u.flags.push(y),(8&y)!=0){var b=a[l];l++;for(var x=0;x<b;x++)u.flags.push(y),h++}}for(u.xs=[],h=0;h<m;h++){var S=(2&u.flags[h])!=0,_=(16&u.flags[h])!=0;S?(u.xs.push(_?a[l]:-a[l]),l++):_?u.xs.push(0):(u.xs.push(o.readShort(a,l)),l+=2)}for(u.ys=[],h=0;h<m;h++)S=(4&u.flags[h])!=0,_=(32&u.flags[h])!=0,S?(u.ys.push(_?a[l]:-a[l]),l++):_?u.ys.push(0):(u.ys.push(o.readShort(a,l)),l+=2);var T=0,A=0;for(h=0;h<m;h++)T+=u.xs[h],A+=u.ys[h],u.xs[h]=T,u.ys[h]=A}else{var M;u.parts=[];do{M=o.readUshort(a,l),l+=2;var C={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(u.parts.push(C),C.glyphIndex=o.readUshort(a,l),l+=2,1&M){var R=o.readShort(a,l);l+=2;var L=o.readShort(a,l);l+=2}else R=o.readInt8(a,l),l++,L=o.readInt8(a,l),l++;2&M?(C.m.tx=R,C.m.ty=L):(C.p1=R,C.p2=L),8&M?(C.m.a=C.m.d=o.readF2dot14(a,l),l+=2):64&M?(C.m.a=o.readF2dot14(a,l),l+=2,C.m.d=o.readF2dot14(a,l),l+=2):128&M&&(C.m.a=o.readF2dot14(a,l),l+=2,C.m.b=o.readF2dot14(a,l),l+=2,C.m.c=o.readF2dot14(a,l),l+=2,C.m.d=o.readF2dot14(a,l),l+=2)}while(32&M);if(256&M){var I=o.readUshort(a,l);for(l+=2,u.instr=[],h=0;h<I;h++)u.instr.push(a[l]),l++}}return u},e.GDEF={},e.GDEF.parse=function(r,s,o,a){var l=s;s+=4;var u=e._bin.readUshort(r,s);return{glyphClassDef:u===0?null:e._lctf.readClassDef(r,l+u)}},e.GPOS={},e.GPOS.parse=function(r,s,o,a){return e._lctf.parse(r,s,o,a,e.GPOS.subt)},e.GPOS.subt=function(r,s,o,a){var l=e._bin,u=o,h={};if(h.fmt=l.readUshort(r,o),o+=2,s==1||s==2||s==3||s==7||s==8&&h.fmt<=2){var p=l.readUshort(r,o);o+=2,h.coverage=e._lctf.readCoverage(r,p+u)}if(s==1&&h.fmt==1){var m=l.readUshort(r,o);o+=2,m!=0&&(h.pos=e.GPOS.readValueRecord(r,o,m))}else if(s==2&&h.fmt>=1&&h.fmt<=2){m=l.readUshort(r,o),o+=2;var y=l.readUshort(r,o);o+=2;var b=e._lctf.numOfOnes(m),x=e._lctf.numOfOnes(y);if(h.fmt==1){h.pairsets=[];var S=l.readUshort(r,o);o+=2;for(var _=0;_<S;_++){var T=u+l.readUshort(r,o);o+=2;var A=l.readUshort(r,T);T+=2;for(var M=[],C=0;C<A;C++){var R=l.readUshort(r,T);T+=2,m!=0&&(F=e.GPOS.readValueRecord(r,T,m),T+=2*b),y!=0&&(z=e.GPOS.readValueRecord(r,T,y),T+=2*x),M.push({gid2:R,val1:F,val2:z})}h.pairsets.push(M)}}if(h.fmt==2){var L=l.readUshort(r,o);o+=2;var I=l.readUshort(r,o);o+=2;var P=l.readUshort(r,o);o+=2;var U=l.readUshort(r,o);for(o+=2,h.classDef1=e._lctf.readClassDef(r,u+L),h.classDef2=e._lctf.readClassDef(r,u+I),h.matrix=[],_=0;_<P;_++){var B=[];for(C=0;C<U;C++){var F=null,z=null;m!=0&&(F=e.GPOS.readValueRecord(r,o,m),o+=2*b),y!=0&&(z=e.GPOS.readValueRecord(r,o,y),o+=2*x),B.push({val1:F,val2:z})}h.matrix.push(B)}}}else if(s==4&&h.fmt==1)h.markCoverage=e._lctf.readCoverage(r,l.readUshort(r,o)+u),h.baseCoverage=e._lctf.readCoverage(r,l.readUshort(r,o+2)+u),h.markClassCount=l.readUshort(r,o+4),h.markArray=e.GPOS.readMarkArray(r,l.readUshort(r,o+6)+u),h.baseArray=e.GPOS.readBaseArray(r,l.readUshort(r,o+8)+u,h.markClassCount);else if(s==6&&h.fmt==1)h.mark1Coverage=e._lctf.readCoverage(r,l.readUshort(r,o)+u),h.mark2Coverage=e._lctf.readCoverage(r,l.readUshort(r,o+2)+u),h.markClassCount=l.readUshort(r,o+4),h.mark1Array=e.GPOS.readMarkArray(r,l.readUshort(r,o+6)+u),h.mark2Array=e.GPOS.readBaseArray(r,l.readUshort(r,o+8)+u,h.markClassCount);else{if(s==9&&h.fmt==1){var W=l.readUshort(r,o);o+=2;var X=l.readUint(r,o);if(o+=4,a.ltype==9)a.ltype=W;else if(a.ltype!=W)throw"invalid extension substitution";return e.GPOS.subt(r,a.ltype,u+X)}console.debug("unsupported GPOS table LookupType",s,"format",h.fmt)}return h},e.GPOS.readValueRecord=function(r,s,o){var a=e._bin,l=[];return l.push(1&o?a.readShort(r,s):0),s+=1&o?2:0,l.push(2&o?a.readShort(r,s):0),s+=2&o?2:0,l.push(4&o?a.readShort(r,s):0),s+=4&o?2:0,l.push(8&o?a.readShort(r,s):0),s+=8&o?2:0,l},e.GPOS.readBaseArray=function(r,s,o){var a=e._bin,l=[],u=s,h=a.readUshort(r,s);s+=2;for(var p=0;p<h;p++){for(var m=[],y=0;y<o;y++)m.push(e.GPOS.readAnchorRecord(r,u+a.readUshort(r,s))),s+=2;l.push(m)}return l},e.GPOS.readMarkArray=function(r,s){var o=e._bin,a=[],l=s,u=o.readUshort(r,s);s+=2;for(var h=0;h<u;h++){var p=e.GPOS.readAnchorRecord(r,o.readUshort(r,s+2)+l);p.markClass=o.readUshort(r,s),a.push(p),s+=4}return a},e.GPOS.readAnchorRecord=function(r,s){var o=e._bin,a={};return a.fmt=o.readUshort(r,s),a.x=o.readShort(r,s+2),a.y=o.readShort(r,s+4),a},e.GSUB={},e.GSUB.parse=function(r,s,o,a){return e._lctf.parse(r,s,o,a,e.GSUB.subt)},e.GSUB.subt=function(r,s,o,a){var l=e._bin,u=o,h={};if(h.fmt=l.readUshort(r,o),o+=2,s!=1&&s!=2&&s!=4&&s!=5&&s!=6)return null;if(s==1||s==2||s==4||s==5&&h.fmt<=2||s==6&&h.fmt<=2){var p=l.readUshort(r,o);o+=2,h.coverage=e._lctf.readCoverage(r,u+p)}if(s==1&&h.fmt>=1&&h.fmt<=2){if(h.fmt==1)h.delta=l.readShort(r,o),o+=2;else if(h.fmt==2){var m=l.readUshort(r,o);o+=2,h.newg=l.readUshorts(r,o,m),o+=2*h.newg.length}}else if(s==2&&h.fmt==1){m=l.readUshort(r,o),o+=2,h.seqs=[];for(var y=0;y<m;y++){var b=l.readUshort(r,o)+u;o+=2;var x=l.readUshort(r,b);h.seqs.push(l.readUshorts(r,b+2,x))}}else if(s==4)for(h.vals=[],m=l.readUshort(r,o),o+=2,y=0;y<m;y++){var S=l.readUshort(r,o);o+=2,h.vals.push(e.GSUB.readLigatureSet(r,u+S))}else if(s==5&&h.fmt==2){if(h.fmt==2){var _=l.readUshort(r,o);o+=2,h.cDef=e._lctf.readClassDef(r,u+_),h.scset=[];var T=l.readUshort(r,o);for(o+=2,y=0;y<T;y++){var A=l.readUshort(r,o);o+=2,h.scset.push(A==0?null:e.GSUB.readSubClassSet(r,u+A))}}}else if(s==6&&h.fmt==3){if(h.fmt==3){for(y=0;y<3;y++){m=l.readUshort(r,o),o+=2;for(var M=[],C=0;C<m;C++)M.push(e._lctf.readCoverage(r,u+l.readUshort(r,o+2*C)));o+=2*m,y==0&&(h.backCvg=M),y==1&&(h.inptCvg=M),y==2&&(h.ahedCvg=M)}m=l.readUshort(r,o),o+=2,h.lookupRec=e.GSUB.readSubstLookupRecords(r,o,m)}}else{if(s==7&&h.fmt==1){var R=l.readUshort(r,o);o+=2;var L=l.readUint(r,o);if(o+=4,a.ltype==9)a.ltype=R;else if(a.ltype!=R)throw"invalid extension substitution";return e.GSUB.subt(r,a.ltype,u+L)}console.debug("unsupported GSUB table LookupType",s,"format",h.fmt)}return h},e.GSUB.readSubClassSet=function(r,s){var o=e._bin.readUshort,a=s,l=[],u=o(r,s);s+=2;for(var h=0;h<u;h++){var p=o(r,s);s+=2,l.push(e.GSUB.readSubClassRule(r,a+p))}return l},e.GSUB.readSubClassRule=function(r,s){var o=e._bin.readUshort,a={},l=o(r,s),u=o(r,s+=2);s+=2,a.input=[];for(var h=0;h<l-1;h++)a.input.push(o(r,s)),s+=2;return a.substLookupRecords=e.GSUB.readSubstLookupRecords(r,s,u),a},e.GSUB.readSubstLookupRecords=function(r,s,o){for(var a=e._bin.readUshort,l=[],u=0;u<o;u++)l.push(a(r,s),a(r,s+2)),s+=4;return l},e.GSUB.readChainSubClassSet=function(r,s){var o=e._bin,a=s,l=[],u=o.readUshort(r,s);s+=2;for(var h=0;h<u;h++){var p=o.readUshort(r,s);s+=2,l.push(e.GSUB.readChainSubClassRule(r,a+p))}return l},e.GSUB.readChainSubClassRule=function(r,s){for(var o=e._bin,a={},l=["backtrack","input","lookahead"],u=0;u<l.length;u++){var h=o.readUshort(r,s);s+=2,u==1&&h--,a[l[u]]=o.readUshorts(r,s,h),s+=2*a[l[u]].length}return h=o.readUshort(r,s),s+=2,a.subst=o.readUshorts(r,s,2*h),s+=2*a.subst.length,a},e.GSUB.readLigatureSet=function(r,s){var o=e._bin,a=s,l=[],u=o.readUshort(r,s);s+=2;for(var h=0;h<u;h++){var p=o.readUshort(r,s);s+=2,l.push(e.GSUB.readLigature(r,a+p))}return l},e.GSUB.readLigature=function(r,s){var o=e._bin,a={chain:[]};a.nglyph=o.readUshort(r,s),s+=2;var l=o.readUshort(r,s);s+=2;for(var u=0;u<l-1;u++)a.chain.push(o.readUshort(r,s)),s+=2;return a},e.head={},e.head.parse=function(r,s,o){var a=e._bin,l={};return a.readFixed(r,s),s+=4,l.fontRevision=a.readFixed(r,s),s+=4,a.readUint(r,s),s+=4,a.readUint(r,s),s+=4,l.flags=a.readUshort(r,s),s+=2,l.unitsPerEm=a.readUshort(r,s),s+=2,l.created=a.readUint64(r,s),s+=8,l.modified=a.readUint64(r,s),s+=8,l.xMin=a.readShort(r,s),s+=2,l.yMin=a.readShort(r,s),s+=2,l.xMax=a.readShort(r,s),s+=2,l.yMax=a.readShort(r,s),s+=2,l.macStyle=a.readUshort(r,s),s+=2,l.lowestRecPPEM=a.readUshort(r,s),s+=2,l.fontDirectionHint=a.readShort(r,s),s+=2,l.indexToLocFormat=a.readShort(r,s),s+=2,l.glyphDataFormat=a.readShort(r,s),s+=2,l},e.hhea={},e.hhea.parse=function(r,s,o){var a=e._bin,l={};return a.readFixed(r,s),s+=4,l.ascender=a.readShort(r,s),s+=2,l.descender=a.readShort(r,s),s+=2,l.lineGap=a.readShort(r,s),s+=2,l.advanceWidthMax=a.readUshort(r,s),s+=2,l.minLeftSideBearing=a.readShort(r,s),s+=2,l.minRightSideBearing=a.readShort(r,s),s+=2,l.xMaxExtent=a.readShort(r,s),s+=2,l.caretSlopeRise=a.readShort(r,s),s+=2,l.caretSlopeRun=a.readShort(r,s),s+=2,l.caretOffset=a.readShort(r,s),s+=2,s+=8,l.metricDataFormat=a.readShort(r,s),s+=2,l.numberOfHMetrics=a.readUshort(r,s),s+=2,l},e.hmtx={},e.hmtx.parse=function(r,s,o,a){for(var l=e._bin,u={aWidth:[],lsBearing:[]},h=0,p=0,m=0;m<a.maxp.numGlyphs;m++)m<a.hhea.numberOfHMetrics&&(h=l.readUshort(r,s),s+=2,p=l.readShort(r,s),s+=2),u.aWidth.push(h),u.lsBearing.push(p);return u},e.kern={},e.kern.parse=function(r,s,o,a){var l=e._bin,u=l.readUshort(r,s);if(s+=2,u==1)return e.kern.parseV1(r,s-2,o,a);var h=l.readUshort(r,s);s+=2;for(var p={glyph1:[],rval:[]},m=0;m<h;m++){s+=2,o=l.readUshort(r,s),s+=2;var y=l.readUshort(r,s);s+=2;var b=y>>>8;if((b&=15)!=0)throw"unknown kern table format: "+b;s=e.kern.readFormat0(r,s,p)}return p},e.kern.parseV1=function(r,s,o,a){var l=e._bin;l.readFixed(r,s),s+=4;var u=l.readUint(r,s);s+=4;for(var h={glyph1:[],rval:[]},p=0;p<u;p++){l.readUint(r,s),s+=4;var m=l.readUshort(r,s);s+=2,l.readUshort(r,s),s+=2;var y=m>>>8;if((y&=15)!=0)throw"unknown kern table format: "+y;s=e.kern.readFormat0(r,s,h)}return h},e.kern.readFormat0=function(r,s,o){var a=e._bin,l=-1,u=a.readUshort(r,s);s+=2,a.readUshort(r,s),s+=2,a.readUshort(r,s),s+=2,a.readUshort(r,s),s+=2;for(var h=0;h<u;h++){var p=a.readUshort(r,s);s+=2;var m=a.readUshort(r,s);s+=2;var y=a.readShort(r,s);s+=2,p!=l&&(o.glyph1.push(p),o.rval.push({glyph2:[],vals:[]}));var b=o.rval[o.rval.length-1];b.glyph2.push(m),b.vals.push(y),l=p}return s},e.loca={},e.loca.parse=function(r,s,o,a){var l=e._bin,u=[],h=a.head.indexToLocFormat,p=a.maxp.numGlyphs+1;if(h==0)for(var m=0;m<p;m++)u.push(l.readUshort(r,s+(m<<1))<<1);if(h==1)for(m=0;m<p;m++)u.push(l.readUint(r,s+(m<<2)));return u},e.maxp={},e.maxp.parse=function(r,s,o){var a=e._bin,l={},u=a.readUint(r,s);return s+=4,l.numGlyphs=a.readUshort(r,s),s+=2,u==65536&&(l.maxPoints=a.readUshort(r,s),s+=2,l.maxContours=a.readUshort(r,s),s+=2,l.maxCompositePoints=a.readUshort(r,s),s+=2,l.maxCompositeContours=a.readUshort(r,s),s+=2,l.maxZones=a.readUshort(r,s),s+=2,l.maxTwilightPoints=a.readUshort(r,s),s+=2,l.maxStorage=a.readUshort(r,s),s+=2,l.maxFunctionDefs=a.readUshort(r,s),s+=2,l.maxInstructionDefs=a.readUshort(r,s),s+=2,l.maxStackElements=a.readUshort(r,s),s+=2,l.maxSizeOfInstructions=a.readUshort(r,s),s+=2,l.maxComponentElements=a.readUshort(r,s),s+=2,l.maxComponentDepth=a.readUshort(r,s),s+=2),l},e.name={},e.name.parse=function(r,s,o){var a=e._bin,l={};a.readUshort(r,s),s+=2;var u=a.readUshort(r,s);s+=2,a.readUshort(r,s);for(var h,p=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],m=s+=2,y=0;y<u;y++){var b=a.readUshort(r,s);s+=2;var x=a.readUshort(r,s);s+=2;var S=a.readUshort(r,s);s+=2;var _=a.readUshort(r,s);s+=2;var T=a.readUshort(r,s);s+=2;var A=a.readUshort(r,s);s+=2;var M,C=p[_],R=m+12*u+A;if(b==0)M=a.readUnicode(r,R,T/2);else if(b==3&&x==0)M=a.readUnicode(r,R,T/2);else if(x==0)M=a.readASCII(r,R,T);else if(x==1)M=a.readUnicode(r,R,T/2);else if(x==3)M=a.readUnicode(r,R,T/2);else{if(b!=1)throw"unknown encoding "+x+", platformID: "+b;M=a.readASCII(r,R,T),console.debug("reading unknown MAC encoding "+x+" as ASCII")}var L="p"+b+","+S.toString(16);l[L]==null&&(l[L]={}),l[L][C!==void 0?C:_]=M,l[L]._lang=S}for(var I in l)if(l[I].postScriptName!=null&&l[I]._lang==1033)return l[I];for(var I in l)if(l[I].postScriptName!=null&&l[I]._lang==0)return l[I];for(var I in l)if(l[I].postScriptName!=null&&l[I]._lang==3084)return l[I];for(var I in l)if(l[I].postScriptName!=null)return l[I];for(var I in l){h=I;break}return console.debug("returning name table with languageID "+l[h]._lang),l[h]},e["OS/2"]={},e["OS/2"].parse=function(r,s,o){var a=e._bin.readUshort(r,s);s+=2;var l={};if(a==0)e["OS/2"].version0(r,s,l);else if(a==1)e["OS/2"].version1(r,s,l);else if(a==2||a==3||a==4)e["OS/2"].version2(r,s,l);else{if(a!=5)throw"unknown OS/2 table version: "+a;e["OS/2"].version5(r,s,l)}return l},e["OS/2"].version0=function(r,s,o){var a=e._bin;return o.xAvgCharWidth=a.readShort(r,s),s+=2,o.usWeightClass=a.readUshort(r,s),s+=2,o.usWidthClass=a.readUshort(r,s),s+=2,o.fsType=a.readUshort(r,s),s+=2,o.ySubscriptXSize=a.readShort(r,s),s+=2,o.ySubscriptYSize=a.readShort(r,s),s+=2,o.ySubscriptXOffset=a.readShort(r,s),s+=2,o.ySubscriptYOffset=a.readShort(r,s),s+=2,o.ySuperscriptXSize=a.readShort(r,s),s+=2,o.ySuperscriptYSize=a.readShort(r,s),s+=2,o.ySuperscriptXOffset=a.readShort(r,s),s+=2,o.ySuperscriptYOffset=a.readShort(r,s),s+=2,o.yStrikeoutSize=a.readShort(r,s),s+=2,o.yStrikeoutPosition=a.readShort(r,s),s+=2,o.sFamilyClass=a.readShort(r,s),s+=2,o.panose=a.readBytes(r,s,10),s+=10,o.ulUnicodeRange1=a.readUint(r,s),s+=4,o.ulUnicodeRange2=a.readUint(r,s),s+=4,o.ulUnicodeRange3=a.readUint(r,s),s+=4,o.ulUnicodeRange4=a.readUint(r,s),s+=4,o.achVendID=[a.readInt8(r,s),a.readInt8(r,s+1),a.readInt8(r,s+2),a.readInt8(r,s+3)],s+=4,o.fsSelection=a.readUshort(r,s),s+=2,o.usFirstCharIndex=a.readUshort(r,s),s+=2,o.usLastCharIndex=a.readUshort(r,s),s+=2,o.sTypoAscender=a.readShort(r,s),s+=2,o.sTypoDescender=a.readShort(r,s),s+=2,o.sTypoLineGap=a.readShort(r,s),s+=2,o.usWinAscent=a.readUshort(r,s),s+=2,o.usWinDescent=a.readUshort(r,s),s+=2},e["OS/2"].version1=function(r,s,o){var a=e._bin;return s=e["OS/2"].version0(r,s,o),o.ulCodePageRange1=a.readUint(r,s),s+=4,o.ulCodePageRange2=a.readUint(r,s),s+=4},e["OS/2"].version2=function(r,s,o){var a=e._bin;return s=e["OS/2"].version1(r,s,o),o.sxHeight=a.readShort(r,s),s+=2,o.sCapHeight=a.readShort(r,s),s+=2,o.usDefault=a.readUshort(r,s),s+=2,o.usBreak=a.readUshort(r,s),s+=2,o.usMaxContext=a.readUshort(r,s),s+=2},e["OS/2"].version5=function(r,s,o){var a=e._bin;return s=e["OS/2"].version2(r,s,o),o.usLowerOpticalPointSize=a.readUshort(r,s),s+=2,o.usUpperOpticalPointSize=a.readUshort(r,s),s+=2},e.post={},e.post.parse=function(r,s,o){var a=e._bin,l={};return l.version=a.readFixed(r,s),s+=4,l.italicAngle=a.readFixed(r,s),s+=4,l.underlinePosition=a.readShort(r,s),s+=2,l.underlineThickness=a.readShort(r,s),s+=2,l},e==null&&(e={}),e.U==null&&(e.U={}),e.U.codeToGlyph=function(r,s){var o=r.cmap,a=-1;if(o.p0e4!=null?a=o.p0e4:o.p3e1!=null?a=o.p3e1:o.p1e0!=null?a=o.p1e0:o.p0e3!=null&&(a=o.p0e3),a==-1)throw"no familiar platform and encoding!";var l=o.tables[a];if(l.format==0)return s>=l.map.length?0:l.map[s];if(l.format==4){for(var u=-1,h=0;h<l.endCount.length;h++)if(s<=l.endCount[h]){u=h;break}return u==-1||l.startCount[u]>s?0:65535&(l.idRangeOffset[u]!=0?l.glyphIdArray[s-l.startCount[u]+(l.idRangeOffset[u]>>1)-(l.idRangeOffset.length-u)]:s+l.idDelta[u])}if(l.format==12){if(s>l.groups[l.groups.length-1][1])return 0;for(h=0;h<l.groups.length;h++){var p=l.groups[h];if(p[0]<=s&&s<=p[1])return p[2]+(s-p[0])}return 0}throw"unknown cmap table format "+l.format},e.U.glyphToPath=function(r,s){var o={cmds:[],crds:[]};if(r.SVG&&r.SVG.entries[s]){var a=r.SVG.entries[s];return a==null?o:(typeof a=="string"&&(a=e.SVG.toPath(a),r.SVG.entries[s]=a),a)}if(r.CFF){var l={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:r.CFF.Private?r.CFF.Private.defaultWidthX:0,open:!1},u=r.CFF,h=r.CFF.Private;if(u.ROS){for(var p=0;u.FDSelect[p+2]<=s;)p+=2;h=u.FDArray[u.FDSelect[p+1]].Private}e.U._drawCFF(r.CFF.CharStrings[s],l,u,h,o)}else r.glyf&&e.U._drawGlyf(s,r,o);return o},e.U._drawGlyf=function(r,s,o){var a=s.glyf[r];a==null&&(a=s.glyf[r]=e.glyf._parseGlyf(s,r)),a!=null&&(a.noc>-1?e.U._simpleGlyph(a,o):e.U._compoGlyph(a,s,o))},e.U._simpleGlyph=function(r,s){for(var o=0;o<r.noc;o++){for(var a=o==0?0:r.endPts[o-1]+1,l=r.endPts[o],u=a;u<=l;u++){var h=u==a?l:u-1,p=u==l?a:u+1,m=1&r.flags[u],y=1&r.flags[h],b=1&r.flags[p],x=r.xs[u],S=r.ys[u];if(u==a)if(m){if(!y){e.U.P.moveTo(s,x,S);continue}e.U.P.moveTo(s,r.xs[h],r.ys[h])}else y?e.U.P.moveTo(s,r.xs[h],r.ys[h]):e.U.P.moveTo(s,(r.xs[h]+x)/2,(r.ys[h]+S)/2);m?y&&e.U.P.lineTo(s,x,S):b?e.U.P.qcurveTo(s,x,S,r.xs[p],r.ys[p]):e.U.P.qcurveTo(s,x,S,(x+r.xs[p])/2,(S+r.ys[p])/2)}e.U.P.closePath(s)}},e.U._compoGlyph=function(r,s,o){for(var a=0;a<r.parts.length;a++){var l={cmds:[],crds:[]},u=r.parts[a];e.U._drawGlyf(u.glyphIndex,s,l);for(var h=u.m,p=0;p<l.crds.length;p+=2){var m=l.crds[p],y=l.crds[p+1];o.crds.push(m*h.a+y*h.b+h.tx),o.crds.push(m*h.c+y*h.d+h.ty)}for(p=0;p<l.cmds.length;p++)o.cmds.push(l.cmds[p])}},e.U._getGlyphClass=function(r,s){var o=e._lctf.getInterval(s,r);return o==-1?0:s[o+2]},e.U._applySubs=function(r,s,o,a){for(var l=r.length-s-1,u=0;u<o.tabs.length;u++)if(o.tabs[u]!=null){var h,p=o.tabs[u];if(!p.coverage||(h=e._lctf.coverageIndex(p.coverage,r[s]))!=-1){if(o.ltype==1)r[s],p.fmt==1?r[s]=r[s]+p.delta:r[s]=p.newg[h];else if(o.ltype==4)for(var m=p.vals[h],y=0;y<m.length;y++){var b=m[y],x=b.chain.length;if(!(x>l)){for(var S=!0,_=0,T=0;T<x;T++){for(;r[s+_+(1+T)]==-1;)_++;b.chain[T]!=r[s+_+(1+T)]&&(S=!1)}if(S){for(r[s]=b.nglyph,T=0;T<x+_;T++)r[s+T+1]=-1;break}}}else if(o.ltype==5&&p.fmt==2)for(var A=e._lctf.getInterval(p.cDef,r[s]),M=p.cDef[A+2],C=p.scset[M],R=0;R<C.length;R++){var L=C[R],I=L.input;if(!(I.length>l)){for(S=!0,T=0;T<I.length;T++){var P=e._lctf.getInterval(p.cDef,r[s+1+T]);if(A==-1&&p.cDef[P+2]!=I[T]){S=!1;break}}if(S){var U=L.substLookupRecords;for(y=0;y<U.length;y+=2)U[y],U[y+1]}}}else if(o.ltype==6&&p.fmt==3){if(!e.U._glsCovered(r,p.backCvg,s-p.backCvg.length)||!e.U._glsCovered(r,p.inptCvg,s)||!e.U._glsCovered(r,p.ahedCvg,s+p.inptCvg.length))continue;var B=p.lookupRec;for(R=0;R<B.length;R+=2){A=B[R];var F=a[B[R+1]];e.U._applySubs(r,s+A,F,a)}}}}},e.U._glsCovered=function(r,s,o){for(var a=0;a<s.length;a++)if(e._lctf.coverageIndex(s[a],r[o+a])==-1)return!1;return!0},e.U.glyphsToPath=function(r,s,o){for(var a={cmds:[],crds:[]},l=0,u=0;u<s.length;u++){var h=s[u];if(h!=-1){for(var p=u<s.length-1&&s[u+1]!=-1?s[u+1]:0,m=e.U.glyphToPath(r,h),y=0;y<m.crds.length;y+=2)a.crds.push(m.crds[y]+l),a.crds.push(m.crds[y+1]);for(o&&a.cmds.push(o),y=0;y<m.cmds.length;y++)a.cmds.push(m.cmds[y]);o&&a.cmds.push("X"),l+=r.hmtx.aWidth[h],u<s.length-1&&(l+=e.U.getPairAdjustment(r,h,p))}}return a},e.U.P={},e.U.P.moveTo=function(r,s,o){r.cmds.push("M"),r.crds.push(s,o)},e.U.P.lineTo=function(r,s,o){r.cmds.push("L"),r.crds.push(s,o)},e.U.P.curveTo=function(r,s,o,a,l,u,h){r.cmds.push("C"),r.crds.push(s,o,a,l,u,h)},e.U.P.qcurveTo=function(r,s,o,a,l){r.cmds.push("Q"),r.crds.push(s,o,a,l)},e.U.P.closePath=function(r){r.cmds.push("Z")},e.U._drawCFF=function(r,s,o,a,l){for(var u=s.stack,h=s.nStems,p=s.haveWidth,m=s.width,y=s.open,b=0,x=s.x,S=s.y,_=0,T=0,A=0,M=0,C=0,R=0,L=0,I=0,P=0,U=0,B={val:0,size:0};b<r.length;){e.CFF.getCharString(r,b,B);var F=B.val;if(b+=B.size,F=="o1"||F=="o18")u.length%2!=0&&!p&&(m=u.shift()+a.nominalWidthX),h+=u.length>>1,u.length=0,p=!0;else if(F=="o3"||F=="o23")u.length%2!=0&&!p&&(m=u.shift()+a.nominalWidthX),h+=u.length>>1,u.length=0,p=!0;else if(F=="o4")u.length>1&&!p&&(m=u.shift()+a.nominalWidthX,p=!0),y&&e.U.P.closePath(l),S+=u.pop(),e.U.P.moveTo(l,x,S),y=!0;else if(F=="o5")for(;u.length>0;)x+=u.shift(),S+=u.shift(),e.U.P.lineTo(l,x,S);else if(F=="o6"||F=="o7")for(var z=u.length,W=F=="o6",X=0;X<z;X++){var j=u.shift();W?x+=j:S+=j,W=!W,e.U.P.lineTo(l,x,S)}else if(F=="o8"||F=="o24"){z=u.length;for(var G=0;G+6<=z;)_=x+u.shift(),T=S+u.shift(),A=_+u.shift(),M=T+u.shift(),x=A+u.shift(),S=M+u.shift(),e.U.P.curveTo(l,_,T,A,M,x,S),G+=6;F=="o24"&&(x+=u.shift(),S+=u.shift(),e.U.P.lineTo(l,x,S))}else{if(F=="o11")break;if(F=="o1234"||F=="o1235"||F=="o1236"||F=="o1237")F=="o1234"&&(T=S,A=(_=x+u.shift())+u.shift(),U=M=T+u.shift(),R=M,I=S,x=(L=(C=(P=A+u.shift())+u.shift())+u.shift())+u.shift(),e.U.P.curveTo(l,_,T,A,M,P,U),e.U.P.curveTo(l,C,R,L,I,x,S)),F=="o1235"&&(_=x+u.shift(),T=S+u.shift(),A=_+u.shift(),M=T+u.shift(),P=A+u.shift(),U=M+u.shift(),C=P+u.shift(),R=U+u.shift(),L=C+u.shift(),I=R+u.shift(),x=L+u.shift(),S=I+u.shift(),u.shift(),e.U.P.curveTo(l,_,T,A,M,P,U),e.U.P.curveTo(l,C,R,L,I,x,S)),F=="o1236"&&(_=x+u.shift(),T=S+u.shift(),A=_+u.shift(),U=M=T+u.shift(),R=M,L=(C=(P=A+u.shift())+u.shift())+u.shift(),I=R+u.shift(),x=L+u.shift(),e.U.P.curveTo(l,_,T,A,M,P,U),e.U.P.curveTo(l,C,R,L,I,x,S)),F=="o1237"&&(_=x+u.shift(),T=S+u.shift(),A=_+u.shift(),M=T+u.shift(),P=A+u.shift(),U=M+u.shift(),C=P+u.shift(),R=U+u.shift(),L=C+u.shift(),I=R+u.shift(),Math.abs(L-x)>Math.abs(I-S)?x=L+u.shift():S=I+u.shift(),e.U.P.curveTo(l,_,T,A,M,P,U),e.U.P.curveTo(l,C,R,L,I,x,S));else if(F=="o14"){if(u.length>0&&!p&&(m=u.shift()+o.nominalWidthX,p=!0),u.length==4){var K=u.shift(),J=u.shift(),ee=u.shift(),V=u.shift(),Y=e.CFF.glyphBySE(o,ee),Q=e.CFF.glyphBySE(o,V);e.U._drawCFF(o.CharStrings[Y],s,o,a,l),s.x=K,s.y=J,e.U._drawCFF(o.CharStrings[Q],s,o,a,l)}y&&(e.U.P.closePath(l),y=!1)}else if(F=="o19"||F=="o20")u.length%2!=0&&!p&&(m=u.shift()+a.nominalWidthX),h+=u.length>>1,u.length=0,p=!0,b+=h+7>>3;else if(F=="o21")u.length>2&&!p&&(m=u.shift()+a.nominalWidthX,p=!0),S+=u.pop(),x+=u.pop(),y&&e.U.P.closePath(l),e.U.P.moveTo(l,x,S),y=!0;else if(F=="o22")u.length>1&&!p&&(m=u.shift()+a.nominalWidthX,p=!0),x+=u.pop(),y&&e.U.P.closePath(l),e.U.P.moveTo(l,x,S),y=!0;else if(F=="o25"){for(;u.length>6;)x+=u.shift(),S+=u.shift(),e.U.P.lineTo(l,x,S);_=x+u.shift(),T=S+u.shift(),A=_+u.shift(),M=T+u.shift(),x=A+u.shift(),S=M+u.shift(),e.U.P.curveTo(l,_,T,A,M,x,S)}else if(F=="o26")for(u.length%2&&(x+=u.shift());u.length>0;)_=x,T=S+u.shift(),x=A=_+u.shift(),S=(M=T+u.shift())+u.shift(),e.U.P.curveTo(l,_,T,A,M,x,S);else if(F=="o27")for(u.length%2&&(S+=u.shift());u.length>0;)T=S,A=(_=x+u.shift())+u.shift(),M=T+u.shift(),x=A+u.shift(),S=M,e.U.P.curveTo(l,_,T,A,M,x,S);else if(F=="o10"||F=="o29"){var re=F=="o10"?a:o;if(u.length==0)console.debug("error: empty stack");else{var ne=u.pop(),le=re.Subrs[ne+re.Bias];s.x=x,s.y=S,s.nStems=h,s.haveWidth=p,s.width=m,s.open=y,e.U._drawCFF(le,s,o,a,l),x=s.x,S=s.y,h=s.nStems,p=s.haveWidth,m=s.width,y=s.open}}else if(F=="o30"||F=="o31"){var fe=u.length,pe=(G=0,F=="o31");for(G+=fe-(z=-3&fe);G<z;)pe?(T=S,A=(_=x+u.shift())+u.shift(),S=(M=T+u.shift())+u.shift(),z-G==5?(x=A+u.shift(),G++):x=A,pe=!1):(_=x,T=S+u.shift(),A=_+u.shift(),M=T+u.shift(),x=A+u.shift(),z-G==5?(S=M+u.shift(),G++):S=M,pe=!0),e.U.P.curveTo(l,_,T,A,M,x,S),G+=4}else{if((F+"").charAt(0)=="o")throw console.debug("Unknown operation: "+F,r),F;u.push(F)}}}s.x=x,s.y=S,s.nStems=h,s.haveWidth=p,s.width=m,s.open=y};var t=e,i={Typr:t};return n.Typr=t,n.default=i,Object.defineProperty(n,"__esModule",{value:!0}),n})({}).Typr}function Gme(){return(function(n){var e=Uint8Array,t=Uint16Array,i=Uint32Array,r=new e([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),s=new e([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),o=new e([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),a=function(F,z){for(var W=new t(31),X=0;X<31;++X)W[X]=z+=1<<F[X-1];var j=new i(W[30]);for(X=1;X<30;++X)for(var G=W[X];G<W[X+1];++G)j[G]=G-W[X]<<5|X;return[W,j]},l=a(r,2),u=l[0],h=l[1];u[28]=258,h[258]=28;for(var p=a(s,0)[0],m=new t(32768),y=0;y<32768;++y){var b=(43690&y)>>>1|(21845&y)<<1;b=(61680&(b=(52428&b)>>>2|(13107&b)<<2))>>>4|(3855&b)<<4,m[y]=((65280&b)>>>8|(255&b)<<8)>>>1}var x=function(F,z,W){for(var X=F.length,j=0,G=new t(z);j<X;++j)++G[F[j]-1];var K,J=new t(z);for(j=0;j<z;++j)J[j]=J[j-1]+G[j-1]<<1;{K=new t(1<<z);var ee=15-z;for(j=0;j<X;++j)if(F[j])for(var V=j<<4|F[j],Y=z-F[j],Q=J[F[j]-1]++<<Y,re=Q|(1<<Y)-1;Q<=re;++Q)K[m[Q]>>>ee]=V}return K},S=new e(288);for(y=0;y<144;++y)S[y]=8;for(y=144;y<256;++y)S[y]=9;for(y=256;y<280;++y)S[y]=7;for(y=280;y<288;++y)S[y]=8;var _=new e(32);for(y=0;y<32;++y)_[y]=5;var T=x(S,9),A=x(_,5),M=function(F){for(var z=F[0],W=1;W<F.length;++W)F[W]>z&&(z=F[W]);return z},C=function(F,z,W){var X=z/8|0;return(F[X]|F[X+1]<<8)>>(7&z)&W},R=function(F,z){var W=z/8|0;return(F[W]|F[W+1]<<8|F[W+2]<<16)>>(7&z)},L=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],I=function(F,z,W){var X=new Error(z||L[F]);if(X.code=F,Error.captureStackTrace&&Error.captureStackTrace(X,I),!W)throw X;return X},P=function(F,z,W){var X=F.length;if(!X||W&&!W.l&&X<5)return z||new e(0);var j=!z||W,G=!W||W.i;W||(W={}),z||(z=new e(3*X));var K,J=function(nt){var ct=z.length;if(nt>ct){var ut=new e(Math.max(2*ct,nt));ut.set(z),z=ut}},ee=W.f||0,V=W.p||0,Y=W.b||0,Q=W.l,re=W.d,ne=W.m,le=W.n,fe=8*X;do{if(!Q){W.f=ee=C(F,V,1);var pe=C(F,V+1,3);if(V+=3,!pe){var Ee=F[(Ie=((K=V)/8|0)+(7&K&&1)+4)-4]|F[Ie-3]<<8,Te=Ie+Ee;if(Te>X){G&&I(0);break}j&&J(Y+Ee),z.set(F.subarray(Ie,Te),Y),W.b=Y+=Ee,W.p=V=8*Te;continue}if(pe==1)Q=T,re=A,ne=9,le=5;else if(pe==2){var xe=C(F,V,31)+257,ge=C(F,V+10,15)+4,oe=xe+C(F,V+5,31)+1;V+=14;for(var me=new e(oe),ve=new e(19),he=0;he<ge;++he)ve[o[he]]=C(F,V+3*he,7);V+=3*ge;var Ce=M(ve),Re=(1<<Ce)-1,Le=x(ve,Ce);for(he=0;he<oe;){var Ie,be=Le[C(F,V,Re)];if(V+=15&be,(Ie=be>>>4)<16)me[he++]=Ie;else{var Je=0,te=0;for(Ie==16?(te=3+C(F,V,3),V+=2,Je=me[he-1]):Ie==17?(te=3+C(F,V,7),V+=3):Ie==18&&(te=11+C(F,V,127),V+=7);te--;)me[he++]=Je}}var Z=me.subarray(0,xe),de=me.subarray(xe);ne=M(Z),le=M(de),Q=x(Z,ne),re=x(de,le)}else I(1);if(V>fe){G&&I(0);break}}j&&J(Y+131072);for(var Ne=(1<<ne)-1,Oe=(1<<le)-1,Ae=V;;Ae=V){var et=(Je=Q[R(F,V)&Ne])>>>4;if((V+=15&Je)>fe){G&&I(0);break}if(Je||I(2),et<256)z[Y++]=et;else{if(et==256){Ae=V,Q=null;break}var Ze=et-254;if(et>264){var ft=r[he=et-257];Ze=C(F,V,(1<<ft)-1)+u[he],V+=ft}var dt=re[R(F,V)&Oe],Xe=dt>>>4;if(dt||I(3),V+=15&dt,de=p[Xe],Xe>3&&(ft=s[Xe],de+=R(F,V)&(1<<ft)-1,V+=ft),V>fe){G&&I(0);break}j&&J(Y+131072);for(var Ke=Y+Ze;Y<Ke;Y+=4)z[Y]=z[Y-de],z[Y+1]=z[Y+1-de],z[Y+2]=z[Y+2-de],z[Y+3]=z[Y+3-de];Y=Ke}}W.l=Q,W.p=Ae,W.b=Y,Q&&(ee=1,W.m=ne,W.d=re,W.n=le)}while(!ee);return Y==z.length?z:(function(nt,ct,ut){(ut==null||ut>nt.length)&&(ut=nt.length);var Vt=new(nt instanceof t?t:nt instanceof i?i:e)(ut-ct);return Vt.set(nt.subarray(ct,ut)),Vt})(z,0,Y)},U=new e(0),B=typeof TextDecoder<"u"&&new TextDecoder;try{B.decode(U,{stream:!0})}catch{}return n.convert_streams=function(F){var z=new DataView(F),W=0;function X(){var xe=z.getUint16(W);return W+=2,xe}function j(){var xe=z.getUint32(W);return W+=4,xe}function G(xe){Ee.setUint16(Te,xe),Te+=2}function K(xe){Ee.setUint32(Te,xe),Te+=4}for(var J={signature:j(),flavor:j(),length:j(),numTables:X(),reserved:X(),totalSfntSize:j(),majorVersion:X(),minorVersion:X(),metaOffset:j(),metaLength:j(),metaOrigLength:j(),privOffset:j(),privLength:j()},ee=0;Math.pow(2,ee)<=J.numTables;)ee++;ee--;for(var V=16*Math.pow(2,ee),Y=16*J.numTables-V,Q=12,re=[],ne=0;ne<J.numTables;ne++)re.push({tag:j(),offset:j(),compLength:j(),origLength:j(),origChecksum:j()}),Q+=16;var le,fe=new Uint8Array(12+16*re.length+re.reduce((function(xe,ge){return xe+ge.origLength+4}),0)),pe=fe.buffer,Ee=new DataView(pe),Te=0;return K(J.flavor),G(J.numTables),G(V),G(ee),G(Y),re.forEach((function(xe){K(xe.tag),K(xe.origChecksum),K(Q),K(xe.origLength),xe.outOffset=Q,(Q+=xe.origLength)%4!=0&&(Q+=4-Q%4)})),re.forEach((function(xe){var ge,oe=F.slice(xe.offset,xe.offset+xe.compLength);if(xe.compLength!=xe.origLength){var me=new Uint8Array(xe.origLength);ge=new Uint8Array(oe,2),P(ge,me)}else me=new Uint8Array(oe);fe.set(me,xe.outOffset);var ve=0;(Q=xe.outOffset+xe.origLength)%4!=0&&(ve=4-Q%4),fe.set(new Uint8Array(ve).buffer,xe.outOffset+xe.origLength),le=Q+ve})),pe.slice(0,le)},Object.defineProperty(n,"__esModule",{value:!0}),n})({}).convert_streams}function Hme(n,e){const t={M:2,L:2,Q:4,C:6,Z:0},i={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},r=1,s=2,o=4,a=8,l=16,u=32;let h;function p(L){if(!h){const I={R:s,L:r,D:o,C:l,U:u,T:a};h=new Map;for(let P in i){let U=0;i[P].split(",").forEach(B=>{let[F,z]=B.split("+");F=parseInt(F,36),z=z?parseInt(z,36):0,h.set(U+=F,I[P]);for(let W=z;W--;)h.set(++U,I[P])})}}return h.get(L)||u}const m=1,y=2,b=3,x=4,S=[null,"isol","init","fina","medi"];function _(L){const I=new Uint8Array(L.length);let P=u,U=m,B=-1;for(let F=0;F<L.length;F++){const z=L.codePointAt(F);let W=p(z)|0,X=m;W&a||(P&(r|o|l)?W&(s|o|l)?(X=b,(U===m||U===b)&&I[B]++):W&(r|u)&&(U===y||U===x)&&I[B]--:P&(s|u)&&(U===y||U===x)&&I[B]--,U=I[F]=X,P=W,B=F,z>65535&&F++)}return I}function T(L,I){const P=[];for(let B=0;B<I.length;B++){const F=I.codePointAt(B);F>65535&&B++,P.push(n.U.codeToGlyph(L,F))}const U=L.GSUB;if(U){const{lookupList:B,featureList:F}=U;let z;const W=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws|ccmp)$/,X=[];F.forEach(j=>{if(W.test(j.tag))for(let G=0;G<j.tab.length;G++){if(X[j.tab[G]])continue;X[j.tab[G]]=!0;const K=B[j.tab[G]],J=/^(isol|init|fina|medi)$/.test(j.tag);J&&!z&&(z=_(I));for(let ee=0;ee<P.length;ee++)(!z||!J||S[z[ee]]===j.tag)&&n.U._applySubs(P,ee,K,B)}})}return P}function A(L,I){const P=new Int16Array(I.length*3);let U=0;for(;U<I.length;U++){const W=I[U];if(W===-1)continue;P[U*3+2]=L.hmtx.aWidth[W];const X=L.GPOS;if(X){const j=X.lookupList;for(let G=0;G<j.length;G++){const K=j[G];for(let J=0;J<K.tabs.length;J++){const ee=K.tabs[J];if(K.ltype===1){if(n._lctf.coverageIndex(ee.coverage,W)!==-1&&ee.pos){z(ee.pos,U);break}}else if(K.ltype===2){let V=null,Y=B();if(Y!==-1){const Q=n._lctf.coverageIndex(ee.coverage,I[Y]);if(Q!==-1){if(ee.fmt===1){const re=ee.pairsets[Q];for(let ne=0;ne<re.length;ne++)re[ne].gid2===W&&(V=re[ne])}else if(ee.fmt===2){const re=n.U._getGlyphClass(I[Y],ee.classDef1),ne=n.U._getGlyphClass(W,ee.classDef2);V=ee.matrix[re][ne]}if(V){V.val1&&z(V.val1,Y),V.val2&&z(V.val2,U);break}}}}else if(K.ltype===4){const V=n._lctf.coverageIndex(ee.markCoverage,W);if(V!==-1){const Y=B(F),Q=Y===-1?-1:n._lctf.coverageIndex(ee.baseCoverage,I[Y]);if(Q!==-1){const re=ee.markArray[V],ne=ee.baseArray[Q][re.markClass];P[U*3]=ne.x-re.x+P[Y*3]-P[Y*3+2],P[U*3+1]=ne.y-re.y+P[Y*3+1];break}}}else if(K.ltype===6){const V=n._lctf.coverageIndex(ee.mark1Coverage,W);if(V!==-1){const Y=B();if(Y!==-1){const Q=I[Y];if(M(L,Q)===3){const re=n._lctf.coverageIndex(ee.mark2Coverage,Q);if(re!==-1){const ne=ee.mark1Array[V],le=ee.mark2Array[re][ne.markClass];P[U*3]=le.x-ne.x+P[Y*3]-P[Y*3+2],P[U*3+1]=le.y-ne.y+P[Y*3+1];break}}}}}}}}else if(L.kern&&!L.cff){const j=B();if(j!==-1){const G=L.kern.glyph1.indexOf(I[j]);if(G!==-1){const K=L.kern.rval[G].glyph2.indexOf(W);K!==-1&&(P[j*3+2]+=L.kern.rval[G].vals[K])}}}}return P;function B(W){for(let X=U-1;X>=0;X--)if(I[X]!==-1&&(!W||W(I[X])))return X;return-1}function F(W){return M(L,W)===1}function z(W,X){for(let j=0;j<3;j++)P[X*3+j]+=W[j]||0}}function M(L,I){const P=L.GDEF&&L.GDEF.glyphClassDef;return P?n.U._getGlyphClass(I,P):0}function C(...L){for(let I=0;I<L.length;I++)if(typeof L[I]=="number")return L[I]}function R(L){const I=Object.create(null),P=L["OS/2"],U=L.hhea,B=L.head.unitsPerEm,F=C(P&&P.sTypoAscender,U&&U.ascender,B),z={unitsPerEm:B,ascender:F,descender:C(P&&P.sTypoDescender,U&&U.descender,0),capHeight:C(P&&P.sCapHeight,F),xHeight:C(P&&P.sxHeight,F),lineGap:C(P&&P.sTypoLineGap,U&&U.lineGap),supportsCodePoint(W){return n.U.codeToGlyph(L,W)>0},forEachGlyph(W,X,j,G){let K=0;const J=1/z.unitsPerEm*X,ee=T(L,W);let V=0;const Y=A(L,ee);return ee.forEach((Q,re)=>{if(Q!==-1){let ne=I[Q];if(!ne){const{cmds:le,crds:fe}=n.U.glyphToPath(L,Q);let pe="",Ee=0;for(let me=0,ve=le.length;me<ve;me++){const he=t[le[me]];pe+=le[me];for(let Ce=1;Ce<=he;Ce++)pe+=(Ce>1?",":"")+fe[Ee++]}let Te,xe,ge,oe;if(fe.length){Te=xe=1/0,ge=oe=-1/0;for(let me=0,ve=fe.length;me<ve;me+=2){let he=fe[me],Ce=fe[me+1];he<Te&&(Te=he),Ce<xe&&(xe=Ce),he>ge&&(ge=he),Ce>oe&&(oe=Ce)}}else Te=ge=xe=oe=0;ne=I[Q]={index:Q,advanceWidth:L.hmtx.aWidth[Q],xMin:Te,yMin:xe,xMax:ge,yMax:oe,path:pe}}G.call(null,ne,K+Y[re*3]*J,Y[re*3+1]*J,V),K+=Y[re*3+2]*J,j&&(K+=j*X)}V+=W.codePointAt(V)>65535?2:1}),K}};return z}return function(I){const P=new Uint8Array(I,0,4),U=n._bin.readASCII(P,0,4);if(U==="wOFF")I=e(I);else if(U==="wOF2")throw new Error("woff2 fonts not supported");return R(n.parse(I)[0])}}const jme=ev({name:"Typr Font Parser",dependencies:[Vme,Gme,Hme],init(n,e,t){const i=n(),r=e();return t(i,r)}});function Wme(){return(function(n){var e=function(){this.buckets=new Map};e.prototype.add=function(A){var M=A>>5;this.buckets.set(M,(this.buckets.get(M)||0)|1<<(31&A))},e.prototype.has=function(A){var M=this.buckets.get(A>>5);return M!==void 0&&(M&1<<(31&A))!=0},e.prototype.serialize=function(){var A=[];return this.buckets.forEach((function(M,C){A.push((+C).toString(36)+":"+M.toString(36))})),A.join(",")},e.prototype.deserialize=function(A){var M=this;this.buckets.clear(),A.split(",").forEach((function(C){var R=C.split(":");M.buckets.set(parseInt(R[0],36),parseInt(R[1],36))}))};var t=Math.pow(2,8),i=t-1,r=~i;function s(A){var M=(function(R){return R&r})(A).toString(16),C=(function(R){return(R&r)+t-1})(A).toString(16);return"codepoint-index/plane"+(A>>16)+"/"+M+"-"+C+".json"}function o(A,M){var C=A&i,R=M.codePointAt(C/6|0);return((R=(R||48)-48)&1<<C%6)!=0}function a(A,M){var C;(C=A,C.replace(/U\+/gi,"").replace(/^,+|,+$/g,"").split(/,+/).map((function(R){return R.split("-").map((function(L){return parseInt(L.trim(),16)}))}))).forEach((function(R){var L=R[0],I=R[1];I===void 0&&(I=L),M(L,I)}))}function l(A,M){a(A,(function(C,R){for(var L=C;L<=R;L++)M(L)}))}var u={},h={},p=new WeakMap,m="https://cdn.jsdelivr.net/gh/lojjic/unicode-font-resolver@v1.0.1/packages/data";function y(A){var M=p.get(A);return M||(M=new e,l(A.ranges,(function(C){return M.add(C)})),p.set(A,M)),M}var b,x=new Map;function S(A,M,C){return A[M]?M:A[C]?C:(function(R){for(var L in R)return L})(A)}function _(A,M){var C=M;if(!A.includes(C)){C=1/0;for(var R=0;R<A.length;R++)Math.abs(A[R]-M)<Math.abs(C-M)&&(C=A[R])}return C}function T(A){return b||(b=new Set,l("9-D,20,85,A0,1680,2000-200A,2028-202F,205F,3000",(function(M){b.add(M)}))),b.has(A)}return n.CodePointSet=e,n.clearCache=function(){u={},h={}},n.getFontsForString=function(A,M){M===void 0&&(M={});var C,R=M.lang;R===void 0&&(R=new RegExp("\\p{Script=Hangul}","u").test(C=A)?"ko":new RegExp("\\p{Script=Hiragana}|\\p{Script=Katakana}","u").test(C)?"ja":"en");var L=M.category;L===void 0&&(L="sans-serif");var I=M.style;I===void 0&&(I="normal");var P=M.weight;P===void 0&&(P=400);var U=(M.dataUrl||m).replace(/\/$/g,""),B=new Map,F=new Uint8Array(A.length),z={},W={},X=new Array(A.length),j=new Map,G=!1;function K(V){var Y=x.get(V);return Y||(Y=fetch(U+"/"+V).then((function(Q){if(!Q.ok)throw new Error(Q.statusText);return Q.json().then((function(re){if(!Array.isArray(re)||re[0]!==1)throw new Error("Incorrect schema version; need 1, got "+re[0]);return re[1]}))})).catch((function(Q){if(U!==m)return G||(console.error('unicode-font-resolver: Failed loading from dataUrl "'+U+'", trying default CDN. '+Q.message),G=!0),U=m,x.delete(V),K(V);throw Q})),x.set(V,Y)),Y}for(var J=function(V){var Y=A.codePointAt(V),Q=s(Y);X[V]=Q,u[Q]||j.has(Q)||j.set(Q,K(Q).then((function(re){u[Q]=re}))),Y>65535&&(V++,ee=V)},ee=0;ee<A.length;ee++)J(ee);return Promise.all(j.values()).then((function(){j.clear();for(var V=function(Q){var re=A.codePointAt(Q),ne=null,le=u[X[Q]],fe=void 0;for(var pe in le){var Ee=W[pe];if(Ee===void 0&&(Ee=W[pe]=new RegExp(pe).test(R||"en")),Ee){for(var Te in fe=pe,le[pe])if(o(re,le[pe][Te])){ne=Te;break}break}}if(!ne){e:for(var xe in le)if(xe!==fe){for(var ge in le[xe])if(o(re,le[xe][ge])){ne=ge;break e}}}ne||(console.debug("No font coverage for U+"+re.toString(16)),ne="latin"),X[Q]=ne,h[ne]||j.has(ne)||j.set(ne,K("font-meta/"+ne+".json").then((function(oe){h[ne]=oe}))),re>65535&&(Q++,Y=Q)},Y=0;Y<A.length;Y++)V(Y);return Promise.all(j.values())})).then((function(){for(var V,Y=null,Q=0;Q<A.length;Q++){var re=A.codePointAt(Q);if(Y&&(T(re)||y(Y).has(re)))F[Q]=F[Q-1];else{Y=h[X[Q]];var ne=z[Y.id];if(!ne){var le=Y.typeforms,fe=S(le,L,"sans-serif"),pe=S(le[fe],I,"normal"),Ee=_((V=le[fe])===null||V===void 0?void 0:V[pe],P);ne=z[Y.id]=U+"/font-files/"+Y.id+"/"+fe+"."+pe+"."+Ee+".woff"}var Te=B.get(ne);Te==null&&(Te=B.size,B.set(ne,Te)),F[Q]=Te}re>65535&&(Q++,F[Q]=F[Q-1])}return{fontUrls:Array.from(B.keys()),chars:F}}))},Object.defineProperty(n,"__esModule",{value:!0}),n})({})}function Xme(n,e){const t=Object.create(null),i=Object.create(null);function r(o,a){const l=u=>{console.error(`Failure loading font ${o}`,u)};try{const u=new XMLHttpRequest;u.open("get",o,!0),u.responseType="arraybuffer",u.onload=function(){if(u.status>=400)l(new Error(u.statusText));else if(u.status>0)try{const h=n(u.response);h.src=o,a(h)}catch(h){l(h)}},u.onerror=l,u.send()}catch(u){l(u)}}function s(o,a){let l=t[o];l?a(l):i[o]?i[o].push(a):(i[o]=[a],r(o,u=>{u.src=o,t[o]=u,i[o].forEach(h=>h(u)),delete i[o]}))}return function(o,a,{lang:l,fonts:u=[],style:h="normal",weight:p="normal",unicodeFontsURL:m}={}){const y=new Uint8Array(o.length),b=[];o.length||T();const x=new Map,S=[];if(h!=="italic"&&(h="normal"),typeof p!="number"&&(p=p==="bold"?700:400),u&&!Array.isArray(u)&&(u=[u]),u=u.slice().filter(M=>!M.lang||M.lang.test(l)).reverse(),u.length){let L=0;(function I(P=0){for(let U=P,B=o.length;U<B;U++){const F=o.codePointAt(U);if(L===1&&b[y[U-1]].supportsCodePoint(F)||U>0&&/\s/.test(o[U]))y[U]=y[U-1],L===2&&(S[S.length-1][1]=U);else for(let z=y[U],W=u.length;z<=W;z++)if(z===W){const X=L===2?S[S.length-1]:S[S.length]=[U,U];X[1]=U,L=2}else{y[U]=z;const{src:X,unicodeRange:j}=u[z];if(!j||A(F,j)){const G=t[X];if(!G){s(X,()=>{I(U)});return}if(G.supportsCodePoint(F)){let K=x.get(G);typeof K!="number"&&(K=b.length,b.push(G),x.set(G,K)),y[U]=K,L=1;break}}}F>65535&&U+1<B&&(y[U+1]=y[U],U++,L===2&&(S[S.length-1][1]=U))}_()})()}else S.push([0,o.length-1]),_();function _(){if(S.length){const M=S.map(C=>o.substring(C[0],C[1]+1)).join(`
`);e.getFontsForString(M,{lang:l||void 0,style:h,weight:p,dataUrl:m}).then(({fontUrls:C,chars:R})=>{const L=b.length;let I=0;S.forEach(U=>{for(let B=0,F=U[1]-U[0];B<=F;B++)y[U[0]+B]=R[I++]+L;I++});let P=0;C.forEach((U,B)=>{s(U,F=>{b[B+L]=F,++P===C.length&&T()})})})}else T()}function T(){a({chars:y,fonts:b})}function A(M,C){for(let R=0;R<C.length;R++){const[L,I=L]=C[R];if(L<=M&&M<=I)return!0}return!1}}}const qme=ev({name:"FontResolver",dependencies:[Xme,jme,Wme],init(n,e,t){return n(e,t())}});function Yme(n,e){const i=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,r="[^\\S\\u00A0]",s=new RegExp(`${r}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function o({text:b,lang:x,fonts:S,style:_,weight:T,preResolvedFonts:A,unicodeFontsURL:M},C){const R=({chars:L,fonts:I})=>{let P,U;const B=[];for(let F=0;F<L.length;F++)L[F]!==U?(U=L[F],B.push(P={start:F,end:F,fontObj:I[L[F]]})):P.end=F;C(B)};A?R(A):n(b,R,{lang:x,fonts:S,style:_,weight:T,unicodeFontsURL:M})}function a({text:b="",font:x,lang:S,sdfGlyphSize:_=64,fontSize:T=400,fontWeight:A=1,fontStyle:M="normal",letterSpacing:C=0,lineHeight:R="normal",maxWidth:L=1/0,direction:I,textAlign:P="left",textIndent:U=0,whiteSpace:B="normal",overflowWrap:F="normal",anchorX:z=0,anchorY:W=0,metricsOnly:X=!1,unicodeFontsURL:j,preResolvedFonts:G=null,includeCaretPositions:K=!1,chunkedBoundsSize:J=8192,colorRanges:ee=null},V){const Y=p(),Q={fontLoad:0,typesetting:0};b.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),b=b.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),T=+T,C=+C,L=+L,R=R||"normal",U=+U,o({text:b,lang:S,style:M,weight:A,fonts:typeof x=="string"?[{src:x}]:x,unicodeFontsURL:j,preResolvedFonts:G},re=>{Q.fontLoad=p()-Y;const ne=isFinite(L);let le=null,fe=null,pe=null,Ee=null,Te=null,xe=null,ge=null,oe=null,me=0,ve=0,he=B!=="nowrap";const Ce=new Map,Re=p();let Le=U,Ie=0,be=new m;const Je=[be];re.forEach(Oe=>{const{fontObj:Ae}=Oe,{ascender:et,descender:Ze,unitsPerEm:ft,lineGap:dt,capHeight:Xe,xHeight:Ke}=Ae;let nt=Ce.get(Ae);if(!nt){const qe=T/ft,st=R==="normal"?(et-Ze+dt)*qe:R*T,St=(st-(et-Ze)*qe)/2,Qe=Math.min(st,(et-Ze)*qe),Fe=(et+Ze)/2*qe+Qe/2;nt={index:Ce.size,src:Ae.src,fontObj:Ae,fontSizeMult:qe,unitsPerEm:ft,ascender:et*qe,descender:Ze*qe,capHeight:Xe*qe,xHeight:Ke*qe,lineHeight:st,baseline:-St-et*qe,caretTop:Fe,caretBottom:Fe-Qe},Ce.set(Ae,nt)}const{fontSizeMult:ct}=nt,ut=b.slice(Oe.start,Oe.end+1);let Vt,Se;Ae.forEachGlyph(ut,T,C,(qe,st,St,Qe)=>{st+=Ie,Qe+=Oe.start,Vt=st,Se=qe;const Fe=b.charAt(Qe),gt=qe.advanceWidth*ct,Ct=be.count;let Tt;if("isEmpty"in qe||(qe.isWhitespace=!!Fe&&new RegExp(r).test(Fe),qe.canBreakAfter=!!Fe&&s.test(Fe),qe.isEmpty=qe.xMin===qe.xMax||qe.yMin===qe.yMax||i.test(Fe)),!qe.isWhitespace&&!qe.isEmpty&&ve++,he&&ne&&!qe.isWhitespace&&st+gt+Le>L&&Ct){if(be.glyphAt(Ct-1).glyphObj.canBreakAfter)Tt=new m,Le=-st;else for(let Xn=Ct;Xn--;)if(Xn===0&&F==="break-word"){Tt=new m,Le=-st;break}else if(be.glyphAt(Xn).glyphObj.canBreakAfter){Tt=be.splitAt(Xn+1);const qn=Tt.glyphAt(0).x;Le-=qn;for(let ii=Tt.count;ii--;)Tt.glyphAt(ii).x-=qn;break}Tt&&(be.isSoftWrapped=!0,be=Tt,Je.push(be),me=L)}let Ft=be.glyphAt(be.count);Ft.glyphObj=qe,Ft.x=st+Le,Ft.y=St,Ft.width=gt,Ft.charIndex=Qe,Ft.fontData=nt,Fe===`
`&&(be=new m,Je.push(be),Le=-(st+gt+C*T)+U)}),Ie=Vt+Se.advanceWidth*ct+C*T});let te=0;Je.forEach(Oe=>{let Ae=!0;for(let et=Oe.count;et--;){const Ze=Oe.glyphAt(et);Ae&&!Ze.glyphObj.isWhitespace&&(Oe.width=Ze.x+Ze.width,Oe.width>me&&(me=Oe.width),Ae=!1);let{lineHeight:ft,capHeight:dt,xHeight:Xe,baseline:Ke}=Ze.fontData;ft>Oe.lineHeight&&(Oe.lineHeight=ft);const nt=Ke-Oe.baseline;nt<0&&(Oe.baseline+=nt,Oe.cap+=nt,Oe.ex+=nt),Oe.cap=Math.max(Oe.cap,Oe.baseline+dt),Oe.ex=Math.max(Oe.ex,Oe.baseline+Xe)}Oe.baseline-=te,Oe.cap-=te,Oe.ex-=te,te+=Oe.lineHeight});let Z=0,de=0;if(z&&(typeof z=="number"?Z=-z:typeof z=="string"&&(Z=-me*(z==="left"?0:z==="center"?.5:z==="right"?1:u(z)))),W&&(typeof W=="number"?de=-W:typeof W=="string"&&(de=W==="top"?0:W==="top-baseline"?-Je[0].baseline:W==="top-cap"?-Je[0].cap:W==="top-ex"?-Je[0].ex:W==="middle"?te/2:W==="bottom"?te:W==="bottom-baseline"?-Je[Je.length-1].baseline:u(W)*te)),!X){const Oe=e.getEmbeddingLevels(b,I);le=new Uint16Array(ve),fe=new Uint8Array(ve),pe=new Float32Array(ve*2),Ee={},ge=[1/0,1/0,-1/0,-1/0],oe=[],K&&(xe=new Float32Array(b.length*4)),ee&&(Te=new Uint8Array(ve*3));let Ae=0,et=-1,Ze=-1,ft,dt;if(Je.forEach((Xe,Ke)=>{let{count:nt,width:ct}=Xe;if(nt>0){let ut=0;for(let Qe=nt;Qe--&&Xe.glyphAt(Qe).glyphObj.isWhitespace;)ut++;let Vt=0,Se=0;if(P==="center")Vt=(me-ct)/2;else if(P==="right")Vt=me-ct;else if(P==="justify"&&Xe.isSoftWrapped){let Qe=0;for(let Fe=nt-ut;Fe--;)Xe.glyphAt(Fe).glyphObj.isWhitespace&&Qe++;Se=(me-ct)/Qe}if(Se||Vt){let Qe=0;for(let Fe=0;Fe<nt;Fe++){let gt=Xe.glyphAt(Fe);const Ct=gt.glyphObj;gt.x+=Vt+Qe,Se!==0&&Ct.isWhitespace&&Fe<nt-ut&&(Qe+=Se,gt.width+=Se)}}const qe=e.getReorderSegments(b,Oe,Xe.glyphAt(0).charIndex,Xe.glyphAt(Xe.count-1).charIndex);for(let Qe=0;Qe<qe.length;Qe++){const[Fe,gt]=qe[Qe];let Ct=1/0,Tt=-1/0;for(let Ft=0;Ft<nt;Ft++)if(Xe.glyphAt(Ft).charIndex>=Fe){let Xn=Ft,qn=Ft;for(;qn<nt;qn++){let ii=Xe.glyphAt(qn);if(ii.charIndex>gt)break;qn<nt-ut&&(Ct=Math.min(Ct,ii.x),Tt=Math.max(Tt,ii.x+ii.width))}for(let ii=Xn;ii<qn;ii++){const wi=Xe.glyphAt(ii);wi.x=Tt-(wi.x+wi.width-Ct)}break}}let st;const St=Qe=>st=Qe;for(let Qe=0;Qe<nt;Qe++){const Fe=Xe.glyphAt(Qe);st=Fe.glyphObj;const gt=st.index,Ct=Oe.levels[Fe.charIndex]&1;if(Ct){const Tt=e.getMirroredCharacter(b[Fe.charIndex]);Tt&&Fe.fontData.fontObj.forEachGlyph(Tt,0,0,St)}if(K){const{charIndex:Tt,fontData:Ft}=Fe,Xn=Fe.x+Z,qn=Fe.x+Fe.width+Z;xe[Tt*4]=Ct?qn:Xn,xe[Tt*4+1]=Ct?Xn:qn,xe[Tt*4+2]=Xe.baseline+Ft.caretBottom+de,xe[Tt*4+3]=Xe.baseline+Ft.caretTop+de;const ii=Tt-et;ii>1&&h(xe,et,ii),et=Tt}if(ee){const{charIndex:Tt}=Fe;for(;Tt>Ze;)Ze++,ee.hasOwnProperty(Ze)&&(dt=ee[Ze])}if(!st.isWhitespace&&!st.isEmpty){const Tt=Ae++,{fontSizeMult:Ft,src:Xn,index:qn}=Fe.fontData,ii=Ee[Xn]||(Ee[Xn]={});ii[gt]||(ii[gt]={path:st.path,pathBounds:[st.xMin,st.yMin,st.xMax,st.yMax]});const wi=Fe.x+Z,rs=Fe.y+Xe.baseline+de;pe[Tt*2]=wi,pe[Tt*2+1]=rs;const _r=wi+st.xMin*Ft,Ar=rs+st.yMin*Ft,Gr=wi+st.xMax*Ft,$i=rs+st.yMax*Ft;_r<ge[0]&&(ge[0]=_r),Ar<ge[1]&&(ge[1]=Ar),Gr>ge[2]&&(ge[2]=Gr),$i>ge[3]&&(ge[3]=$i),Tt%J===0&&(ft={start:Tt,end:Tt,rect:[1/0,1/0,-1/0,-1/0]},oe.push(ft)),ft.end++;const Jn=ft.rect;if(_r<Jn[0]&&(Jn[0]=_r),Ar<Jn[1]&&(Jn[1]=Ar),Gr>Jn[2]&&(Jn[2]=Gr),$i>Jn[3]&&(Jn[3]=$i),le[Tt]=gt,fe[Tt]=qn,ee){const $n=Tt*3;Te[$n]=dt>>16&255,Te[$n+1]=dt>>8&255,Te[$n+2]=dt&255}}}}}),xe){const Xe=b.length-et;Xe>1&&h(xe,et,Xe)}}const Ne=[];Ce.forEach(({index:Oe,src:Ae,unitsPerEm:et,ascender:Ze,descender:ft,lineHeight:dt,capHeight:Xe,xHeight:Ke})=>{Ne[Oe]={src:Ae,unitsPerEm:et,ascender:Ze,descender:ft,lineHeight:dt,capHeight:Xe,xHeight:Ke}}),Q.typesetting=p()-Re,V({glyphIds:le,glyphFontIndices:fe,glyphPositions:pe,glyphData:Ee,fontData:Ne,caretPositions:xe,glyphColors:Te,chunkedBounds:oe,fontSize:T,topBaseline:de+Je[0].baseline,blockBounds:[Z,de-te,Z+me,de],visibleBounds:ge,timings:Q})})}function l(b,x){a({...b,metricsOnly:!0},S=>{const[_,T,A,M]=S.blockBounds;x({width:A-_,height:M-T})})}function u(b){let x=b.match(/^([\d.]+)%$/),S=x?parseFloat(x[1]):NaN;return isNaN(S)?0:S/100}function h(b,x,S){const _=b[x*4],T=b[x*4+1],A=b[x*4+2],M=b[x*4+3],C=(T-_)/S;for(let R=0;R<S;R++){const L=(x+R)*4;b[L]=_+C*R,b[L+1]=_+C*(R+1),b[L+2]=A,b[L+3]=M}}function p(){return(self.performance||Date).now()}function m(){this.data=[]}const y=["glyphObj","x","y","width","charIndex","fontData"];return m.prototype={width:0,lineHeight:0,baseline:0,cap:0,ex:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/y.length)},glyphAt(b){let x=m.flyweight;return x.data=this.data,x.index=b,x},splitAt(b){let x=new m;return x.data=this.data.splice(b*y.length),x}},m.flyweight=y.reduce((b,x,S,_)=>(Object.defineProperty(b,x,{get(){return this.data[this.index*y.length+S]},set(T){this.data[this.index*y.length+S]=T}}),b),{data:null,index:0}),{typeset:a,measure:l}}const Wp=()=>(self.performance||Date).now(),eM=bG();let Nz;function $me(n,e,t,i,r,s,o,a,l,u,h=!0){return h?Kme(n,e,t,i,r,s,o,a,l,u).then(null,p=>(Nz||(console.warn("WebGL SDF generation failed, falling back to JS",p),Nz=!0),kz(n,e,t,i,r,s,o,a,l,u))):kz(n,e,t,i,r,s,o,a,l,u)}const fw=[],Zme=5;let nD=0;function xG(){const n=Wp();for(;fw.length&&Wp()-n<Zme;)fw.shift()();nD=fw.length?setTimeout(xG,0):0}const Kme=(...n)=>new Promise((e,t)=>{fw.push(()=>{const i=Wp();try{eM.webgl.generateIntoCanvas(...n),e({timing:Wp()-i})}catch(r){t(r)}}),nD||(nD=setTimeout(xG,0))}),Qme=4,Jme=2e3,Uz={};let ege=0;function kz(n,e,t,i,r,s,o,a,l,u){const h="TroikaTextSDFGenerator_JS_"+ege++%Qme;let p=Uz[h];return p||(p=Uz[h]={workerModule:ev({name:h,workerId:h,dependencies:[bG,Wp],init(m,y){const b=m().javascript.generate;return function(...x){const S=y();return{textureData:b(...x),timing:y()-S}}},getTransferables(m){return[m.textureData.buffer]}}),requests:0,idleTimer:null}),p.requests++,clearTimeout(p.idleTimer),p.workerModule(n,e,t,i,r,s).then(({textureData:m,timing:y})=>{const b=Wp(),x=new Uint8Array(m.length*4);for(let S=0;S<m.length;S++)x[S*4+u]=m[S];return eM.webglUtils.renderImageData(o,x,a,l,n,e,1<<3-u),y+=Wp()-b,--p.requests===0&&(p.idleTimer=setTimeout(()=>{Ome(h)},Jme)),{timing:y}})}function tge(n){n._warm||(eM.webgl.isSupported(n),n._warm=!0)}const nge=eM.webglUtils.resizeWebGLCanvasWithoutClearing,gb={unicodeFontsURL:null,sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},ige=new vt;function qg(){return(self.performance||Date).now()}const zz=Object.create(null);function SG(n,e){n=oge({},n);const t=qg(),i=[];if(n.font&&i.push({label:"user",src:age(n.font)}),n.font=i,n.text=""+n.text,n.sdfGlyphSize=n.sdfGlyphSize||gb.sdfGlyphSize,n.unicodeFontsURL=n.unicodeFontsURL||gb.unicodeFontsURL,n.colorRanges!=null){let m={};for(let y in n.colorRanges)if(n.colorRanges.hasOwnProperty(y)){let b=n.colorRanges[y];typeof b!="number"&&(b=ige.set(b).getHex()),m[y]=b}n.colorRanges=m}Object.freeze(n);const{textureWidth:r,sdfExponent:s}=gb,{sdfGlyphSize:o}=n,a=r/o*4;let l=zz[o];if(!l){const m=document.createElement("canvas");m.width=r,m.height=o*256/a,l=zz[o]={glyphCount:0,sdfGlyphSize:o,sdfCanvas:m,sdfTexture:new ur(m,void 0,void 0,void 0,br,br),contextLost:!1,glyphsByFont:new Map},l.sdfTexture.generateMipmaps=!1,rge(l)}const{sdfTexture:u,sdfCanvas:h}=l;TG(n).then(m=>{const{glyphIds:y,glyphFontIndices:b,fontData:x,glyphPositions:S,fontSize:_,timings:T}=m,A=[],M=new Float32Array(y.length*4);let C=0,R=0;const L=qg(),I=x.map(z=>{let W=l.glyphsByFont.get(z.src);return W||l.glyphsByFont.set(z.src,W=new Map),W});y.forEach((z,W)=>{const X=b[W],{src:j,unitsPerEm:G}=x[X];let K=I[X].get(z);if(!K){const{path:Q,pathBounds:re}=m.glyphData[j][z],ne=Math.max(re[2]-re[0],re[3]-re[1])/o*(gb.sdfMargin*o+.5),le=l.glyphCount++,fe=[re[0]-ne,re[1]-ne,re[2]+ne,re[3]+ne];I[X].set(z,K={path:Q,atlasIndex:le,sdfViewBox:fe}),A.push(K)}const{sdfViewBox:J}=K,ee=S[R++],V=S[R++],Y=_/G;M[C++]=ee+J[0]*Y,M[C++]=V+J[1]*Y,M[C++]=ee+J[2]*Y,M[C++]=V+J[3]*Y,y[W]=K.atlasIndex}),T.quads=(T.quads||0)+(qg()-L);const P=qg();T.sdf={};const U=h.height,B=Math.ceil(l.glyphCount/a),F=Math.pow(2,Math.ceil(Math.log2(B*o)));F>U&&(console.info(`Increasing SDF texture size ${U}->${F}`),nge(h,r,F),u.dispose()),Promise.all(A.map(z=>wG(z,l,n.gpuAccelerateSDF).then(({timing:W})=>{T.sdf[z.atlasIndex]=W}))).then(()=>{A.length&&!l.contextLost&&(EG(l),u.needsUpdate=!0),T.sdfTotal=qg()-P,T.total=qg()-t,e(Object.freeze({parameters:n,sdfTexture:u,sdfGlyphSize:o,sdfExponent:s,glyphBounds:M,glyphAtlasIndices:y,glyphColors:m.glyphColors,caretPositions:m.caretPositions,chunkedBounds:m.chunkedBounds,ascender:m.ascender,descender:m.descender,lineHeight:m.lineHeight,capHeight:m.capHeight,xHeight:m.xHeight,topBaseline:m.topBaseline,blockBounds:m.blockBounds,visibleBounds:m.visibleBounds,timings:m.timings}))})}),Promise.resolve().then(()=>{l.contextLost||tge(h)})}function wG({path:n,atlasIndex:e,sdfViewBox:t},{sdfGlyphSize:i,sdfCanvas:r,contextLost:s},o){if(s)return Promise.resolve({timing:-1});const{textureWidth:a,sdfExponent:l}=gb,u=Math.max(t[2]-t[0],t[3]-t[1]),h=Math.floor(e/4),p=h%(a/i)*i,m=Math.floor(h/(a/i))*i,y=e%4;return $me(i,i,n,t,u,l,r,p,m,y,o)}function rge(n){const e=n.sdfCanvas;e.addEventListener("webglcontextlost",t=>{console.log("Context Lost",t),t.preventDefault(),n.contextLost=!0}),e.addEventListener("webglcontextrestored",t=>{console.log("Context Restored",t),n.contextLost=!1;const i=[];n.glyphsByFont.forEach(r=>{r.forEach(s=>{i.push(wG(s,n,!0))})}),Promise.all(i).then(()=>{EG(n),n.sdfTexture.needsUpdate=!0})})}function sge({font:n,characters:e,sdfGlyphSize:t},i){let r=Array.isArray(e)?e.join(`
`):""+e;SG({font:n,sdfGlyphSize:t,text:r},i)}function oge(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}let WS;function age(n){return WS||(WS=typeof document>"u"?{}:document.createElement("a")),WS.href=n,WS.href}function EG(n){if(typeof createImageBitmap!="function"){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:e,sdfTexture:t}=n,{width:i,height:r}=e,s=n.sdfCanvas.getContext("webgl");let o=t.image.data;(!o||o.length!==i*r*4)&&(o=new Uint8Array(i*r*4),t.image={width:i,height:r,data:o},t.flipY=!1,t.isDataTexture=!0),s.readPixels(0,0,i,r,s.RGBA,s.UNSIGNED_BYTE,o)}}const lge=ev({name:"Typesetter",dependencies:[Yme,qme,Pme],init(n,e,t){return n(e,t())}}),TG=ev({name:"Typesetter",dependencies:[lge],init(n){return function(e){return new Promise(t=>{n.typeset(e,t)})}},getTransferables(n){const e=[];for(let t in n)n[t]&&n[t].buffer&&e.push(n[t].buffer);return e}});TG.onMainThread;const Fz={};function cge(n){let e=Fz[n];return e||(e=Fz[n]=new jf(1,1,n,n).translate(.5,.5,0)),e}const uge="aTroikaGlyphBounds",Bz="aTroikaGlyphIndex",fge="aTroikaGlyphColor";class hge extends VO{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new ts,this.boundingBox=new Vr}computeBoundingSphere(){}computeBoundingBox(){}set detail(e){if(e!==this._detail){this._detail=e,(typeof e!="number"||e<1)&&(e=1);let t=cge(e);["position","normal","uv"].forEach(i=>{this.attributes[i]=t.attributes[i].clone()}),this.setIndex(t.getIndex().clone())}}get detail(){return this._detail}set curveRadius(e){e!==this._curveRadius&&(this._curveRadius=e,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(e,t,i,r,s){this.updateAttributeData(uge,e,4),this.updateAttributeData(Bz,t,1),this.updateAttributeData(fge,s,3),this._blockBounds=i,this._chunkedBounds=r,this.instanceCount=t.length,this._updateBounds()}_updateBounds(){const e=this._blockBounds;if(e){const{curveRadius:t,boundingBox:i}=this;if(t){const{PI:r,floor:s,min:o,max:a,sin:l,cos:u}=Math,h=r/2,p=r*2,m=Math.abs(t),y=e[0]/m,b=e[2]/m,x=s((y+h)/p)!==s((b+h)/p)?-m:o(l(y)*m,l(b)*m),S=s((y-h)/p)!==s((b-h)/p)?m:a(l(y)*m,l(b)*m),_=s((y+r)/p)!==s((b+r)/p)?m*2:a(m-u(y)*m,m-u(b)*m);i.min.set(x,e[1],t<0?-_:0),i.max.set(S,e[3],t<0?0:_)}else i.min.set(e[0],e[1],0),i.max.set(e[2],e[3],0);i.getBoundingSphere(this.boundingSphere)}}applyClipRect(e){let t=this.getAttribute(Bz).count,i=this._chunkedBounds;if(i)for(let r=i.length;r--;){t=i[r].end;let s=i[r].rect;if(s[1]<e.w&&s[3]>e.y&&s[0]<e.z&&s[2]>e.x)break}this.instanceCount=t}updateAttributeData(e,t,i){const r=this.getAttribute(e);t?r&&r.array.length===t.length?(r.array.set(t),r.needsUpdate=!0):(this.setAttribute(e,new Qp(t,i)),delete this._maxInstanceCount,this.dispose()):r&&this.deleteAttribute(e)}}const dge=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaEdgeOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,pge=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaEdgeOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaEdgeOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,mge=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaEdgeOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,gge=`
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaEdgeOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`;function vge(n){const e=tD(n,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new ot},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new Vn(0,0,0,0)},uTroikaClipRect:{value:new Vn(0,0,0,0)},uTroikaEdgeOffset:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new ot},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new vt},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new cn},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:dge,vertexTransform:pge,fragmentDefs:mge,fragmentColorTransform:gge,customRewriter({vertexShader:t,fragmentShader:i}){let r=/\buniform\s+vec3\s+diffuse\b/;return r.test(i)&&(i=i.replace(r,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),r.test(t)||(t=t.replace(_G,`uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`))),{vertexShader:t,fragmentShader:i}}});return e.transparent=!0,e.forceSinglePass=!0,Object.defineProperties(e,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),e}const AL=new Hf({color:16777215,side:yr,transparent:!0}),Vz=8421504,Gz=new Kt,XS=new ae,lR=new ae,ib=[],yge=new ae,cR="+x+y";function Hz(n){return Array.isArray(n)?n[0]:n}let MG=()=>{const n=new Pi(new jf(1,1),AL);return MG=()=>n,n},AG=()=>{const n=new Pi(new jf(1,1,32,1),AL);return AG=()=>n,n};const bge={type:"syncstart"},_ge={type:"synccomplete"},CG=["font","fontSize","fontStyle","fontWeight","lang","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],xge=CG.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");let RG=class extends Pi{constructor(){const e=new hge;super(e,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.unicodeFontsURL=null,this.fontSize=.1,this.fontWeight="normal",this.fontStyle="normal",this.lang=null,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=Vz,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=cR,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(e){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(e):(this._isSyncing=!0,this.dispatchEvent(bge),SG({text:this.text,font:this.font,lang:this.lang,fontSize:this.fontSize||.1,fontWeight:this.fontWeight||"normal",fontStyle:this.fontStyle||"normal",letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF,unicodeFontsURL:this.unicodeFontsURL},t=>{this._isSyncing=!1,this._textRenderInfo=t,this.geometry.updateGlyphs(t.glyphBounds,t.glyphAtlasIndices,t.blockBounds,t.chunkedBounds,t.glyphColors);const i=this._queuedSyncs;i&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{i.forEach(r=>r&&r())})),this.dispatchEvent(_ge),e&&e()})))}onBeforeRender(e,t,i,r,s,o){this.sync(),s.isTroikaTextMaterial&&this._prepareForRender(s)}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}createDerivedMaterial(e){return vge(e)}get material(){let e=this._derivedMaterial;const t=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=AL.clone());if((!e||!e.isDerivedFrom(t))&&(e=this._derivedMaterial=this.createDerivedMaterial(t),t.addEventListener("dispose",function i(){t.removeEventListener("dispose",i),e.dispose()})),this.hasOutline()){let i=e._outlineMtl;return i||(i=e._outlineMtl=Object.create(e,{id:{value:e.id+.1}}),i.isTextOutlineMaterial=!0,i.depthWrite=!1,i.map=null,e.addEventListener("dispose",function r(){e.removeEventListener("dispose",r),i.dispose()})),[i,e]}else return e}set material(e){e&&e.isTroikaTextMaterial?(this._derivedMaterial=e,this._baseMaterial=e.baseMaterial):this._baseMaterial=e}hasOutline(){return!!(this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY)}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(e){this.geometry.detail=e}get curveRadius(){return this.geometry.curveRadius}set curveRadius(e){this.geometry.curveRadius=e}get customDepthMaterial(){return Hz(this.material).getDepthMaterial()}set customDepthMaterial(e){}get customDistanceMaterial(){return Hz(this.material).getDistanceMaterial()}set customDistanceMaterial(e){}_prepareForRender(e){const t=e.isTextOutlineMaterial,i=e.uniforms,r=this.textRenderInfo;if(r){const{sdfTexture:a,blockBounds:l}=r;i.uTroikaSDFTexture.value=a,i.uTroikaSDFTextureSize.value.set(a.image.width,a.image.height),i.uTroikaSDFGlyphSize.value=r.sdfGlyphSize,i.uTroikaSDFExponent.value=r.sdfExponent,i.uTroikaTotalBounds.value.fromArray(l),i.uTroikaUseGlyphColors.value=!t&&!!r.glyphColors;let u=0,h=0,p=0,m,y,b,x=0,S=0;if(t){let{outlineWidth:T,outlineOffsetX:A,outlineOffsetY:M,outlineBlur:C,outlineOpacity:R}=this;u=this._parsePercent(T)||0,h=Math.max(0,this._parsePercent(C)||0),m=R,x=this._parsePercent(A)||0,S=this._parsePercent(M)||0}else p=Math.max(0,this._parsePercent(this.strokeWidth)||0),p&&(b=this.strokeColor,i.uTroikaStrokeColor.value.set(b??Vz),y=this.strokeOpacity,y==null&&(y=1)),m=this.fillOpacity;i.uTroikaEdgeOffset.value=u,i.uTroikaPositionOffset.value.set(x,S),i.uTroikaBlurRadius.value=h,i.uTroikaStrokeWidth.value=p,i.uTroikaStrokeOpacity.value=y,i.uTroikaFillOpacity.value=m??1,i.uTroikaCurveRadius.value=this.curveRadius||0;let _=this.clipRect;if(_&&Array.isArray(_)&&_.length===4)i.uTroikaClipRect.value.fromArray(_);else{const T=(this.fontSize||.1)*100;i.uTroikaClipRect.value.set(l[0]-T,l[1]-T,l[2]+T,l[3]+T)}this.geometry.applyClipRect(i.uTroikaClipRect.value)}i.uTroikaSDFDebug.value=!!this.debugSDF,e.polygonOffset=!!this.depthOffset,e.polygonOffsetFactor=e.polygonOffsetUnits=this.depthOffset||0;const s=t?this.outlineColor||0:this.color;if(s==null)delete e.color;else{const a=e.hasOwnProperty("color")?e.color:e.color=new vt;(s!==a._input||typeof s=="object")&&a.set(a._input=s)}let o=this.orientation||cR;if(o!==e._orientation){let a=i.uTroikaOrient.value;o=o.replace(/[^-+xyz]/g,"");let l=o!==cR&&o.match(/^([-+])([xyz])([-+])([xyz])$/);if(l){let[,u,h,p,m]=l;XS.set(0,0,0)[h]=u==="-"?1:-1,lR.set(0,0,0)[m]=p==="-"?-1:1,Gz.lookAt(yge,XS.cross(lR),lR),a.setFromMatrix4(Gz)}else a.identity();e._orientation=o}}_parsePercent(e){if(typeof e=="string"){let t=e.match(/^(-?[\d.]+)%$/),i=t?parseFloat(t[1]):NaN;e=(isNaN(i)?0:i/100)*this.fontSize}return e}localPositionToTextCoords(e,t=new ot){t.copy(e);const i=this.curveRadius;return i&&(t.x=Math.atan2(e.x,Math.abs(i)-Math.abs(e.z))*Math.abs(i)),t}worldPositionToTextCoords(e,t=new ot){return XS.copy(e),this.localPositionToTextCoords(this.worldToLocal(XS),t)}raycast(e,t){const{textRenderInfo:i,curveRadius:r}=this;if(i){const s=i.blockBounds,o=r?AG():MG(),a=o.geometry,{position:l,uv:u}=a.attributes;for(let h=0;h<u.count;h++){let p=s[0]+u.getX(h)*(s[2]-s[0]);const m=s[1]+u.getY(h)*(s[3]-s[1]);let y=0;r&&(y=r-Math.cos(p/r)*r,p=Math.sin(p/r)*r),l.setXYZ(h,p,m,y)}a.boundingSphere=this.geometry.boundingSphere,a.boundingBox=this.geometry.boundingBox,o.matrixWorld=this.matrixWorld,o.material.side=this.material.side,ib.length=0,o.raycast(e,ib);for(let h=0;h<ib.length;h++)ib[h].object=this,t.push(ib[h])}}copy(e){const t=this.geometry;return super.copy(e),this.geometry=t,xge.forEach(i=>{this[i]=e[i]}),this}clone(){return new this.constructor().copy(this)}};CG.forEach(n=>{const e="_private_"+n;Object.defineProperty(RG.prototype,n,{get(){return this[e]},set(t){t!==this[e]&&(this[e]=t,this._needsSync=!0)}})});new Vr;new vt;const Sge=q.forwardRef(({sdfGlyphSize:n=64,anchorX:e="center",anchorY:t="middle",font:i,fontSize:r=1,children:s,characters:o,onSync:a,...l},u)=>{const h=Br(({invalidate:b})=>b),[p]=q.useState(()=>new RG),[m,y]=q.useMemo(()=>{const b=[];let x="";return q.Children.forEach(s,S=>{typeof S=="string"||typeof S=="number"?x+=S:b.push(S)}),[b,x]},[s]);return lce(()=>new Promise(b=>sge({font:i,characters:o},b)),["troika-text",i,o]),q.useLayoutEffect(()=>{p.sync(()=>{h(),a&&a(p)})}),q.useEffect(()=>()=>p.dispose(),[p]),q.createElement("primitive",od({object:p,ref:u,font:i,text:y,anchorX:e,anchorY:t,fontSize:r,sdfGlyphSize:n},l),m)}),Qc=1e-5;function wge(n,e,t){const i=new td,r=t-Qc;return i.absarc(Qc,Qc,Qc,-Math.PI/2,-Math.PI,!0),i.absarc(Qc,e-r*2,Qc,Math.PI,Math.PI/2,!0),i.absarc(n-r*2,e-r*2,Qc,Math.PI/2,0,!0),i.absarc(n-r*2,Qc,Qc,0,-Math.PI/2,!0),i}const jz=q.forwardRef(function({args:[e=1,t=1,i=1]=[],radius:r=.05,steps:s=1,smoothness:o=4,bevelSegments:a=4,creaseAngle:l=.4,children:u,...h},p){return q.createElement("mesh",od({ref:p},h),q.createElement(Ege,{args:[e,t,i],radius:r,steps:s,smoothness:o,bevelSegments:a,creaseAngle:l}),u)}),Ege=q.forwardRef(function({args:[e=1,t=1,i=1]=[],radius:r=.05,steps:s=1,smoothness:o=4,bevelSegments:a=4,creaseAngle:l=.4,...u},h){const p=q.useMemo(()=>wge(e,t,r),[e,t,r]),m=q.useMemo(()=>({depth:i-r*2,bevelEnabled:!0,bevelSegments:a*2,steps:s,bevelSize:r-Qc,bevelThickness:r,curveSegments:o}),[i,r,o,a,s]),y=q.useRef(null);return q.useLayoutEffect(()=>{y.current&&(y.current.center(),Cfe(y.current,l))},[p,m,l]),q.useImperativeHandle(h,()=>y.current),q.createElement("extrudeGeometry",od({ref:y,args:[p,m]},u))});var rb={exports:{}},Wz;function Tge(){if(Wz)return rb.exports;Wz=1;const n={ellipse:"",chars:[" ","-"],max:140,truncate:!0};function e(i,r,s,o){if(i.length<=r)return i;if(r<2)return i.slice(0,r-s.length)+s;const a=r-s.length,l=Math.floor(a/2);let u=l,h=i.length-l;for(let p=0;p<l;p++){const m=i.charAt(p),y=i.length-p,b=i.charAt(y);o.indexOf(m)!==-1&&(u=p),o.indexOf(b)!==-1&&(h=y)}return i.slice(0,u)+s+i.slice(h)}function t(i,r,s,o,a){if(i.length<=r)return i;const l=r-s.length;let u=l,h=!1;for(let p=0;p<=l;p++){const m=i.charAt(p);o.indexOf(m)!==-1&&(u=p,h=!0)}return!a&&!h?"":i.slice(0,u)+s}return rb.exports=(i,r,s)=>{if(typeof i!="string"||i.length===0||r===0)return"";s=s||{};for(var o in n)(s[o]===null||typeof s[o]>"u")&&(s[o]=n[o]);return s.max=r||s.max,s.truncate==="middle"?e(i,s.max,s.ellipse,s.chars):t(i,s.max,s.ellipse,s.chars,s.truncate)},rb.exports.ellipsizeMiddle=e,rb.exports.ellipsize=t,rb.exports}var Mge=Tge();const Age=Do(Mge);var uR,Xz;function Cge(){if(Xz)return uR;Xz=1;var n=aL(),e=Xf(),t={dimensions:["x","y"],center:.5,scale:1};function i(s,o,a){if(!e(o))throw new Error("graphology-layout/random: the given graph is not a valid graphology instance.");a=n(a,t);var l=a.dimensions;if(!Array.isArray(l)||l.length!==2)throw new Error("graphology-layout/random: given dimensions are invalid.");var u=a.center,h=a.scale,p=Math.PI*2,m=(u-.5)*h,y=o.order,b=l[0],x=l[1];function S(A,M){return M[b]=h*Math.cos(A*p/y)+m,M[x]=h*Math.sin(A*p/y)+m,M}var _=0;if(!s){var T={};return o.forEachNode(function(A){T[A]=S(_++,{})}),T}o.updateEachNodeAttributes(function(A,M){return S(_++,M),M},{attributes:l})}var r=i.bind(null,!1);return r.assign=i.bind(null,!0),uR=r,uR}var Rge=Cge();const Dge=Do(Rge);var fR,qz;function Oge(){if(qz)return fR;qz=1;var n=aL(),e=Xf(),t={dimensions:["x","y"],center:.5,rng:Math.random,scale:1};function i(s,o,a){if(!e(o))throw new Error("graphology-layout/random: the given graph is not a valid graphology instance.");a=n(a,t);var l=a.dimensions;if(!Array.isArray(l)||l.length<1)throw new Error("graphology-layout/random: given dimensions are invalid.");var u=l.length,h=a.center,p=a.rng,m=a.scale,y=(h-.5)*m;function b(S){for(var _=0;_<u;_++)S[l[_]]=p()*m+y;return S}if(!s){var x={};return o.forEachNode(function(S){x[S]=b({})}),x}o.updateEachNodeAttributes(function(S,_){return b(_),_},{attributes:l})}var r=i.bind(null,!1);return r.assign=i.bind(null,!0),fR=r,fR}var Lge=Oge();const Pge=Do(Lge);var hR,Yz;function Ige(){if(Yz)return hR;Yz=1;var n=0,e=1,t=2,i=3,r=4,s=5,o=6,a=7,l=8,u=9,h=0,p=1,m=2,y=0,b=1,x=2,S=3,_=4,T=5,A=6,M=7,C=8,R=3,L=10,I=3,P=9,U=10;return hR=function(F,z,W){var X,j,G,K,J,ee,V,Y,Q,re,ne=z.length,le=W.length,fe=F.adjustSizes,pe=F.barnesHutTheta*F.barnesHutTheta,Ee,Te,xe,ge,oe,me,ve,he=[];for(G=0;G<ne;G+=L)z[G+r]=z[G+t],z[G+s]=z[G+i],z[G+t]=0,z[G+i]=0;if(F.outboundAttractionDistribution){for(Ee=0,G=0;G<ne;G+=L)Ee+=z[G+o];Ee/=ne/L}if(F.barnesHutOptimize){var Ce=1/0,Re=-1/0,Le=1/0,Ie=-1/0,be,Je,te;for(G=0;G<ne;G+=L)Ce=Math.min(Ce,z[G+n]),Re=Math.max(Re,z[G+n]),Le=Math.min(Le,z[G+e]),Ie=Math.max(Ie,z[G+e]);var Z=Re-Ce,de=Ie-Le;for(Z>de?(Le-=(Z-de)/2,Ie=Le+Z):(Ce-=(de-Z)/2,Re=Ce+de),he[0+y]=-1,he[0+b]=(Ce+Re)/2,he[0+x]=(Le+Ie)/2,he[0+S]=Math.max(Re-Ce,Ie-Le),he[0+_]=-1,he[0+T]=-1,he[0+A]=0,he[0+M]=0,he[0+C]=0,X=1,G=0;G<ne;G+=L)for(j=0,te=R;;)if(he[j+T]>=0){z[G+n]<he[j+b]?z[G+e]<he[j+x]?be=he[j+T]:be=he[j+T]+P:z[G+e]<he[j+x]?be=he[j+T]+P*2:be=he[j+T]+P*3,he[j+M]=(he[j+M]*he[j+A]+z[G+n]*z[G+o])/(he[j+A]+z[G+o]),he[j+C]=(he[j+C]*he[j+A]+z[G+e]*z[G+o])/(he[j+A]+z[G+o]),he[j+A]+=z[G+o],j=be;continue}else if(he[j+y]<0){he[j+y]=G;break}else{if(he[j+T]=X*P,Y=he[j+S]/2,Q=he[j+T],he[Q+y]=-1,he[Q+b]=he[j+b]-Y,he[Q+x]=he[j+x]-Y,he[Q+S]=Y,he[Q+_]=Q+P,he[Q+T]=-1,he[Q+A]=0,he[Q+M]=0,he[Q+C]=0,Q+=P,he[Q+y]=-1,he[Q+b]=he[j+b]-Y,he[Q+x]=he[j+x]+Y,he[Q+S]=Y,he[Q+_]=Q+P,he[Q+T]=-1,he[Q+A]=0,he[Q+M]=0,he[Q+C]=0,Q+=P,he[Q+y]=-1,he[Q+b]=he[j+b]+Y,he[Q+x]=he[j+x]-Y,he[Q+S]=Y,he[Q+_]=Q+P,he[Q+T]=-1,he[Q+A]=0,he[Q+M]=0,he[Q+C]=0,Q+=P,he[Q+y]=-1,he[Q+b]=he[j+b]+Y,he[Q+x]=he[j+x]+Y,he[Q+S]=Y,he[Q+_]=he[j+_],he[Q+T]=-1,he[Q+A]=0,he[Q+M]=0,he[Q+C]=0,X+=4,z[he[j+y]+n]<he[j+b]?z[he[j+y]+e]<he[j+x]?be=he[j+T]:be=he[j+T]+P:z[he[j+y]+e]<he[j+x]?be=he[j+T]+P*2:be=he[j+T]+P*3,he[j+A]=z[he[j+y]+o],he[j+M]=z[he[j+y]+n],he[j+C]=z[he[j+y]+e],he[be+y]=he[j+y],he[j+y]=-1,z[G+n]<he[j+b]?z[G+e]<he[j+x]?Je=he[j+T]:Je=he[j+T]+P:z[G+e]<he[j+x]?Je=he[j+T]+P*2:Je=he[j+T]+P*3,be===Je)if(te--){j=be;continue}else{te=R;break}he[Je+y]=G;break}}if(F.barnesHutOptimize)for(Te=F.scalingRatio,G=0;G<ne;G+=L)for(j=0;;)if(he[j+T]>=0)if(me=Math.pow(z[G+n]-he[j+M],2)+Math.pow(z[G+e]-he[j+C],2),re=he[j+S],4*re*re/me<pe){if(xe=z[G+n]-he[j+M],ge=z[G+e]-he[j+C],fe===!0?me>0?(ve=Te*z[G+o]*he[j+A]/me,z[G+t]+=xe*ve,z[G+i]+=ge*ve):me<0&&(ve=-Te*z[G+o]*he[j+A]/Math.sqrt(me),z[G+t]+=xe*ve,z[G+i]+=ge*ve):me>0&&(ve=Te*z[G+o]*he[j+A]/me,z[G+t]+=xe*ve,z[G+i]+=ge*ve),j=he[j+_],j<0)break;continue}else{j=he[j+T];continue}else{if(ee=he[j+y],ee>=0&&ee!==G&&(xe=z[G+n]-z[ee+n],ge=z[G+e]-z[ee+e],me=xe*xe+ge*ge,fe===!0?me>0?(ve=Te*z[G+o]*z[ee+o]/me,z[G+t]+=xe*ve,z[G+i]+=ge*ve):me<0&&(ve=-Te*z[G+o]*z[ee+o]/Math.sqrt(me),z[G+t]+=xe*ve,z[G+i]+=ge*ve):me>0&&(ve=Te*z[G+o]*z[ee+o]/me,z[G+t]+=xe*ve,z[G+i]+=ge*ve)),j=he[j+_],j<0)break;continue}else for(Te=F.scalingRatio,K=0;K<ne;K+=L)for(J=0;J<K;J+=L)xe=z[K+n]-z[J+n],ge=z[K+e]-z[J+e],fe===!0?(me=Math.sqrt(xe*xe+ge*ge)-z[K+l]-z[J+l],me>0?(ve=Te*z[K+o]*z[J+o]/me/me,z[K+t]+=xe*ve,z[K+i]+=ge*ve,z[J+t]-=xe*ve,z[J+i]-=ge*ve):me<0&&(ve=100*Te*z[K+o]*z[J+o],z[K+t]+=xe*ve,z[K+i]+=ge*ve,z[J+t]-=xe*ve,z[J+i]-=ge*ve)):(me=Math.sqrt(xe*xe+ge*ge),me>0&&(ve=Te*z[K+o]*z[J+o]/me/me,z[K+t]+=xe*ve,z[K+i]+=ge*ve,z[J+t]-=xe*ve,z[J+i]-=ge*ve));for(Q=F.gravity/F.scalingRatio,Te=F.scalingRatio,G=0;G<ne;G+=L)ve=0,xe=z[G+n],ge=z[G+e],me=Math.sqrt(Math.pow(xe,2)+Math.pow(ge,2)),F.strongGravityMode?me>0&&(ve=Te*z[G+o]*Q):me>0&&(ve=Te*z[G+o]*Q/me),z[G+t]-=xe*ve,z[G+i]-=ge*ve;for(Te=1*(F.outboundAttractionDistribution?Ee:1),V=0;V<le;V+=I)K=W[V+h],J=W[V+p],Y=W[V+m],oe=Math.pow(Y,F.edgeWeightInfluence),xe=z[K+n]-z[J+n],ge=z[K+e]-z[J+e],fe===!0?(me=Math.sqrt(xe*xe+ge*ge)-z[K+l]-z[J+l],F.linLogMode?F.outboundAttractionDistribution?me>0&&(ve=-Te*oe*Math.log(1+me)/me/z[K+o]):me>0&&(ve=-Te*oe*Math.log(1+me)/me):F.outboundAttractionDistribution?me>0&&(ve=-Te*oe/z[K+o]):me>0&&(ve=-Te*oe)):(me=Math.sqrt(Math.pow(xe,2)+Math.pow(ge,2)),F.linLogMode?F.outboundAttractionDistribution?me>0&&(ve=-Te*oe*Math.log(1+me)/me/z[K+o]):me>0&&(ve=-Te*oe*Math.log(1+me)/me):F.outboundAttractionDistribution?(me=1,ve=-Te*oe/z[K+o]):(me=1,ve=-Te*oe)),me>0&&(z[K+t]+=xe*ve,z[K+i]+=ge*ve,z[J+t]-=xe*ve,z[J+i]-=ge*ve);var Ne,Oe,Ae,et,Ze,ft;if(fe===!0)for(G=0;G<ne;G+=L)z[G+u]!==1&&(Ne=Math.sqrt(Math.pow(z[G+t],2)+Math.pow(z[G+i],2)),Ne>U&&(z[G+t]=z[G+t]*U/Ne,z[G+i]=z[G+i]*U/Ne),Oe=z[G+o]*Math.sqrt((z[G+r]-z[G+t])*(z[G+r]-z[G+t])+(z[G+s]-z[G+i])*(z[G+s]-z[G+i])),Ae=Math.sqrt((z[G+r]+z[G+t])*(z[G+r]+z[G+t])+(z[G+s]+z[G+i])*(z[G+s]+z[G+i]))/2,et=.1*Math.log(1+Ae)/(1+Math.sqrt(Oe)),Ze=z[G+n]+z[G+t]*(et/F.slowDown),z[G+n]=Ze,ft=z[G+e]+z[G+i]*(et/F.slowDown),z[G+e]=ft);else for(G=0;G<ne;G+=L)z[G+u]!==1&&(Oe=z[G+o]*Math.sqrt((z[G+r]-z[G+t])*(z[G+r]-z[G+t])+(z[G+s]-z[G+i])*(z[G+s]-z[G+i])),Ae=Math.sqrt((z[G+r]+z[G+t])*(z[G+r]+z[G+t])+(z[G+s]+z[G+i])*(z[G+s]+z[G+i]))/2,et=z[G+a]*Math.log(1+Ae)/(1+Math.sqrt(Oe)),z[G+a]=Math.min(1,Math.sqrt(et*(Math.pow(z[G+t],2)+Math.pow(z[G+i],2))/(1+Math.sqrt(Oe)))),Ze=z[G+n]+z[G+t]*(et/F.slowDown),z[G+n]=Ze,ft=z[G+e]+z[G+i]*(et/F.slowDown),z[G+e]=ft);return{}},hR}var mf={},$z;function Nge(){if($z)return mf;$z=1;var n=10,e=3;return mf.assign=function(t){t=t||{};var i=Array.prototype.slice.call(arguments).slice(1),r,s,o;for(r=0,o=i.length;r<o;r++)if(i[r])for(s in i[r])t[s]=i[r][s];return t},mf.validateSettings=function(t){return"linLogMode"in t&&typeof t.linLogMode!="boolean"?{message:"the `linLogMode` setting should be a boolean."}:"outboundAttractionDistribution"in t&&typeof t.outboundAttractionDistribution!="boolean"?{message:"the `outboundAttractionDistribution` setting should be a boolean."}:"adjustSizes"in t&&typeof t.adjustSizes!="boolean"?{message:"the `adjustSizes` setting should be a boolean."}:"edgeWeightInfluence"in t&&typeof t.edgeWeightInfluence!="number"?{message:"the `edgeWeightInfluence` setting should be a number."}:"scalingRatio"in t&&!(typeof t.scalingRatio=="number"&&t.scalingRatio>=0)?{message:"the `scalingRatio` setting should be a number >= 0."}:"strongGravityMode"in t&&typeof t.strongGravityMode!="boolean"?{message:"the `strongGravityMode` setting should be a boolean."}:"gravity"in t&&!(typeof t.gravity=="number"&&t.gravity>=0)?{message:"the `gravity` setting should be a number >= 0."}:"slowDown"in t&&!(typeof t.slowDown=="number"||t.slowDown>=0)?{message:"the `slowDown` setting should be a number >= 0."}:"barnesHutOptimize"in t&&typeof t.barnesHutOptimize!="boolean"?{message:"the `barnesHutOptimize` setting should be a boolean."}:"barnesHutTheta"in t&&!(typeof t.barnesHutTheta=="number"&&t.barnesHutTheta>=0)?{message:"the `barnesHutTheta` setting should be a number >= 0."}:null},mf.graphToByteArrays=function(t,i){var r=t.order,s=t.size,o={},a,l=new Float32Array(r*n),u=new Float32Array(s*e);return a=0,t.forEachNode(function(h,p){o[h]=a,l[a]=p.x,l[a+1]=p.y,l[a+2]=0,l[a+3]=0,l[a+4]=0,l[a+5]=0,l[a+6]=1,l[a+7]=1,l[a+8]=p.size||1,l[a+9]=p.fixed?1:0,a+=n}),a=0,t.forEachEdge(function(h,p,m,y,b,x,S){var _=o[m],T=o[y],A=i(h,p,m,y,b,x,S);l[_+6]+=A,l[T+6]+=A,u[a]=_,u[a+1]=T,u[a+2]=A,a+=e}),{nodes:l,edges:u}},mf.assignLayoutChanges=function(t,i,r){var s=0;t.updateEachNodeAttributes(function(o,a){return a.x=i[s],a.y=i[s+1],s+=n,r?r(o,a):a})},mf.readGraphPositions=function(t,i){var r=0;t.forEachNode(function(s,o){i[r]=o.x,i[r+1]=o.y,r+=n})},mf.collectLayoutChanges=function(t,i,r){for(var s=t.nodes(),o={},a=0,l=0,u=i.length;a<u;a+=n){if(r){var h=Object.assign({},t.getNodeAttributes(s[l]));h.x=i[a],h.y=i[a+1],h=r(s[l],h),o[s[l]]={x:h.x,y:h.y}}else o[s[l]]={x:i[a],y:i[a+1]};l++}return o},mf.createWorker=function(i){var r=window.URL||window.webkitURL,s=i.toString(),o=r.createObjectURL(new Blob(["("+s+").call(this);"],{type:"text/javascript"})),a=new Worker(o);return r.revokeObjectURL(o),a},mf}var dR,Zz;function Uge(){return Zz||(Zz=1,dR={linLogMode:!1,outboundAttractionDistribution:!1,adjustSizes:!1,edgeWeightInfluence:1,scalingRatio:1,strongGravityMode:!1,gravity:1,slowDown:1,barnesHutOptimize:!1,barnesHutTheta:.5}),dR}var pR,Kz;function kge(){if(Kz)return pR;Kz=1;var n=Xf(),e=WT().createEdgeWeightGetter,t=Ige(),i=Nge(),r=Uge();function s(l,u,h){if(!n(u))throw new Error("graphology-layout-forceatlas2: the given graph is not a valid graphology instance.");typeof h=="number"&&(h={iterations:h});var p=h.iterations;if(typeof p!="number")throw new Error("graphology-layout-forceatlas2: invalid number of iterations.");if(p<=0)throw new Error("graphology-layout-forceatlas2: you should provide a positive number of iterations.");var m=e("getEdgeWeight"in h?h.getEdgeWeight:"weight").fromEntry,y=typeof h.outputReducer=="function"?h.outputReducer:null,b=i.assign({},r,h.settings),x=i.validateSettings(b);if(x)throw new Error("graphology-layout-forceatlas2: "+x.message);var S=i.graphToByteArrays(u,m),_;for(_=0;_<p;_++)t(b,S.nodes,S.edges);if(l){i.assignLayoutChanges(u,S.nodes,y);return}return i.collectLayoutChanges(u,S.nodes)}function o(l){var u=typeof l=="number"?l:l.order;return{barnesHutOptimize:u>2e3,strongGravityMode:!0,gravity:.05,scalingRatio:10,slowDown:1+Math.log(u)}}var a=s.bind(null,!1);return a.assign=s.bind(null,!0),a.inferSettings=o,pR=a,pR}var zge=kge();const Fge=Do(zge);function Bge(n,e,t){var i,r=1;n==null&&(n=0),e==null&&(e=0),t==null&&(t=0);function s(){var o,a=i.length,l,u=0,h=0,p=0;for(o=0;o<a;++o)l=i[o],u+=l.x||0,h+=l.y||0,p+=l.z||0;for(u=(u/a-n)*r,h=(h/a-e)*r,p=(p/a-t)*r,o=0;o<a;++o)l=i[o],u&&(l.x-=u),h&&(l.y-=h),p&&(l.z-=p)}return s.initialize=function(o){i=o},s.x=function(o){return arguments.length?(n=+o,s):n},s.y=function(o){return arguments.length?(e=+o,s):e},s.z=function(o){return arguments.length?(t=+o,s):t},s.strength=function(o){return arguments.length?(r=+o,s):r},s}function Vge(n){const e=+this._x.call(null,n);return DG(this.cover(e),e,n)}function DG(n,e,t){if(isNaN(e))return n;var i,r=n._root,s={data:t},o=n._x0,a=n._x1,l,u,h,p,m;if(!r)return n._root=s,n;for(;r.length;)if((h=e>=(l=(o+a)/2))?o=l:a=l,i=r,!(r=r[p=+h]))return i[p]=s,n;if(u=+n._x.call(null,r.data),e===u)return s.next=r,i?i[p]=s:n._root=s,n;do i=i?i[p]=new Array(2):n._root=new Array(2),(h=e>=(l=(o+a)/2))?o=l:a=l;while((p=+h)==(m=+(u>=l)));return i[m]=r,i[p]=s,n}function Gge(n){Array.isArray(n)||(n=Array.from(n));const e=n.length,t=new Float64Array(e);let i=1/0,r=-1/0;for(let s=0,o;s<e;++s)isNaN(o=+this._x.call(null,n[s]))||(t[s]=o,o<i&&(i=o),o>r&&(r=o));if(i>r)return this;this.cover(i).cover(r);for(let s=0;s<e;++s)DG(this,t[s],n[s]);return this}function Hge(n){if(isNaN(n=+n))return this;var e=this._x0,t=this._x1;if(isNaN(e))t=(e=Math.floor(n))+1;else{for(var i=t-e||1,r=this._root,s,o;e>n||n>=t;)switch(o=+(n<e),s=new Array(2),s[o]=r,r=s,i*=2,o){case 0:t=e+i;break;case 1:e=t-i;break}this._root&&this._root.length&&(this._root=r)}return this._x0=e,this._x1=t,this}function jge(){var n=[];return this.visit(function(e){if(!e.length)do n.push(e.data);while(e=e.next)}),n}function Wge(n){return arguments.length?this.cover(+n[0][0]).cover(+n[1][0]):isNaN(this._x0)?void 0:[[this._x0],[this._x1]]}function Pf(n,e,t){this.node=n,this.x0=e,this.x1=t}function Xge(n,e){var t,i=this._x0,r,s,o=this._x1,a=[],l=this._root,u,h;for(l&&a.push(new Pf(l,i,o)),e==null?e=1/0:(i=n-e,o=n+e);u=a.pop();)if(!(!(l=u.node)||(r=u.x0)>o||(s=u.x1)<i))if(l.length){var p=(r+s)/2;a.push(new Pf(l[1],p,s),new Pf(l[0],r,p)),(h=+(n>=p))&&(u=a[a.length-1],a[a.length-1]=a[a.length-1-h],a[a.length-1-h]=u)}else{var m=Math.abs(n-+this._x.call(null,l.data));m<e&&(e=m,i=n-m,o=n+m,t=l.data)}return t}function qge(n){if(isNaN(l=+this._x.call(null,n)))return this;var e,t=this._root,i,r,s,o=this._x0,a=this._x1,l,u,h,p,m;if(!t)return this;if(t.length)for(;;){if((h=l>=(u=(o+a)/2))?o=u:a=u,e=t,!(t=t[p=+h]))return this;if(!t.length)break;e[p+1&1]&&(i=e,m=p)}for(;t.data!==n;)if(r=t,!(t=t.next))return this;return(s=t.next)&&delete t.next,r?(s?r.next=s:delete r.next,this):e?(s?e[p]=s:delete e[p],(t=e[0]||e[1])&&t===(e[1]||e[0])&&!t.length&&(i?i[m]=t:this._root=t),this):(this._root=s,this)}function Yge(n){for(var e=0,t=n.length;e<t;++e)this.remove(n[e]);return this}function $ge(){return this._root}function Zge(){var n=0;return this.visit(function(e){if(!e.length)do++n;while(e=e.next)}),n}function Kge(n){var e=[],t,i=this._root,r,s,o;for(i&&e.push(new Pf(i,this._x0,this._x1));t=e.pop();)if(!n(i=t.node,s=t.x0,o=t.x1)&&i.length){var a=(s+o)/2;(r=i[1])&&e.push(new Pf(r,a,o)),(r=i[0])&&e.push(new Pf(r,s,a))}return this}function Qge(n){var e=[],t=[],i;for(this._root&&e.push(new Pf(this._root,this._x0,this._x1));i=e.pop();){var r=i.node;if(r.length){var s,o=i.x0,a=i.x1,l=(o+a)/2;(s=r[0])&&e.push(new Pf(s,o,l)),(s=r[1])&&e.push(new Pf(s,l,a))}t.push(i)}for(;i=t.pop();)n(i.node,i.x0,i.x1);return this}function Jge(n){return n[0]}function e0e(n){return arguments.length?(this._x=n,this):this._x}function CL(n,e){var t=new RL(e??Jge,NaN,NaN);return n==null?t:t.addAll(n)}function RL(n,e,t){this._x=n,this._x0=e,this._x1=t,this._root=void 0}function Qz(n){for(var e={data:n.data},t=e;n=n.next;)t=t.next={data:n.data};return e}var fa=CL.prototype=RL.prototype;fa.copy=function(){var n=new RL(this._x,this._x0,this._x1),e=this._root,t,i;if(!e)return n;if(!e.length)return n._root=Qz(e),n;for(t=[{source:e,target:n._root=new Array(2)}];e=t.pop();)for(var r=0;r<2;++r)(i=e.source[r])&&(i.length?t.push({source:i,target:e.target[r]=new Array(2)}):e.target[r]=Qz(i));return n};fa.add=Vge;fa.addAll=Gge;fa.cover=Hge;fa.data=jge;fa.extent=Wge;fa.find=Xge;fa.remove=qge;fa.removeAll=Yge;fa.root=$ge;fa.size=Zge;fa.visit=Kge;fa.visitAfter=Qge;fa.x=e0e;function t0e(n){const e=+this._x.call(null,n),t=+this._y.call(null,n);return OG(this.cover(e,t),e,t,n)}function OG(n,e,t,i){if(isNaN(e)||isNaN(t))return n;var r,s=n._root,o={data:i},a=n._x0,l=n._y0,u=n._x1,h=n._y1,p,m,y,b,x,S,_,T;if(!s)return n._root=o,n;for(;s.length;)if((x=e>=(p=(a+u)/2))?a=p:u=p,(S=t>=(m=(l+h)/2))?l=m:h=m,r=s,!(s=s[_=S<<1|x]))return r[_]=o,n;if(y=+n._x.call(null,s.data),b=+n._y.call(null,s.data),e===y&&t===b)return o.next=s,r?r[_]=o:n._root=o,n;do r=r?r[_]=new Array(4):n._root=new Array(4),(x=e>=(p=(a+u)/2))?a=p:u=p,(S=t>=(m=(l+h)/2))?l=m:h=m;while((_=S<<1|x)===(T=(b>=m)<<1|y>=p));return r[T]=s,r[_]=o,n}function n0e(n){var e,t,i=n.length,r,s,o=new Array(i),a=new Array(i),l=1/0,u=1/0,h=-1/0,p=-1/0;for(t=0;t<i;++t)isNaN(r=+this._x.call(null,e=n[t]))||isNaN(s=+this._y.call(null,e))||(o[t]=r,a[t]=s,r<l&&(l=r),r>h&&(h=r),s<u&&(u=s),s>p&&(p=s));if(l>h||u>p)return this;for(this.cover(l,u).cover(h,p),t=0;t<i;++t)OG(this,o[t],a[t],n[t]);return this}function i0e(n,e){if(isNaN(n=+n)||isNaN(e=+e))return this;var t=this._x0,i=this._y0,r=this._x1,s=this._y1;if(isNaN(t))r=(t=Math.floor(n))+1,s=(i=Math.floor(e))+1;else{for(var o=r-t||1,a=this._root,l,u;t>n||n>=r||i>e||e>=s;)switch(u=(e<i)<<1|n<t,l=new Array(4),l[u]=a,a=l,o*=2,u){case 0:r=t+o,s=i+o;break;case 1:t=r-o,s=i+o;break;case 2:r=t+o,i=s-o;break;case 3:t=r-o,i=s-o;break}this._root&&this._root.length&&(this._root=a)}return this._x0=t,this._y0=i,this._x1=r,this._y1=s,this}function r0e(){var n=[];return this.visit(function(e){if(!e.length)do n.push(e.data);while(e=e.next)}),n}function s0e(n){return arguments.length?this.cover(+n[0][0],+n[0][1]).cover(+n[1][0],+n[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Eo(n,e,t,i,r){this.node=n,this.x0=e,this.y0=t,this.x1=i,this.y1=r}function o0e(n,e,t){var i,r=this._x0,s=this._y0,o,a,l,u,h=this._x1,p=this._y1,m=[],y=this._root,b,x;for(y&&m.push(new Eo(y,r,s,h,p)),t==null?t=1/0:(r=n-t,s=e-t,h=n+t,p=e+t,t*=t);b=m.pop();)if(!(!(y=b.node)||(o=b.x0)>h||(a=b.y0)>p||(l=b.x1)<r||(u=b.y1)<s))if(y.length){var S=(o+l)/2,_=(a+u)/2;m.push(new Eo(y[3],S,_,l,u),new Eo(y[2],o,_,S,u),new Eo(y[1],S,a,l,_),new Eo(y[0],o,a,S,_)),(x=(e>=_)<<1|n>=S)&&(b=m[m.length-1],m[m.length-1]=m[m.length-1-x],m[m.length-1-x]=b)}else{var T=n-+this._x.call(null,y.data),A=e-+this._y.call(null,y.data),M=T*T+A*A;if(M<t){var C=Math.sqrt(t=M);r=n-C,s=e-C,h=n+C,p=e+C,i=y.data}}return i}function a0e(n){if(isNaN(h=+this._x.call(null,n))||isNaN(p=+this._y.call(null,n)))return this;var e,t=this._root,i,r,s,o=this._x0,a=this._y0,l=this._x1,u=this._y1,h,p,m,y,b,x,S,_;if(!t)return this;if(t.length)for(;;){if((b=h>=(m=(o+l)/2))?o=m:l=m,(x=p>=(y=(a+u)/2))?a=y:u=y,e=t,!(t=t[S=x<<1|b]))return this;if(!t.length)break;(e[S+1&3]||e[S+2&3]||e[S+3&3])&&(i=e,_=S)}for(;t.data!==n;)if(r=t,!(t=t.next))return this;return(s=t.next)&&delete t.next,r?(s?r.next=s:delete r.next,this):e?(s?e[S]=s:delete e[S],(t=e[0]||e[1]||e[2]||e[3])&&t===(e[3]||e[2]||e[1]||e[0])&&!t.length&&(i?i[_]=t:this._root=t),this):(this._root=s,this)}function l0e(n){for(var e=0,t=n.length;e<t;++e)this.remove(n[e]);return this}function c0e(){return this._root}function u0e(){var n=0;return this.visit(function(e){if(!e.length)do++n;while(e=e.next)}),n}function f0e(n){var e=[],t,i=this._root,r,s,o,a,l;for(i&&e.push(new Eo(i,this._x0,this._y0,this._x1,this._y1));t=e.pop();)if(!n(i=t.node,s=t.x0,o=t.y0,a=t.x1,l=t.y1)&&i.length){var u=(s+a)/2,h=(o+l)/2;(r=i[3])&&e.push(new Eo(r,u,h,a,l)),(r=i[2])&&e.push(new Eo(r,s,h,u,l)),(r=i[1])&&e.push(new Eo(r,u,o,a,h)),(r=i[0])&&e.push(new Eo(r,s,o,u,h))}return this}function h0e(n){var e=[],t=[],i;for(this._root&&e.push(new Eo(this._root,this._x0,this._y0,this._x1,this._y1));i=e.pop();){var r=i.node;if(r.length){var s,o=i.x0,a=i.y0,l=i.x1,u=i.y1,h=(o+l)/2,p=(a+u)/2;(s=r[0])&&e.push(new Eo(s,o,a,h,p)),(s=r[1])&&e.push(new Eo(s,h,a,l,p)),(s=r[2])&&e.push(new Eo(s,o,p,h,u)),(s=r[3])&&e.push(new Eo(s,h,p,l,u))}t.push(i)}for(;i=t.pop();)n(i.node,i.x0,i.y0,i.x1,i.y1);return this}function d0e(n){return n[0]}function p0e(n){return arguments.length?(this._x=n,this):this._x}function m0e(n){return n[1]}function g0e(n){return arguments.length?(this._y=n,this):this._y}function DL(n,e,t){var i=new OL(e??d0e,t??m0e,NaN,NaN,NaN,NaN);return n==null?i:i.addAll(n)}function OL(n,e,t,i,r,s){this._x=n,this._y=e,this._x0=t,this._y0=i,this._x1=r,this._y1=s,this._root=void 0}function Jz(n){for(var e={data:n.data},t=e;n=n.next;)t=t.next={data:n.data};return e}var Lo=DL.prototype=OL.prototype;Lo.copy=function(){var n=new OL(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,t,i;if(!e)return n;if(!e.length)return n._root=Jz(e),n;for(t=[{source:e,target:n._root=new Array(4)}];e=t.pop();)for(var r=0;r<4;++r)(i=e.source[r])&&(i.length?t.push({source:i,target:e.target[r]=new Array(4)}):e.target[r]=Jz(i));return n};Lo.add=t0e;Lo.addAll=n0e;Lo.cover=i0e;Lo.data=r0e;Lo.extent=s0e;Lo.find=o0e;Lo.remove=a0e;Lo.removeAll=l0e;Lo.root=c0e;Lo.size=u0e;Lo.visit=f0e;Lo.visitAfter=h0e;Lo.x=p0e;Lo.y=g0e;function v0e(n){const e=+this._x.call(null,n),t=+this._y.call(null,n),i=+this._z.call(null,n);return LG(this.cover(e,t,i),e,t,i,n)}function LG(n,e,t,i,r){if(isNaN(e)||isNaN(t)||isNaN(i))return n;var s,o=n._root,a={data:r},l=n._x0,u=n._y0,h=n._z0,p=n._x1,m=n._y1,y=n._z1,b,x,S,_,T,A,M,C,R,L,I;if(!o)return n._root=a,n;for(;o.length;)if((M=e>=(b=(l+p)/2))?l=b:p=b,(C=t>=(x=(u+m)/2))?u=x:m=x,(R=i>=(S=(h+y)/2))?h=S:y=S,s=o,!(o=o[L=R<<2|C<<1|M]))return s[L]=a,n;if(_=+n._x.call(null,o.data),T=+n._y.call(null,o.data),A=+n._z.call(null,o.data),e===_&&t===T&&i===A)return a.next=o,s?s[L]=a:n._root=a,n;do s=s?s[L]=new Array(8):n._root=new Array(8),(M=e>=(b=(l+p)/2))?l=b:p=b,(C=t>=(x=(u+m)/2))?u=x:m=x,(R=i>=(S=(h+y)/2))?h=S:y=S;while((L=R<<2|C<<1|M)===(I=(A>=S)<<2|(T>=x)<<1|_>=b));return s[I]=o,s[L]=a,n}function y0e(n){Array.isArray(n)||(n=Array.from(n));const e=n.length,t=new Float64Array(e),i=new Float64Array(e),r=new Float64Array(e);let s=1/0,o=1/0,a=1/0,l=-1/0,u=-1/0,h=-1/0;for(let p=0,m,y,b,x;p<e;++p)isNaN(y=+this._x.call(null,m=n[p]))||isNaN(b=+this._y.call(null,m))||isNaN(x=+this._z.call(null,m))||(t[p]=y,i[p]=b,r[p]=x,y<s&&(s=y),y>l&&(l=y),b<o&&(o=b),b>u&&(u=b),x<a&&(a=x),x>h&&(h=x));if(s>l||o>u||a>h)return this;this.cover(s,o,a).cover(l,u,h);for(let p=0;p<e;++p)LG(this,t[p],i[p],r[p],n[p]);return this}function b0e(n,e,t){if(isNaN(n=+n)||isNaN(e=+e)||isNaN(t=+t))return this;var i=this._x0,r=this._y0,s=this._z0,o=this._x1,a=this._y1,l=this._z1;if(isNaN(i))o=(i=Math.floor(n))+1,a=(r=Math.floor(e))+1,l=(s=Math.floor(t))+1;else{for(var u=o-i||1,h=this._root,p,m;i>n||n>=o||r>e||e>=a||s>t||t>=l;)switch(m=(t<s)<<2|(e<r)<<1|n<i,p=new Array(8),p[m]=h,h=p,u*=2,m){case 0:o=i+u,a=r+u,l=s+u;break;case 1:i=o-u,a=r+u,l=s+u;break;case 2:o=i+u,r=a-u,l=s+u;break;case 3:i=o-u,r=a-u,l=s+u;break;case 4:o=i+u,a=r+u,s=l-u;break;case 5:i=o-u,a=r+u,s=l-u;break;case 6:o=i+u,r=a-u,s=l-u;break;case 7:i=o-u,r=a-u,s=l-u;break}this._root&&this._root.length&&(this._root=h)}return this._x0=i,this._y0=r,this._z0=s,this._x1=o,this._y1=a,this._z1=l,this}function _0e(){var n=[];return this.visit(function(e){if(!e.length)do n.push(e.data);while(e=e.next)}),n}function x0e(n){return arguments.length?this.cover(+n[0][0],+n[0][1],+n[0][2]).cover(+n[1][0],+n[1][1],+n[1][2]):isNaN(this._x0)?void 0:[[this._x0,this._y0,this._z0],[this._x1,this._y1,this._z1]]}function Ti(n,e,t,i,r,s,o){this.node=n,this.x0=e,this.y0=t,this.z0=i,this.x1=r,this.y1=s,this.z1=o}function S0e(n,e,t,i){var r,s=this._x0,o=this._y0,a=this._z0,l,u,h,p,m,y,b=this._x1,x=this._y1,S=this._z1,_=[],T=this._root,A,M;for(T&&_.push(new Ti(T,s,o,a,b,x,S)),i==null?i=1/0:(s=n-i,o=e-i,a=t-i,b=n+i,x=e+i,S=t+i,i*=i);A=_.pop();)if(!(!(T=A.node)||(l=A.x0)>b||(u=A.y0)>x||(h=A.z0)>S||(p=A.x1)<s||(m=A.y1)<o||(y=A.z1)<a))if(T.length){var C=(l+p)/2,R=(u+m)/2,L=(h+y)/2;_.push(new Ti(T[7],C,R,L,p,m,y),new Ti(T[6],l,R,L,C,m,y),new Ti(T[5],C,u,L,p,R,y),new Ti(T[4],l,u,L,C,R,y),new Ti(T[3],C,R,h,p,m,L),new Ti(T[2],l,R,h,C,m,L),new Ti(T[1],C,u,h,p,R,L),new Ti(T[0],l,u,h,C,R,L)),(M=(t>=L)<<2|(e>=R)<<1|n>=C)&&(A=_[_.length-1],_[_.length-1]=_[_.length-1-M],_[_.length-1-M]=A)}else{var I=n-+this._x.call(null,T.data),P=e-+this._y.call(null,T.data),U=t-+this._z.call(null,T.data),B=I*I+P*P+U*U;if(B<i){var F=Math.sqrt(i=B);s=n-F,o=e-F,a=t-F,b=n+F,x=e+F,S=t+F,r=T.data}}return r}const w0e=(n,e,t,i,r,s)=>Math.sqrt((n-i)**2+(e-r)**2+(t-s)**2);function E0e(n,e,t,i){const r=[],s=n-i,o=e-i,a=t-i,l=n+i,u=e+i,h=t+i;return this.visit((p,m,y,b,x,S,_)=>{if(!p.length)do{const T=p.data;w0e(n,e,t,this._x(T),this._y(T),this._z(T))<=i&&r.push(T)}while(p=p.next);return m>l||y>u||b>h||x<s||S<o||_<a}),r}function T0e(n){if(isNaN(m=+this._x.call(null,n))||isNaN(y=+this._y.call(null,n))||isNaN(b=+this._z.call(null,n)))return this;var e,t=this._root,i,r,s,o=this._x0,a=this._y0,l=this._z0,u=this._x1,h=this._y1,p=this._z1,m,y,b,x,S,_,T,A,M,C,R;if(!t)return this;if(t.length)for(;;){if((T=m>=(x=(o+u)/2))?o=x:u=x,(A=y>=(S=(a+h)/2))?a=S:h=S,(M=b>=(_=(l+p)/2))?l=_:p=_,e=t,!(t=t[C=M<<2|A<<1|T]))return this;if(!t.length)break;(e[C+1&7]||e[C+2&7]||e[C+3&7]||e[C+4&7]||e[C+5&7]||e[C+6&7]||e[C+7&7])&&(i=e,R=C)}for(;t.data!==n;)if(r=t,!(t=t.next))return this;return(s=t.next)&&delete t.next,r?(s?r.next=s:delete r.next,this):e?(s?e[C]=s:delete e[C],(t=e[0]||e[1]||e[2]||e[3]||e[4]||e[5]||e[6]||e[7])&&t===(e[7]||e[6]||e[5]||e[4]||e[3]||e[2]||e[1]||e[0])&&!t.length&&(i?i[R]=t:this._root=t),this):(this._root=s,this)}function M0e(n){for(var e=0,t=n.length;e<t;++e)this.remove(n[e]);return this}function A0e(){return this._root}function C0e(){var n=0;return this.visit(function(e){if(!e.length)do++n;while(e=e.next)}),n}function R0e(n){var e=[],t,i=this._root,r,s,o,a,l,u,h;for(i&&e.push(new Ti(i,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));t=e.pop();)if(!n(i=t.node,s=t.x0,o=t.y0,a=t.z0,l=t.x1,u=t.y1,h=t.z1)&&i.length){var p=(s+l)/2,m=(o+u)/2,y=(a+h)/2;(r=i[7])&&e.push(new Ti(r,p,m,y,l,u,h)),(r=i[6])&&e.push(new Ti(r,s,m,y,p,u,h)),(r=i[5])&&e.push(new Ti(r,p,o,y,l,m,h)),(r=i[4])&&e.push(new Ti(r,s,o,y,p,m,h)),(r=i[3])&&e.push(new Ti(r,p,m,a,l,u,y)),(r=i[2])&&e.push(new Ti(r,s,m,a,p,u,y)),(r=i[1])&&e.push(new Ti(r,p,o,a,l,m,y)),(r=i[0])&&e.push(new Ti(r,s,o,a,p,m,y))}return this}function D0e(n){var e=[],t=[],i;for(this._root&&e.push(new Ti(this._root,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));i=e.pop();){var r=i.node;if(r.length){var s,o=i.x0,a=i.y0,l=i.z0,u=i.x1,h=i.y1,p=i.z1,m=(o+u)/2,y=(a+h)/2,b=(l+p)/2;(s=r[0])&&e.push(new Ti(s,o,a,l,m,y,b)),(s=r[1])&&e.push(new Ti(s,m,a,l,u,y,b)),(s=r[2])&&e.push(new Ti(s,o,y,l,m,h,b)),(s=r[3])&&e.push(new Ti(s,m,y,l,u,h,b)),(s=r[4])&&e.push(new Ti(s,o,a,b,m,y,p)),(s=r[5])&&e.push(new Ti(s,m,a,b,u,y,p)),(s=r[6])&&e.push(new Ti(s,o,y,b,m,h,p)),(s=r[7])&&e.push(new Ti(s,m,y,b,u,h,p))}t.push(i)}for(;i=t.pop();)n(i.node,i.x0,i.y0,i.z0,i.x1,i.y1,i.z1);return this}function O0e(n){return n[0]}function L0e(n){return arguments.length?(this._x=n,this):this._x}function P0e(n){return n[1]}function I0e(n){return arguments.length?(this._y=n,this):this._y}function N0e(n){return n[2]}function U0e(n){return arguments.length?(this._z=n,this):this._z}function LL(n,e,t,i){var r=new PL(e??O0e,t??P0e,i??N0e,NaN,NaN,NaN,NaN,NaN,NaN);return n==null?r:r.addAll(n)}function PL(n,e,t,i,r,s,o,a,l){this._x=n,this._y=e,this._z=t,this._x0=i,this._y0=r,this._z0=s,this._x1=o,this._y1=a,this._z1=l,this._root=void 0}function e4(n){for(var e={data:n.data},t=e;n=n.next;)t=t.next={data:n.data};return e}var Ls=LL.prototype=PL.prototype;Ls.copy=function(){var n=new PL(this._x,this._y,this._z,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1),e=this._root,t,i;if(!e)return n;if(!e.length)return n._root=e4(e),n;for(t=[{source:e,target:n._root=new Array(8)}];e=t.pop();)for(var r=0;r<8;++r)(i=e.source[r])&&(i.length?t.push({source:i,target:e.target[r]=new Array(8)}):e.target[r]=e4(i));return n};Ls.add=v0e;Ls.addAll=y0e;Ls.cover=b0e;Ls.data=_0e;Ls.extent=x0e;Ls.find=S0e;Ls.findAllWithinRadius=E0e;Ls.remove=T0e;Ls.removeAll=M0e;Ls.root=A0e;Ls.size=C0e;Ls.visit=R0e;Ls.visitAfter=D0e;Ls.x=L0e;Ls.y=I0e;Ls.z=U0e;function cr(n){return function(){return n}}function hl(n){return(n()-.5)*1e-6}function mR(n){return n.x+n.vx}function t4(n){return n.y+n.vy}function k0e(n){return n.z+n.vz}function PG(n){var e,t,i,r,s=1,o=1;typeof n!="function"&&(n=cr(n==null?1:+n));function a(){for(var h,p=e.length,m,y,b,x,S,_,T,A=0;A<o;++A)for(m=(t===1?CL(e,mR):t===2?DL(e,mR,t4):t===3?LL(e,mR,t4,k0e):null).visitAfter(l),h=0;h<p;++h)y=e[h],_=i[y.index],T=_*_,b=y.x+y.vx,t>1&&(x=y.y+y.vy),t>2&&(S=y.z+y.vz),m.visit(M);function M(C,R,L,I,P,U,B){var F=[R,L,I,P,U,B],z=F[0],W=F[1],X=F[2],j=F[t],G=F[t+1],K=F[t+2],J=C.data,ee=C.r,V=_+ee;if(J){if(J.index>y.index){var Y=b-J.x-J.vx,Q=t>1?x-J.y-J.vy:0,re=t>2?S-J.z-J.vz:0,ne=Y*Y+Q*Q+re*re;ne<V*V&&(Y===0&&(Y=hl(r),ne+=Y*Y),t>1&&Q===0&&(Q=hl(r),ne+=Q*Q),t>2&&re===0&&(re=hl(r),ne+=re*re),ne=(V-(ne=Math.sqrt(ne)))/ne*s,y.vx+=(Y*=ne)*(V=(ee*=ee)/(T+ee)),t>1&&(y.vy+=(Q*=ne)*V),t>2&&(y.vz+=(re*=ne)*V),J.vx-=Y*(V=1-V),t>1&&(J.vy-=Q*V),t>2&&(J.vz-=re*V))}return}return z>b+V||j<b-V||t>1&&(W>x+V||G<x-V)||t>2&&(X>S+V||K<S-V)}}function l(h){if(h.data)return h.r=i[h.data.index];for(var p=h.r=0;p<Math.pow(2,t);++p)h[p]&&h[p].r>h.r&&(h.r=h[p].r)}function u(){if(e){var h,p=e.length,m;for(i=new Array(p),h=0;h<p;++h)m=e[h],i[m.index]=+n(m,h,e)}}return a.initialize=function(h,...p){e=h,r=p.find(m=>typeof m=="function")||Math.random,t=p.find(m=>[1,2,3].includes(m))||2,u()},a.iterations=function(h){return arguments.length?(o=+h,a):o},a.strength=function(h){return arguments.length?(s=+h,a):s},a.radius=function(h){return arguments.length?(n=typeof h=="function"?h:cr(+h),u(),a):n},a}function z0e(n){return n.index}function n4(n,e){var t=n.get(e);if(!t)throw new Error("node not found: "+e);return t}function IG(n){var e=z0e,t=m,i,r=cr(30),s,o,a,l,u,h,p=1;n==null&&(n=[]);function m(_){return 1/Math.min(l[_.source.index],l[_.target.index])}function y(_){for(var T=0,A=n.length;T<p;++T)for(var M=0,C,R,L,I=0,P=0,U=0,B,F;M<A;++M)C=n[M],R=C.source,L=C.target,I=L.x+L.vx-R.x-R.vx||hl(h),a>1&&(P=L.y+L.vy-R.y-R.vy||hl(h)),a>2&&(U=L.z+L.vz-R.z-R.vz||hl(h)),B=Math.sqrt(I*I+P*P+U*U),B=(B-s[M])/B*_*i[M],I*=B,P*=B,U*=B,L.vx-=I*(F=u[M]),a>1&&(L.vy-=P*F),a>2&&(L.vz-=U*F),R.vx+=I*(F=1-F),a>1&&(R.vy+=P*F),a>2&&(R.vz+=U*F)}function b(){if(o){var _,T=o.length,A=n.length,M=new Map(o.map((R,L)=>[e(R,L,o),R])),C;for(_=0,l=new Array(T);_<A;++_)C=n[_],C.index=_,typeof C.source!="object"&&(C.source=n4(M,C.source)),typeof C.target!="object"&&(C.target=n4(M,C.target)),l[C.source.index]=(l[C.source.index]||0)+1,l[C.target.index]=(l[C.target.index]||0)+1;for(_=0,u=new Array(A);_<A;++_)C=n[_],u[_]=l[C.source.index]/(l[C.source.index]+l[C.target.index]);i=new Array(A),x(),s=new Array(A),S()}}function x(){if(o)for(var _=0,T=n.length;_<T;++_)i[_]=+t(n[_],_,n)}function S(){if(o)for(var _=0,T=n.length;_<T;++_)s[_]=+r(n[_],_,n)}return y.initialize=function(_,...T){o=_,h=T.find(A=>typeof A=="function")||Math.random,a=T.find(A=>[1,2,3].includes(A))||2,b()},y.links=function(_){return arguments.length?(n=_,b(),y):n},y.id=function(_){return arguments.length?(e=_,y):e},y.iterations=function(_){return arguments.length?(p=+_,y):p},y.strength=function(_){return arguments.length?(t=typeof _=="function"?_:cr(+_),x(),y):t},y.distance=function(_){return arguments.length?(r=typeof _=="function"?_:cr(+_),S(),y):r},y}var F0e={value:()=>{}};function NG(){for(var n=0,e=arguments.length,t={},i;n<e;++n){if(!(i=arguments[n]+"")||i in t||/[\s.]/.test(i))throw new Error("illegal type: "+i);t[i]=[]}return new hw(t)}function hw(n){this._=n}function B0e(n,e){return n.trim().split(/^|\s+/).map(function(t){var i="",r=t.indexOf(".");if(r>=0&&(i=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:i}})}hw.prototype=NG.prototype={constructor:hw,on:function(n,e){var t=this._,i=B0e(n+"",t),r,s=-1,o=i.length;if(arguments.length<2){for(;++s<o;)if((r=(n=i[s]).type)&&(r=V0e(t[r],n.name)))return r;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<o;)if(r=(n=i[s]).type)t[r]=i4(t[r],n.name,e);else if(e==null)for(r in t)t[r]=i4(t[r],n.name,null);return this},copy:function(){var n={},e=this._;for(var t in e)n[t]=e[t].slice();return new hw(n)},call:function(n,e){if((r=arguments.length-2)>0)for(var t=new Array(r),i=0,r,s;i<r;++i)t[i]=arguments[i+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(s=this._[n],i=0,r=s.length;i<r;++i)s[i].value.apply(e,t)},apply:function(n,e,t){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var i=this._[n],r=0,s=i.length;r<s;++r)i[r].value.apply(e,t)}};function V0e(n,e){for(var t=0,i=n.length,r;t<i;++t)if((r=n[t]).name===e)return r.value}function i4(n,e,t){for(var i=0,r=n.length;i<r;++i)if(n[i].name===e){n[i]=F0e,n=n.slice(0,i).concat(n.slice(i+1));break}return t!=null&&n.push({name:e,value:t}),n}var O0=0,vb=0,sb=0,UG=1e3,jE,yb,WE=0,nm=0,tM=0,S_=typeof performance=="object"&&performance.now?performance:Date,kG=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function zG(){return nm||(kG(G0e),nm=S_.now()+tM)}function G0e(){nm=0}function iD(){this._call=this._time=this._next=null}iD.prototype=FG.prototype={constructor:iD,restart:function(n,e,t){if(typeof n!="function")throw new TypeError("callback is not a function");t=(t==null?zG():+t)+(e==null?0:+e),!this._next&&yb!==this&&(yb?yb._next=this:jE=this,yb=this),this._call=n,this._time=t,rD()},stop:function(){this._call&&(this._call=null,this._time=1/0,rD())}};function FG(n,e,t){var i=new iD;return i.restart(n,e,t),i}function H0e(){zG(),++O0;for(var n=jE,e;n;)(e=nm-n._time)>=0&&n._call.call(void 0,e),n=n._next;--O0}function r4(){nm=(WE=S_.now())+tM,O0=vb=0;try{H0e()}finally{O0=0,W0e(),nm=0}}function j0e(){var n=S_.now(),e=n-WE;e>UG&&(tM-=e,WE=n)}function W0e(){for(var n,e=jE,t,i=1/0;e;)e._call?(i>e._time&&(i=e._time),n=e,e=e._next):(t=e._next,e._next=null,e=n?n._next=t:jE=t);yb=n,rD(i)}function rD(n){if(!O0){vb&&(vb=clearTimeout(vb));var e=n-nm;e>24?(n<1/0&&(vb=setTimeout(r4,n-S_.now()-tM)),sb&&(sb=clearInterval(sb))):(sb||(WE=S_.now(),sb=setInterval(j0e,UG)),O0=1,kG(r4))}}const X0e=1664525,q0e=1013904223,s4=4294967296;function Y0e(){let n=1;return()=>(n=(X0e*n+q0e)%s4)/s4}var o4=3;function gR(n){return n.x}function a4(n){return n.y}function $0e(n){return n.z}var Z0e=10,K0e=Math.PI*(3-Math.sqrt(5)),Q0e=Math.PI*20/(9+Math.sqrt(221));function BG(n,e){e=e||2;var t=Math.min(o4,Math.max(1,Math.round(e))),i,r=1,s=.001,o=1-Math.pow(s,1/300),a=0,l=.6,u=new Map,h=FG(y),p=NG("tick","end"),m=Y0e();n==null&&(n=[]);function y(){b(),p.call("tick",i),r<s&&(h.stop(),p.call("end",i))}function b(_){var T,A=n.length,M;_===void 0&&(_=1);for(var C=0;C<_;++C)for(r+=(a-r)*o,u.forEach(function(R){R(r)}),T=0;T<A;++T)M=n[T],M.fx==null?M.x+=M.vx*=l:(M.x=M.fx,M.vx=0),t>1&&(M.fy==null?M.y+=M.vy*=l:(M.y=M.fy,M.vy=0)),t>2&&(M.fz==null?M.z+=M.vz*=l:(M.z=M.fz,M.vz=0));return i}function x(){for(var _=0,T=n.length,A;_<T;++_){if(A=n[_],A.index=_,A.fx!=null&&(A.x=A.fx),A.fy!=null&&(A.y=A.fy),A.fz!=null&&(A.z=A.fz),isNaN(A.x)||t>1&&isNaN(A.y)||t>2&&isNaN(A.z)){var M=Z0e*(t>2?Math.cbrt(.5+_):t>1?Math.sqrt(.5+_):_),C=_*K0e,R=_*Q0e;t===1?A.x=M:t===2?(A.x=M*Math.cos(C),A.y=M*Math.sin(C)):(A.x=M*Math.sin(C)*Math.cos(R),A.y=M*Math.cos(C),A.z=M*Math.sin(C)*Math.sin(R))}(isNaN(A.vx)||t>1&&isNaN(A.vy)||t>2&&isNaN(A.vz))&&(A.vx=0,t>1&&(A.vy=0),t>2&&(A.vz=0))}}function S(_){return _.initialize&&_.initialize(n,m,t),_}return x(),i={tick:b,restart:function(){return h.restart(y),i},stop:function(){return h.stop(),i},numDimensions:function(_){return arguments.length?(t=Math.min(o4,Math.max(1,Math.round(_))),u.forEach(S),i):t},nodes:function(_){return arguments.length?(n=_,x(),u.forEach(S),i):n},alpha:function(_){return arguments.length?(r=+_,i):r},alphaMin:function(_){return arguments.length?(s=+_,i):s},alphaDecay:function(_){return arguments.length?(o=+_,i):+o},alphaTarget:function(_){return arguments.length?(a=+_,i):a},velocityDecay:function(_){return arguments.length?(l=1-_,i):1-l},randomSource:function(_){return arguments.length?(m=_,u.forEach(S),i):m},force:function(_,T){return arguments.length>1?(T==null?u.delete(_):u.set(_,S(T)),i):u.get(_)},find:function(){var _=Array.prototype.slice.call(arguments),T=_.shift()||0,A=(t>1?_.shift():null)||0,M=(t>2?_.shift():null)||0,C=_.shift()||1/0,R=0,L=n.length,I,P,U,B,F,z;for(C*=C,R=0;R<L;++R)F=n[R],I=T-F.x,P=A-(F.y||0),U=M-(F.z||0),B=I*I+P*P+U*U,B<C&&(z=F,C=B);return z},on:function(_,T){return arguments.length>1?(p.on(_,T),i):p.on(_)}}}function VG(){var n,e,t,i,r,s=cr(-30),o,a=1,l=1/0,u=.81;function h(b){var x,S=n.length,_=(e===1?CL(n,gR):e===2?DL(n,gR,a4):e===3?LL(n,gR,a4,$0e):null).visitAfter(m);for(r=b,x=0;x<S;++x)t=n[x],_.visit(y)}function p(){if(n){var b,x=n.length,S;for(o=new Array(x),b=0;b<x;++b)S=n[b],o[S.index]=+s(S,b,n)}}function m(b){var x=0,S,_,T=0,A,M,C,R,L=b.length;if(L){for(A=M=C=R=0;R<L;++R)(S=b[R])&&(_=Math.abs(S.value))&&(x+=S.value,T+=_,A+=_*(S.x||0),M+=_*(S.y||0),C+=_*(S.z||0));x*=Math.sqrt(4/L),b.x=A/T,e>1&&(b.y=M/T),e>2&&(b.z=C/T)}else{S=b,S.x=S.data.x,e>1&&(S.y=S.data.y),e>2&&(S.z=S.data.z);do x+=o[S.data.index];while(S=S.next)}b.value=x}function y(b,x,S,_,T){if(!b.value)return!0;var A=[S,_,T][e-1],M=b.x-t.x,C=e>1?b.y-t.y:0,R=e>2?b.z-t.z:0,L=A-x,I=M*M+C*C+R*R;if(L*L/u<I)return I<l&&(M===0&&(M=hl(i),I+=M*M),e>1&&C===0&&(C=hl(i),I+=C*C),e>2&&R===0&&(R=hl(i),I+=R*R),I<a&&(I=Math.sqrt(a*I)),t.vx+=M*b.value*r/I,e>1&&(t.vy+=C*b.value*r/I),e>2&&(t.vz+=R*b.value*r/I)),!0;if(b.length||I>=l)return;(b.data!==t||b.next)&&(M===0&&(M=hl(i),I+=M*M),e>1&&C===0&&(C=hl(i),I+=C*C),e>2&&R===0&&(R=hl(i),I+=R*R),I<a&&(I=Math.sqrt(a*I)));do b.data!==t&&(L=o[b.data.index]*r/I,t.vx+=M*L,e>1&&(t.vy+=C*L),e>2&&(t.vz+=R*L));while(b=b.next)}return h.initialize=function(b,...x){n=b,i=x.find(S=>typeof S=="function")||Math.random,e=x.find(S=>[1,2,3].includes(S))||2,p()},h.strength=function(b){return arguments.length?(s=typeof b=="function"?b:cr(+b),p(),h):s},h.distanceMin=function(b){return arguments.length?(a=b*b,h):Math.sqrt(a)},h.distanceMax=function(b){return arguments.length?(l=b*b,h):Math.sqrt(l)},h.theta=function(b){return arguments.length?(u=b*b,h):Math.sqrt(u)},h}function J0e(n,e,t,i){var r,s,o=cr(.1),a,l;typeof n!="function"&&(n=cr(+n)),e==null&&(e=0),t==null&&(t=0),i==null&&(i=0);function u(p){for(var m=0,y=r.length;m<y;++m){var b=r[m],x=b.x-e||1e-6,S=(b.y||0)-t||1e-6,_=(b.z||0)-i||1e-6,T=Math.sqrt(x*x+S*S+_*_),A=(l[m]-T)*a[m]*p/T;b.vx+=x*A,s>1&&(b.vy+=S*A),s>2&&(b.vz+=_*A)}}function h(){if(r){var p,m=r.length;for(a=new Array(m),l=new Array(m),p=0;p<m;++p)l[p]=+n(r[p],p,r),a[p]=isNaN(l[p])?0:+o(r[p],p,r)}}return u.initialize=function(p,...m){r=p,s=m.find(y=>[1,2,3].includes(y))||2,h()},u.strength=function(p){return arguments.length?(o=typeof p=="function"?p:cr(+p),h(),u):o},u.radius=function(p){return arguments.length?(n=typeof p=="function"?p:cr(+p),h(),u):n},u.x=function(p){return arguments.length?(e=+p,u):e},u.y=function(p){return arguments.length?(t=+p,u):t},u.z=function(p){return arguments.length?(i=+p,u):i},u}function sD(n){var e=cr(.1),t,i,r;typeof n!="function"&&(n=cr(n==null?0:+n));function s(a){for(var l=0,u=t.length,h;l<u;++l)h=t[l],h.vx+=(r[l]-h.x)*i[l]*a}function o(){if(t){var a,l=t.length;for(i=new Array(l),r=new Array(l),a=0;a<l;++a)i[a]=isNaN(r[a]=+n(t[a],a,t))?0:+e(t[a],a,t)}}return s.initialize=function(a){t=a,o()},s.strength=function(a){return arguments.length?(e=typeof a=="function"?a:cr(+a),o(),s):e},s.x=function(a){return arguments.length?(n=typeof a=="function"?a:cr(+a),o(),s):n},s}function oD(n){var e=cr(.1),t,i,r;typeof n!="function"&&(n=cr(n==null?0:+n));function s(a){for(var l=0,u=t.length,h;l<u;++l)h=t[l],h.vy+=(r[l]-h.y)*i[l]*a}function o(){if(t){var a,l=t.length;for(i=new Array(l),r=new Array(l),a=0;a<l;++a)i[a]=isNaN(r[a]=+n(t[a],a,t))?0:+e(t[a],a,t)}}return s.initialize=function(a){t=a,o()},s.strength=function(a){return arguments.length?(e=typeof a=="function"?a:cr(+a),o(),s):e},s.y=function(a){return arguments.length?(n=typeof a=="function"?a:cr(+a),o(),s):n},s}function eve(n){var e=cr(.1),t,i,r;typeof n!="function"&&(n=cr(n==null?0:+n));function s(a){for(var l=0,u=t.length,h;l<u;++l)h=t[l],h.vz+=(r[l]-h.z)*i[l]*a}function o(){if(t){var a,l=t.length;for(i=new Array(l),r=new Array(l),a=0;a<l;++a)i[a]=isNaN(r[a]=+n(t[a],a,t))?0:+e(t[a],a,t)}}return s.initialize=function(a){t=a,o()},s.strength=function(a){return arguments.length?(e=typeof a=="function"?a:cr(+a),o(),s):e},s.z=function(a){return arguments.length?(n=typeof a=="function"?a:cr(+a),o(),s):n},s}function tve(n){var e=0,t=n.children,i=t&&t.length;if(!i)e=1;else for(;--i>=0;)e+=t[i].value;n.value=e}function nve(){return this.eachAfter(tve)}function ive(n,e){let t=-1;for(const i of this)n.call(e,i,++t,this);return this}function rve(n,e){for(var t=this,i=[t],r,s,o=-1;t=i.pop();)if(n.call(e,t,++o,this),r=t.children)for(s=r.length-1;s>=0;--s)i.push(r[s]);return this}function sve(n,e){for(var t=this,i=[t],r=[],s,o,a,l=-1;t=i.pop();)if(r.push(t),s=t.children)for(o=0,a=s.length;o<a;++o)i.push(s[o]);for(;t=r.pop();)n.call(e,t,++l,this);return this}function ove(n,e){let t=-1;for(const i of this)if(n.call(e,i,++t,this))return i}function ave(n){return this.eachAfter(function(e){for(var t=+n(e.data)||0,i=e.children,r=i&&i.length;--r>=0;)t+=i[r].value;e.value=t})}function lve(n){return this.eachBefore(function(e){e.children&&e.children.sort(n)})}function cve(n){for(var e=this,t=uve(e,n),i=[e];e!==t;)e=e.parent,i.push(e);for(var r=i.length;n!==t;)i.splice(r,0,n),n=n.parent;return i}function uve(n,e){if(n===e)return n;var t=n.ancestors(),i=e.ancestors(),r=null;for(n=t.pop(),e=i.pop();n===e;)r=n,n=t.pop(),e=i.pop();return r}function fve(){for(var n=this,e=[n];n=n.parent;)e.push(n);return e}function hve(){return Array.from(this)}function dve(){var n=[];return this.eachBefore(function(e){e.children||n.push(e)}),n}function pve(){var n=this,e=[];return n.each(function(t){t!==n&&e.push({source:t.parent,target:t})}),e}function*mve(){var n=this,e,t=[n],i,r,s;do for(e=t.reverse(),t=[];n=e.pop();)if(yield n,i=n.children)for(r=0,s=i.length;r<s;++r)t.push(i[r]);while(t.length)}function nM(n,e){n instanceof Map?(n=[void 0,n],e===void 0&&(e=yve)):e===void 0&&(e=vve);for(var t=new L0(n),i,r=[t],s,o,a,l;i=r.pop();)if((o=e(i.data))&&(l=(o=Array.from(o)).length))for(i.children=o,a=l-1;a>=0;--a)r.push(s=o[a]=new L0(o[a])),s.parent=i,s.depth=i.depth+1;return t.eachBefore(GG)}function gve(){return nM(this).eachBefore(bve)}function vve(n){return n.children}function yve(n){return Array.isArray(n)?n[1]:null}function bve(n){n.data.value!==void 0&&(n.value=n.data.value),n.data=n.data.data}function GG(n){var e=0;do n.height=e;while((n=n.parent)&&n.height<++e)}function L0(n){this.data=n,this.depth=this.height=0,this.parent=null}L0.prototype=nM.prototype={constructor:L0,count:nve,each:ive,eachAfter:sve,eachBefore:rve,find:ove,sum:ave,sort:lve,path:cve,ancestors:fve,descendants:hve,leaves:dve,links:pve,copy:gve,[Symbol.iterator]:mve};function vR(n){return n==null?null:HG(n)}function HG(n){if(typeof n!="function")throw new Error;return n}function ob(){return 0}function ab(n){return function(){return n}}function _ve(n){n.x0=Math.round(n.x0),n.y0=Math.round(n.y0),n.x1=Math.round(n.x1),n.y1=Math.round(n.y1)}function xve(n,e,t,i,r){for(var s=n.children,o,a=-1,l=s.length,u=n.value&&(i-e)/n.value;++a<l;)o=s[a],o.y0=t,o.y1=r,o.x0=e,o.x1=e+=o.value*u}var Sve={depth:-1},l4={},yR={};function wve(n){return n.id}function Eve(n){return n.parentId}function Tve(){var n=wve,e=Eve,t;function i(r){var s=Array.from(r),o=n,a=e,l,u,h,p,m,y,b,x,S=new Map;if(t!=null){const _=s.map((M,C)=>Mve(t(M,C,r))),T=_.map(c4),A=new Set(_).add("");for(const M of T)A.has(M)||(A.add(M),_.push(M),T.push(c4(M)),s.push(yR));o=(M,C)=>_[C],a=(M,C)=>T[C]}for(h=0,l=s.length;h<l;++h)u=s[h],y=s[h]=new L0(u),(b=o(u,h,r))!=null&&(b+="")&&(x=y.id=b,S.set(x,S.has(x)?l4:y)),(b=a(u,h,r))!=null&&(b+="")&&(y.parent=b);for(h=0;h<l;++h)if(y=s[h],b=y.parent){if(m=S.get(b),!m)throw new Error("missing: "+b);if(m===l4)throw new Error("ambiguous: "+b);m.children?m.children.push(y):m.children=[y],y.parent=m}else{if(p)throw new Error("multiple roots");p=y}if(!p)throw new Error("no root");if(t!=null){for(;p.data===yR&&p.children.length===1;)p=p.children[0],--l;for(let _=s.length-1;_>=0&&(y=s[_],y.data===yR);--_)y.data=null}if(p.parent=Sve,p.eachBefore(function(_){_.depth=_.parent.depth+1,--l}).eachBefore(GG),p.parent=null,l>0)throw new Error("cycle");return p}return i.id=function(r){return arguments.length?(n=vR(r),i):n},i.parentId=function(r){return arguments.length?(e=vR(r),i):e},i.path=function(r){return arguments.length?(t=vR(r),i):t},i}function Mve(n){n=`${n}`;let e=n.length;return aD(n,e-1)&&!aD(n,e-2)&&(n=n.slice(0,-1)),n[0]==="/"?n:`/${n}`}function c4(n){let e=n.length;if(e<2)return"";for(;--e>1&&!aD(n,e););return n.slice(0,e)}function aD(n,e){if(n[e]==="/"){let t=0;for(;e>0&&n[--e]==="\\";)++t;if((t&1)===0)return!0}return!1}function Ave(n,e){return n.parent===e.parent?1:2}function bR(n){var e=n.children;return e?e[0]:n.t}function _R(n){var e=n.children;return e?e[e.length-1]:n.t}function Cve(n,e,t){var i=t/(e.i-n.i);e.c-=i,e.s+=t,n.c+=i,e.z+=t,e.m+=t}function Rve(n){for(var e=0,t=0,i=n.children,r=i.length,s;--r>=0;)s=i[r],s.z+=e,s.m+=e,e+=s.s+(t+=s.c)}function Dve(n,e,t){return n.a.parent===e.parent?n.a:t}function dw(n,e){this._=n,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}dw.prototype=Object.create(L0.prototype);function Ove(n){for(var e=new dw(n,0),t,i=[e],r,s,o,a;t=i.pop();)if(s=t._.children)for(t.children=new Array(a=s.length),o=a-1;o>=0;--o)i.push(r=t.children[o]=new dw(s[o],o)),r.parent=t;return(e.parent=new dw(null,0)).children=[e],e}function Lve(){var n=Ave,e=1,t=1,i=null;function r(u){var h=Ove(u);if(h.eachAfter(s),h.parent.m=-h.z,h.eachBefore(o),i)u.eachBefore(l);else{var p=u,m=u,y=u;u.eachBefore(function(T){T.x<p.x&&(p=T),T.x>m.x&&(m=T),T.depth>y.depth&&(y=T)});var b=p===m?1:n(p,m)/2,x=b-p.x,S=e/(m.x+b+x),_=t/(y.depth||1);u.eachBefore(function(T){T.x=(T.x+x)*S,T.y=T.depth*_})}return u}function s(u){var h=u.children,p=u.parent.children,m=u.i?p[u.i-1]:null;if(h){Rve(u);var y=(h[0].z+h[h.length-1].z)/2;m?(u.z=m.z+n(u._,m._),u.m=u.z-y):u.z=y}else m&&(u.z=m.z+n(u._,m._));u.parent.A=a(u,m,u.parent.A||p[0])}function o(u){u._.x=u.z+u.parent.m,u.m+=u.parent.m}function a(u,h,p){if(h){for(var m=u,y=u,b=h,x=m.parent.children[0],S=m.m,_=y.m,T=b.m,A=x.m,M;b=_R(b),m=bR(m),b&&m;)x=bR(x),y=_R(y),y.a=u,M=b.z+T-m.z-S+n(b._,m._),M>0&&(Cve(Dve(b,u,p),u,M),S+=M,_+=M),T+=b.m,S+=m.m,A+=x.m,_+=y.m;b&&!_R(y)&&(y.t=b,y.m+=T-_),m&&!bR(x)&&(x.t=m,x.m+=S-A,p=u)}return p}function l(u){u.x*=e,u.y=u.depth*t}return r.separation=function(u){return arguments.length?(n=u,r):n},r.size=function(u){return arguments.length?(i=!1,e=+u[0],t=+u[1],r):i?null:[e,t]},r.nodeSize=function(u){return arguments.length?(i=!0,e=+u[0],t=+u[1],r):i?[e,t]:null},r}function Pve(n,e,t,i,r){for(var s=n.children,o,a=-1,l=s.length,u=n.value&&(r-t)/n.value;++a<l;)o=s[a],o.x0=e,o.x1=i,o.y0=t,o.y1=t+=o.value*u}var Ive=(1+Math.sqrt(5))/2;function Nve(n,e,t,i,r,s){for(var o=[],a=e.children,l,u,h=0,p=0,m=a.length,y,b,x=e.value,S,_,T,A,M,C,R;h<m;){y=r-t,b=s-i;do S=a[p++].value;while(!S&&p<m);for(_=T=S,C=Math.max(b/y,y/b)/(x*n),R=S*S*C,M=Math.max(T/R,R/_);p<m;++p){if(S+=u=a[p].value,u<_&&(_=u),u>T&&(T=u),R=S*S*C,A=Math.max(T/R,R/_),A>M){S-=u;break}M=A}o.push(l={value:S,dice:y<b,children:a.slice(h,p)}),l.dice?xve(l,t,i,r,x?i+=b*S/x:s):Pve(l,t,i,x?t+=y*S/x:r,s),x-=S,h=p}return o}const Uve=(function n(e){function t(i,r,s,o,a){Nve(e,i,r,s,o,a)}return t.ratio=function(i){return n((i=+i)>1?i:1)},t})(Ive);function kve(){var n=Uve,e=!1,t=1,i=1,r=[0],s=ob,o=ob,a=ob,l=ob,u=ob;function h(m){return m.x0=m.y0=0,m.x1=t,m.y1=i,m.eachBefore(p),r=[0],e&&m.eachBefore(_ve),m}function p(m){var y=r[m.depth],b=m.x0+y,x=m.y0+y,S=m.x1-y,_=m.y1-y;S<b&&(b=S=(b+S)/2),_<x&&(x=_=(x+_)/2),m.x0=b,m.y0=x,m.x1=S,m.y1=_,m.children&&(y=r[m.depth+1]=s(m)/2,b+=u(m)-y,x+=o(m)-y,S-=a(m)-y,_-=l(m)-y,S<b&&(b=S=(b+S)/2),_<x&&(x=_=(x+_)/2),n(m,b,x,S,_))}return h.round=function(m){return arguments.length?(e=!!m,h):e},h.size=function(m){return arguments.length?(t=+m[0],i=+m[1],h):[t,i]},h.tile=function(m){return arguments.length?(n=HG(m),h):n},h.padding=function(m){return arguments.length?h.paddingInner(m).paddingOuter(m):h.paddingInner()},h.paddingInner=function(m){return arguments.length?(s=typeof m=="function"?m:ab(+m),h):s},h.paddingOuter=function(m){return arguments.length?h.paddingTop(m).paddingRight(m).paddingBottom(m).paddingLeft(m):h.paddingTop()},h.paddingTop=function(m){return arguments.length?(o=typeof m=="function"?m:ab(+m),h):o},h.paddingRight=function(m){return arguments.length?(a=typeof m=="function"?m:ab(+m),h):a},h.paddingBottom=function(m){return arguments.length?(l=typeof m=="function"?m:ab(+m),h):l},h.paddingLeft=function(m){return arguments.length?(u=typeof m=="function"?m:ab(+m),h):u},h}var xR,u4;function zve(){if(u4)return xR;u4=1;var n=0,e=1,t=2,i=3;function r(o,a){return o+""+a}function s(){return .01*(.5-Math.random())}return xR=function(a,l){var u=a.margin,h=a.ratio,p=a.expansion,m=a.gridSize,y=a.speed,b,x,S,_,T,A,M=!0,C=l.length,R=C/i|0,L=new Float32Array(R),I=new Float32Array(R),P=1/0,U=1/0,B=-1/0,F=-1/0;for(b=0;b<C;b+=i)S=l[b+n],_=l[b+e],A=l[b+t]*h+u,P=Math.min(P,S-A),B=Math.max(B,S+A),U=Math.min(U,_-A),F=Math.max(F,_+A);var z=B-P,W=F-U,X=(P+B)/2,j=(U+F)/2;P=X-p*z/2,B=X+p*z/2,U=j-p*W/2,F=j+p*W/2;var G=new Array(m*m),K=G.length,J;for(J=0;J<K;J++)G[J]=[];var ee,V,Y,Q,re,ne,le,fe,pe,Ee;for(b=0;b<C;b+=i)for(S=l[b+n],_=l[b+e],A=l[b+t]*h+u,ee=S-A,V=S+A,Y=_-A,Q=_+A,re=Math.floor(m*(ee-P)/(B-P)),ne=Math.floor(m*(V-P)/(B-P)),le=Math.floor(m*(Y-U)/(F-U)),fe=Math.floor(m*(Q-U)/(F-U)),pe=re;pe<=ne;pe++)for(Ee=le;Ee<=fe;Ee++)G[pe*m+Ee].push(b);var Te,xe=new Set,ge,oe,me,ve,he,Ce,Re,Le,Ie,be,Je,te,Z;for(J=0;J<K;J++)for(Te=G[J],b=0,T=Te.length;b<T;b++)for(ge=Te[b],me=l[ge+n],he=l[ge+e],Re=l[ge+t],x=b+1;x<T;x++)oe=Te[x],Ie=r(ge,oe),!(K>1&&xe.has(Ie))&&(K>1&&xe.add(Ie),ve=l[oe+n],Ce=l[oe+e],Le=l[oe+t],be=ve-me,Je=Ce-he,te=Math.sqrt(be*be+Je*Je),Z=te<Re*h+u+(Le*h+u),Z&&(M=!1,oe=oe/i|0,te>0?(L[oe]+=be/te*(1+Re),I[oe]+=Je/te*(1+Re)):(L[oe]+=z*s(),I[oe]+=W*s())));for(b=0,x=0;b<C;b+=i,x++)l[b+n]+=L[x]*.1*y,l[b+e]+=I[x]*.1*y;return{converged:M}},xR}var _p={},f4;function Fve(){if(f4)return _p;f4=1;var n=3;return _p.validateSettings=function(e){return"gridSize"in e&&typeof e.gridSize!="number"||e.gridSize<=0?{message:"the `gridSize` setting should be a positive number."}:"margin"in e&&typeof e.margin!="number"||e.margin<0?{message:"the `margin` setting should be 0 or a positive number."}:"expansion"in e&&typeof e.expansion!="number"||e.expansion<=0?{message:"the `expansion` setting should be a positive number."}:"ratio"in e&&typeof e.ratio!="number"||e.ratio<=0?{message:"the `ratio` setting should be a positive number."}:"speed"in e&&typeof e.speed!="number"||e.speed<=0?{message:"the `speed` setting should be a positive number."}:null},_p.graphToByteArray=function(e,t){var i=e.order,r=new Float32Array(i*n),s=0;return e.forEachNode(function(o,a){typeof t=="function"&&(a=t(o,a)),r[s]=a.x,r[s+1]=a.y,r[s+2]=a.size||1,s+=n}),r},_p.assignLayoutChanges=function(e,t,i){var r=0;e.forEachNode(function(s){var o={x:t[r],y:t[r+1]};typeof i=="function"&&(o=i(s,o)),e.mergeNodeAttributes(s,o),r+=n})},_p.collectLayoutChanges=function(e,t,i){var r={},s=0;return e.forEachNode(function(o){var a={x:t[s],y:t[s+1]};typeof i=="function"&&(a=i(o,a)),r[o]=a,s+=n}),r},_p.createWorker=function(t){var i=window.URL||window.webkitURL,r=t.toString(),s=i.createObjectURL(new Blob(["("+r+").call(this);"],{type:"text/javascript"})),o=new Worker(s);return i.revokeObjectURL(s),o},_p}var SR,h4;function Bve(){return h4||(h4=1,SR={gridSize:20,margin:5,expansion:1.1,ratio:1,speed:3}),SR}var wR,d4;function Vve(){if(d4)return wR;d4=1;var n=Xf(),e=zve(),t=Fve(),i=Bve(),r=500;function s(a,l,u){if(!n(l))throw new Error("graphology-layout-noverlap: the given graph is not a valid graphology instance.");typeof u=="number"?u={maxIterations:u}:u=u||{};var h=u.maxIterations||r;if(typeof h!="number"||h<=0)throw new Error("graphology-layout-force: you should provide a positive number of maximum iterations.");var p=Object.assign({},i,u.settings),m=t.validateSettings(p);if(m)throw new Error("graphology-layout-noverlap: "+m.message);var y=t.graphToByteArray(l,u.inputReducer),b=!1,x;for(x=0;x<h&&!b;x++)b=e(p,y).converged;if(a){t.assignLayoutChanges(l,y,u.outputReducer);return}return t.collectLayoutChanges(l,y,u.outputReducer)}var o=s.bind(null,!1);return o.assign=s.bind(null,!0),wR=o,wR}var Gve=Vve();const Hve=Do(Gve);(function(){try{if(typeof document<"u"){var n=document.createElement("style");n.appendChild(document.createTextNode(`._canvas_670zp_1 {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
}
._container_x9hyx_1 {
  border-radius: 50%;
  z-index: 9;
  position: relative;
  height: 175px;
  width: 175px;
  border: solid 5px var(--radial-menu-border);
  overflow: hidden;
  background: var(--radial-menu-background);
}

  ._container_x9hyx_1:before {
    content: ' ';
    background: var(--radial-menu-border);
    border-radius: 50%;
    height: 25px;
    width: 25px;
    position: absolute;
    z-index: 9;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
  }
._container_155l7_1 {
  transform-origin: bottom right;
  overflow: hidden;
  position: absolute;
  border: solid 1px var(--radial-menu-border);
}

  ._container_155l7_1._disabled_155l7_7 {
    opacity: 0.6;
  }

  ._container_155l7_1._disabled_155l7_7 ._contentContainer_155l7_10 {
      cursor: not-allowed;
    }

  ._container_155l7_1:not(._disabled_155l7_7) ._contentContainer_155l7_10 {
      cursor: pointer;
    }

  ._container_155l7_1:not(._disabled_155l7_7) ._contentContainer_155l7_10:hover {
        color: var(--radial-menu-active-color);
        background: var(--radial-menu-active-background);
      }

  ._container_155l7_1 ._contentContainer_155l7_10 {
    width: 200%;
    height: 200%;
    transform-origin: 50% 50%;
    border-radius: 50%;
    outline: none;
    transition: background 150ms ease-in-out;
    color: var(--radial-menu-color);
  }

  ._container_155l7_1 ._contentContainer_155l7_10 ._contentInner_155l7_35 {
      position: absolute;
      width: 100%;
      text-align: center;
    }

  ._container_155l7_1 ._contentContainer_155l7_10 ._contentInner_155l7_35 ._content_155l7_10 {
        display: inline-block;
      }

  ._container_155l7_1 svg {
    margin: 0 auto;
    fill: var(--radial-menu-active-color);
    height: 25px;
    width: 25px;
    display: block;
  }`)),document.head.appendChild(n)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();const ca={mass:10,tension:1e3,friction:300,precision:.1};function jG(n,e,t){const i=e.getLength(),r=n==="end"?i:i/2,s=n==="end"?t/2:0,o=(r-s)/i,a=e.getPointAt(o),l=e.getTangentAt(o);return[a,l]}function WG(n){return[n+6,2+n/1.5]}function w_(n){let e=Number.POSITIVE_INFINITY,t=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY,s=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY;for(const a of n)e=Math.min(e,a.position.x),t=Math.max(t,a.position.x),i=Math.min(i,a.position.y),r=Math.max(r,a.position.y),s=Math.min(s,a.position.z),o=Math.max(o,a.position.z);return{height:r-i,width:t-e,minX:e,maxX:t,minY:i,maxY:r,minZ:s,maxZ:o,x:(t+e)/2,y:(r+i)/2,z:(o+s)/2}}function jve(n,e){return e?n.reduce((t,i)=>{const r=i.data[e];return r&&t.set(r,[...t.get(r)||[],i]),t},new Map):new Map}function Wve({nodes:n,clusterAttribute:e}){const t=new Map;if(e){const i=jve(n,e);for(const[r,s]of i){const o=w_(s);t.set(r,{label:r,nodes:s,position:o})}}return t}const Xve=()=>{const n=new gd(0,0,0),e=n.attributes.position.count,t=new Float32Array(e*3);for(let i=0;i<e;i++)t[i*3]=1,t[i*3+1]=1,t[i*3+2]=1;return n.setAttribute("color",new Ut(t,3)),n},pw=(n,e)=>{const t=n.attributes.position.count,i=new Float32Array(t*3);for(let r=0;r<t;r++)i[r*3]=e.r,i[r*3+1]=e.g,i[r*3+2]=e.b;n.setAttribute("color",new Ut(i,3))},p4=(n,e,t,i=[3,1])=>{const[r,s]=i,o=r+s,a=n.getLength(),l=Math.max(3,Math.floor(a/o)),u=[];for(let h=0;h<l;h++){const p=h/l,m=p+r/o/l;if(m>p&&p<1){const y=[],b=Math.max(3,Math.floor(8*(m-p)));for(let x=0;x<=b;x++){const S=p+(m-p)*(x/b);S<=1&&y.push(n.getPointAt(S))}if(y.length>=2){const x=new CT(y),S=new ud(x,Math.max(2,y.length-1),e,5,!1);pw(S,t),u.push(S)}}}return u.length>0?pb(u):new fn};function qve({graph:n,attribute:e,defaultSize:t}){const i=new Map;return e?n.forEachNode((r,s)=>{const o=s.data?.[e];isNaN(o)&&console.warn(`Attribute ${o} is not a number for node ${s.id}`),i.set(r,o||0)}):console.warn("Attribute sizing configured but no attribute provided"),{getSizeForNode:r=>!e||!i?t:i.get(r)}}function Yve({graph:n}){const e=Dfe.degreeCentrality(n);return{ranks:e,getSizeForNode:t=>e[t]*20}}function $ve({graph:n}){const e=Uhe(n);return{ranks:e,getSizeForNode:t=>e[t]*80}}const Zve={pagerank:$ve,centrality:Yve,attribute:qve,none:({defaultSize:n})=>({getSizeForNode:e=>n})};function Kve({type:n,...e}){const t=Zve[n]?.(e);if(!t&&n!=="default")throw new Error(`Unknown sizing strategy: ${n}`);const{graph:i,minSize:r,maxSize:s}=e,o=new Map;let a,l;if(i.forEachNode((u,h)=>{let p;n==="default"?p=h.size||e.defaultSize:p=t.getSizeForNode(u),(a===void 0||p<a)&&(a=p),(l===void 0||p>l)&&(l=p),o.set(u,p)}),n!=="none"){const u=MV().domain([a,l]).rangeRound([r,s]);for(const[h,p]of o)o.set(h,u(p))}return o}function XG({nodePosition:n,labelType:e,camera:t}){return(i,r)=>{const s=e==="all"||e==="nodes"&&i==="node"||e==="edges"&&i==="edge";if(!s&&t&&n&&t?.position?.z/t?.zoom-n?.z>6e3)return!1;if(s)return!0;if(e==="auto"&&i==="node"){if(r>7)return!0;if(t&&n&&t.position.z/t.zoom-n.z<3e3)return!0}return!1}}function qG(n,e){switch(e){case"above":return n;case"below":return-n;default:return 0}}const IL=typeof window>"u";function Qve(n,e,t){n.clear();const i=new Set;for(const r of e)try{i.has(r.id)||(n.addNode(r.id,r),i.add(r.id))}catch(s){console.error(`[Graph] Error adding node '${r.id}`,s)}for(const r of t)if(!(!i.has(r.source)||!i.has(r.target)))try{n.addEdge(r.source,r.target,r)}catch(s){console.error(`[Graph] Error adding edge '${r.source} -> ${r.target}`,s)}return n}function Jve({graph:n,layout:e,sizingType:t,labelType:i,sizingAttribute:r,defaultNodeSize:s,minNodeSize:o,maxNodeSize:a,clusterAttribute:l}){const u=[],h=[],p=new Map,m=Kve({graph:n,type:t,attribute:r,minSize:o,maxSize:a,defaultSize:s});n.nodes().length;const y=XG({labelType:i});return n.forEachNode((b,x)=>{const S=e.getNodePosition(b),{data:_,fill:T,icon:A,label:M,size:C,...R}=x,L=m.get(x.id),I=y("node",L),U=(n.inboundNeighbors(x.id)||[]).map(F=>n.getNodeAttributes(F)),B={...x,size:L,labelVisible:I,label:M,icon:A,fill:T,cluster:l?_[l]:void 0,parents:U,data:{...R,..._??{}},position:{...S,x:S.x||0,y:S.y||0,z:S.z||1}};p.set(x.id,B),u.push(B)}),n.forEachEdge((b,x)=>{const S=p.get(x.source),_=p.get(x.target);if(S&&_){const{data:T,id:A,label:M,size:C,...R}=x,L=y("edge",C);h.push({...x,id:A,label:M,labelVisible:L,size:C,data:{...R,id:A,...T||{}}})}}),{nodes:u,edges:h}}const ER=.7;function YG(n,e,t=0){const i=new ae(n.x,n.y||0,n.z||0),r=new ae(e.x,e.y||0,e.z||0),s=new ae().addVectors(i,r).divideScalar(2);return s.setLength(s.length()+t)}function eye(n,e,t=-1){const i=n.clone(),r=e.clone(),s=new ae().subVectors(r,i),o=s.length(),a=s.clone().normalize(),l=new ae().subVectors(r,i).divideScalar(2),u=Math.abs(a.x)%1,h=new ae(-a.y,a.x-u*a.z,u*a.y).normalize(),p=new ae().add(i).add(l).add(h.multiplyScalar(o/4).multiplyScalar(t));return[n,p,e]}function E_(n,e,t,i,r,s){const o=m4(n,t,e),a=m4(t,n,i);return r?new RT(...eye(o,a,s)):new LO(o,a)}function $G(n){const e=P0(n),t=n.size,i=Math.PI/2,r=e.clone().add(new ae(t*Math.cos(i),t*1.3*Math.sin(i),0)),s=10,o=[];for(let l=0;l<s;l++){const u=l/s*2*Math.PI;o.push(r.clone().add(new ae(t*Math.cos(u),t*Math.sin(u),0)))}return new CT(o,!0)}function P0(n){return new ae(n.position.x,n.position.y,n.position.z||0)}function m4(n,e,t){const i=n.distanceTo(e);return n.clone().add(e.clone().sub(n).multiplyScalar(t/i))}function g4(n,e){return{...n,position:{...n.position,x:n.position.x+e.x,y:n.position.y+e.y,z:n.position.z+e.z}}}function tye({edge:n,edges:e,curved:t}){let i=t,r;const s=e.filter(o=>o.target===n.target&&o.source===n.source).map(o=>o.id);if(s.length>1){i=!0;const o=s.indexOf(n.id),a=o===0?1:1+o*.8,l=o%2===0?1:-1,u=ER*a;r=l*u}return n.data?.isAggregated&&e.length>1?{curved:!0,curveOffset:s.indexOf(n.id)===0?ER:-ER}:{curved:i,curveOffset:r}}function nye(n,e,t){const i=e.x-n.x,r=e.y-n.y,s=Math.atan2(r,i),o=t==="above"?i>=0?s+Math.PI/2:s-Math.PI/2:i>=0?s-Math.PI/2:s+Math.PI/2,a=7,l=Math.cos(o)*a,u=Math.sin(o)*a;return{x:l,y:u,z:0}}const ZG=({actives:n=[],selections:e=[],collapsedNodeIds:t=[],theme:i})=>Efe(r=>({theme:{...i,edge:{...i?.edge,label:{...i?.edge?.label,fontSize:i?.edge?.label?.fontSize??6}}},edges:[],nodes:[],collapsedNodeIds:t,clusters:new Map,panning:!1,draggingIds:[],actives:n,hoveredEdgeIds:[],edgeContextMenus:new Set,edgeMeshes:[],selections:e,hoveredNodeId:null,drags:{},graph:new Si({multi:!0}),setTheme:s=>r(o=>({...o,theme:s})),setClusters:s=>r(o=>({...o,clusters:s})),setEdgeContextMenus:s=>r(o=>({...o,edgeContextMenus:s})),setEdgeMeshes:s=>r(o=>({...o,edgeMeshes:s})),setPanning:s=>r(o=>({...o,panning:s})),setDrags:s=>r(o=>({...o,drags:s})),addDraggingId:s=>r(o=>({...o,draggingIds:[...o.draggingIds,s]})),removeDraggingId:s=>r(o=>({...o,draggingIds:o.draggingIds.filter(a=>a!==s)})),setActives:s=>r(o=>({...o,actives:s})),setSelections:s=>r(o=>({...o,selections:s})),setHoveredNodeId:s=>r(o=>({...o,hoveredNodeId:s})),setHoveredEdgeIds:s=>r(o=>({...o,hoveredEdgeIds:s})),setNodes:s=>r(o=>({...o,nodes:s,centerPosition:w_(s)})),setEdges:s=>r(o=>({...o,edges:s})),setNodePosition:(s,o)=>r(a=>{const l=a.nodes.find(y=>y.id===s),u=P0(l),p=new ae(o.x,o.y,o.z).sub(u),m=[...a.nodes];if(a.selections?.includes(s))a.selections?.forEach(y=>{const b=a.nodes.find(x=>x.id===y);if(b){const x=a.nodes.indexOf(b);m[x]=g4(b,p)}});else{const y=a.nodes.indexOf(l);m[y]=g4(l,p)}return{...a,drags:{...a.drags,[s]:l},nodes:m}}),setCollapsedNodeIds:(s=[])=>r(o=>({...o,collapsedNodeIds:s})),setClusterPosition:(s,o)=>r(a=>{const l=new Map(a.clusters),u=l.get(s);if(u){const h=u.position,p=new ae(o.x-h.x,o.y-h.y,o.z-(h.z??0)),m=[...a.nodes],y={...a.drags};m.forEach((S,_)=>{S.cluster===s&&(m[_]={...S,position:{...S.position,x:S.position.x+p.x,y:S.position.y+p.y,z:S.position.z+(p.z??0)}},y[S.id]=S)});const b=m.filter(S=>S.cluster===s),x=w_(b);return l.set(s,{...u,position:x}),{...a,drags:{...y,[s]:u},clusters:l,nodes:m}}return a})})),KG=ZG({}),QG=IL?null:q.createContext(KG),iye=({children:n,store:e=KG})=>IL?n:Rs.createElement(QG.Provider,{value:e},n),xt=n=>{const e=q.useContext(QG);return bV(e,Afe(n))},JG=q.createContext({controls:null,resetControls:()=>{},zoomIn:()=>{},zoomOut:()=>{},dollyIn:()=>{},dollyOut:()=>{},panLeft:()=>{},panRight:()=>{},panUp:()=>{},panDown:()=>{},freeze:()=>{},unFreeze:()=>{}}),iM=()=>{const n=q.useContext(JG);if(n===void 0)throw new Error("`useCameraControls` hook must be used within a `ControlsProvider` component");return n};Zr.install({THREE:{MOUSE:zB,Vector2:ot,Vector3:ae,Vector4:Vn,Quaternion:Os,Matrix4:Kt,Spherical:A8,Box3:Vr,Sphere:ts,Raycaster:qO,MathUtils:{DEG2RAD:xE?.DEG2RAD,clamp:xE?.clamp}}});Z8({ThreeCameraControls:Zr});const rye=q.forwardRef(({mode:n="rotate",children:e,animated:t,disabled:i,minDistance:r=1e3,maxDistance:s=5e4,minZoom:o=1,maxZoom:a=100},l)=>{const u=q.useRef(null),h=Br(X=>X.camera),p=Br(X=>X.gl),m=n==="orbit",y=xt(X=>X.setPanning),b=xt(X=>X.draggingIds.length>0),x=q.useRef(0),[S,_]=q.useState(!1);GT((X,j)=>{u.current?.enabled&&u.current?.update(j),m&&(u.current.azimuthAngle+=20*j*xE.DEG2RAD)},-1),q.useEffect(()=>()=>u.current?.dispose(),[]);const T=q.useCallback(()=>{u.current?.zoom(h.zoom/2,t)},[t,h.zoom]),A=q.useCallback(()=>{u.current?.zoom(-h.zoom/2,t)},[t,h.zoom]),M=q.useCallback(X=>{u.current?.dolly(X,t)},[t]),C=q.useCallback(X=>{u.current?.dolly(X,t)},[t]),R=q.useCallback(X=>{m||u.current?.truck(-.03*X.deltaTime,0,t)},[t,m]),L=q.useCallback(X=>{m||u.current?.truck(.03*X.deltaTime,0,t)},[t,m]),I=q.useCallback(X=>{m||u.current?.truck(0,.03*X.deltaTime,t)},[t,m]),P=q.useCallback(X=>{m||u.current?.truck(0,-.03*X.deltaTime,t)},[t,m]),U=q.useCallback(X=>{X.code==="Space"&&(n==="rotate"?u.current.mouseButtons.left=Zr.ACTION.TRUCK:u.current.mouseButtons.left=Zr.ACTION.ROTATE)},[n]),B=q.useCallback(X=>{X.code==="Space"&&(n==="rotate"?u.current.mouseButtons.left=Zr.ACTION.ROTATE:u.current.mouseButtons.left=Zr.ACTION.TRUCK)},[n]),[F,z]=q.useState(null);q.useEffect(()=>{IL||z({leftKey:new NS("ArrowLeft",100),rightKey:new NS("ArrowRight",100),upKey:new NS("ArrowUp",100),downKey:new NS("ArrowDown",100)})},[]),q.useEffect(()=>(!i&&F&&(F.leftKey.addEventListener("holding",L),F.rightKey.addEventListener("holding",R),F.upKey.addEventListener("holding",I),F.downKey.addEventListener("holding",P),window.addEventListener("keydown",U),window.addEventListener("keyup",B)),()=>{F&&(F.leftKey.removeEventListener("holding",L),F.rightKey.removeEventListener("holding",R),F.upKey.removeEventListener("holding",I),F.downKey.removeEventListener("holding",P),window.removeEventListener("keydown",U),window.removeEventListener("keyup",B))}),[i,U,B,P,L,R,I,F]),q.useEffect(()=>{const X=n==="orthographic";i?(u.current.mouseButtons.left=Zr.ACTION.NONE,u.current.mouseButtons.middle=Zr.ACTION.NONE,u.current.mouseButtons.wheel=Zr.ACTION.NONE):(u.current.mouseButtons.left=Zr.ACTION.TRUCK,u.current.mouseButtons.middle=Zr.ACTION.TRUCK,u.current.mouseButtons.wheel=X?Zr.ACTION.ZOOM:Zr.ACTION.DOLLY),X&&u.current&&(u.current.maxZoom=a,u.current.minZoom=o)},[i,n,o,a]),q.useEffect(()=>{const X=()=>y(!0),j=()=>y(!1),G=u.current;return G&&(G.addEventListener("control",X),G.addEventListener("controlend",j)),()=>{G&&(G.removeEventListener("control",X),G.removeEventListener("controlend",j))}},[u,y]),q.useEffect(()=>{b?(u.current.mouseButtons.left=Zr.ACTION.NONE,u.current.touches.one=Zr.ACTION.NONE):n==="rotate"?(u.current.mouseButtons.left=Zr.ACTION.ROTATE,u.current.touches.one=Zr.ACTION.TOUCH_ROTATE):(u.current.touches.one=Zr.ACTION.TOUCH_TRUCK,u.current.mouseButtons.left=Zr.ACTION.TRUCK)},[b,n]);const W=q.useMemo(()=>({controls:u.current,zoomIn:()=>T(),zoomOut:()=>A(),dollyIn:(X=1e3)=>M(X),dollyOut:(X=-1e3)=>C(X),panLeft:(X=100)=>L({deltaTime:X}),panRight:(X=100)=>R({deltaTime:X}),panDown:(X=100)=>P({deltaTime:X}),panUp:(X=100)=>I({deltaTime:X}),resetControls:X=>u.current?.normalizeRotations().reset(X),freeze:()=>{u.current.truckSpeed&&(x.current=u.current.truckSpeed),u.current.truckSpeed=0},unFreeze:()=>u.current.truckSpeed=x.current}),[T,A,L,R,P,I,u.current]);return q.useImperativeHandle(l,()=>W),ue.jsxs(JG.Provider,{value:W,children:[ue.jsx("threeCameraControls",{ref:X=>{u.current=X,S||_(!0)},args:[h,p.domElement],smoothTime:.1,minDistance:r,dollyToCursor:!0,maxDistance:s}),e]})});function eH(n,e){const t=e.position.z;n<t?n-=t:n+=t;const i=e.fov/e.zoom*Math.PI/180;return 2*Math.tan(i/2)*Math.abs(n)}function sye(n,e){return eH(n,e)*e.aspect}function v4(n,e){const t=sye(1,n),i=eH(1,n),r={x0:n?.position?.x-t/2,x1:n?.position?.x+t/2,y0:n?.position?.y-i/2,y1:n?.position?.y+i/2};return e?.x>r.x0&&e?.x<r.x1&&e?.y>r.y0&&e?.y<r.y1}function y4(n,e){return e.reduce((t,i)=>Math.abs(i-n%Math.PI)<Math.abs(t-n%Math.PI)?i:t)}function oye(n,e){const t=y4(n,[0,Math.PI]),i=y4(e,[Math.PI/2,3*Math.PI/2]);return{horizontalRotation:t-n%Math.PI,verticalRotation:i-e%Math.PI}}function tH({nodeId:n,nodes:e,edges:t,currentHiddenNodes:i,currentHiddenEdges:r}){const s=[],o=[],a=i.map(y=>y.id),l=r.map(y=>y.id),u=t.filter(y=>y.source===n),h=u.map(y=>y.target);o.push(...u);for(const y of h){const b=t.filter(S=>S.target===y&&S.source!==n);let x=!1;if((b.length===0||b.length>0&&!a.includes(y)&&b.map(_=>_.id).every(_=>l.includes(_)))&&(x=!0),x){const S=e.find(T=>T.id===y);S&&s.push(S);const _=tH({nodeId:y,nodes:e,edges:t,currentHiddenEdges:o,currentHiddenNodes:s});o.push(..._.hiddenEdges),s.push(..._.hiddenNodes)}}const p=Object.values(o.reduce((y,b)=>({...y,[b.id]:b}),{})),m=Object.values(s.reduce((y,b)=>({...y,[b.id]:b}),{}));return{hiddenEdges:p,hiddenNodes:m}}const aye=({collapsedIds:n,nodes:e,edges:t})=>{const i=[],r=[];for(const u of n){const{hiddenEdges:h,hiddenNodes:p}=tH({nodeId:u,nodes:e,edges:t,currentHiddenEdges:r,currentHiddenNodes:i});i.push(...p),r.push(...h)}const s=i.map(u=>u.id),o=r.map(u=>u.id),a=e.filter(u=>!s.includes(u.id)),l=t.filter(u=>!o.includes(u.id));return{visibleNodes:a,visibleEdges:l}},qS=50,lye=({animated:n,disabled:e,layoutType:t})=>{const i=xt(x=>x.nodes),[r,s]=q.useState(!1),o=Br(x=>x.invalidate),{controls:a}=iM(),l=Br(x=>x.camera),u=q.useRef(!1),h=q.useCallback(async(x,S)=>{const _=S?.animated!==void 0?S?.animated:!0,T=S?.centerOnlyIfNodesNotInView!==void 0?S?.centerOnlyIfNodesNotInView:!1;if(!u.current||!T||T&&x?.some(A=>!v4(l,A.position))){const{x:A,y:M,z:C}=w_(x);await a.normalizeRotations().setTarget(A,M,C,_),r||s(!0),o()}},[o,a,i]),p=q.useCallback(async(x,S={animated:!0,fitOnlyIfNodesNotInView:!1})=>{const{fitOnlyIfNodesNotInView:_}=S;if(!_||_&&x?.some(T=>!v4(l,T.position))){const{minX:T,maxX:A,minY:M,maxY:C,minZ:R,maxZ:L}=w_(x);if(!t.includes("3d")){const{horizontalRotation:I,verticalRotation:P}=oye(a?.azimuthAngle,a?.polarAngle);a?.rotate(I,P,!0)}await a?.zoomTo(1,S?.animated),await a?.fitToBox(new Vr(new ae(T,M,R),new ae(A,C,L)),S?.animated,{cover:!1,paddingLeft:qS,paddingRight:qS,paddingBottom:qS,paddingTop:qS})}},[l,a,t]),m=q.useCallback(x=>{let S=null;return x?.length&&(S=x.reduce((_,T)=>{const A=i.find(M=>M.id===T);if(A)_.push(A);else throw new Error(`Attempted to center ${T} but it was not found in the nodes`);return _},[])),S},[i]),y=q.useCallback((x,S)=>{const _=m(x);h(_||i,{animated:n,centerOnlyIfNodesNotInView:S?.centerOnlyIfNodesNotInView})},[n,h,m,i]),b=q.useCallback(async(x,S)=>{const _=m(x);await p(_||i,{animated:n,...S})},[n,p,m,i]);return q.useLayoutEffect(()=>{async function x(){a&&i?.length&&(u.current||(await h(i,{animated:!1}),await p(i,{animated:!1}),u.current=!0))}x()},[a,h,i,n,l,p]),{centerNodes:h,centerNodesById:y,fitNodesInViewById:b,isCentered:r}},cye=({animated:n,color:e="#D8E6EA",length:t,opacity:i=.5,position:r,rotation:s,size:o=1,onActive:a,onContextMenu:l})=>{const u=q.useMemo(()=>new vt(e),[e]),h=q.useRef(null),p=xt(S=>S.draggingIds.length>0),m=xt(S=>S.centerPosition),[{pos:y,arrowOpacity:b}]=la(()=>({from:{pos:m?[m.x,m.y,m.z]:[0,0,0],arrowOpacity:0},to:{pos:[r.x,r.y,r.z],arrowOpacity:i},config:{...ca,duration:n&&!p?void 0:0}}),[n,p,i,r]),x=q.useCallback(()=>{const S=new ae(0,1,0);h.current?.quaternion.setFromUnitVectors(S,s)},[s,h]);return q.useEffect(()=>x(),[x]),ue.jsxs(ar.mesh,{position:y,ref:h,scale:[1,1,1],onPointerOver:()=>a(!0),onPointerOut:()=>a(!1),onPointerDown:S=>{S.nativeEvent.buttons===2&&S.stopPropagation()},onContextMenu:S=>{S.nativeEvent.preventDefault(),S.stopPropagation(),l()},children:[ue.jsx("cylinderGeometry",{args:[0,o,t,20,1,!0],attach:"geometry"}),ue.jsx(ar.meshBasicMaterial,{attach:"material",color:u,depthTest:!1,opacity:b,transparent:!0,side:yr,fog:!0})]})},nH=({draggable:n,set:e,position:t,bounds:i,onDragStart:r,onDragEnd:s})=>{const o=Br(S=>S.camera),a=Br(S=>S.raycaster),l=Br(S=>S.size),u=Br(S=>S.gl),{mouse2D:h,mouse3D:p,offset:m,normal:y,plane:b}=q.useMemo(()=>({mouse2D:new ot,mouse3D:new ae,offset:new ae,normal:new ae,plane:new _f}),[]),x=q.useMemo(()=>u.domElement.getBoundingClientRect(),[u.domElement,l]);return Mme({onDragStart:({event:S})=>{const{eventObject:_,point:T}=S;m.setFromMatrixPosition(_.matrixWorld).sub(T),p.copy(T),r()},onDrag:({xy:S,buttons:_,cancel:T})=>{if(_!==1){T();return}const A=(S[0]-(x?.left??0))/l.width*2-1,M=-((S[1]-(x?.top??0))/l.height)*2+1;h.set(A,M),a.setFromCamera(h,o),o.getWorldDirection(y).negate(),b.setFromNormalAndCoplanarPoint(y,p),a.ray.intersectPlane(b,p);const C=new ae(t.x,t.y,t.z).copy(p).add(m);if(i){const R=new ae((i.minX+i.maxX)/2,(i.minY+i.maxY)/2,(i.minZ+i.maxZ)/2),L=(i.maxX-i.minX)/2,I=C.clone().sub(R);I.length()>L&&(I.normalize().multiplyScalar(L),C.copy(R).add(I))}return e(C)},onDragEnd:s},{drag:{enabled:n,threshold:10}})},NL=({sensitivity:n=7,interval:e=50,timeout:t=0,disabled:i,onPointerOver:r,onPointerOut:s})=>{const o=q.useRef(!1),a=q.useRef(null),l=q.useRef(0),u=q.useRef({x:null,y:null,px:null,py:null}),h=q.useCallback(S=>{u.current.x=S.clientX,u.current.y=S.clientY},[]),p=q.useCallback(S=>{a.current=clearTimeout(a.current);const{px:_,x:T,py:A,y:M}=u.current;Math.abs(_-T)+Math.abs(A-M)<n?(l.current=1,r(S)):(u.current.px=T,u.current.py=M,a.current=setTimeout(()=>p(S),e))},[e,r,n]),m=q.useCallback(()=>{clearTimeout(a.current),typeof window<"u"&&document.removeEventListener("mousemove",h,!1)},[h]),y=q.useCallback(S=>{i||(o.current=!0,m(),l.current!==1&&(u.current.px=S.pointer.x,u.current.py=S.pointer.y,typeof window<"u"&&document.addEventListener("mousemove",h,!1),a.current=setTimeout(()=>p(S),t)))},[m,p,i,h,t]),b=q.useCallback(S=>{a.current=clearTimeout(a.current),l.current=0,s(S)},[s]),x=q.useCallback(S=>{o.current=!1,m(),l.current===1&&(a.current=setTimeout(()=>b(S),t))},[m,b,t]);return{pointerOver:y,pointerOut:x}},uye=({outerRadius:n,innerRadius:e,padding:t,normalizedFill:i,normalizedStroke:r,opacity:s,animated:o,theme:a})=>{const{opacity:l}=la({from:{opacity:0},to:{opacity:s},config:{...ca,duration:o?void 0:0}});return ue.jsxs(ue.Fragment,{children:[ue.jsxs("mesh",{children:[ue.jsx("ringGeometry",{attach:"geometry",args:[n,0,128]}),ue.jsx(ar.meshBasicMaterial,{attach:"material",color:i,transparent:!0,depthTest:!1,opacity:a.cluster?.fill?l:0,side:yr,fog:!0})]}),ue.jsxs("mesh",{children:[ue.jsx("ringGeometry",{attach:"geometry",args:[n,e+t,128]}),ue.jsx(ar.meshBasicMaterial,{attach:"material",color:r,transparent:!0,depthTest:!1,opacity:l,side:yr,fog:!0})]})]})},I0=({text:n,fontSize:e=7,fontUrl:t,color:i="#2A6475",opacity:r=1,stroke:s,backgroundColor:o,backgroundOpacity:a=1,padding:l=1,strokeColor:u,strokeWidth:h=0,radius:p=.1,active:m,ellipsis:y=75,rotation:b})=>{const x=y&&!m?Age(n,y):n,S=q.useMemo(()=>new vt(i),[i]),_=q.useMemo(()=>s?new vt(s):void 0,[s]),T=q.useMemo(()=>o?new vt(o):null,[o]),A=q.useMemo(()=>u?new vt(u):null,[u]),M=Math.min(p*e,3),R=x.length*e*.6+l*2,L=e*1.2+l*2,I={width:R,height:L},P=m?2:1;return ue.jsxs(vG,{position:[0,0,P],renderOrder:1,children:[h>0&&A&&T&&ue.jsx("mesh",{position:[0,0,10],children:ue.jsx(jz,{args:[I.width+h,I.height+h,.1],radius:M,smoothness:8,"material-color":A,"material-transparent":!0,"material-opacity":a})}),T&&ue.jsx("mesh",{position:[0,0,10],children:ue.jsx(jz,{args:[I.width,I.height,.1],radius:M,smoothness:8,"material-color":T,"material-transparent":!0,"material-opacity":a})}),ue.jsx(Sge,{position:[0,0,11],font:t,fontSize:e,color:S,fillOpacity:r,textAlign:"center",outlineWidth:s?1:0,outlineColor:_,depthOffset:0,maxWidth:100,overflowWrap:"break-word",rotation:b,children:x})]})},fye=({animated:n,position:e,padding:t=40,labelFontUrl:i,disabled:r,radius:s=2,nodes:o,label:a,onClick:l,onPointerOver:u,onPointerOut:h,draggable:p=!1,onDragged:m,onRender:y})=>{const b=xt(ne=>ne.theme),x=Math.max(e.width,e.height)/2,S=x-s+t,[_,T]=q.useState(!1),A=xt(ne=>ne.centerPosition),M=xt(ne=>ne.nodes),C=iM(),R=xt(ne=>ne.draggingIds),L=R.includes(a),I=R.length>0,P=xt(ne=>ne.actives?.some(le=>o.some(fe=>fe.id===le))),U=xt(ne=>ne.hoveredNodeId),B=xt(ne=>ne.selections?.some(le=>o.some(fe=>fe.id===le))),z=xt(ne=>ne.selections?.length>0)?B||_||P?b.cluster?.selectedOpacity:b.cluster?.inactiveOpacity:b.cluster?.opacity,W=q.useMemo(()=>{const ne=[0,-S,2],le=b.cluster?.label?.offset;return le?[ne[0]-le[0],ne[1]-le[1],ne[2]-le[2]]:ne},[S,b.cluster?.label?.offset]),{circlePosition:X}=la({from:{circlePosition:[A.x,A.y,-1]},to:{circlePosition:e?[e.x,e.y,-1]:[0,0,-1]},config:{...ca,duration:n&&!I?void 0:0}}),j=q.useMemo(()=>new vt(b.cluster?.stroke),[b.cluster?.stroke]),G=q.useMemo(()=>new vt(b.cluster?.fill),[b.cluster?.fill]),K=xt(ne=>ne.addDraggingId),J=xt(ne=>ne.removeDraggingId),ee=xt(ne=>ne.setClusterPosition),V=nH({draggable:p&&!U,position:{x:e.x,y:e.y,z:-1},set:ne=>ee(a,ne),onDragStart:()=>{K(a),T(!0)},onDragEnd:()=>{J(a),T(!1);const ne=M.filter(le=>le.cluster===a);m?.({nodes:ne,label:a})}});jp(_&&!I&&l!==void 0,"pointer"),jp(_&&p&&!L&&l===void 0,"grab"),jp(L,"grabbing");const{pointerOver:Y,pointerOut:Q}=NL({disabled:r,onPointerOver:ne=>{T(!0),C.freeze(),u?.({nodes:o,label:a},ne)},onPointerOut:ne=>{T(!1),C.unFreeze(),h?.({nodes:o,label:a},ne)}});return q.useMemo(()=>b.cluster&&ue.jsx(ar.group,{userData:{id:a,type:"cluster"},position:X,onPointerOver:Y,onPointerOut:Q,onClick:ne=>{!r&&!L&&l?.({nodes:o,label:a},ne)},...V(),children:y?y({label:{position:W,text:a,opacity:z,fontUrl:i},opacity:z,outerRadius:S,innerRadius:x,padding:t,theme:b}):ue.jsxs(ue.Fragment,{children:[ue.jsx(uye,{outerRadius:S,innerRadius:x,padding:t,normalizedFill:G,normalizedStroke:j,opacity:z,animated:n,theme:b}),b.cluster?.label&&ue.jsx(ar.group,{position:W,children:ue.jsx(I0,{text:a,opacity:z,fontUrl:i,stroke:b.cluster.label.stroke,active:!1,color:b.cluster?.label.color,fontSize:b.cluster?.label.fontSize??12})})]})}),[b,X,Y,Q,S,G,x,t,j,W,a,z,i,r,l,o,V,L,y,n])},hye=({id:n,curve:e,opacity:t=1,size:i=1,color:r="#000",animated:s,onPointerOver:o,onPointerOut:a,onClick:l,onContextMenu:u})=>{const{scale:h,loopOpacity:p}=la({from:{scale:[1e-5,1e-5,1e-5],loopOpacity:0},to:{scale:[i,i,i],loopOpacity:t},config:{...ca,duration:s?void 0:0}}),m=q.useMemo(()=>new vt(r),[r]);return ue.jsxs(ar.mesh,{userData:{id:n,type:"edge"},renderOrder:-1,onPointerOver:o,onPointerOut:a,onClick:l,onPointerDown:y=>{y.nativeEvent.buttons===2&&(y.nativeEvent.preventDefault(),y.stopPropagation(),u())},scale:h,children:[ue.jsx("tubeGeometry",{attach:"geometry",args:[e,128,i/2,8,!0]}),ue.jsx(ar.meshBasicMaterial,{attach:"material",opacity:p,fog:!0,transparent:!0,depthTest:!1,color:m})]})},dye=`
  varying vec2 vUv;
  void main() {
    vUv = uv;
    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
  }
`,pye=`
  uniform vec3 color;
  uniform float opacity;
  uniform float dashSize;
  uniform float gapSize;
  uniform float lineLength;
  varying vec2 vUv;

  void main() {
    float totalSize = dashSize + gapSize;
    float position = mod(vUv.x * lineLength, totalSize);

    if (position > dashSize) {
      discard;
    }

    gl_FragColor = vec4(color, opacity);
  }
`,mye=({curveOffset:n,animated:e,color:t="#000",curve:i,curved:r=!1,dashed:s=!1,dashArray:o=[3,1],id:a,opacity:l=1,size:u=1,renderOrder:h=-1,onContextMenu:p,onClick:m,onPointerOver:y,onPointerOut:b})=>{const x=q.useRef(null),S=xt(R=>R.draggingIds.length>0),_=q.useMemo(()=>new vt(t),[t]),T=xt(R=>R.centerPosition),A=q.useRef(!1),M=q.useMemo(()=>{if(!s)return null;const[R,L]=o;return new El({uniforms:{color:{value:_},opacity:{value:l},dashSize:{value:R},gapSize:{value:L},lineLength:{value:i.getLength()}},vertexShader:dye,fragmentShader:pye,transparent:!0,depthTest:!1})},[s,_,l,i,o]),{lineOpacity:C}=la({from:{lineOpacity:0},to:{lineOpacity:l},config:{...ca,duration:e?void 0:0}});return la(()=>{const R=i.getPoint(0),L=i.getPoint(1);return{from:{fromVertices:A.current?[L?.x,L?.y,L?.z||0]:[T?.x,T?.y,T?.z||0],toVertices:[R?.x,R?.y,R?.z||0]},to:{fromVertices:[R?.x,R?.y,R?.z||0],toVertices:[L?.x,L?.y,L?.z||0]},onChange:I=>{const{fromVertices:P,toVertices:U}=I.value,B=new ae(...P),F=new ae(...U),z=E_(B,0,F,0,r,n);if(x.current){const W=s?u*.4:u/2;x.current.copy(new ud(z,20,W,5,!1))}},config:{...ca,duration:e&&!S?void 0:0}}},[e,S,i,u,s,r,n]),q.useEffect(()=>{A.current=!0},[]),ue.jsxs("mesh",{userData:{id:a,type:"edge"},renderOrder:h,onPointerOver:y,onPointerOut:b,onClick:m,onPointerDown:R=>{R.nativeEvent.buttons===2&&R.stopPropagation()},onContextMenu:R=>{R.nativeEvent.preventDefault(),R.stopPropagation(),p()},children:[ue.jsx("tubeGeometry",{attach:"geometry",ref:x}),s?ue.jsx("primitive",{attach:"material",object:M}):ue.jsx(ar.meshBasicMaterial,{attach:"material",opacity:C,fog:!0,transparent:!0,color:_})]})},b4=3,gye=({animated:n,arrowPlacement:e="end",contextMenu:t,disabled:i,labelPlacement:r="inline",id:s,interpolation:o,labelFontUrl:a,onContextMenu:l,onClick:u,onPointerOver:h,onPointerOut:p,subLabelPlacement:m="below"})=>{const y=xt(Z=>Z.theme),b=xt(Z=>Z.draggingIds.length>0),[x,S]=q.useState(!1),[_,T]=q.useState(!1),A=xt(Z=>Z.edges),M=A.find(Z=>Z.id===s),{target:C,source:R,label:L,subLabel:I,labelVisible:P=!1,size:U=1,fill:B,dashed:F=!1,dashArray:z=[3,1]}=M,W=M.subLabelPlacement||m,X=xt(Z=>Z.nodes.find(de=>de.id===R)),j=xt(Z=>Z.nodes.find(de=>de.id===C)),G=X.id===j.id,K=(U+y.edge.label.fontSize)/2,[J,ee]=q.useMemo(()=>WG(U),[U]),V=M.interpolation||o,Y=M.arrowPlacement||e,{curveOffset:Q,curved:re}=q.useMemo(()=>tye({edge:M,edges:A,curved:V==="curved"}),[M,A,V]),[ne,le,fe]=q.useMemo(()=>{const Z=P0(X),de=X.size,Ne=P0(j),Oe=j.size;let Ae=E_(Z,de,Ne,Oe,re,Q);const[et,Ze]=jG(Y,Ae,J);return Y==="end"&&(Ae=E_(Z,de,et,0,re,Q)),[Ae,et,Ze]},[X,j,re,Q,Y,J]),pe=q.useMemo(()=>{let Z=YG(X.position,j.position,qG(K,r));if(re){const de=new ae().subVectors(Z,ne.getPoint(.5));switch(r){case"above":de.y=de.y-b4;break;case"below":de.y=de.y+b4;break}Z=Z.sub(de)}return Z},[X.position,j.position,K,r,re,ne]),Ee=xt(Z=>Z.centerPosition),Te=xt(Z=>Z.selections?.includes(s)),xe=xt(Z=>Z.selections?.length),ge=xt(Z=>Z.actives?.includes(s)),oe=x||ge||Te,me=xe?Te||ge?y.edge.selectedOpacity:y.edge.inactiveOpacity:y.edge.opacity,ve=q.useMemo(()=>nye(X.position,j.position,W),[X.position,j.position,W]),[{labelPosition:he}]=la(()=>({from:{labelPosition:Ee?[Ee.x,Ee.y,Ee.z]:[0,0,0]},to:{labelPosition:[pe.x,pe.y,pe.z]},config:{...ca,duration:n&&!b?void 0:0}}),[pe,n,b]),Ce=q.useMemo(()=>new Ro(0,0,r==="natural"?0:Math.atan((j.position.y-X.position.y)/(j.position.x-X.position.x))),[j.position.x,j.position.y,X.position.x,X.position.y,r]);jp(x&&!b&&u!==void 0,"pointer");const{pointerOver:Re,pointerOut:Le}=NL({disabled:i,onPointerOver:Z=>{S(!0),h?.(M,Z)},onPointerOut:Z=>{S(!1),p?.(M,Z)}}),Ie=q.useMemo(()=>$G(X),[X]),be=q.useMemo(()=>{if(Y==="none")return null;let Z,de;return G&&Ie?Y==="mid"?(Z=Ie.getPointAt(.25),de=Ie.getTangentAt(.25)):(Z=Ie.getPointAt(.58),de=Ie.getTangentAt(.58)):(Z=le,de=fe),ue.jsx(cye,{animated:n,color:oe?y.arrow.activeFill:B||y.arrow.fill,length:J,opacity:me,position:Z,rotation:de,size:ee,onActive:S,onContextMenu:()=>{i||(T(!0),l?.(M))}})},[B,n,J,Y,le,fe,ee,i,M,oe,l,me,y.arrow.activeFill,y.arrow.fill,G,Ie]),Je=q.useMemo(()=>P&&L&&ue.jsxs(ar.group,{position:he,onContextMenu:()=>{i||(T(!0),l?.(M))},onPointerOver:Re,onPointerOut:Le,children:[ue.jsx(I0,{text:L,ellipsis:15,fontUrl:a,stroke:y.edge.label.stroke,color:oe?y.edge.label.activeColor:y.edge.label.color,opacity:me,fontSize:y.edge.label.fontSize,rotation:Ce,active:oe}),I&&ue.jsx("group",{position:[ve.x,ve.y,0],children:ue.jsx(I0,{text:I,ellipsis:15,fontUrl:a,stroke:y.edge.subLabel?.stroke||y.edge.label.stroke,active:oe,color:oe?y.edge.subLabel?.activeColor||y.edge.label.activeColor:y.edge.subLabel?.color||y.edge.label.color,opacity:me,fontSize:y.edge.subLabel?.fontSize||y.edge.label.fontSize*.8,rotation:Ce})})]}),[i,M,oe,L,I,a,he,ve,Ce,P,l,Le,Re,me,y.edge.label.activeColor,y.edge.label.color,y.edge.label.fontSize,y.edge.label.stroke,y.edge.subLabel?.stroke,y.edge.subLabel?.activeColor,y.edge.subLabel?.color,y.edge.subLabel?.fontSize]),te=q.useMemo(()=>_&&t&&ue.jsx(TL,{prepend:!0,center:!0,position:pe,children:t({data:M,onClose:()=>T(!1)})}),[_,t,pe,M]);return ue.jsxs("group",{position:[0,0,oe?1:0],children:[G&&Ie?ue.jsx(hye,{id:s,curve:Ie,size:U,animated:n,color:oe?y.edge.activeFill:B||y.edge.fill,opacity:me,onClick:Z=>{i||u?.(M,Z)},onContextMenu:()=>{i||(T(!0),l?.(M))},onPointerOver:Re,onPointerOut:Le}):ue.jsx(mye,{curveOffset:Q,animated:n,color:oe?y.edge.activeFill:B||y.edge.fill,curve:ne,curved:re,dashed:F,dashArray:z,id:s,opacity:me,size:U,renderOrder:oe?0:-1,onClick:Z=>{i||u?.(M,Z)},onPointerOver:Re,onPointerOut:Le,onContextMenu:()=>{i||(T(!0),l?.(M))}}),be,Je,te]})},vye=({animated:n,color:e,contextMenu:t,edge:i,labelFontUrl:r,labelPlacement:s="inline",opacity:o,active:a})=>{const l=xt(B=>B.theme),{target:u,source:h,label:p,labelVisible:m=!1,size:y=1}=i,b=xt(B=>B.nodes),[x,S]=q.useMemo(()=>[b.find(B=>B.id===h),b.find(B=>B.id===u)],[b,h,u]),_=xt(B=>B.draggingIds.length>0),T=q.useMemo(()=>(y+l.edge.label.fontSize)/2,[y,l.edge.label.fontSize]),A=q.useMemo(()=>YG(x.position,S.position,qG(T,s)),[x.position,S.position,T,s]),M=xt(B=>B.edgeContextMenus),C=xt(B=>B.setEdgeContextMenus),[{labelPosition:R}]=la(()=>({from:{labelPosition:[0,0,0]},to:{labelPosition:[A.x,A.y,A.z]},config:{...ca,duration:n&&!_?void 0:0}}),[A,n,_]),L=q.useCallback(B=>{const F=new Set(M);F.delete(B),C(F)},[M,C]),I=q.useMemo(()=>new Ro(0,0,s==="natural"?0:Math.atan((S.position.y-x.position.y)/(S.position.x-x.position.x))),[S.position.x,S.position.y,x.position.x,x.position.y,s]),P=q.useMemo(()=>({prepend:!0,center:!0,position:A}),[A]),U=q.useMemo(()=>({text:p,ellipsis:15,fontUrl:r,stroke:l.edge.label.stroke,color:e,opacity:o,fontSize:l.edge.label.fontSize,rotation:I,active:a}),[p,r,l.edge.label.stroke,e,o,l.edge.label.fontSize,I,a]);return ue.jsxs("group",{children:[m&&p&&ue.jsx(ar.group,{position:R,children:ue.jsx(I0,{...U})}),t&&M.has(i.id)&&ue.jsx(TL,{...P,children:t({data:i,onClose:()=>L(i.id)})})]})};function yye(n,e){const t=q.useRef(n),i=q.useRef(null);q.useEffect(()=>{t.current=n;const o=n.getAttribute("position");i.current=new Float32Array(o.array.length)},[n]);const r=q.useCallback(()=>{const o=t.current.getAttribute("position");return{from:new Float32Array(o.array.length),to:o.array}},[]),s=q.useCallback(o=>{const a=i.current;a.set(o);const l=new ai(a,3,!1);t.current.setAttribute("position",l),l.needsUpdate=!0},[]);la(()=>{if(!e)return null;const o=r();return{from:{positions:o.from},to:{positions:o.to},onChange:a=>{s(a.value.positions)},config:{...ca,duration:e?void 0:0}}},[e,r,s])}function bye(n,e,t){const[{activeOpacity:i,inactiveOpacity:r}]=la(()=>({from:{activeOpacity:0,inactiveOpacity:0},to:{activeOpacity:e?t.edge.selectedOpacity:t.edge.opacity,inactiveOpacity:e?t.edge.inactiveOpacity:t.edge.opacity},config:{...ca,duration:n?void 0:0}}),[n,e,t]);return{activeOpacity:i,inactiveOpacity:r}}function _ye(n,e,t){const i=q.useRef(n);q.useEffect(()=>{i.current=n},[n]);const r=xt(m=>m.edgeContextMenus),s=xt(q.useCallback(m=>m.setEdgeContextMenus,[])),o=xt(q.useCallback(m=>m.setHoveredEdgeIds,[])),a=q.useRef(!1),l=q.useCallback(()=>{a.current=!0},[]),u=q.useRef(!1),h=q.useCallback(()=>{u.current=!0},[]),p=q.useCallback((m,y)=>{const{onClick:b,onContextMenu:x,onPointerOver:S,onPointerOut:_}=i.current;if(b&&a.current&&!t){a.current=!1;for(const A of y)b(A)}if((e||x)&&u.current&&!t){u.current=!1;const A=new Set(r);let M=!1;for(const C of y)r.has(C.id)||(A.add(C.id),M=!0,x?.(C));M&&s(A)}const T=y.length>0?y.map(A=>A.id):[];o(T),S&&y.filter(M=>!m.includes(M)).forEach(M=>{S(M)}),_&&m.filter(M=>!y.includes(M)).forEach(M=>{_(M)})},[e,t,r,s,o]);return{handleClick:l,handleContextMenu:h,handleIntersections:p}}const _4=Xve();function xye(n,e){const t=q.useRef(null),i=xt(l=>l.theme);xt(l=>{t.current=l});const r=q.useRef(new Map),s=q.useRef(null),o=q.useCallback(l=>{const u=[],h=r.current,{nodes:p}=t.current,m=new Map(p.map(y=>[y.id,y]));return n!=="none"&&!s.current&&(s.current=new Y0(0,1,1,20,1,!0)),l.forEach(y=>{const{target:b,source:x,size:S=1}=y,_=m.get(x),T=m.get(b);if(!_||!T)return;const A=`${_.position.x},${_.position.y},${T.position.x},${T.position.y},${S}`,M=_.id===T.id,R=(y.interpolation||e)==="curved",L=y.arrowPlacement||n;if(h.has(A)){u.push(h.get(A));return}const I=P0(_),P=_.size,U=P0(T),B=T.size;let F;M?F=$G(_):F=E_(I,P,U,B,R);const z=y.dashed,W=z?S*.4:S/2;let X;if(z?X=p4(F,W,new vt(y.fill??i.edge.fill),y.dashArray):X=new ud(F,20,W,5,!1),L==="none"){if(!z){const re=new vt(y.fill??i.edge.fill);pw(X,re)}u.push(X),h.set(A,X);return}const[j,G]=WG(S),K=s.current.clone();K.scale(G,j,G);let J,ee;M?L==="mid"?(J=F.getPointAt(.25),ee=F.getTangentAt(.25)):(J=F.getPointAt(.58),ee=F.getTangentAt(.58)):[J,ee]=jG(L,F,j);const V=new Os;if(V.setFromUnitVectors(new ae(0,1,0),ee),K.applyQuaternion(V),K.translate(J.x,J.y,J.z),L&&L==="end"&&!M){const re=E_(I,P,J,0,R);z?X=p4(re,W,new vt(y.fill??i.edge.fill),y.dashArray):X=new ud(re,20,W,5,!1)}const Y=new vt(y.fill??i.edge.fill);z||pw(X,Y),pw(K,Y);const Q=pb([X,K]);Q.userData={...Q.userData,type:"edge"},u.push(Q),h.set(A,Q)}),u},[n,e,i.edge.fill]),a=q.useCallback((l,u)=>{const h=o(l),p=o(u);return pb([p.length?pb(p):_4,h.length?pb(h):_4],!0)},[o]);return{getGeometries:o,getGeometry:a}}const Sye=({interpolation:n="linear",arrowPlacement:e="end",labelPlacement:t="inline",animated:i,contextMenu:r,disabled:s,edges:o,labelFontUrl:a,onClick:l,onContextMenu:u,onPointerOut:h,onPointerOver:p})=>{const m=xt(V=>V.theme),{getGeometries:y,getGeometry:b}=xye(e,n),x=xt(V=>V.draggingIds),S=xt(V=>V.edgeMeshes),_=xt(V=>V.setEdgeMeshes),T=xt(V=>V.actives||[]),A=xt(V=>V.selections||[]),M=xt(V=>V.hoveredEdgeIds||[]),[C,R,L,I]=q.useMemo(()=>{const V=[],Y=[],Q=[],re=[];return o.forEach(ne=>{if(x.includes(ne.source)||x.includes(ne.target)){A.includes(ne.id)||T.includes(ne.id)||M.includes(ne.id)?Q.push(ne):re.push(ne);return}A.includes(ne.id)||T.includes(ne.id)||M.includes(ne.id)?V.push(ne):Y.push(ne)}),[V,Y,Q,re]},[o,T,A,x,M]),P=!!A.length,U=q.useMemo(()=>b(C,R),[b,C,R]),{activeOpacity:B,inactiveOpacity:F}=bye(i,P,m);yye(U,i),q.useEffect(()=>{if(x.length===0){const Y=y(o).map(Q=>new Pi(Q));_(Y)}},[y,_,o,x.length]);const z=q.useRef(new Pi),W=q.useRef(new Pi),X=q.useCallback(V=>{if(!V.camera)return[];const Y=V.intersectObjects(S);return Y.length?Y.map(Q=>o[S.indexOf(Q.object)]):[]},[S,o]),{handleClick:j,handleContextMenu:G,handleIntersections:K}=_ye({onClick:l,onContextMenu:u,onPointerOut:h,onPointerOver:p},r,s),J=q.useRef([]),ee=q.useRef([]);return GT(V=>{if(z.current.geometry=U,s)return;const Y=J.current;if((x.length||x.length===0&&Y!==null)&&(W.current.geometry=b(L,I)),J.current=x,x.length)return;const Q=ee.current,re=X(V.raycaster);K(Q,re),re.join()!==Q.join()&&(W.current.geometry=b(re,[])),ee.current=re}),ue.jsxs("group",{onClick:j,onContextMenu:G,children:[ue.jsxs("mesh",{ref:z,children:[ue.jsx(ar.meshBasicMaterial,{attach:"material-0",depthTest:!1,fog:!0,opacity:F,side:yr,transparent:!0,vertexColors:!0}),ue.jsx(ar.meshBasicMaterial,{attach:"material-1",color:m.edge.activeFill,depthTest:!1,fog:!0,opacity:B,side:yr,transparent:!0})]}),ue.jsxs("mesh",{ref:W,children:[ue.jsx(ar.meshBasicMaterial,{attach:"material-0",color:m.edge.fill,depthTest:!1,fog:!0,opacity:F,side:yr,transparent:!0}),ue.jsx(ar.meshBasicMaterial,{attach:"material-1",color:m.edge.activeFill,depthTest:!1,fog:!0,opacity:B,side:yr,transparent:!0})]}),o.map(V=>{const Y=A.includes(V.id),Q=T.includes(V.id),re=M.includes(V.id);return ue.jsx(vye,{animated:i,contextMenu:r,color:Y||Q||re?m.edge.label.activeColor:m.edge.label.color,disabled:s,edge:V,labelFontUrl:a,labelPlacement:t,active:Y||Q||re},V.id)})]})},wye=({image:n,id:e,size:t,opacity:i=1,animated:r})=>{const s=q.useMemo(()=>new d8().load(n),[n]),{scale:o,spriteOpacity:a}=la({from:{scale:[1e-5,1e-5,1e-5],spriteOpacity:0},to:{scale:[t,t,t],spriteOpacity:i},config:{...ca,duration:r?void 0:0}});return ue.jsx(ar.sprite,{userData:{id:e,type:"node"},scale:o,children:ue.jsx(ar.spriteMaterial,{attach:"material",opacity:a,fog:!0,depthTest:!1,transparent:!0,side:yr,children:ue.jsx("primitive",{attach:"map",object:s,minFilter:br})})})},Eye=({color:n="#D8E6EA",size:e=1,opacity:t=.5,animated:i,strokeWidth:r=5,innerRadius:s=4,segments:o=25})=>{const a=q.useMemo(()=>new vt(n),[n]),{ringSize:l,ringOpacity:u}=la({from:{ringOpacity:0,ringSize:[1e-5,1e-5,1e-5]},to:{ringOpacity:t,ringSize:[e/2,e/2,1]},config:{...ca,duration:i?void 0:0}}),h=r/10,p=s+h;return ue.jsx(vG,{position:[0,0,1],children:ue.jsxs(ar.mesh,{scale:l,raycast:t>0?void 0:()=>[],children:[ue.jsx("ringGeometry",{attach:"geometry",args:[s,p,o]}),ue.jsx(ar.meshBasicMaterial,{attach:"material",color:a,transparent:!0,depthTest:!1,opacity:u,side:yr,fog:!0})]})})},Tye=({color:n,id:e,size:t,selected:i,opacity:r=1,animated:s})=>{const{scale:o,nodeOpacity:a}=la({from:{scale:[1e-5,1e-5,1e-5],nodeOpacity:0},to:{scale:[t,t,t],nodeOpacity:r},config:{...ca,duration:s?void 0:0}}),l=q.useMemo(()=>new vt(n),[n]),u=xt(h=>h.theme);return ue.jsxs(ue.Fragment,{children:[ue.jsxs(ar.mesh,{userData:{id:e,type:"node"},scale:o,children:[ue.jsx("sphereGeometry",{attach:"geometry",args:[1,25,25]}),ue.jsx(ar.meshPhongMaterial,{attach:"material",side:yr,transparent:!0,fog:!0,opacity:a,color:l,emissive:l,emissiveIntensity:.7})]}),ue.jsx(Eye,{opacity:i?.5:0,size:t,animated:s,color:i?u.ring.activeFill:u.ring.fill})]})},Mye=({animated:n,disabled:e,id:t,draggable:i=!1,labelFontUrl:r,contextMenu:s,onClick:o,onDoubleClick:a,onPointerOver:l,onDragged:u,onPointerOut:h,onContextMenu:p,renderNode:m,constrainDragging:y})=>{const b=iM(),x=xt(be=>be.theme),S=xt(be=>be.nodes.find(Je=>Je.id===t)),_=xt(be=>be.edges),T=xt(be=>be.draggingIds),A=xt(be=>be.collapsedNodeIds),M=xt(be=>be.addDraggingId),C=xt(be=>be.removeDraggingId),R=xt(be=>be.setHoveredNodeId),L=xt(be=>be.setNodePosition),I=xt(be=>be.setCollapsedNodeIds),P=xt(be=>be.collapsedNodeIds.includes(t)),U=xt(be=>be.actives?.includes(t)),B=xt(be=>be.selections?.includes(t)),F=xt(be=>be.selections?.length>0),z=xt(be=>be.centerPosition),W=xt(be=>be.clusters.get(S.cluster)),X=T.includes(t),j=T.length>0,{position:G,label:K,subLabel:J,size:ee=7,labelVisible:V=!0}=S,Y=q.useRef(null),[Q,re]=q.useState(!1),[ne,le]=q.useState(!1),fe=Q||B||U,pe=F?fe?x.node.selectedOpacity:x.node.inactiveOpacity:x.node.opacity,Ee=q.useMemo(()=>_.filter(Je=>Je.source===t).length>0||P,[_,t,P]),Te=q.useCallback(()=>{Ee&&I(P?A.filter(be=>be!==t):[...A,t])},[Ee,A,t,P,I]),[{nodePosition:xe,labelPosition:ge}]=la(()=>({from:{nodePosition:z?[z.x,z.y,0]:[0,0,0],labelPosition:[0,-(ee+7),2]},to:{nodePosition:G?[G.x,G.y,fe?G.z+1:G.z]:[0,0,0],labelPosition:[0,-(ee+7),2]},config:{...ca,duration:n&&!j?void 0:0}}),[X,G,n,ee,fe]),oe=nH({draggable:i,position:G,bounds:y?W?.position:void 0,set:be=>L(t,be),onDragStart:()=>{M(t),re(!0)},onDragEnd:()=>{C(t),u?.(S)}});jp(Q&&!j&&o!==void 0,"pointer"),jp(Q&&i&&!X&&o===void 0,"grab"),jp(X,"grabbing");const me=fe||X,ve=me?x.node.activeFill:S.fill||x.node.fill,{pointerOver:he,pointerOut:Ce}=NL({disabled:e||X,onPointerOver:be=>{b.freeze(),re(!0),l?.(S,be),R(t)},onPointerOut:be=>{b.unFreeze(),re(!1),h?.(S,be),R(null)}}),Re=q.useMemo(()=>m?m({id:t,color:ve,size:ee,active:me,opacity:pe,animated:n,selected:B,node:S}):ue.jsx(ue.Fragment,{children:S.icon?ue.jsx(wye,{id:t,image:S.icon||"",size:ee+8,opacity:pe,animated:n,color:ve,node:S,active:me,selected:B}):ue.jsx(Tye,{id:t,size:ee,opacity:pe,animated:n,color:ve,node:S,active:me,selected:B})}),[m,t,ve,ee,me,pe,n,B,S]),Le=q.useMemo(()=>V&&(V||B||Q)&&K&&ue.jsxs(ar.group,{position:ge,children:[ue.jsx(I0,{text:K,fontUrl:r,opacity:pe,stroke:x.node.label.stroke,backgroundColor:x.node.label.backgroundColor,backgroundOpacity:x.node.label.backgroundOpacity,padding:x.node.label.padding,strokeColor:x.node.label.strokeColor,strokeWidth:x.node.label.strokeWidth,radius:x.node.label.radius,active:B||Q||X||U,color:B||Q||X||U?x.node.label.activeColor:x.node.label.color}),J&&ue.jsx("group",{position:[0,-(ee-3),0],children:ue.jsx(I0,{text:J,fontUrl:r,fontSize:5,opacity:pe,stroke:x.node.subLabel?.stroke,active:B||Q||X||U,color:B||Q||X||U?x.node.subLabel?.activeColor:x.node.subLabel?.color})})]}),[Q,U,X,B,K,r,ge,V,ee,pe,J,x.node.label.activeColor,x.node.label.color,x.node.label.stroke,x.node.label.backgroundColor,x.node.label.backgroundOpacity,x.node.label.padding,x.node.label.strokeColor,x.node.label.strokeWidth,x.node.label.radius,x.node.subLabel?.activeColor,x.node.subLabel?.color,x.node.subLabel?.stroke]),Ie=q.useMemo(()=>ne&&s&&ue.jsx(TL,{prepend:!0,center:!0,children:s({data:S,canCollapse:Ee,isCollapsed:P,onCollapse:Te,onClose:()=>le(!1)})}),[ne,s,S,Ee,P,Te]);return ue.jsxs(ar.group,{renderOrder:1,userData:{id:t,type:"node"},ref:Y,position:xe,onPointerOver:he,onPointerOut:Ce,onClick:be=>{!e&&!X&&o?.(S,{canCollapse:Ee,isCollapsed:P},be)},onDoubleClick:be=>{!e&&!X&&a?.(S,be)},onContextMenu:()=>{e||(le(!0),p?.(S,{canCollapse:Ee,isCollapsed:P,onCollapse:Te}))},...oe(),children:[Re,Ie,Le]})};function Aye(n){return new Promise((e,t)=>{let i;function r(){i?e(i):(i=n.step(),r())}r()})}function lm(n){const e=[],t=[];return n.forEachNode((i,r)=>{e.push({...r,id:i,radius:r.size||1})}),n.forEachEdge((i,r)=>{t.push({...r,id:i})}),{nodes:e,edges:t}}function Cye({graph:n,radius:e,drags:t,getNodePosition:i}){const r=Dge(n,{scale:e}),{nodes:s,edges:o}=lm(n);return{step(){return!0},getNodePosition(a){if(i){const l=i(a,{graph:n,drags:t,nodes:s,edges:o});if(l)return l}return t?.[a]?.position?t?.[a]?.position:r?.[a]}}}function Rye({graph:n,radius:e=40,drags:t,getNodePosition:i,concentricSpacing:r=100}){const{nodes:s,edges:o}=lm(n),a={},l=b=>{const x=2*Math.PI*(e+b*r);return Math.floor(x/40)},u=new Map,h=[];for(const b of s){const S=n.getNodeAttribute(b.id,"data")?.level;typeof S=="number"&&S>=0?(u.has(S)||u.set(S,[]),u.get(S).push(b.id)):h.push({id:b.id,metric:n.degree(b.id)})}h.sort((b,x)=>x.metric-b.metric);for(const[b,x]of u.entries()){const S=x.length,_=e+b*r;for(let T=0;T<S;T++){const A=2*Math.PI*T/S;a[x[T]]={x:_*Math.cos(A),y:_*Math.sin(A)}}}const p=new Set(u.keys());let m=0,y=0;for(;y<h.length;){for(;p.has(m);)m++;const b=l(m),x=e+m*r;for(let S=0;S<b&&y<h.length;S++){const _=2*Math.PI*S/b;a[h[y].id]={x:x*Math.cos(_),y:x*Math.sin(_)},y++}m++}return{step(){return!0},getNodePosition(b){if(i){const x=i(b,{graph:n,drags:t,nodes:s,edges:o});if(x)return x}return t?.[b]?.position?t[b].position:a[b]}}}function Dye({graph:n,drags:e,getNodePosition:t}){const{nodes:i,edges:r}=lm(n);return{step(){return!0},getNodePosition(s){return t(s,{graph:n,drags:e,nodes:i,edges:r})}}}function iH(n,e=[]){const t=e.length;for(const i of n){const r=e.indexOf(i);if(r>-1){const s=[...e.slice(r),i].map(o=>o.data.id);throw new Error(`Invalid Graph: Circular node path detected: ${s.join(" -> ")}.`)}t>i.depth&&(i.depth=t,iH(i.out,[...e,i]))}}function rH(n,e){let t=!1;const i=n.reduce((o,a)=>({...o,[a.id]:{data:a,out:[],depth:-1,ins:[]}}),{});try{for(const o of e){const a=o.source,l=o.target;if(!i.hasOwnProperty(a))throw new Error(`Missing source Node ${a}`);if(!i.hasOwnProperty(l))throw new Error(`Missing target Node ${l}`);const u=i[a],h=i[l];h.ins.push(u),u.out.push(h)}iH(Object.values(i))}catch{t=!0}const r=Object.keys(i).map(o=>i[o].depth),s=Math.max(...r);return{invalid:t,depths:i,maxDepth:s||1}}function Oye({graph:n,drags:e,iterations:t,...i}){Pge.assign(n);const r=Fge(n,{iterations:t,settings:i});return{step(){return!0},getNodePosition(s){return e?.[s]?.position||r?.[s]}}}function Lye(){const n=G=>()=>G;let t=G=>G.index,i=[],r=[],s,o,a=[100,100],l=n(1),u=n(-1),h=n(100),p=n(.1);const m={};let y=.1,b=.001,x=[],S=[0,0],_,T=G=>G.cluster,A="treemap",M=!0,C=.1;function R(G){if(!M)return R;A==="force"&&(_.tick(),z());for(let K=0,J=i.length,ee,V=G*C;K<J;++K)ee=i[K],ee.vx+=(m[T(ee)].x-ee.x)*V,ee.vy+=(m[T(ee)].y-ee.y)*V}function L(){i&&(A==="treemap"?W():j())}R.initialize=function(G){i=G,L()};function I(G){const K=T(G.source),J=T(G.target);return K<=J?K+"~"+J:J+"~"+K}function P(G){let K=new Map,J={};return G.forEach(function(ee){K.has(T(ee))||K.set(T(ee),{count:0,sumforceNodeSize:0})}),G.forEach(function(ee){J=K.get(T(ee)),J.count=J.count+1,J.sumforceNodeSize=J.sumforceNodeSize+Math.PI*(l(ee)*l(ee))*1.3,K.set(T(ee),J)}),K}function U(G){const K=new Map,J=[];return G.forEach(function(ee){let V=I(ee),Y;K.has(V)?Y=K.get(V):Y=0,Y+=1,K.set(V,Y)}),K.forEach(function(ee,V){let Y,Q;Y=V.split("~")[0],Q=V.split("~")[1],Y!==void 0&&Q!==void 0&&J.push({source:Y,target:Q,count:ee})}),J}function B(){const G=[],K=[],J=new Map;let ee,V,Y,Q,re;Q=P(i),re=U(r);for(ee of Q.keys())Y=Q.get(ee),G.push({id:ee,size:Y.count,r:Math.sqrt(Y.sumforceNodeSize/Math.PI)}),J.set(ee,V);return re.forEach(function(ne){const le=J.get(ne.source),fe=J.get(ne.target);le!==void 0&&fe!==void 0&&K.push({source:le,target:fe,count:ne.count})}),{nodes:G,links:K}}function F(){const G=[];let K,J,ee;ee=P(R.nodes());for(K of ee.keys())J=ee.get(K),G.push({id:K,size:J.count});return{id:"clustersTree",children:G}}function z(){return m.none={x:0,y:0},x.forEach(function(G){A==="treemap"?m[G.data.id]={x:G.x0+(G.x1-G.x0)/2-S[0],y:G.y0+(G.y1-G.y0)/2-S[1]}:m[G.id]={x:G.x-S[0],y:G.y-S[1]}}),m}function W(){const G=kve().size(R.size());o=nM(F()).sum(K=>K.radius).sort(function(K,J){return J.height-K.height||J.value-K.value}),x=G(o).leaves(),z()}function X(){let G=0;i.length!==0&&r.forEach(function(K){let J,ee;if(i){if(J=K.source,ee=K.target,typeof K.source!="object"&&(J=i.find(V=>V.id===K.source)),typeof K.target!="object"&&(ee=i.find(V=>V.id===K.target)),J===void 0||ee===void 0)throw Error("Error setting links, couldnt find nodes for a link (see it on the console)");K.source=J,K.target=ee,K.index=G++}})}function j(){let G;!i||!i.length||(X(),G=B(),s.size>0&&G.nodes.forEach(K=>{K.fx=s.get(K.id)?.position?.x,K.fy=s.get(K.id)?.position?.y}),_=BG(G.nodes).force("x",sD(a[0]/2).strength(.1)).force("y",oD(a[1]/2).strength(.1)).force("collide",PG(K=>K.r).iterations(4)).force("charge",VG().strength(u)).force("links",IG(G.nodes.length?G.links:[]).distance(h).strength(p)),x=_.nodes(),z())}return R.template=function(G){return arguments.length?(A=G,L(),R):A},R.groupBy=function(G){return arguments.length?typeof G=="string"?(T=function(K){return K[G]},R):(T=G,R):T},R.enableGrouping=function(G){return arguments.length?(M=G,R):M},R.strength=function(G){return arguments.length?(C=G,R):C},R.getLinkStrength=function(G){return M?T(G.source)===T(G.target)?typeof y=="function"?y(G):y:typeof b=="function"?b(G):b:typeof y=="function"?y(G):y},R.id=function(G){return arguments.length?(t=G,R):t},R.size=function(G){return arguments.length?(a=G,R):a},R.linkStrengthInterCluster=function(G){return arguments.length?(b=G,R):b},R.linkStrengthIntraCluster=function(G){return arguments.length?(y=G,R):y},R.nodes=function(G){return arguments.length?(i=G,R):i},R.links=function(G){return arguments.length?(G===null?r=[]:r=G,L(),R):r},R.template=function(G){return arguments.length?(A=G,L(),R):A},R.forceNodeSize=function(G){return arguments.length?(l=typeof G=="function"?G:n(+G),L(),R):l},R.nodeSize=R.forceNodeSize,R.forceCharge=function(G){return arguments.length?(u=typeof G=="function"?G:n(+G),L(),R):u},R.forceLinkDistance=function(G){return arguments.length?(h=typeof G=="function"?G:n(+G),L(),R):h},R.forceLinkStrength=function(G){return arguments.length?(p=typeof G=="function"?G:n(+G),L(),R):p},R.offset=function(G){return arguments.length?(S=typeof G=="function"?G:n(+G),R):S},R.getFocis=z,R.setClusters=function(G){return s=G,R},R}const x4=["radialin","radialout"];function Pye({nodes:n,edges:e,mode:t="lr",nodeLevelRatio:i=2}){const{depths:r,maxDepth:s,invalid:o}=rH(n,e);if(o)return null;const a=x4.includes(t)?1:5,l=n.length/s*i*a;if(t){const u=(y,b)=>x=>y?(r[x.id].depth-s/2)*l*(b?-1:1):void 0,h=u(["lr","rl"].includes(t),t==="rl"),p=u(["td","bu"].includes(t),t==="td"),m=u(["zin","zout"].includes(t),t==="zout");n.forEach(y=>{y.fx=h(y),y.fy=p(y),y.fz=m(y)})}return x4.includes(t)?J0e(u=>{const h=r[u.id];return(t==="radialin"?s-h.depth:h.depth)*l}).strength(1):null}function jh({graph:n,nodeLevelRatio:e=2,mode:t=null,dimensions:i=2,nodeStrength:r=-250,linkDistance:s=50,clusterStrength:o=.5,linkStrengthInterCluster:a=.01,linkStrengthIntraCluster:l=.5,forceLinkDistance:u=100,forceLinkStrength:h=.1,clusterType:p="force",forceCharge:m=-700,getNodePosition:y,drags:b,clusters:x,clusterAttribute:S,forceLayout:_}){const{nodes:T,edges:A}=lm(n),C=i===2&&A.length>25?r*2:r;let R,L;_==="forceDirected2d"?(R=sD(),L=oD()):(R=sD(600).strength(.05),L=oD(600).strength(.05));const I=BG().force("center",Bge(0,0)).force("link",IG()).force("charge",VG().strength(C)).force("x",R).force("y",L).force("z",eve()).force("collide",PG(F=>F.radius+10)).force("dagRadial",Pye({nodes:T,edges:A,mode:t,nodeLevelRatio:e})).stop();let P;if(S){let F=m;if(T?.length){const z=Math.ceil(T.length/200);F=m*z}P=Lye().setClusters(x).strength(o).template(p).groupBy(z=>z.data[S]).links(A).size([100,100]).linkStrengthInterCluster(a).linkStrengthIntraCluster(l).forceLinkDistance(u).forceLinkStrength(h).forceCharge(F).forceNodeSize(z=>z.radius)}let U=I.numDimensions(i).nodes(T);if(P&&(U=U.force("group",P)),s){let F=U.force("link");F&&(F.id(z=>z.id).links(A).distance(s),P&&(F=F.strength(P?.getLinkStrength??.1)))}const B=new Map(T.map(F=>[F.id,F]));return{step(){for(;I.alpha()>.01;)I.tick();return!0},getNodePosition(F){if(y){const z=y(F,{graph:n,drags:b,nodes:T,edges:A});if(z)return z}return b?.[F]?.position?b?.[F]?.position:B.get(F)}}}const Iye={td:{x:"x",y:"y",factor:-1},lr:{x:"y",y:"x",factor:1}};function S4({graph:n,drags:e,mode:t="td",nodeSeparation:i=1,nodeSize:r=[50,50],getNodePosition:s}){const{nodes:o,edges:a}=lm(n),{depths:l}=rH(o,a),u=Object.keys(l).map(x=>l[x]),h=Tve().id(x=>x.data.id).parentId(x=>x.ins?.[0]?.data?.id)(u),m=Lve().separation(()=>i).nodeSize(r)(nM(h)).descendants(),y=Iye[t],b=new Map(o.map(x=>{const{x:S,y:_}=m.find(T=>T.data.id===x.id);return[x.id,{...x,[y.x]:S*y.factor,[y.y]:_*y.factor,z:0}]}));return{step(){return!0},getNodePosition(x){if(s){const S=s(x,{graph:n,drags:e,nodes:o,edges:a});if(S)return S}return e?.[x]?.position?e?.[x]?.position:b.get(x)}}}function w4(n,e,t){const i=Math.acos(1-2*(n+.5)/e),r=Math.PI*(1+Math.sqrt(5))*(n+.5),s=t*Math.sin(i)*Math.cos(r),o=t*Math.sin(i)*Math.sin(r),a=t*Math.cos(i);return new ae(s,o,a)}function Nye({graph:n,radius:e=40,drags:t,getNodePosition:i,concentricSpacing:r=100}){const{nodes:s,edges:o}=lm(n),a={},l=b=>{const x=2*Math.PI*(e+b*r);return Math.floor(x/40)},u=new Map,h=[];for(const b of s){const S=n.getNodeAttribute(b.id,"data")?.level;typeof S=="number"&&S>=0?(u.has(S)||u.set(S,[]),u.get(S).push(b.id)):h.push({id:b.id,metric:n.degree(b.id)})}h.sort((b,x)=>x.metric-b.metric);for(const[b,x]of u.entries()){const S=x.length,_=e+b*r;for(const[T,A]of x.entries()){const M=w4(T,S,_);a[A]={x:M.x,y:M.y,z:M.z}}}const p=new Set(u.keys());let m=0,y=0;for(;y<h.length;){for(;p.has(m);)m++;const b=l(m),x=e+m*r;for(let S=0;S<b&&y<h.length;S++){const _=w4(S,b,x);a[h[y].id]={x:_.x,y:_.y,z:_.z},y++}m++}return{step(){return!0},getNodePosition(b){if(i){const x=i(b,{graph:n,drags:t,nodes:s,edges:o});if(x)return x}return t?.[b]?.position?t[b].position:a[b]}}}function Uye({graph:n,margin:e,drags:t,getNodePosition:i,ratio:r,gridSize:s,maxIterations:o}){const{nodes:a,edges:l}=lm(n),u=Hve(n,{maxIterations:o,inputReducer:(h,p)=>({...p,x:p.x||0,y:p.y||0}),settings:{ratio:r,margin:e,gridSize:s}});return{step(){return!0},getNodePosition(h){if(i){const p=i(h,{graph:n,drags:t,nodes:a,edges:l});if(p)return p}return t?.[h]?.position?t?.[h]?.position:u?.[h]}}}const kye=["forceDirected2d","treeTd2d","treeLr2d","radialOut2d","treeTd3d","treeLr3d","radialOut3d","forceDirected3d"];function zye({type:n,...e}){if(kye.includes(n)){const{nodeStrength:t,linkDistance:i,nodeLevelRatio:r}=e;if(n==="forceDirected2d")return jh({...e,dimensions:2,nodeLevelRatio:r||2,nodeStrength:t||-250,linkDistance:i,forceLayout:n});if(n==="treeTd2d")return jh({...e,mode:"td",dimensions:2,nodeLevelRatio:r||5,nodeStrength:t||-250,linkDistance:i||50,forceLayout:n});if(n==="treeLr2d")return jh({...e,mode:"lr",dimensions:2,nodeLevelRatio:r||5,nodeStrength:t||-250,linkDistance:i||50,forceLayout:n});if(n==="radialOut2d")return jh({...e,mode:"radialout",dimensions:2,nodeLevelRatio:r||5,nodeStrength:t||-500,linkDistance:i||100,forceLayout:n});if(n==="treeTd3d")return jh({...e,mode:"td",dimensions:3,nodeLevelRatio:r||2,nodeStrength:t||-500,linkDistance:i||50});if(n==="treeLr3d")return jh({...e,mode:"lr",dimensions:3,nodeLevelRatio:r||2,nodeStrength:t||-500,linkDistance:i||50,forceLayout:n});if(n==="radialOut3d")return jh({...e,mode:"radialout",dimensions:3,nodeLevelRatio:r||2,nodeStrength:t||-500,linkDistance:i||100,forceLayout:n});if(n==="forceDirected3d")return jh({...e,dimensions:3,nodeLevelRatio:r||2,nodeStrength:t||-250,linkDistance:i,forceLayout:n})}else if(n==="circular2d"){const{radius:t}=e;return Cye({...e,radius:t||300})}else{if(n==="concentric2d")return Rye(e);if(n==="concentric3d")return Nye(e);if(n==="hierarchicalTd")return S4({...e,mode:"td"});if(n==="hierarchicalLr")return S4({...e,mode:"lr"});if(n==="nooverlap"){const{graph:t,maxIterations:i,ratio:r,margin:s,gridSize:o,...a}=e;return Uye({graph:t,margin:s||10,maxIterations:i||50,ratio:r||10,gridSize:o||20,...a})}else if(n==="forceatlas2"){const{graph:t,iterations:i,gravity:r,scalingRatio:s,...o}=e;return Oye({type:"forceatlas2",graph:t,...o,scalingRatio:s||100,gravity:r||10,iterations:i||50})}else if(n==="custom")return Dye({...e})}throw new Error(`Layout ${n} not found.`)}const Fye=({layoutType:n,sizingType:e,labelType:t,sizingAttribute:i,clusterAttribute:r,selections:s,nodes:o,edges:a,actives:l,collapsedNodeIds:u,defaultNodeSize:h,maxNodeSize:p,minNodeSize:m,layoutOverrides:y,constrainDragging:b})=>{const x=xt(V=>V.graph),S=xt(V=>V.clusters),_=xt(V=>V.nodes),T=xt(V=>V.setClusters),A=xt(V=>V.collapsedNodeIds),M=xt(V=>V.setEdges),C=xt(V=>V.nodes),R=xt(V=>V.setNodes),L=xt(V=>V.setSelections),I=xt(V=>V.setActives),P=xt(V=>V.drags),U=xt(V=>V.setDrags),B=xt(V=>V.setCollapsedNodeIds),F=q.useRef(!1),z=q.useRef(null),W=Br(V=>V.camera),X=q.useRef(P),j=q.useRef([]);q.useEffect(()=>{if(!r)return;const V=_.map(Q=>Q.id),Y=o.find(Q=>!V.includes(Q.id));if(Y){const Q=Y.data[r],re=S.get(Q),ne={...X.current};re?.nodes?.forEach(le=>ne[le.id]=void 0),X.current=ne,U(ne)}},[_,o,r,S,U]);const{visibleEdges:G,visibleNodes:K}=q.useMemo(()=>aye({collapsedIds:A,nodes:o,edges:a}),[A,o,a]),J=q.useCallback(V=>{const Y={...X.current};V.forEach(Q=>Y[Q.id]=Q),X.current=Y,U(Y)},[U]),ee=q.useCallback(async V=>{z.current=V||zye({...y,type:n,graph:x,drags:X.current,clusters:j?.current,clusterAttribute:r}),await Aye(z.current);const Y=Jve({graph:x,layout:z.current,sizingType:e,labelType:t,sizingAttribute:i,maxNodeSize:p,minNodeSize:m,defaultNodeSize:h,clusterAttribute:r}),Q=Wve({nodes:Y.nodes,clusterAttribute:r});b&&Q.forEach(re=>{j.current.get(re.label)?.nodes.length===re.nodes.length&&(re.position=j.current?.get(re.label)?.position??re.position)}),M(Y.edges),R(Y.nodes),T(Q),r&&J(Y.nodes)},[y,n,r,e,t,i,p,m,h,M,R,T]);return q.useEffect(()=>{X.current=P},[P,r,ee]),q.useEffect(()=>{j.current=S},[S]),q.useEffect(()=>{const V=C.map(Q=>({...Q,labelVisible:XG({nodeCount:C?.length,labelType:t,camera:W,nodePosition:Q?.position})("node",Q?.size)}));V.some((Q,re)=>Q.labelVisible!==C[re].labelVisible)&&R(V)},[W,W.zoom,W.position.z,R,C,t]),q.useEffect(()=>{F.current&&L(s)},[s,L]),q.useEffect(()=>{F.current&&I(l)},[l,I]),q.useEffect(()=>{async function V(){F.current=!1,Qve(x,K,G),await ee(),requestAnimationFrame(()=>F.current=!0)}V()},[K,G]),q.useEffect(()=>{F.current&&B(u)},[u,B]),q.useEffect(()=>{F.current&&(X.current={},U({}),ee())},[n,ee,U]),q.useEffect(()=>{F.current&&ee(z.current)},[e,i,t,ee]),{updateLayout:ee}},Bye=n=>n.reduceEdges((e,t,i,r,s)=>{const o=`${r}-${s}`,a={id:t,source:r,target:s,...i},l=e.get(o);return l?l.push(a):e.set(o,[a]),e},new Map),Vye=(n,e)=>{if(!n||n.size===0)return[];const t=Bye(n),i=[],r=e==="all"||e==="edges";for(const[s,o]of t){const[a,l]=s.split("-"),u=o[0];if(!a||!l||!u)continue;const h=u.size||1,p=h+o.length*h*.5,m=o.length>1,y=m?`${o.length} edges`:u.label,b={...u,source:a,target:l,label:y,labelVisible:r,size:p,data:{...u.data||{},originalEdges:o,count:o.length,isAggregated:m,originalSize:h}};i.push(b)}return i},Gye=q.forwardRef(({onNodeClick:n,onNodeDoubleClick:e,onNodeContextMenu:t,onEdgeContextMenu:i,onEdgeClick:r,onEdgePointerOver:s,onEdgePointerOut:o,onNodePointerOver:a,onNodePointerOut:l,onClusterClick:u,onNodeDragged:h,onClusterDragged:p,onClusterPointerOver:m,onClusterPointerOut:y,contextMenu:b,animated:x,disabled:S,draggable:_,constrainDragging:T=!1,edgeLabelPosition:A,edgeArrowPosition:M,edgeInterpolation:C="linear",labelFontUrl:R,renderNode:L,onRenderCluster:I,aggregateEdges:P,...U},B)=>{const{layoutType:F,clusterAttribute:z,labelType:W}=U,X=Br(ge=>ge.gl),j=Br(ge=>ge.scene),G=Br(ge=>ge.camera),{updateLayout:K}=Fye({...U,constrainDragging:T});if(z&&!(F==="forceDirected2d"||F==="forceDirected3d"))throw new Error("Clustering is only supported for the force directed layouts.");const J=xt(ge=>ge.graph),ee=xt(ge=>ge.nodes),V=xt(ge=>ge.edges),Y=xt(ge=>ge.setEdges),Q=xt(ge=>[...ge.clusters.values()]),re=q.useMemo(()=>P?Vye(J,W):V,[V,P,J,W]);q.useEffect(()=>{P&&V.length!==re.length&&Y(re)},[re,V.length,Y,P]);const{centerNodesById:ne,fitNodesInViewById:le,isCentered:fe}=lye({animated:x,disabled:S,layoutType:F});q.useImperativeHandle(B,()=>({centerGraph:ne,fitNodesInView:le,graph:J,renderScene:()=>X.render(j,G)}),[ne,le,J,X,j,G]);const pe=q.useCallback(ge=>{h?.(ge),z&&K()},[z,h,K]),Ee=q.useMemo(()=>ee.map(ge=>ue.jsx(Mye,{id:ge?.id,labelFontUrl:R,draggable:_,constrainDragging:T,disabled:S,animated:x,contextMenu:b,renderNode:L,onClick:n,onDoubleClick:e,onContextMenu:t,onPointerOver:a,onPointerOut:l,onDragged:pe},ge?.id)),[T,x,b,S,_,R,ee,n,t,e,pe,l,a,L]),Te=q.useMemo(()=>x?re.map(ge=>ue.jsx(gye,{id:ge.id,disabled:S,animated:x,labelFontUrl:R,labelPlacement:A,arrowPlacement:M,interpolation:C,contextMenu:b,onClick:r,onContextMenu:i,onPointerOver:s,onPointerOut:o},ge.id)):ue.jsx(Sye,{edges:re,disabled:S,animated:x,labelFontUrl:R,labelPlacement:A,arrowPlacement:M,interpolation:C,contextMenu:b,onClick:r,onContextMenu:i,onPointerOver:s,onPointerOut:o}),[x,b,S,M,C,A,re,R,r,i,o,s]),xe=q.useMemo(()=>Q.map(ge=>ue.jsx(fye,{animated:x,disabled:S,draggable:_,labelFontUrl:R,onClick:u,onPointerOver:m,onPointerOut:y,onDragged:p,onRender:I,...ge},ge.label)),[x,Q,S,_,R,u,y,m,p,I]);return fe&&ue.jsxs(q.Fragment,{children:[Te,Ee,xe]})});function YS(n,e,t){const{offsetX:i,offsetY:r}=n,{width:s,height:o}=t;e.set(i/s*2-1,-(r/o)*2+1)}function Hye(n){const e=document.createElement("div");return e.style.pointerEvents="none",e.style.border=n.lasso.border,e.style.backgroundColor=n.lasso.background,e.style.position="fixed",e}const jye=({children:n,type:e="none",onLasso:t,onLassoEnd:i,disabled:r})=>{const s=xt(B=>B.theme),o=Br(B=>B.camera),a=Br(B=>B.gl),l=Br(B=>B.setEvents),u=Br(B=>B.size),h=Br(B=>B.get),p=Br(B=>B.scene),m=iM(),y=xt(B=>B.actives),b=xt(B=>B.setActives),x=xt(B=>B.edges),S=xt(B=>B.edgeMeshes),_=q.useRef(null),T=q.useRef(null),A=q.useRef(Hye(s)),M=q.useRef(null),C=q.useRef(!1),R=q.useRef(h().events.enabled),L=q.useRef(m.controls?.enabled),I=q.useCallback(B=>{if(C.current){const[F,z,W]=M.current;W.x=Math.max(F.x,B.clientX),W.y=Math.max(F.y,B.clientY),z.x=Math.min(F.x,B.clientX),z.y=Math.min(F.y,B.clientY),A.current.style.left=`${z.x}px`,A.current.style.top=`${z.y}px`,A.current.style.width=`${W.x-z.x}px`,A.current.style.height=`${W.y-z.y}px`,YS(B,_.current.endPoint,u),YS(B,T.current.endPoint,u);const X=[],j=T.current.select().sort(K=>K.uuid).filter(K=>K.geometry?.userData?.type===e||e==="all").map(K=>x[S.indexOf(K)].id);X.push(...j);const G=_.current.select().sort(K=>K.uuid).filter(K=>K.isMesh&&K.userData?.id&&(K.userData?.type===e||e==="all")).map(K=>K.userData.id);X.push(...G),requestAnimationFrame(()=>{b(X),t?.(X)}),document.addEventListener("pointermove",I,{passive:!0,capture:!0,once:!0})}},[u,x,S,e,b,t]),P=q.useCallback(()=>{C.current&&(l({enabled:R.current}),C.current=!1,A.current.parentElement?.removeChild(A.current),m.controls.enabled=L.current,i?.(y),document.removeEventListener("pointermove",I),document.removeEventListener("pointerup",P))},[l,m.controls,i,y,I]),U=q.useCallback(B=>{if(B.shiftKey){R.current=h().events.enabled,L.current=m.controls?.enabled,_.current=new m2(o,p);const F=new bT;S.length&&F.add(...S),T.current=new m2(o,F),M.current=[new ot,new ot,new ot];const[z]=M.current;m.controls.enabled=!1,l({enabled:!1}),C.current=!0,a.domElement.parentElement?.appendChild(A.current),A.current.style.left=`${B.clientX}px`,A.current.style.top=`${B.clientY}px`,A.current.style.width="0px",A.current.style.height="0px",z.x=B.clientX,z.y=B.clientY,YS(B,_.current.startPoint,u),YS(B,T.current.startPoint,u),document.addEventListener("pointermove",I,{passive:!0,capture:!0,once:!0}),document.addEventListener("pointerup",P,{passive:!0})}},[o,m.controls,S,h,a.domElement.parentElement,I,P,p,l,u]);return q.useEffect(()=>{if(!(r||e==="none"))return typeof window<"u"&&(document.addEventListener("pointerdown",U,{passive:!0}),document.addEventListener("pointermove",I,{passive:!0}),document.addEventListener("pointerup",P,{passive:!0})),()=>{typeof window<"u"&&(document.removeEventListener("pointerdown",U),document.removeEventListener("pointermove",I),document.removeEventListener("pointerup",P))}},[e,r,U,I,P]),ue.jsx("group",{children:n})},Wye={canvas:{background:"#fff"},node:{fill:"#7CA0AB",activeFill:"#1DE9AC",opacity:1,selectedOpacity:1,inactiveOpacity:.2,label:{color:"#2A6475",stroke:"#fff",activeColor:"#1DE9AC"},subLabel:{color:"#ddd",stroke:"transparent",activeColor:"#1DE9AC"}},lasso:{border:"1px solid #55aaff",background:"rgba(75, 160, 255, 0.1)"},ring:{fill:"#D8E6EA",activeFill:"#1DE9AC"},edge:{fill:"#D8E6EA",activeFill:"#1DE9AC",opacity:1,selectedOpacity:1,inactiveOpacity:.1,label:{stroke:"#fff",color:"#2A6475",activeColor:"#1DE9AC",fontSize:6},subLabel:{color:"#ddd",stroke:"transparent",activeColor:"#1DE9AC"}},arrow:{fill:"#D8E6EA",activeFill:"#1DE9AC"},cluster:{stroke:"#D8E6EA",opacity:1,selectedOpacity:1,inactiveOpacity:.1,label:{stroke:"#fff",color:"#2A6475"}}},Xye="_canvas_670zp_1",qye={canvas:Xye},Yye={alpha:!0,antialias:!0},$ye={position:[0,0,1e3],near:5,far:5e4,fov:10},Zye=q.forwardRef(({cameraMode:n="pan",layoutType:e="forceDirected2d",sizingType:t="default",labelType:i="auto",theme:r=Wye,animated:s=!0,defaultNodeSize:o=7,minNodeSize:a=5,maxNodeSize:l=15,lassoType:u="none",glOptions:h={},edges:p,children:m,nodes:y,minDistance:b,maxDistance:x,minZoom:S,maxZoom:_,onCanvasClick:T,disabled:A,onLasso:M,onLassoEnd:C,aggregateEdges:R,...L},I)=>{const P=q.useRef(null),U=q.useRef(null),B=q.useRef(null);q.useImperativeHandle(I,()=>({centerGraph:(K,J)=>P.current?.centerGraph(K,J),fitNodesInView:(K,J)=>P.current?.fitNodesInView(K,J),zoomIn:()=>{const K=U.current?.controls;if(!K)return;const J=K.distance,ee=K.camera.zoom,V=ee+ee/2,Y=J/V;(!b||Y>=b)&&U.current?.zoomIn()},zoomOut:()=>{const K=U.current?.controls;if(!K)return;const J=K.distance,ee=K.camera.zoom,V=ee-ee/2,Y=J/V;(!x||Y<=x)&&U.current?.zoomOut()},dollyIn:K=>U.current?.dollyIn(K),dollyOut:K=>U.current?.dollyOut(K),panLeft:()=>U.current?.panLeft(),panRight:()=>U.current?.panRight(),panDown:()=>U.current?.panDown(),panUp:()=>U.current?.panUp(),resetControls:K=>U.current?.resetControls(K),getControls:()=>U.current?.controls,getGraph:()=>P.current?.graph,exportCanvas:()=>(P.current.renderScene(),B.current.toDataURL()),freeze:()=>U.current?.freeze(),unFreeze:()=>U.current?.unFreeze()}));const{selections:F,actives:z,collapsedNodeIds:W}=L,X=p.length+y.length>400?!1:s,j=q.useMemo(()=>({...h,...Yye}),[h]),G=q.useRef(ZG({selections:F,actives:z,theme:r,collapsedNodeIds:W})).current;return q.useEffect(()=>{G.getState().setTheme(r)},[r,G]),ue.jsx("div",{className:qye.canvas,children:ue.jsx(cue,{orthographic:n==="orthographic",legacy:!0,linear:!0,ref:B,flat:!0,gl:j,camera:$ye,onPointerMissed:T,children:ue.jsxs(iye,{store:G,children:[r.canvas?.background&&ue.jsx("color",{attach:"background",args:[r.canvas.background]}),ue.jsx("ambientLight",{intensity:1}),m,r.canvas?.fog&&ue.jsx("fog",{attach:"fog",args:[r.canvas.fog,4e3,9e3]}),ue.jsx(rye,{mode:n,ref:U,disabled:A,minDistance:b,maxDistance:x,minZoom:S,maxZoom:_,animated:s,children:ue.jsx(jye,{disabled:A,type:u,onLasso:M,onLassoEnd:C,children:ue.jsx(q.Suspense,{children:ue.jsx(Gye,{ref:P,disabled:A,animated:X,edges:p,nodes:y,layoutType:e,sizingType:t,labelType:i,defaultNodeSize:o,minNodeSize:a,maxNodeSize:l,aggregateEdges:R,...L})})})})]})})})});function Kye({graphData:n,selectedType:e,filters:t,onTypeSelect:i}){const{nodes:r,edges:s}=q.useMemo(()=>{if(!n)return{nodes:[],edges:[]};if(!e){const p={};return Object.entries(n.categories).forEach(([x,S])=>{p[S]||(p[S]={count:0,types:[]}),p[S].count++,p[S].types.push(x)}),{nodes:Object.entries(p).sort((x,S)=>S[1].count-x[1].count).slice(0,20).map(([x,S])=>({id:x,label:`${x} (${S.count})`,size:Math.max(15,Math.min(35,S.count/10)),fill:E4(x)})),edges:[]}}const a=n.edges.filter(p=>{if(p.source!==e)return!1;const m=p.relationship.toLowerCase();return m==="contains"&&t.contains||m==="extends"&&t.extends||m==="generic"&&t.generic}),l=new Set([e]);a.forEach(p=>l.add(p.target));const u=Array.from(l).map(p=>({id:p,label:p,fill:p===e?"#0176d3":E4(n.categories[p]||"unknown"),size:p===e?20:10})),h=a.map((p,m)=>({id:`${p.source}-${p.target}-${m}`,source:p.source,target:p.target,label:p.relationship,fill:Qye(p.relationship)}));return{nodes:u,edges:h}},[n,e,t]),o=a=>{a&&a.id&&i(a.id)};return ue.jsxs("div",{className:"graph-container",children:[ue.jsx("h3",{children:"Dependency Graph"}),ue.jsx("p",{className:"graph-note",children:e?`Showing dependencies for: ${e}`:"Overview of top categories - select a type to explore"}),ue.jsx("div",{style:{width:"100%",height:"600px",border:"1px solid #ddd",borderRadius:"8px",background:"#fafafa"},children:ue.jsx(Zye,{nodes:r,edges:s,layoutType:"forceDirected2d",edgeArrowPosition:"end",onNodeClick:o,draggable:!0,readonly:!1})})]})}function E4(n){return{common:"#0176d3",objects:"#2e844a",permissions:"#7b1fa2",flows:"#e65100",apex:"#d32f2f",lwc:"#00838f",ai:"#6a1b9a",ai_ml:"#6a1b9a",datacloud:"#00695c",data_cloud:"#00695c"}[n]||"#546e7a"}function Qye(n){return{Contains:"#1565c0",Extends:"#7b1fa2",Generic:"#e65100"}[n]||"#546e7a"}function Jye({children:n,value:e,onChange:t}){const i=Rs.Children.toArray(n);return ue.jsxs("div",{className:"simple-tabs",children:[ue.jsx("div",{className:"tabs-header",children:i.map(r=>ue.jsx("button",{className:`tab-button ${e===r.props.value?"active":""}`,onClick:()=>t(r.props.value),children:r.props.label},r.props.value))}),ue.jsx("div",{className:"tabs-content",children:i.find(r=>r.props.value===e)?.props.children})]})}function T4({children:n}){return ue.jsx(ue.Fragment,{children:n})}function ebe({graphData:n,selectedType:e,searchQuery:t,onTypeSelect:i}){const[r,s]=q.useState("details"),o=q.useMemo(()=>{if(!n||!t||t.trim().length===0)return[];const l=t.toLowerCase();return n.nodes.filter(u=>u.toLowerCase().includes(l))},[n,t]),a=q.useMemo(()=>{if(!n||!e)return null;const l=n.edges.filter(m=>m.source===e),u=n.edges.filter(m=>m.target===e),h=n.categories[e]||"unknown",p={Contains:l.filter(m=>m.relationship==="Contains"),Extends:l.filter(m=>m.relationship==="Extends"),Generic:l.filter(m=>m.relationship==="Generic")};return{category:h,dependencies:l,dependents:u,depsByRelationship:p}},[n,e]);return t&&t.trim().length>0?ue.jsxs("div",{className:"type-details",children:[ue.jsx("h2",{children:"Search Results"}),ue.jsxs("p",{children:["Found ",o.length,' types matching "',ue.jsx("strong",{children:t}),'"']}),o.length>50&&ue.jsx("p",{children:ue.jsx("em",{children:"Showing first 50 results"})}),ue.jsx("div",{className:"dependency-list",children:o.slice(0,50).map(l=>ue.jsxs("div",{className:"dependency-item",onClick:()=>i(l),children:[l,ue.jsx("span",{className:"relationship-badge contains",children:n.categories[l]||"unknown"})]},l))})]}):e?ue.jsxs("div",{className:"type-details",children:[ue.jsx("h2",{children:e}),ue.jsxs(Jye,{value:r,onChange:s,children:[ue.jsx(T4,{value:"details",label:"Details",children:ue.jsxs("div",{className:"tab-content",children:[ue.jsxs("div",{className:"info-box",children:[ue.jsx("strong",{children:"Category:"})," ",a.category,ue.jsx("br",{}),ue.jsx("strong",{children:"Dependencies:"})," ",a.dependencies.length,ue.jsx("br",{}),ue.jsx("strong",{children:"Used by:"})," ",a.dependents.length," types"]}),Object.entries(a.depsByRelationship).filter(([l,u])=>u.length>0).map(([l,u])=>ue.jsxs("div",{children:[ue.jsxs("h3",{children:[l," Dependencies (",u.length,")"]}),ue.jsx("ul",{className:"dependency-list",children:u.map(h=>ue.jsxs("li",{className:"dependency-item",onClick:()=>i(h.target),children:[h.target,ue.jsx("span",{className:`relationship-badge ${h.relationship.toLowerCase()}`,children:h.relationship})]},h.target))})]},l)),a.dependents.length>0&&ue.jsxs("div",{children:[ue.jsxs("h3",{children:["Used By (",a.dependents.length,")"]}),ue.jsxs("ul",{className:"dependency-list",children:[a.dependents.slice(0,20).map(l=>ue.jsxs("li",{className:"dependency-item",onClick:()=>i(l.source),children:[l.source,ue.jsx("span",{className:`relationship-badge ${l.relationship.toLowerCase()}`,children:l.relationship})]},l.source)),a.dependents.length>20&&ue.jsx("li",{style:{padding:"0.5rem",color:"var(--text-secondary)"},children:ue.jsxs("em",{children:["... and ",a.dependents.length-20," more"]})})]})]})]})}),ue.jsx(T4,{value:"schema",label:"JSON Schema",children:ue.jsx("div",{className:"tab-content",children:ue.jsxs("div",{className:"info-box",children:[ue.jsx("h3",{children:"JSON Schema"}),ue.jsxs("p",{children:["JSON Schema generation for this type is currently in development. Once available, the schema will be displayed here showing the structure, field types, and validation rules for ",ue.jsx("strong",{children:e}),"."]}),ue.jsxs("p",{style:{marginTop:"1rem",fontSize:"0.9rem",color:"#706e6b"},children:["See the"," ",ue.jsx("a",{href:"https://github.com/composable-delivery/busbar-sf-types#json-schemas",target:"_blank",rel:"noopener noreferrer",children:"README"})," ","for information about enabling JSON Schema support."]})]})})})]})]}):ue.jsxs("div",{className:"type-details",children:[ue.jsx("h2",{children:"Welcome to Salesforce Types Explorer"}),ue.jsx("p",{children:"Select a type from the search results, graph, or browse by category to explore dependencies."}),ue.jsxs("div",{className:"info-box",children:[ue.jsx("h3",{children:"About"}),ue.jsx("p",{children:"This interactive tool visualizes the dependency graph of Salesforce metadata types. The graph shows:"}),ue.jsxs("ul",{children:[ue.jsxs("li",{children:[ue.jsx("strong",{children:"Contains:"})," Type A has a field of Type B"]}),ue.jsxs("li",{children:[ue.jsx("strong",{children:"Extends:"})," Type A extends/inherits from Type B"]}),ue.jsxs("li",{children:[ue.jsx("strong",{children:"Generic:"})," Type A is a generic instantiation of Type B"]})]})]})]})}function tbe(){const[n,e]=q.useState(null),[t,i]=q.useState(null),[r,s]=q.useState(""),[o,a]=q.useState({contains:!0,extends:!0,generic:!0}),[l,u]=q.useState(!0),[h,p]=q.useState(null);q.useEffect(()=>{fetch("/busbar-sf-types/type-graph.json").then(b=>b.json()).then(b=>{e(b),u(!1)}).catch(b=>{console.error("Error loading graph data:",b),p(b.message),u(!1)})},[]);const m=b=>{i(b),s("")},y=(b,x)=>{a(S=>({...S,[b]:x}))};return l?ue.jsx("div",{style:{padding:"2rem",textAlign:"center"},children:ue.jsx("h2",{children:"Loading Salesforce Types Explorer..."})}):h?ue.jsxs("div",{style:{padding:"2rem"},children:[ue.jsx("h2",{children:"Error Loading Data"}),ue.jsxs("p",{children:["Could not load the type graph data: ",h]})]}):ue.jsxs("div",{className:"app",children:[ue.jsx(Oee,{}),ue.jsx("main",{className:"main-container",children:ue.jsxs("div",{className:"layout",children:[ue.jsx(Lee,{graphData:n,searchQuery:r,setSearchQuery:s,filters:o,onFilterChange:y,onTypeSelect:m}),ue.jsxs("div",{className:"content",children:[ue.jsx(Kye,{graphData:n,selectedType:t,filters:o,onTypeSelect:m}),ue.jsx(ebe,{graphData:n,selectedType:t,searchQuery:r,onTypeSelect:m})]})]})}),ue.jsx("footer",{className:"footer",children:ue.jsx("div",{className:"container",children:ue.jsxs("p",{children:["Generated from"," ",ue.jsx("a",{href:"https://github.com/composable-delivery/busbar-sf-types",target:"_blank",rel:"noopener noreferrer",children:"busbar-sf-types"})," "," Data:"," ",ue.jsx("a",{href:"/busbar-sf-types/type-graph.json",target:"_blank",rel:"noopener noreferrer",children:"type-graph.json"})]})})})]})}YH.createRoot(document.getElementById("root")).render(ue.jsx(Rs.StrictMode,{children:ue.jsx(RJ,{children:ue.jsx(tbe,{})})}));
