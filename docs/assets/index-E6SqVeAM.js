function _7(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in n)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();function ro(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function wM(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function i(){var r=!1;try{r=this instanceof i}catch{}return r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var r=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,r.get?r:{enumerable:!0,get:function(){return n[i]}})}),t}var vA={exports:{}},Py={};var mI;function x7(){if(mI)return Py;mI=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,r,s){var o=null;if(s!==void 0&&(o=""+s),r.key!==void 0&&(o=""+r.key),"key"in r){s={};for(var a in r)a!=="key"&&(s[a]=r[a])}else s=r;return r=s.ref,{$$typeof:n,type:i,key:o,ref:r!==void 0?r:null,props:s}}return Py.Fragment=e,Py.jsx=t,Py.jsxs=t,Py}var gI;function w7(){return gI||(gI=1,vA.exports=x7()),vA.exports}var ne=w7(),yA={exports:{}},cn={};var vI;function S7(){if(vI)return cn;vI=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),d=Symbol.for("react.activity"),m=Symbol.iterator;function v(F){return F===null||typeof F!="object"?null:(F=m&&F[m]||F["@@iterator"],typeof F=="function"?F:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,w={};function _(F,X,ee){this.props=F,this.context=X,this.refs=w,this.updater=ee||b}_.prototype.isReactComponent={},_.prototype.setState=function(F,X){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,X,"setState")},_.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function A(){}A.prototype=_.prototype;function T(F,X,ee){this.props=F,this.context=X,this.refs=w,this.updater=ee||b}var E=T.prototype=new A;E.constructor=T,x(E,_.prototype),E.isPureReactComponent=!0;var C=Array.isArray;function R(){}var O={H:null,A:null,T:null,S:null},I=Object.prototype.hasOwnProperty;function L(F,X,ee){var le=ee.ref;return{$$typeof:n,type:F,key:X,ref:le!==void 0?le:null,props:ee}}function N(F,X){return L(F.type,X,F.props)}function V(F){return typeof F=="object"&&F!==null&&F.$$typeof===n}function B(F){var X={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(ee){return X[ee]})}var k=/\/+/g;function j(F,X){return typeof F=="object"&&F!==null&&F.key!=null?B(""+F.key):X.toString(36)}function q(F){switch(F.status){case"fulfilled":return F.value;case"rejected":throw F.reason;default:switch(typeof F.status=="string"?F.then(R,R):(F.status="pending",F.then(function(X){F.status==="pending"&&(F.status="fulfilled",F.value=X)},function(X){F.status==="pending"&&(F.status="rejected",F.reason=X)})),F.status){case"fulfilled":return F.value;case"rejected":throw F.reason}}throw F}function W(F,X,ee,le,oe){var ue=typeof F;(ue==="undefined"||ue==="boolean")&&(F=null);var he=!1;if(F===null)he=!0;else switch(ue){case"bigint":case"string":case"number":he=!0;break;case"object":switch(F.$$typeof){case n:case e:he=!0;break;case f:return he=F._init,W(he(F._payload),X,ee,le,oe)}}if(he)return oe=oe(F),he=le===""?"."+j(F,0):le,C(oe)?(ee="",he!=null&&(ee=he.replace(k,"$&/")+"/"),W(oe,X,ee,"",function(Ee){return Ee})):oe!=null&&(V(oe)&&(oe=N(oe,ee+(oe.key==null||F&&F.key===oe.key?"":(""+oe.key).replace(k,"$&/")+"/")+he)),X.push(oe)),1;he=0;var be=le===""?".":le+":";if(C(F))for(var Te=0;Te<F.length;Te++)le=F[Te],ue=be+j(le,Te),he+=W(le,X,ee,ue,oe);else if(Te=v(F),typeof Te=="function")for(F=Te.call(F),Te=0;!(le=F.next()).done;)le=le.value,ue=be+j(le,Te++),he+=W(le,X,ee,ue,oe);else if(ue==="object"){if(typeof F.then=="function")return W(q(F),X,ee,le,oe);throw X=String(F),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return he}function G(F,X,ee){if(F==null)return F;var le=[],oe=0;return W(F,le,"","",function(ue){return X.call(ee,ue,oe++)}),le}function K(F){if(F._status===-1){var X=F._result;X=X(),X.then(function(ee){(F._status===0||F._status===-1)&&(F._status=1,F._result=ee)},function(ee){(F._status===0||F._status===-1)&&(F._status=2,F._result=ee)}),F._status===-1&&(F._status=0,F._result=X)}if(F._status===1)return F._result.default;throw F._result}var te=typeof reportError=="function"?reportError:function(F){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof F=="object"&&F!==null&&typeof F.message=="string"?String(F.message):String(F),error:F});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",F);return}console.error(F)},ie={map:G,forEach:function(F,X,ee){G(F,function(){X.apply(this,arguments)},ee)},count:function(F){var X=0;return G(F,function(){X++}),X},toArray:function(F){return G(F,function(X){return X})||[]},only:function(F){if(!V(F))throw Error("React.Children.only expected to receive a single React element child.");return F}};return cn.Activity=d,cn.Children=ie,cn.Component=_,cn.Fragment=t,cn.Profiler=r,cn.PureComponent=T,cn.StrictMode=i,cn.Suspense=l,cn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=O,cn.__COMPILER_RUNTIME={__proto__:null,c:function(F){return O.H.useMemoCache(F)}},cn.cache=function(F){return function(){return F.apply(null,arguments)}},cn.cacheSignal=function(){return null},cn.cloneElement=function(F,X,ee){if(F==null)throw Error("The argument must be a React element, but you passed "+F+".");var le=x({},F.props),oe=F.key;if(X!=null)for(ue in X.key!==void 0&&(oe=""+X.key),X)!I.call(X,ue)||ue==="key"||ue==="__self"||ue==="__source"||ue==="ref"&&X.ref===void 0||(le[ue]=X[ue]);var ue=arguments.length-2;if(ue===1)le.children=ee;else if(1<ue){for(var he=Array(ue),be=0;be<ue;be++)he[be]=arguments[be+2];le.children=he}return L(F.type,oe,le)},cn.createContext=function(F){return F={$$typeof:o,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null},F.Provider=F,F.Consumer={$$typeof:s,_context:F},F},cn.createElement=function(F,X,ee){var le,oe={},ue=null;if(X!=null)for(le in X.key!==void 0&&(ue=""+X.key),X)I.call(X,le)&&le!=="key"&&le!=="__self"&&le!=="__source"&&(oe[le]=X[le]);var he=arguments.length-2;if(he===1)oe.children=ee;else if(1<he){for(var be=Array(he),Te=0;Te<he;Te++)be[Te]=arguments[Te+2];oe.children=be}if(F&&F.defaultProps)for(le in he=F.defaultProps,he)oe[le]===void 0&&(oe[le]=he[le]);return L(F,ue,oe)},cn.createRef=function(){return{current:null}},cn.forwardRef=function(F){return{$$typeof:a,render:F}},cn.isValidElement=V,cn.lazy=function(F){return{$$typeof:f,_payload:{_status:-1,_result:F},_init:K}},cn.memo=function(F,X){return{$$typeof:c,type:F,compare:X===void 0?null:X}},cn.startTransition=function(F){var X=O.T,ee={};O.T=ee;try{var le=F(),oe=O.S;oe!==null&&oe(ee,le),typeof le=="object"&&le!==null&&typeof le.then=="function"&&le.then(R,te)}catch(ue){te(ue)}finally{X!==null&&ee.types!==null&&(X.types=ee.types),O.T=X}},cn.unstable_useCacheRefresh=function(){return O.H.useCacheRefresh()},cn.use=function(F){return O.H.use(F)},cn.useActionState=function(F,X,ee){return O.H.useActionState(F,X,ee)},cn.useCallback=function(F,X){return O.H.useCallback(F,X)},cn.useContext=function(F){return O.H.useContext(F)},cn.useDebugValue=function(){},cn.useDeferredValue=function(F,X){return O.H.useDeferredValue(F,X)},cn.useEffect=function(F,X){return O.H.useEffect(F,X)},cn.useEffectEvent=function(F){return O.H.useEffectEvent(F)},cn.useId=function(){return O.H.useId()},cn.useImperativeHandle=function(F,X,ee){return O.H.useImperativeHandle(F,X,ee)},cn.useInsertionEffect=function(F,X){return O.H.useInsertionEffect(F,X)},cn.useLayoutEffect=function(F,X){return O.H.useLayoutEffect(F,X)},cn.useMemo=function(F,X){return O.H.useMemo(F,X)},cn.useOptimistic=function(F,X){return O.H.useOptimistic(F,X)},cn.useReducer=function(F,X,ee){return O.H.useReducer(F,X,ee)},cn.useRef=function(F){return O.H.useRef(F)},cn.useState=function(F){return O.H.useState(F)},cn.useSyncExternalStore=function(F,X,ee){return O.H.useSyncExternalStore(F,X,ee)},cn.useTransition=function(){return O.H.useTransition()},cn.version="19.2.4",cn}var yI;function Xf(){return yI||(yI=1,yA.exports=S7()),yA.exports}var $=Xf();const eo=ro($),E7=_7({__proto__:null,default:eo},[$]);var bA={exports:{}},Iy={},_A={exports:{}},xA={};var bI;function M7(){return bI||(bI=1,(function(n){function e(W,G){var K=W.length;W.push(G);e:for(;0<K;){var te=K-1>>>1,ie=W[te];if(0<r(ie,G))W[te]=G,W[K]=ie,K=te;else break e}}function t(W){return W.length===0?null:W[0]}function i(W){if(W.length===0)return null;var G=W[0],K=W.pop();if(K!==G){W[0]=K;e:for(var te=0,ie=W.length,F=ie>>>1;te<F;){var X=2*(te+1)-1,ee=W[X],le=X+1,oe=W[le];if(0>r(ee,K))le<ie&&0>r(oe,ee)?(W[te]=oe,W[le]=K,te=le):(W[te]=ee,W[X]=K,te=X);else if(le<ie&&0>r(oe,K))W[te]=oe,W[le]=K,te=le;else break e}}return G}function r(W,G){var K=W.sortIndex-G.sortIndex;return K!==0?K:W.id-G.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],f=1,d=null,m=3,v=!1,b=!1,x=!1,w=!1,_=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function E(W){for(var G=t(c);G!==null;){if(G.callback===null)i(c);else if(G.startTime<=W)i(c),G.sortIndex=G.expirationTime,e(l,G);else break;G=t(c)}}function C(W){if(x=!1,E(W),!b)if(t(l)!==null)b=!0,R||(R=!0,B());else{var G=t(c);G!==null&&q(C,G.startTime-W)}}var R=!1,O=-1,I=5,L=-1;function N(){return w?!0:!(n.unstable_now()-L<I)}function V(){if(w=!1,R){var W=n.unstable_now();L=W;var G=!0;try{e:{b=!1,x&&(x=!1,A(O),O=-1),v=!0;var K=m;try{t:{for(E(W),d=t(l);d!==null&&!(d.expirationTime>W&&N());){var te=d.callback;if(typeof te=="function"){d.callback=null,m=d.priorityLevel;var ie=te(d.expirationTime<=W);if(W=n.unstable_now(),typeof ie=="function"){d.callback=ie,E(W),G=!0;break t}d===t(l)&&i(l),E(W)}else i(l);d=t(l)}if(d!==null)G=!0;else{var F=t(c);F!==null&&q(C,F.startTime-W),G=!1}}break e}finally{d=null,m=K,v=!1}G=void 0}}finally{G?B():R=!1}}}var B;if(typeof T=="function")B=function(){T(V)};else if(typeof MessageChannel<"u"){var k=new MessageChannel,j=k.port2;k.port1.onmessage=V,B=function(){j.postMessage(null)}}else B=function(){_(V,0)};function q(W,G){O=_(function(){W(n.unstable_now())},G)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(W){W.callback=null},n.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<W?Math.floor(1e3/W):5},n.unstable_getCurrentPriorityLevel=function(){return m},n.unstable_next=function(W){switch(m){case 1:case 2:case 3:var G=3;break;default:G=m}var K=m;m=G;try{return W()}finally{m=K}},n.unstable_requestPaint=function(){w=!0},n.unstable_runWithPriority=function(W,G){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var K=m;m=W;try{return G()}finally{m=K}},n.unstable_scheduleCallback=function(W,G,K){var te=n.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?te+K:te):K=te,W){case 1:var ie=-1;break;case 2:ie=250;break;case 5:ie=1073741823;break;case 4:ie=1e4;break;default:ie=5e3}return ie=K+ie,W={id:f++,callback:G,priorityLevel:W,startTime:K,expirationTime:ie,sortIndex:-1},K>te?(W.sortIndex=K,e(c,W),t(l)===null&&W===t(c)&&(x?(A(O),O=-1):x=!0,q(C,K-te))):(W.sortIndex=ie,e(l,W),b||v||(b=!0,R||(R=!0,B()))),W},n.unstable_shouldYield=N,n.unstable_wrapCallback=function(W){var G=m;return function(){var K=m;m=G;try{return W.apply(this,arguments)}finally{m=K}}}})(xA)),xA}var _I;function G4(){return _I||(_I=1,_A.exports=M7()),_A.exports}var wA={exports:{}},$s={};var xI;function T7(){if(xI)return $s;xI=1;var n=Xf();function e(l){var c="https://react.dev/errors/"+l;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)c+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+l+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function s(l,c,f){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:d==null?null:""+d,children:l,containerInfo:c,implementation:f}}var o=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function a(l,c){if(l==="font")return"";if(typeof c=="string")return c==="use-credentials"?c:""}return $s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,$s.createPortal=function(l,c){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)throw Error(e(299));return s(l,c,null,f)},$s.flushSync=function(l){var c=o.T,f=i.p;try{if(o.T=null,i.p=2,l)return l()}finally{o.T=c,i.p=f,i.d.f()}},$s.preconnect=function(l,c){typeof l=="string"&&(c?(c=c.crossOrigin,c=typeof c=="string"?c==="use-credentials"?c:"":void 0):c=null,i.d.C(l,c))},$s.prefetchDNS=function(l){typeof l=="string"&&i.d.D(l)},$s.preinit=function(l,c){if(typeof l=="string"&&c&&typeof c.as=="string"){var f=c.as,d=a(f,c.crossOrigin),m=typeof c.integrity=="string"?c.integrity:void 0,v=typeof c.fetchPriority=="string"?c.fetchPriority:void 0;f==="style"?i.d.S(l,typeof c.precedence=="string"?c.precedence:void 0,{crossOrigin:d,integrity:m,fetchPriority:v}):f==="script"&&i.d.X(l,{crossOrigin:d,integrity:m,fetchPriority:v,nonce:typeof c.nonce=="string"?c.nonce:void 0})}},$s.preinitModule=function(l,c){if(typeof l=="string")if(typeof c=="object"&&c!==null){if(c.as==null||c.as==="script"){var f=a(c.as,c.crossOrigin);i.d.M(l,{crossOrigin:f,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0})}}else c==null&&i.d.M(l)},$s.preload=function(l,c){if(typeof l=="string"&&typeof c=="object"&&c!==null&&typeof c.as=="string"){var f=c.as,d=a(f,c.crossOrigin);i.d.L(l,f,{crossOrigin:d,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0,type:typeof c.type=="string"?c.type:void 0,fetchPriority:typeof c.fetchPriority=="string"?c.fetchPriority:void 0,referrerPolicy:typeof c.referrerPolicy=="string"?c.referrerPolicy:void 0,imageSrcSet:typeof c.imageSrcSet=="string"?c.imageSrcSet:void 0,imageSizes:typeof c.imageSizes=="string"?c.imageSizes:void 0,media:typeof c.media=="string"?c.media:void 0})}},$s.preloadModule=function(l,c){if(typeof l=="string")if(c){var f=a(c.as,c.crossOrigin);i.d.m(l,{as:typeof c.as=="string"&&c.as!=="script"?c.as:void 0,crossOrigin:f,integrity:typeof c.integrity=="string"?c.integrity:void 0})}else i.d.m(l)},$s.requestFormReset=function(l){i.d.r(l)},$s.unstable_batchedUpdates=function(l,c){return l(c)},$s.useFormState=function(l,c,f){return o.H.useFormState(l,c,f)},$s.useFormStatus=function(){return o.H.useHostTransitionStatus()},$s.version="19.2.4",$s}var wI;function H4(){if(wI)return wA.exports;wI=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),wA.exports=T7(),wA.exports}var SI;function A7(){if(SI)return Iy;SI=1;var n=G4(),e=Xf(),t=H4();function i(u){var h="https://react.dev/errors/"+u;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)h+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+u+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)}function s(u){var h=u,y=u;if(u.alternate)for(;h.return;)h=h.return;else{u=h;do h=u,(h.flags&4098)!==0&&(y=h.return),u=h.return;while(u)}return h.tag===3?y:null}function o(u){if(u.tag===13){var h=u.memoizedState;if(h===null&&(u=u.alternate,u!==null&&(h=u.memoizedState)),h!==null)return h.dehydrated}return null}function a(u){if(u.tag===31){var h=u.memoizedState;if(h===null&&(u=u.alternate,u!==null&&(h=u.memoizedState)),h!==null)return h.dehydrated}return null}function l(u){if(s(u)!==u)throw Error(i(188))}function c(u){var h=u.alternate;if(!h){if(h=s(u),h===null)throw Error(i(188));return h!==u?null:u}for(var y=u,S=h;;){var P=y.return;if(P===null)break;var U=P.alternate;if(U===null){if(S=P.return,S!==null){y=S;continue}break}if(P.child===U.child){for(U=P.child;U;){if(U===y)return l(P),u;if(U===S)return l(P),h;U=U.sibling}throw Error(i(188))}if(y.return!==S.return)y=P,S=U;else{for(var Q=!1,fe=P.child;fe;){if(fe===y){Q=!0,y=P,S=U;break}if(fe===S){Q=!0,S=P,y=U;break}fe=fe.sibling}if(!Q){for(fe=U.child;fe;){if(fe===y){Q=!0,y=U,S=P;break}if(fe===S){Q=!0,S=U,y=P;break}fe=fe.sibling}if(!Q)throw Error(i(189))}}if(y.alternate!==S)throw Error(i(190))}if(y.tag!==3)throw Error(i(188));return y.stateNode.current===y?u:h}function f(u){var h=u.tag;if(h===5||h===26||h===27||h===6)return u;for(u=u.child;u!==null;){if(h=f(u),h!==null)return h;u=u.sibling}return null}var d=Object.assign,m=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),A=Symbol.for("react.consumer"),T=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),L=Symbol.for("react.activity"),N=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function B(u){return u===null||typeof u!="object"?null:(u=V&&u[V]||u["@@iterator"],typeof u=="function"?u:null)}var k=Symbol.for("react.client.reference");function j(u){if(u==null)return null;if(typeof u=="function")return u.$$typeof===k?null:u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case x:return"Fragment";case _:return"Profiler";case w:return"StrictMode";case C:return"Suspense";case R:return"SuspenseList";case L:return"Activity"}if(typeof u=="object")switch(u.$$typeof){case b:return"Portal";case T:return u.displayName||"Context";case A:return(u._context.displayName||"Context")+".Consumer";case E:var h=u.render;return u=u.displayName,u||(u=h.displayName||h.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case O:return h=u.displayName||null,h!==null?h:j(u.type)||"Memo";case I:h=u._payload,u=u._init;try{return j(u(h))}catch{}}return null}var q=Array.isArray,W=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K={pending:!1,data:null,method:null,action:null},te=[],ie=-1;function F(u){return{current:u}}function X(u){0>ie||(u.current=te[ie],te[ie]=null,ie--)}function ee(u,h){ie++,te[ie]=u.current,u.current=h}var le=F(null),oe=F(null),ue=F(null),he=F(null);function be(u,h){switch(ee(ue,h),ee(oe,u),ee(le,null),h.nodeType){case 9:case 11:u=(u=h.documentElement)&&(u=u.namespaceURI)?zP(u):0;break;default:if(u=h.tagName,h=h.namespaceURI)h=zP(h),u=FP(h,u);else switch(u){case"svg":u=1;break;case"math":u=2;break;default:u=0}}X(le),ee(le,u)}function Te(){X(le),X(oe),X(ue)}function Ee(u){u.memoizedState!==null&&ee(he,u);var h=le.current,y=FP(h,u.type);h!==y&&(ee(oe,u),ee(le,y))}function Ce(u){oe.current===u&&(X(le),X(oe)),he.current===u&&(X(he),Ry._currentValue=K)}var we,ae;function ve(u){if(we===void 0)try{throw Error()}catch(y){var h=y.stack.trim().match(/\n( *(at )?)/);we=h&&h[1]||"",ae=-1<y.stack.indexOf(`
    at`)?" (<anonymous>)":-1<y.stack.indexOf("@")?"@unknown:0:0":""}return`
`+we+u+ae}var xe=!1;function me(u,h){if(!u||xe)return"";xe=!0;var y=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var S={DetermineComponentFrameRoot:function(){try{if(h){var ft=function(){throw Error()};if(Object.defineProperty(ft.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ft,[])}catch(rt){var Ze=rt}Reflect.construct(u,[],ft)}else{try{ft.call()}catch(rt){Ze=rt}u.call(ft.prototype)}}else{try{throw Error()}catch(rt){Ze=rt}(ft=u())&&typeof ft.catch=="function"&&ft.catch(function(){})}}catch(rt){if(rt&&Ze&&typeof rt.stack=="string")return[rt.stack,Ze.stack]}return[null,null]}};S.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var P=Object.getOwnPropertyDescriptor(S.DetermineComponentFrameRoot,"name");P&&P.configurable&&Object.defineProperty(S.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var U=S.DetermineComponentFrameRoot(),Q=U[0],fe=U[1];if(Q&&fe){var Oe=Q.split(`
`),We=fe.split(`
`);for(P=S=0;S<Oe.length&&!Oe[S].includes("DetermineComponentFrameRoot");)S++;for(;P<We.length&&!We[P].includes("DetermineComponentFrameRoot");)P++;if(S===Oe.length||P===We.length)for(S=Oe.length-1,P=We.length-1;1<=S&&0<=P&&Oe[S]!==We[P];)P--;for(;1<=S&&0<=P;S--,P--)if(Oe[S]!==We[P]){if(S!==1||P!==1)do if(S--,P--,0>P||Oe[S]!==We[P]){var ot=`
`+Oe[S].replace(" at new "," at ");return u.displayName&&ot.includes("<anonymous>")&&(ot=ot.replace("<anonymous>",u.displayName)),ot}while(1<=S&&0<=P);break}}}finally{xe=!1,Error.prepareStackTrace=y}return(y=u?u.displayName||u.name:"")?ve(y):""}function Ie(u,h){switch(u.tag){case 26:case 27:case 5:return ve(u.type);case 16:return ve("Lazy");case 13:return u.child!==h&&h!==null?ve("Suspense Fallback"):ve("Suspense");case 19:return ve("SuspenseList");case 0:case 15:return me(u.type,!1);case 11:return me(u.type.render,!1);case 1:return me(u.type,!0);case 31:return ve("Activity");default:return""}}function Ne(u){try{var h="",y=null;do h+=Ie(u,y),y=u,u=u.return;while(u);return h}catch(S){return`
Error generating stack: `+S.message+`
`+S.stack}}var ke=Object.prototype.hasOwnProperty,Fe=n.unstable_scheduleCallback,Ae=n.unstable_cancelCallback,tt=n.unstable_shouldYield,se=n.unstable_requestPaint,Z=n.unstable_now,ye=n.unstable_getCurrentPriorityLevel,Y=n.unstable_ImmediatePriority,J=n.unstable_UserBlockingPriority,re=n.unstable_NormalPriority,ge=n.unstable_LowPriority,_e=n.unstable_IdlePriority,Se=n.log,Ue=n.unstable_setDisableYieldValue,Me=null,Le=null;function He(u){if(typeof Se=="function"&&Ue(u),Le&&typeof Le.setStrictMode=="function")try{Le.setStrictMode(Me,u)}catch{}}var nt=Math.clz32?Math.clz32:Re,Je=Math.log,gt=Math.LN2;function Re(u){return u>>>=0,u===0?32:31-(Je(u)/gt|0)|0}var $e=256,at=262144,_t=4194304;function st(u){var h=u&42;if(h!==0)return h;switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return u&261888;case 262144:case 524288:case 1048576:case 2097152:return u&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return u&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return u}}function qe(u,h,y){var S=u.pendingLanes;if(S===0)return 0;var P=0,U=u.suspendedLanes,Q=u.pingedLanes;u=u.warmLanes;var fe=S&134217727;return fe!==0?(S=fe&~U,S!==0?P=st(S):(Q&=fe,Q!==0?P=st(Q):y||(y=fe&~u,y!==0&&(P=st(y))))):(fe=S&~U,fe!==0?P=st(fe):Q!==0?P=st(Q):y||(y=S&~u,y!==0&&(P=st(y)))),P===0?0:h!==0&&h!==P&&(h&U)===0&&(U=P&-P,y=h&-h,U>=y||U===32&&(y&4194048)!==0)?h:P}function vt(u,h){return(u.pendingLanes&~(u.suspendedLanes&~u.pingedLanes)&h)===0}function Rt(u,h){switch(u){case 1:case 2:case 4:case 8:case 64:return h+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Tt(){var u=_t;return _t<<=1,(_t&62914560)===0&&(_t=4194304),u}function Bt(u){for(var h=[],y=0;31>y;y++)h.push(u);return h}function $n(u,h){u.pendingLanes|=h,h!==268435456&&(u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0)}function qn(u,h,y,S,P,U){var Q=u.pendingLanes;u.pendingLanes=y,u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0,u.expiredLanes&=y,u.entangledLanes&=y,u.errorRecoveryDisabledLanes&=y,u.shellSuspendCounter=0;var fe=u.entanglements,Oe=u.expirationTimes,We=u.hiddenUpdates;for(y=Q&~y;0<y;){var ot=31-nt(y),ft=1<<ot;fe[ot]=0,Oe[ot]=-1;var Ze=We[ot];if(Ze!==null)for(We[ot]=null,ot=0;ot<Ze.length;ot++){var rt=Ze[ot];rt!==null&&(rt.lane&=-536870913)}y&=~ft}S!==0&&ri(u,S,0),U!==0&&P===0&&u.tag!==0&&(u.suspendedLanes|=U&~(Q&~h))}function ri(u,h,y){u.pendingLanes|=h,u.suspendedLanes&=~h;var S=31-nt(h);u.entangledLanes|=h,u.entanglements[S]=u.entanglements[S]|1073741824|y&261930}function Si(u,h){var y=u.entangledLanes|=h;for(u=u.entanglements;y;){var S=31-nt(y),P=1<<S;P&h|u[S]&h&&(u[S]|=h),y&=~P}}function rs(u,h){var y=h&-h;return y=(y&42)!==0?1:_r(y),(y&(u.suspendedLanes|h))!==0?0:y}function _r(u){switch(u){case 2:u=1;break;case 8:u=4;break;case 32:u=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:u=128;break;case 268435456:u=134217728;break;default:u=0}return u}function Ar(u){return u&=-u,2<u?8<u?(u&134217727)!==0?32:268435456:8:2}function Gr(){var u=G.p;return u!==0?u:(u=window.event,u===void 0?32:lI(u.type))}function Yi(u,h){var y=G.p;try{return G.p=u,h()}finally{G.p=y}}var ei=Math.random().toString(36).slice(2),Zn="__reactFiber$"+ei,Hi="__reactProps$"+ei,Ps="__reactContainer$"+ei,Is="__reactEvents$"+ei,oo="__reactListeners$"+ei,ko="__reactHandles$"+ei,Na="__reactResources$"+ei,ao="__reactMarker$"+ei;function pe(u){delete u[Zn],delete u[Hi],delete u[Is],delete u[oo],delete u[ko]}function Be(u){var h=u[Zn];if(h)return h;for(var y=u.parentNode;y;){if(h=y[Ps]||y[Zn]){if(y=h.alternate,h.child!==null||y!==null&&y.child!==null)for(u=$P(u);u!==null;){if(y=u[Zn])return y;u=$P(u)}return h}u=y,y=u.parentNode}return null}function Ye(u){if(u=u[Zn]||u[Ps]){var h=u.tag;if(h===5||h===6||h===13||h===31||h===26||h===27||h===3)return u}return null}function Ke(u){var h=u.tag;if(h===5||h===26||h===27||h===6)return u.stateNode;throw Error(i(33))}function De(u){var h=u[Na];return h||(h=u[Na]={hoistableStyles:new Map,hoistableScripts:new Map}),h}function lt(u){u[ao]=!0}var xt=new Set,Ct={};function Et(u,h){Pt(u,h),Pt(u+"Capture",h)}function Pt(u,h){for(Ct[u]=h,u=0;u<h.length;u++)xt.add(h[u])}var It=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ut={},Nt={};function In(u){return ke.call(Nt,u)?!0:ke.call(Ut,u)?!1:It.test(u)?Nt[u]=!0:(Ut[u]=!0,!1)}function kn(u,h,y){if(In(h))if(y===null)u.removeAttribute(h);else{switch(typeof y){case"undefined":case"function":case"symbol":u.removeAttribute(h);return;case"boolean":var S=h.toLowerCase().slice(0,5);if(S!=="data-"&&S!=="aria-"){u.removeAttribute(h);return}}u.setAttribute(h,""+y)}}function zn(u,h,y){if(y===null)u.removeAttribute(h);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(h);return}u.setAttribute(h,""+y)}}function sn(u,h,y,S){if(S===null)u.removeAttribute(y);else{switch(typeof S){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(y);return}u.setAttributeNS(h,y,""+S)}}function Lt(u){switch(typeof u){case"bigint":case"boolean":case"number":case"string":case"undefined":return u;case"object":return u;default:return""}}function Fn(u){var h=u.type;return(u=u.nodeName)&&u.toLowerCase()==="input"&&(h==="checkbox"||h==="radio")}function mn(u,h,y){var S=Object.getOwnPropertyDescriptor(u.constructor.prototype,h);if(!u.hasOwnProperty(h)&&typeof S<"u"&&typeof S.get=="function"&&typeof S.set=="function"){var P=S.get,U=S.set;return Object.defineProperty(u,h,{configurable:!0,get:function(){return P.call(this)},set:function(Q){y=""+Q,U.call(this,Q)}}),Object.defineProperty(u,h,{enumerable:S.enumerable}),{getValue:function(){return y},setValue:function(Q){y=""+Q},stopTracking:function(){u._valueTracker=null,delete u[h]}}}}function gi(u){if(!u._valueTracker){var h=Fn(u)?"checked":"value";u._valueTracker=mn(u,h,""+u[h])}}function di(u){if(!u)return!1;var h=u._valueTracker;if(!h)return!0;var y=h.getValue(),S="";return u&&(S=Fn(u)?u.checked?"true":"false":u.value),u=S,u!==y?(h.setValue(u),!0):!1}function on(u){if(u=u||(typeof document<"u"?document:void 0),typeof u>"u")return null;try{return u.activeElement||u.body}catch{return u.body}}var Ns=/[\n"\\]/g;function $t(u){return u.replace(Ns,function(h){return"\\"+h.charCodeAt(0).toString(16)+" "})}function Zi(u,h,y,S,P,U,Q,fe){u.name="",Q!=null&&typeof Q!="function"&&typeof Q!="symbol"&&typeof Q!="boolean"?u.type=Q:u.removeAttribute("type"),h!=null?Q==="number"?(h===0&&u.value===""||u.value!=h)&&(u.value=""+Lt(h)):u.value!==""+Lt(h)&&(u.value=""+Lt(h)):Q!=="submit"&&Q!=="reset"||u.removeAttribute("value"),h!=null?Hn(u,Q,Lt(h)):y!=null?Hn(u,Q,Lt(y)):S!=null&&u.removeAttribute("value"),P==null&&U!=null&&(u.defaultChecked=!!U),P!=null&&(u.checked=P&&typeof P!="function"&&typeof P!="symbol"),fe!=null&&typeof fe!="function"&&typeof fe!="symbol"&&typeof fe!="boolean"?u.name=""+Lt(fe):u.removeAttribute("name")}function ji(u,h,y,S,P,U,Q,fe){if(U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"&&(u.type=U),h!=null||y!=null){if(!(U!=="submit"&&U!=="reset"||h!=null)){gi(u);return}y=y!=null?""+Lt(y):"",h=h!=null?""+Lt(h):y,fe||h===u.value||(u.value=h),u.defaultValue=h}S=S??P,S=typeof S!="function"&&typeof S!="symbol"&&!!S,u.checked=fe?u.checked:!!S,u.defaultChecked=!!S,Q!=null&&typeof Q!="function"&&typeof Q!="symbol"&&typeof Q!="boolean"&&(u.name=Q),gi(u)}function Hn(u,h,y){h==="number"&&on(u.ownerDocument)===u||u.defaultValue===""+y||(u.defaultValue=""+y)}function pi(u,h,y,S){if(u=u.options,h){h={};for(var P=0;P<y.length;P++)h["$"+y[P]]=!0;for(y=0;y<u.length;y++)P=h.hasOwnProperty("$"+u[y].value),u[y].selected!==P&&(u[y].selected=P),P&&S&&(u[y].defaultSelected=!0)}else{for(y=""+Lt(y),h=null,P=0;P<u.length;P++){if(u[P].value===y){u[P].selected=!0,S&&(u[P].defaultSelected=!0);return}h!==null||u[P].disabled||(h=u[P])}h!==null&&(h.selected=!0)}}function lo(u,h,y){if(h!=null&&(h=""+Lt(h),h!==u.value&&(u.value=h),y==null)){u.defaultValue!==h&&(u.defaultValue=h);return}u.defaultValue=y!=null?""+Lt(y):""}function Hr(u,h,y,S){if(h==null){if(S!=null){if(y!=null)throw Error(i(92));if(q(S)){if(1<S.length)throw Error(i(93));S=S[0]}y=S}y==null&&(y=""),h=y}y=Lt(h),u.defaultValue=y,S=u.textContent,S===y&&S!==""&&S!==null&&(u.value=S),gi(u)}function va(u,h){if(h){var y=u.firstChild;if(y&&y===u.lastChild&&y.nodeType===3){y.nodeValue=h;return}}u.textContent=h}var Ad=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Jf(u,h,y){var S=h.indexOf("--")===0;y==null||typeof y=="boolean"||y===""?S?u.setProperty(h,""):h==="float"?u.cssFloat="":u[h]="":S?u.setProperty(h,y):typeof y!="number"||y===0||Ad.has(h)?h==="float"?u.cssFloat=y:u[h]=(""+y).trim():u[h]=y+"px"}function Tu(u,h,y){if(h!=null&&typeof h!="object")throw Error(i(62));if(u=u.style,y!=null){for(var S in y)!y.hasOwnProperty(S)||h!=null&&h.hasOwnProperty(S)||(S.indexOf("--")===0?u.setProperty(S,""):S==="float"?u.cssFloat="":u[S]="");for(var P in h)S=h[P],h.hasOwnProperty(P)&&y[P]!==S&&Jf(u,P,S)}else for(var U in h)h.hasOwnProperty(U)&&Jf(u,U,h[U])}function Ua(u){if(u.indexOf("-")===-1)return!1;switch(u){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Cd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),vc=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function zo(u){return vc.test(""+u)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":u}function ss(){}var ka=null;function Au(u){return u=u.target||u.srcElement||window,u.correspondingUseElement&&(u=u.correspondingUseElement),u.nodeType===3?u.parentNode:u}var co=null,Fo=null;function Cu(u){var h=Ye(u);if(h&&(u=h.stateNode)){var y=u[Hi]||null;e:switch(u=h.stateNode,h.type){case"input":if(Zi(u,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name),h=y.name,y.type==="radio"&&h!=null){for(y=u;y.parentNode;)y=y.parentNode;for(y=y.querySelectorAll('input[name="'+$t(""+h)+'"][type="radio"]'),h=0;h<y.length;h++){var S=y[h];if(S!==u&&S.form===u.form){var P=S[Hi]||null;if(!P)throw Error(i(90));Zi(S,P.value,P.defaultValue,P.defaultValue,P.checked,P.defaultChecked,P.type,P.name)}}for(h=0;h<y.length;h++)S=y[h],S.form===u.form&&di(S)}break e;case"textarea":lo(u,y.value,y.defaultValue);break e;case"select":h=y.value,h!=null&&pi(u,!!y.multiple,h,!1)}}}var Ru=!1;function yc(u,h,y){if(Ru)return u(h,y);Ru=!0;try{var S=u(h);return S}finally{if(Ru=!1,(co!==null||Fo!==null)&&(Ma(),co&&(h=co,u=Fo,Fo=co=null,Cu(h),u)))for(h=0;h<u.length;h++)Cu(u[h])}}function za(u,h){var y=u.stateNode;if(y===null)return null;var S=y[Hi]||null;if(S===null)return null;y=S[h];e:switch(h){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(S=!S.disabled)||(u=u.type,S=!(u==="button"||u==="input"||u==="select"||u==="textarea")),u=!S;break e;default:u=!1}if(u)return null;if(y&&typeof y!="function")throw Error(i(231,h,typeof y));return y}var uo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),gs=!1;if(uo)try{var Fa={};Object.defineProperty(Fa,"passive",{get:function(){gs=!0}}),window.addEventListener("test",Fa,Fa),window.removeEventListener("test",Fa,Fa)}catch{gs=!1}var os=null,Du=null,ya=null;function bc(){if(ya)return ya;var u,h=Du,y=h.length,S,P="value"in os?os.value:os.textContent,U=P.length;for(u=0;u<y&&h[u]===P[u];u++);var Q=y-u;for(S=1;S<=Q&&h[y-S]===P[U-S];S++);return ya=P.slice(u,1<S?1-S:void 0)}function _c(u){var h=u.keyCode;return"charCode"in u?(u=u.charCode,u===0&&h===13&&(u=13)):u=h,u===10&&(u=13),32<=u||u===13?u:0}function Bo(){return!0}function xc(){return!1}function Ai(u){function h(y,S,P,U,Q){this._reactName=y,this._targetInst=P,this.type=S,this.nativeEvent=U,this.target=Q,this.currentTarget=null;for(var fe in u)u.hasOwnProperty(fe)&&(y=u[fe],this[fe]=y?y(U):U[fe]);return this.isDefaultPrevented=(U.defaultPrevented!=null?U.defaultPrevented:U.returnValue===!1)?Bo:xc,this.isPropagationStopped=xc,this}return d(h.prototype,{preventDefault:function(){this.defaultPrevented=!0;var y=this.nativeEvent;y&&(y.preventDefault?y.preventDefault():typeof y.returnValue!="unknown"&&(y.returnValue=!1),this.isDefaultPrevented=Bo)},stopPropagation:function(){var y=this.nativeEvent;y&&(y.stopPropagation?y.stopPropagation():typeof y.cancelBubble!="unknown"&&(y.cancelBubble=!0),this.isPropagationStopped=Bo)},persist:function(){},isPersistent:Bo}),h}var ba={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(u){return u.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Rl=Ai(ba),Ba=d({},ba,{view:0,detail:0}),wc=Ai(Ba),Sc,Va,Ga,fr=d({},Ba,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sm,button:0,buttons:0,relatedTarget:function(u){return u.relatedTarget===void 0?u.fromElement===u.srcElement?u.toElement:u.fromElement:u.relatedTarget},movementX:function(u){return"movementX"in u?u.movementX:(u!==Ga&&(Ga&&u.type==="mousemove"?(Sc=u.screenX-Ga.screenX,Va=u.screenY-Ga.screenY):Va=Sc=0,Ga=u),Sc)},movementY:function(u){return"movementY"in u?u.movementY:Va}}),Rd=Ai(fr),Ou=d({},fr,{dataTransfer:0}),Lu=Ai(Ou),eh=d({},Ba,{relatedTarget:0}),th=Ai(eh),jr=d({},ba,{animationName:0,elapsedTime:0,pseudoElement:0}),fo=Ai(jr),as=d({},ba,{clipboardData:function(u){return"clipboardData"in u?u.clipboardData:window.clipboardData}}),_a=Ai(as),Ec=d({},ba,{data:0}),xm=Ai(Ec),wm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mv(u){var h=this.nativeEvent;return h.getModifierState?h.getModifierState(u):(u=vx[u])?!!h[u]:!1}function Sm(){return mv}var yx=d({},Ba,{key:function(u){if(u.key){var h=wm[u.key]||u.key;if(h!=="Unidentified")return h}return u.type==="keypress"?(u=_c(u),u===13?"Enter":String.fromCharCode(u)):u.type==="keydown"||u.type==="keyup"?gx[u.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sm,charCode:function(u){return u.type==="keypress"?_c(u):0},keyCode:function(u){return u.type==="keydown"||u.type==="keyup"?u.keyCode:0},which:function(u){return u.type==="keypress"?_c(u):u.type==="keydown"||u.type==="keyup"?u.keyCode:0}}),Pu=Ai(yx),Em=d({},fr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gv=Ai(Em),vv=d({},Ba,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sm}),bx=Ai(vv),_x=d({},ba,{propertyName:0,elapsedTime:0,pseudoElement:0}),FT=Ai(_x),Wr=d({},fr,{deltaX:function(u){return"deltaX"in u?u.deltaX:"wheelDeltaX"in u?-u.wheelDeltaX:0},deltaY:function(u){return"deltaY"in u?u.deltaY:"wheelDeltaY"in u?-u.wheelDeltaY:"wheelDelta"in u?-u.wheelDelta:0},deltaZ:0,deltaMode:0}),xx=Ai(Wr),wx=d({},ba,{newState:0,oldState:0}),Sx=Ai(wx),Ex=[9,13,27,32],Iu=uo&&"CompositionEvent"in window,nh=null;uo&&"documentMode"in document&&(nh=document.documentMode);var Mm=uo&&"TextEvent"in window&&!nh,yv=uo&&(!Iu||nh&&8<nh&&11>=nh),Mx=" ",Dd=!1;function Tm(u,h){switch(u){case"keyup":return Ex.indexOf(h.keyCode)!==-1;case"keydown":return h.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bv(u){return u=u.detail,typeof u=="object"&&"data"in u?u.data:null}var Nu=!1;function Tx(u,h){switch(u){case"compositionend":return bv(h);case"keypress":return h.which!==32?null:(Dd=!0,Mx);case"textInput":return u=h.data,u===Mx&&Dd?null:u;default:return null}}function _v(u,h){if(Nu)return u==="compositionend"||!Iu&&Tm(u,h)?(u=bc(),ya=Du=os=null,Nu=!1,u):null;switch(u){case"paste":return null;case"keypress":if(!(h.ctrlKey||h.altKey||h.metaKey)||h.ctrlKey&&h.altKey){if(h.char&&1<h.char.length)return h.char;if(h.which)return String.fromCharCode(h.which)}return null;case"compositionend":return yv&&h.locale!=="ko"?null:h.data;default:return null}}var xv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wv(u){var h=u&&u.nodeName&&u.nodeName.toLowerCase();return h==="input"?!!xv[u.type]:h==="textarea"}function Am(u,h,y,S){co?Fo?Fo.push(S):Fo=[S]:co=S,h=O1(h,"onChange"),0<h.length&&(y=new Rl("onChange","change",null,y,S),u.push({event:y,listeners:h}))}var Mc=null,Uu=null;function Ax(u){LP(u,0)}function ih(u){var h=Ke(u);if(di(h))return u}function Sv(u,h){if(u==="change")return h}var Ha=!1;if(uo){var Od;if(uo){var Ev="oninput"in document;if(!Ev){var Mv=document.createElement("div");Mv.setAttribute("oninput","return;"),Ev=typeof Mv.oninput=="function"}Od=Ev}else Od=!1;Ha=Od&&(!document.documentMode||9<document.documentMode)}function Vo(){Mc&&(Mc.detachEvent("onpropertychange",Ld),Uu=Mc=null)}function Ld(u){if(u.propertyName==="value"&&ih(Uu)){var h=[];Am(h,Uu,u,Au(u)),yc(Ax,h)}}function Cx(u,h,y){u==="focusin"?(Vo(),Mc=h,Uu=y,Mc.attachEvent("onpropertychange",Ld)):u==="focusout"&&Vo()}function Tv(u){if(u==="selectionchange"||u==="keyup"||u==="keydown")return ih(Uu)}function Rx(u,h){if(u==="click")return ih(h)}function Dx(u,h){if(u==="input"||u==="change")return ih(h)}function Av(u,h){return u===h&&(u!==0||1/u===1/h)||u!==u&&h!==h}var vs=typeof Object.is=="function"?Object.is:Av;function rh(u,h){if(vs(u,h))return!0;if(typeof u!="object"||u===null||typeof h!="object"||h===null)return!1;var y=Object.keys(u),S=Object.keys(h);if(y.length!==S.length)return!1;for(S=0;S<y.length;S++){var P=y[S];if(!ke.call(h,P)||!vs(u[P],h[P]))return!1}return!0}function Pd(u){for(;u&&u.firstChild;)u=u.firstChild;return u}function sh(u,h){var y=Pd(u);u=0;for(var S;y;){if(y.nodeType===3){if(S=u+y.textContent.length,u<=h&&S>=h)return{node:y,offset:h-u};u=S}e:{for(;y;){if(y.nextSibling){y=y.nextSibling;break e}y=y.parentNode}y=void 0}y=Pd(y)}}function vi(u,h){return u&&h?u===h?!0:u&&u.nodeType===3?!1:h&&h.nodeType===3?vi(u,h.parentNode):"contains"in u?u.contains(h):u.compareDocumentPosition?!!(u.compareDocumentPosition(h)&16):!1:!1}function Ox(u){u=u!=null&&u.ownerDocument!=null&&u.ownerDocument.defaultView!=null?u.ownerDocument.defaultView:window;for(var h=on(u.document);h instanceof u.HTMLIFrameElement;){try{var y=typeof h.contentWindow.location.href=="string"}catch{y=!1}if(y)u=h.contentWindow;else break;h=on(u.document)}return h}function Cv(u){var h=u&&u.nodeName&&u.nodeName.toLowerCase();return h&&(h==="input"&&(u.type==="text"||u.type==="search"||u.type==="tel"||u.type==="url"||u.type==="password")||h==="textarea"||u.contentEditable==="true")}var Lx=uo&&"documentMode"in document&&11>=document.documentMode,ja=null,Wa=null,oh=null,Cm=!1;function ah(u,h,y){var S=y.window===y?y.document:y.nodeType===9?y:y.ownerDocument;Cm||ja==null||ja!==on(S)||(S=ja,"selectionStart"in S&&Cv(S)?S={start:S.selectionStart,end:S.selectionEnd}:(S=(S.ownerDocument&&S.ownerDocument.defaultView||window).getSelection(),S={anchorNode:S.anchorNode,anchorOffset:S.anchorOffset,focusNode:S.focusNode,focusOffset:S.focusOffset}),oh&&rh(oh,S)||(oh=S,S=O1(Wa,"onSelect"),0<S.length&&(h=new Rl("onSelect","select",null,h,y),u.push({event:h,listeners:S}),h.target=ja)))}function ls(u,h){var y={};return y[u.toLowerCase()]=h.toLowerCase(),y["Webkit"+u]="webkit"+h,y["Moz"+u]="moz"+h,y}var ku={animationend:ls("Animation","AnimationEnd"),animationiteration:ls("Animation","AnimationIteration"),animationstart:ls("Animation","AnimationStart"),transitionrun:ls("Transition","TransitionRun"),transitionstart:ls("Transition","TransitionStart"),transitioncancel:ls("Transition","TransitionCancel"),transitionend:ls("Transition","TransitionEnd")},Id={},Rv={};uo&&(Rv=document.createElement("div").style,"AnimationEvent"in window||(delete ku.animationend.animation,delete ku.animationiteration.animation,delete ku.animationstart.animation),"TransitionEvent"in window||delete ku.transitionend.transition);function Dl(u){if(Id[u])return Id[u];if(!ku[u])return u;var h=ku[u],y;for(y in h)if(h.hasOwnProperty(y)&&y in Rv)return Id[u]=h[y];return u}var Rm=Dl("animationend"),Nd=Dl("animationiteration"),Dv=Dl("animationstart"),Px=Dl("transitionrun"),BT=Dl("transitionstart"),Ix=Dl("transitioncancel"),Ov=Dl("transitionend"),Go=new Map,Ud="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ud.push("scrollEnd");function Ho(u,h){Go.set(u,h),Et(h,[u])}var kd=typeof reportError=="function"?reportError:function(u){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var h=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof u=="object"&&u!==null&&typeof u.message=="string"?String(u.message):String(u),error:u});if(!window.dispatchEvent(h))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",u);return}console.error(u)},jo=[],Ol=0,Cr=0;function zd(){for(var u=Ol,h=Cr=Ol=0;h<u;){var y=jo[h];jo[h++]=null;var S=jo[h];jo[h++]=null;var P=jo[h];jo[h++]=null;var U=jo[h];if(jo[h++]=null,S!==null&&P!==null){var Q=S.pending;Q===null?P.next=P:(P.next=Q.next,Q.next=P),S.pending=P}U!==0&&Tc(y,P,U)}}function Rr(u,h,y,S){jo[Ol++]=u,jo[Ol++]=h,jo[Ol++]=y,jo[Ol++]=S,Cr|=S,u.lanes|=S,u=u.alternate,u!==null&&(u.lanes|=S)}function Dm(u,h,y,S){return Rr(u,h,y,S),Wo(u)}function ys(u,h){return Rr(u,null,null,h),Wo(u)}function Tc(u,h,y){u.lanes|=y;var S=u.alternate;S!==null&&(S.lanes|=y);for(var P=!1,U=u.return;U!==null;)U.childLanes|=y,S=U.alternate,S!==null&&(S.childLanes|=y),U.tag===22&&(u=U.stateNode,u===null||u._visibility&1||(P=!0)),u=U,U=U.return;return u.tag===3?(U=u.stateNode,P&&h!==null&&(P=31-nt(y),u=U.hiddenUpdates,S=u[P],S===null?u[P]=[h]:S.push(h),h.lane=y|536870912),U):null}function Wo(u){if(50<Wc)throw Wc=0,nf=null,Error(i(185));for(var h=u.return;h!==null;)u=h,h=u.return;return u.tag===3?u.stateNode:null}var Ac={};function Lv(u,h,y,S){this.tag=u,this.key=y,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=S,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ii(u,h,y,S){return new Lv(u,h,y,S)}function Om(u){return u=u.prototype,!(!u||!u.isReactComponent)}function Us(u,h){var y=u.alternate;return y===null?(y=Ii(u.tag,h,u.key,u.mode),y.elementType=u.elementType,y.type=u.type,y.stateNode=u.stateNode,y.alternate=u,u.alternate=y):(y.pendingProps=h,y.type=u.type,y.flags=0,y.subtreeFlags=0,y.deletions=null),y.flags=u.flags&65011712,y.childLanes=u.childLanes,y.lanes=u.lanes,y.child=u.child,y.memoizedProps=u.memoizedProps,y.memoizedState=u.memoizedState,y.updateQueue=u.updateQueue,h=u.dependencies,y.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},y.sibling=u.sibling,y.index=u.index,y.ref=u.ref,y.refCleanup=u.refCleanup,y}function lh(u,h){u.flags&=65011714;var y=u.alternate;return y===null?(u.childLanes=0,u.lanes=h,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=y.childLanes,u.lanes=y.lanes,u.child=y.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=y.memoizedProps,u.memoizedState=y.memoizedState,u.updateQueue=y.updateQueue,u.type=y.type,h=y.dependencies,u.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext}),u}function $a(u,h,y,S,P,U){var Q=0;if(S=u,typeof u=="function")Om(u)&&(Q=1);else if(typeof u=="string")Q=l7(u,y,le.current)?26:u==="html"||u==="head"||u==="body"?27:5;else e:switch(u){case L:return u=Ii(31,y,h,P),u.elementType=L,u.lanes=U,u;case x:return Cc(y.children,P,U,h);case w:Q=8,P|=24;break;case _:return u=Ii(12,y,h,P|2),u.elementType=_,u.lanes=U,u;case C:return u=Ii(13,y,h,P),u.elementType=C,u.lanes=U,u;case R:return u=Ii(19,y,h,P),u.elementType=R,u.lanes=U,u;default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case T:Q=10;break e;case A:Q=9;break e;case E:Q=11;break e;case O:Q=14;break e;case I:Q=16,S=null;break e}Q=29,y=Error(i(130,u===null?"null":typeof u,"")),S=null}return h=Ii(Q,y,h,P),h.elementType=u,h.type=S,h.lanes=U,h}function Cc(u,h,y,S){return u=Ii(7,u,S,h),u.lanes=y,u}function Lm(u,h,y){return u=Ii(6,u,null,h),u.lanes=y,u}function ch(u){var h=Ii(18,null,null,0);return h.stateNode=u,h}function Pm(u,h,y){return h=Ii(4,u.children!==null?u.children:[],u.key,h),h.lanes=y,h.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},h}var Fd=new WeakMap;function ho(u,h){if(typeof u=="object"&&u!==null){var y=Fd.get(u);return y!==void 0?y:(h={value:u,source:h,stack:Ne(h)},Fd.set(u,h),h)}return{value:u,source:h,stack:Ne(h)}}var Rc=[],Dc=0,uh=null,fh=0,ks=[],Ci=0,Ll=null,Ni=1,xa="";function qa(u,h){Rc[Dc++]=fh,Rc[Dc++]=uh,uh=u,fh=h}function Nx(u,h,y){ks[Ci++]=Ni,ks[Ci++]=xa,ks[Ci++]=Ll,Ll=u;var S=Ni;u=xa;var P=32-nt(S)-1;S&=~(1<<P),y+=1;var U=32-nt(h)+P;if(30<U){var Q=P-P%5;U=(S&(1<<Q)-1).toString(32),S>>=Q,P-=Q,Ni=1<<32-nt(h)+P|y<<P|S,xa=U+u}else Ni=1<<U|y<<P|S,xa=u}function Xa(u){u.return!==null&&(qa(u,1),Nx(u,1,0))}function Im(u){for(;u===uh;)uh=Rc[--Dc],Rc[Dc]=null,fh=Rc[--Dc],Rc[Dc]=null;for(;u===Ll;)Ll=ks[--Ci],ks[Ci]=null,xa=ks[--Ci],ks[Ci]=null,Ni=ks[--Ci],ks[Ci]=null}function Nm(u,h){ks[Ci++]=Ni,ks[Ci++]=xa,ks[Ci++]=Ll,Ni=h.id,xa=h.overflow,Ll=u}var Wi=null,yi=null,Dn=!1,Pl=null,po=!1,hh=Error(i(519));function Ya(u){var h=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Za(ho(h,u)),hh}function Ux(u){var h=u.stateNode,y=u.type,S=u.memoizedProps;switch(h[Zn]=u,h[Hi]=S,y){case"dialog":Un("cancel",h),Un("close",h);break;case"iframe":case"object":case"embed":Un("load",h);break;case"video":case"audio":for(y=0;y<ra.length;y++)Un(ra[y],h);break;case"source":Un("error",h);break;case"img":case"image":case"link":Un("error",h),Un("load",h);break;case"details":Un("toggle",h);break;case"input":Un("invalid",h),ji(h,S.value,S.defaultValue,S.checked,S.defaultChecked,S.type,S.name,!0);break;case"select":Un("invalid",h);break;case"textarea":Un("invalid",h),Hr(h,S.value,S.defaultValue,S.children)}y=S.children,typeof y!="string"&&typeof y!="number"&&typeof y!="bigint"||h.textContent===""+y||S.suppressHydrationWarning===!0||UP(h.textContent,y)?(S.popover!=null&&(Un("beforetoggle",h),Un("toggle",h)),S.onScroll!=null&&Un("scroll",h),S.onScrollEnd!=null&&Un("scrollend",h),S.onClick!=null&&(h.onclick=ss),h=!0):h=!1,h||Ya(u,!0)}function kx(u){for(Wi=u.return;Wi;)switch(Wi.tag){case 5:case 31:case 13:po=!1;return;case 27:case 3:po=!0;return;default:Wi=Wi.return}}function dh(u){if(u!==Wi)return!1;if(!Dn)return kx(u),Dn=!0,!1;var h=u.tag,y;if((y=h!==3&&h!==27)&&((y=h===5)&&(y=u.type,y=!(y!=="form"&&y!=="button")||nA(u.type,u.memoizedProps)),y=!y),y&&yi&&Ya(u),kx(u),h===13){if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(i(317));yi=WP(u)}else if(h===31){if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(i(317));yi=WP(u)}else h===27?(h=yi,Ph(u.type)?(u=aA,aA=null,yi=u):yi=h):yi=Wi?ul(u.stateNode.nextSibling):null;return!0}function Oc(){yi=Wi=null,Dn=!1}function Um(){var u=Pl;return u!==null&&(qi===null?qi=u:qi.push.apply(qi,u),Pl=null),u}function Za(u){Pl===null?Pl=[u]:Pl.push(u)}var ph=F(null),Lc=null,Ka=null;function Il(u,h,y){ee(ph,h._currentValue),h._currentValue=y}function Qa(u){u._currentValue=ph.current,X(ph)}function km(u,h,y){for(;u!==null;){var S=u.alternate;if((u.childLanes&h)!==h?(u.childLanes|=h,S!==null&&(S.childLanes|=h)):S!==null&&(S.childLanes&h)!==h&&(S.childLanes|=h),u===y)break;u=u.return}}function zm(u,h,y,S){var P=u.child;for(P!==null&&(P.return=u);P!==null;){var U=P.dependencies;if(U!==null){var Q=P.child;U=U.firstContext;e:for(;U!==null;){var fe=U;U=P;for(var Oe=0;Oe<h.length;Oe++)if(fe.context===h[Oe]){U.lanes|=y,fe=U.alternate,fe!==null&&(fe.lanes|=y),km(U.return,y,u),S||(Q=null);break e}U=fe.next}}else if(P.tag===18){if(Q=P.return,Q===null)throw Error(i(341));Q.lanes|=y,U=Q.alternate,U!==null&&(U.lanes|=y),km(Q,y,u),Q=null}else Q=P.child;if(Q!==null)Q.return=P;else for(Q=P;Q!==null;){if(Q===u){Q=null;break}if(P=Q.sibling,P!==null){P.return=Q.return,Q=P;break}Q=Q.return}P=Q}}function Ja(u,h,y,S){u=null;for(var P=h,U=!1;P!==null;){if(!U){if((P.flags&524288)!==0)U=!0;else if((P.flags&262144)!==0)break}if(P.tag===10){var Q=P.alternate;if(Q===null)throw Error(i(387));if(Q=Q.memoizedProps,Q!==null){var fe=P.type;vs(P.pendingProps.value,Q.value)||(u!==null?u.push(fe):u=[fe])}}else if(P===he.current){if(Q=P.alternate,Q===null)throw Error(i(387));Q.memoizedState.memoizedState!==P.memoizedState.memoizedState&&(u!==null?u.push(Ry):u=[Ry])}P=P.return}u!==null&&zm(h,u,y,S),h.flags|=262144}function Bd(u){for(u=u.firstContext;u!==null;){if(!vs(u.context._currentValue,u.memoizedValue))return!0;u=u.next}return!1}function Pc(u){Lc=u,Ka=null,u=u.dependencies,u!==null&&(u.firstContext=null)}function Zt(u){return zx(Lc,u)}function mh(u,h){return Lc===null&&Pc(u),zx(u,h)}function zx(u,h){var y=h._currentValue;if(h={context:h,memoizedValue:y,next:null},Ka===null){if(u===null)throw Error(i(308));Ka=h,u.dependencies={lanes:0,firstContext:h},u.flags|=524288}else Ka=Ka.next=h;return y}var Fx=typeof AbortController<"u"?AbortController:function(){var u=[],h=this.signal={aborted:!1,addEventListener:function(y,S){u.push(S)}};this.abort=function(){h.aborted=!0,u.forEach(function(y){return y()})}},VT=n.unstable_scheduleCallback,GT=n.unstable_NormalPriority,hr={$$typeof:T,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Pv(){return{controller:new Fx,data:new Map,refCount:0}}function zu(u){u.refCount--,u.refCount===0&&VT(GT,function(){u.controller.abort()})}var mo=null,Fm=0,Nl=0,$o=null;function Iv(u,h){if(mo===null){var y=mo=[];Fm=0,Nl=et(),$o={status:"pending",value:void 0,then:function(S){y.push(S)}}}return Fm++,h.then(Nv,Nv),h}function Nv(){if(--Fm===0&&mo!==null){$o!==null&&($o.status="fulfilled");var u=mo;mo=null,Nl=0,$o=null;for(var h=0;h<u.length;h++)(0,u[h])()}}function Uv(u,h){var y=[],S={status:"pending",value:null,reason:null,then:function(P){y.push(P)}};return u.then(function(){S.status="fulfilled",S.value=h;for(var P=0;P<y.length;P++)(0,y[P])(h)},function(P){for(S.status="rejected",S.reason=P,P=0;P<y.length;P++)(0,y[P])(void 0)}),S}var Bx=W.S;W.S=function(u,h){Sy=Z(),typeof h=="object"&&h!==null&&typeof h.then=="function"&&Iv(u,h),Bx!==null&&Bx(u,h)};var Ic=F(null);function Bm(){var u=Ic.current;return u!==null?u:Jt.pooledCache}function Vd(u,h){h===null?ee(Ic,Ic.current):ee(Ic,h.pool)}function kv(){var u=Bm();return u===null?null:{parent:hr._currentValue,pool:u}}var Fu=Error(i(460)),Gd=Error(i(474)),gn=Error(i(542)),Vm={then:function(){}};function zs(u){return u=u.status,u==="fulfilled"||u==="rejected"}function Gm(u,h,y){switch(y=u[y],y===void 0?u.push(h):y!==h&&(h.then(ss,ss),h=y),h.status){case"fulfilled":return h.value;case"rejected":throw u=h.reason,Gu(u),u;default:if(typeof h.status=="string")h.then(ss,ss);else{if(u=Jt,u!==null&&100<u.shellSuspendCounter)throw Error(i(482));u=h,u.status="pending",u.then(function(S){if(h.status==="pending"){var P=h;P.status="fulfilled",P.value=S}},function(S){if(h.status==="pending"){var P=h;P.status="rejected",P.reason=S}})}switch(h.status){case"fulfilled":return h.value;case"rejected":throw u=h.reason,Gu(u),u}throw el=h,Fu}}function Bu(u){try{var h=u._init;return h(u._payload)}catch(y){throw y!==null&&typeof y=="object"&&typeof y.then=="function"?(el=y,Fu):y}}var el=null;function Vu(){if(el===null)throw Error(i(459));var u=el;return el=null,u}function Gu(u){if(u===Fu||u===gn)throw Error(i(483))}var Hu=null,ju=0;function Hd(u){var h=ju;return ju+=1,Hu===null&&(Hu=[]),Gm(Hu,u,h)}function qo(u,h){h=h.props.ref,u.ref=h!==void 0?h:null}function gh(u,h){throw h.$$typeof===m?Error(i(525)):(u=Object.prototype.toString.call(h),Error(i(31,u==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":u)))}function Hm(u){function h(Ve,ze){if(u){var je=Ve.deletions;je===null?(Ve.deletions=[ze],Ve.flags|=16):je.push(ze)}}function y(Ve,ze){if(!u)return null;for(;ze!==null;)h(Ve,ze),ze=ze.sibling;return null}function S(Ve){for(var ze=new Map;Ve!==null;)Ve.key!==null?ze.set(Ve.key,Ve):ze.set(Ve.index,Ve),Ve=Ve.sibling;return ze}function P(Ve,ze){return Ve=Us(Ve,ze),Ve.index=0,Ve.sibling=null,Ve}function U(Ve,ze,je){return Ve.index=je,u?(je=Ve.alternate,je!==null?(je=je.index,je<ze?(Ve.flags|=67108866,ze):je):(Ve.flags|=67108866,ze)):(Ve.flags|=1048576,ze)}function Q(Ve){return u&&Ve.alternate===null&&(Ve.flags|=67108866),Ve}function fe(Ve,ze,je,ct){return ze===null||ze.tag!==6?(ze=Lm(je,Ve.mode,ct),ze.return=Ve,ze):(ze=P(ze,je),ze.return=Ve,ze)}function Oe(Ve,ze,je,ct){var jt=je.type;return jt===x?ot(Ve,ze,je.props.children,ct,je.key):ze!==null&&(ze.elementType===jt||typeof jt=="object"&&jt!==null&&jt.$$typeof===I&&Bu(jt)===ze.type)?(ze=P(ze,je.props),qo(ze,je),ze.return=Ve,ze):(ze=$a(je.type,je.key,je.props,null,Ve.mode,ct),qo(ze,je),ze.return=Ve,ze)}function We(Ve,ze,je,ct){return ze===null||ze.tag!==4||ze.stateNode.containerInfo!==je.containerInfo||ze.stateNode.implementation!==je.implementation?(ze=Pm(je,Ve.mode,ct),ze.return=Ve,ze):(ze=P(ze,je.children||[]),ze.return=Ve,ze)}function ot(Ve,ze,je,ct,jt){return ze===null||ze.tag!==7?(ze=Cc(je,Ve.mode,ct,jt),ze.return=Ve,ze):(ze=P(ze,je),ze.return=Ve,ze)}function ft(Ve,ze,je){if(typeof ze=="string"&&ze!==""||typeof ze=="number"||typeof ze=="bigint")return ze=Lm(""+ze,Ve.mode,je),ze.return=Ve,ze;if(typeof ze=="object"&&ze!==null){switch(ze.$$typeof){case v:return je=$a(ze.type,ze.key,ze.props,null,Ve.mode,je),qo(je,ze),je.return=Ve,je;case b:return ze=Pm(ze,Ve.mode,je),ze.return=Ve,ze;case I:return ze=Bu(ze),ft(Ve,ze,je)}if(q(ze)||B(ze))return ze=Cc(ze,Ve.mode,je,null),ze.return=Ve,ze;if(typeof ze.then=="function")return ft(Ve,Hd(ze),je);if(ze.$$typeof===T)return ft(Ve,mh(Ve,ze),je);gh(Ve,ze)}return null}function Ze(Ve,ze,je,ct){var jt=ze!==null?ze.key:null;if(typeof je=="string"&&je!==""||typeof je=="number"||typeof je=="bigint")return jt!==null?null:fe(Ve,ze,""+je,ct);if(typeof je=="object"&&je!==null){switch(je.$$typeof){case v:return je.key===jt?Oe(Ve,ze,je,ct):null;case b:return je.key===jt?We(Ve,ze,je,ct):null;case I:return je=Bu(je),Ze(Ve,ze,je,ct)}if(q(je)||B(je))return jt!==null?null:ot(Ve,ze,je,ct,null);if(typeof je.then=="function")return Ze(Ve,ze,Hd(je),ct);if(je.$$typeof===T)return Ze(Ve,ze,mh(Ve,je),ct);gh(Ve,je)}return null}function rt(Ve,ze,je,ct,jt){if(typeof ct=="string"&&ct!==""||typeof ct=="number"||typeof ct=="bigint")return Ve=Ve.get(je)||null,fe(ze,Ve,""+ct,jt);if(typeof ct=="object"&&ct!==null){switch(ct.$$typeof){case v:return Ve=Ve.get(ct.key===null?je:ct.key)||null,Oe(ze,Ve,ct,jt);case b:return Ve=Ve.get(ct.key===null?je:ct.key)||null,We(ze,Ve,ct,jt);case I:return ct=Bu(ct),rt(Ve,ze,je,ct,jt)}if(q(ct)||B(ct))return Ve=Ve.get(je)||null,ot(ze,Ve,ct,jt,null);if(typeof ct.then=="function")return rt(Ve,ze,je,Hd(ct),jt);if(ct.$$typeof===T)return rt(Ve,ze,je,mh(ze,ct),jt);gh(ze,ct)}return null}function zt(Ve,ze,je,ct){for(var jt=null,ti=null,Vt=ze,wn=ze=0,Vn=null;Vt!==null&&wn<je.length;wn++){Vt.index>wn?(Vn=Vt,Vt=null):Vn=Vt.sibling;var ni=Ze(Ve,Vt,je[wn],ct);if(ni===null){Vt===null&&(Vt=Vn);break}u&&Vt&&ni.alternate===null&&h(Ve,Vt),ze=U(ni,ze,wn),ti===null?jt=ni:ti.sibling=ni,ti=ni,Vt=Vn}if(wn===je.length)return y(Ve,Vt),Dn&&qa(Ve,wn),jt;if(Vt===null){for(;wn<je.length;wn++)Vt=ft(Ve,je[wn],ct),Vt!==null&&(ze=U(Vt,ze,wn),ti===null?jt=Vt:ti.sibling=Vt,ti=Vt);return Dn&&qa(Ve,wn),jt}for(Vt=S(Vt);wn<je.length;wn++)Vn=rt(Vt,Ve,wn,je[wn],ct),Vn!==null&&(u&&Vn.alternate!==null&&Vt.delete(Vn.key===null?wn:Vn.key),ze=U(Vn,ze,wn),ti===null?jt=Vn:ti.sibling=Vn,ti=Vn);return u&&Vt.forEach(function(zh){return h(Ve,zh)}),Dn&&qa(Ve,wn),jt}function Xt(Ve,ze,je,ct){if(je==null)throw Error(i(151));for(var jt=null,ti=null,Vt=ze,wn=ze=0,Vn=null,ni=je.next();Vt!==null&&!ni.done;wn++,ni=je.next()){Vt.index>wn?(Vn=Vt,Vt=null):Vn=Vt.sibling;var zh=Ze(Ve,Vt,ni.value,ct);if(zh===null){Vt===null&&(Vt=Vn);break}u&&Vt&&zh.alternate===null&&h(Ve,Vt),ze=U(zh,ze,wn),ti===null?jt=zh:ti.sibling=zh,ti=zh,Vt=Vn}if(ni.done)return y(Ve,Vt),Dn&&qa(Ve,wn),jt;if(Vt===null){for(;!ni.done;wn++,ni=je.next())ni=ft(Ve,ni.value,ct),ni!==null&&(ze=U(ni,ze,wn),ti===null?jt=ni:ti.sibling=ni,ti=ni);return Dn&&qa(Ve,wn),jt}for(Vt=S(Vt);!ni.done;wn++,ni=je.next())ni=rt(Vt,Ve,wn,ni.value,ct),ni!==null&&(u&&ni.alternate!==null&&Vt.delete(ni.key===null?wn:ni.key),ze=U(ni,ze,wn),ti===null?jt=ni:ti.sibling=ni,ti=ni);return u&&Vt.forEach(function(b7){return h(Ve,b7)}),Dn&&qa(Ve,wn),jt}function xi(Ve,ze,je,ct){if(typeof je=="object"&&je!==null&&je.type===x&&je.key===null&&(je=je.props.children),typeof je=="object"&&je!==null){switch(je.$$typeof){case v:e:{for(var jt=je.key;ze!==null;){if(ze.key===jt){if(jt=je.type,jt===x){if(ze.tag===7){y(Ve,ze.sibling),ct=P(ze,je.props.children),ct.return=Ve,Ve=ct;break e}}else if(ze.elementType===jt||typeof jt=="object"&&jt!==null&&jt.$$typeof===I&&Bu(jt)===ze.type){y(Ve,ze.sibling),ct=P(ze,je.props),qo(ct,je),ct.return=Ve,Ve=ct;break e}y(Ve,ze);break}else h(Ve,ze);ze=ze.sibling}je.type===x?(ct=Cc(je.props.children,Ve.mode,ct,je.key),ct.return=Ve,Ve=ct):(ct=$a(je.type,je.key,je.props,null,Ve.mode,ct),qo(ct,je),ct.return=Ve,Ve=ct)}return Q(Ve);case b:e:{for(jt=je.key;ze!==null;){if(ze.key===jt)if(ze.tag===4&&ze.stateNode.containerInfo===je.containerInfo&&ze.stateNode.implementation===je.implementation){y(Ve,ze.sibling),ct=P(ze,je.children||[]),ct.return=Ve,Ve=ct;break e}else{y(Ve,ze);break}else h(Ve,ze);ze=ze.sibling}ct=Pm(je,Ve.mode,ct),ct.return=Ve,Ve=ct}return Q(Ve);case I:return je=Bu(je),xi(Ve,ze,je,ct)}if(q(je))return zt(Ve,ze,je,ct);if(B(je)){if(jt=B(je),typeof jt!="function")throw Error(i(150));return je=jt.call(je),Xt(Ve,ze,je,ct)}if(typeof je.then=="function")return xi(Ve,ze,Hd(je),ct);if(je.$$typeof===T)return xi(Ve,ze,mh(Ve,je),ct);gh(Ve,je)}return typeof je=="string"&&je!==""||typeof je=="number"||typeof je=="bigint"?(je=""+je,ze!==null&&ze.tag===6?(y(Ve,ze.sibling),ct=P(ze,je),ct.return=Ve,Ve=ct):(y(Ve,ze),ct=Lm(je,Ve.mode,ct),ct.return=Ve,Ve=ct),Q(Ve)):y(Ve,ze)}return function(Ve,ze,je,ct){try{ju=0;var jt=xi(Ve,ze,je,ct);return Hu=null,jt}catch(Vt){if(Vt===Fu||Vt===gn)throw Vt;var ti=Ii(29,Vt,null,Ve.mode);return ti.lanes=ct,ti.return=Ve,ti}}}var Ul=Hm(!0),jm=Hm(!1),bs=!1;function jd(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function zv(u,h){u=u.updateQueue,h.updateQueue===u&&(h.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,callbacks:null})}function kl(u){return{lane:u,tag:0,payload:null,callback:null,next:null}}function Nc(u,h,y){var S=u.updateQueue;if(S===null)return null;if(S=S.shared,(Gt&2)!==0){var P=S.pending;return P===null?h.next=h:(h.next=P.next,P.next=h),S.pending=h,h=Wo(u),Tc(u,null,y),h}return Rr(u,S,h,y),Wo(u)}function Uc(u,h,y){if(h=h.updateQueue,h!==null&&(h=h.shared,(y&4194048)!==0)){var S=h.lanes;S&=u.pendingLanes,y|=S,h.lanes=y,Si(u,y)}}function Ht(u,h){var y=u.updateQueue,S=u.alternate;if(S!==null&&(S=S.updateQueue,y===S)){var P=null,U=null;if(y=y.firstBaseUpdate,y!==null){do{var Q={lane:y.lane,tag:y.tag,payload:y.payload,callback:null,next:null};U===null?P=U=Q:U=U.next=Q,y=y.next}while(y!==null);U===null?P=U=h:U=U.next=h}else P=U=h;y={baseState:S.baseState,firstBaseUpdate:P,lastBaseUpdate:U,shared:S.shared,callbacks:S.callbacks},u.updateQueue=y;return}u=y.lastBaseUpdate,u===null?y.firstBaseUpdate=h:u.next=h,y.lastBaseUpdate=h}var Fv=!1;function Wd(){if(Fv){var u=$o;if(u!==null)throw u}}function vh(u,h,y,S){Fv=!1;var P=u.updateQueue;bs=!1;var U=P.firstBaseUpdate,Q=P.lastBaseUpdate,fe=P.shared.pending;if(fe!==null){P.shared.pending=null;var Oe=fe,We=Oe.next;Oe.next=null,Q===null?U=We:Q.next=We,Q=Oe;var ot=u.alternate;ot!==null&&(ot=ot.updateQueue,fe=ot.lastBaseUpdate,fe!==Q&&(fe===null?ot.firstBaseUpdate=We:fe.next=We,ot.lastBaseUpdate=Oe))}if(U!==null){var ft=P.baseState;Q=0,ot=We=Oe=null,fe=U;do{var Ze=fe.lane&-536870913,rt=Ze!==fe.lane;if(rt?(dn&Ze)===Ze:(S&Ze)===Ze){Ze!==0&&Ze===Nl&&(Fv=!0),ot!==null&&(ot=ot.next={lane:0,tag:fe.tag,payload:fe.payload,callback:null,next:null});e:{var zt=u,Xt=fe;Ze=h;var xi=y;switch(Xt.tag){case 1:if(zt=Xt.payload,typeof zt=="function"){ft=zt.call(xi,ft,Ze);break e}ft=zt;break e;case 3:zt.flags=zt.flags&-65537|128;case 0:if(zt=Xt.payload,Ze=typeof zt=="function"?zt.call(xi,ft,Ze):zt,Ze==null)break e;ft=d({},ft,Ze);break e;case 2:bs=!0}}Ze=fe.callback,Ze!==null&&(u.flags|=64,rt&&(u.flags|=8192),rt=P.callbacks,rt===null?P.callbacks=[Ze]:rt.push(Ze))}else rt={lane:Ze,tag:fe.tag,payload:fe.payload,callback:fe.callback,next:null},ot===null?(We=ot=rt,Oe=ft):ot=ot.next=rt,Q|=Ze;if(fe=fe.next,fe===null){if(fe=P.shared.pending,fe===null)break;rt=fe,fe=rt.next,rt.next=null,P.lastBaseUpdate=rt,P.shared.pending=null}}while(!0);ot===null&&(Oe=ft),P.baseState=Oe,P.firstBaseUpdate=We,P.lastBaseUpdate=ot,U===null&&(P.shared.lanes=0),al|=Q,u.lanes=Q,u.memoizedState=ft}}function yh(u,h){if(typeof u!="function")throw Error(i(191,u));u.call(h)}function Vx(u,h){var y=u.callbacks;if(y!==null)for(u.callbacks=null,u=0;u<y.length;u++)yh(y[u],h)}var bh=F(null),Wm=F(0);function Gx(u,h){u=bo,ee(Wm,u),ee(bh,h),bo=u|h.baseLanes}function Bv(){ee(Wm,bo),ee(bh,bh.current)}function $d(){bo=Wm.current,X(bh),X(Wm)}var Fs=F(null),_s=null;function zl(u){var h=u.alternate;ee(On,On.current&1),ee(Fs,u),_s===null&&(h===null||bh.current!==null||h.memoizedState!==null)&&(_s=u)}function Vv(u){ee(On,On.current),ee(Fs,u),_s===null&&(_s=u)}function Hx(u){u.tag===22?(ee(On,On.current),ee(Fs,u),_s===null&&(_s=u)):Bs()}function Bs(){ee(On,On.current),ee(Fs,Fs.current)}function Ki(u){X(Fs),_s===u&&(_s=null),X(On)}var On=F(0);function go(u){for(var h=u;h!==null;){if(h.tag===13){var y=h.memoizedState;if(y!==null&&(y=y.dehydrated,y===null||sA(y)||oA(y)))return h}else if(h.tag===19&&(h.memoizedProps.revealOrder==="forwards"||h.memoizedProps.revealOrder==="backwards"||h.memoizedProps.revealOrder==="unstable_legacy-backwards"||h.memoizedProps.revealOrder==="together")){if((h.flags&128)!==0)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===u)break;for(;h.sibling===null;){if(h.return===null||h.return===u)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}var Ri=0,an=null,ci=null,An=null,Xo=!1,_h=!1,Wu=!1,$m=0,qd=0,xh=null,Gv=0;function Ui(){throw Error(i(321))}function Hv(u,h){if(h===null)return!1;for(var y=0;y<h.length&&y<u.length;y++)if(!vs(u[y],h[y]))return!1;return!0}function qm(u,h,y,S,P,U){return Ri=U,an=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,W.H=u===null||u.memoizedState===null?x1:cy,Wu=!1,U=y(S,P),Wu=!1,_h&&(U=$u(h,y,S,P)),jx(u),U}function jx(u){W.H=wh;var h=ci!==null&&ci.next!==null;if(Ri=0,An=ci=an=null,Xo=!1,qd=0,xh=null,h)throw Error(i(300));u===null||dr||(u=u.dependencies,u!==null&&Bd(u)&&(dr=!0))}function $u(u,h,y,S){an=u;var P=0;do{if(_h&&(xh=null),qd=0,_h=!1,25<=P)throw Error(i(301));if(P+=1,An=ci=null,u.updateQueue!=null){var U=u.updateQueue;U.lastEffect=null,U.events=null,U.stores=null,U.memoCache!=null&&(U.memoCache.index=0)}W.H=Yo,U=h(y,S)}while(_h);return U}function qu(){var u=W.H,h=u.useState()[0];return h=typeof h.then=="function"?Xd(h):h,u=u.useState()[0],(ci!==null?ci.memoizedState:null)!==u&&(an.flags|=1024),h}function jv(){var u=$m!==0;return $m=0,u}function Wv(u,h,y){h.updateQueue=u.updateQueue,h.flags&=-2053,u.lanes&=~y}function $v(u){if(Xo){for(u=u.memoizedState;u!==null;){var h=u.queue;h!==null&&(h.pending=null),u=u.next}Xo=!1}Ri=0,An=ci=an=null,_h=!1,qd=$m=0,xh=null}function xr(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return An===null?an.memoizedState=An=u:An=An.next=u,An}function Qi(){if(ci===null){var u=an.alternate;u=u!==null?u.memoizedState:null}else u=ci.next;var h=An===null?an.memoizedState:An.next;if(h!==null)An=h,ci=u;else{if(u===null)throw an.alternate===null?Error(i(467)):Error(i(310));ci=u,u={memoizedState:ci.memoizedState,baseState:ci.baseState,baseQueue:ci.baseQueue,queue:ci.queue,next:null},An===null?an.memoizedState=An=u:An=An.next=u}return An}function Xm(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Xd(u){var h=qd;return qd+=1,xh===null&&(xh=[]),u=Gm(xh,u,h),h=an,(An===null?h.memoizedState:An.next)===null&&(h=h.alternate,W.H=h===null||h.memoizedState===null?x1:cy),u}function kc(u){if(u!==null&&typeof u=="object"){if(typeof u.then=="function")return Xd(u);if(u.$$typeof===T)return Zt(u)}throw Error(i(438,String(u)))}function qv(u){var h=null,y=an.updateQueue;if(y!==null&&(h=y.memoCache),h==null){var S=an.alternate;S!==null&&(S=S.updateQueue,S!==null&&(S=S.memoCache,S!=null&&(h={data:S.data.map(function(P){return P.slice()}),index:0})))}if(h==null&&(h={data:[],index:0}),y===null&&(y=Xm(),an.updateQueue=y),y.memoCache=h,y=h.data[h.index],y===void 0)for(y=h.data[h.index]=Array(u),S=0;S<u;S++)y[S]=N;return h.index++,y}function Fl(u,h){return typeof h=="function"?h(u):h}function Ym(u){var h=Qi();return Xv(h,ci,u)}function Xv(u,h,y){var S=u.queue;if(S===null)throw Error(i(311));S.lastRenderedReducer=y;var P=u.baseQueue,U=S.pending;if(U!==null){if(P!==null){var Q=P.next;P.next=U.next,U.next=Q}h.baseQueue=P=U,S.pending=null}if(U=u.baseState,P===null)u.memoizedState=U;else{h=P.next;var fe=Q=null,Oe=null,We=h,ot=!1;do{var ft=We.lane&-536870913;if(ft!==We.lane?(dn&ft)===ft:(Ri&ft)===ft){var Ze=We.revertLane;if(Ze===0)Oe!==null&&(Oe=Oe.next={lane:0,revertLane:0,gesture:null,action:We.action,hasEagerState:We.hasEagerState,eagerState:We.eagerState,next:null}),ft===Nl&&(ot=!0);else if((Ri&Ze)===Ze){We=We.next,Ze===Nl&&(ot=!0);continue}else ft={lane:0,revertLane:We.revertLane,gesture:null,action:We.action,hasEagerState:We.hasEagerState,eagerState:We.eagerState,next:null},Oe===null?(fe=Oe=ft,Q=U):Oe=Oe.next=ft,an.lanes|=Ze,al|=Ze;ft=We.action,Wu&&y(U,ft),U=We.hasEagerState?We.eagerState:y(U,ft)}else Ze={lane:ft,revertLane:We.revertLane,gesture:We.gesture,action:We.action,hasEagerState:We.hasEagerState,eagerState:We.eagerState,next:null},Oe===null?(fe=Oe=Ze,Q=U):Oe=Oe.next=Ze,an.lanes|=ft,al|=ft;We=We.next}while(We!==null&&We!==h);if(Oe===null?Q=U:Oe.next=fe,!vs(U,u.memoizedState)&&(dr=!0,ot&&(y=$o,y!==null)))throw y;u.memoizedState=U,u.baseState=Q,u.baseQueue=Oe,S.lastRenderedState=U}return P===null&&(S.lanes=0),[u.memoizedState,S.dispatch]}function Yv(u){var h=Qi(),y=h.queue;if(y===null)throw Error(i(311));y.lastRenderedReducer=u;var S=y.dispatch,P=y.pending,U=h.memoizedState;if(P!==null){y.pending=null;var Q=P=P.next;do U=u(U,Q.action),Q=Q.next;while(Q!==P);vs(U,h.memoizedState)||(dr=!0),h.memoizedState=U,h.baseQueue===null&&(h.baseState=U),y.lastRenderedState=U}return[U,S]}function Wx(u,h,y){var S=an,P=Qi(),U=Dn;if(U){if(y===void 0)throw Error(i(407));y=y()}else y=h();var Q=!vs((ci||P).memoizedState,y);if(Q&&(P.memoizedState=y,dr=!0),P=P.queue,iy(Xx.bind(null,S,P,u),[u]),P.getSnapshot!==h||Q||An!==null&&An.memoizedState.tag&1){if(S.flags|=2048,zc(9,{destroy:void 0},qx.bind(null,S,P,y,h),null),Jt===null)throw Error(i(349));U||(Ri&127)!==0||$x(S,h,y)}return y}function $x(u,h,y){u.flags|=16384,u={getSnapshot:h,value:y},h=an.updateQueue,h===null?(h=Xm(),an.updateQueue=h,h.stores=[u]):(y=h.stores,y===null?h.stores=[u]:y.push(u))}function qx(u,h,y,S){h.value=y,h.getSnapshot=S,Yx(h)&&Zx(u)}function Xx(u,h,y){return y(function(){Yx(h)&&Zx(u)})}function Yx(u){var h=u.getSnapshot;u=u.value;try{var y=h();return!vs(u,y)}catch{return!0}}function Zx(u){var h=ys(u,2);h!==null&&yn(h,u,2)}function Zv(u){var h=xr();if(typeof u=="function"){var y=u;if(u=y(),Wu){He(!0);try{y()}finally{He(!1)}}}return h.memoizedState=h.baseState=u,h.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fl,lastRenderedState:u},h}function Kv(u,h,y,S){return u.baseState=y,Xv(u,ci,typeof S=="function"?S:Fl)}function HT(u,h,y,S,P){if(Jm(u))throw Error(i(485));if(u=h.action,u!==null){var U={payload:P,action:u,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Q){U.listeners.push(Q)}};W.T!==null?y(!0):U.isTransition=!1,S(U),y=h.pending,y===null?(U.next=h.pending=U,Kx(h,U)):(U.next=y.next,h.pending=y.next=U)}}function Kx(u,h){var y=h.action,S=h.payload,P=u.state;if(h.isTransition){var U=W.T,Q={};W.T=Q;try{var fe=y(P,S),Oe=W.S;Oe!==null&&Oe(Q,fe),Qx(u,h,fe)}catch(We){Qv(u,h,We)}finally{U!==null&&Q.types!==null&&(U.types=Q.types),W.T=U}}else try{U=y(P,S),Qx(u,h,U)}catch(We){Qv(u,h,We)}}function Qx(u,h,y){y!==null&&typeof y=="object"&&typeof y.then=="function"?y.then(function(S){Jx(u,h,S)},function(S){return Qv(u,h,S)}):Jx(u,h,y)}function Jx(u,h,y){h.status="fulfilled",h.value=y,e1(h),u.state=y,h=u.pending,h!==null&&(y=h.next,y===h?u.pending=null:(y=y.next,h.next=y,Kx(u,y)))}function Qv(u,h,y){var S=u.pending;if(u.pending=null,S!==null){S=S.next;do h.status="rejected",h.reason=y,e1(h),h=h.next;while(h!==S)}u.action=null}function e1(u){u=u.listeners;for(var h=0;h<u.length;h++)(0,u[h])()}function Jv(u,h){return h}function ey(u,h){if(Dn){var y=Jt.formState;if(y!==null){e:{var S=an;if(Dn){if(yi){t:{for(var P=yi,U=po;P.nodeType!==8;){if(!U){P=null;break t}if(P=ul(P.nextSibling),P===null){P=null;break t}}U=P.data,P=U==="F!"||U==="F"?P:null}if(P){yi=ul(P.nextSibling),S=P.data==="F!";break e}}Ya(S)}S=!1}S&&(h=y[0])}}return y=xr(),y.memoizedState=y.baseState=h,S={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Jv,lastRenderedState:h},y.queue=S,y=y1.bind(null,an,S),S.dispatch=y,S=Zv(!1),U=ly.bind(null,an,!1,S.queue),S=xr(),P={state:h,dispatch:null,action:u,pending:null},S.queue=P,y=HT.bind(null,an,P,U,y),P.dispatch=y,S.memoizedState=u,[h,y,!1]}function t1(u){var h=Qi();return ty(h,ci,u)}function ty(u,h,y){if(h=Xv(u,h,Jv)[0],u=Ym(Fl)[0],typeof h=="object"&&h!==null&&typeof h.then=="function")try{var S=Xd(h)}catch(Q){throw Q===Fu?gn:Q}else S=h;h=Qi();var P=h.queue,U=P.dispatch;return y!==h.memoizedState&&(an.flags|=2048,zc(9,{destroy:void 0},n1.bind(null,P,y),null)),[S,U,u]}function n1(u,h){u.action=h}function ny(u){var h=Qi(),y=ci;if(y!==null)return ty(h,y,u);Qi(),h=h.memoizedState,y=Qi();var S=y.queue.dispatch;return y.memoizedState=u,[h,S,!1]}function zc(u,h,y,S){return u={tag:u,create:y,deps:S,inst:h,next:null},h=an.updateQueue,h===null&&(h=Xm(),an.updateQueue=h),y=h.lastEffect,y===null?h.lastEffect=u.next=u:(S=y.next,y.next=u,u.next=S,h.lastEffect=u),u}function Zm(){return Qi().memoizedState}function Km(u,h,y,S){var P=xr();an.flags|=u,P.memoizedState=zc(1|h,{destroy:void 0},y,S===void 0?null:S)}function Qm(u,h,y,S){var P=Qi();S=S===void 0?null:S;var U=P.memoizedState.inst;ci!==null&&S!==null&&Hv(S,ci.memoizedState.deps)?P.memoizedState=zc(h,U,y,S):(an.flags|=u,P.memoizedState=zc(1|h,U,y,S))}function i1(u,h){Km(8390656,8,u,h)}function iy(u,h){Qm(2048,8,u,h)}function r1(u){an.flags|=4;var h=an.updateQueue;if(h===null)h=Xm(),an.updateQueue=h,h.events=[u];else{var y=h.events;y===null?h.events=[u]:y.push(u)}}function s1(u){var h=Qi().memoizedState;return r1({ref:h,nextImpl:u}),function(){if((Gt&2)!==0)throw Error(i(440));return h.impl.apply(void 0,arguments)}}function o1(u,h){return Qm(4,2,u,h)}function a1(u,h){return Qm(4,4,u,h)}function l1(u,h){if(typeof h=="function"){u=u();var y=h(u);return function(){typeof y=="function"?y():h(null)}}if(h!=null)return u=u(),h.current=u,function(){h.current=null}}function c1(u,h,y){y=y!=null?y.concat([u]):null,Qm(4,4,l1.bind(null,h,u),y)}function ry(){}function u1(u,h){var y=Qi();h=h===void 0?null:h;var S=y.memoizedState;return h!==null&&Hv(h,S[1])?S[0]:(y.memoizedState=[u,h],u)}function f1(u,h){var y=Qi();h=h===void 0?null:h;var S=y.memoizedState;if(h!==null&&Hv(h,S[1]))return S[0];if(S=u(),Wu){He(!0);try{u()}finally{He(!1)}}return y.memoizedState=[S,h],S}function sy(u,h,y){return y===void 0||(Ri&1073741824)!==0&&(dn&261930)===0?u.memoizedState=h:(u.memoizedState=y,u=Mn(),an.lanes|=u,al|=u,y)}function h1(u,h,y,S){return vs(y,h)?y:bh.current!==null?(u=sy(u,y,S),vs(u,h)||(dr=!0),u):(Ri&42)===0||(Ri&1073741824)!==0&&(dn&261930)===0?(dr=!0,u.memoizedState=y):(u=Mn(),an.lanes|=u,al|=u,h)}function d1(u,h,y,S,P){var U=G.p;G.p=U!==0&&8>U?U:8;var Q=W.T,fe={};W.T=fe,ly(u,!1,h,y);try{var Oe=P(),We=W.S;if(We!==null&&We(fe,Oe),Oe!==null&&typeof Oe=="object"&&typeof Oe.then=="function"){var ot=Uv(Oe,S);Yd(u,h,ot,xo(u))}else Yd(u,h,S,xo(u))}catch(ft){Yd(u,h,{then:function(){},status:"rejected",reason:ft},xo())}finally{G.p=U,Q!==null&&fe.types!==null&&(Q.types=fe.types),W.T=Q}}function jT(){}function oy(u,h,y,S){if(u.tag!==5)throw Error(i(476));var P=p1(u).queue;d1(u,P,h,K,y===null?jT:function(){return m1(u),y(S)})}function p1(u){var h=u.memoizedState;if(h!==null)return h;h={memoizedState:K,baseState:K,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fl,lastRenderedState:K},next:null};var y={};return h.next={memoizedState:y,baseState:y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fl,lastRenderedState:y},next:null},u.memoizedState=h,u=u.alternate,u!==null&&(u.memoizedState=h),h}function m1(u){var h=p1(u);h.next===null&&(h=u.alternate.memoizedState),Yd(u,h.next.queue,{},xo())}function ay(){return Zt(Ry)}function g1(){return Qi().memoizedState}function v1(){return Qi().memoizedState}function WT(u){for(var h=u.return;h!==null;){switch(h.tag){case 24:case 3:var y=xo();u=kl(y);var S=Nc(h,u,y);S!==null&&(yn(S,h,y),Uc(S,h,y)),h={cache:Pv()},u.payload=h;return}h=h.return}}function $T(u,h,y){var S=xo();y={lane:S,revertLane:0,gesture:null,action:y,hasEagerState:!1,eagerState:null,next:null},Jm(u)?b1(h,y):(y=Dm(u,h,y,S),y!==null&&(yn(y,u,S),_1(y,h,S)))}function y1(u,h,y){var S=xo();Yd(u,h,y,S)}function Yd(u,h,y,S){var P={lane:S,revertLane:0,gesture:null,action:y,hasEagerState:!1,eagerState:null,next:null};if(Jm(u))b1(h,P);else{var U=u.alternate;if(u.lanes===0&&(U===null||U.lanes===0)&&(U=h.lastRenderedReducer,U!==null))try{var Q=h.lastRenderedState,fe=U(Q,y);if(P.hasEagerState=!0,P.eagerState=fe,vs(fe,Q))return Rr(u,h,P,0),Jt===null&&zd(),!1}catch{}if(y=Dm(u,h,P,S),y!==null)return yn(y,u,S),_1(y,h,S),!0}return!1}function ly(u,h,y,S){if(S={lane:2,revertLane:et(),gesture:null,action:S,hasEagerState:!1,eagerState:null,next:null},Jm(u)){if(h)throw Error(i(479))}else h=Dm(u,y,S,2),h!==null&&yn(h,u,2)}function Jm(u){var h=u.alternate;return u===an||h!==null&&h===an}function b1(u,h){_h=Xo=!0;var y=u.pending;y===null?h.next=h:(h.next=y.next,y.next=h),u.pending=h}function _1(u,h,y){if((y&4194048)!==0){var S=h.lanes;S&=u.pendingLanes,y|=S,h.lanes=y,Si(u,y)}}var wh={readContext:Zt,use:kc,useCallback:Ui,useContext:Ui,useEffect:Ui,useImperativeHandle:Ui,useLayoutEffect:Ui,useInsertionEffect:Ui,useMemo:Ui,useReducer:Ui,useRef:Ui,useState:Ui,useDebugValue:Ui,useDeferredValue:Ui,useTransition:Ui,useSyncExternalStore:Ui,useId:Ui,useHostTransitionStatus:Ui,useFormState:Ui,useActionState:Ui,useOptimistic:Ui,useMemoCache:Ui,useCacheRefresh:Ui};wh.useEffectEvent=Ui;var x1={readContext:Zt,use:kc,useCallback:function(u,h){return xr().memoizedState=[u,h===void 0?null:h],u},useContext:Zt,useEffect:i1,useImperativeHandle:function(u,h,y){y=y!=null?y.concat([u]):null,Km(4194308,4,l1.bind(null,h,u),y)},useLayoutEffect:function(u,h){return Km(4194308,4,u,h)},useInsertionEffect:function(u,h){Km(4,2,u,h)},useMemo:function(u,h){var y=xr();h=h===void 0?null:h;var S=u();if(Wu){He(!0);try{u()}finally{He(!1)}}return y.memoizedState=[S,h],S},useReducer:function(u,h,y){var S=xr();if(y!==void 0){var P=y(h);if(Wu){He(!0);try{y(h)}finally{He(!1)}}}else P=h;return S.memoizedState=S.baseState=P,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:P},S.queue=u,u=u.dispatch=$T.bind(null,an,u),[S.memoizedState,u]},useRef:function(u){var h=xr();return u={current:u},h.memoizedState=u},useState:function(u){u=Zv(u);var h=u.queue,y=y1.bind(null,an,h);return h.dispatch=y,[u.memoizedState,y]},useDebugValue:ry,useDeferredValue:function(u,h){var y=xr();return sy(y,u,h)},useTransition:function(){var u=Zv(!1);return u=d1.bind(null,an,u.queue,!0,!1),xr().memoizedState=u,[!1,u]},useSyncExternalStore:function(u,h,y){var S=an,P=xr();if(Dn){if(y===void 0)throw Error(i(407));y=y()}else{if(y=h(),Jt===null)throw Error(i(349));(dn&127)!==0||$x(S,h,y)}P.memoizedState=y;var U={value:y,getSnapshot:h};return P.queue=U,i1(Xx.bind(null,S,U,u),[u]),S.flags|=2048,zc(9,{destroy:void 0},qx.bind(null,S,U,y,h),null),y},useId:function(){var u=xr(),h=Jt.identifierPrefix;if(Dn){var y=xa,S=Ni;y=(S&~(1<<32-nt(S)-1)).toString(32)+y,h="_"+h+"R_"+y,y=$m++,0<y&&(h+="H"+y.toString(32)),h+="_"}else y=Gv++,h="_"+h+"r_"+y.toString(32)+"_";return u.memoizedState=h},useHostTransitionStatus:ay,useFormState:ey,useActionState:ey,useOptimistic:function(u){var h=xr();h.memoizedState=h.baseState=u;var y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return h.queue=y,h=ly.bind(null,an,!0,y),y.dispatch=h,[u,h]},useMemoCache:qv,useCacheRefresh:function(){return xr().memoizedState=WT.bind(null,an)},useEffectEvent:function(u){var h=xr(),y={impl:u};return h.memoizedState=y,function(){if((Gt&2)!==0)throw Error(i(440));return y.impl.apply(void 0,arguments)}}},cy={readContext:Zt,use:kc,useCallback:u1,useContext:Zt,useEffect:iy,useImperativeHandle:c1,useInsertionEffect:o1,useLayoutEffect:a1,useMemo:f1,useReducer:Ym,useRef:Zm,useState:function(){return Ym(Fl)},useDebugValue:ry,useDeferredValue:function(u,h){var y=Qi();return h1(y,ci.memoizedState,u,h)},useTransition:function(){var u=Ym(Fl)[0],h=Qi().memoizedState;return[typeof u=="boolean"?u:Xd(u),h]},useSyncExternalStore:Wx,useId:g1,useHostTransitionStatus:ay,useFormState:t1,useActionState:t1,useOptimistic:function(u,h){var y=Qi();return Kv(y,ci,u,h)},useMemoCache:qv,useCacheRefresh:v1};cy.useEffectEvent=s1;var Yo={readContext:Zt,use:kc,useCallback:u1,useContext:Zt,useEffect:iy,useImperativeHandle:c1,useInsertionEffect:o1,useLayoutEffect:a1,useMemo:f1,useReducer:Yv,useRef:Zm,useState:function(){return Yv(Fl)},useDebugValue:ry,useDeferredValue:function(u,h){var y=Qi();return ci===null?sy(y,u,h):h1(y,ci.memoizedState,u,h)},useTransition:function(){var u=Yv(Fl)[0],h=Qi().memoizedState;return[typeof u=="boolean"?u:Xd(u),h]},useSyncExternalStore:Wx,useId:g1,useHostTransitionStatus:ay,useFormState:ny,useActionState:ny,useOptimistic:function(u,h){var y=Qi();return ci!==null?Kv(y,ci,u,h):(y.baseState=u,[u,y.queue.dispatch])},useMemoCache:qv,useCacheRefresh:v1};Yo.useEffectEvent=s1;function eg(u,h,y,S){h=u.memoizedState,y=y(S,h),y=y==null?h:d({},h,y),u.memoizedState=y,u.lanes===0&&(u.updateQueue.baseState=y)}var Zd={enqueueSetState:function(u,h,y){u=u._reactInternals;var S=xo(),P=kl(S);P.payload=h,y!=null&&(P.callback=y),h=Nc(u,P,S),h!==null&&(yn(h,u,S),Uc(h,u,S))},enqueueReplaceState:function(u,h,y){u=u._reactInternals;var S=xo(),P=kl(S);P.tag=1,P.payload=h,y!=null&&(P.callback=y),h=Nc(u,P,S),h!==null&&(yn(h,u,S),Uc(h,u,S))},enqueueForceUpdate:function(u,h){u=u._reactInternals;var y=xo(),S=kl(y);S.tag=2,h!=null&&(S.callback=h),h=Nc(u,S,y),h!==null&&(yn(h,u,y),Uc(h,u,y))}};function uy(u,h,y,S,P,U,Q){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(S,U,Q):h.prototype&&h.prototype.isPureReactComponent?!rh(y,S)||!rh(P,U):!0}function fy(u,h,y,S){u=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(y,S),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(y,S),h.state!==u&&Zd.enqueueReplaceState(h,h.state,null)}function Fc(u,h){var y=h;if("ref"in h){y={};for(var S in h)S!=="ref"&&(y[S]=h[S])}if(u=u.defaultProps){y===h&&(y=d({},y));for(var P in u)y[P]===void 0&&(y[P]=u[P])}return y}function w1(u){kd(u)}function hy(u){console.error(u)}function dy(u){kd(u)}function tg(u,h){try{var y=u.onUncaughtError;y(h.value,{componentStack:h.stack})}catch(S){setTimeout(function(){throw S})}}function S1(u,h,y){try{var S=u.onCaughtError;S(y.value,{componentStack:y.stack,errorBoundary:h.tag===1?h.stateNode:null})}catch(P){setTimeout(function(){throw P})}}function py(u,h,y){return y=kl(y),y.tag=3,y.payload={element:null},y.callback=function(){tg(u,h)},y}function my(u){return u=kl(u),u.tag=3,u}function E1(u,h,y,S){var P=y.type.getDerivedStateFromError;if(typeof P=="function"){var U=S.value;u.payload=function(){return P(U)},u.callback=function(){S1(h,y,S)}}var Q=y.stateNode;Q!==null&&typeof Q.componentDidCatch=="function"&&(u.callback=function(){S1(h,y,S),typeof P!="function"&&(tr===null?tr=new Set([this]):tr.add(this));var fe=S.stack;this.componentDidCatch(S.value,{componentStack:fe!==null?fe:""})})}function wr(u,h,y,S,P){if(y.flags|=32768,S!==null&&typeof S=="object"&&typeof S.then=="function"){if(h=y.alternate,h!==null&&Ja(h,y,P,!0),y=Fs.current,y!==null){switch(y.tag){case 31:case 13:return _s===null?Rh():y.alternate===null&&ki===0&&(ki=3),y.flags&=-257,y.flags|=65536,y.lanes=P,S===Vm?y.flags|=16384:(h=y.updateQueue,h===null?y.updateQueue=new Set([S]):h.add(S),lp(u,S,P)),!1;case 22:return y.flags|=65536,S===Vm?y.flags|=16384:(h=y.updateQueue,h===null?(h={transitions:null,markerInstances:null,retryQueue:new Set([S])},y.updateQueue=h):(y=h.retryQueue,y===null?h.retryQueue=new Set([S]):y.add(S)),lp(u,S,P)),!1}throw Error(i(435,y.tag))}return lp(u,S,P),Rh(),!1}if(Dn)return h=Fs.current,h!==null?((h.flags&65536)===0&&(h.flags|=256),h.flags|=65536,h.lanes=P,S!==hh&&(u=Error(i(422),{cause:S}),Za(ho(u,y)))):(S!==hh&&(h=Error(i(423),{cause:S}),Za(ho(h,y))),u=u.current.alternate,u.flags|=65536,P&=-P,u.lanes|=P,S=ho(S,y),P=py(u.stateNode,S,P),Ht(u,P),ki!==4&&(ki=2)),!1;var U=Error(i(520),{cause:S});if(U=ho(U,y),tf===null?tf=[U]:tf.push(U),ki!==4&&(ki=2),h===null)return!0;S=ho(S,y),y=h;do{switch(y.tag){case 3:return y.flags|=65536,u=P&-P,y.lanes|=u,u=py(y.stateNode,S,u),Ht(y,u),!1;case 1:if(h=y.type,U=y.stateNode,(y.flags&128)===0&&(typeof h.getDerivedStateFromError=="function"||U!==null&&typeof U.componentDidCatch=="function"&&(tr===null||!tr.has(U))))return y.flags|=65536,P&=-P,y.lanes|=P,P=my(P),E1(P,u,y,S),Ht(y,P),!1}y=y.return}while(y!==null);return!1}var ng=Error(i(461)),dr=!1;function Dr(u,h,y,S){h.child=u===null?jm(h,null,y,S):Ul(h,u.child,y,S)}function gy(u,h,y,S,P){y=y.render;var U=h.ref;if("ref"in S){var Q={};for(var fe in S)fe!=="ref"&&(Q[fe]=S[fe])}else Q=S;return Pc(h),S=qm(u,h,y,Q,U,P),fe=jv(),u!==null&&!dr?(Wv(u,h,P),Ji(u,h,P)):(Dn&&fe&&Xa(h),h.flags|=1,Dr(u,h,S,P),h.child)}function Xu(u,h,y,S,P){if(u===null){var U=y.type;return typeof U=="function"&&!Om(U)&&U.defaultProps===void 0&&y.compare===null?(h.tag=15,h.type=U,ig(u,h,U,S,P)):(u=$a(y.type,null,S,h,h.mode,P),u.ref=h.ref,u.return=h,h.child=u)}if(U=u.child,!cg(u,P)){var Q=U.memoizedProps;if(y=y.compare,y=y!==null?y:rh,y(Q,S)&&u.ref===h.ref)return Ji(u,h,P)}return h.flags|=1,u=Us(U,S),u.ref=h.ref,u.return=h,h.child=u}function ig(u,h,y,S,P){if(u!==null){var U=u.memoizedProps;if(rh(U,S)&&u.ref===h.ref)if(dr=!1,h.pendingProps=S=U,cg(u,P))(u.flags&131072)!==0&&(dr=!0);else return h.lanes=u.lanes,Ji(u,h,P)}return Sh(u,h,y,S,P)}function Yu(u,h,y,S){var P=S.children,U=u!==null?u.memoizedState:null;if(u===null&&h.stateNode===null&&(h.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),S.mode==="hidden"){if((h.flags&128)!==0){if(U=U!==null?U.baseLanes|y:y,u!==null){for(S=h.child=u.child,P=0;S!==null;)P=P|S.lanes|S.childLanes,S=S.sibling;S=P&~U}else S=0,h.child=null;return Vs(u,h,U,y,S)}if((y&536870912)!==0)h.memoizedState={baseLanes:0,cachePool:null},u!==null&&Vd(h,U!==null?U.cachePool:null),U!==null?Gx(h,U):Bv(),Hx(h);else return S=h.lanes=536870912,Vs(u,h,U!==null?U.baseLanes|y:y,y,S)}else U!==null?(Vd(h,U.cachePool),Gx(h,U),Bs(),h.memoizedState=null):(u!==null&&Vd(h,null),Bv(),Bs());return Dr(u,h,P,y),h.child}function tl(u,h){return u!==null&&u.tag===22||h.stateNode!==null||(h.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.sibling}function Vs(u,h,y,S,P){var U=Bm();return U=U===null?null:{parent:hr._currentValue,pool:U},h.memoizedState={baseLanes:y,cachePool:U},u!==null&&Vd(h,null),Bv(),Hx(h),u!==null&&Ja(u,h,S,!0),h.childLanes=P,null}function rg(u,h){return h=lg({mode:h.mode,children:h.children},u.mode),h.ref=u.ref,u.child=h,h.return=u,h}function M1(u,h,y){return Ul(h,u.child,null,y),u=rg(h,h.pendingProps),u.flags|=2,Ki(h),h.memoizedState=null,u}function sg(u,h,y){var S=h.pendingProps,P=(h.flags&128)!==0;if(h.flags&=-129,u===null){if(Dn){if(S.mode==="hidden")return u=rg(h,S),h.lanes=536870912,tl(null,u);if(Vv(h),(u=yi)?(u=jP(u,po),u=u!==null&&u.data==="&"?u:null,u!==null&&(h.memoizedState={dehydrated:u,treeContext:Ll!==null?{id:Ni,overflow:xa}:null,retryLane:536870912,hydrationErrors:null},y=ch(u),y.return=h,h.child=y,Wi=h,yi=null)):u=null,u===null)throw Ya(h);return h.lanes=536870912,null}return rg(h,S)}var U=u.memoizedState;if(U!==null){var Q=U.dehydrated;if(Vv(h),P)if(h.flags&256)h.flags&=-257,h=M1(u,h,y);else if(h.memoizedState!==null)h.child=u.child,h.flags|=128,h=null;else throw Error(i(558));else if(dr||Ja(u,h,y,!1),P=(y&u.childLanes)!==0,dr||P){if(S=Jt,S!==null&&(Q=rs(S,y),Q!==0&&Q!==U.retryLane))throw U.retryLane=Q,ys(u,Q),yn(S,u,Q),ng;Rh(),h=M1(u,h,y)}else u=U.treeContext,yi=ul(Q.nextSibling),Wi=h,Dn=!0,Pl=null,po=!1,u!==null&&Nm(h,u),h=rg(h,S),h.flags|=4096;return h}return u=Us(u.child,{mode:S.mode,children:S.children}),u.ref=h.ref,h.child=u,u.return=h,u}function Zu(u,h){var y=h.ref;if(y===null)u!==null&&u.ref!==null&&(h.flags|=4194816);else{if(typeof y!="function"&&typeof y!="object")throw Error(i(284));(u===null||u.ref!==y)&&(h.flags|=4194816)}}function Sh(u,h,y,S,P){return Pc(h),y=qm(u,h,y,S,void 0,P),S=jv(),u!==null&&!dr?(Wv(u,h,P),Ji(u,h,P)):(Dn&&S&&Xa(h),h.flags|=1,Dr(u,h,y,P),h.child)}function Kd(u,h,y,S,P,U){return Pc(h),h.updateQueue=null,y=$u(h,S,y,P),jx(u),S=jv(),u!==null&&!dr?(Wv(u,h,U),Ji(u,h,U)):(Dn&&S&&Xa(h),h.flags|=1,Dr(u,h,y,U),h.child)}function og(u,h,y,S,P){if(Pc(h),h.stateNode===null){var U=Ac,Q=y.contextType;typeof Q=="object"&&Q!==null&&(U=Zt(Q)),U=new y(S,U),h.memoizedState=U.state!==null&&U.state!==void 0?U.state:null,U.updater=Zd,h.stateNode=U,U._reactInternals=h,U=h.stateNode,U.props=S,U.state=h.memoizedState,U.refs={},jd(h),Q=y.contextType,U.context=typeof Q=="object"&&Q!==null?Zt(Q):Ac,U.state=h.memoizedState,Q=y.getDerivedStateFromProps,typeof Q=="function"&&(eg(h,y,Q,S),U.state=h.memoizedState),typeof y.getDerivedStateFromProps=="function"||typeof U.getSnapshotBeforeUpdate=="function"||typeof U.UNSAFE_componentWillMount!="function"&&typeof U.componentWillMount!="function"||(Q=U.state,typeof U.componentWillMount=="function"&&U.componentWillMount(),typeof U.UNSAFE_componentWillMount=="function"&&U.UNSAFE_componentWillMount(),Q!==U.state&&Zd.enqueueReplaceState(U,U.state,null),vh(h,S,U,P),Wd(),U.state=h.memoizedState),typeof U.componentDidMount=="function"&&(h.flags|=4194308),S=!0}else if(u===null){U=h.stateNode;var fe=h.memoizedProps,Oe=Fc(y,fe);U.props=Oe;var We=U.context,ot=y.contextType;Q=Ac,typeof ot=="object"&&ot!==null&&(Q=Zt(ot));var ft=y.getDerivedStateFromProps;ot=typeof ft=="function"||typeof U.getSnapshotBeforeUpdate=="function",fe=h.pendingProps!==fe,ot||typeof U.UNSAFE_componentWillReceiveProps!="function"&&typeof U.componentWillReceiveProps!="function"||(fe||We!==Q)&&fy(h,U,S,Q),bs=!1;var Ze=h.memoizedState;U.state=Ze,vh(h,S,U,P),Wd(),We=h.memoizedState,fe||Ze!==We||bs?(typeof ft=="function"&&(eg(h,y,ft,S),We=h.memoizedState),(Oe=bs||uy(h,y,Oe,S,Ze,We,Q))?(ot||typeof U.UNSAFE_componentWillMount!="function"&&typeof U.componentWillMount!="function"||(typeof U.componentWillMount=="function"&&U.componentWillMount(),typeof U.UNSAFE_componentWillMount=="function"&&U.UNSAFE_componentWillMount()),typeof U.componentDidMount=="function"&&(h.flags|=4194308)):(typeof U.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=S,h.memoizedState=We),U.props=S,U.state=We,U.context=Q,S=Oe):(typeof U.componentDidMount=="function"&&(h.flags|=4194308),S=!1)}else{U=h.stateNode,zv(u,h),Q=h.memoizedProps,ot=Fc(y,Q),U.props=ot,ft=h.pendingProps,Ze=U.context,We=y.contextType,Oe=Ac,typeof We=="object"&&We!==null&&(Oe=Zt(We)),fe=y.getDerivedStateFromProps,(We=typeof fe=="function"||typeof U.getSnapshotBeforeUpdate=="function")||typeof U.UNSAFE_componentWillReceiveProps!="function"&&typeof U.componentWillReceiveProps!="function"||(Q!==ft||Ze!==Oe)&&fy(h,U,S,Oe),bs=!1,Ze=h.memoizedState,U.state=Ze,vh(h,S,U,P),Wd();var rt=h.memoizedState;Q!==ft||Ze!==rt||bs||u!==null&&u.dependencies!==null&&Bd(u.dependencies)?(typeof fe=="function"&&(eg(h,y,fe,S),rt=h.memoizedState),(ot=bs||uy(h,y,ot,S,Ze,rt,Oe)||u!==null&&u.dependencies!==null&&Bd(u.dependencies))?(We||typeof U.UNSAFE_componentWillUpdate!="function"&&typeof U.componentWillUpdate!="function"||(typeof U.componentWillUpdate=="function"&&U.componentWillUpdate(S,rt,Oe),typeof U.UNSAFE_componentWillUpdate=="function"&&U.UNSAFE_componentWillUpdate(S,rt,Oe)),typeof U.componentDidUpdate=="function"&&(h.flags|=4),typeof U.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof U.componentDidUpdate!="function"||Q===u.memoizedProps&&Ze===u.memoizedState||(h.flags|=4),typeof U.getSnapshotBeforeUpdate!="function"||Q===u.memoizedProps&&Ze===u.memoizedState||(h.flags|=1024),h.memoizedProps=S,h.memoizedState=rt),U.props=S,U.state=rt,U.context=Oe,S=ot):(typeof U.componentDidUpdate!="function"||Q===u.memoizedProps&&Ze===u.memoizedState||(h.flags|=4),typeof U.getSnapshotBeforeUpdate!="function"||Q===u.memoizedProps&&Ze===u.memoizedState||(h.flags|=1024),S=!1)}return U=S,Zu(u,h),S=(h.flags&128)!==0,U||S?(U=h.stateNode,y=S&&typeof y.getDerivedStateFromError!="function"?null:U.render(),h.flags|=1,u!==null&&S?(h.child=Ul(h,u.child,null,P),h.child=Ul(h,null,y,P)):Dr(u,h,y,P),h.memoizedState=U.state,u=h.child):u=Ji(u,h,P),u}function T1(u,h,y,S){return Oc(),h.flags|=256,Dr(u,h,y,S),h.child}var vy={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function cs(u){return{baseLanes:u,cachePool:kv()}}function ag(u,h,y){return u=u!==null?u.childLanes&~y:0,h&&(u|=Ss),u}function A1(u,h,y){var S=h.pendingProps,P=!1,U=(h.flags&128)!==0,Q;if((Q=U)||(Q=u!==null&&u.memoizedState===null?!1:(On.current&2)!==0),Q&&(P=!0,h.flags&=-129),Q=(h.flags&32)!==0,h.flags&=-33,u===null){if(Dn){if(P?zl(h):Bs(),(u=yi)?(u=jP(u,po),u=u!==null&&u.data!=="&"?u:null,u!==null&&(h.memoizedState={dehydrated:u,treeContext:Ll!==null?{id:Ni,overflow:xa}:null,retryLane:536870912,hydrationErrors:null},y=ch(u),y.return=h,h.child=y,Wi=h,yi=null)):u=null,u===null)throw Ya(h);return oA(u)?h.lanes=32:h.lanes=536870912,null}var fe=S.children;return S=S.fallback,P?(Bs(),P=h.mode,fe=lg({mode:"hidden",children:fe},P),S=Cc(S,P,y,null),fe.return=h,S.return=h,fe.sibling=S,h.child=fe,S=h.child,S.memoizedState=cs(y),S.childLanes=ag(u,Q,y),h.memoizedState=vy,tl(null,S)):(zl(h),Qd(h,fe))}var Oe=u.memoizedState;if(Oe!==null&&(fe=Oe.dehydrated,fe!==null)){if(U)h.flags&256?(zl(h),h.flags&=-257,h=yy(u,h,y)):h.memoizedState!==null?(Bs(),h.child=u.child,h.flags|=128,h=null):(Bs(),fe=S.fallback,P=h.mode,S=lg({mode:"visible",children:S.children},P),fe=Cc(fe,P,y,null),fe.flags|=2,S.return=h,fe.return=h,S.sibling=fe,h.child=S,Ul(h,u.child,null,y),S=h.child,S.memoizedState=cs(y),S.childLanes=ag(u,Q,y),h.memoizedState=vy,h=tl(null,S));else if(zl(h),oA(fe)){if(Q=fe.nextSibling&&fe.nextSibling.dataset,Q)var We=Q.dgst;Q=We,S=Error(i(419)),S.stack="",S.digest=Q,Za({value:S,source:null,stack:null}),h=yy(u,h,y)}else if(dr||Ja(u,h,y,!1),Q=(y&u.childLanes)!==0,dr||Q){if(Q=Jt,Q!==null&&(S=rs(Q,y),S!==0&&S!==Oe.retryLane))throw Oe.retryLane=S,ys(u,S),yn(Q,u,S),ng;sA(fe)||Rh(),h=yy(u,h,y)}else sA(fe)?(h.flags|=192,h.child=u.child,h=null):(u=Oe.treeContext,yi=ul(fe.nextSibling),Wi=h,Dn=!0,Pl=null,po=!1,u!==null&&Nm(h,u),h=Qd(h,S.children),h.flags|=4096);return h}return P?(Bs(),fe=S.fallback,P=h.mode,Oe=u.child,We=Oe.sibling,S=Us(Oe,{mode:"hidden",children:S.children}),S.subtreeFlags=Oe.subtreeFlags&65011712,We!==null?fe=Us(We,fe):(fe=Cc(fe,P,y,null),fe.flags|=2),fe.return=h,S.return=h,S.sibling=fe,h.child=S,tl(null,S),S=h.child,fe=u.child.memoizedState,fe===null?fe=cs(y):(P=fe.cachePool,P!==null?(Oe=hr._currentValue,P=P.parent!==Oe?{parent:Oe,pool:Oe}:P):P=kv(),fe={baseLanes:fe.baseLanes|y,cachePool:P}),S.memoizedState=fe,S.childLanes=ag(u,Q,y),h.memoizedState=vy,tl(u.child,S)):(zl(h),y=u.child,u=y.sibling,y=Us(y,{mode:"visible",children:S.children}),y.return=h,y.sibling=null,u!==null&&(Q=h.deletions,Q===null?(h.deletions=[u],h.flags|=16):Q.push(u)),h.child=y,h.memoizedState=null,y)}function Qd(u,h){return h=lg({mode:"visible",children:h},u.mode),h.return=u,u.child=h}function lg(u,h){return u=Ii(22,u,null,h),u.lanes=0,u}function yy(u,h,y){return Ul(h,u.child,null,y),u=Qd(h,h.pendingProps.children),u.flags|=2,h.memoizedState=null,u}function C1(u,h,y){u.lanes|=h;var S=u.alternate;S!==null&&(S.lanes|=h),km(u.return,h,y)}function Ku(u,h,y,S,P,U){var Q=u.memoizedState;Q===null?u.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:S,tail:y,tailMode:P,treeForkCount:U}:(Q.isBackwards=h,Q.rendering=null,Q.renderingStartTime=0,Q.last=S,Q.tail=y,Q.tailMode=P,Q.treeForkCount=U)}function Gs(u,h,y){var S=h.pendingProps,P=S.revealOrder,U=S.tail;S=S.children;var Q=On.current,fe=(Q&2)!==0;if(fe?(Q=Q&1|2,h.flags|=128):Q&=1,ee(On,Q),Dr(u,h,S,y),S=Dn?fh:0,!fe&&u!==null&&(u.flags&128)!==0)e:for(u=h.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&C1(u,y,h);else if(u.tag===19)C1(u,y,h);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===h)break e;for(;u.sibling===null;){if(u.return===null||u.return===h)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}switch(P){case"forwards":for(y=h.child,P=null;y!==null;)u=y.alternate,u!==null&&go(u)===null&&(P=y),y=y.sibling;y=P,y===null?(P=h.child,h.child=null):(P=y.sibling,y.sibling=null),Ku(h,!1,P,y,U,S);break;case"backwards":case"unstable_legacy-backwards":for(y=null,P=h.child,h.child=null;P!==null;){if(u=P.alternate,u!==null&&go(u)===null){h.child=P;break}u=P.sibling,P.sibling=y,y=P,P=u}Ku(h,!0,y,null,U,S);break;case"together":Ku(h,!1,null,null,void 0,S);break;default:h.memoizedState=null}return h.child}function Ji(u,h,y){if(u!==null&&(h.dependencies=u.dependencies),al|=h.lanes,(y&h.childLanes)===0)if(u!==null){if(Ja(u,h,y,!1),(y&h.childLanes)===0)return null}else return null;if(u!==null&&h.child!==u.child)throw Error(i(153));if(h.child!==null){for(u=h.child,y=Us(u,u.pendingProps),h.child=y,y.return=h;u.sibling!==null;)u=u.sibling,y=y.sibling=Us(u,u.pendingProps),y.return=h;y.sibling=null}return h.child}function cg(u,h){return(u.lanes&h)!==0?!0:(u=u.dependencies,!!(u!==null&&Bd(u)))}function qT(u,h,y){switch(h.tag){case 3:be(h,h.stateNode.containerInfo),Il(h,hr,u.memoizedState.cache),Oc();break;case 27:case 5:Ee(h);break;case 4:be(h,h.stateNode.containerInfo);break;case 10:Il(h,h.type,h.memoizedProps.value);break;case 31:if(h.memoizedState!==null)return h.flags|=128,Vv(h),null;break;case 13:var S=h.memoizedState;if(S!==null)return S.dehydrated!==null?(zl(h),h.flags|=128,null):(y&h.child.childLanes)!==0?A1(u,h,y):(zl(h),u=Ji(u,h,y),u!==null?u.sibling:null);zl(h);break;case 19:var P=(u.flags&128)!==0;if(S=(y&h.childLanes)!==0,S||(Ja(u,h,y,!1),S=(y&h.childLanes)!==0),P){if(S)return Gs(u,h,y);h.flags|=128}if(P=h.memoizedState,P!==null&&(P.rendering=null,P.tail=null,P.lastEffect=null),ee(On,On.current),S)break;return null;case 22:return h.lanes=0,Yu(u,h,y,h.pendingProps);case 24:Il(h,hr,u.memoizedState.cache)}return Ji(u,h,y)}function ug(u,h,y){if(u!==null)if(u.memoizedProps!==h.pendingProps)dr=!0;else{if(!cg(u,y)&&(h.flags&128)===0)return dr=!1,qT(u,h,y);dr=(u.flags&131072)!==0}else dr=!1,Dn&&(h.flags&1048576)!==0&&Nx(h,fh,h.index);switch(h.lanes=0,h.tag){case 16:e:{var S=h.pendingProps;if(u=Bu(h.elementType),h.type=u,typeof u=="function")Om(u)?(S=Fc(u,S),h.tag=1,h=og(null,h,u,S,y)):(h.tag=0,h=Sh(null,h,u,S,y));else{if(u!=null){var P=u.$$typeof;if(P===E){h.tag=11,h=gy(null,h,u,S,y);break e}else if(P===O){h.tag=14,h=Xu(null,h,u,S,y);break e}}throw h=j(u)||u,Error(i(306,h,""))}}return h;case 0:return Sh(u,h,h.type,h.pendingProps,y);case 1:return S=h.type,P=Fc(S,h.pendingProps),og(u,h,S,P,y);case 3:e:{if(be(h,h.stateNode.containerInfo),u===null)throw Error(i(387));S=h.pendingProps;var U=h.memoizedState;P=U.element,zv(u,h),vh(h,S,null,y);var Q=h.memoizedState;if(S=Q.cache,Il(h,hr,S),S!==U.cache&&zm(h,[hr],y,!0),Wd(),S=Q.element,U.isDehydrated)if(U={element:S,isDehydrated:!1,cache:Q.cache},h.updateQueue.baseState=U,h.memoizedState=U,h.flags&256){h=T1(u,h,S,y);break e}else if(S!==P){P=ho(Error(i(424)),h),Za(P),h=T1(u,h,S,y);break e}else for(u=h.stateNode.containerInfo,u.nodeType===9?u=u.body:u=u.nodeName==="HTML"?u.ownerDocument.body:u,yi=ul(u.firstChild),Wi=h,Dn=!0,Pl=null,po=!0,y=jm(h,null,S,y),h.child=y;y;)y.flags=y.flags&-3|4096,y=y.sibling;else{if(Oc(),S===P){h=Ji(u,h,y);break e}Dr(u,h,S,y)}h=h.child}return h;case 26:return Zu(u,h),u===null?(y=ZP(h.type,null,h.pendingProps,null))?h.memoizedState=y:Dn||(y=h.type,u=h.pendingProps,S=L1(ue.current).createElement(y),S[Zn]=h,S[Hi]=u,Ms(S,y,u),lt(S),h.stateNode=S):h.memoizedState=ZP(h.type,u.memoizedProps,h.pendingProps,u.memoizedState),null;case 27:return Ee(h),u===null&&Dn&&(S=h.stateNode=qP(h.type,h.pendingProps,ue.current),Wi=h,po=!0,P=yi,Ph(h.type)?(aA=P,yi=ul(S.firstChild)):yi=P),Dr(u,h,h.pendingProps.children,y),Zu(u,h),u===null&&(h.flags|=4194304),h.child;case 5:return u===null&&Dn&&((P=S=yi)&&(S=Y9(S,h.type,h.pendingProps,po),S!==null?(h.stateNode=S,Wi=h,yi=ul(S.firstChild),po=!1,P=!0):P=!1),P||Ya(h)),Ee(h),P=h.type,U=h.pendingProps,Q=u!==null?u.memoizedProps:null,S=U.children,nA(P,U)?S=null:Q!==null&&nA(P,Q)&&(h.flags|=32),h.memoizedState!==null&&(P=qm(u,h,qu,null,null,y),Ry._currentValue=P),Zu(u,h),Dr(u,h,S,y),h.child;case 6:return u===null&&Dn&&((u=y=yi)&&(y=Z9(y,h.pendingProps,po),y!==null?(h.stateNode=y,Wi=h,yi=null,u=!0):u=!1),u||Ya(h)),null;case 13:return A1(u,h,y);case 4:return be(h,h.stateNode.containerInfo),S=h.pendingProps,u===null?h.child=Ul(h,null,S,y):Dr(u,h,S,y),h.child;case 11:return gy(u,h,h.type,h.pendingProps,y);case 7:return Dr(u,h,h.pendingProps,y),h.child;case 8:return Dr(u,h,h.pendingProps.children,y),h.child;case 12:return Dr(u,h,h.pendingProps.children,y),h.child;case 10:return S=h.pendingProps,Il(h,h.type,S.value),Dr(u,h,S.children,y),h.child;case 9:return P=h.type._context,S=h.pendingProps.children,Pc(h),P=Zt(P),S=S(P),h.flags|=1,Dr(u,h,S,y),h.child;case 14:return Xu(u,h,h.type,h.pendingProps,y);case 15:return ig(u,h,h.type,h.pendingProps,y);case 19:return Gs(u,h,y);case 31:return sg(u,h,y);case 22:return Yu(u,h,y,h.pendingProps);case 24:return Pc(h),S=Zt(hr),u===null?(P=Bm(),P===null&&(P=Jt,U=Pv(),P.pooledCache=U,U.refCount++,U!==null&&(P.pooledCacheLanes|=y),P=U),h.memoizedState={parent:S,cache:P},jd(h),Il(h,hr,P)):((u.lanes&y)!==0&&(zv(u,h),vh(h,null,null,y),Wd()),P=u.memoizedState,U=h.memoizedState,P.parent!==S?(P={parent:S,cache:S},h.memoizedState=P,h.lanes===0&&(h.memoizedState=h.updateQueue.baseState=P),Il(h,hr,S)):(S=U.cache,Il(h,hr,S),S!==P.cache&&zm(h,[hr],y,!0))),Dr(u,h,h.pendingProps.children,y),h.child;case 29:throw h.pendingProps}throw Error(i(156,h.tag))}function nl(u){u.flags|=4}function Jd(u,h,y,S,P){if((h=(u.mode&32)!==0)&&(h=!1),h){if(u.flags|=16777216,(P&335544128)===P)if(u.stateNode.complete)u.flags|=8192;else if(Fi())u.flags|=8192;else throw el=Vm,Gd}else u.flags&=-16777217}function by(u,h){if(h.type!=="stylesheet"||(h.state.loading&4)!==0)u.flags&=-16777217;else if(u.flags|=16777216,!tI(h))if(Fi())u.flags|=8192;else throw el=Vm,Gd}function Bl(u,h){h!==null&&(u.flags|=4),u.flags&16384&&(h=u.tag!==22?Tt():536870912,u.lanes|=h,Ei|=h)}function il(u,h){if(!Dn)switch(u.tailMode){case"hidden":h=u.tail;for(var y=null;h!==null;)h.alternate!==null&&(y=h),h=h.sibling;y===null?u.tail=null:y.sibling=null;break;case"collapsed":y=u.tail;for(var S=null;y!==null;)y.alternate!==null&&(S=y),y=y.sibling;S===null?h||u.tail===null?u.tail=null:u.tail.sibling=null:S.sibling=null}}function ui(u){var h=u.alternate!==null&&u.alternate.child===u.child,y=0,S=0;if(h)for(var P=u.child;P!==null;)y|=P.lanes|P.childLanes,S|=P.subtreeFlags&65011712,S|=P.flags&65011712,P.return=u,P=P.sibling;else for(P=u.child;P!==null;)y|=P.lanes|P.childLanes,S|=P.subtreeFlags,S|=P.flags,P.return=u,P=P.sibling;return u.subtreeFlags|=S,u.childLanes=y,h}function ep(u,h,y){var S=h.pendingProps;switch(Im(h),h.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ui(h),null;case 1:return ui(h),null;case 3:return y=h.stateNode,S=null,u!==null&&(S=u.memoizedState.cache),h.memoizedState.cache!==S&&(h.flags|=2048),Qa(hr),Te(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(u===null||u.child===null)&&(dh(h)?nl(h):u===null||u.memoizedState.isDehydrated&&(h.flags&256)===0||(h.flags|=1024,Um())),ui(h),null;case 26:var P=h.type,U=h.memoizedState;return u===null?(nl(h),U!==null?(ui(h),by(h,U)):(ui(h),Jd(h,P,null,S,y))):U?U!==u.memoizedState?(nl(h),ui(h),by(h,U)):(ui(h),h.flags&=-16777217):(u=u.memoizedProps,u!==S&&nl(h),ui(h),Jd(h,P,u,S,y)),null;case 27:if(Ce(h),y=ue.current,P=h.type,u!==null&&h.stateNode!=null)u.memoizedProps!==S&&nl(h);else{if(!S){if(h.stateNode===null)throw Error(i(166));return ui(h),null}u=le.current,dh(h)?Ux(h):(u=qP(P,S,y),h.stateNode=u,nl(h))}return ui(h),null;case 5:if(Ce(h),P=h.type,u!==null&&h.stateNode!=null)u.memoizedProps!==S&&nl(h);else{if(!S){if(h.stateNode===null)throw Error(i(166));return ui(h),null}if(U=le.current,dh(h))Ux(h);else{var Q=L1(ue.current);switch(U){case 1:U=Q.createElementNS("http://www.w3.org/2000/svg",P);break;case 2:U=Q.createElementNS("http://www.w3.org/1998/Math/MathML",P);break;default:switch(P){case"svg":U=Q.createElementNS("http://www.w3.org/2000/svg",P);break;case"math":U=Q.createElementNS("http://www.w3.org/1998/Math/MathML",P);break;case"script":U=Q.createElement("div"),U.innerHTML="<script><\/script>",U=U.removeChild(U.firstChild);break;case"select":U=typeof S.is=="string"?Q.createElement("select",{is:S.is}):Q.createElement("select"),S.multiple?U.multiple=!0:S.size&&(U.size=S.size);break;default:U=typeof S.is=="string"?Q.createElement(P,{is:S.is}):Q.createElement(P)}}U[Zn]=h,U[Hi]=S;e:for(Q=h.child;Q!==null;){if(Q.tag===5||Q.tag===6)U.appendChild(Q.stateNode);else if(Q.tag!==4&&Q.tag!==27&&Q.child!==null){Q.child.return=Q,Q=Q.child;continue}if(Q===h)break e;for(;Q.sibling===null;){if(Q.return===null||Q.return===h)break e;Q=Q.return}Q.sibling.return=Q.return,Q=Q.sibling}h.stateNode=U;e:switch(Ms(U,P,S),P){case"button":case"input":case"select":case"textarea":S=!!S.autoFocus;break e;case"img":S=!0;break e;default:S=!1}S&&nl(h)}}return ui(h),Jd(h,h.type,u===null?null:u.memoizedProps,h.pendingProps,y),null;case 6:if(u&&h.stateNode!=null)u.memoizedProps!==S&&nl(h);else{if(typeof S!="string"&&h.stateNode===null)throw Error(i(166));if(u=ue.current,dh(h)){if(u=h.stateNode,y=h.memoizedProps,S=null,P=Wi,P!==null)switch(P.tag){case 27:case 5:S=P.memoizedProps}u[Zn]=h,u=!!(u.nodeValue===y||S!==null&&S.suppressHydrationWarning===!0||UP(u.nodeValue,y)),u||Ya(h,!0)}else u=L1(u).createTextNode(S),u[Zn]=h,h.stateNode=u}return ui(h),null;case 31:if(y=h.memoizedState,u===null||u.memoizedState!==null){if(S=dh(h),y!==null){if(u===null){if(!S)throw Error(i(318));if(u=h.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(i(557));u[Zn]=h}else Oc(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;ui(h),u=!1}else y=Um(),u!==null&&u.memoizedState!==null&&(u.memoizedState.hydrationErrors=y),u=!0;if(!u)return h.flags&256?(Ki(h),h):(Ki(h),null);if((h.flags&128)!==0)throw Error(i(558))}return ui(h),null;case 13:if(S=h.memoizedState,u===null||u.memoizedState!==null&&u.memoizedState.dehydrated!==null){if(P=dh(h),S!==null&&S.dehydrated!==null){if(u===null){if(!P)throw Error(i(318));if(P=h.memoizedState,P=P!==null?P.dehydrated:null,!P)throw Error(i(317));P[Zn]=h}else Oc(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;ui(h),P=!1}else P=Um(),u!==null&&u.memoizedState!==null&&(u.memoizedState.hydrationErrors=P),P=!0;if(!P)return h.flags&256?(Ki(h),h):(Ki(h),null)}return Ki(h),(h.flags&128)!==0?(h.lanes=y,h):(y=S!==null,u=u!==null&&u.memoizedState!==null,y&&(S=h.child,P=null,S.alternate!==null&&S.alternate.memoizedState!==null&&S.alternate.memoizedState.cachePool!==null&&(P=S.alternate.memoizedState.cachePool.pool),U=null,S.memoizedState!==null&&S.memoizedState.cachePool!==null&&(U=S.memoizedState.cachePool.pool),U!==P&&(S.flags|=2048)),y!==u&&y&&(h.child.flags|=8192),Bl(h,h.updateQueue),ui(h),null);case 4:return Te(),u===null&&KT(h.stateNode.containerInfo),ui(h),null;case 10:return Qa(h.type),ui(h),null;case 19:if(X(On),S=h.memoizedState,S===null)return ui(h),null;if(P=(h.flags&128)!==0,U=S.rendering,U===null)if(P)il(S,!1);else{if(ki!==0||u!==null&&(u.flags&128)!==0)for(u=h.child;u!==null;){if(U=go(u),U!==null){for(h.flags|=128,il(S,!1),u=U.updateQueue,h.updateQueue=u,Bl(h,u),h.subtreeFlags=0,u=y,y=h.child;y!==null;)lh(y,u),y=y.sibling;return ee(On,On.current&1|2),Dn&&qa(h,S.treeForkCount),h.child}u=u.sibling}S.tail!==null&&Z()>er&&(h.flags|=128,P=!0,il(S,!1),h.lanes=4194304)}else{if(!P)if(u=go(U),u!==null){if(h.flags|=128,P=!0,u=u.updateQueue,h.updateQueue=u,Bl(h,u),il(S,!0),S.tail===null&&S.tailMode==="hidden"&&!U.alternate&&!Dn)return ui(h),null}else 2*Z()-S.renderingStartTime>er&&y!==536870912&&(h.flags|=128,P=!0,il(S,!1),h.lanes=4194304);S.isBackwards?(U.sibling=h.child,h.child=U):(u=S.last,u!==null?u.sibling=U:h.child=U,S.last=U)}return S.tail!==null?(u=S.tail,S.rendering=u,S.tail=u.sibling,S.renderingStartTime=Z(),u.sibling=null,y=On.current,ee(On,P?y&1|2:y&1),Dn&&qa(h,S.treeForkCount),u):(ui(h),null);case 22:case 23:return Ki(h),$d(),S=h.memoizedState!==null,u!==null?u.memoizedState!==null!==S&&(h.flags|=8192):S&&(h.flags|=8192),S?(y&536870912)!==0&&(h.flags&128)===0&&(ui(h),h.subtreeFlags&6&&(h.flags|=8192)):ui(h),y=h.updateQueue,y!==null&&Bl(h,y.retryQueue),y=null,u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),S=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(S=h.memoizedState.cachePool.pool),S!==y&&(h.flags|=2048),u!==null&&X(Ic),null;case 24:return y=null,u!==null&&(y=u.memoizedState.cache),h.memoizedState.cache!==y&&(h.flags|=2048),Qa(hr),ui(h),null;case 25:return null;case 30:return null}throw Error(i(156,h.tag))}function Zo(u,h){switch(Im(h),h.tag){case 1:return u=h.flags,u&65536?(h.flags=u&-65537|128,h):null;case 3:return Qa(hr),Te(),u=h.flags,(u&65536)!==0&&(u&128)===0?(h.flags=u&-65537|128,h):null;case 26:case 27:case 5:return Ce(h),null;case 31:if(h.memoizedState!==null){if(Ki(h),h.alternate===null)throw Error(i(340));Oc()}return u=h.flags,u&65536?(h.flags=u&-65537|128,h):null;case 13:if(Ki(h),u=h.memoizedState,u!==null&&u.dehydrated!==null){if(h.alternate===null)throw Error(i(340));Oc()}return u=h.flags,u&65536?(h.flags=u&-65537|128,h):null;case 19:return X(On),null;case 4:return Te(),null;case 10:return Qa(h.type),null;case 22:case 23:return Ki(h),$d(),u!==null&&X(Ic),u=h.flags,u&65536?(h.flags=u&-65537|128,h):null;case 24:return Qa(hr),null;case 25:return null;default:return null}}function vo(u,h){switch(Im(h),h.tag){case 3:Qa(hr),Te();break;case 26:case 27:case 5:Ce(h);break;case 4:Te();break;case 31:h.memoizedState!==null&&Ki(h);break;case 13:Ki(h);break;case 19:X(On);break;case 10:Qa(h.type);break;case 22:case 23:Ki(h),$d(),u!==null&&X(Ic);break;case 24:Qa(hr)}}function Ko(u,h){try{var y=h.updateQueue,S=y!==null?y.lastEffect:null;if(S!==null){var P=S.next;y=P;do{if((y.tag&u)===u){S=void 0;var U=y.create,Q=y.inst;S=U(),Q.destroy=S}y=y.next}while(y!==P)}}catch(fe){jn(h,h.return,fe)}}function $r(u,h,y){try{var S=h.updateQueue,P=S!==null?S.lastEffect:null;if(P!==null){var U=P.next;S=U;do{if((S.tag&u)===u){var Q=S.inst,fe=Q.destroy;if(fe!==void 0){Q.destroy=void 0,P=h;var Oe=y,We=fe;try{We()}catch(ot){jn(P,Oe,ot)}}}S=S.next}while(S!==U)}}catch(ot){jn(h,h.return,ot)}}function wa(u){var h=u.updateQueue;if(h!==null){var y=u.stateNode;try{Vx(h,y)}catch(S){jn(u,u.return,S)}}}function Or(u,h,y){y.props=Fc(u.type,u.memoizedProps),y.state=u.memoizedState;try{y.componentWillUnmount()}catch(S){jn(u,h,S)}}function Vl(u,h){try{var y=u.ref;if(y!==null){switch(u.tag){case 26:case 27:case 5:var S=u.stateNode;break;case 30:S=u.stateNode;break;default:S=u.stateNode}typeof y=="function"?u.refCleanup=y(S):y.current=S}}catch(P){jn(u,h,P)}}function qr(u,h){var y=u.ref,S=u.refCleanup;if(y!==null)if(typeof S=="function")try{S()}catch(P){jn(u,h,P)}finally{u.refCleanup=null,u=u.alternate,u!=null&&(u.refCleanup=null)}else if(typeof y=="function")try{y(null)}catch(P){jn(u,h,P)}else y.current=null}function tp(u){var h=u.type,y=u.memoizedProps,S=u.stateNode;try{e:switch(h){case"button":case"input":case"select":case"textarea":y.autoFocus&&S.focus();break e;case"img":y.src?S.src=y.src:y.srcSet&&(S.srcset=y.srcSet)}}catch(P){jn(u,u.return,P)}}function Sr(u,h,y){try{var S=u.stateNode;H9(S,u.type,y,h),S[Hi]=h}catch(P){jn(u,u.return,P)}}function Di(u){return u.tag===5||u.tag===3||u.tag===26||u.tag===27&&Ph(u.type)||u.tag===4}function Cn(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||Di(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.tag===27&&Ph(u.type)||u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function rl(u,h,y){var S=u.tag;if(S===5||S===6)u=u.stateNode,h?(y.nodeType===9?y.body:y.nodeName==="HTML"?y.ownerDocument.body:y).insertBefore(u,h):(h=y.nodeType===9?y.body:y.nodeName==="HTML"?y.ownerDocument.body:y,h.appendChild(u),y=y._reactRootContainer,y!=null||h.onclick!==null||(h.onclick=ss));else if(S!==4&&(S===27&&Ph(u.type)&&(y=u.stateNode,h=null),u=u.child,u!==null))for(rl(u,h,y),u=u.sibling;u!==null;)rl(u,h,y),u=u.sibling}function xs(u,h,y){var S=u.tag;if(S===5||S===6)u=u.stateNode,h?y.insertBefore(u,h):y.appendChild(u);else if(S!==4&&(S===27&&Ph(u.type)&&(y=u.stateNode),u=u.child,u!==null))for(xs(u,h,y),u=u.sibling;u!==null;)xs(u,h,y),u=u.sibling}function fg(u){var h=u.stateNode,y=u.memoizedProps;try{for(var S=u.type,P=h.attributes;P.length;)h.removeAttributeNode(P[0]);Ms(h,S,y),h[Zn]=u,h[Hi]=y}catch(U){jn(u,u.return,U)}}var Qo=!1,bi=!1,Sa=!1,R1=typeof WeakSet=="function"?WeakSet:Set,Lr=null;function XT(u,h){if(u=u.containerInfo,eA=F1,u=Ox(u),Cv(u)){if("selectionStart"in u)var y={start:u.selectionStart,end:u.selectionEnd};else e:{y=(y=u.ownerDocument)&&y.defaultView||window;var S=y.getSelection&&y.getSelection();if(S&&S.rangeCount!==0){y=S.anchorNode;var P=S.anchorOffset,U=S.focusNode;S=S.focusOffset;try{y.nodeType,U.nodeType}catch{y=null;break e}var Q=0,fe=-1,Oe=-1,We=0,ot=0,ft=u,Ze=null;t:for(;;){for(var rt;ft!==y||P!==0&&ft.nodeType!==3||(fe=Q+P),ft!==U||S!==0&&ft.nodeType!==3||(Oe=Q+S),ft.nodeType===3&&(Q+=ft.nodeValue.length),(rt=ft.firstChild)!==null;)Ze=ft,ft=rt;for(;;){if(ft===u)break t;if(Ze===y&&++We===P&&(fe=Q),Ze===U&&++ot===S&&(Oe=Q),(rt=ft.nextSibling)!==null)break;ft=Ze,Ze=ft.parentNode}ft=rt}y=fe===-1||Oe===-1?null:{start:fe,end:Oe}}else y=null}y=y||{start:0,end:0}}else y=null;for(tA={focusedElem:u,selectionRange:y},F1=!1,Lr=h;Lr!==null;)if(h=Lr,u=h.child,(h.subtreeFlags&1028)!==0&&u!==null)u.return=h,Lr=u;else for(;Lr!==null;){switch(h=Lr,U=h.alternate,u=h.flags,h.tag){case 0:if((u&4)!==0&&(u=h.updateQueue,u=u!==null?u.events:null,u!==null))for(y=0;y<u.length;y++)P=u[y],P.ref.impl=P.nextImpl;break;case 11:case 15:break;case 1:if((u&1024)!==0&&U!==null){u=void 0,y=h,P=U.memoizedProps,U=U.memoizedState,S=y.stateNode;try{var zt=Fc(y.type,P);u=S.getSnapshotBeforeUpdate(zt,U),S.__reactInternalSnapshotBeforeUpdate=u}catch(Xt){jn(y,y.return,Xt)}}break;case 3:if((u&1024)!==0){if(u=h.stateNode.containerInfo,y=u.nodeType,y===9)rA(u);else if(y===1)switch(u.nodeName){case"HEAD":case"HTML":case"BODY":rA(u);break;default:u.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((u&1024)!==0)throw Error(i(163))}if(u=h.sibling,u!==null){u.return=h.return,Lr=u;break}Lr=h.return}}function Oi(u,h,y){var S=y.flags;switch(y.tag){case 0:case 11:case 15:ta(u,y),S&4&&Ko(5,y);break;case 1:if(ta(u,y),S&4)if(u=y.stateNode,h===null)try{u.componentDidMount()}catch(Q){jn(y,y.return,Q)}else{var P=Fc(y.type,h.memoizedProps);h=h.memoizedState;try{u.componentDidUpdate(P,h,u.__reactInternalSnapshotBeforeUpdate)}catch(Q){jn(y,y.return,Q)}}S&64&&wa(y),S&512&&Vl(y,y.return);break;case 3:if(ta(u,y),S&64&&(u=y.updateQueue,u!==null)){if(h=null,y.child!==null)switch(y.child.tag){case 27:case 5:h=y.child.stateNode;break;case 1:h=y.child.stateNode}try{Vx(u,h)}catch(Q){jn(y,y.return,Q)}}break;case 27:h===null&&S&4&&fg(y);case 26:case 5:ta(u,y),h===null&&S&4&&tp(y),S&512&&Vl(y,y.return);break;case 12:ta(u,y);break;case 31:ta(u,y),S&4&&Bc(u,y);break;case 13:ta(u,y),S&4&&Eh(u,y),S&64&&(u=y.memoizedState,u!==null&&(u=u.dehydrated,u!==null&&(y=M.bind(null,y),K9(u,y))));break;case 22:if(S=y.memoizedState!==null||Qo,!S){h=h!==null&&h.memoizedState!==null||bi,P=Qo;var U=bi;Qo=S,(bi=h)&&!U?ws(u,y,(y.subtreeFlags&8772)!==0):ta(u,y),Qo=P,bi=U}break;case 30:break;default:ta(u,y)}}function np(u){var h=u.alternate;h!==null&&(u.alternate=null,np(h)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(h=u.stateNode,h!==null&&pe(h)),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}var si=null,us=!1;function Jo(u,h,y){for(y=y.child;y!==null;)hg(u,h,y),y=y.sibling}function hg(u,h,y){if(Le&&typeof Le.onCommitFiberUnmount=="function")try{Le.onCommitFiberUnmount(Me,y)}catch{}switch(y.tag){case 26:bi||qr(y,h),Jo(u,h,y),y.memoizedState?y.memoizedState.count--:y.stateNode&&(y=y.stateNode,y.parentNode.removeChild(y));break;case 27:bi||qr(y,h);var S=si,P=us;Ph(y.type)&&(si=y.stateNode,us=!1),Jo(u,h,y),Ty(y.stateNode),si=S,us=P;break;case 5:bi||qr(y,h);case 6:if(S=si,P=us,si=null,Jo(u,h,y),si=S,us=P,si!==null)if(us)try{(si.nodeType===9?si.body:si.nodeName==="HTML"?si.ownerDocument.body:si).removeChild(y.stateNode)}catch(U){jn(y,h,U)}else try{si.removeChild(y.stateNode)}catch(U){jn(y,h,U)}break;case 18:si!==null&&(us?(u=si,GP(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,y.stateNode),_g(u)):GP(si,y.stateNode));break;case 4:S=si,P=us,si=y.stateNode.containerInfo,us=!0,Jo(u,h,y),si=S,us=P;break;case 0:case 11:case 14:case 15:$r(2,y,h),bi||$r(4,y,h),Jo(u,h,y);break;case 1:bi||(qr(y,h),S=y.stateNode,typeof S.componentWillUnmount=="function"&&Or(y,h,S)),Jo(u,h,y);break;case 21:Jo(u,h,y);break;case 22:bi=(S=bi)||y.memoizedState!==null,Jo(u,h,y),bi=S;break;default:Jo(u,h,y)}}function Bc(u,h){if(h.memoizedState===null&&(u=h.alternate,u!==null&&(u=u.memoizedState,u!==null))){u=u.dehydrated;try{_g(u)}catch(y){jn(h,h.return,y)}}}function Eh(u,h){if(h.memoizedState===null&&(u=h.alternate,u!==null&&(u=u.memoizedState,u!==null&&(u=u.dehydrated,u!==null))))try{_g(u)}catch(y){jn(h,h.return,y)}}function _y(u){switch(u.tag){case 31:case 13:case 19:var h=u.stateNode;return h===null&&(h=u.stateNode=new R1),h;case 22:return u=u.stateNode,h=u._retryCache,h===null&&(h=u._retryCache=new R1),h;default:throw Error(i(435,u.tag))}}function Gl(u,h){var y=_y(u);h.forEach(function(S){if(!y.has(S)){y.add(S);var P=D.bind(null,u,S);S.then(P,P)}})}function Er(u,h){var y=h.deletions;if(y!==null)for(var S=0;S<y.length;S++){var P=y[S],U=u,Q=h,fe=Q;e:for(;fe!==null;){switch(fe.tag){case 27:if(Ph(fe.type)){si=fe.stateNode,us=!1;break e}break;case 5:si=fe.stateNode,us=!1;break e;case 3:case 4:si=fe.stateNode.containerInfo,us=!0;break e}fe=fe.return}if(si===null)throw Error(i(160));hg(U,Q,P),si=null,us=!1,U=P.alternate,U!==null&&(U.return=null),P.return=null}if(h.subtreeFlags&13886)for(h=h.child;h!==null;)Vc(h,u),h=h.sibling}var ea=null;function Vc(u,h){var y=u.alternate,S=u.flags;switch(u.tag){case 0:case 11:case 14:case 15:Er(h,u),Mr(u),S&4&&($r(3,u,u.return),Ko(3,u),$r(5,u,u.return));break;case 1:Er(h,u),Mr(u),S&512&&(bi||y===null||qr(y,y.return)),S&64&&Qo&&(u=u.updateQueue,u!==null&&(S=u.callbacks,S!==null&&(y=u.shared.hiddenCallbacks,u.shared.hiddenCallbacks=y===null?S:y.concat(S))));break;case 26:var P=ea;if(Er(h,u),Mr(u),S&512&&(bi||y===null||qr(y,y.return)),S&4){var U=y!==null?y.memoizedState:null;if(S=u.memoizedState,y===null)if(S===null)if(u.stateNode===null){e:{S=u.type,y=u.memoizedProps,P=P.ownerDocument||P;t:switch(S){case"title":U=P.getElementsByTagName("title")[0],(!U||U[ao]||U[Zn]||U.namespaceURI==="http://www.w3.org/2000/svg"||U.hasAttribute("itemprop"))&&(U=P.createElement(S),P.head.insertBefore(U,P.querySelector("head > title"))),Ms(U,S,y),U[Zn]=u,lt(U),S=U;break e;case"link":var Q=JP("link","href",P).get(S+(y.href||""));if(Q){for(var fe=0;fe<Q.length;fe++)if(U=Q[fe],U.getAttribute("href")===(y.href==null||y.href===""?null:y.href)&&U.getAttribute("rel")===(y.rel==null?null:y.rel)&&U.getAttribute("title")===(y.title==null?null:y.title)&&U.getAttribute("crossorigin")===(y.crossOrigin==null?null:y.crossOrigin)){Q.splice(fe,1);break t}}U=P.createElement(S),Ms(U,S,y),P.head.appendChild(U);break;case"meta":if(Q=JP("meta","content",P).get(S+(y.content||""))){for(fe=0;fe<Q.length;fe++)if(U=Q[fe],U.getAttribute("content")===(y.content==null?null:""+y.content)&&U.getAttribute("name")===(y.name==null?null:y.name)&&U.getAttribute("property")===(y.property==null?null:y.property)&&U.getAttribute("http-equiv")===(y.httpEquiv==null?null:y.httpEquiv)&&U.getAttribute("charset")===(y.charSet==null?null:y.charSet)){Q.splice(fe,1);break t}}U=P.createElement(S),Ms(U,S,y),P.head.appendChild(U);break;default:throw Error(i(468,S))}U[Zn]=u,lt(U),S=U}u.stateNode=S}else eI(P,u.type,u.stateNode);else u.stateNode=QP(P,S,u.memoizedProps);else U!==S?(U===null?y.stateNode!==null&&(y=y.stateNode,y.parentNode.removeChild(y)):U.count--,S===null?eI(P,u.type,u.stateNode):QP(P,S,u.memoizedProps)):S===null&&u.stateNode!==null&&Sr(u,u.memoizedProps,y.memoizedProps)}break;case 27:Er(h,u),Mr(u),S&512&&(bi||y===null||qr(y,y.return)),y!==null&&S&4&&Sr(u,u.memoizedProps,y.memoizedProps);break;case 5:if(Er(h,u),Mr(u),S&512&&(bi||y===null||qr(y,y.return)),u.flags&32){P=u.stateNode;try{va(P,"")}catch(zt){jn(u,u.return,zt)}}S&4&&u.stateNode!=null&&(P=u.memoizedProps,Sr(u,P,y!==null?y.memoizedProps:P)),S&1024&&(Sa=!0);break;case 6:if(Er(h,u),Mr(u),S&4){if(u.stateNode===null)throw Error(i(162));S=u.memoizedProps,y=u.stateNode;try{y.nodeValue=S}catch(zt){jn(u,u.return,zt)}}break;case 3:if(N1=null,P=ea,ea=P1(h.containerInfo),Er(h,u),ea=P,Mr(u),S&4&&y!==null&&y.memoizedState.isDehydrated)try{_g(h.containerInfo)}catch(zt){jn(u,u.return,zt)}Sa&&(Sa=!1,dg(u));break;case 4:S=ea,ea=P1(u.stateNode.containerInfo),Er(h,u),Mr(u),ea=S;break;case 12:Er(h,u),Mr(u);break;case 31:Er(h,u),Mr(u),S&4&&(S=u.updateQueue,S!==null&&(u.updateQueue=null,Gl(u,S)));break;case 13:Er(h,u),Mr(u),u.child.flags&8192&&u.memoizedState!==null!=(y!==null&&y.memoizedState!==null)&&(Mh=Z()),S&4&&(S=u.updateQueue,S!==null&&(u.updateQueue=null,Gl(u,S)));break;case 22:P=u.memoizedState!==null;var Oe=y!==null&&y.memoizedState!==null,We=Qo,ot=bi;if(Qo=We||P,bi=ot||Oe,Er(h,u),bi=ot,Qo=We,Mr(u),S&8192)e:for(h=u.stateNode,h._visibility=P?h._visibility&-2:h._visibility|1,P&&(y===null||Oe||Qo||bi||sl(u)),y=null,h=u;;){if(h.tag===5||h.tag===26){if(y===null){Oe=y=h;try{if(U=Oe.stateNode,P)Q=U.style,typeof Q.setProperty=="function"?Q.setProperty("display","none","important"):Q.display="none";else{fe=Oe.stateNode;var ft=Oe.memoizedProps.style,Ze=ft!=null&&ft.hasOwnProperty("display")?ft.display:null;fe.style.display=Ze==null||typeof Ze=="boolean"?"":(""+Ze).trim()}}catch(zt){jn(Oe,Oe.return,zt)}}}else if(h.tag===6){if(y===null){Oe=h;try{Oe.stateNode.nodeValue=P?"":Oe.memoizedProps}catch(zt){jn(Oe,Oe.return,zt)}}}else if(h.tag===18){if(y===null){Oe=h;try{var rt=Oe.stateNode;P?HP(rt,!0):HP(Oe.stateNode,!1)}catch(zt){jn(Oe,Oe.return,zt)}}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===u)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===u)break e;for(;h.sibling===null;){if(h.return===null||h.return===u)break e;y===h&&(y=null),h=h.return}y===h&&(y=null),h.sibling.return=h.return,h=h.sibling}S&4&&(S=u.updateQueue,S!==null&&(y=S.retryQueue,y!==null&&(S.retryQueue=null,Gl(u,y))));break;case 19:Er(h,u),Mr(u),S&4&&(S=u.updateQueue,S!==null&&(u.updateQueue=null,Gl(u,S)));break;case 30:break;case 21:break;default:Er(h,u),Mr(u)}}function Mr(u){var h=u.flags;if(h&2){try{for(var y,S=u.return;S!==null;){if(Di(S)){y=S;break}S=S.return}if(y==null)throw Error(i(160));switch(y.tag){case 27:var P=y.stateNode,U=Cn(u);xs(u,U,P);break;case 5:var Q=y.stateNode;y.flags&32&&(va(Q,""),y.flags&=-33);var fe=Cn(u);xs(u,fe,Q);break;case 3:case 4:var Oe=y.stateNode.containerInfo,We=Cn(u);rl(u,We,Oe);break;default:throw Error(i(161))}}catch(ot){jn(u,u.return,ot)}u.flags&=-3}h&4096&&(u.flags&=-4097)}function dg(u){if(u.subtreeFlags&1024)for(u=u.child;u!==null;){var h=u;dg(h),h.tag===5&&h.flags&1024&&h.stateNode.reset(),u=u.sibling}}function ta(u,h){if(h.subtreeFlags&8772)for(h=h.child;h!==null;)Oi(u,h.alternate,h),h=h.sibling}function sl(u){for(u=u.child;u!==null;){var h=u;switch(h.tag){case 0:case 11:case 14:case 15:$r(4,h,h.return),sl(h);break;case 1:qr(h,h.return);var y=h.stateNode;typeof y.componentWillUnmount=="function"&&Or(h,h.return,y),sl(h);break;case 27:Ty(h.stateNode);case 26:case 5:qr(h,h.return),sl(h);break;case 22:h.memoizedState===null&&sl(h);break;case 30:sl(h);break;default:sl(h)}u=u.sibling}}function ws(u,h,y){for(y=y&&(h.subtreeFlags&8772)!==0,h=h.child;h!==null;){var S=h.alternate,P=u,U=h,Q=U.flags;switch(U.tag){case 0:case 11:case 15:ws(P,U,y),Ko(4,U);break;case 1:if(ws(P,U,y),S=U,P=S.stateNode,typeof P.componentDidMount=="function")try{P.componentDidMount()}catch(We){jn(S,S.return,We)}if(S=U,P=S.updateQueue,P!==null){var fe=S.stateNode;try{var Oe=P.shared.hiddenCallbacks;if(Oe!==null)for(P.shared.hiddenCallbacks=null,P=0;P<Oe.length;P++)yh(Oe[P],fe)}catch(We){jn(S,S.return,We)}}y&&Q&64&&wa(U),Vl(U,U.return);break;case 27:fg(U);case 26:case 5:ws(P,U,y),y&&S===null&&Q&4&&tp(U),Vl(U,U.return);break;case 12:ws(P,U,y);break;case 31:ws(P,U,y),y&&Q&4&&Bc(P,U);break;case 13:ws(P,U,y),y&&Q&4&&Eh(P,U);break;case 22:U.memoizedState===null&&ws(P,U,y),Vl(U,U.return);break;case 30:break;default:ws(P,U,y)}h=h.sibling}}function Gc(u,h){var y=null;u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),u=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(u=h.memoizedState.cachePool.pool),u!==y&&(u!=null&&u.refCount++,y!=null&&zu(y))}function Qu(u,h){u=null,h.alternate!==null&&(u=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==u&&(h.refCount++,u!=null&&zu(u))}function Xr(u,h,y,S){if(h.subtreeFlags&10256)for(h=h.child;h!==null;)xy(u,h,y,S),h=h.sibling}function xy(u,h,y,S){var P=h.flags;switch(h.tag){case 0:case 11:case 15:Xr(u,h,y,S),P&2048&&Ko(9,h);break;case 1:Xr(u,h,y,S);break;case 3:Xr(u,h,y,S),P&2048&&(u=null,h.alternate!==null&&(u=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==u&&(h.refCount++,u!=null&&zu(u)));break;case 12:if(P&2048){Xr(u,h,y,S),u=h.stateNode;try{var U=h.memoizedProps,Q=U.id,fe=U.onPostCommit;typeof fe=="function"&&fe(Q,h.alternate===null?"mount":"update",u.passiveEffectDuration,-0)}catch(Oe){jn(h,h.return,Oe)}}else Xr(u,h,y,S);break;case 31:Xr(u,h,y,S);break;case 13:Xr(u,h,y,S);break;case 23:break;case 22:U=h.stateNode,Q=h.alternate,h.memoizedState!==null?U._visibility&2?Xr(u,h,y,S):ol(u,h):U._visibility&2?Xr(u,h,y,S):(U._visibility|=2,Yr(u,h,y,S,(h.subtreeFlags&10256)!==0||!1)),P&2048&&Gc(Q,h);break;case 24:Xr(u,h,y,S),P&2048&&Qu(h.alternate,h);break;default:Xr(u,h,y,S)}}function Yr(u,h,y,S,P){for(P=P&&((h.subtreeFlags&10256)!==0||!1),h=h.child;h!==null;){var U=u,Q=h,fe=y,Oe=S,We=Q.flags;switch(Q.tag){case 0:case 11:case 15:Yr(U,Q,fe,Oe,P),Ko(8,Q);break;case 23:break;case 22:var ot=Q.stateNode;Q.memoizedState!==null?ot._visibility&2?Yr(U,Q,fe,Oe,P):ol(U,Q):(ot._visibility|=2,Yr(U,Q,fe,Oe,P)),P&&We&2048&&Gc(Q.alternate,Q);break;case 24:Yr(U,Q,fe,Oe,P),P&&We&2048&&Qu(Q.alternate,Q);break;default:Yr(U,Q,fe,Oe,P)}h=h.sibling}}function ol(u,h){if(h.subtreeFlags&10256)for(h=h.child;h!==null;){var y=u,S=h,P=S.flags;switch(S.tag){case 22:ol(y,S),P&2048&&Gc(S.alternate,S);break;case 24:ol(y,S),P&2048&&Qu(S.alternate,S);break;default:ol(y,S)}h=h.sibling}}var Ju=8192;function yo(u,h,y){if(u.subtreeFlags&Ju)for(u=u.child;u!==null;)pg(u,h,y),u=u.sibling}function pg(u,h,y){switch(u.tag){case 26:yo(u,h,y),u.flags&Ju&&u.memoizedState!==null&&c7(y,ea,u.memoizedState,u.memoizedProps);break;case 5:yo(u,h,y);break;case 3:case 4:var S=ea;ea=P1(u.stateNode.containerInfo),yo(u,h,y),ea=S;break;case 22:u.memoizedState===null&&(S=u.alternate,S!==null&&S.memoizedState!==null?(S=Ju,Ju=16777216,yo(u,h,y),Ju=S):yo(u,h,y));break;default:yo(u,h,y)}}function ef(u){var h=u.alternate;if(h!==null&&(u=h.child,u!==null)){h.child=null;do h=u.sibling,u.sibling=null,u=h;while(u!==null)}}function Hc(u){var h=u.deletions;if((u.flags&16)!==0){if(h!==null)for(var y=0;y<h.length;y++){var S=h[y];Lr=S,$i(S,u)}ef(u)}if(u.subtreeFlags&10256)for(u=u.child;u!==null;)Hs(u),u=u.sibling}function Hs(u){switch(u.tag){case 0:case 11:case 15:Hc(u),u.flags&2048&&$r(9,u,u.return);break;case 3:Hc(u);break;case 12:Hc(u);break;case 22:var h=u.stateNode;u.memoizedState!==null&&h._visibility&2&&(u.return===null||u.return.tag!==13)?(h._visibility&=-3,js(u)):Hc(u);break;default:Hc(u)}}function js(u){var h=u.deletions;if((u.flags&16)!==0){if(h!==null)for(var y=0;y<h.length;y++){var S=h[y];Lr=S,$i(S,u)}ef(u)}for(u=u.child;u!==null;){switch(h=u,h.tag){case 0:case 11:case 15:$r(8,h,h.return),js(h);break;case 22:y=h.stateNode,y._visibility&2&&(y._visibility&=-3,js(h));break;default:js(h)}u=u.sibling}}function $i(u,h){for(;Lr!==null;){var y=Lr;switch(y.tag){case 0:case 11:case 15:$r(8,y,h);break;case 23:case 22:if(y.memoizedState!==null&&y.memoizedState.cachePool!==null){var S=y.memoizedState.cachePool.pool;S!=null&&S.refCount++}break;case 24:zu(y.memoizedState.cache)}if(S=y.child,S!==null)S.return=y,Lr=S;else e:for(y=u;Lr!==null;){S=Lr;var P=S.sibling,U=S.return;if(np(S),S===y){Lr=null;break e}if(P!==null){P.return=U,Lr=P;break e}Lr=U}}}var Hl={getCacheForType:function(u){var h=Zt(hr),y=h.data.get(u);return y===void 0&&(y=u(),h.data.set(u,y)),y},cacheSignal:function(){return Zt(hr).controller.signal}},ln=typeof WeakMap=="function"?WeakMap:Map,Gt=0,Jt=null,vn=null,dn=0,Nn=0,fs=null,na=!1,Ea=!1,wy=!1,bo=0,ki=0,al=0,jc=0,ip=0,Ss=0,Ei=0,tf=null,qi=null,Xi=!1,Mh=0,Sy=0,er=1/0,zi=null,tr=null,oi=0,_o=null,Th=null,ia=0,Ah=0,Ch=null,rp=null,Wc=0,nf=null;function xo(){return(Gt&2)!==0&&dn!==0?dn&-dn:W.T!==null?et():Gr()}function Mn(){if(Ss===0)if((dn&536870912)===0||Dn){var u=at;at<<=1,(at&3932160)===0&&(at=262144),Ss=u}else Ss=536870912;return u=Fs.current,u!==null&&(u.flags|=32),Ss}function yn(u,h,y){(u===Jt&&(Nn===2||Nn===9)||u.cancelPendingCommit!==null)&&(qc(u,0),pr(u,dn,Ss,!1)),$n(u,y),((Gt&2)===0||u!==Jt)&&(u===Jt&&((Gt&2)===0&&(jc|=y),ki===4&&pr(u,dn,Ss,!1)),dt(u))}function Tn(u,h,y){if((Gt&6)!==0)throw Error(i(327));var S=!y&&(h&127)===0&&(h&u.expiredLanes)===0||vt(u,h),P=S?sp(u,h):Es(u,h,!0),U=S;do{if(P===0){Ea&&!S&&pr(u,h,0,!1);break}else{if(y=u.current.alternate,U&&!ai(y)){P=Es(u,h,!1),U=!1;continue}if(P===2){if(U=h,u.errorRecoveryDisabledLanes&U)var Q=0;else Q=u.pendingLanes&-536870913,Q=Q!==0?Q:Q&536870912?536870912:0;if(Q!==0){h=Q;e:{var fe=u;P=tf;var Oe=fe.current.memoizedState.isDehydrated;if(Oe&&(qc(fe,Q).flags|=256),Q=Es(fe,Q,!1),Q!==2){if(wy&&!Oe){fe.errorRecoveryDisabledLanes|=U,jc|=U,P=4;break e}U=qi,qi=P,U!==null&&(qi===null?qi=U:qi.push.apply(qi,U))}P=Q}if(U=!1,P!==2)continue}}if(P===1){qc(u,0),pr(u,h,0,!0);break}e:{switch(S=u,U=P,U){case 0:case 1:throw Error(i(345));case 4:if((h&4194048)!==h)break;case 6:pr(S,h,Ss,!na);break e;case 2:qi=null;break;case 3:case 5:break;default:throw Error(i(329))}if((h&62914560)===h&&(P=Mh+300-Z(),10<P)){if(pr(S,h,Ss,!na),qe(S,0,!0)!==0)break e;ia=h,S.timeoutHandle=BP(Rn.bind(null,S,y,qi,zi,Xi,h,Ss,jc,Ei,na,U,"Throttled",-0,0),P);break e}Rn(S,y,qi,zi,Xi,h,Ss,jc,Ei,na,U,null,-0,0)}}break}while(!0);dt(u)}function Rn(u,h,y,S,P,U,Q,fe,Oe,We,ot,ft,Ze,rt){if(u.timeoutHandle=-1,ft=h.subtreeFlags,ft&8192||(ft&16785408)===16785408){ft={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ss},pg(h,U,ft);var zt=(U&62914560)===U?Mh-Z():(U&4194048)===U?Sy-Z():0;if(zt=u7(ft,zt),zt!==null){ia=U,u.cancelPendingCommit=zt(Wl.bind(null,u,h,U,y,S,P,Q,fe,Oe,ot,ft,null,Ze,rt)),pr(u,U,Q,!We);return}}Wl(u,h,U,y,S,P,Q,fe,Oe)}function ai(u){for(var h=u;;){var y=h.tag;if((y===0||y===11||y===15)&&h.flags&16384&&(y=h.updateQueue,y!==null&&(y=y.stores,y!==null)))for(var S=0;S<y.length;S++){var P=y[S],U=P.getSnapshot;P=P.value;try{if(!vs(U(),P))return!1}catch{return!1}}if(y=h.child,h.subtreeFlags&16384&&y!==null)y.return=h,h=y;else{if(h===u)break;for(;h.sibling===null;){if(h.return===null||h.return===u)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function pr(u,h,y,S){h&=~ip,h&=~jc,u.suspendedLanes|=h,u.pingedLanes&=~h,S&&(u.warmLanes|=h),S=u.expirationTimes;for(var P=h;0<P;){var U=31-nt(P),Q=1<<U;S[U]=-1,P&=~Q}y!==0&&ri(u,y,h)}function Ma(){return(Gt&6)===0?(Dt(0),!1):!0}function $c(){if(vn!==null){if(Nn===0)var u=vn.return;else u=vn,Ka=Lc=null,$v(u),Hu=null,ju=0,u=vn;for(;u!==null;)vo(u.alternate,u),u=u.return;vn=null}}function qc(u,h){var y=u.timeoutHandle;y!==-1&&(u.timeoutHandle=-1,$9(y)),y=u.cancelPendingCommit,y!==null&&(u.cancelPendingCommit=null,y()),ia=0,$c(),Jt=u,vn=y=Us(u.current,null),dn=h,Nn=0,fs=null,na=!1,Ea=vt(u,h),wy=!1,Ei=Ss=ip=jc=al=ki=0,qi=tf=null,Xi=!1,(h&8)!==0&&(h|=h&32);var S=u.entangledLanes;if(S!==0)for(u=u.entanglements,S&=h;0<S;){var P=31-nt(S),U=1<<P;h|=u[P],S&=~U}return bo=h,zd(),y}function ll(u,h){an=null,W.H=wh,h===Fu||h===gn?(h=Vu(),Nn=3):h===Gd?(h=Vu(),Nn=4):Nn=h===ng?8:h!==null&&typeof h=="object"&&typeof h.then=="function"?6:1,fs=h,vn===null&&(ki=1,tg(u,ho(h,u.current)))}function Fi(){var u=Fs.current;return u===null?!0:(dn&4194048)===dn?_s===null:(dn&62914560)===dn||(dn&536870912)!==0?u===_s:!1}function jl(){var u=W.H;return W.H=wh,u===null?wh:u}function Xc(){var u=W.A;return W.A=Hl,u}function Rh(){ki=4,na||(dn&4194048)!==dn&&Fs.current!==null||(Ea=!0),(al&134217727)===0&&(jc&134217727)===0||Jt===null||pr(Jt,dn,Ss,!1)}function Es(u,h,y){var S=Gt;Gt|=2;var P=jl(),U=Xc();(Jt!==u||dn!==h)&&(zi=null,qc(u,h)),h=!1;var Q=ki;e:do try{if(Nn!==0&&vn!==null){var fe=vn,Oe=fs;switch(Nn){case 8:$c(),Q=6;break e;case 3:case 2:case 9:case 6:Fs.current===null&&(h=!0);var We=Nn;if(Nn=0,fs=null,rf(u,fe,Oe,We),y&&Ea){Q=0;break e}break;default:We=Nn,Nn=0,fs=null,rf(u,fe,Oe,We)}}Dh(),Q=ki;break}catch(ot){ll(u,ot)}while(!0);return h&&u.shellSuspendCounter++,Ka=Lc=null,Gt=S,W.H=P,W.A=U,vn===null&&(Jt=null,dn=0,zd()),Q}function Dh(){for(;vn!==null;)mg(vn)}function sp(u,h){var y=Gt;Gt|=2;var S=jl(),P=Xc();Jt!==u||dn!==h?(zi=null,er=Z()+500,qc(u,h)):Ea=vt(u,h);e:do try{if(Nn!==0&&vn!==null){h=vn;var U=fs;t:switch(Nn){case 1:Nn=0,fs=null,rf(u,h,U,1);break;case 2:case 9:if(zs(U)){Nn=0,fs=null,op(h);break}h=function(){Nn!==2&&Nn!==9||Jt!==u||(Nn=7),dt(u)},U.then(h,h);break e;case 3:Nn=7;break e;case 4:Nn=5;break e;case 7:zs(U)?(Nn=0,fs=null,op(h)):(Nn=0,fs=null,rf(u,h,U,7));break;case 5:var Q=null;switch(vn.tag){case 26:Q=vn.memoizedState;case 5:case 27:var fe=vn;if(Q?tI(Q):fe.stateNode.complete){Nn=0,fs=null;var Oe=fe.sibling;if(Oe!==null)vn=Oe;else{var We=fe.return;We!==null?(vn=We,Yc(We)):vn=null}break t}}Nn=0,fs=null,rf(u,h,U,5);break;case 6:Nn=0,fs=null,rf(u,h,U,6);break;case 8:$c(),ki=6;break e;default:throw Error(i(462))}}Ws();break}catch(ot){ll(u,ot)}while(!0);return Ka=Lc=null,W.H=S,W.A=P,Gt=y,vn!==null?0:(Jt=null,dn=0,zd(),ki)}function Ws(){for(;vn!==null&&!tt();)mg(vn)}function mg(u){var h=ug(u.alternate,u,bo);u.memoizedProps=u.pendingProps,h===null?Yc(u):vn=h}function op(u){var h=u,y=h.alternate;switch(h.tag){case 15:case 0:h=Kd(y,h,h.pendingProps,h.type,void 0,dn);break;case 11:h=Kd(y,h,h.pendingProps,h.type.render,h.ref,dn);break;case 5:$v(h);default:vo(y,h),h=vn=lh(h,bo),h=ug(y,h,bo)}u.memoizedProps=u.pendingProps,h===null?Yc(u):vn=h}function rf(u,h,y,S){Ka=Lc=null,$v(h),Hu=null,ju=0;var P=h.return;try{if(wr(u,P,h,y,dn)){ki=1,tg(u,ho(y,u.current)),vn=null;return}}catch(U){if(P!==null)throw vn=P,U;ki=1,tg(u,ho(y,u.current)),vn=null;return}h.flags&32768?(Dn||S===1?u=!0:Ea||(dn&536870912)!==0?u=!1:(na=u=!0,(S===2||S===9||S===3||S===6)&&(S=Fs.current,S!==null&&S.tag===13&&(S.flags|=16384))),ap(h,u)):Yc(h)}function Yc(u){var h=u;do{if((h.flags&32768)!==0){ap(h,na);return}u=h.return;var y=ep(h.alternate,h,bo);if(y!==null){vn=y;return}if(h=h.sibling,h!==null){vn=h;return}vn=h=u}while(h!==null);ki===0&&(ki=5)}function ap(u,h){do{var y=Zo(u.alternate,u);if(y!==null){y.flags&=32767,vn=y;return}if(y=u.return,y!==null&&(y.flags|=32768,y.subtreeFlags=0,y.deletions=null),!h&&(u=u.sibling,u!==null)){vn=u;return}vn=u=y}while(u!==null);ki=6,vn=null}function Wl(u,h,y,S,P,U,Q,fe,Oe){u.cancelPendingCommit=null;do Oh();while(oi!==0);if((Gt&6)!==0)throw Error(i(327));if(h!==null){if(h===u.current)throw Error(i(177));if(U=h.lanes|h.childLanes,U|=Cr,qn(u,y,U,Q,fe,Oe),u===Jt&&(vn=Jt=null,dn=0),Th=h,_o=u,ia=y,Ah=U,Ch=P,rp=S,(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?(u.callbackNode=null,u.callbackPriority=0,z(re,function(){return gg(),null})):(u.callbackNode=null,u.callbackPriority=0),S=(h.flags&13878)!==0,(h.subtreeFlags&13878)!==0||S){S=W.T,W.T=null,P=G.p,G.p=2,Q=Gt,Gt|=4;try{XT(u,h,y)}finally{Gt=Q,G.p=P,W.T=S}}oi=1,mr(),$l(),sf()}}function mr(){if(oi===1){oi=0;var u=_o,h=Th,y=(h.flags&13878)!==0;if((h.subtreeFlags&13878)!==0||y){y=W.T,W.T=null;var S=G.p;G.p=2;var P=Gt;Gt|=4;try{Vc(h,u);var U=tA,Q=Ox(u.containerInfo),fe=U.focusedElem,Oe=U.selectionRange;if(Q!==fe&&fe&&fe.ownerDocument&&vi(fe.ownerDocument.documentElement,fe)){if(Oe!==null&&Cv(fe)){var We=Oe.start,ot=Oe.end;if(ot===void 0&&(ot=We),"selectionStart"in fe)fe.selectionStart=We,fe.selectionEnd=Math.min(ot,fe.value.length);else{var ft=fe.ownerDocument||document,Ze=ft&&ft.defaultView||window;if(Ze.getSelection){var rt=Ze.getSelection(),zt=fe.textContent.length,Xt=Math.min(Oe.start,zt),xi=Oe.end===void 0?Xt:Math.min(Oe.end,zt);!rt.extend&&Xt>xi&&(Q=xi,xi=Xt,Xt=Q);var Ve=sh(fe,Xt),ze=sh(fe,xi);if(Ve&&ze&&(rt.rangeCount!==1||rt.anchorNode!==Ve.node||rt.anchorOffset!==Ve.offset||rt.focusNode!==ze.node||rt.focusOffset!==ze.offset)){var je=ft.createRange();je.setStart(Ve.node,Ve.offset),rt.removeAllRanges(),Xt>xi?(rt.addRange(je),rt.extend(ze.node,ze.offset)):(je.setEnd(ze.node,ze.offset),rt.addRange(je))}}}}for(ft=[],rt=fe;rt=rt.parentNode;)rt.nodeType===1&&ft.push({element:rt,left:rt.scrollLeft,top:rt.scrollTop});for(typeof fe.focus=="function"&&fe.focus(),fe=0;fe<ft.length;fe++){var ct=ft[fe];ct.element.scrollLeft=ct.left,ct.element.scrollTop=ct.top}}F1=!!eA,tA=eA=null}finally{Gt=P,G.p=S,W.T=y}}u.current=h,oi=2}}function $l(){if(oi===2){oi=0;var u=_o,h=Th,y=(h.flags&8772)!==0;if((h.subtreeFlags&8772)!==0||y){y=W.T,W.T=null;var S=G.p;G.p=2;var P=Gt;Gt|=4;try{Oi(u,h.alternate,h)}finally{Gt=P,G.p=S,W.T=y}}oi=3}}function sf(){if(oi===4||oi===3){oi=0,se();var u=_o,h=Th,y=ia,S=rp;(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?oi=5:(oi=0,Th=_o=null,cl(u,u.pendingLanes));var P=u.pendingLanes;if(P===0&&(tr=null),Ar(y),h=h.stateNode,Le&&typeof Le.onCommitFiberRoot=="function")try{Le.onCommitFiberRoot(Me,h,void 0,(h.current.flags&128)===128)}catch{}if(S!==null){h=W.T,P=G.p,G.p=2,W.T=null;try{for(var U=u.onRecoverableError,Q=0;Q<S.length;Q++){var fe=S[Q];U(fe.value,{componentStack:fe.stack})}}finally{W.T=h,G.p=P}}(ia&3)!==0&&Oh(),dt(u),P=u.pendingLanes,(y&261930)!==0&&(P&42)!==0?u===nf?Wc++:(Wc=0,nf=u):Wc=0,Dt(0)}}function cl(u,h){(u.pooledCacheLanes&=h)===0&&(h=u.pooledCache,h!=null&&(u.pooledCache=null,zu(h)))}function Oh(){return mr(),$l(),sf(),gg()}function gg(){if(oi!==5)return!1;var u=_o,h=Ah;Ah=0;var y=Ar(ia),S=W.T,P=G.p;try{G.p=32>y?32:y,W.T=null,y=Ch,Ch=null;var U=_o,Q=ia;if(oi=0,Th=_o=null,ia=0,(Gt&6)!==0)throw Error(i(331));var fe=Gt;if(Gt|=4,Hs(U.current),xy(U,U.current,Q,y),Gt=fe,Dt(0,!1),Le&&typeof Le.onPostCommitFiberRoot=="function")try{Le.onPostCommitFiberRoot(Me,U)}catch{}return!0}finally{G.p=P,W.T=S,cl(u,h)}}function Ey(u,h,y){h=ho(y,h),h=py(u.stateNode,h,2),u=Nc(u,h,2),u!==null&&($n(u,2),dt(u))}function jn(u,h,y){if(u.tag===3)Ey(u,u,y);else for(;h!==null;){if(h.tag===3){Ey(h,u,y);break}else if(h.tag===1){var S=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof S.componentDidCatch=="function"&&(tr===null||!tr.has(S))){u=ho(y,u),y=my(2),S=Nc(h,y,2),S!==null&&(E1(y,S,h,u),$n(S,2),dt(S));break}}h=h.return}}function lp(u,h,y){var S=u.pingCache;if(S===null){S=u.pingCache=new ln;var P=new Set;S.set(h,P)}else P=S.get(h),P===void 0&&(P=new Set,S.set(h,P));P.has(y)||(wy=!0,P.add(y),u=p.bind(null,u,h,y),h.then(u,u))}function p(u,h,y){var S=u.pingCache;S!==null&&S.delete(h),u.pingedLanes|=u.suspendedLanes&y,u.warmLanes&=~y,Jt===u&&(dn&y)===y&&(ki===4||ki===3&&(dn&62914560)===dn&&300>Z()-Mh?(Gt&2)===0&&qc(u,0):ip|=y,Ei===dn&&(Ei=0)),dt(u)}function g(u,h){h===0&&(h=Tt()),u=ys(u,h),u!==null&&($n(u,h),dt(u))}function M(u){var h=u.memoizedState,y=0;h!==null&&(y=h.retryLane),g(u,y)}function D(u,h){var y=0;switch(u.tag){case 31:case 13:var S=u.stateNode,P=u.memoizedState;P!==null&&(y=P.retryLane);break;case 19:S=u.stateNode;break;case 22:S=u.stateNode._retryCache;break;default:throw Error(i(314))}S!==null&&S.delete(h),g(u,y)}function z(u,h){return Fe(u,h)}var H=null,ce=null,Pe=!1,it=!1,ht=!1,bt=0;function dt(u){u!==ce&&u.next===null&&(ce===null?H=ce=u:ce=ce.next=u),it=!0,Pe||(Pe=!0,Ge())}function Dt(u,h){if(!ht&&it){ht=!0;do for(var y=!1,S=H;S!==null;){if(u!==0){var P=S.pendingLanes;if(P===0)var U=0;else{var Q=S.suspendedLanes,fe=S.pingedLanes;U=(1<<31-nt(42|u)+1)-1,U&=P&~(Q&~fe),U=U&201326741?U&201326741|1:U?U|2:0}U!==0&&(y=!0,Xe(S,U))}else U=dn,U=qe(S,S===Jt?U:0,S.cancelPendingCommit!==null||S.timeoutHandle!==-1),(U&3)===0||vt(S,U)||(y=!0,Xe(S,U));S=S.next}while(y);ht=!1}}function nn(){nr()}function nr(){it=Pe=!1;var u=0;bt!==0&&W9()&&(u=bt);for(var h=Z(),y=null,S=H;S!==null;){var P=S.next,U=Lh(S,h);U===0?(S.next=null,y===null?H=P:y.next=P,P===null&&(ce=y)):(y=S,(u!==0||(U&3)!==0)&&(it=!0)),S=P}oi!==0&&oi!==5||Dt(u),bt!==0&&(bt=0)}function Lh(u,h){for(var y=u.suspendedLanes,S=u.pingedLanes,P=u.expirationTimes,U=u.pendingLanes&-62914561;0<U;){var Q=31-nt(U),fe=1<<Q,Oe=P[Q];Oe===-1?((fe&y)===0||(fe&S)!==0)&&(P[Q]=Rt(fe,h)):Oe<=h&&(u.expiredLanes|=fe),U&=~fe}if(h=Jt,y=dn,y=qe(u,u===h?y:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),S=u.callbackNode,y===0||u===h&&(Nn===2||Nn===9)||u.cancelPendingCommit!==null)return S!==null&&S!==null&&Ae(S),u.callbackNode=null,u.callbackPriority=0;if((y&3)===0||vt(u,y)){if(h=y&-y,h===u.callbackPriority)return h;switch(S!==null&&Ae(S),Ar(y)){case 2:case 8:y=J;break;case 32:y=re;break;case 268435456:y=_e;break;default:y=re}return S=Zc.bind(null,u),y=Fe(y,S),u.callbackPriority=h,u.callbackNode=y,h}return S!==null&&S!==null&&Ae(S),u.callbackPriority=2,u.callbackNode=null,2}function Zc(u,h){if(oi!==0&&oi!==5)return u.callbackNode=null,u.callbackPriority=0,null;var y=u.callbackNode;if(Oh()&&u.callbackNode!==y)return null;var S=dn;return S=qe(u,u===Jt?S:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),S===0?null:(Tn(u,S,h),Lh(u,Z()),u.callbackNode!=null&&u.callbackNode===y?Zc.bind(null,u):null)}function Xe(u,h){if(Oh())return null;Tn(u,h,!0)}function Ge(){q9(function(){(Gt&6)!==0?Fe(Y,nn):nr()})}function et(){if(bt===0){var u=Nl;u===0&&(u=$e,$e<<=1,($e&261888)===0&&($e=256)),bt=u}return bt}function mt(u){return u==null||typeof u=="symbol"||typeof u=="boolean"?null:typeof u=="function"?u:zo(""+u)}function Wt(u,h){var y=h.ownerDocument.createElement("input");return y.name=h.name,y.value=h.value,u.id&&y.setAttribute("form",u.id),h.parentNode.insertBefore(y,h),u=new FormData(u),y.parentNode.removeChild(y),u}function Bi(u,h,y,S,P){if(h==="submit"&&y&&y.stateNode===P){var U=mt((P[Hi]||null).action),Q=S.submitter;Q&&(h=(h=Q[Hi]||null)?mt(h.formAction):Q.getAttribute("formAction"),h!==null&&(U=h,Q=null));var fe=new Rl("action","action",null,S,P);u.push({event:fe,listeners:[{instance:null,listener:function(){if(S.defaultPrevented){if(bt!==0){var Oe=Q?Wt(P,Q):new FormData(P);oy(y,{pending:!0,data:Oe,method:P.method,action:U},null,Oe)}}else typeof U=="function"&&(fe.preventDefault(),Oe=Q?Wt(P,Q):new FormData(P),oy(y,{pending:!0,data:Oe,method:P.method,action:U},U,Oe))},currentTarget:P}]})}}for(var qt=0;qt<Ud.length;qt++){var Bn=Ud[qt],Pr=Bn.toLowerCase(),Xn=Bn[0].toUpperCase()+Bn.slice(1);Ho(Pr,"on"+Xn)}Ho(Rm,"onAnimationEnd"),Ho(Nd,"onAnimationIteration"),Ho(Dv,"onAnimationStart"),Ho("dblclick","onDoubleClick"),Ho("focusin","onFocus"),Ho("focusout","onBlur"),Ho(Px,"onTransitionRun"),Ho(BT,"onTransitionStart"),Ho(Ix,"onTransitionCancel"),Ho(Ov,"onTransitionEnd"),Pt("onMouseEnter",["mouseout","mouseover"]),Pt("onMouseLeave",["mouseout","mouseover"]),Pt("onPointerEnter",["pointerout","pointerover"]),Pt("onPointerLeave",["pointerout","pointerover"]),Et("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Et("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Et("onBeforeInput",["compositionend","keypress","textInput","paste"]),Et("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Et("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Et("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ra="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),YT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ra));function LP(u,h){h=(h&4)!==0;for(var y=0;y<u.length;y++){var S=u[y],P=S.event;S=S.listeners;e:{var U=void 0;if(h)for(var Q=S.length-1;0<=Q;Q--){var fe=S[Q],Oe=fe.instance,We=fe.currentTarget;if(fe=fe.listener,Oe!==U&&P.isPropagationStopped())break e;U=fe,P.currentTarget=We;try{U(P)}catch(ot){kd(ot)}P.currentTarget=null,U=Oe}else for(Q=0;Q<S.length;Q++){if(fe=S[Q],Oe=fe.instance,We=fe.currentTarget,fe=fe.listener,Oe!==U&&P.isPropagationStopped())break e;U=fe,P.currentTarget=We;try{U(P)}catch(ot){kd(ot)}P.currentTarget=null,U=Oe}}}}function Un(u,h){var y=h[Is];y===void 0&&(y=h[Is]=new Set);var S=u+"__bubble";y.has(S)||(PP(h,u,2,!1),y.add(S))}function ZT(u,h,y){var S=0;h&&(S|=4),PP(y,u,S,h)}var D1="_reactListening"+Math.random().toString(36).slice(2);function KT(u){if(!u[D1]){u[D1]=!0,xt.forEach(function(y){y!=="selectionchange"&&(YT.has(y)||ZT(y,!1,u),ZT(y,!0,u))});var h=u.nodeType===9?u:u.ownerDocument;h===null||h[D1]||(h[D1]=!0,ZT("selectionchange",!1,h))}}function PP(u,h,y,S){switch(lI(h)){case 2:var P=d7;break;case 8:P=p7;break;default:P=hA}y=P.bind(null,h,y,u),P=void 0,!gs||h!=="touchstart"&&h!=="touchmove"&&h!=="wheel"||(P=!0),S?P!==void 0?u.addEventListener(h,y,{capture:!0,passive:P}):u.addEventListener(h,y,!0):P!==void 0?u.addEventListener(h,y,{passive:P}):u.addEventListener(h,y,!1)}function QT(u,h,y,S,P){var U=S;if((h&1)===0&&(h&2)===0&&S!==null)e:for(;;){if(S===null)return;var Q=S.tag;if(Q===3||Q===4){var fe=S.stateNode.containerInfo;if(fe===P)break;if(Q===4)for(Q=S.return;Q!==null;){var Oe=Q.tag;if((Oe===3||Oe===4)&&Q.stateNode.containerInfo===P)return;Q=Q.return}for(;fe!==null;){if(Q=Be(fe),Q===null)return;if(Oe=Q.tag,Oe===5||Oe===6||Oe===26||Oe===27){S=U=Q;continue e}fe=fe.parentNode}}S=S.return}yc(function(){var We=U,ot=Au(y),ft=[];e:{var Ze=Go.get(u);if(Ze!==void 0){var rt=Rl,zt=u;switch(u){case"keypress":if(_c(y)===0)break e;case"keydown":case"keyup":rt=Pu;break;case"focusin":zt="focus",rt=th;break;case"focusout":zt="blur",rt=th;break;case"beforeblur":case"afterblur":rt=th;break;case"click":if(y.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":rt=Rd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":rt=Lu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":rt=bx;break;case Rm:case Nd:case Dv:rt=fo;break;case Ov:rt=FT;break;case"scroll":case"scrollend":rt=wc;break;case"wheel":rt=xx;break;case"copy":case"cut":case"paste":rt=_a;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":rt=gv;break;case"toggle":case"beforetoggle":rt=Sx}var Xt=(h&4)!==0,xi=!Xt&&(u==="scroll"||u==="scrollend"),Ve=Xt?Ze!==null?Ze+"Capture":null:Ze;Xt=[];for(var ze=We,je;ze!==null;){var ct=ze;if(je=ct.stateNode,ct=ct.tag,ct!==5&&ct!==26&&ct!==27||je===null||Ve===null||(ct=za(ze,Ve),ct!=null&&Xt.push(My(ze,ct,je))),xi)break;ze=ze.return}0<Xt.length&&(Ze=new rt(Ze,zt,null,y,ot),ft.push({event:Ze,listeners:Xt}))}}if((h&7)===0){e:{if(Ze=u==="mouseover"||u==="pointerover",rt=u==="mouseout"||u==="pointerout",Ze&&y!==ka&&(zt=y.relatedTarget||y.fromElement)&&(Be(zt)||zt[Ps]))break e;if((rt||Ze)&&(Ze=ot.window===ot?ot:(Ze=ot.ownerDocument)?Ze.defaultView||Ze.parentWindow:window,rt?(zt=y.relatedTarget||y.toElement,rt=We,zt=zt?Be(zt):null,zt!==null&&(xi=s(zt),Xt=zt.tag,zt!==xi||Xt!==5&&Xt!==27&&Xt!==6)&&(zt=null)):(rt=null,zt=We),rt!==zt)){if(Xt=Rd,ct="onMouseLeave",Ve="onMouseEnter",ze="mouse",(u==="pointerout"||u==="pointerover")&&(Xt=gv,ct="onPointerLeave",Ve="onPointerEnter",ze="pointer"),xi=rt==null?Ze:Ke(rt),je=zt==null?Ze:Ke(zt),Ze=new Xt(ct,ze+"leave",rt,y,ot),Ze.target=xi,Ze.relatedTarget=je,ct=null,Be(ot)===We&&(Xt=new Xt(Ve,ze+"enter",zt,y,ot),Xt.target=je,Xt.relatedTarget=xi,ct=Xt),xi=ct,rt&&zt)t:{for(Xt=B9,Ve=rt,ze=zt,je=0,ct=Ve;ct;ct=Xt(ct))je++;ct=0;for(var jt=ze;jt;jt=Xt(jt))ct++;for(;0<je-ct;)Ve=Xt(Ve),je--;for(;0<ct-je;)ze=Xt(ze),ct--;for(;je--;){if(Ve===ze||ze!==null&&Ve===ze.alternate){Xt=Ve;break t}Ve=Xt(Ve),ze=Xt(ze)}Xt=null}else Xt=null;rt!==null&&IP(ft,Ze,rt,Xt,!1),zt!==null&&xi!==null&&IP(ft,xi,zt,Xt,!0)}}e:{if(Ze=We?Ke(We):window,rt=Ze.nodeName&&Ze.nodeName.toLowerCase(),rt==="select"||rt==="input"&&Ze.type==="file")var ti=Sv;else if(wv(Ze))if(Ha)ti=Dx;else{ti=Tv;var Vt=Cx}else rt=Ze.nodeName,!rt||rt.toLowerCase()!=="input"||Ze.type!=="checkbox"&&Ze.type!=="radio"?We&&Ua(We.elementType)&&(ti=Sv):ti=Rx;if(ti&&(ti=ti(u,We))){Am(ft,ti,y,ot);break e}Vt&&Vt(u,Ze,We),u==="focusout"&&We&&Ze.type==="number"&&We.memoizedProps.value!=null&&Hn(Ze,"number",Ze.value)}switch(Vt=We?Ke(We):window,u){case"focusin":(wv(Vt)||Vt.contentEditable==="true")&&(ja=Vt,Wa=We,oh=null);break;case"focusout":oh=Wa=ja=null;break;case"mousedown":Cm=!0;break;case"contextmenu":case"mouseup":case"dragend":Cm=!1,ah(ft,y,ot);break;case"selectionchange":if(Lx)break;case"keydown":case"keyup":ah(ft,y,ot)}var wn;if(Iu)e:{switch(u){case"compositionstart":var Vn="onCompositionStart";break e;case"compositionend":Vn="onCompositionEnd";break e;case"compositionupdate":Vn="onCompositionUpdate";break e}Vn=void 0}else Nu?Tm(u,y)&&(Vn="onCompositionEnd"):u==="keydown"&&y.keyCode===229&&(Vn="onCompositionStart");Vn&&(yv&&y.locale!=="ko"&&(Nu||Vn!=="onCompositionStart"?Vn==="onCompositionEnd"&&Nu&&(wn=bc()):(os=ot,Du="value"in os?os.value:os.textContent,Nu=!0)),Vt=O1(We,Vn),0<Vt.length&&(Vn=new xm(Vn,u,null,y,ot),ft.push({event:Vn,listeners:Vt}),wn?Vn.data=wn:(wn=bv(y),wn!==null&&(Vn.data=wn)))),(wn=Mm?Tx(u,y):_v(u,y))&&(Vn=O1(We,"onBeforeInput"),0<Vn.length&&(Vt=new xm("onBeforeInput","beforeinput",null,y,ot),ft.push({event:Vt,listeners:Vn}),Vt.data=wn)),Bi(ft,u,We,y,ot)}LP(ft,h)})}function My(u,h,y){return{instance:u,listener:h,currentTarget:y}}function O1(u,h){for(var y=h+"Capture",S=[];u!==null;){var P=u,U=P.stateNode;if(P=P.tag,P!==5&&P!==26&&P!==27||U===null||(P=za(u,y),P!=null&&S.unshift(My(u,P,U)),P=za(u,h),P!=null&&S.push(My(u,P,U))),u.tag===3)return S;u=u.return}return[]}function B9(u){if(u===null)return null;do u=u.return;while(u&&u.tag!==5&&u.tag!==27);return u||null}function IP(u,h,y,S,P){for(var U=h._reactName,Q=[];y!==null&&y!==S;){var fe=y,Oe=fe.alternate,We=fe.stateNode;if(fe=fe.tag,Oe!==null&&Oe===S)break;fe!==5&&fe!==26&&fe!==27||We===null||(Oe=We,P?(We=za(y,U),We!=null&&Q.unshift(My(y,We,Oe))):P||(We=za(y,U),We!=null&&Q.push(My(y,We,Oe)))),y=y.return}Q.length!==0&&u.push({event:h,listeners:Q})}var V9=/\r\n?/g,G9=/\u0000|\uFFFD/g;function NP(u){return(typeof u=="string"?u:""+u).replace(V9,`
`).replace(G9,"")}function UP(u,h){return h=NP(h),NP(u)===h}function _i(u,h,y,S,P,U){switch(y){case"children":typeof S=="string"?h==="body"||h==="textarea"&&S===""||va(u,S):(typeof S=="number"||typeof S=="bigint")&&h!=="body"&&va(u,""+S);break;case"className":zn(u,"class",S);break;case"tabIndex":zn(u,"tabindex",S);break;case"dir":case"role":case"viewBox":case"width":case"height":zn(u,y,S);break;case"style":Tu(u,S,U);break;case"data":if(h!=="object"){zn(u,"data",S);break}case"src":case"href":if(S===""&&(h!=="a"||y!=="href")){u.removeAttribute(y);break}if(S==null||typeof S=="function"||typeof S=="symbol"||typeof S=="boolean"){u.removeAttribute(y);break}S=zo(""+S),u.setAttribute(y,S);break;case"action":case"formAction":if(typeof S=="function"){u.setAttribute(y,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof U=="function"&&(y==="formAction"?(h!=="input"&&_i(u,h,"name",P.name,P,null),_i(u,h,"formEncType",P.formEncType,P,null),_i(u,h,"formMethod",P.formMethod,P,null),_i(u,h,"formTarget",P.formTarget,P,null)):(_i(u,h,"encType",P.encType,P,null),_i(u,h,"method",P.method,P,null),_i(u,h,"target",P.target,P,null)));if(S==null||typeof S=="symbol"||typeof S=="boolean"){u.removeAttribute(y);break}S=zo(""+S),u.setAttribute(y,S);break;case"onClick":S!=null&&(u.onclick=ss);break;case"onScroll":S!=null&&Un("scroll",u);break;case"onScrollEnd":S!=null&&Un("scrollend",u);break;case"dangerouslySetInnerHTML":if(S!=null){if(typeof S!="object"||!("__html"in S))throw Error(i(61));if(y=S.__html,y!=null){if(P.children!=null)throw Error(i(60));u.innerHTML=y}}break;case"multiple":u.multiple=S&&typeof S!="function"&&typeof S!="symbol";break;case"muted":u.muted=S&&typeof S!="function"&&typeof S!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(S==null||typeof S=="function"||typeof S=="boolean"||typeof S=="symbol"){u.removeAttribute("xlink:href");break}y=zo(""+S),u.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",y);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":S!=null&&typeof S!="function"&&typeof S!="symbol"?u.setAttribute(y,""+S):u.removeAttribute(y);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":S&&typeof S!="function"&&typeof S!="symbol"?u.setAttribute(y,""):u.removeAttribute(y);break;case"capture":case"download":S===!0?u.setAttribute(y,""):S!==!1&&S!=null&&typeof S!="function"&&typeof S!="symbol"?u.setAttribute(y,S):u.removeAttribute(y);break;case"cols":case"rows":case"size":case"span":S!=null&&typeof S!="function"&&typeof S!="symbol"&&!isNaN(S)&&1<=S?u.setAttribute(y,S):u.removeAttribute(y);break;case"rowSpan":case"start":S==null||typeof S=="function"||typeof S=="symbol"||isNaN(S)?u.removeAttribute(y):u.setAttribute(y,S);break;case"popover":Un("beforetoggle",u),Un("toggle",u),kn(u,"popover",S);break;case"xlinkActuate":sn(u,"http://www.w3.org/1999/xlink","xlink:actuate",S);break;case"xlinkArcrole":sn(u,"http://www.w3.org/1999/xlink","xlink:arcrole",S);break;case"xlinkRole":sn(u,"http://www.w3.org/1999/xlink","xlink:role",S);break;case"xlinkShow":sn(u,"http://www.w3.org/1999/xlink","xlink:show",S);break;case"xlinkTitle":sn(u,"http://www.w3.org/1999/xlink","xlink:title",S);break;case"xlinkType":sn(u,"http://www.w3.org/1999/xlink","xlink:type",S);break;case"xmlBase":sn(u,"http://www.w3.org/XML/1998/namespace","xml:base",S);break;case"xmlLang":sn(u,"http://www.w3.org/XML/1998/namespace","xml:lang",S);break;case"xmlSpace":sn(u,"http://www.w3.org/XML/1998/namespace","xml:space",S);break;case"is":kn(u,"is",S);break;case"innerText":case"textContent":break;default:(!(2<y.length)||y[0]!=="o"&&y[0]!=="O"||y[1]!=="n"&&y[1]!=="N")&&(y=Cd.get(y)||y,kn(u,y,S))}}function JT(u,h,y,S,P,U){switch(y){case"style":Tu(u,S,U);break;case"dangerouslySetInnerHTML":if(S!=null){if(typeof S!="object"||!("__html"in S))throw Error(i(61));if(y=S.__html,y!=null){if(P.children!=null)throw Error(i(60));u.innerHTML=y}}break;case"children":typeof S=="string"?va(u,S):(typeof S=="number"||typeof S=="bigint")&&va(u,""+S);break;case"onScroll":S!=null&&Un("scroll",u);break;case"onScrollEnd":S!=null&&Un("scrollend",u);break;case"onClick":S!=null&&(u.onclick=ss);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ct.hasOwnProperty(y))e:{if(y[0]==="o"&&y[1]==="n"&&(P=y.endsWith("Capture"),h=y.slice(2,P?y.length-7:void 0),U=u[Hi]||null,U=U!=null?U[y]:null,typeof U=="function"&&u.removeEventListener(h,U,P),typeof S=="function")){typeof U!="function"&&U!==null&&(y in u?u[y]=null:u.hasAttribute(y)&&u.removeAttribute(y)),u.addEventListener(h,S,P);break e}y in u?u[y]=S:S===!0?u.setAttribute(y,""):kn(u,y,S)}}}function Ms(u,h,y){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Un("error",u),Un("load",u);var S=!1,P=!1,U;for(U in y)if(y.hasOwnProperty(U)){var Q=y[U];if(Q!=null)switch(U){case"src":S=!0;break;case"srcSet":P=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,h));default:_i(u,h,U,Q,y,null)}}P&&_i(u,h,"srcSet",y.srcSet,y,null),S&&_i(u,h,"src",y.src,y,null);return;case"input":Un("invalid",u);var fe=U=Q=P=null,Oe=null,We=null;for(S in y)if(y.hasOwnProperty(S)){var ot=y[S];if(ot!=null)switch(S){case"name":P=ot;break;case"type":Q=ot;break;case"checked":Oe=ot;break;case"defaultChecked":We=ot;break;case"value":U=ot;break;case"defaultValue":fe=ot;break;case"children":case"dangerouslySetInnerHTML":if(ot!=null)throw Error(i(137,h));break;default:_i(u,h,S,ot,y,null)}}ji(u,U,fe,Oe,We,Q,P,!1);return;case"select":Un("invalid",u),S=Q=U=null;for(P in y)if(y.hasOwnProperty(P)&&(fe=y[P],fe!=null))switch(P){case"value":U=fe;break;case"defaultValue":Q=fe;break;case"multiple":S=fe;default:_i(u,h,P,fe,y,null)}h=U,y=Q,u.multiple=!!S,h!=null?pi(u,!!S,h,!1):y!=null&&pi(u,!!S,y,!0);return;case"textarea":Un("invalid",u),U=P=S=null;for(Q in y)if(y.hasOwnProperty(Q)&&(fe=y[Q],fe!=null))switch(Q){case"value":S=fe;break;case"defaultValue":P=fe;break;case"children":U=fe;break;case"dangerouslySetInnerHTML":if(fe!=null)throw Error(i(91));break;default:_i(u,h,Q,fe,y,null)}Hr(u,S,P,U);return;case"option":for(Oe in y)y.hasOwnProperty(Oe)&&(S=y[Oe],S!=null)&&(Oe==="selected"?u.selected=S&&typeof S!="function"&&typeof S!="symbol":_i(u,h,Oe,S,y,null));return;case"dialog":Un("beforetoggle",u),Un("toggle",u),Un("cancel",u),Un("close",u);break;case"iframe":case"object":Un("load",u);break;case"video":case"audio":for(S=0;S<ra.length;S++)Un(ra[S],u);break;case"image":Un("error",u),Un("load",u);break;case"details":Un("toggle",u);break;case"embed":case"source":case"link":Un("error",u),Un("load",u);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(We in y)if(y.hasOwnProperty(We)&&(S=y[We],S!=null))switch(We){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,h));default:_i(u,h,We,S,y,null)}return;default:if(Ua(h)){for(ot in y)y.hasOwnProperty(ot)&&(S=y[ot],S!==void 0&&JT(u,h,ot,S,y,void 0));return}}for(fe in y)y.hasOwnProperty(fe)&&(S=y[fe],S!=null&&_i(u,h,fe,S,y,null))}function H9(u,h,y,S){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var P=null,U=null,Q=null,fe=null,Oe=null,We=null,ot=null;for(rt in y){var ft=y[rt];if(y.hasOwnProperty(rt)&&ft!=null)switch(rt){case"checked":break;case"value":break;case"defaultValue":Oe=ft;default:S.hasOwnProperty(rt)||_i(u,h,rt,null,S,ft)}}for(var Ze in S){var rt=S[Ze];if(ft=y[Ze],S.hasOwnProperty(Ze)&&(rt!=null||ft!=null))switch(Ze){case"type":U=rt;break;case"name":P=rt;break;case"checked":We=rt;break;case"defaultChecked":ot=rt;break;case"value":Q=rt;break;case"defaultValue":fe=rt;break;case"children":case"dangerouslySetInnerHTML":if(rt!=null)throw Error(i(137,h));break;default:rt!==ft&&_i(u,h,Ze,rt,S,ft)}}Zi(u,Q,fe,Oe,We,ot,U,P);return;case"select":rt=Q=fe=Ze=null;for(U in y)if(Oe=y[U],y.hasOwnProperty(U)&&Oe!=null)switch(U){case"value":break;case"multiple":rt=Oe;default:S.hasOwnProperty(U)||_i(u,h,U,null,S,Oe)}for(P in S)if(U=S[P],Oe=y[P],S.hasOwnProperty(P)&&(U!=null||Oe!=null))switch(P){case"value":Ze=U;break;case"defaultValue":fe=U;break;case"multiple":Q=U;default:U!==Oe&&_i(u,h,P,U,S,Oe)}h=fe,y=Q,S=rt,Ze!=null?pi(u,!!y,Ze,!1):!!S!=!!y&&(h!=null?pi(u,!!y,h,!0):pi(u,!!y,y?[]:"",!1));return;case"textarea":rt=Ze=null;for(fe in y)if(P=y[fe],y.hasOwnProperty(fe)&&P!=null&&!S.hasOwnProperty(fe))switch(fe){case"value":break;case"children":break;default:_i(u,h,fe,null,S,P)}for(Q in S)if(P=S[Q],U=y[Q],S.hasOwnProperty(Q)&&(P!=null||U!=null))switch(Q){case"value":Ze=P;break;case"defaultValue":rt=P;break;case"children":break;case"dangerouslySetInnerHTML":if(P!=null)throw Error(i(91));break;default:P!==U&&_i(u,h,Q,P,S,U)}lo(u,Ze,rt);return;case"option":for(var zt in y)Ze=y[zt],y.hasOwnProperty(zt)&&Ze!=null&&!S.hasOwnProperty(zt)&&(zt==="selected"?u.selected=!1:_i(u,h,zt,null,S,Ze));for(Oe in S)Ze=S[Oe],rt=y[Oe],S.hasOwnProperty(Oe)&&Ze!==rt&&(Ze!=null||rt!=null)&&(Oe==="selected"?u.selected=Ze&&typeof Ze!="function"&&typeof Ze!="symbol":_i(u,h,Oe,Ze,S,rt));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Xt in y)Ze=y[Xt],y.hasOwnProperty(Xt)&&Ze!=null&&!S.hasOwnProperty(Xt)&&_i(u,h,Xt,null,S,Ze);for(We in S)if(Ze=S[We],rt=y[We],S.hasOwnProperty(We)&&Ze!==rt&&(Ze!=null||rt!=null))switch(We){case"children":case"dangerouslySetInnerHTML":if(Ze!=null)throw Error(i(137,h));break;default:_i(u,h,We,Ze,S,rt)}return;default:if(Ua(h)){for(var xi in y)Ze=y[xi],y.hasOwnProperty(xi)&&Ze!==void 0&&!S.hasOwnProperty(xi)&&JT(u,h,xi,void 0,S,Ze);for(ot in S)Ze=S[ot],rt=y[ot],!S.hasOwnProperty(ot)||Ze===rt||Ze===void 0&&rt===void 0||JT(u,h,ot,Ze,S,rt);return}}for(var Ve in y)Ze=y[Ve],y.hasOwnProperty(Ve)&&Ze!=null&&!S.hasOwnProperty(Ve)&&_i(u,h,Ve,null,S,Ze);for(ft in S)Ze=S[ft],rt=y[ft],!S.hasOwnProperty(ft)||Ze===rt||Ze==null&&rt==null||_i(u,h,ft,Ze,S,rt)}function kP(u){switch(u){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function j9(){if(typeof performance.getEntriesByType=="function"){for(var u=0,h=0,y=performance.getEntriesByType("resource"),S=0;S<y.length;S++){var P=y[S],U=P.transferSize,Q=P.initiatorType,fe=P.duration;if(U&&fe&&kP(Q)){for(Q=0,fe=P.responseEnd,S+=1;S<y.length;S++){var Oe=y[S],We=Oe.startTime;if(We>fe)break;var ot=Oe.transferSize,ft=Oe.initiatorType;ot&&kP(ft)&&(Oe=Oe.responseEnd,Q+=ot*(Oe<fe?1:(fe-We)/(Oe-We)))}if(--S,h+=8*(U+Q)/(P.duration/1e3),u++,10<u)break}}if(0<u)return h/u/1e6}return navigator.connection&&(u=navigator.connection.downlink,typeof u=="number")?u:5}var eA=null,tA=null;function L1(u){return u.nodeType===9?u:u.ownerDocument}function zP(u){switch(u){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function FP(u,h){if(u===0)switch(h){case"svg":return 1;case"math":return 2;default:return 0}return u===1&&h==="foreignObject"?0:u}function nA(u,h){return u==="textarea"||u==="noscript"||typeof h.children=="string"||typeof h.children=="number"||typeof h.children=="bigint"||typeof h.dangerouslySetInnerHTML=="object"&&h.dangerouslySetInnerHTML!==null&&h.dangerouslySetInnerHTML.__html!=null}var iA=null;function W9(){var u=window.event;return u&&u.type==="popstate"?u===iA?!1:(iA=u,!0):(iA=null,!1)}var BP=typeof setTimeout=="function"?setTimeout:void 0,$9=typeof clearTimeout=="function"?clearTimeout:void 0,VP=typeof Promise=="function"?Promise:void 0,q9=typeof queueMicrotask=="function"?queueMicrotask:typeof VP<"u"?function(u){return VP.resolve(null).then(u).catch(X9)}:BP;function X9(u){setTimeout(function(){throw u})}function Ph(u){return u==="head"}function GP(u,h){var y=h,S=0;do{var P=y.nextSibling;if(u.removeChild(y),P&&P.nodeType===8)if(y=P.data,y==="/$"||y==="/&"){if(S===0){u.removeChild(P),_g(h);return}S--}else if(y==="$"||y==="$?"||y==="$~"||y==="$!"||y==="&")S++;else if(y==="html")Ty(u.ownerDocument.documentElement);else if(y==="head"){y=u.ownerDocument.head,Ty(y);for(var U=y.firstChild;U;){var Q=U.nextSibling,fe=U.nodeName;U[ao]||fe==="SCRIPT"||fe==="STYLE"||fe==="LINK"&&U.rel.toLowerCase()==="stylesheet"||y.removeChild(U),U=Q}}else y==="body"&&Ty(u.ownerDocument.body);y=P}while(y);_g(h)}function HP(u,h){var y=u;u=0;do{var S=y.nextSibling;if(y.nodeType===1?h?(y._stashedDisplay=y.style.display,y.style.display="none"):(y.style.display=y._stashedDisplay||"",y.getAttribute("style")===""&&y.removeAttribute("style")):y.nodeType===3&&(h?(y._stashedText=y.nodeValue,y.nodeValue=""):y.nodeValue=y._stashedText||""),S&&S.nodeType===8)if(y=S.data,y==="/$"){if(u===0)break;u--}else y!=="$"&&y!=="$?"&&y!=="$~"&&y!=="$!"||u++;y=S}while(y)}function rA(u){var h=u.firstChild;for(h&&h.nodeType===10&&(h=h.nextSibling);h;){var y=h;switch(h=h.nextSibling,y.nodeName){case"HTML":case"HEAD":case"BODY":rA(y),pe(y);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(y.rel.toLowerCase()==="stylesheet")continue}u.removeChild(y)}}function Y9(u,h,y,S){for(;u.nodeType===1;){var P=y;if(u.nodeName.toLowerCase()!==h.toLowerCase()){if(!S&&(u.nodeName!=="INPUT"||u.type!=="hidden"))break}else if(S){if(!u[ao])switch(h){case"meta":if(!u.hasAttribute("itemprop"))break;return u;case"link":if(U=u.getAttribute("rel"),U==="stylesheet"&&u.hasAttribute("data-precedence"))break;if(U!==P.rel||u.getAttribute("href")!==(P.href==null||P.href===""?null:P.href)||u.getAttribute("crossorigin")!==(P.crossOrigin==null?null:P.crossOrigin)||u.getAttribute("title")!==(P.title==null?null:P.title))break;return u;case"style":if(u.hasAttribute("data-precedence"))break;return u;case"script":if(U=u.getAttribute("src"),(U!==(P.src==null?null:P.src)||u.getAttribute("type")!==(P.type==null?null:P.type)||u.getAttribute("crossorigin")!==(P.crossOrigin==null?null:P.crossOrigin))&&U&&u.hasAttribute("async")&&!u.hasAttribute("itemprop"))break;return u;default:return u}}else if(h==="input"&&u.type==="hidden"){var U=P.name==null?null:""+P.name;if(P.type==="hidden"&&u.getAttribute("name")===U)return u}else return u;if(u=ul(u.nextSibling),u===null)break}return null}function Z9(u,h,y){if(h==="")return null;for(;u.nodeType!==3;)if((u.nodeType!==1||u.nodeName!=="INPUT"||u.type!=="hidden")&&!y||(u=ul(u.nextSibling),u===null))return null;return u}function jP(u,h){for(;u.nodeType!==8;)if((u.nodeType!==1||u.nodeName!=="INPUT"||u.type!=="hidden")&&!h||(u=ul(u.nextSibling),u===null))return null;return u}function sA(u){return u.data==="$?"||u.data==="$~"}function oA(u){return u.data==="$!"||u.data==="$?"&&u.ownerDocument.readyState!=="loading"}function K9(u,h){var y=u.ownerDocument;if(u.data==="$~")u._reactRetry=h;else if(u.data!=="$?"||y.readyState!=="loading")h();else{var S=function(){h(),y.removeEventListener("DOMContentLoaded",S)};y.addEventListener("DOMContentLoaded",S),u._reactRetry=S}}function ul(u){for(;u!=null;u=u.nextSibling){var h=u.nodeType;if(h===1||h===3)break;if(h===8){if(h=u.data,h==="$"||h==="$!"||h==="$?"||h==="$~"||h==="&"||h==="F!"||h==="F")break;if(h==="/$"||h==="/&")return null}}return u}var aA=null;function WP(u){u=u.nextSibling;for(var h=0;u;){if(u.nodeType===8){var y=u.data;if(y==="/$"||y==="/&"){if(h===0)return ul(u.nextSibling);h--}else y!=="$"&&y!=="$!"&&y!=="$?"&&y!=="$~"&&y!=="&"||h++}u=u.nextSibling}return null}function $P(u){u=u.previousSibling;for(var h=0;u;){if(u.nodeType===8){var y=u.data;if(y==="$"||y==="$!"||y==="$?"||y==="$~"||y==="&"){if(h===0)return u;h--}else y!=="/$"&&y!=="/&"||h++}u=u.previousSibling}return null}function qP(u,h,y){switch(h=L1(y),u){case"html":if(u=h.documentElement,!u)throw Error(i(452));return u;case"head":if(u=h.head,!u)throw Error(i(453));return u;case"body":if(u=h.body,!u)throw Error(i(454));return u;default:throw Error(i(451))}}function Ty(u){for(var h=u.attributes;h.length;)u.removeAttributeNode(h[0]);pe(u)}var fl=new Map,XP=new Set;function P1(u){return typeof u.getRootNode=="function"?u.getRootNode():u.nodeType===9?u:u.ownerDocument}var of=G.d;G.d={f:Q9,r:J9,D:e7,C:t7,L:n7,m:i7,X:s7,S:r7,M:o7};function Q9(){var u=of.f(),h=Ma();return u||h}function J9(u){var h=Ye(u);h!==null&&h.tag===5&&h.type==="form"?m1(h):of.r(u)}var vg=typeof document>"u"?null:document;function YP(u,h,y){var S=vg;if(S&&typeof h=="string"&&h){var P=$t(h);P='link[rel="'+u+'"][href="'+P+'"]',typeof y=="string"&&(P+='[crossorigin="'+y+'"]'),XP.has(P)||(XP.add(P),u={rel:u,crossOrigin:y,href:h},S.querySelector(P)===null&&(h=S.createElement("link"),Ms(h,"link",u),lt(h),S.head.appendChild(h)))}}function e7(u){of.D(u),YP("dns-prefetch",u,null)}function t7(u,h){of.C(u,h),YP("preconnect",u,h)}function n7(u,h,y){of.L(u,h,y);var S=vg;if(S&&u&&h){var P='link[rel="preload"][as="'+$t(h)+'"]';h==="image"&&y&&y.imageSrcSet?(P+='[imagesrcset="'+$t(y.imageSrcSet)+'"]',typeof y.imageSizes=="string"&&(P+='[imagesizes="'+$t(y.imageSizes)+'"]')):P+='[href="'+$t(u)+'"]';var U=P;switch(h){case"style":U=yg(u);break;case"script":U=bg(u)}fl.has(U)||(u=d({rel:"preload",href:h==="image"&&y&&y.imageSrcSet?void 0:u,as:h},y),fl.set(U,u),S.querySelector(P)!==null||h==="style"&&S.querySelector(Ay(U))||h==="script"&&S.querySelector(Cy(U))||(h=S.createElement("link"),Ms(h,"link",u),lt(h),S.head.appendChild(h)))}}function i7(u,h){of.m(u,h);var y=vg;if(y&&u){var S=h&&typeof h.as=="string"?h.as:"script",P='link[rel="modulepreload"][as="'+$t(S)+'"][href="'+$t(u)+'"]',U=P;switch(S){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":U=bg(u)}if(!fl.has(U)&&(u=d({rel:"modulepreload",href:u},h),fl.set(U,u),y.querySelector(P)===null)){switch(S){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(y.querySelector(Cy(U)))return}S=y.createElement("link"),Ms(S,"link",u),lt(S),y.head.appendChild(S)}}}function r7(u,h,y){of.S(u,h,y);var S=vg;if(S&&u){var P=De(S).hoistableStyles,U=yg(u);h=h||"default";var Q=P.get(U);if(!Q){var fe={loading:0,preload:null};if(Q=S.querySelector(Ay(U)))fe.loading=5;else{u=d({rel:"stylesheet",href:u,"data-precedence":h},y),(y=fl.get(U))&&lA(u,y);var Oe=Q=S.createElement("link");lt(Oe),Ms(Oe,"link",u),Oe._p=new Promise(function(We,ot){Oe.onload=We,Oe.onerror=ot}),Oe.addEventListener("load",function(){fe.loading|=1}),Oe.addEventListener("error",function(){fe.loading|=2}),fe.loading|=4,I1(Q,h,S)}Q={type:"stylesheet",instance:Q,count:1,state:fe},P.set(U,Q)}}}function s7(u,h){of.X(u,h);var y=vg;if(y&&u){var S=De(y).hoistableScripts,P=bg(u),U=S.get(P);U||(U=y.querySelector(Cy(P)),U||(u=d({src:u,async:!0},h),(h=fl.get(P))&&cA(u,h),U=y.createElement("script"),lt(U),Ms(U,"link",u),y.head.appendChild(U)),U={type:"script",instance:U,count:1,state:null},S.set(P,U))}}function o7(u,h){of.M(u,h);var y=vg;if(y&&u){var S=De(y).hoistableScripts,P=bg(u),U=S.get(P);U||(U=y.querySelector(Cy(P)),U||(u=d({src:u,async:!0,type:"module"},h),(h=fl.get(P))&&cA(u,h),U=y.createElement("script"),lt(U),Ms(U,"link",u),y.head.appendChild(U)),U={type:"script",instance:U,count:1,state:null},S.set(P,U))}}function ZP(u,h,y,S){var P=(P=ue.current)?P1(P):null;if(!P)throw Error(i(446));switch(u){case"meta":case"title":return null;case"style":return typeof y.precedence=="string"&&typeof y.href=="string"?(h=yg(y.href),y=De(P).hoistableStyles,S=y.get(h),S||(S={type:"style",instance:null,count:0,state:null},y.set(h,S)),S):{type:"void",instance:null,count:0,state:null};case"link":if(y.rel==="stylesheet"&&typeof y.href=="string"&&typeof y.precedence=="string"){u=yg(y.href);var U=De(P).hoistableStyles,Q=U.get(u);if(Q||(P=P.ownerDocument||P,Q={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},U.set(u,Q),(U=P.querySelector(Ay(u)))&&!U._p&&(Q.instance=U,Q.state.loading=5),fl.has(u)||(y={rel:"preload",as:"style",href:y.href,crossOrigin:y.crossOrigin,integrity:y.integrity,media:y.media,hrefLang:y.hrefLang,referrerPolicy:y.referrerPolicy},fl.set(u,y),U||a7(P,u,y,Q.state))),h&&S===null)throw Error(i(528,""));return Q}if(h&&S!==null)throw Error(i(529,""));return null;case"script":return h=y.async,y=y.src,typeof y=="string"&&h&&typeof h!="function"&&typeof h!="symbol"?(h=bg(y),y=De(P).hoistableScripts,S=y.get(h),S||(S={type:"script",instance:null,count:0,state:null},y.set(h,S)),S):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,u))}}function yg(u){return'href="'+$t(u)+'"'}function Ay(u){return'link[rel="stylesheet"]['+u+"]"}function KP(u){return d({},u,{"data-precedence":u.precedence,precedence:null})}function a7(u,h,y,S){u.querySelector('link[rel="preload"][as="style"]['+h+"]")?S.loading=1:(h=u.createElement("link"),S.preload=h,h.addEventListener("load",function(){return S.loading|=1}),h.addEventListener("error",function(){return S.loading|=2}),Ms(h,"link",y),lt(h),u.head.appendChild(h))}function bg(u){return'[src="'+$t(u)+'"]'}function Cy(u){return"script[async]"+u}function QP(u,h,y){if(h.count++,h.instance===null)switch(h.type){case"style":var S=u.querySelector('style[data-href~="'+$t(y.href)+'"]');if(S)return h.instance=S,lt(S),S;var P=d({},y,{"data-href":y.href,"data-precedence":y.precedence,href:null,precedence:null});return S=(u.ownerDocument||u).createElement("style"),lt(S),Ms(S,"style",P),I1(S,y.precedence,u),h.instance=S;case"stylesheet":P=yg(y.href);var U=u.querySelector(Ay(P));if(U)return h.state.loading|=4,h.instance=U,lt(U),U;S=KP(y),(P=fl.get(P))&&lA(S,P),U=(u.ownerDocument||u).createElement("link"),lt(U);var Q=U;return Q._p=new Promise(function(fe,Oe){Q.onload=fe,Q.onerror=Oe}),Ms(U,"link",S),h.state.loading|=4,I1(U,y.precedence,u),h.instance=U;case"script":return U=bg(y.src),(P=u.querySelector(Cy(U)))?(h.instance=P,lt(P),P):(S=y,(P=fl.get(U))&&(S=d({},y),cA(S,P)),u=u.ownerDocument||u,P=u.createElement("script"),lt(P),Ms(P,"link",S),u.head.appendChild(P),h.instance=P);case"void":return null;default:throw Error(i(443,h.type))}else h.type==="stylesheet"&&(h.state.loading&4)===0&&(S=h.instance,h.state.loading|=4,I1(S,y.precedence,u));return h.instance}function I1(u,h,y){for(var S=y.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),P=S.length?S[S.length-1]:null,U=P,Q=0;Q<S.length;Q++){var fe=S[Q];if(fe.dataset.precedence===h)U=fe;else if(U!==P)break}U?U.parentNode.insertBefore(u,U.nextSibling):(h=y.nodeType===9?y.head:y,h.insertBefore(u,h.firstChild))}function lA(u,h){u.crossOrigin==null&&(u.crossOrigin=h.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=h.referrerPolicy),u.title==null&&(u.title=h.title)}function cA(u,h){u.crossOrigin==null&&(u.crossOrigin=h.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=h.referrerPolicy),u.integrity==null&&(u.integrity=h.integrity)}var N1=null;function JP(u,h,y){if(N1===null){var S=new Map,P=N1=new Map;P.set(y,S)}else P=N1,S=P.get(y),S||(S=new Map,P.set(y,S));if(S.has(u))return S;for(S.set(u,null),y=y.getElementsByTagName(u),P=0;P<y.length;P++){var U=y[P];if(!(U[ao]||U[Zn]||u==="link"&&U.getAttribute("rel")==="stylesheet")&&U.namespaceURI!=="http://www.w3.org/2000/svg"){var Q=U.getAttribute(h)||"";Q=u+Q;var fe=S.get(Q);fe?fe.push(U):S.set(Q,[U])}}return S}function eI(u,h,y){u=u.ownerDocument||u,u.head.insertBefore(y,h==="title"?u.querySelector("head > title"):null)}function l7(u,h,y){if(y===1||h.itemProp!=null)return!1;switch(u){case"meta":case"title":return!0;case"style":if(typeof h.precedence!="string"||typeof h.href!="string"||h.href==="")break;return!0;case"link":if(typeof h.rel!="string"||typeof h.href!="string"||h.href===""||h.onLoad||h.onError)break;return h.rel==="stylesheet"?(u=h.disabled,typeof h.precedence=="string"&&u==null):!0;case"script":if(h.async&&typeof h.async!="function"&&typeof h.async!="symbol"&&!h.onLoad&&!h.onError&&h.src&&typeof h.src=="string")return!0}return!1}function tI(u){return!(u.type==="stylesheet"&&(u.state.loading&3)===0)}function c7(u,h,y,S){if(y.type==="stylesheet"&&(typeof S.media!="string"||matchMedia(S.media).matches!==!1)&&(y.state.loading&4)===0){if(y.instance===null){var P=yg(S.href),U=h.querySelector(Ay(P));if(U){h=U._p,h!==null&&typeof h=="object"&&typeof h.then=="function"&&(u.count++,u=U1.bind(u),h.then(u,u)),y.state.loading|=4,y.instance=U,lt(U);return}U=h.ownerDocument||h,S=KP(S),(P=fl.get(P))&&lA(S,P),U=U.createElement("link"),lt(U);var Q=U;Q._p=new Promise(function(fe,Oe){Q.onload=fe,Q.onerror=Oe}),Ms(U,"link",S),y.instance=U}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(y,h),(h=y.state.preload)&&(y.state.loading&3)===0&&(u.count++,y=U1.bind(u),h.addEventListener("load",y),h.addEventListener("error",y))}}var uA=0;function u7(u,h){return u.stylesheets&&u.count===0&&z1(u,u.stylesheets),0<u.count||0<u.imgCount?function(y){var S=setTimeout(function(){if(u.stylesheets&&z1(u,u.stylesheets),u.unsuspend){var U=u.unsuspend;u.unsuspend=null,U()}},6e4+h);0<u.imgBytes&&uA===0&&(uA=62500*j9());var P=setTimeout(function(){if(u.waitingForImages=!1,u.count===0&&(u.stylesheets&&z1(u,u.stylesheets),u.unsuspend)){var U=u.unsuspend;u.unsuspend=null,U()}},(u.imgBytes>uA?50:800)+h);return u.unsuspend=y,function(){u.unsuspend=null,clearTimeout(S),clearTimeout(P)}}:null}function U1(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)z1(this,this.stylesheets);else if(this.unsuspend){var u=this.unsuspend;this.unsuspend=null,u()}}}var k1=null;function z1(u,h){u.stylesheets=null,u.unsuspend!==null&&(u.count++,k1=new Map,h.forEach(f7,u),k1=null,U1.call(u))}function f7(u,h){if(!(h.state.loading&4)){var y=k1.get(u);if(y)var S=y.get(null);else{y=new Map,k1.set(u,y);for(var P=u.querySelectorAll("link[data-precedence],style[data-precedence]"),U=0;U<P.length;U++){var Q=P[U];(Q.nodeName==="LINK"||Q.getAttribute("media")!=="not all")&&(y.set(Q.dataset.precedence,Q),S=Q)}S&&y.set(null,S)}P=h.instance,Q=P.getAttribute("data-precedence"),U=y.get(Q)||S,U===S&&y.set(null,P),y.set(Q,P),this.count++,S=U1.bind(this),P.addEventListener("load",S),P.addEventListener("error",S),U?U.parentNode.insertBefore(P,U.nextSibling):(u=u.nodeType===9?u.head:u,u.insertBefore(P,u.firstChild)),h.state.loading|=4}}var Ry={$$typeof:T,Provider:null,Consumer:null,_currentValue:K,_currentValue2:K,_threadCount:0};function h7(u,h,y,S,P,U,Q,fe,Oe){this.tag=1,this.containerInfo=u,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Bt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bt(0),this.hiddenUpdates=Bt(null),this.identifierPrefix=S,this.onUncaughtError=P,this.onCaughtError=U,this.onRecoverableError=Q,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Oe,this.incompleteTransitions=new Map}function nI(u,h,y,S,P,U,Q,fe,Oe,We,ot,ft){return u=new h7(u,h,y,Q,Oe,We,ot,ft,fe),h=1,U===!0&&(h|=24),U=Ii(3,null,null,h),u.current=U,U.stateNode=u,h=Pv(),h.refCount++,u.pooledCache=h,h.refCount++,U.memoizedState={element:S,isDehydrated:y,cache:h},jd(U),u}function iI(u){return u?(u=Ac,u):Ac}function rI(u,h,y,S,P,U){P=iI(P),S.context===null?S.context=P:S.pendingContext=P,S=kl(h),S.payload={element:y},U=U===void 0?null:U,U!==null&&(S.callback=U),y=Nc(u,S,h),y!==null&&(yn(y,u,h),Uc(y,u,h))}function sI(u,h){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var y=u.retryLane;u.retryLane=y!==0&&y<h?y:h}}function fA(u,h){sI(u,h),(u=u.alternate)&&sI(u,h)}function oI(u){if(u.tag===13||u.tag===31){var h=ys(u,67108864);h!==null&&yn(h,u,67108864),fA(u,67108864)}}function aI(u){if(u.tag===13||u.tag===31){var h=xo();h=_r(h);var y=ys(u,h);y!==null&&yn(y,u,h),fA(u,h)}}var F1=!0;function d7(u,h,y,S){var P=W.T;W.T=null;var U=G.p;try{G.p=2,hA(u,h,y,S)}finally{G.p=U,W.T=P}}function p7(u,h,y,S){var P=W.T;W.T=null;var U=G.p;try{G.p=8,hA(u,h,y,S)}finally{G.p=U,W.T=P}}function hA(u,h,y,S){if(F1){var P=dA(S);if(P===null)QT(u,h,S,B1,y),cI(u,S);else if(g7(P,u,h,y,S))S.stopPropagation();else if(cI(u,S),h&4&&-1<m7.indexOf(u)){for(;P!==null;){var U=Ye(P);if(U!==null)switch(U.tag){case 3:if(U=U.stateNode,U.current.memoizedState.isDehydrated){var Q=st(U.pendingLanes);if(Q!==0){var fe=U;for(fe.pendingLanes|=2,fe.entangledLanes|=2;Q;){var Oe=1<<31-nt(Q);fe.entanglements[1]|=Oe,Q&=~Oe}dt(U),(Gt&6)===0&&(er=Z()+500,Dt(0))}}break;case 31:case 13:fe=ys(U,2),fe!==null&&yn(fe,U,2),Ma(),fA(U,2)}if(U=dA(S),U===null&&QT(u,h,S,B1,y),U===P)break;P=U}P!==null&&S.stopPropagation()}else QT(u,h,S,null,y)}}function dA(u){return u=Au(u),pA(u)}var B1=null;function pA(u){if(B1=null,u=Be(u),u!==null){var h=s(u);if(h===null)u=null;else{var y=h.tag;if(y===13){if(u=o(h),u!==null)return u;u=null}else if(y===31){if(u=a(h),u!==null)return u;u=null}else if(y===3){if(h.stateNode.current.memoizedState.isDehydrated)return h.tag===3?h.stateNode.containerInfo:null;u=null}else h!==u&&(u=null)}}return B1=u,null}function lI(u){switch(u){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ye()){case Y:return 2;case J:return 8;case re:case ge:return 32;case _e:return 268435456;default:return 32}default:return 32}}var mA=!1,Ih=null,Nh=null,Uh=null,Dy=new Map,Oy=new Map,kh=[],m7="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function cI(u,h){switch(u){case"focusin":case"focusout":Ih=null;break;case"dragenter":case"dragleave":Nh=null;break;case"mouseover":case"mouseout":Uh=null;break;case"pointerover":case"pointerout":Dy.delete(h.pointerId);break;case"gotpointercapture":case"lostpointercapture":Oy.delete(h.pointerId)}}function Ly(u,h,y,S,P,U){return u===null||u.nativeEvent!==U?(u={blockedOn:h,domEventName:y,eventSystemFlags:S,nativeEvent:U,targetContainers:[P]},h!==null&&(h=Ye(h),h!==null&&oI(h)),u):(u.eventSystemFlags|=S,h=u.targetContainers,P!==null&&h.indexOf(P)===-1&&h.push(P),u)}function g7(u,h,y,S,P){switch(h){case"focusin":return Ih=Ly(Ih,u,h,y,S,P),!0;case"dragenter":return Nh=Ly(Nh,u,h,y,S,P),!0;case"mouseover":return Uh=Ly(Uh,u,h,y,S,P),!0;case"pointerover":var U=P.pointerId;return Dy.set(U,Ly(Dy.get(U)||null,u,h,y,S,P)),!0;case"gotpointercapture":return U=P.pointerId,Oy.set(U,Ly(Oy.get(U)||null,u,h,y,S,P)),!0}return!1}function uI(u){var h=Be(u.target);if(h!==null){var y=s(h);if(y!==null){if(h=y.tag,h===13){if(h=o(y),h!==null){u.blockedOn=h,Yi(u.priority,function(){aI(y)});return}}else if(h===31){if(h=a(y),h!==null){u.blockedOn=h,Yi(u.priority,function(){aI(y)});return}}else if(h===3&&y.stateNode.current.memoizedState.isDehydrated){u.blockedOn=y.tag===3?y.stateNode.containerInfo:null;return}}}u.blockedOn=null}function V1(u){if(u.blockedOn!==null)return!1;for(var h=u.targetContainers;0<h.length;){var y=dA(u.nativeEvent);if(y===null){y=u.nativeEvent;var S=new y.constructor(y.type,y);ka=S,y.target.dispatchEvent(S),ka=null}else return h=Ye(y),h!==null&&oI(h),u.blockedOn=y,!1;h.shift()}return!0}function fI(u,h,y){V1(u)&&y.delete(h)}function v7(){mA=!1,Ih!==null&&V1(Ih)&&(Ih=null),Nh!==null&&V1(Nh)&&(Nh=null),Uh!==null&&V1(Uh)&&(Uh=null),Dy.forEach(fI),Oy.forEach(fI)}function G1(u,h){u.blockedOn===h&&(u.blockedOn=null,mA||(mA=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,v7)))}var H1=null;function hI(u){H1!==u&&(H1=u,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){H1===u&&(H1=null);for(var h=0;h<u.length;h+=3){var y=u[h],S=u[h+1],P=u[h+2];if(typeof S!="function"){if(pA(S||y)===null)continue;break}var U=Ye(y);U!==null&&(u.splice(h,3),h-=3,oy(U,{pending:!0,data:P,method:y.method,action:S},S,P))}}))}function _g(u){function h(Oe){return G1(Oe,u)}Ih!==null&&G1(Ih,u),Nh!==null&&G1(Nh,u),Uh!==null&&G1(Uh,u),Dy.forEach(h),Oy.forEach(h);for(var y=0;y<kh.length;y++){var S=kh[y];S.blockedOn===u&&(S.blockedOn=null)}for(;0<kh.length&&(y=kh[0],y.blockedOn===null);)uI(y),y.blockedOn===null&&kh.shift();if(y=(u.ownerDocument||u).$$reactFormReplay,y!=null)for(S=0;S<y.length;S+=3){var P=y[S],U=y[S+1],Q=P[Hi]||null;if(typeof U=="function")Q||hI(y);else if(Q){var fe=null;if(U&&U.hasAttribute("formAction")){if(P=U,Q=U[Hi]||null)fe=Q.formAction;else if(pA(P)!==null)continue}else fe=Q.action;typeof fe=="function"?y[S+1]=fe:(y.splice(S,3),S-=3),hI(y)}}}function dI(){function u(U){U.canIntercept&&U.info==="react-transition"&&U.intercept({handler:function(){return new Promise(function(Q){return P=Q})},focusReset:"manual",scroll:"manual"})}function h(){P!==null&&(P(),P=null),S||setTimeout(y,20)}function y(){if(!S&&!navigation.transition){var U=navigation.currentEntry;U&&U.url!=null&&navigation.navigate(U.url,{state:U.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var S=!1,P=null;return navigation.addEventListener("navigate",u),navigation.addEventListener("navigatesuccess",h),navigation.addEventListener("navigateerror",h),setTimeout(y,100),function(){S=!0,navigation.removeEventListener("navigate",u),navigation.removeEventListener("navigatesuccess",h),navigation.removeEventListener("navigateerror",h),P!==null&&(P(),P=null)}}}function gA(u){this._internalRoot=u}j1.prototype.render=gA.prototype.render=function(u){var h=this._internalRoot;if(h===null)throw Error(i(409));var y=h.current,S=xo();rI(y,S,u,h,null,null)},j1.prototype.unmount=gA.prototype.unmount=function(){var u=this._internalRoot;if(u!==null){this._internalRoot=null;var h=u.containerInfo;rI(u.current,2,null,u,null,null),Ma(),h[Ps]=null}};function j1(u){this._internalRoot=u}j1.prototype.unstable_scheduleHydration=function(u){if(u){var h=Gr();u={blockedOn:null,target:u,priority:h};for(var y=0;y<kh.length&&h!==0&&h<kh[y].priority;y++);kh.splice(y,0,u),y===0&&uI(u)}};var pI=e.version;if(pI!=="19.2.4")throw Error(i(527,pI,"19.2.4"));G.findDOMNode=function(u){var h=u._reactInternals;if(h===void 0)throw typeof u.render=="function"?Error(i(188)):(u=Object.keys(u).join(","),Error(i(268,u)));return u=c(h),u=u!==null?f(u):null,u=u===null?null:u.stateNode,u};var y7={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:W,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var W1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!W1.isDisabled&&W1.supportsFiber)try{Me=W1.inject(y7),Le=W1}catch{}}return Iy.createRoot=function(u,h){if(!r(u))throw Error(i(299));var y=!1,S="",P=w1,U=hy,Q=dy;return h!=null&&(h.unstable_strictMode===!0&&(y=!0),h.identifierPrefix!==void 0&&(S=h.identifierPrefix),h.onUncaughtError!==void 0&&(P=h.onUncaughtError),h.onCaughtError!==void 0&&(U=h.onCaughtError),h.onRecoverableError!==void 0&&(Q=h.onRecoverableError)),h=nI(u,1,!1,null,null,y,S,null,P,U,Q,dI),u[Ps]=h.current,KT(u),new gA(h)},Iy.hydrateRoot=function(u,h,y){if(!r(u))throw Error(i(299));var S=!1,P="",U=w1,Q=hy,fe=dy,Oe=null;return y!=null&&(y.unstable_strictMode===!0&&(S=!0),y.identifierPrefix!==void 0&&(P=y.identifierPrefix),y.onUncaughtError!==void 0&&(U=y.onUncaughtError),y.onCaughtError!==void 0&&(Q=y.onCaughtError),y.onRecoverableError!==void 0&&(fe=y.onRecoverableError),y.formState!==void 0&&(Oe=y.formState)),h=nI(u,1,!0,h,y??null,S,P,Oe,U,Q,fe,dI),h.context=iI(null),y=h.current,S=xo(),S=_r(S),P=kl(S),P.callback=null,Nc(y,P,S),y=S,h.current.lanes=y,$n(h,y),dt(h),u[Ps]=h.current,KT(u),new j1(h)},Iy.version="19.2.4",Iy}var EI;function C7(){if(EI)return bA.exports;EI=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),bA.exports=A7(),bA.exports}var j4=C7();const R7=ro(j4);if(typeof window<"u"){const n={get passive(){}};window.addEventListener("testPassive",null,n),window.removeEventListener("testPassive",null,n)}const nO=$.createContext({});function nm(n){const e=$.useRef(null);return e.current===null&&(e.current=n()),e.current}const W4=typeof window<"u",iO=W4?$.useLayoutEffect:$.useEffect,SM=$.createContext(null);function rO(n,e){n.indexOf(e)===-1&&n.push(e)}function sO(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const _u=(n,e,t)=>t>e?e:t<n?n:t;let oO=()=>{};const Ff={},$4=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function q4(n){return typeof n=="object"&&n!==null}const X4=n=>/^0[^.\s]+$/u.test(n);function aO(n){let e;return()=>(e===void 0&&(e=n()),e)}const wl=n=>n,D7=(n,e)=>t=>e(n(t)),$_=(...n)=>n.reduce(D7),s_=(n,e,t)=>{const i=e-n;return i===0?1:(t-n)/i};class lO{constructor(){this.subscriptions=[]}add(e){return rO(this.subscriptions,e),()=>sO(this.subscriptions,e)}notify(e,t,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,t,i);else for(let s=0;s<r;s++){const o=this.subscriptions[s];o&&o(e,t,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Pf=n=>n*1e3,bl=n=>n/1e3;function Y4(n,e){return e?n*(1e3/e):0}const Z4=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,O7=1e-7,L7=12;function P7(n,e,t,i,r){let s,o,a=0;do o=e+(t-e)/2,s=Z4(o,i,r)-n,s>0?t=o:e=o;while(Math.abs(s)>O7&&++a<L7);return o}function q_(n,e,t,i){if(n===e&&t===i)return wl;const r=s=>P7(s,0,1,n,t);return s=>s===0||s===1?s:Z4(r(s),e,i)}const K4=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,Q4=n=>e=>1-n(1-e),J4=q_(.33,1.53,.69,.99),cO=Q4(J4),eF=K4(cO),tF=n=>(n*=2)<1?.5*cO(n):.5*(2-Math.pow(2,-10*(n-1))),uO=n=>1-Math.sin(Math.acos(n)),nF=Q4(uO),iF=K4(uO),I7=q_(.42,0,1,1),N7=q_(0,0,.58,1),rF=q_(.42,0,.58,1),U7=n=>Array.isArray(n)&&typeof n[0]!="number",sF=n=>Array.isArray(n)&&typeof n[0]=="number",k7={linear:wl,easeIn:I7,easeInOut:rF,easeOut:N7,circIn:uO,circInOut:iF,circOut:nF,backIn:cO,backInOut:eF,backOut:J4,anticipate:tF},z7=n=>typeof n=="string",MI=n=>{if(sF(n)){oO(n.length===4);const[e,t,i,r]=n;return q_(e,t,i,r)}else if(z7(n))return k7[n];return n},$1=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function F7(n,e){let t=new Set,i=new Set,r=!1,s=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function l(f){o.has(f)&&(c.schedule(f),n()),f(a)}const c={schedule:(f,d=!1,m=!1)=>{const b=m&&r?t:i;return d&&o.add(f),b.has(f)||b.add(f),f},cancel:f=>{i.delete(f),o.delete(f)},process:f=>{if(a=f,r){s=!0;return}r=!0,[t,i]=[i,t],t.forEach(l),t.clear(),r=!1,s&&(s=!1,c.process(f))}};return c}const B7=40;function oF(n,e){let t=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},s=()=>t=!0,o=$1.reduce((T,E)=>(T[E]=F7(s),T),{}),{setup:a,read:l,resolveKeyframes:c,preUpdate:f,update:d,preRender:m,render:v,postRender:b}=o,x=()=>{const T=Ff.useManualTiming?r.timestamp:performance.now();t=!1,Ff.useManualTiming||(r.delta=i?1e3/60:Math.max(Math.min(T-r.timestamp,B7),1)),r.timestamp=T,r.isProcessing=!0,a.process(r),l.process(r),c.process(r),f.process(r),d.process(r),m.process(r),v.process(r),b.process(r),r.isProcessing=!1,t&&e&&(i=!1,n(x))},w=()=>{t=!0,i=!0,r.isProcessing||n(x)};return{schedule:$1.reduce((T,E)=>{const C=o[E];return T[E]=(R,O=!1,I=!1)=>(t||w(),C.schedule(R,O,I)),T},{}),cancel:T=>{for(let E=0;E<$1.length;E++)o[$1[E]].cancel(T)},state:r,steps:o}}const{schedule:Ti,cancel:Bf,state:As,steps:SA}=oF(typeof requestAnimationFrame<"u"?requestAnimationFrame:wl,!0);let xS;function V7(){xS=void 0}const Do={now:()=>(xS===void 0&&Do.set(As.isProcessing||Ff.useManualTiming?As.timestamp:performance.now()),xS),set:n=>{xS=n,queueMicrotask(V7)}},aF=n=>e=>typeof e=="string"&&e.startsWith(n),lF=aF("--"),G7=aF("var(--"),fO=n=>G7(n)?H7.test(n.split("/*")[0].trim()):!1,H7=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function TI(n){return typeof n!="string"?!1:n.split("/*")[0].includes("var(--")}const X0={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},o_={...X0,transform:n=>_u(0,1,n)},q1={...X0,default:1},Ub=n=>Math.round(n*1e5)/1e5,hO=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function j7(n){return n==null}const W7=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,dO=(n,e)=>t=>!!(typeof t=="string"&&W7.test(t)&&t.startsWith(n)||e&&!j7(t)&&Object.prototype.hasOwnProperty.call(t,e)),cF=(n,e,t)=>i=>{if(typeof i!="string")return i;const[r,s,o,a]=i.match(hO);return{[n]:parseFloat(r),[e]:parseFloat(s),[t]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},$7=n=>_u(0,255,n),EA={...X0,transform:n=>Math.round($7(n))},Bp={test:dO("rgb","red"),parse:cF("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:i=1})=>"rgba("+EA.transform(n)+", "+EA.transform(e)+", "+EA.transform(t)+", "+Ub(o_.transform(i))+")"};function q7(n){let e="",t="",i="",r="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),i=n.substring(5,7),r=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),i=n.substring(3,4),r=n.substring(4,5),e+=e,t+=t,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const d3={test:dO("#"),parse:q7,transform:Bp.transform},X_=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),Qh=X_("deg"),pu=X_("%"),Ft=X_("px"),X7=X_("vh"),Y7=X_("vw"),AI={...pu,parse:n=>pu.parse(n)/100,transform:n=>pu.transform(n*100)},o0={test:dO("hsl","hue"),parse:cF("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:i=1})=>"hsla("+Math.round(n)+", "+pu.transform(Ub(e))+", "+pu.transform(Ub(t))+", "+Ub(o_.transform(i))+")"},kr={test:n=>Bp.test(n)||d3.test(n)||o0.test(n),parse:n=>Bp.test(n)?Bp.parse(n):o0.test(n)?o0.parse(n):d3.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?Bp.transform(n):o0.transform(n),getAnimatableNone:n=>{const e=kr.parse(n);return e.alpha=0,kr.transform(e)}},Z7=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function K7(n){return isNaN(n)&&typeof n=="string"&&(n.match(hO)?.length||0)+(n.match(Z7)?.length||0)>0}const uF="number",fF="color",Q7="var",J7="var(",CI="${}",ej=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function a_(n){const e=n.toString(),t=[],i={color:[],number:[],var:[]},r=[];let s=0;const a=e.replace(ej,l=>(kr.test(l)?(i.color.push(s),r.push(fF),t.push(kr.parse(l))):l.startsWith(J7)?(i.var.push(s),r.push(Q7),t.push(l)):(i.number.push(s),r.push(uF),t.push(parseFloat(l))),++s,CI)).split(CI);return{values:t,split:a,indexes:i,types:r}}function hF(n){return a_(n).values}function dF(n){const{split:e,types:t}=a_(n),i=e.length;return r=>{let s="";for(let o=0;o<i;o++)if(s+=e[o],r[o]!==void 0){const a=t[o];a===uF?s+=Ub(r[o]):a===fF?s+=kr.transform(r[o]):s+=r[o]}return s}}const tj=n=>typeof n=="number"?0:kr.test(n)?kr.getAnimatableNone(n):n;function nj(n){const e=hF(n);return dF(n)(e.map(tj))}const hd={test:K7,parse:hF,createTransformer:dF,getAnimatableNone:nj};function MA(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function ij({hue:n,saturation:e,lightness:t,alpha:i}){n/=360,e/=100,t/=100;let r=0,s=0,o=0;if(!e)r=s=o=t;else{const a=t<.5?t*(1+e):t+e-t*e,l=2*t-a;r=MA(l,a,n+1/3),s=MA(l,a,n),o=MA(l,a,n-1/3)}return{red:Math.round(r*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:i}}function GS(n,e){return t=>t>0?e:n}const sr=(n,e,t)=>n+(e-n)*t,TA=(n,e,t)=>{const i=n*n,r=t*(e*e-i)+i;return r<0?0:Math.sqrt(r)},rj=[d3,Bp,o0],sj=n=>rj.find(e=>e.test(n));function RI(n){const e=sj(n);if(!e)return!1;let t=e.parse(n);return e===o0&&(t=ij(t)),t}const DI=(n,e)=>{const t=RI(n),i=RI(e);if(!t||!i)return GS(n,e);const r={...t};return s=>(r.red=TA(t.red,i.red,s),r.green=TA(t.green,i.green,s),r.blue=TA(t.blue,i.blue,s),r.alpha=sr(t.alpha,i.alpha,s),Bp.transform(r))},p3=new Set(["none","hidden"]);function oj(n,e){return p3.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function aj(n,e){return t=>sr(n,e,t)}function pO(n){return typeof n=="number"?aj:typeof n=="string"?fO(n)?GS:kr.test(n)?DI:uj:Array.isArray(n)?pF:typeof n=="object"?kr.test(n)?DI:lj:GS}function pF(n,e){const t=[...n],i=t.length,r=n.map((s,o)=>pO(s)(s,e[o]));return s=>{for(let o=0;o<i;o++)t[o]=r[o](s);return t}}function lj(n,e){const t={...n,...e},i={};for(const r in t)n[r]!==void 0&&e[r]!==void 0&&(i[r]=pO(n[r])(n[r],e[r]));return r=>{for(const s in i)t[s]=i[s](r);return t}}function cj(n,e){const t=[],i={color:0,var:0,number:0};for(let r=0;r<e.values.length;r++){const s=e.types[r],o=n.indexes[s][i[s]],a=n.values[o]??0;t[r]=a,i[s]++}return t}const uj=(n,e)=>{const t=hd.createTransformer(e),i=a_(n),r=a_(e);return i.indexes.var.length===r.indexes.var.length&&i.indexes.color.length===r.indexes.color.length&&i.indexes.number.length>=r.indexes.number.length?p3.has(n)&&!r.values.length||p3.has(e)&&!i.values.length?oj(n,e):$_(pF(cj(i,r),r.values),t):GS(n,e)};function mF(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?sr(n,e,t):pO(n)(n,e)}const fj=n=>{const e=({timestamp:t})=>n(t);return{start:(t=!0)=>Ti.update(e,t),stop:()=>Bf(e),now:()=>As.isProcessing?As.timestamp:Do.now()}},gF=(n,e,t=10)=>{let i="";const r=Math.max(Math.round(e/t),2);for(let s=0;s<r;s++)i+=Math.round(n(s/(r-1))*1e4)/1e4+", ";return`linear(${i.substring(0,i.length-2)})`},HS=2e4;function mO(n){let e=0;const t=50;let i=n.next(e);for(;!i.done&&e<HS;)e+=t,i=n.next(e);return e>=HS?1/0:e}function hj(n,e=100,t){const i=t({...n,keyframes:[0,e]}),r=Math.min(mO(i),HS);return{type:"keyframes",ease:s=>i.next(r*s).value/e,duration:bl(r)}}const dj=5;function vF(n,e,t){const i=Math.max(e-dj,0);return Y4(t-n(i),e-i)}const vr={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},AA=.001;function pj({duration:n=vr.duration,bounce:e=vr.bounce,velocity:t=vr.velocity,mass:i=vr.mass}){let r,s,o=1-e;o=_u(vr.minDamping,vr.maxDamping,o),n=_u(vr.minDuration,vr.maxDuration,bl(n)),o<1?(r=c=>{const f=c*o,d=f*n,m=f-t,v=m3(c,o),b=Math.exp(-d);return AA-m/v*b},s=c=>{const d=c*o*n,m=d*t+t,v=Math.pow(o,2)*Math.pow(c,2)*n,b=Math.exp(-d),x=m3(Math.pow(c,2),o);return(-r(c)+AA>0?-1:1)*((m-v)*b)/x}):(r=c=>{const f=Math.exp(-c*n),d=(c-t)*n+1;return-AA+f*d},s=c=>{const f=Math.exp(-c*n),d=(t-c)*(n*n);return f*d});const a=5/n,l=gj(r,s,a);if(n=Pf(n),isNaN(l))return{stiffness:vr.stiffness,damping:vr.damping,duration:n};{const c=Math.pow(l,2)*i;return{stiffness:c,damping:o*2*Math.sqrt(i*c),duration:n}}}const mj=12;function gj(n,e,t){let i=t;for(let r=1;r<mj;r++)i=i-n(i)/e(i);return i}function m3(n,e){return n*Math.sqrt(1-e*e)}const vj=["duration","bounce"],yj=["stiffness","damping","mass"];function OI(n,e){return e.some(t=>n[t]!==void 0)}function bj(n){let e={velocity:vr.velocity,stiffness:vr.stiffness,damping:vr.damping,mass:vr.mass,isResolvedFromDuration:!1,...n};if(!OI(n,yj)&&OI(n,vj))if(n.visualDuration){const t=n.visualDuration,i=2*Math.PI/(t*1.2),r=i*i,s=2*_u(.05,1,1-(n.bounce||0))*Math.sqrt(r);e={...e,mass:vr.mass,stiffness:r,damping:s}}else{const t=pj(n);e={...e,...t,mass:vr.mass},e.isResolvedFromDuration=!0}return e}function jS(n=vr.visualDuration,e=vr.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:i,restDelta:r}=t;const s=t.keyframes[0],o=t.keyframes[t.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:c,mass:f,duration:d,velocity:m,isResolvedFromDuration:v}=bj({...t,velocity:-bl(t.velocity||0)}),b=m||0,x=c/(2*Math.sqrt(l*f)),w=o-s,_=bl(Math.sqrt(l/f)),A=Math.abs(w)<5;i||(i=A?vr.restSpeed.granular:vr.restSpeed.default),r||(r=A?vr.restDelta.granular:vr.restDelta.default);let T;if(x<1){const C=m3(_,x);T=R=>{const O=Math.exp(-x*_*R);return o-O*((b+x*_*w)/C*Math.sin(C*R)+w*Math.cos(C*R))}}else if(x===1)T=C=>o-Math.exp(-_*C)*(w+(b+_*w)*C);else{const C=_*Math.sqrt(x*x-1);T=R=>{const O=Math.exp(-x*_*R),I=Math.min(C*R,300);return o-O*((b+x*_*w)*Math.sinh(I)+C*w*Math.cosh(I))/C}}const E={calculatedDuration:v&&d||null,next:C=>{const R=T(C);if(v)a.done=C>=d;else{let O=C===0?b:0;x<1&&(O=C===0?Pf(b):vF(T,C,R));const I=Math.abs(O)<=i,L=Math.abs(o-R)<=r;a.done=I&&L}return a.value=a.done?o:R,a},toString:()=>{const C=Math.min(mO(E),HS),R=gF(O=>E.next(C*O).value,C,30);return C+"ms "+R},toTransition:()=>{}};return E}jS.applyToOptions=n=>{const e=hj(n,100,jS);return n.ease=e.ease,n.duration=Pf(e.duration),n.type="keyframes",n};function g3({keyframes:n,velocity:e=0,power:t=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:f}){const d=n[0],m={done:!1,value:d},v=I=>a!==void 0&&I<a||l!==void 0&&I>l,b=I=>a===void 0?l:l===void 0||Math.abs(a-I)<Math.abs(l-I)?a:l;let x=t*e;const w=d+x,_=o===void 0?w:o(w);_!==w&&(x=_-d);const A=I=>-x*Math.exp(-I/i),T=I=>_+A(I),E=I=>{const L=A(I),N=T(I);m.done=Math.abs(L)<=c,m.value=m.done?_:N};let C,R;const O=I=>{v(m.value)&&(C=I,R=jS({keyframes:[m.value,b(m.value)],velocity:vF(T,I,m.value),damping:r,stiffness:s,restDelta:c,restSpeed:f}))};return O(0),{calculatedDuration:null,next:I=>{let L=!1;return!R&&C===void 0&&(L=!0,E(I),O(I)),C!==void 0&&I>=C?R.next(I-C):(!L&&E(I),m)}}}function _j(n,e,t){const i=[],r=t||Ff.mix||mF,s=n.length-1;for(let o=0;o<s;o++){let a=r(n[o],n[o+1]);if(e){const l=Array.isArray(e)?e[o]||wl:e;a=$_(l,a)}i.push(a)}return i}function yF(n,e,{clamp:t=!0,ease:i,mixer:r}={}){const s=n.length;if(oO(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=n[0]===n[1];n[0]>n[s-1]&&(n=[...n].reverse(),e=[...e].reverse());const a=_j(e,i,r),l=a.length,c=f=>{if(o&&f<n[0])return e[0];let d=0;if(l>1)for(;d<n.length-2&&!(f<n[d+1]);d++);const m=s_(n[d],n[d+1],f);return a[d](m)};return t?f=>c(_u(n[0],n[s-1],f)):c}function xj(n,e){const t=n[n.length-1];for(let i=1;i<=e;i++){const r=s_(0,e,i);n.push(sr(t,1,r))}}function wj(n){const e=[0];return xj(e,n.length-1),e}function Sj(n,e){return n.map(t=>t*e)}function Ej(n,e){return n.map(()=>e||rF).splice(0,n.length-1)}function kb({duration:n=300,keyframes:e,times:t,ease:i="easeInOut"}){const r=U7(i)?i.map(MI):MI(i),s={done:!1,value:e[0]},o=Sj(t&&t.length===e.length?t:wj(e),n),a=yF(o,e,{ease:Array.isArray(r)?r:Ej(e,r)});return{calculatedDuration:n,next:l=>(s.value=a(l),s.done=l>=n,s)}}const Mj=n=>n!==null;function gO(n,{repeat:e,repeatType:t="loop"},i,r=1){const s=n.filter(Mj),a=r<0||e&&t!=="loop"&&e%2===1?0:s.length-1;return!a||i===void 0?s[a]:i}const Tj={decay:g3,inertia:g3,tween:kb,keyframes:kb,spring:jS};function bF(n){typeof n.type=="string"&&(n.type=Tj[n.type])}class vO{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const Aj=n=>n/100;class yO extends vO{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:t}=this.options;t&&t.updatedAt!==Do.now()&&this.tick(Do.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;bF(e);const{type:t=kb,repeat:i=0,repeatDelay:r=0,repeatType:s,velocity:o=0}=e;let{keyframes:a}=e;const l=t||kb;l!==kb&&typeof a[0]!="number"&&(this.mixKeyframes=$_(Aj,mF(a[0],a[1])),a=[0,100]);const c=l({...e,keyframes:a});s==="mirror"&&(this.mirroredGenerator=l({...e,keyframes:[...a].reverse(),velocity:-o})),c.calculatedDuration===null&&(c.calculatedDuration=mO(c));const{calculatedDuration:f}=c;this.calculatedDuration=f,this.resolvedDuration=f+r,this.totalDuration=this.resolvedDuration*(i+1)-r,this.generator=c}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:i,totalDuration:r,mixKeyframes:s,mirroredGenerator:o,resolvedDuration:a,calculatedDuration:l}=this;if(this.startTime===null)return i.next(0);const{delay:c=0,keyframes:f,repeat:d,repeatType:m,repeatDelay:v,type:b,onUpdate:x,finalKeyframe:w}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-r/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const _=this.currentTime-c*(this.playbackSpeed>=0?1:-1),A=this.playbackSpeed>=0?_<0:_>r;this.currentTime=Math.max(_,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=r);let T=this.currentTime,E=i;if(d){const I=Math.min(this.currentTime,r)/a;let L=Math.floor(I),N=I%1;!N&&I>=1&&(N=1),N===1&&L--,L=Math.min(L,d+1),L%2&&(m==="reverse"?(N=1-N,v&&(N-=v/a)):m==="mirror"&&(E=o)),T=_u(0,1,N)*a}const C=A?{done:!1,value:f[0]}:E.next(T);s&&(C.value=s(C.value));let{done:R}=C;!A&&l!==null&&(R=this.playbackSpeed>=0?this.currentTime>=r:this.currentTime<=0);const O=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&R);return O&&b!==g3&&(C.value=gO(f,this.options,w,this.speed)),x&&x(C.value),O&&this.finish(),C}then(e,t){return this.finished.then(e,t)}get duration(){return bl(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+bl(e)}get time(){return bl(this.currentTime)}set time(e){e=Pf(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Do.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=bl(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=fj,startTime:t}=this.options;this.driver||(this.driver=e(r=>this.tick(r))),this.options.onPlay?.();const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=t??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Do.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function Cj(n){for(let e=1;e<n.length;e++)n[e]??(n[e]=n[e-1])}const Vp=n=>n*180/Math.PI,v3=n=>{const e=Vp(Math.atan2(n[1],n[0]));return y3(e)},Rj={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:v3,rotateZ:v3,skewX:n=>Vp(Math.atan(n[1])),skewY:n=>Vp(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},y3=n=>(n=n%360,n<0&&(n+=360),n),LI=v3,PI=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),II=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),Dj={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:PI,scaleY:II,scale:n=>(PI(n)+II(n))/2,rotateX:n=>y3(Vp(Math.atan2(n[6],n[5]))),rotateY:n=>y3(Vp(Math.atan2(-n[2],n[0]))),rotateZ:LI,rotate:LI,skewX:n=>Vp(Math.atan(n[4])),skewY:n=>Vp(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function b3(n){return n.includes("scale")?1:0}function _3(n,e){if(!n||n==="none")return b3(e);const t=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,r;if(t)i=Dj,r=t;else{const a=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=Rj,r=a}if(!r)return b3(e);const s=i[e],o=r[1].split(",").map(Lj);return typeof s=="function"?s(o):o[s]}const Oj=(n,e)=>{const{transform:t="none"}=getComputedStyle(n);return _3(t,e)};function Lj(n){return parseFloat(n.trim())}const Y0=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Z0=new Set(Y0),NI=n=>n===X0||n===Ft,Pj=new Set(["x","y","z"]),Ij=Y0.filter(n=>!Pj.has(n));function Nj(n){const e=[];return Ij.forEach(t=>{const i=n.getValue(t);i!==void 0&&(e.push([t,i.get()]),i.set(t.startsWith("scale")?1:0))}),e}const od={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:(n,{transform:e})=>_3(e,"x"),y:(n,{transform:e})=>_3(e,"y")};od.translateX=od.x;od.translateY=od.y;const qp=new Set;let x3=!1,w3=!1,S3=!1;function _F(){if(w3){const n=Array.from(qp).filter(i=>i.needsMeasurement),e=new Set(n.map(i=>i.element)),t=new Map;e.forEach(i=>{const r=Nj(i);r.length&&(t.set(i,r),i.render())}),n.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const r=t.get(i);r&&r.forEach(([s,o])=>{i.getValue(s)?.set(o)})}),n.forEach(i=>i.measureEndState()),n.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}w3=!1,x3=!1,qp.forEach(n=>n.complete(S3)),qp.clear()}function xF(){qp.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(w3=!0)})}function Uj(){S3=!0,xF(),_F(),S3=!1}class bO{constructor(e,t,i,r,s,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=i,this.motionValue=r,this.element=s,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(qp.add(this),x3||(x3=!0,Ti.read(xF),Ti.resolveKeyframes(_F))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:i,motionValue:r}=this;if(e[0]===null){const s=r?.get(),o=e[e.length-1];if(s!==void 0)e[0]=s;else if(i&&t){const a=i.readValue(t,o);a!=null&&(e[0]=a)}e[0]===void 0&&(e[0]=o),r&&s===void 0&&r.set(e[0])}Cj(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),qp.delete(this)}cancel(){this.state==="scheduled"&&(qp.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const kj=n=>n.startsWith("--");function zj(n,e,t){kj(e)?n.style.setProperty(e,t):n.style[e]=t}const Fj=aO(()=>window.ScrollTimeline!==void 0),Bj={};function Vj(n,e){const t=aO(n);return()=>Bj[e]??t()}const wF=Vj(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Eb=([n,e,t,i])=>`cubic-bezier(${n}, ${e}, ${t}, ${i})`,UI={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Eb([0,.65,.55,1]),circOut:Eb([.55,0,1,.45]),backIn:Eb([.31,.01,.66,-.59]),backOut:Eb([.33,1.53,.69,.99])};function SF(n,e){if(n)return typeof n=="function"?wF()?gF(n,e):"ease-out":sF(n)?Eb(n):Array.isArray(n)?n.map(t=>SF(t,e)||UI.easeOut):UI[n]}function Gj(n,e,t,{delay:i=0,duration:r=300,repeat:s=0,repeatType:o="loop",ease:a="easeOut",times:l}={},c=void 0){const f={[e]:t};l&&(f.offset=l);const d=SF(a,r);Array.isArray(d)&&(f.easing=d);const m={delay:i,duration:r,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"};return c&&(m.pseudoElement=c),n.animate(f,m)}function EF(n){return typeof n=="function"&&"applyToOptions"in n}function Hj({type:n,...e}){return EF(n)&&wF()?n.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class jj extends vO{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!e)return;const{element:t,name:i,keyframes:r,pseudoElement:s,allowFlatten:o=!1,finalKeyframe:a,onComplete:l}=e;this.isPseudoElement=!!s,this.allowFlatten=o,this.options=e,oO(typeof e.type!="string");const c=Hj(e);this.animation=Gj(t,i,r,c,s),c.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const f=gO(r,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(f):zj(t,i,f),this.animation.cancel()}l?.(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){const e=this.options?.element;!this.isPseudoElement&&e?.isConnected&&this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return bl(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+bl(e)}get time(){return bl(Number(this.animation.currentTime)||0)}set time(e){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=Pf(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(e){this.manualStartTime=this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&Fj()?(this.animation.timeline=e,wl):t(this)}}const MF={anticipate:tF,backInOut:eF,circInOut:iF};function Wj(n){return n in MF}function $j(n){typeof n.ease=="string"&&Wj(n.ease)&&(n.ease=MF[n.ease])}const CA=10;class qj extends jj{constructor(e){$j(e),bF(e),super(e),e.startTime!==void 0&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:i,onComplete:r,element:s,...o}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const a=new yO({...o,autoplay:!1}),l=Math.max(CA,Do.now()-this.startTime),c=_u(0,CA,l-CA);t.setWithVelocity(a.sample(Math.max(0,l-c)).value,a.sample(l).value,c),a.stop()}}const kI=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(hd.test(n)||n==="0")&&!n.startsWith("url("));function Xj(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function Yj(n,e,t,i){const r=n[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const s=n[n.length-1],o=kI(r,e),a=kI(s,e);return!o||!a?!1:Xj(n)||(t==="spring"||EF(t))&&i}function E3(n){n.duration=0,n.type="keyframes"}const Zj=new Set(["opacity","clipPath","filter","transform"]),Kj=aO(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function Qj(n){const{motionValue:e,name:t,repeatDelay:i,repeatType:r,damping:s,type:o}=n;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=e.owner.getProps();return Kj()&&t&&Zj.has(t)&&(t!=="transform"||!c)&&!l&&!i&&r!=="mirror"&&s!==0&&o!=="inertia"}const Jj=40;class eW extends vO{constructor({autoplay:e=!0,delay:t=0,type:i="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:o="loop",keyframes:a,name:l,motionValue:c,element:f,...d}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Do.now();const m={autoplay:e,delay:t,type:i,repeat:r,repeatDelay:s,repeatType:o,name:l,motionValue:c,element:f,...d},v=f?.KeyframeResolver||bO;this.keyframeResolver=new v(a,(b,x,w)=>this.onKeyframesResolved(b,x,m,!w),l,c,f),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,t,i,r){this.keyframeResolver=void 0;const{name:s,type:o,velocity:a,delay:l,isHandoff:c,onUpdate:f}=i;this.resolvedAt=Do.now(),Yj(e,s,o,a)||((Ff.instantAnimations||!l)&&f?.(gO(e,i,t)),e[0]=e[e.length-1],E3(i),i.repeat=0);const m={startTime:r?this.resolvedAt?this.resolvedAt-this.createdAt>Jj?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...i,keyframes:e},v=!c&&Qj(m),b=m.motionValue?.owner?.current,x=v?new qj({...m,element:b}):new yO(m);x.finished.then(()=>{this.notifyFinished()}).catch(wl),this.pendingTimeline&&(this.stopTimeline=x.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=x}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),Uj()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}function TF(n,e,t,i=0,r=1){const s=Array.from(n).sort((c,f)=>c.sortNodePosition(f)).indexOf(e),o=n.size,a=(o-1)*i;return typeof t=="function"?t(s,o):r===1?s*i:a-s*i}const tW=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function nW(n){const e=tW.exec(n);if(!e)return[,];const[,t,i,r]=e;return[`--${t??i}`,r]}function AF(n,e,t=1){const[i,r]=nW(n);if(!i)return;const s=window.getComputedStyle(e).getPropertyValue(i);if(s){const o=s.trim();return $4(o)?parseFloat(o):o}return fO(r)?AF(r,e,t+1):r}const iW={type:"spring",stiffness:500,damping:25,restSpeed:10},rW=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),sW={type:"keyframes",duration:.8},oW={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},aW=(n,{keyframes:e})=>e.length>2?sW:Z0.has(n)?n.startsWith("scale")?rW(e[1]):iW:oW,lW=n=>n!==null;function cW(n,{repeat:e,repeatType:t="loop"},i){const r=n.filter(lW),s=e&&t!=="loop"&&e%2===1?0:r.length-1;return r[s]}function _O(n,e){return n?.[e]??n?.default??n}function uW({when:n,delay:e,delayChildren:t,staggerChildren:i,staggerDirection:r,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:c,...f}){return!!Object.keys(f).length}const xO=(n,e,t,i={},r,s)=>o=>{const a=_O(i,n)||{},l=a.delay||i.delay||0;let{elapsed:c=0}=i;c=c-Pf(l);const f={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:m=>{e.set(m),a.onUpdate&&a.onUpdate(m)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:n,motionValue:e,element:s?void 0:r};uW(a)||Object.assign(f,aW(n,f)),f.duration&&(f.duration=Pf(f.duration)),f.repeatDelay&&(f.repeatDelay=Pf(f.repeatDelay)),f.from!==void 0&&(f.keyframes[0]=f.from);let d=!1;if((f.type===!1||f.duration===0&&!f.repeatDelay)&&(E3(f),f.delay===0&&(d=!0)),(Ff.instantAnimations||Ff.skipAnimations||r?.shouldSkipAnimations)&&(d=!0,E3(f),f.delay=0),f.allowFlatten=!a.type&&!a.ease,d&&!s&&e.get()!==void 0){const m=cW(f.keyframes,a);if(m!==void 0){Ti.update(()=>{f.onUpdate(m),f.onComplete()});return}}return a.isSync?new yO(f):new eW(f)};function zI(n){const e=[{},{}];return n?.values.forEach((t,i)=>{e[0][i]=t.get(),e[1][i]=t.getVelocity()}),e}function wO(n,e,t,i){if(typeof e=="function"){const[r,s]=zI(i);e=e(t!==void 0?t:n.custom,r,s)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[r,s]=zI(i);e=e(t!==void 0?t:n.custom,r,s)}return e}function v0(n,e,t){const i=n.getProps();return wO(i,e,t!==void 0?t:i.custom,n)}const CF=new Set(["width","height","top","left","right","bottom",...Y0]),FI=30,fW=n=>!isNaN(parseFloat(n)),zb={current:void 0};class hW{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=i=>{const r=Do.now();if(this.updatedAt!==r&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const s of this.dependents)s.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=Do.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=fW(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new lO);const i=this.events[e].add(t);return e==="change"?()=>{i(),Ti.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,i){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return zb.current&&zb.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=Do.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>FI)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,FI);return Y4(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function im(n,e){return new hW(n,e)}const M3=n=>Array.isArray(n);function dW(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,im(t))}function pW(n){return M3(n)?n[n.length-1]||0:n}function mW(n,e){const t=v0(n,e);let{transitionEnd:i={},transition:r={},...s}=t||{};s={...s,...i};for(const o in s){const a=pW(s[o]);dW(n,o,a)}}const to=n=>!!(n&&n.getVelocity);function gW(n){return!!(to(n)&&n.add)}function T3(n,e){const t=n.getValue("willChange");if(gW(t))return t.add(e);if(!t&&Ff.WillChange){const i=new Ff.WillChange("auto");n.addValue("willChange",i),i.add(e)}}function SO(n){return n.replace(/([A-Z])/g,e=>`-${e.toLowerCase()}`)}const vW="framerAppearId",RF="data-"+SO(vW);function DF(n){return n.props[RF]}function yW({protectedKeys:n,needsAnimating:e},t){const i=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,i}function OF(n,e,{delay:t=0,transitionOverride:i,type:r}={}){let{transition:s=n.getDefaultTransition(),transitionEnd:o,...a}=e;const l=s?.reduceMotion;i&&(s=i);const c=[],f=r&&n.animationState&&n.animationState.getState()[r];for(const d in a){const m=n.getValue(d,n.latestValues[d]??null),v=a[d];if(v===void 0||f&&yW(f,d))continue;const b={delay:t,..._O(s||{},d)},x=m.get();if(x!==void 0&&!m.isAnimating&&!Array.isArray(v)&&v===x&&!b.velocity)continue;let w=!1;if(window.MotionHandoffAnimation){const T=DF(n);if(T){const E=window.MotionHandoffAnimation(T,d,Ti);E!==null&&(b.startTime=E,w=!0)}}T3(n,d);const _=l??n.shouldReduceMotion;m.start(xO(d,m,v,_&&CF.has(d)?{type:!1}:b,n,w));const A=m.animation;A&&c.push(A)}return o&&Promise.all(c).then(()=>{Ti.update(()=>{o&&mW(n,o)})}),c}function A3(n,e,t={}){const i=v0(n,e,t.type==="exit"?n.presenceContext?.custom:void 0);let{transition:r=n.getDefaultTransition()||{}}=i||{};t.transitionOverride&&(r=t.transitionOverride);const s=i?()=>Promise.all(OF(n,i,t)):()=>Promise.resolve(),o=n.variantChildren&&n.variantChildren.size?(l=0)=>{const{delayChildren:c=0,staggerChildren:f,staggerDirection:d}=r;return bW(n,e,l,c,f,d,t)}:()=>Promise.resolve(),{when:a}=r;if(a){const[l,c]=a==="beforeChildren"?[s,o]:[o,s];return l().then(()=>c())}else return Promise.all([s(),o(t.delay)])}function bW(n,e,t=0,i=0,r=0,s=1,o){const a=[];for(const l of n.variantChildren)l.notify("AnimationStart",e),a.push(A3(l,e,{...o,delay:t+(typeof i=="function"?0:i)+TF(n.variantChildren,l,i,r,s)}).then(()=>l.notify("AnimationComplete",e)));return Promise.all(a)}function _W(n,e,t={}){n.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(s=>A3(n,s,t));i=Promise.all(r)}else if(typeof e=="string")i=A3(n,e,t);else{const r=typeof e=="function"?v0(n,e,t.custom):e;i=Promise.all(OF(n,r,t))}return i.then(()=>{n.notify("AnimationComplete",e)})}const xW={test:n=>n==="auto",parse:n=>n},LF=n=>e=>e.test(n),PF=[X0,Ft,pu,Qh,Y7,X7,xW],BI=n=>PF.find(LF(n));function wW(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||X4(n):!0}const SW=new Set(["brightness","contrast","saturate","opacity"]);function EW(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[i]=t.match(hO)||[];if(!i)return n;const r=t.replace(i,"");let s=SW.has(e)?1:0;return i!==t&&(s*=100),e+"("+s+r+")"}const MW=/\b([a-z-]*)\(.*?\)/gu,C3={...hd,getAnimatableNone:n=>{const e=n.match(MW);return e?e.map(EW).join(" "):n}},VI={...X0,transform:Math.round},TW={rotate:Qh,rotateX:Qh,rotateY:Qh,rotateZ:Qh,scale:q1,scaleX:q1,scaleY:q1,scaleZ:q1,skew:Qh,skewX:Qh,skewY:Qh,distance:Ft,translateX:Ft,translateY:Ft,translateZ:Ft,x:Ft,y:Ft,z:Ft,perspective:Ft,transformPerspective:Ft,opacity:o_,originX:AI,originY:AI,originZ:Ft},EO={borderWidth:Ft,borderTopWidth:Ft,borderRightWidth:Ft,borderBottomWidth:Ft,borderLeftWidth:Ft,borderRadius:Ft,borderTopLeftRadius:Ft,borderTopRightRadius:Ft,borderBottomRightRadius:Ft,borderBottomLeftRadius:Ft,width:Ft,maxWidth:Ft,height:Ft,maxHeight:Ft,top:Ft,right:Ft,bottom:Ft,left:Ft,inset:Ft,insetBlock:Ft,insetBlockStart:Ft,insetBlockEnd:Ft,insetInline:Ft,insetInlineStart:Ft,insetInlineEnd:Ft,padding:Ft,paddingTop:Ft,paddingRight:Ft,paddingBottom:Ft,paddingLeft:Ft,paddingBlock:Ft,paddingBlockStart:Ft,paddingBlockEnd:Ft,paddingInline:Ft,paddingInlineStart:Ft,paddingInlineEnd:Ft,margin:Ft,marginTop:Ft,marginRight:Ft,marginBottom:Ft,marginLeft:Ft,marginBlock:Ft,marginBlockStart:Ft,marginBlockEnd:Ft,marginInline:Ft,marginInlineStart:Ft,marginInlineEnd:Ft,fontSize:Ft,backgroundPositionX:Ft,backgroundPositionY:Ft,...TW,zIndex:VI,fillOpacity:o_,strokeOpacity:o_,numOctaves:VI},AW={...EO,color:kr,backgroundColor:kr,outlineColor:kr,fill:kr,stroke:kr,borderColor:kr,borderTopColor:kr,borderRightColor:kr,borderBottomColor:kr,borderLeftColor:kr,filter:C3,WebkitFilter:C3},IF=n=>AW[n];function NF(n,e){let t=IF(n);return t!==C3&&(t=hd),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const CW=new Set(["auto","none","0"]);function RW(n,e,t){let i=0,r;for(;i<n.length&&!r;){const s=n[i];typeof s=="string"&&!CW.has(s)&&a_(s).values.length&&(r=n[i]),i++}if(r&&t)for(const s of e)n[s]=NF(t,r)}class DW extends bO{constructor(e,t,i,r,s){super(e,t,i,r,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:i}=this;if(!t||!t.current)return;super.readKeyframes();for(let f=0;f<e.length;f++){let d=e[f];if(typeof d=="string"&&(d=d.trim(),fO(d))){const m=AF(d,t.current);m!==void 0&&(e[f]=m),f===e.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!CF.has(i)||e.length!==2)return;const[r,s]=e,o=BI(r),a=BI(s),l=TI(r),c=TI(s);if(l!==c&&od[i]){this.needsMeasurement=!0;return}if(o!==a)if(NI(o)&&NI(a))for(let f=0;f<e.length;f++){const d=e[f];typeof d=="string"&&(e[f]=parseFloat(d))}else od[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,i=[];for(let r=0;r<e.length;r++)(e[r]===null||wW(e[r]))&&i.push(r);i.length&&RW(e,i,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=od[i](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const r=t[t.length-1];r!==void 0&&e.getValue(i,r).jump(r,!1)}measureEndState(){const{element:e,name:t,unresolvedKeyframes:i}=this;if(!e||!e.current)return;const r=e.getValue(t);r&&r.jump(this.measuredOrigin,!1);const s=i.length-1,o=i[s];i[s]=od[t](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),this.removedTransforms?.length&&this.removedTransforms.forEach(([a,l])=>{e.getValue(a).set(l)}),this.resolveNoneKeyframes()}}function OW(n,e,t){if(n==null)return[];if(n instanceof EventTarget)return[n];if(typeof n=="string"){let i=document;const r=t?.[n]??i.querySelectorAll(n);return r?Array.from(r):[]}return Array.from(n).filter(i=>i!=null)}const UF=(n,e)=>e&&typeof n=="number"?e.transform(n):n;function R3(n){return q4(n)&&"offsetHeight"in n}const{schedule:MO}=oF(queueMicrotask,!1),nc={x:!1,y:!1};function kF(){return nc.x||nc.y}function LW(n){return n==="x"||n==="y"?nc[n]?null:(nc[n]=!0,()=>{nc[n]=!1}):nc.x||nc.y?null:(nc.x=nc.y=!0,()=>{nc.x=nc.y=!1})}function zF(n,e){const t=OW(n),i=new AbortController,r={passive:!0,...e,signal:i.signal};return[t,r,()=>i.abort()]}function GI(n){return!(n.pointerType==="touch"||kF())}function PW(n,e,t={}){const[i,r,s]=zF(n,t),o=a=>{if(!GI(a))return;const{target:l}=a,c=e(l,a);if(typeof c!="function"||!l)return;const f=d=>{GI(d)&&(c(d),l.removeEventListener("pointerleave",f))};l.addEventListener("pointerleave",f,r)};return i.forEach(a=>{a.addEventListener("pointerenter",o,r)}),s}const FF=(n,e)=>e?n===e?!0:FF(n,e.parentElement):!1,TO=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,IW=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function NW(n){return IW.has(n.tagName)||n.isContentEditable===!0}const UW=new Set(["INPUT","SELECT","TEXTAREA"]);function kW(n){return UW.has(n.tagName)||n.isContentEditable===!0}const wS=new WeakSet;function HI(n){return e=>{e.key==="Enter"&&n(e)}}function RA(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const zW=(n,e)=>{const t=n.currentTarget;if(!t)return;const i=HI(()=>{if(wS.has(t))return;RA(t,"down");const r=HI(()=>{RA(t,"up")}),s=()=>RA(t,"cancel");t.addEventListener("keyup",r,e),t.addEventListener("blur",s,e)});t.addEventListener("keydown",i,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",i),e)};function jI(n){return TO(n)&&!kF()}function FW(n,e,t={}){const[i,r,s]=zF(n,t),o=a=>{const l=a.currentTarget;if(!jI(a))return;wS.add(l);const c=e(l,a),f=(v,b)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",m),wS.has(l)&&wS.delete(l),jI(v)&&typeof c=="function"&&c(v,{success:b})},d=v=>{f(v,l===window||l===document||t.useGlobalTarget||FF(l,v.target))},m=v=>{f(v,!1)};window.addEventListener("pointerup",d,r),window.addEventListener("pointercancel",m,r)};return i.forEach(a=>{(t.useGlobalTarget?window:a).addEventListener("pointerdown",o,r),R3(a)&&(a.addEventListener("focus",c=>zW(c,r)),!NW(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),s}function BF(n){return q4(n)&&"ownerSVGElement"in n}function BW(n){return BF(n)&&n.tagName==="svg"}function VW(...n){const e=!Array.isArray(n[0]),t=e?0:-1,i=n[0+t],r=n[1+t],s=n[2+t],o=n[3+t],a=yF(r,s,o);return e?a(i):a}const GW=[...PF,kr,hd],HW=n=>GW.find(LF(n)),WI=()=>({translate:0,scale:1,origin:0,originPoint:0}),a0=()=>({x:WI(),y:WI()}),$I=()=>({min:0,max:0}),Kr=()=>({x:$I(),y:$I()}),D3={current:null},VF={current:!1},jW=typeof window<"u";function WW(){if(VF.current=!0,!!jW)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>D3.current=n.matches;n.addEventListener("change",e),e()}else D3.current=!1}const $W=new WeakMap;function EM(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function l_(n){return typeof n=="string"||Array.isArray(n)}const AO=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],CO=["initial",...AO];function MM(n){return EM(n.animate)||CO.some(e=>l_(n[e]))}function GF(n){return!!(MM(n)||n.variants)}function qW(n,e,t){for(const i in e){const r=e[i],s=t[i];if(to(r))n.addValue(i,r);else if(to(s))n.addValue(i,im(r,{owner:n}));else if(s!==r)if(n.hasValue(i)){const o=n.getValue(i);o.liveStyle===!0?o.jump(r):o.hasAnimated||o.set(r)}else{const o=n.getStaticValue(i);n.addValue(i,im(o!==void 0?o:r,{owner:n}))}}for(const i in t)e[i]===void 0&&n.removeValue(i);return e}const qI=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let WS={};function HF(n){WS=n}function XW(){return WS}class YW{scrapeMotionValuesFromProps(e,t,i){return{}}constructor({parent:e,props:t,presenceContext:i,reducedMotionConfig:r,skipAnimations:s,blockInitialAnimation:o,visualState:a},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.shouldSkipAnimations=!1,this.values=new Map,this.KeyframeResolver=bO,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const v=Do.now();this.renderScheduledAt<v&&(this.renderScheduledAt=v,Ti.render(this.render,!1,!0))};const{latestValues:c,renderState:f}=a;this.latestValues=c,this.baseTarget={...c},this.initialValues=t.initial?{...c}:{},this.renderState=f,this.parent=e,this.props=t,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.skipAnimationsConfig=s,this.options=l,this.blockInitialAnimation=!!o,this.isControllingVariants=MM(t),this.isVariantNode=GF(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...m}=this.scrapeMotionValuesFromProps(t,{},this);for(const v in m){const b=m[v];c[v]!==void 0&&to(b)&&b.set(c[v])}}mount(e){this.current=e,$W.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,i)=>this.bindToMotionValue(i,t)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(VF.current||WW(),this.shouldReduceMotion=D3.current),this.shouldSkipAnimations=this.skipAnimationsConfig??!1,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Bf(this.notifyUpdate),Bf(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=Z0.has(e);i&&this.onBindTransform&&this.onBindTransform();const r=t.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Ti.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;typeof window<"u"&&window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{r(),s&&s(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in WS){const t=WS[e];if(!t)continue;const{isEnabled:i,Feature:r}=t;if(!this.features[e]&&r&&i(this.props)&&(this.features[e]=new r(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Kr()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let i=0;i<qI.length;i++){const r=qI[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const s="on"+r,o=e[s];o&&(this.propEventSubscriptions[r]=this.on(r,o))}this.prevMotionValues=qW(this,this.scrapeMotionValuesFromProps(e,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const i=this.values.get(e);t!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&t!==void 0&&(i=im(t===null?void 0:t,{owner:this}),this.addValue(e,i)),i}readValue(e,t){let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&($4(i)||X4(i))?i=parseFloat(i):!HW(i)&&hd.test(t)&&(i=NF(e,t)),this.setBaseTarget(e,to(i)?i.get():i)),to(i)?i.get():i}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){const{initial:t}=this.props;let i;if(typeof t=="string"||typeof t=="object"){const s=wO(this.props,t,this.presenceContext?.custom);s&&(i=s[e])}if(t&&i!==void 0)return i;const r=this.getBaseTargetFromProps(this.props,e);return r!==void 0&&!to(r)?r:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new lO),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){MO.render(this.render)}}class jF extends YW{constructor(){super(...arguments),this.KeyframeResolver=DW}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){const i=e.style;return i?i[t]:void 0}removeValueFromRenderState(e,{vars:t,style:i}){delete t[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;to(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}class bd{constructor(e){this.isMounted=!1,this.node=e}update(){}}function WF({top:n,left:e,right:t,bottom:i}){return{x:{min:e,max:t},y:{min:n,max:i}}}function ZW({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function KW(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),i=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:i.y,right:i.x}}function DA(n){return n===void 0||n===1}function O3({scale:n,scaleX:e,scaleY:t}){return!DA(n)||!DA(e)||!DA(t)}function Dp(n){return O3(n)||$F(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function $F(n){return XI(n.x)||XI(n.y)}function XI(n){return n&&n!=="0%"}function $S(n,e,t){const i=n-t,r=e*i;return t+r}function YI(n,e,t,i,r){return r!==void 0&&(n=$S(n,r,i)),$S(n,t,i)+e}function L3(n,e=0,t=1,i,r){n.min=YI(n.min,e,t,i,r),n.max=YI(n.max,e,t,i,r)}function qF(n,{x:e,y:t}){L3(n.x,e.translate,e.scale,e.originPoint),L3(n.y,t.translate,t.scale,t.originPoint)}const ZI=.999999999999,KI=1.0000000000001;function QW(n,e,t,i=!1){const r=t.length;if(!r)return;e.x=e.y=1;let s,o;for(let a=0;a<r;a++){s=t[a],o=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(i&&s.options.layoutScroll&&s.scroll&&s!==s.root&&c0(n,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,qF(n,o)),i&&Dp(s.latestValues)&&c0(n,s.latestValues))}e.x<KI&&e.x>ZI&&(e.x=1),e.y<KI&&e.y>ZI&&(e.y=1)}function l0(n,e){n.min=n.min+e,n.max=n.max+e}function QI(n,e,t,i,r=.5){const s=sr(n.min,n.max,r);L3(n,e,t,s,i)}function c0(n,e){QI(n.x,e.x,e.scaleX,e.scale,e.originX),QI(n.y,e.y,e.scaleY,e.scale,e.originY)}function XF(n,e){return WF(KW(n.getBoundingClientRect(),e))}function JW(n,e,t){const i=XF(n,t),{scroll:r}=e;return r&&(l0(i.x,r.offset.x),l0(i.y,r.offset.y)),i}const e$={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},t$=Y0.length;function n$(n,e,t){let i="",r=!0;for(let s=0;s<t$;s++){const o=Y0[s],a=n[o];if(a===void 0)continue;let l=!0;if(typeof a=="number")l=a===(o.startsWith("scale")?1:0);else{const c=parseFloat(a);l=o.startsWith("scale")?c===1:c===0}if(!l||t){const c=UF(a,EO[o]);if(!l){r=!1;const f=e$[o]||o;i+=`${f}(${c}) `}t&&(e[o]=c)}}return i=i.trim(),t?i=t(e,r?"":i):r&&(i="none"),i}function RO(n,e,t){const{style:i,vars:r,transformOrigin:s}=n;let o=!1,a=!1;for(const l in e){const c=e[l];if(Z0.has(l)){o=!0;continue}else if(lF(l)){r[l]=c;continue}else{const f=UF(c,EO[l]);l.startsWith("origin")?(a=!0,s[l]=f):i[l]=f}}if(e.transform||(o||t?i.transform=n$(e,n.transform,t):i.transform&&(i.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:f=0}=s;i.transformOrigin=`${l} ${c} ${f}`}}function YF(n,{style:e,vars:t},i,r){const s=n.style;let o;for(o in e)s[o]=e[o];r?.applyProjectionStyles(s,i);for(o in t)s.setProperty(o,t[o])}function JI(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Ny={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(Ft.test(n))n=parseFloat(n);else return n;const t=JI(n,e.target.x),i=JI(n,e.target.y);return`${t}% ${i}%`}},i$={correct:(n,{treeScale:e,projectionDelta:t})=>{const i=n,r=hd.parse(n);if(r.length>5)return i;const s=hd.createTransformer(n),o=typeof r[0]!="number"?1:0,a=t.x.scale*e.x,l=t.y.scale*e.y;r[0+o]/=a,r[1+o]/=l;const c=sr(a,l,.5);return typeof r[2+o]=="number"&&(r[2+o]/=c),typeof r[3+o]=="number"&&(r[3+o]/=c),s(r)}},P3={borderRadius:{...Ny,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ny,borderTopRightRadius:Ny,borderBottomLeftRadius:Ny,borderBottomRightRadius:Ny,boxShadow:i$};function ZF(n,{layout:e,layoutId:t}){return Z0.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!P3[n]||n==="opacity")}function DO(n,e,t){const i=n.style,r=e?.style,s={};if(!i)return s;for(const o in i)(to(i[o])||r&&to(r[o])||ZF(o,n)||t?.getValue(o)?.liveStyle!==void 0)&&(s[o]=i[o]);return s}function r$(n){return window.getComputedStyle(n)}class s$ extends jF{constructor(){super(...arguments),this.type="html",this.renderInstance=YF}readValueFromInstance(e,t){if(Z0.has(t))return this.projection?.isProjecting?b3(t):Oj(e,t);{const i=r$(e),r=(lF(t)?i.getPropertyValue(t):i[t])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:t}){return XF(e,t)}build(e,t,i){RO(e,t,i.transformTemplate)}scrapeMotionValuesFromProps(e,t,i){return DO(e,t,i)}}const o$={offset:"stroke-dashoffset",array:"stroke-dasharray"},a$={offset:"strokeDashoffset",array:"strokeDasharray"};function l$(n,e,t=1,i=0,r=!0){n.pathLength=1;const s=r?o$:a$;n[s.offset]=`${-i}`,n[s.array]=`${e} ${t}`}const c$=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function KF(n,{attrX:e,attrY:t,attrScale:i,pathLength:r,pathSpacing:s=1,pathOffset:o=0,...a},l,c,f){if(RO(n,a,c),l){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:d,style:m}=n;d.transform&&(m.transform=d.transform,delete d.transform),(m.transform||d.transformOrigin)&&(m.transformOrigin=d.transformOrigin??"50% 50%",delete d.transformOrigin),m.transform&&(m.transformBox=f?.transformBox??"fill-box",delete d.transformBox);for(const v of c$)d[v]!==void 0&&(m[v]=d[v],delete d[v]);e!==void 0&&(d.x=e),t!==void 0&&(d.y=t),i!==void 0&&(d.scale=i),r!==void 0&&l$(d,r,s,o,!1)}const QF=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),JF=n=>typeof n=="string"&&n.toLowerCase()==="svg";function u$(n,e,t,i){YF(n,e,void 0,i);for(const r in e.attrs)n.setAttribute(QF.has(r)?r:SO(r),e.attrs[r])}function eB(n,e,t){const i=DO(n,e,t);for(const r in n)if(to(n[r])||to(e[r])){const s=Y0.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;i[s]=n[r]}return i}class f$ extends jF{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Kr}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Z0.has(t)){const i=IF(t);return i&&i.default||0}return t=QF.has(t)?t:SO(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,i){return eB(e,t,i)}build(e,t,i){KF(e,t,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(e,t,i,r){u$(e,t,i,r)}mount(e){this.isSVGTag=JF(e.tagName),super.mount(e)}}const h$=CO.length;function tB(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?tB(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<h$;t++){const i=CO[t],r=n.props[i];(l_(r)||r===!1)&&(e[i]=r)}return e}function nB(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let i=0;i<t;i++)if(e[i]!==n[i])return!1;return!0}const d$=[...AO].reverse(),p$=AO.length;function m$(n){return e=>Promise.all(e.map(({animation:t,options:i})=>_W(n,t,i)))}function g$(n){let e=m$(n),t=eN(),i=!0;const r=l=>(c,f)=>{const d=v0(n,f,l==="exit"?n.presenceContext?.custom:void 0);if(d){const{transition:m,transitionEnd:v,...b}=d;c={...c,...b,...v}}return c};function s(l){e=l(n)}function o(l){const{props:c}=n,f=tB(n.parent)||{},d=[],m=new Set;let v={},b=1/0;for(let w=0;w<p$;w++){const _=d$[w],A=t[_],T=c[_]!==void 0?c[_]:f[_],E=l_(T),C=_===l?A.isActive:null;C===!1&&(b=w);let R=T===f[_]&&T!==c[_]&&E;if(R&&i&&n.manuallyAnimateOnMount&&(R=!1),A.protectedKeys={...v},!A.isActive&&C===null||!T&&!A.prevProp||EM(T)||typeof T=="boolean")continue;const O=v$(A.prevProp,T);let I=O||_===l&&A.isActive&&!R&&E||w>b&&E,L=!1;const N=Array.isArray(T)?T:[T];let V=N.reduce(r(_),{});C===!1&&(V={});const{prevResolvedValues:B={}}=A,k={...B,...V},j=G=>{I=!0,m.has(G)&&(L=!0,m.delete(G)),A.needsAnimating[G]=!0;const K=n.getValue(G);K&&(K.liveStyle=!1)};for(const G in k){const K=V[G],te=B[G];if(v.hasOwnProperty(G))continue;let ie=!1;M3(K)&&M3(te)?ie=!nB(K,te):ie=K!==te,ie?K!=null?j(G):m.add(G):K!==void 0&&m.has(G)?j(G):A.protectedKeys[G]=!0}A.prevProp=T,A.prevResolvedValues=V,A.isActive&&(v={...v,...V}),i&&n.blockInitialAnimation&&(I=!1);const q=R&&O;I&&(!q||L)&&d.push(...N.map(G=>{const K={type:_};if(typeof G=="string"&&i&&!q&&n.manuallyAnimateOnMount&&n.parent){const{parent:te}=n,ie=v0(te,G);if(te.enteringChildren&&ie){const{delayChildren:F}=ie.transition||{};K.delay=TF(te.enteringChildren,n,F)}}return{animation:G,options:K}}))}if(m.size){const w={};if(typeof c.initial!="boolean"){const _=v0(n,Array.isArray(c.initial)?c.initial[0]:c.initial);_&&_.transition&&(w.transition=_.transition)}m.forEach(_=>{const A=n.getBaseTarget(_),T=n.getValue(_);T&&(T.liveStyle=!0),w[_]=A??null}),d.push({animation:w})}let x=!!d.length;return i&&(c.initial===!1||c.initial===c.animate)&&!n.manuallyAnimateOnMount&&(x=!1),i=!1,x?e(d):Promise.resolve()}function a(l,c){if(t[l].isActive===c)return Promise.resolve();n.variantChildren?.forEach(d=>d.animationState?.setActive(l,c)),t[l].isActive=c;const f=o(l);for(const d in t)t[d].protectedKeys={};return f}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>t,reset:()=>{t=eN()}}}function v$(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!nB(e,n):!1}function cp(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function eN(){return{animate:cp(!0),whileInView:cp(),whileHover:cp(),whileTap:cp(),whileDrag:cp(),whileFocus:cp(),exit:cp()}}function tN(n,e){n.min=e.min,n.max=e.max}function ql(n,e){tN(n.x,e.x),tN(n.y,e.y)}function nN(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}const iB=1e-4,y$=1-iB,b$=1+iB,rB=.01,_$=0-rB,x$=0+rB;function Oo(n){return n.max-n.min}function w$(n,e,t){return Math.abs(n-e)<=t}function iN(n,e,t,i=.5){n.origin=i,n.originPoint=sr(e.min,e.max,n.origin),n.scale=Oo(t)/Oo(e),n.translate=sr(t.min,t.max,n.origin)-n.originPoint,(n.scale>=y$&&n.scale<=b$||isNaN(n.scale))&&(n.scale=1),(n.translate>=_$&&n.translate<=x$||isNaN(n.translate))&&(n.translate=0)}function Fb(n,e,t,i){iN(n.x,e.x,t.x,i?i.originX:void 0),iN(n.y,e.y,t.y,i?i.originY:void 0)}function rN(n,e,t){n.min=t.min+e.min,n.max=n.min+Oo(e)}function S$(n,e,t){rN(n.x,e.x,t.x),rN(n.y,e.y,t.y)}function sN(n,e,t){n.min=e.min-t.min,n.max=n.min+Oo(e)}function qS(n,e,t){sN(n.x,e.x,t.x),sN(n.y,e.y,t.y)}function oN(n,e,t,i,r){return n-=e,n=$S(n,1/t,i),r!==void 0&&(n=$S(n,1/r,i)),n}function E$(n,e=0,t=1,i=.5,r,s=n,o=n){if(pu.test(e)&&(e=parseFloat(e),e=sr(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=sr(s.min,s.max,i);n===s&&(a-=e),n.min=oN(n.min,e,t,a,r),n.max=oN(n.max,e,t,a,r)}function aN(n,e,[t,i,r],s,o){E$(n,e[t],e[i],e[r],e.scale,s,o)}const M$=["x","scaleX","originX"],T$=["y","scaleY","originY"];function lN(n,e,t,i){aN(n.x,e,M$,t?t.x:void 0,i?i.x:void 0),aN(n.y,e,T$,t?t.y:void 0,i?i.y:void 0)}function cN(n){return n.translate===0&&n.scale===1}function sB(n){return cN(n.x)&&cN(n.y)}function uN(n,e){return n.min===e.min&&n.max===e.max}function A$(n,e){return uN(n.x,e.x)&&uN(n.y,e.y)}function fN(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function oB(n,e){return fN(n.x,e.x)&&fN(n.y,e.y)}function hN(n){return Oo(n.x)/Oo(n.y)}function dN(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}function pl(n){return[n("x"),n("y")]}function C$(n,e,t){let i="";const r=n.x.translate/e.x,s=n.y.translate/e.y,o=t?.z||0;if((r||s||o)&&(i=`translate3d(${r}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:c,rotate:f,rotateX:d,rotateY:m,skewX:v,skewY:b}=t;c&&(i=`perspective(${c}px) ${i}`),f&&(i+=`rotate(${f}deg) `),d&&(i+=`rotateX(${d}deg) `),m&&(i+=`rotateY(${m}deg) `),v&&(i+=`skewX(${v}deg) `),b&&(i+=`skewY(${b}deg) `)}const a=n.x.scale*e.x,l=n.y.scale*e.y;return(a!==1||l!==1)&&(i+=`scale(${a}, ${l})`),i||"none"}const aB=["TopLeft","TopRight","BottomLeft","BottomRight"],R$=aB.length,pN=n=>typeof n=="string"?parseFloat(n):n,mN=n=>typeof n=="number"||Ft.test(n);function D$(n,e,t,i,r,s){r?(n.opacity=sr(0,t.opacity??1,O$(i)),n.opacityExit=sr(e.opacity??1,0,L$(i))):s&&(n.opacity=sr(e.opacity??1,t.opacity??1,i));for(let o=0;o<R$;o++){const a=`border${aB[o]}Radius`;let l=gN(e,a),c=gN(t,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||mN(l)===mN(c)?(n[a]=Math.max(sr(pN(l),pN(c),i),0),(pu.test(c)||pu.test(l))&&(n[a]+="%")):n[a]=c}(e.rotate||t.rotate)&&(n.rotate=sr(e.rotate||0,t.rotate||0,i))}function gN(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const O$=lB(0,.5,nF),L$=lB(.5,.95,wl);function lB(n,e,t){return i=>i<n?0:i>e?1:t(s_(n,e,i))}function P$(n,e,t){const i=to(n)?n:im(n);return i.start(xO("",i,e,t)),i.animation}function c_(n,e,t,i={passive:!0}){return n.addEventListener(e,t,i),()=>n.removeEventListener(e,t)}const I$=(n,e)=>n.depth-e.depth;class N${constructor(){this.children=[],this.isDirty=!1}add(e){rO(this.children,e),this.isDirty=!0}remove(e){sO(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(I$),this.isDirty=!1,this.children.forEach(e)}}function U$(n,e){const t=Do.now(),i=({timestamp:r})=>{const s=r-t;s>=e&&(Bf(i),n(s-e))};return Ti.setup(i,!0),()=>Bf(i)}function SS(n){return to(n)?n.get():n}class k${constructor(){this.members=[]}add(e){rO(this.members,e),e.scheduleRender()}remove(e){if(sO(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(r=>e===r);if(t===0)return!1;let i;for(let r=t;r>=0;r--){const s=this.members[r];if(s.isPresent!==!1){i=s;break}}return i?(this.promote(i),!0):!1}promote(e,t){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender();const r=i.options.layoutDependency,s=e.options.layoutDependency;r!==void 0&&s!==void 0&&r===s||(e.resumeFrom=i,t&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0));const{crossfade:a}=e.options;a===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:i}=e;t.onExitComplete&&t.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const ES={hasAnimatedSinceResize:!0,hasEverUpdated:!1},OA=["","X","Y","Z"],z$=1e3;let F$=0;function LA(n,e,t,i){const{latestValues:r}=e;r[n]&&(t[n]=r[n],e.setStaticValue(n,0),i&&(i[n]=0))}function cB(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=DF(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:r,layoutId:s}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",Ti,!(r||s))}const{parent:i}=n;i&&!i.hasCheckedOptimisedAppear&&cB(i)}function uB({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(o={},a=e?.()){this.id=F$++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(G$),this.nodes.forEach($$),this.nodes.forEach(q$),this.nodes.forEach(H$)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new N$)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new lO),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=BF(o)&&!BW(o),this.instance=o;const{layoutId:a,layout:l,visualElement:c}=this.options;if(c&&!c.current&&c.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||a)&&(this.isLayoutDirty=!0),n){let f,d=0;const m=()=>this.root.updateBlockedByResize=!1;Ti.read(()=>{d=window.innerWidth}),n(o,()=>{const v=window.innerWidth;v!==d&&(d=v,this.root.updateBlockedByResize=!0,f&&f(),f=U$(m,250),ES.hasAnimatedSinceResize&&(ES.hasAnimatedSinceResize=!1,this.nodes.forEach(bN)))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&c&&(a||l)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:d,hasRelativeLayoutChanged:m,layout:v})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const b=this.options.transition||c.getDefaultTransition()||Q$,{onLayoutAnimationStart:x,onLayoutAnimationComplete:w}=c.getProps(),_=!this.targetLayout||!oB(this.targetLayout,v),A=!d&&m;if(this.options.layoutRoot||this.resumeFrom||A||d&&(_||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const T={..._O(b,"layout"),onPlay:x,onComplete:w};(c.shouldReduceMotion||this.options.layoutRoot)&&(T.delay=0,T.type=!1),this.startAnimation(T),this.setAnimationOrigin(f,A)}else d||bN(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=v})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Bf(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(X$),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&cB(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const d=this.path[f];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(vN);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(yN);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(W$),this.nodes.forEach(B$),this.nodes.forEach(V$)):this.nodes.forEach(yN),this.clearAllSnapshots();const a=Do.now();As.delta=_u(0,1e3/60,a-As.timestamp),As.timestamp=a,As.isProcessing=!0,SA.update.process(As),SA.preRender.process(As),SA.render.process(As),As.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,MO.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(j$),this.sharedNodes.forEach(Y$)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ti.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ti.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Oo(this.snapshot.measuredBox.x)&&!Oo(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=Kr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&this.instance){const l=i(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!r)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!sB(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,f=c!==this.prevTransformTemplateValue;o&&this.instance&&(a||Dp(this.latestValues)||f)&&(r(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),J$(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return Kr();const a=o.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(eq))){const{scroll:c}=this.root;c&&(l0(a.x,c.offset.x),l0(a.y,c.offset.y))}return a}removeElementScroll(o){const a=Kr();if(ql(a,o),this.scroll?.wasRoot)return a;for(let l=0;l<this.path.length;l++){const c=this.path[l],{scroll:f,options:d}=c;c!==this.root&&f&&d.layoutScroll&&(f.wasRoot&&ql(a,o),l0(a.x,f.offset.x),l0(a.y,f.offset.y))}return a}applyTransform(o,a=!1){const l=Kr();ql(l,o);for(let c=0;c<this.path.length;c++){const f=this.path[c];!a&&f.options.layoutScroll&&f.scroll&&f!==f.root&&c0(l,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),Dp(f.latestValues)&&c0(l,f.latestValues)}return Dp(this.latestValues)&&c0(l,this.latestValues),l}removeTransform(o){const a=Kr();ql(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!Dp(c.latestValues))continue;O3(c.latestValues)&&c.updateSnapshot();const f=Kr(),d=c.measurePageBox();ql(f,d),lN(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,f)}return Dp(this.latestValues)&&lN(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==As.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==a;if(!(o||l&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:d}=this.options;if(!this.layout||!(f||d))return;this.resolvedRelativeTargetAt=As.timestamp;const m=this.getClosestProjectingParent();m&&this.linkedParentVersion!==m.layoutVersion&&!m.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(m&&m.layout?this.createRelativeTarget(m,this.layout.layoutBox,m.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Kr(),this.targetWithTransforms=Kr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),S$(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ql(this.target,this.layout.layoutBox),qF(this.target,this.targetDelta)):ql(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?this.createRelativeTarget(m,this.target,m.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||O3(this.parent.latestValues)||$F(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(o,a,l){this.relativeParent=o,this.linkedParentVersion=o.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Kr(),this.relativeTargetOrigin=Kr(),qS(this.relativeTargetOrigin,a,l),ql(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){const o=this.getLead(),a=!!this.resumingFrom||this!==o;let l=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(l=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===As.timestamp&&(l=!1),l)return;const{layout:c,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||f))return;ql(this.layoutCorrected,this.layout.layoutBox);const d=this.treeScale.x,m=this.treeScale.y;QW(this.layoutCorrected,this.treeScale,this.path,a),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Kr());const{target:v}=o;if(!v){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(nN(this.prevProjectionDelta.x,this.projectionDelta.x),nN(this.prevProjectionDelta.y,this.projectionDelta.y)),Fb(this.projectionDelta,this.layoutCorrected,v,this.latestValues),(this.treeScale.x!==d||this.treeScale.y!==m||!dN(this.projectionDelta.x,this.prevProjectionDelta.x)||!dN(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",v))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.visualElement?.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=a0(),this.projectionDelta=a0(),this.projectionDeltaWithTransform=a0()}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},f={...this.latestValues},d=a0();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const m=Kr(),v=l?l.source:void 0,b=this.layout?this.layout.source:void 0,x=v!==b,w=this.getStack(),_=!w||w.members.length<=1,A=!!(x&&!_&&this.options.crossfade===!0&&!this.path.some(K$));this.animationProgress=0;let T;this.mixTargetDelta=E=>{const C=E/1e3;_N(d.x,o.x,C),_N(d.y,o.y,C),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(qS(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Z$(this.relativeTarget,this.relativeTargetOrigin,m,C),T&&A$(this.relativeTarget,T)&&(this.isProjectionDirty=!1),T||(T=Kr()),ql(T,this.relativeTarget)),x&&(this.animationValues=f,D$(f,c,this.latestValues,C,A,_)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=C},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Bf(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ti.update(()=>{ES.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=im(0)),this.currentAnimation=P$(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(z$),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:f}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&fB(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||Kr();const d=Oo(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+d;const m=Oo(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+m}ql(a,l),c0(a,f),Fb(this.projectionDeltaWithTransform,this.layoutCorrected,a,f)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new k$),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){const{layoutId:o}=this.options;return o?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:o}=this.options;return o?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&LA("z",o,c,this.animationValues);for(let f=0;f<OA.length;f++)LA(`rotate${OA[f]}`,o,c,this.animationValues),LA(`skew${OA[f]}`,o,c,this.animationValues);o.render();for(const f in c)o.setStaticValue(f,c[f]),this.animationValues&&(this.animationValues[f]=c[f]);o.scheduleRender()}applyProjectionStyles(o,a){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=SS(a?.pointerEvents)||"",o.transform=l?l(this.latestValues,""):"none";return}const c=this.getLead();if(!this.projectionDelta||!this.layout||!c.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=SS(a?.pointerEvents)||""),this.hasProjected&&!Dp(this.latestValues)&&(o.transform=l?l({},""):"none",this.hasProjected=!1);return}o.visibility="";const f=c.animationValues||c.latestValues;this.applyTransformsToTarget();let d=C$(this.projectionDeltaWithTransform,this.treeScale,f);l&&(d=l(f,d)),o.transform=d;const{x:m,y:v}=this.projectionDelta;o.transformOrigin=`${m.origin*100}% ${v.origin*100}% 0`,c.animationValues?o.opacity=c===this?f.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:o.opacity=c===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const b in P3){if(f[b]===void 0)continue;const{correct:x,applyTo:w,isCSSVariable:_}=P3[b],A=d==="none"?f[b]:x(f[b],c);if(w){const T=w.length;for(let E=0;E<T;E++)o[w[E]]=A}else _?this.options.visualElement.renderState.vars[b]=A:o[b]=A}this.options.layoutId&&(o.pointerEvents=c===this?SS(a?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>o.currentAnimation?.stop()),this.root.nodes.forEach(vN),this.root.sharedNodes.clear()}}}function B$(n){n.updateLayout()}function V$(n){const e=n.resumeFrom?.snapshot||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:i}=n.layout,{animationType:r}=n.options,s=e.source!==n.layout.source;r==="size"?pl(f=>{const d=s?e.measuredBox[f]:e.layoutBox[f],m=Oo(d);d.min=t[f].min,d.max=d.min+m}):fB(r,e.layoutBox,t)&&pl(f=>{const d=s?e.measuredBox[f]:e.layoutBox[f],m=Oo(t[f]);d.max=d.min+m,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[f].max=n.relativeTarget[f].min+m)});const o=a0();Fb(o,t,e.layoutBox);const a=a0();s?Fb(a,n.applyTransform(i,!0),e.measuredBox):Fb(a,t,e.layoutBox);const l=!sB(o);let c=!1;if(!n.resumeFrom){const f=n.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:d,layout:m}=f;if(d&&m){const v=Kr();qS(v,e.layoutBox,d.layoutBox);const b=Kr();qS(b,t,m.layoutBox),oB(v,b)||(c=!0),f.options.layoutRoot&&(n.relativeTarget=b,n.relativeTargetOrigin=v,n.relativeParent=f)}}}n.notifyListeners("didUpdate",{layout:t,snapshot:e,delta:a,layoutDelta:o,hasLayoutChanged:l,hasRelativeLayoutChanged:c})}else if(n.isLead()){const{onExitComplete:t}=n.options;t&&t()}n.options.transition=void 0}function G$(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function H$(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function j$(n){n.clearSnapshot()}function vN(n){n.clearMeasurements()}function yN(n){n.isLayoutDirty=!1}function W$(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function bN(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function $$(n){n.resolveTargetDelta()}function q$(n){n.calcProjection()}function X$(n){n.resetSkewAndRotation()}function Y$(n){n.removeLeadSnapshot()}function _N(n,e,t){n.translate=sr(e.translate,0,t),n.scale=sr(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function xN(n,e,t,i){n.min=sr(e.min,t.min,i),n.max=sr(e.max,t.max,i)}function Z$(n,e,t,i){xN(n.x,e.x,t.x,i),xN(n.y,e.y,t.y,i)}function K$(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const Q$={duration:.45,ease:[.4,0,.1,1]},wN=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),SN=wN("applewebkit/")&&!wN("chrome/")?Math.round:wl;function EN(n){n.min=SN(n.min),n.max=SN(n.max)}function J$(n){EN(n.x),EN(n.y)}function fB(n,e,t){return n==="position"||n==="preserve-aspect"&&!w$(hN(e),hN(t),.2)}function eq(n){return n!==n.root&&n.scroll?.wasRoot}const tq=uB({attachResizeListener:(n,e)=>c_(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body?.scrollLeft||0,y:document.documentElement.scrollTop||document.body?.scrollTop||0}),checkIsScrollRoot:()=>!0}),PA={current:void 0},hB=uB({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!PA.current){const n=new tq({});n.mount(window),n.setOptions({layoutScroll:!0}),PA.current=n}return PA.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),TM=$.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function MN(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function nq(...n){return e=>{let t=!1;const i=n.map(r=>{const s=MN(r,e);return!t&&typeof s=="function"&&(t=!0),s});if(t)return()=>{for(let r=0;r<i.length;r++){const s=i[r];typeof s=="function"?s():MN(n[r],null)}}}}function iq(...n){return $.useCallback(nq(...n),n)}class rq extends $.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const i=t.offsetParent,r=R3(i)&&i.offsetWidth||0,s=R3(i)&&i.offsetHeight||0,o=this.props.sizeRef.current;o.height=t.offsetHeight||0,o.width=t.offsetWidth||0,o.top=t.offsetTop,o.left=t.offsetLeft,o.right=r-o.width-o.left,o.bottom=s-o.height-o.top}return null}componentDidUpdate(){}render(){return this.props.children}}function sq({children:n,isPresent:e,anchorX:t,anchorY:i,root:r}){const s=$.useId(),o=$.useRef(null),a=$.useRef({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:l}=$.useContext(TM),c=n.props?.ref??n?.ref,f=iq(o,c);return $.useInsertionEffect(()=>{const{width:d,height:m,top:v,left:b,right:x,bottom:w}=a.current;if(e||!o.current||!d||!m)return;const _=t==="left"?`left: ${b}`:`right: ${x}`,A=i==="bottom"?`bottom: ${w}`:`top: ${v}`;o.current.dataset.motionPopId=s;const T=document.createElement("style");l&&(T.nonce=l);const E=r??document.head;return E.appendChild(T),T.sheet&&T.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${m}px !important;
            ${_}px !important;
            ${A}px !important;
          }
        `),()=>{E.contains(T)&&E.removeChild(T)}},[e]),ne.jsx(rq,{isPresent:e,childRef:o,sizeRef:a,children:$.cloneElement(n,{ref:f})})}const oq=({children:n,initial:e,isPresent:t,onExitComplete:i,custom:r,presenceAffectsLayout:s,mode:o,anchorX:a,anchorY:l,root:c})=>{const f=nm(aq),d=$.useId();let m=!0,v=$.useMemo(()=>(m=!1,{id:d,initial:e,isPresent:t,custom:r,onExitComplete:b=>{f.set(b,!0);for(const x of f.values())if(!x)return;i&&i()},register:b=>(f.set(b,!1),()=>f.delete(b))}),[t,f,i]);return s&&m&&(v={...v}),$.useMemo(()=>{f.forEach((b,x)=>f.set(x,!1))},[t]),$.useEffect(()=>{!t&&!f.size&&i&&i()},[t]),o==="popLayout"&&(n=ne.jsx(sq,{isPresent:t,anchorX:a,anchorY:l,root:c,children:n})),ne.jsx(SM.Provider,{value:v,children:n})};function aq(){return new Map}function dB(n=!0){const e=$.useContext(SM);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:i,register:r}=e,s=$.useId();$.useEffect(()=>{if(n)return r(s)},[n]);const o=$.useCallback(()=>n&&i&&i(s),[s,i,n]);return!t&&i?[!1,o]:[!0]}const X1=n=>n.key||"";function TN(n){const e=[];return $.Children.forEach(n,t=>{$.isValidElement(t)&&e.push(t)}),e}const pB=({children:n,custom:e,initial:t=!0,onExitComplete:i,presenceAffectsLayout:r=!0,mode:s="sync",propagate:o=!1,anchorX:a="left",anchorY:l="top",root:c})=>{const[f,d]=dB(o),m=$.useMemo(()=>TN(n),[n]),v=o&&!f?[]:m.map(X1),b=$.useRef(!0),x=$.useRef(m),w=nm(()=>new Map),_=$.useRef(new Set),[A,T]=$.useState(m),[E,C]=$.useState(m);iO(()=>{b.current=!1,x.current=m;for(let I=0;I<E.length;I++){const L=X1(E[I]);v.includes(L)?(w.delete(L),_.current.delete(L)):w.get(L)!==!0&&w.set(L,!1)}},[E,v.length,v.join("-")]);const R=[];if(m!==A){let I=[...m];for(let L=0;L<E.length;L++){const N=E[L],V=X1(N);v.includes(V)||(I.splice(L,0,N),R.push(N))}return s==="wait"&&R.length&&(I=R),C(TN(I)),T(m),null}const{forceRender:O}=$.useContext(nO);return ne.jsx(ne.Fragment,{children:E.map(I=>{const L=X1(I),N=o&&!f?!1:m===E||v.includes(L),V=()=>{if(_.current.has(L))return;if(_.current.add(L),w.has(L))w.set(L,!0);else return;let B=!0;w.forEach(k=>{k||(B=!1)}),B&&(O?.(),C(x.current),o&&d?.(),i&&i())};return ne.jsx(oq,{isPresent:N,initial:!b.current||t?void 0:!1,custom:e,presenceAffectsLayout:r,mode:s,root:c,onExitComplete:N?void 0:V,anchorX:a,anchorY:l,children:I},L)})})},mB=$.createContext({strict:!1}),AN={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let CN=!1;function lq(){if(CN)return;const n={};for(const e in AN)n[e]={isEnabled:t=>AN[e].some(i=>!!t[i])};HF(n),CN=!0}function gB(){return lq(),XW()}function cq(n){const e=gB();for(const t in n)e[t]={...e[t],...n[t]};HF(e)}const uq=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function XS(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||uq.has(n)}let vB=n=>!XS(n);function fq(n){typeof n=="function"&&(vB=e=>e.startsWith("on")?!XS(e):n(e))}try{fq(require("@emotion/is-prop-valid").default)}catch{}function hq(n,e,t){const i={};for(const r in n)r==="values"&&typeof n.values=="object"||(vB(r)||t===!0&&XS(r)||!e&&!XS(r)||n.draggable&&r.startsWith("onDrag"))&&(i[r]=n[r]);return i}const AM=$.createContext({});function dq(n,e){if(MM(n)){const{initial:t,animate:i}=n;return{initial:t===!1||l_(t)?t:void 0,animate:l_(i)?i:void 0}}return n.inherit!==!1?e:{}}function pq(n){const{initial:e,animate:t}=dq(n,$.useContext(AM));return $.useMemo(()=>({initial:e,animate:t}),[RN(e),RN(t)])}function RN(n){return Array.isArray(n)?n.join(" "):n}const OO=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function yB(n,e,t){for(const i in e)!to(e[i])&&!ZF(i,t)&&(n[i]=e[i])}function mq({transformTemplate:n},e){return $.useMemo(()=>{const t=OO();return RO(t,e,n),Object.assign({},t.vars,t.style)},[e])}function gq(n,e){const t=n.style||{},i={};return yB(i,t,n),Object.assign(i,mq(n,e)),i}function vq(n,e){const t={},i=gq(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=i,t}const bB=()=>({...OO(),attrs:{}});function yq(n,e,t,i){const r=$.useMemo(()=>{const s=bB();return KF(s,e,JF(i),n.transformTemplate,n.style),{...s.attrs,style:{...s.style}}},[e]);if(n.style){const s={};yB(s,n.style,n),r.style={...s,...r.style}}return r}const bq=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function LO(n){return typeof n!="string"||n.includes("-")?!1:!!(bq.indexOf(n)>-1||/[A-Z]/u.test(n))}function _q(n,e,t,{latestValues:i},r,s=!1,o){const l=(o??LO(n)?yq:vq)(e,i,r,n),c=hq(e,typeof n=="string",s),f=n!==$.Fragment?{...c,...l,ref:t}:{},{children:d}=e,m=$.useMemo(()=>to(d)?d.get():d,[d]);return $.createElement(n,{...f,children:m})}function xq({scrapeMotionValuesFromProps:n,createRenderState:e},t,i,r){return{latestValues:wq(t,i,r,n),renderState:e()}}function wq(n,e,t,i){const r={},s=i(n,{});for(const m in s)r[m]=SS(s[m]);let{initial:o,animate:a}=n;const l=MM(n),c=GF(n);e&&c&&!l&&n.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let f=t?t.initial===!1:!1;f=f||o===!1;const d=f?a:o;if(d&&typeof d!="boolean"&&!EM(d)){const m=Array.isArray(d)?d:[d];for(let v=0;v<m.length;v++){const b=wO(n,m[v]);if(b){const{transitionEnd:x,transition:w,..._}=b;for(const A in _){let T=_[A];if(Array.isArray(T)){const E=f?T.length-1:0;T=T[E]}T!==null&&(r[A]=T)}for(const A in x)r[A]=x[A]}}}return r}const _B=n=>(e,t)=>{const i=$.useContext(AM),r=$.useContext(SM),s=()=>xq(n,e,i,r);return t?s():nm(s)},Sq=_B({scrapeMotionValuesFromProps:DO,createRenderState:OO}),Eq=_B({scrapeMotionValuesFromProps:eB,createRenderState:bB}),Mq=Symbol.for("motionComponentSymbol");function Tq(n,e,t){const i=$.useRef(t);$.useInsertionEffect(()=>{i.current=t});const r=$.useRef(null);return $.useCallback(s=>{s&&n.onMount?.(s),e&&(s?e.mount(s):e.unmount());const o=i.current;if(typeof o=="function")if(s){const a=o(s);typeof a=="function"&&(r.current=a)}else r.current?(r.current(),r.current=null):o(s);else o&&(o.current=s)},[e])}const xB=$.createContext({});function Mb(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function Aq(n,e,t,i,r,s){const{visualElement:o}=$.useContext(AM),a=$.useContext(mB),l=$.useContext(SM),c=$.useContext(TM),f=c.reducedMotion,d=c.skipAnimations,m=$.useRef(null),v=$.useRef(!1);i=i||a.renderer,!m.current&&i&&(m.current=i(n,{visualState:e,parent:o,props:t,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:f,skipAnimations:d,isSVG:s}),v.current&&m.current&&(m.current.manuallyAnimateOnMount=!0));const b=m.current,x=$.useContext(xB);b&&!b.projection&&r&&(b.type==="html"||b.type==="svg")&&Cq(m.current,t,r,x);const w=$.useRef(!1);$.useInsertionEffect(()=>{b&&w.current&&b.update(t,l)});const _=t[RF],A=$.useRef(!!_&&!window.MotionHandoffIsComplete?.(_)&&window.MotionHasOptimisedAnimation?.(_));return iO(()=>{v.current=!0,b&&(w.current=!0,window.MotionIsMounted=!0,b.updateFeatures(),b.scheduleRenderMicrotask(),A.current&&b.animationState&&b.animationState.animateChanges())}),$.useEffect(()=>{b&&(!A.current&&b.animationState&&b.animationState.animateChanges(),A.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(_)}),A.current=!1),b.enteringChildren=void 0)}),b}function Cq(n,e,t,i){const{layoutId:r,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c,layoutCrossfade:f}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:wB(n.parent)),n.projection.setOptions({layoutId:r,layout:s,alwaysMeasureLayout:!!o||a&&Mb(a),visualElement:n,animationType:typeof s=="string"?s:"both",initialPromotionConfig:i,crossfade:f,layoutScroll:l,layoutRoot:c})}function wB(n){if(n)return n.options.allowProjection!==!1?n.projection:wB(n.parent)}function IA(n,{forwardMotionProps:e=!1,type:t}={},i,r){i&&cq(i);const s=t?t==="svg":LO(n),o=s?Eq:Sq;function a(c,f){let d;const m={...$.useContext(TM),...c,layoutId:Rq(c)},{isStatic:v}=m,b=pq(c),x=o(c,v);if(!v&&W4){Dq();const w=Oq(m);d=w.MeasureLayout,b.visualElement=Aq(n,x,m,r,w.ProjectionNode,s)}return ne.jsxs(AM.Provider,{value:b,children:[d&&b.visualElement?ne.jsx(d,{visualElement:b.visualElement,...m}):null,_q(n,c,Tq(x,b.visualElement,f),x,v,e,s)]})}a.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const l=$.forwardRef(a);return l[Mq]=n,l}function Rq({layoutId:n}){const e=$.useContext(nO).id;return e&&n!==void 0?e+"-"+n:n}function Dq(n,e){$.useContext(mB).strict}function Oq(n){const e=gB(),{drag:t,layout:i}=e;if(!t&&!i)return{};const r={...t,...i};return{MeasureLayout:t?.isEnabled(n)||i?.isEnabled(n)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function Lq(n,e){if(typeof Proxy>"u")return IA;const t=new Map,i=(s,o)=>IA(s,o,n,e),r=(s,o)=>i(s,o);return new Proxy(r,{get:(s,o)=>o==="create"?i:(t.has(o)||t.set(o,IA(o,void 0,n,e)),t.get(o))})}const Pq=(n,e)=>e.isSVG??LO(n)?new f$(e):new s$(e,{allowProjection:n!==$.Fragment});class Iq extends bd{constructor(e){super(e),e.animationState||(e.animationState=g$(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();EM(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let Nq=0;class Uq extends bd{constructor(){super(...arguments),this.id=Nq++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const r=this.node.animationState.setActive("exit",!e);t&&!e&&r.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const kq={animation:{Feature:Iq},exit:{Feature:Uq}};function Y_(n){return{point:{x:n.pageX,y:n.pageY}}}const zq=n=>e=>TO(e)&&n(e,Y_(e));function Bb(n,e,t,i){return c_(n,e,zq(t),i)}const SB=({current:n})=>n?n.ownerDocument.defaultView:null,DN=(n,e)=>Math.abs(n-e);function Fq(n,e){const t=DN(n.x,e.x),i=DN(n.y,e.y);return Math.sqrt(t**2+i**2)}const ON=new Set(["auto","scroll"]);class EB{constructor(e,t,{transformPagePoint:i,contextWindow:r=window,dragSnapToOrigin:s=!1,distanceThreshold:o=3,element:a}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=v=>{this.handleScroll(v.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=UA(this.lastMoveEventInfo,this.history),b=this.startEvent!==null,x=Fq(v.offset,{x:0,y:0})>=this.distanceThreshold;if(!b&&!x)return;const{point:w}=v,{timestamp:_}=As;this.history.push({...w,timestamp:_});const{onStart:A,onMove:T}=this.handlers;b||(A&&A(this.lastMoveEvent,v),this.startEvent=this.lastMoveEvent),T&&T(this.lastMoveEvent,v)},this.handlePointerMove=(v,b)=>{this.lastMoveEvent=v,this.lastMoveEventInfo=NA(b,this.transformPagePoint),Ti.update(this.updatePoint,!0)},this.handlePointerUp=(v,b)=>{this.end();const{onEnd:x,onSessionEnd:w,resumeAnimation:_}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&_&&_(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const A=UA(v.type==="pointercancel"?this.lastMoveEventInfo:NA(b,this.transformPagePoint),this.history);this.startEvent&&x&&x(v,A),w&&w(v,A)},!TO(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=i,this.distanceThreshold=o,this.contextWindow=r||window;const l=Y_(e),c=NA(l,this.transformPagePoint),{point:f}=c,{timestamp:d}=As;this.history=[{...f,timestamp:d}];const{onSessionStart:m}=t;m&&m(e,UA(c,this.history)),this.removeListeners=$_(Bb(this.contextWindow,"pointermove",this.handlePointerMove),Bb(this.contextWindow,"pointerup",this.handlePointerUp),Bb(this.contextWindow,"pointercancel",this.handlePointerUp)),a&&this.startScrollTracking(a)}startScrollTracking(e){let t=e.parentElement;for(;t;){const i=getComputedStyle(t);(ON.has(i.overflowX)||ON.has(i.overflowY))&&this.scrollPositions.set(t,{x:t.scrollLeft,y:t.scrollTop}),t=t.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(e){const t=this.scrollPositions.get(e);if(!t)return;const i=e===window,r=i?{x:window.scrollX,y:window.scrollY}:{x:e.scrollLeft,y:e.scrollTop},s={x:r.x-t.x,y:r.y-t.y};s.x===0&&s.y===0||(i?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=s.x,this.lastMoveEventInfo.point.y+=s.y):this.history.length>0&&(this.history[0].x-=s.x,this.history[0].y-=s.y),this.scrollPositions.set(e,r),Ti.update(this.updatePoint,!0))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),Bf(this.updatePoint)}}function NA(n,e){return e?{point:e(n.point)}:n}function LN(n,e){return{x:n.x-e.x,y:n.y-e.y}}function UA({point:n},e){return{point:n,delta:LN(n,MB(e)),offset:LN(n,Bq(e)),velocity:Vq(e,.1)}}function Bq(n){return n[0]}function MB(n){return n[n.length-1]}function Vq(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,i=null;const r=MB(n);for(;t>=0&&(i=n[t],!(r.timestamp-i.timestamp>Pf(e)));)t--;if(!i)return{x:0,y:0};const s=bl(r.timestamp-i.timestamp);if(s===0)return{x:0,y:0};const o={x:(r.x-i.x)/s,y:(r.y-i.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function Gq(n,{min:e,max:t},i){return e!==void 0&&n<e?n=i?sr(e,n,i.min):Math.max(n,e):t!==void 0&&n>t&&(n=i?sr(t,n,i.max):Math.min(n,t)),n}function PN(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function Hq(n,{top:e,left:t,bottom:i,right:r}){return{x:PN(n.x,t,r),y:PN(n.y,e,i)}}function IN(n,e){let t=e.min-n.min,i=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,i]=[i,t]),{min:t,max:i}}function jq(n,e){return{x:IN(n.x,e.x),y:IN(n.y,e.y)}}function Wq(n,e){let t=.5;const i=Oo(n),r=Oo(e);return r>i?t=s_(e.min,e.max-i,n.min):i>r&&(t=s_(n.min,n.max-r,e.min)),_u(0,1,t)}function $q(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const I3=.35;function qq(n=I3){return n===!1?n=0:n===!0&&(n=I3),{x:NN(n,"left","right"),y:NN(n,"top","bottom")}}function NN(n,e,t){return{min:UN(n,e),max:UN(n,t)}}function UN(n,e){return typeof n=="number"?n:n[e]||0}const Xq=new WeakMap;class Yq{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Kr(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:i}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=d=>{t?(this.stopAnimation(),this.snapToCursor(Y_(d).point)):this.pauseAnimation()},o=(d,m)=>{this.stopAnimation();const{drag:v,dragPropagation:b,onDragStart:x}=this.getProps();if(v&&!b&&(this.openDragLock&&this.openDragLock(),this.openDragLock=LW(v),!this.openDragLock))return;this.latestPointerEvent=d,this.latestPanInfo=m,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),pl(_=>{let A=this.getAxisMotionValue(_).get()||0;if(pu.test(A)){const{projection:T}=this.visualElement;if(T&&T.layout){const E=T.layout.layoutBox[_];E&&(A=Oo(E)*(parseFloat(A)/100))}}this.originPoint[_]=A}),x&&Ti.update(()=>x(d,m),!1,!0),T3(this.visualElement,"transform");const{animationState:w}=this.visualElement;w&&w.setActive("whileDrag",!0)},a=(d,m)=>{this.latestPointerEvent=d,this.latestPanInfo=m;const{dragPropagation:v,dragDirectionLock:b,onDirectionLock:x,onDrag:w}=this.getProps();if(!v&&!this.openDragLock)return;const{offset:_}=m;if(b&&this.currentDirection===null){this.currentDirection=Zq(_),this.currentDirection!==null&&x&&x(this.currentDirection);return}this.updateAxis("x",m.point,_),this.updateAxis("y",m.point,_),this.visualElement.render(),w&&Ti.update(()=>w(d,m),!1,!0)},l=(d,m)=>{this.latestPointerEvent=d,this.latestPanInfo=m,this.stop(d,m),this.latestPointerEvent=null,this.latestPanInfo=null},c=()=>pl(d=>this.getAnimationState(d)==="paused"&&this.getAxisMotionValue(d).animation?.play()),{dragSnapToOrigin:f}=this.getProps();this.panSession=new EB(e,{onSessionStart:s,onStart:o,onMove:a,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,distanceThreshold:i,contextWindow:SB(this.visualElement),element:this.visualElement.current})}stop(e,t){const i=e||this.latestPointerEvent,r=t||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!r||!i)return;const{velocity:o}=r;this.startAnimation(o);const{onDragEnd:a}=this.getProps();a&&Ti.postRender(()=>a(i,r))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.endPanSession();const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(e,t,i){const{drag:r}=this.getProps();if(!i||!Y1(e,r,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(o=Gq(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){const{dragConstraints:e,dragElastic:t}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,r=this.constraints;e&&Mb(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&i?this.constraints=Hq(i.layoutBox,e):this.constraints=!1,this.elastic=qq(t),r!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&pl(s=>{this.constraints!==!1&&this.getAxisMotionValue(s)&&(this.constraints[s]=$q(i.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Mb(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const s=JW(i,r.root,this.visualElement.getTransformPagePoint());let o=jq(r.layout.layoutBox,s);if(t){const a=t(ZW(o));this.hasMutatedConstraints=!!a,a&&(o=WF(a))}return o}startAnimation(e){const{drag:t,dragMomentum:i,dragElastic:r,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=pl(f=>{if(!Y1(f,t,this.currentDirection))return;let d=l&&l[f]||{};o&&(d={min:0,max:0});const m=r?200:1e6,v=r?40:1e7,b={type:"inertia",velocity:i?e[f]:0,bounceStiffness:m,bounceDamping:v,timeConstant:750,restDelta:1,restSpeed:10,...s,...d};return this.startAxisValueAnimation(f,b)});return Promise.all(c).then(a)}startAxisValueAnimation(e,t){const i=this.getAxisMotionValue(e);return T3(this.visualElement,e),i.start(xO(e,i,0,t,this.visualElement,!1))}stopAnimation(){pl(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){pl(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),r=i[t];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){pl(t=>{const{drag:i}=this.getProps();if(!Y1(t,i,this.currentDirection))return;const{projection:r}=this.visualElement,s=this.getAxisMotionValue(t);if(r&&r.layout){const{min:o,max:a}=r.layout.layoutBox[t],l=s.get()||0;s.set(e[t]-sr(o,a,.5)+l)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:i}=this.visualElement;if(!Mb(t)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};pl(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();r[o]=Wq({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),pl(o=>{if(!Y1(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(sr(l,c,r[o]))})}addListeners(){if(!this.visualElement.current)return;Xq.set(this.visualElement,this);const e=this.visualElement.current,t=Bb(e,"pointerdown",l=>{const{drag:c,dragListener:f=!0}=this.getProps(),d=l.target,m=d!==e&&kW(d);c&&f&&!m&&this.start(l)}),i=()=>{const{dragConstraints:l}=this.getProps();Mb(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,s=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),Ti.read(i);const o=c_(window,"resize",()=>this.scalePositionWithinConstraints()),a=r.addEventListener("didUpdate",(({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(pl(f=>{const d=this.getAxisMotionValue(f);d&&(this.originPoint[f]+=l[f].translate,d.set(d.get()+l[f].translate))}),this.visualElement.render())}));return()=>{o(),t(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:s=!1,dragElastic:o=I3,dragMomentum:a=!0}=e;return{...e,drag:t,dragDirectionLock:i,dragPropagation:r,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function Y1(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function Zq(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class Kq extends bd{constructor(e){super(e),this.removeGroupControls=wl,this.removeListeners=wl,this.controls=new Yq(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||wl}update(){const{dragControls:e}=this.node.getProps(),{dragControls:t}=this.node.prevProps||{};e!==t&&(this.removeGroupControls(),e&&(this.removeGroupControls=e.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.isDragging||this.controls.endPanSession()}}const kA=n=>(e,t)=>{n&&Ti.update(()=>n(e,t),!1,!0)};class Qq extends bd{constructor(){super(...arguments),this.removePointerDownListener=wl}onPointerDown(e){this.session=new EB(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:SB(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:kA(e),onStart:kA(t),onMove:kA(i),onEnd:(s,o)=>{delete this.session,r&&Ti.postRender(()=>r(s,o))}}}mount(){this.removePointerDownListener=Bb(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let zA=!1;class Jq extends $.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i,layoutId:r}=this.props,{projection:s}=e;s&&(t.group&&t.group.add(s),i&&i.register&&r&&i.register(s),zA&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,layoutDependency:this.props.layoutDependency,onExitComplete:()=>this.safeToRemove()})),ES.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:i,drag:r,isPresent:s}=this.props,{projection:o}=i;return o&&(o.isPresent=s,e.layoutDependency!==t&&o.setOptions({...o.options,layoutDependency:t}),zA=!0,r||e.layoutDependency!==t||t===void 0||e.isPresent!==s?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||Ti.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),MO.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i}=this.props,{projection:r}=e;zA=!0,r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function TB(n){const[e,t]=dB(),i=$.useContext(nO);return ne.jsx(Jq,{...n,layoutGroup:i,switchLayoutGroup:$.useContext(xB),isPresent:e,safeToRemove:t})}const eX={pan:{Feature:Qq},drag:{Feature:Kq,ProjectionNode:hB,MeasureLayout:TB}};function kN(n,e,t){const{props:i}=n;n.animationState&&i.whileHover&&n.animationState.setActive("whileHover",t==="Start");const r="onHover"+t,s=i[r];s&&Ti.postRender(()=>s(e,Y_(e)))}class tX extends bd{mount(){const{current:e}=this.node;e&&(this.unmount=PW(e,(t,i)=>(kN(this.node,i,"Start"),r=>kN(this.node,r,"End"))))}unmount(){}}class nX extends bd{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=$_(c_(this.node.current,"focus",()=>this.onFocus()),c_(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function zN(n,e,t){const{props:i}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&i.whileTap&&n.animationState.setActive("whileTap",t==="Start");const r="onTap"+(t==="End"?"":t),s=i[r];s&&Ti.postRender(()=>s(e,Y_(e)))}class iX extends bd{mount(){const{current:e}=this.node;e&&(this.unmount=FW(e,(t,i)=>(zN(this.node,i,"Start"),(r,{success:s})=>zN(this.node,r,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const N3=new WeakMap,FA=new WeakMap,rX=n=>{const e=N3.get(n.target);e&&e(n)},sX=n=>{n.forEach(rX)};function oX({root:n,...e}){const t=n||document;FA.has(t)||FA.set(t,{});const i=FA.get(t),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(sX,{root:n,...e})),i[r]}function aX(n,e,t){const i=oX(e);return N3.set(n,t),i.observe(n),()=>{N3.delete(n),i.unobserve(n)}}const lX={some:0,all:1};class cX extends bd{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:i,amount:r="some",once:s}=e,o={root:t?t.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:lX[r]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:f,onViewportLeave:d}=this.node.getProps(),m=c?f:d;m&&m(l)};return aX(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(uX(e,t))&&this.startObserver()}unmount(){}}function uX({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const fX={inView:{Feature:cX},tap:{Feature:iX},focus:{Feature:nX},hover:{Feature:tX}},hX={layout:{ProjectionNode:hB,MeasureLayout:TB}},dX={...kq,...fX,...eX,...hX},Js=Lq(dX,Pq);function AB(n){const e=nm(()=>im(n)),{isStatic:t}=$.useContext(TM);if(t){const[,i]=$.useState(n);$.useEffect(()=>e.on("change",i),[])}return e}function CB(n,e){const t=AB(e()),i=()=>t.set(e());return i(),iO(()=>{const r=()=>Ti.preRender(i,!1,!0),s=n.map(o=>o.on("change",r));return()=>{s.forEach(o=>o()),Bf(i)}}),t}function pX(n){zb.current=[],n();const e=CB(zb.current,n);return zb.current=void 0,e}function RB(n,e,t,i){if(typeof n=="function")return pX(n);if(t!==void 0&&!Array.isArray(t)&&typeof e!="function")return mX(n,e,t,i);const o=typeof e=="function"?e:VW(e,t,i);return Array.isArray(n)?FN(n,o):FN([n],([a])=>o(a))}function FN(n,e){const t=nm(()=>[]);return CB(n,()=>{t.length=0;const i=n.length;for(let r=0;r<i;r++)t[r]=n[r].get();return e(t)})}function mX(n,e,t,i){const r=nm(()=>Object.keys(t)),s=nm(()=>({}));for(const o of r)s[o]=RB(n,e,t[o],i);return s}var DB=H4();function CM(){return typeof window<"u"}function K0(n){return OB(n)?(n.nodeName||"").toLowerCase():"#document"}function La(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function Su(n){var e;return(e=(OB(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function OB(n){return CM()?n instanceof Node||n instanceof La(n).Node:!1}function Lo(n){return CM()?n instanceof Element||n instanceof La(n).Element:!1}function xu(n){return CM()?n instanceof HTMLElement||n instanceof La(n).HTMLElement:!1}function BN(n){return!CM()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof La(n).ShadowRoot}const gX=new Set(["inline","contents"]);function Z_(n){const{overflow:e,overflowX:t,overflowY:i,display:r}=dc(n);return/auto|scroll|overlay|hidden|clip/.test(e+i+t)&&!gX.has(r)}const vX=new Set(["table","td","th"]);function yX(n){return vX.has(K0(n))}const bX=[":popover-open",":modal"];function RM(n){return bX.some(e=>{try{return n.matches(e)}catch{return!1}})}const _X=["transform","translate","scale","rotate","perspective"],xX=["transform","translate","scale","rotate","perspective","filter"],wX=["paint","layout","strict","content"];function PO(n){const e=IO(),t=Lo(n)?dc(n):n;return _X.some(i=>t[i]?t[i]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||xX.some(i=>(t.willChange||"").includes(i))||wX.some(i=>(t.contain||"").includes(i))}function SX(n){let e=dd(n);for(;xu(e)&&!T0(e);){if(PO(e))return e;if(RM(e))return null;e=dd(e)}return null}function IO(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const EX=new Set(["html","body","#document"]);function T0(n){return EX.has(K0(n))}function dc(n){return La(n).getComputedStyle(n)}function DM(n){return Lo(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function dd(n){if(K0(n)==="html")return n;const e=n.assignedSlot||n.parentNode||BN(n)&&n.host||Su(n);return BN(e)?e.host:e}function LB(n){const e=dd(n);return T0(e)?n.ownerDocument?n.ownerDocument.body:n.body:xu(e)&&Z_(e)?e:LB(e)}function u_(n,e,t){var i;e===void 0&&(e=[]),t===void 0&&(t=!0);const r=LB(n),s=r===((i=n.ownerDocument)==null?void 0:i.body),o=La(r);if(s){const a=U3(o);return e.concat(o,o.visualViewport||[],Z_(r)?r:[],a&&t?u_(a):[])}return e.concat(r,u_(r,[],t))}function U3(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}const A0=Math.min,Ra=Math.max,YS=Math.round,Z1=Math.floor,mu=n=>({x:n,y:n}),MX={left:"right",right:"left",bottom:"top",top:"bottom"},TX={start:"end",end:"start"};function VN(n,e,t){return Ra(n,A0(e,t))}function rm(n,e){return typeof n=="function"?n(e):n}function Vf(n){return n.split("-")[0]}function K_(n){return n.split("-")[1]}function NO(n){return n==="x"?"y":"x"}function PB(n){return n==="y"?"height":"width"}const AX=new Set(["top","bottom"]);function uu(n){return AX.has(Vf(n))?"y":"x"}function IB(n){return NO(uu(n))}function CX(n,e,t){t===void 0&&(t=!1);const i=K_(n),r=IB(n),s=PB(r);let o=r==="x"?i===(t?"end":"start")?"right":"left":i==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=ZS(o)),[o,ZS(o)]}function RX(n){const e=ZS(n);return[k3(n),e,k3(e)]}function k3(n){return n.replace(/start|end/g,e=>TX[e])}const GN=["left","right"],HN=["right","left"],DX=["top","bottom"],OX=["bottom","top"];function LX(n,e,t){switch(n){case"top":case"bottom":return t?e?HN:GN:e?GN:HN;case"left":case"right":return e?DX:OX;default:return[]}}function PX(n,e,t,i){const r=K_(n);let s=LX(Vf(n),t==="start",i);return r&&(s=s.map(o=>o+"-"+r),e&&(s=s.concat(s.map(k3)))),s}function ZS(n){return n.replace(/left|right|bottom|top/g,e=>MX[e])}function IX(n){return{top:0,right:0,bottom:0,left:0,...n}}function NX(n){return typeof n!="number"?IX(n):{top:n,right:n,bottom:n,left:n}}function KS(n){const{x:e,y:t,width:i,height:r}=n;return{width:i,height:r,top:t,left:e,right:e+i,bottom:t+r,x:e,y:t}}var NB=["input:not([inert]):not([inert] *)","select:not([inert]):not([inert] *)","textarea:not([inert]):not([inert] *)","a[href]:not([inert]):not([inert] *)","button:not([inert]):not([inert] *)","[tabindex]:not(slot):not([inert]):not([inert] *)","audio[controls]:not([inert]):not([inert] *)","video[controls]:not([inert]):not([inert] *)",'[contenteditable]:not([contenteditable="false"]):not([inert]):not([inert] *)',"details>summary:first-of-type:not([inert]):not([inert] *)","details:not([inert]):not([inert] *)"],QS=NB.join(","),UB=typeof Element>"u",sm=UB?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,JS=!UB&&Element.prototype.getRootNode?function(n){var e;return n==null||(e=n.getRootNode)===null||e===void 0?void 0:e.call(n)}:function(n){return n?.ownerDocument},eE=function(e,t){var i;t===void 0&&(t=!0);var r=e==null||(i=e.getAttribute)===null||i===void 0?void 0:i.call(e,"inert"),s=r===""||r==="true",o=s||t&&e&&(typeof e.closest=="function"?e.closest("[inert]"):eE(e.parentNode));return o},UX=function(e){var t,i=e==null||(t=e.getAttribute)===null||t===void 0?void 0:t.call(e,"contenteditable");return i===""||i==="true"},kB=function(e,t,i){if(eE(e))return[];var r=Array.prototype.slice.apply(e.querySelectorAll(QS));return t&&sm.call(e,QS)&&r.unshift(e),r=r.filter(i),r},tE=function(e,t,i){for(var r=[],s=Array.from(e);s.length;){var o=s.shift();if(!eE(o,!1))if(o.tagName==="SLOT"){var a=o.assignedElements(),l=a.length?a:o.children,c=tE(l,!0,i);i.flatten?r.push.apply(r,c):r.push({scopeParent:o,candidates:c})}else{var f=sm.call(o,QS);f&&i.filter(o)&&(t||!e.includes(o))&&r.push(o);var d=o.shadowRoot||typeof i.getShadowRoot=="function"&&i.getShadowRoot(o),m=!eE(d,!1)&&(!i.shadowRootFilter||i.shadowRootFilter(o));if(d&&m){var v=tE(d===!0?o.children:d.children,!0,i);i.flatten?r.push.apply(r,v):r.push({scopeParent:o,candidates:v})}else s.unshift.apply(s,o.children)}}return r},zB=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},nd=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||UX(e))&&!zB(e)?0:e.tabIndex},kX=function(e,t){var i=nd(e);return i<0&&t&&!zB(e)?0:i},zX=function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex},FB=function(e){return e.tagName==="INPUT"},FX=function(e){return FB(e)&&e.type==="hidden"},BX=function(e){var t=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(i){return i.tagName==="SUMMARY"});return t},VX=function(e,t){for(var i=0;i<e.length;i++)if(e[i].checked&&e[i].form===t)return e[i]},GX=function(e){if(!e.name)return!0;var t=e.form||JS(e),i=function(a){return t.querySelectorAll('input[type="radio"][name="'+a+'"]')},r;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")r=i(window.CSS.escape(e.name));else try{r=i(e.name)}catch(o){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",o.message),!1}var s=VX(r,e.form);return!s||s===e},HX=function(e){return FB(e)&&e.type==="radio"},jX=function(e){return HX(e)&&!GX(e)},WX=function(e){var t,i=e&&JS(e),r=(t=i)===null||t===void 0?void 0:t.host,s=!1;if(i&&i!==e){var o,a,l;for(s=!!((o=r)!==null&&o!==void 0&&(a=o.ownerDocument)!==null&&a!==void 0&&a.contains(r)||e!=null&&(l=e.ownerDocument)!==null&&l!==void 0&&l.contains(e));!s&&r;){var c,f,d;i=JS(r),r=(c=i)===null||c===void 0?void 0:c.host,s=!!((f=r)!==null&&f!==void 0&&(d=f.ownerDocument)!==null&&d!==void 0&&d.contains(r))}}return s},jN=function(e){var t=e.getBoundingClientRect(),i=t.width,r=t.height;return i===0&&r===0},$X=function(e,t){var i=t.displayCheck,r=t.getShadowRoot;if(i==="full-native"&&"checkVisibility"in e){var s=e.checkVisibility({checkOpacity:!1,opacityProperty:!1,contentVisibilityAuto:!0,visibilityProperty:!0,checkVisibilityCSS:!0});return!s}if(getComputedStyle(e).visibility==="hidden")return!0;var o=sm.call(e,"details>summary:first-of-type"),a=o?e.parentElement:e;if(sm.call(a,"details:not([open]) *"))return!0;if(!i||i==="full"||i==="full-native"||i==="legacy-full"){if(typeof r=="function"){for(var l=e;e;){var c=e.parentElement,f=JS(e);if(c&&!c.shadowRoot&&r(c)===!0)return jN(e);e.assignedSlot?e=e.assignedSlot:!c&&f!==e.ownerDocument?e=f.host:e=c}e=l}if(WX(e))return!e.getClientRects().length;if(i!=="legacy-full")return!0}else if(i==="non-zero-area")return jN(e);return!1},qX=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var t=e.parentElement;t;){if(t.tagName==="FIELDSET"&&t.disabled){for(var i=0;i<t.children.length;i++){var r=t.children.item(i);if(r.tagName==="LEGEND")return sm.call(t,"fieldset[disabled] *")?!0:!r.contains(e)}return!0}t=t.parentElement}return!1},nE=function(e,t){return!(t.disabled||FX(t)||$X(t,e)||BX(t)||qX(t))},z3=function(e,t){return!(jX(t)||nd(t)<0||!nE(e,t))},XX=function(e){var t=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(t)||t>=0)},BB=function(e){var t=[],i=[];return e.forEach(function(r,s){var o=!!r.scopeParent,a=o?r.scopeParent:r,l=kX(a,o),c=o?BB(r.candidates):a;l===0?o?t.push.apply(t,c):t.push(a):i.push({documentOrder:s,tabIndex:l,item:r,isScope:o,content:c})}),i.sort(zX).reduce(function(r,s){return s.isScope?r.push.apply(r,s.content):r.push(s.content),r},[]).concat(t)},VB=function(e,t){t=t||{};var i;return t.getShadowRoot?i=tE([e],t.includeContainer,{filter:z3.bind(null,t),flatten:!1,getShadowRoot:t.getShadowRoot,shadowRootFilter:XX}):i=kB(e,t.includeContainer,z3.bind(null,t)),BB(i)},GB=function(e,t){t=t||{};var i;return t.getShadowRoot?i=tE([e],t.includeContainer,{filter:nE.bind(null,t),flatten:!0,getShadowRoot:t.getShadowRoot}):i=kB(e,t.includeContainer,nE.bind(null,t)),i},Op=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return sm.call(e,QS)===!1?!1:z3(t,e)},YX=NB.concat("iframe:not([inert]):not([inert] *)").join(","),MS=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return sm.call(e,YX)===!1?!1:nE(t,e)};const ZX=Object.freeze(Object.defineProperty({__proto__:null,focusable:GB,getTabIndex:nd,isFocusable:MS,isTabbable:Op,tabbable:VB},Symbol.toStringTag,{value:"Module"}));function WN(n,e,t){let{reference:i,floating:r}=n;const s=uu(e),o=IB(e),a=PB(o),l=Vf(e),c=s==="y",f=i.x+i.width/2-r.width/2,d=i.y+i.height/2-r.height/2,m=i[a]/2-r[a]/2;let v;switch(l){case"top":v={x:f,y:i.y-r.height};break;case"bottom":v={x:f,y:i.y+i.height};break;case"right":v={x:i.x+i.width,y:d};break;case"left":v={x:i.x-r.width,y:d};break;default:v={x:i.x,y:i.y}}switch(K_(e)){case"start":v[o]-=m*(t&&c?-1:1);break;case"end":v[o]+=m*(t&&c?-1:1);break}return v}async function KX(n,e){var t;e===void 0&&(e={});const{x:i,y:r,platform:s,rects:o,elements:a,strategy:l}=n,{boundary:c="clippingAncestors",rootBoundary:f="viewport",elementContext:d="floating",altBoundary:m=!1,padding:v=0}=rm(e,n),b=NX(v),w=a[m?d==="floating"?"reference":"floating":d],_=KS(await s.getClippingRect({element:(t=await(s.isElement==null?void 0:s.isElement(w)))==null||t?w:w.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:f,strategy:l})),A=d==="floating"?{x:i,y:r,width:o.floating.width,height:o.floating.height}:o.reference,T=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),E=await(s.isElement==null?void 0:s.isElement(T))?await(s.getScale==null?void 0:s.getScale(T))||{x:1,y:1}:{x:1,y:1},C=KS(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:A,offsetParent:T,strategy:l}):A);return{top:(_.top-C.top+b.top)/E.y,bottom:(C.bottom-_.bottom+b.bottom)/E.y,left:(_.left-C.left+b.left)/E.x,right:(C.right-_.right+b.right)/E.x}}const QX=async(n,e,t)=>{const{placement:i="bottom",strategy:r="absolute",middleware:s=[],platform:o}=t,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:n,floating:e,strategy:r}),{x:f,y:d}=WN(c,i,l),m=i,v={},b=0;for(let w=0;w<a.length;w++){var x;const{name:_,fn:A}=a[w],{x:T,y:E,data:C,reset:R}=await A({x:f,y:d,initialPlacement:i,placement:m,strategy:r,middlewareData:v,rects:c,platform:{...o,detectOverflow:(x=o.detectOverflow)!=null?x:KX},elements:{reference:n,floating:e}});f=T??f,d=E??d,v={...v,[_]:{...v[_],...C}},R&&b<=50&&(b++,typeof R=="object"&&(R.placement&&(m=R.placement),R.rects&&(c=R.rects===!0?await o.getElementRects({reference:n,floating:e,strategy:r}):R.rects),{x:f,y:d}=WN(c,m,l)),w=-1)}return{x:f,y:d,placement:m,strategy:r,middlewareData:v}},JX=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,i;const{placement:r,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:f=!0,crossAxis:d=!0,fallbackPlacements:m,fallbackStrategy:v="bestFit",fallbackAxisSideDirection:b="none",flipAlignment:x=!0,...w}=rm(n,e);if((t=s.arrow)!=null&&t.alignmentOffset)return{};const _=Vf(r),A=uu(a),T=Vf(a)===a,E=await(l.isRTL==null?void 0:l.isRTL(c.floating)),C=m||(T||!x?[ZS(a)]:RX(a)),R=b!=="none";!m&&R&&C.push(...PX(a,x,b,E));const O=[a,...C],I=await l.detectOverflow(e,w),L=[];let N=((i=s.flip)==null?void 0:i.overflows)||[];if(f&&L.push(I[_]),d){const j=CX(r,o,E);L.push(I[j[0]],I[j[1]])}if(N=[...N,{placement:r,overflows:L}],!L.every(j=>j<=0)){var V,B;const j=(((V=s.flip)==null?void 0:V.index)||0)+1,q=O[j];if(q&&(!(d==="alignment"?A!==uu(q):!1)||N.every(K=>uu(K.placement)===A?K.overflows[0]>0:!0)))return{data:{index:j,overflows:N},reset:{placement:q}};let W=(B=N.filter(G=>G.overflows[0]<=0).sort((G,K)=>G.overflows[1]-K.overflows[1])[0])==null?void 0:B.placement;if(!W)switch(v){case"bestFit":{var k;const G=(k=N.filter(K=>{if(R){const te=uu(K.placement);return te===A||te==="y"}return!0}).map(K=>[K.placement,K.overflows.filter(te=>te>0).reduce((te,ie)=>te+ie,0)]).sort((K,te)=>K[1]-te[1])[0])==null?void 0:k[0];G&&(W=G);break}case"initialPlacement":W=a;break}if(r!==W)return{reset:{placement:W}}}return{}}}},HB=new Set(["left","top"]);async function eY(n,e){const{placement:t,platform:i,elements:r}=n,s=await(i.isRTL==null?void 0:i.isRTL(r.floating)),o=Vf(t),a=K_(t),l=uu(t)==="y",c=HB.has(o)?-1:1,f=s&&l?-1:1,d=rm(e,n);let{mainAxis:m,crossAxis:v,alignmentAxis:b}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof b=="number"&&(v=a==="end"?b*-1:b),l?{x:v*f,y:m*c}:{x:m*c,y:v*f}}const tY=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,i;const{x:r,y:s,placement:o,middlewareData:a}=e,l=await eY(e,n);return o===((t=a.offset)==null?void 0:t.placement)&&(i=a.arrow)!=null&&i.alignmentOffset?{}:{x:r+l.x,y:s+l.y,data:{...l,placement:o}}}}},nY=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:i,placement:r,platform:s}=e,{mainAxis:o=!0,crossAxis:a=!1,limiter:l={fn:_=>{let{x:A,y:T}=_;return{x:A,y:T}}},...c}=rm(n,e),f={x:t,y:i},d=await s.detectOverflow(e,c),m=uu(Vf(r)),v=NO(m);let b=f[v],x=f[m];if(o){const _=v==="y"?"top":"left",A=v==="y"?"bottom":"right",T=b+d[_],E=b-d[A];b=VN(T,b,E)}if(a){const _=m==="y"?"top":"left",A=m==="y"?"bottom":"right",T=x+d[_],E=x-d[A];x=VN(T,x,E)}const w=l.fn({...e,[v]:b,[m]:x});return{...w,data:{x:w.x-t,y:w.y-i,enabled:{[v]:o,[m]:a}}}}}},iY=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:i,placement:r,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=rm(n,e),f={x:t,y:i},d=uu(r),m=NO(d);let v=f[m],b=f[d];const x=rm(a,e),w=typeof x=="number"?{mainAxis:x,crossAxis:0}:{mainAxis:0,crossAxis:0,...x};if(l){const T=m==="y"?"height":"width",E=s.reference[m]-s.floating[T]+w.mainAxis,C=s.reference[m]+s.reference[T]-w.mainAxis;v<E?v=E:v>C&&(v=C)}if(c){var _,A;const T=m==="y"?"width":"height",E=HB.has(Vf(r)),C=s.reference[d]-s.floating[T]+(E&&((_=o.offset)==null?void 0:_[d])||0)+(E?0:w.crossAxis),R=s.reference[d]+s.reference[T]+(E?0:((A=o.offset)==null?void 0:A[d])||0)-(E?w.crossAxis:0);b<C?b=C:b>R&&(b=R)}return{[m]:v,[d]:b}}}},rY=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,i;const{placement:r,rects:s,platform:o,elements:a}=e,{apply:l=()=>{},...c}=rm(n,e),f=await o.detectOverflow(e,c),d=Vf(r),m=K_(r),v=uu(r)==="y",{width:b,height:x}=s.floating;let w,_;d==="top"||d==="bottom"?(w=d,_=m===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(_=d,w=m==="end"?"top":"bottom");const A=x-f.top-f.bottom,T=b-f.left-f.right,E=A0(x-f[w],A),C=A0(b-f[_],T),R=!e.middlewareData.shift;let O=E,I=C;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(I=T),(i=e.middlewareData.shift)!=null&&i.enabled.y&&(O=A),R&&!m){const N=Ra(f.left,0),V=Ra(f.right,0),B=Ra(f.top,0),k=Ra(f.bottom,0);v?I=b-2*(N!==0||V!==0?N+V:Ra(f.left,f.right)):O=x-2*(B!==0||k!==0?B+k:Ra(f.top,f.bottom))}await l({...e,availableWidth:I,availableHeight:O});const L=await o.getDimensions(a.floating);return b!==L.width||x!==L.height?{reset:{rects:!0}}:{}}}};function jB(n){const e=dc(n);let t=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const r=xu(n),s=r?n.offsetWidth:t,o=r?n.offsetHeight:i,a=YS(t)!==s||YS(i)!==o;return a&&(t=s,i=o),{width:t,height:i,$:a}}function UO(n){return Lo(n)?n:n.contextElement}function y0(n){const e=UO(n);if(!xu(e))return mu(1);const t=e.getBoundingClientRect(),{width:i,height:r,$:s}=jB(e);let o=(s?YS(t.width):t.width)/i,a=(s?YS(t.height):t.height)/r;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const sY=mu(0);function WB(n){const e=La(n);return!IO()||!e.visualViewport?sY:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function oY(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==La(n)?!1:e}function om(n,e,t,i){e===void 0&&(e=!1),t===void 0&&(t=!1);const r=n.getBoundingClientRect(),s=UO(n);let o=mu(1);e&&(i?Lo(i)&&(o=y0(i)):o=y0(n));const a=oY(s,t,i)?WB(s):mu(0);let l=(r.left+a.x)/o.x,c=(r.top+a.y)/o.y,f=r.width/o.x,d=r.height/o.y;if(s){const m=La(s),v=i&&Lo(i)?La(i):i;let b=m,x=U3(b);for(;x&&i&&v!==b;){const w=y0(x),_=x.getBoundingClientRect(),A=dc(x),T=_.left+(x.clientLeft+parseFloat(A.paddingLeft))*w.x,E=_.top+(x.clientTop+parseFloat(A.paddingTop))*w.y;l*=w.x,c*=w.y,f*=w.x,d*=w.y,l+=T,c+=E,b=La(x),x=U3(b)}}return KS({width:f,height:d,x:l,y:c})}function OM(n,e){const t=DM(n).scrollLeft;return e?e.left+t:om(Su(n)).left+t}function $B(n,e){const t=n.getBoundingClientRect(),i=t.left+e.scrollLeft-OM(n,t),r=t.top+e.scrollTop;return{x:i,y:r}}function aY(n){let{elements:e,rect:t,offsetParent:i,strategy:r}=n;const s=r==="fixed",o=Su(i),a=e?RM(e.floating):!1;if(i===o||a&&s)return t;let l={scrollLeft:0,scrollTop:0},c=mu(1);const f=mu(0),d=xu(i);if((d||!d&&!s)&&((K0(i)!=="body"||Z_(o))&&(l=DM(i)),xu(i))){const v=om(i);c=y0(i),f.x=v.x+i.clientLeft,f.y=v.y+i.clientTop}const m=o&&!d&&!s?$B(o,l):mu(0);return{width:t.width*c.x,height:t.height*c.y,x:t.x*c.x-l.scrollLeft*c.x+f.x+m.x,y:t.y*c.y-l.scrollTop*c.y+f.y+m.y}}function lY(n){return Array.from(n.getClientRects())}function cY(n){const e=Su(n),t=DM(n),i=n.ownerDocument.body,r=Ra(e.scrollWidth,e.clientWidth,i.scrollWidth,i.clientWidth),s=Ra(e.scrollHeight,e.clientHeight,i.scrollHeight,i.clientHeight);let o=-t.scrollLeft+OM(n);const a=-t.scrollTop;return dc(i).direction==="rtl"&&(o+=Ra(e.clientWidth,i.clientWidth)-r),{width:r,height:s,x:o,y:a}}const $N=25;function uY(n,e){const t=La(n),i=Su(n),r=t.visualViewport;let s=i.clientWidth,o=i.clientHeight,a=0,l=0;if(r){s=r.width,o=r.height;const f=IO();(!f||f&&e==="fixed")&&(a=r.offsetLeft,l=r.offsetTop)}const c=OM(i);if(c<=0){const f=i.ownerDocument,d=f.body,m=getComputedStyle(d),v=f.compatMode==="CSS1Compat"&&parseFloat(m.marginLeft)+parseFloat(m.marginRight)||0,b=Math.abs(i.clientWidth-d.clientWidth-v);b<=$N&&(s-=b)}else c<=$N&&(s+=c);return{width:s,height:o,x:a,y:l}}const fY=new Set(["absolute","fixed"]);function hY(n,e){const t=om(n,!0,e==="fixed"),i=t.top+n.clientTop,r=t.left+n.clientLeft,s=xu(n)?y0(n):mu(1),o=n.clientWidth*s.x,a=n.clientHeight*s.y,l=r*s.x,c=i*s.y;return{width:o,height:a,x:l,y:c}}function qN(n,e,t){let i;if(e==="viewport")i=uY(n,t);else if(e==="document")i=cY(Su(n));else if(Lo(e))i=hY(e,t);else{const r=WB(n);i={x:e.x-r.x,y:e.y-r.y,width:e.width,height:e.height}}return KS(i)}function qB(n,e){const t=dd(n);return t===e||!Lo(t)||T0(t)?!1:dc(t).position==="fixed"||qB(t,e)}function dY(n,e){const t=e.get(n);if(t)return t;let i=u_(n,[],!1).filter(a=>Lo(a)&&K0(a)!=="body"),r=null;const s=dc(n).position==="fixed";let o=s?dd(n):n;for(;Lo(o)&&!T0(o);){const a=dc(o),l=PO(o);!l&&a.position==="fixed"&&(r=null),(s?!l&&!r:!l&&a.position==="static"&&!!r&&fY.has(r.position)||Z_(o)&&!l&&qB(n,o))?i=i.filter(f=>f!==o):r=a,o=dd(o)}return e.set(n,i),i}function pY(n){let{element:e,boundary:t,rootBoundary:i,strategy:r}=n;const o=[...t==="clippingAncestors"?RM(e)?[]:dY(e,this._c):[].concat(t),i],a=o[0],l=o.reduce((c,f)=>{const d=qN(e,f,r);return c.top=Ra(d.top,c.top),c.right=A0(d.right,c.right),c.bottom=A0(d.bottom,c.bottom),c.left=Ra(d.left,c.left),c},qN(e,a,r));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function mY(n){const{width:e,height:t}=jB(n);return{width:e,height:t}}function gY(n,e,t){const i=xu(e),r=Su(e),s=t==="fixed",o=om(n,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=mu(0);function c(){l.x=OM(r)}if(i||!i&&!s)if((K0(e)!=="body"||Z_(r))&&(a=DM(e)),i){const v=om(e,!0,s,e);l.x=v.x+e.clientLeft,l.y=v.y+e.clientTop}else r&&c();s&&!i&&r&&c();const f=r&&!i&&!s?$B(r,a):mu(0),d=o.left+a.scrollLeft-l.x-f.x,m=o.top+a.scrollTop-l.y-f.y;return{x:d,y:m,width:o.width,height:o.height}}function BA(n){return dc(n).position==="static"}function XN(n,e){if(!xu(n)||dc(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return Su(n)===t&&(t=t.ownerDocument.body),t}function XB(n,e){const t=La(n);if(RM(n))return t;if(!xu(n)){let r=dd(n);for(;r&&!T0(r);){if(Lo(r)&&!BA(r))return r;r=dd(r)}return t}let i=XN(n,e);for(;i&&yX(i)&&BA(i);)i=XN(i,e);return i&&T0(i)&&BA(i)&&!PO(i)?t:i||SX(n)||t}const vY=async function(n){const e=this.getOffsetParent||XB,t=this.getDimensions,i=await t(n.floating);return{reference:gY(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function yY(n){return dc(n).direction==="rtl"}const bY={convertOffsetParentRelativeRectToViewportRelativeRect:aY,getDocumentElement:Su,getClippingRect:pY,getOffsetParent:XB,getElementRects:vY,getClientRects:lY,getDimensions:mY,getScale:y0,isElement:Lo,isRTL:yY};function YB(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function _Y(n,e){let t=null,i;const r=Su(n);function s(){var a;clearTimeout(i),(a=t)==null||a.disconnect(),t=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const c=n.getBoundingClientRect(),{left:f,top:d,width:m,height:v}=c;if(a||e(),!m||!v)return;const b=Z1(d),x=Z1(r.clientWidth-(f+m)),w=Z1(r.clientHeight-(d+v)),_=Z1(f),T={rootMargin:-b+"px "+-x+"px "+-w+"px "+-_+"px",threshold:Ra(0,A0(1,l))||1};let E=!0;function C(R){const O=R[0].intersectionRatio;if(O!==l){if(!E)return o();O?o(!1,O):i=setTimeout(()=>{o(!1,1e-7)},1e3)}O===1&&!YB(c,n.getBoundingClientRect())&&o(),E=!1}try{t=new IntersectionObserver(C,{...T,root:r.ownerDocument})}catch{t=new IntersectionObserver(C,T)}t.observe(n)}return o(!0),s}function xY(n,e,t,i){i===void 0&&(i={});const{ancestorScroll:r=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=i,c=UO(n),f=r||s?[...c?u_(c):[],...u_(e)]:[];f.forEach(_=>{r&&_.addEventListener("scroll",t,{passive:!0}),s&&_.addEventListener("resize",t)});const d=c&&a?_Y(c,t):null;let m=-1,v=null;o&&(v=new ResizeObserver(_=>{let[A]=_;A&&A.target===c&&v&&(v.unobserve(e),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var T;(T=v)==null||T.observe(e)})),t()}),c&&!l&&v.observe(c),v.observe(e));let b,x=l?om(n):null;l&&w();function w(){const _=om(n);x&&!YB(x,_)&&t(),x=_,b=requestAnimationFrame(w)}return t(),()=>{var _;f.forEach(A=>{r&&A.removeEventListener("scroll",t),s&&A.removeEventListener("resize",t)}),d?.(),(_=v)==null||_.disconnect(),v=null,l&&cancelAnimationFrame(b)}}const Q0=tY,wY=nY,ZB=JX,SY=rY,EY=iY,MY=(n,e,t)=>{const i=new Map,r={platform:bY,...t},s={...r.platform,_c:i};return QX(n,e,{...r,platform:s})};var TY=typeof document<"u",AY=function(){},TS=TY?$.useLayoutEffect:AY;function iE(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,i,r;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(i=t;i--!==0;)if(!iE(n[i],e[i]))return!1;return!0}if(r=Object.keys(n),t=r.length,t!==Object.keys(e).length)return!1;for(i=t;i--!==0;)if(!{}.hasOwnProperty.call(e,r[i]))return!1;for(i=t;i--!==0;){const s=r[i];if(!(s==="_owner"&&n.$$typeof)&&!iE(n[s],e[s]))return!1}return!0}return n!==n&&e!==e}function KB(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function YN(n,e){const t=KB(n);return Math.round(e*t)/t}function VA(n){const e=$.useRef(n);return TS(()=>{e.current=n}),e}function CY(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:i=[],platform:r,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=n,[f,d]=$.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[m,v]=$.useState(i);iE(m,i)||v(i);const[b,x]=$.useState(null),[w,_]=$.useState(null),A=$.useCallback(K=>{K!==R.current&&(R.current=K,x(K))},[]),T=$.useCallback(K=>{K!==O.current&&(O.current=K,_(K))},[]),E=s||b,C=o||w,R=$.useRef(null),O=$.useRef(null),I=$.useRef(f),L=l!=null,N=VA(l),V=VA(r),B=VA(c),k=$.useCallback(()=>{if(!R.current||!O.current)return;const K={placement:e,strategy:t,middleware:m};V.current&&(K.platform=V.current),MY(R.current,O.current,K).then(te=>{const ie={...te,isPositioned:B.current!==!1};j.current&&!iE(I.current,ie)&&(I.current=ie,DB.flushSync(()=>{d(ie)}))})},[m,e,t,V,B]);TS(()=>{c===!1&&I.current.isPositioned&&(I.current.isPositioned=!1,d(K=>({...K,isPositioned:!1})))},[c]);const j=$.useRef(!1);TS(()=>(j.current=!0,()=>{j.current=!1}),[]),TS(()=>{if(E&&(R.current=E),C&&(O.current=C),E&&C){if(N.current)return N.current(E,C,k);k()}},[E,C,k,N,L]);const q=$.useMemo(()=>({reference:R,floating:O,setReference:A,setFloating:T}),[A,T]),W=$.useMemo(()=>({reference:E,floating:C}),[E,C]),G=$.useMemo(()=>{const K={position:t,left:0,top:0};if(!W.floating)return K;const te=YN(W.floating,f.x),ie=YN(W.floating,f.y);return a?{...K,transform:"translate("+te+"px, "+ie+"px)",...KB(W.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:te,top:ie}},[t,a,W.floating,f.x,f.y]);return $.useMemo(()=>({...f,update:k,refs:q,elements:W,floatingStyles:G}),[f,k,q,W,G])}const RY=(n,e)=>({...wY(n),options:[n,e]}),DY=(n,e)=>({...EY(n),options:[n,e]}),OY=(n,e)=>({...ZB(n),options:[n,e]}),ZN=(n,e)=>({...SY(n),options:[n,e]}),QB={...E7},LY=QB.useInsertionEffect,PY=LY||(n=>n());function IY(n){const e=$.useRef(()=>{});return PY(()=>{e.current=n}),$.useCallback(function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return e.current==null?void 0:e.current(...i)},[])}var F3=typeof document<"u"?$.useLayoutEffect:$.useEffect;let KN=!1,NY=0;const QN=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+NY++;function UY(){const[n,e]=$.useState(()=>KN?QN():void 0);return F3(()=>{n==null&&e(QN())},[]),$.useEffect(()=>{KN=!0},[]),n}const kY=QB.useId,zY=kY||UY;function FY(){const n=new Map;return{emit(e,t){var i;(i=n.get(e))==null||i.forEach(r=>r(t))},on(e,t){n.set(e,[...n.get(e)||[],t])},off(e,t){var i;n.set(e,((i=n.get(e))==null?void 0:i.filter(r=>r!==t))||[])}}}const BY=$.createContext(null),VY=$.createContext(null),GY=()=>{var n;return((n=$.useContext(BY))==null?void 0:n.id)||null},HY=()=>$.useContext(VY);function jY(n){const{open:e=!1,onOpenChange:t,elements:i}=n,r=zY(),s=$.useRef({}),[o]=$.useState(()=>FY()),a=GY()!=null,[l,c]=$.useState(i.reference),f=IY((v,b,x)=>{s.current.openEvent=v?b:void 0,o.emit("openchange",{open:v,event:b,reason:x,nested:a}),t?.(v,b,x)}),d=$.useMemo(()=>({setPositionReference:c}),[]),m=$.useMemo(()=>({reference:l||i.reference||null,floating:i.floating||null,domReference:i.reference}),[l,i.reference,i.floating]);return $.useMemo(()=>({dataRef:s,open:e,onOpenChange:f,elements:m,events:o,floatingId:r,refs:d}),[e,f,m,o,r,d])}function WY(n){n===void 0&&(n={});const{nodeId:e}=n,t=jY({...n,elements:{reference:null,floating:null,...n.elements}}),i=n.rootContext||t,r=i.elements,[s,o]=$.useState(null),[a,l]=$.useState(null),f=r?.domReference||s,d=$.useRef(null),m=HY();F3(()=>{f&&(d.current=f)},[f]);const v=CY({...n,elements:{...r,...a&&{reference:a}}}),b=$.useCallback(T=>{const E=Lo(T)?{getBoundingClientRect:()=>T.getBoundingClientRect(),contextElement:T}:T;l(E),v.refs.setReference(E)},[v.refs]),x=$.useCallback(T=>{(Lo(T)||T===null)&&(d.current=T,o(T)),(Lo(v.refs.reference.current)||v.refs.reference.current===null||T!==null&&!Lo(T))&&v.refs.setReference(T)},[v.refs]),w=$.useMemo(()=>({...v.refs,setReference:x,setPositionReference:b,domReference:d}),[v.refs,x,b]),_=$.useMemo(()=>({...v.elements,domReference:f}),[v.elements,f]),A=$.useMemo(()=>({...v,...i,refs:w,elements:_,nodeId:e}),[v,w,_,e,i]);return F3(()=>{i.dataRef.current.floatingContext=A;const T=m?.nodesRef.current.find(E=>E.id===e);T&&(T.context=A)}),$.useMemo(()=>({...v,context:A,refs:w,elements:_}),[v,w,_,A])}const kO="-",$Y=n=>{const e=XY(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:i}=n;return{getClassGroupId:o=>{const a=o.split(kO);return a[0]===""&&a.length!==1&&a.shift(),JB(a,e)||qY(o)},getConflictingClassGroupIds:(o,a)=>{const l=t[o]||[];return a&&i[o]?[...l,...i[o]]:l}}},JB=(n,e)=>{if(n.length===0)return e.classGroupId;const t=n[0],i=e.nextPart.get(t),r=i?JB(n.slice(1),i):void 0;if(r)return r;if(e.validators.length===0)return;const s=n.join(kO);return e.validators.find(({validator:o})=>o(s))?.classGroupId},JN=/^\[(.+)\]$/,qY=n=>{if(JN.test(n)){const e=JN.exec(n)[1],t=e?.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},XY=n=>{const{theme:e,prefix:t}=n,i={nextPart:new Map,validators:[]};return ZY(Object.entries(n.classGroups),t).forEach(([s,o])=>{B3(o,i,s,e)}),i},B3=(n,e,t,i)=>{n.forEach(r=>{if(typeof r=="string"){const s=r===""?e:eU(e,r);s.classGroupId=t;return}if(typeof r=="function"){if(YY(r)){B3(r(i),e,t,i);return}e.validators.push({validator:r,classGroupId:t});return}Object.entries(r).forEach(([s,o])=>{B3(o,eU(e,s),t,i)})})},eU=(n,e)=>{let t=n;return e.split(kO).forEach(i=>{t.nextPart.has(i)||t.nextPart.set(i,{nextPart:new Map,validators:[]}),t=t.nextPart.get(i)}),t},YY=n=>n.isThemeGetter,ZY=(n,e)=>e?n.map(([t,i])=>{const r=i.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([o,a])=>[e+o,a])):s);return[t,r]}):n,KY=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,i=new Map;const r=(s,o)=>{t.set(s,o),e++,e>n&&(e=0,i=t,t=new Map)};return{get(s){let o=t.get(s);if(o!==void 0)return o;if((o=i.get(s))!==void 0)return r(s,o),o},set(s,o){t.has(s)?t.set(s,o):r(s,o)}}},e6="!",QY=n=>{const{separator:e,experimentalParseClassName:t}=n,i=e.length===1,r=e[0],s=e.length,o=a=>{const l=[];let c=0,f=0,d;for(let w=0;w<a.length;w++){let _=a[w];if(c===0){if(_===r&&(i||a.slice(w,w+s)===e)){l.push(a.slice(f,w)),f=w+s;continue}if(_==="/"){d=w;continue}}_==="["?c++:_==="]"&&c--}const m=l.length===0?a:a.substring(f),v=m.startsWith(e6),b=v?m.substring(1):m,x=d&&d>f?d-f:void 0;return{modifiers:l,hasImportantModifier:v,baseClassName:b,maybePostfixModifierPosition:x}};return t?a=>t({className:a,parseClassName:o}):o},JY=n=>{if(n.length<=1)return n;const e=[];let t=[];return n.forEach(i=>{i[0]==="["?(e.push(...t.sort(),i),t=[]):t.push(i)}),e.push(...t.sort()),e},eZ=n=>({cache:KY(n.cacheSize),parseClassName:QY(n),...$Y(n)}),tZ=/\s+/,nZ=(n,e)=>{const{parseClassName:t,getClassGroupId:i,getConflictingClassGroupIds:r}=e,s=[],o=n.trim().split(tZ);let a="";for(let l=o.length-1;l>=0;l-=1){const c=o[l],{modifiers:f,hasImportantModifier:d,baseClassName:m,maybePostfixModifierPosition:v}=t(c);let b=!!v,x=i(b?m.substring(0,v):m);if(!x){if(!b){a=c+(a.length>0?" "+a:a);continue}if(x=i(m),!x){a=c+(a.length>0?" "+a:a);continue}b=!1}const w=JY(f).join(":"),_=d?w+e6:w,A=_+x;if(s.includes(A))continue;s.push(A);const T=r(x,b);for(let E=0;E<T.length;++E){const C=T[E];s.push(_+C)}a=c+(a.length>0?" "+a:a)}return a};function iZ(){let n=0,e,t,i="";for(;n<arguments.length;)(e=arguments[n++])&&(t=t6(e))&&(i&&(i+=" "),i+=t);return i}const t6=n=>{if(typeof n=="string")return n;let e,t="";for(let i=0;i<n.length;i++)n[i]&&(e=t6(n[i]))&&(t&&(t+=" "),t+=e);return t};function rZ(n,...e){let t,i,r,s=o;function o(l){const c=e.reduce((f,d)=>d(f),n());return t=eZ(c),i=t.cache.get,r=t.cache.set,s=a,a(l)}function a(l){const c=i(l);if(c)return c;const f=nZ(l,t);return r(l,f),f}return function(){return s(iZ.apply(null,arguments))}}const Vi=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},n6=/^\[(?:([a-z-]+):)?(.+)\]$/i,sZ=/^\d+\/\d+$/,oZ=new Set(["px","full","screen"]),aZ=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,lZ=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,cZ=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,uZ=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,fZ=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,af=n=>b0(n)||oZ.has(n)||sZ.test(n),Fh=n=>J0(n,"length",bZ),b0=n=>!!n&&!Number.isNaN(Number(n)),GA=n=>J0(n,"number",b0),Uy=n=>!!n&&Number.isInteger(Number(n)),hZ=n=>n.endsWith("%")&&b0(n.slice(0,-1)),Sn=n=>n6.test(n),Bh=n=>aZ.test(n),dZ=new Set(["length","size","percentage"]),pZ=n=>J0(n,dZ,i6),mZ=n=>J0(n,"position",i6),gZ=new Set(["image","url"]),vZ=n=>J0(n,gZ,xZ),yZ=n=>J0(n,"",_Z),ky=()=>!0,J0=(n,e,t)=>{const i=n6.exec(n);return i?i[1]?typeof e=="string"?i[1]===e:e.has(i[1]):t(i[2]):!1},bZ=n=>lZ.test(n)&&!cZ.test(n),i6=()=>!1,_Z=n=>uZ.test(n),xZ=n=>fZ.test(n),wZ=()=>{const n=Vi("colors"),e=Vi("spacing"),t=Vi("blur"),i=Vi("brightness"),r=Vi("borderColor"),s=Vi("borderRadius"),o=Vi("borderSpacing"),a=Vi("borderWidth"),l=Vi("contrast"),c=Vi("grayscale"),f=Vi("hueRotate"),d=Vi("invert"),m=Vi("gap"),v=Vi("gradientColorStops"),b=Vi("gradientColorStopPositions"),x=Vi("inset"),w=Vi("margin"),_=Vi("opacity"),A=Vi("padding"),T=Vi("saturate"),E=Vi("scale"),C=Vi("sepia"),R=Vi("skew"),O=Vi("space"),I=Vi("translate"),L=()=>["auto","contain","none"],N=()=>["auto","hidden","clip","visible","scroll"],V=()=>["auto",Sn,e],B=()=>[Sn,e],k=()=>["",af,Fh],j=()=>["auto",b0,Sn],q=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],W=()=>["solid","dashed","dotted","double","none"],G=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],K=()=>["start","end","center","between","around","evenly","stretch"],te=()=>["","0",Sn],ie=()=>["auto","avoid","all","avoid-page","page","left","right","column"],F=()=>[b0,Sn];return{cacheSize:500,separator:":",theme:{colors:[ky],spacing:[af,Fh],blur:["none","",Bh,Sn],brightness:F(),borderColor:[n],borderRadius:["none","","full",Bh,Sn],borderSpacing:B(),borderWidth:k(),contrast:F(),grayscale:te(),hueRotate:F(),invert:te(),gap:B(),gradientColorStops:[n],gradientColorStopPositions:[hZ,Fh],inset:V(),margin:V(),opacity:F(),padding:B(),saturate:F(),scale:F(),sepia:te(),skew:F(),space:B(),translate:B()},classGroups:{aspect:[{aspect:["auto","square","video",Sn]}],container:["container"],columns:[{columns:[Bh]}],"break-after":[{"break-after":ie()}],"break-before":[{"break-before":ie()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...q(),Sn]}],overflow:[{overflow:N()}],"overflow-x":[{"overflow-x":N()}],"overflow-y":[{"overflow-y":N()}],overscroll:[{overscroll:L()}],"overscroll-x":[{"overscroll-x":L()}],"overscroll-y":[{"overscroll-y":L()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[x]}],"inset-x":[{"inset-x":[x]}],"inset-y":[{"inset-y":[x]}],start:[{start:[x]}],end:[{end:[x]}],top:[{top:[x]}],right:[{right:[x]}],bottom:[{bottom:[x]}],left:[{left:[x]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Uy,Sn]}],basis:[{basis:V()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Sn]}],grow:[{grow:te()}],shrink:[{shrink:te()}],order:[{order:["first","last","none",Uy,Sn]}],"grid-cols":[{"grid-cols":[ky]}],"col-start-end":[{col:["auto",{span:["full",Uy,Sn]},Sn]}],"col-start":[{"col-start":j()}],"col-end":[{"col-end":j()}],"grid-rows":[{"grid-rows":[ky]}],"row-start-end":[{row:["auto",{span:[Uy,Sn]},Sn]}],"row-start":[{"row-start":j()}],"row-end":[{"row-end":j()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Sn]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Sn]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...K()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...K(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...K(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[A]}],px:[{px:[A]}],py:[{py:[A]}],ps:[{ps:[A]}],pe:[{pe:[A]}],pt:[{pt:[A]}],pr:[{pr:[A]}],pb:[{pb:[A]}],pl:[{pl:[A]}],m:[{m:[w]}],mx:[{mx:[w]}],my:[{my:[w]}],ms:[{ms:[w]}],me:[{me:[w]}],mt:[{mt:[w]}],mr:[{mr:[w]}],mb:[{mb:[w]}],ml:[{ml:[w]}],"space-x":[{"space-x":[O]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[O]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Sn,e]}],"min-w":[{"min-w":[Sn,e,"min","max","fit"]}],"max-w":[{"max-w":[Sn,e,"none","full","min","max","fit","prose",{screen:[Bh]},Bh]}],h:[{h:[Sn,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Sn,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Sn,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Sn,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Bh,Fh]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",GA]}],"font-family":[{font:[ky]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Sn]}],"line-clamp":[{"line-clamp":["none",b0,GA]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",af,Sn]}],"list-image":[{"list-image":["none",Sn]}],"list-style-type":[{list:["none","disc","decimal",Sn]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[_]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[_]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...W(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",af,Fh]}],"underline-offset":[{"underline-offset":["auto",af,Sn]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:B()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Sn]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Sn]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[_]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...q(),mZ]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",pZ]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},vZ]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[b]}],"gradient-via-pos":[{via:[b]}],"gradient-to-pos":[{to:[b]}],"gradient-from":[{from:[v]}],"gradient-via":[{via:[v]}],"gradient-to":[{to:[v]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[_]}],"border-style":[{border:[...W(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[_]}],"divide-style":[{divide:W()}],"border-color":[{border:[r]}],"border-color-x":[{"border-x":[r]}],"border-color-y":[{"border-y":[r]}],"border-color-s":[{"border-s":[r]}],"border-color-e":[{"border-e":[r]}],"border-color-t":[{"border-t":[r]}],"border-color-r":[{"border-r":[r]}],"border-color-b":[{"border-b":[r]}],"border-color-l":[{"border-l":[r]}],"divide-color":[{divide:[r]}],"outline-style":[{outline:["",...W()]}],"outline-offset":[{"outline-offset":[af,Sn]}],"outline-w":[{outline:[af,Fh]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:k()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[_]}],"ring-offset-w":[{"ring-offset":[af,Fh]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",Bh,yZ]}],"shadow-color":[{shadow:[ky]}],opacity:[{opacity:[_]}],"mix-blend":[{"mix-blend":[...G(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":G()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[i]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Bh,Sn]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[f]}],invert:[{invert:[d]}],saturate:[{saturate:[T]}],sepia:[{sepia:[C]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[i]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[f]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[_]}],"backdrop-saturate":[{"backdrop-saturate":[T]}],"backdrop-sepia":[{"backdrop-sepia":[C]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Sn]}],duration:[{duration:F()}],ease:[{ease:["linear","in","out","in-out",Sn]}],delay:[{delay:F()}],animate:[{animate:["none","spin","ping","pulse","bounce",Sn]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[E]}],"scale-x":[{"scale-x":[E]}],"scale-y":[{"scale-y":[E]}],rotate:[{rotate:[Uy,Sn]}],"translate-x":[{"translate-x":[I]}],"translate-y":[{"translate-y":[I]}],"skew-x":[{"skew-x":[R]}],"skew-y":[{"skew-y":[R]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Sn]}],accent:[{accent:["auto",n]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Sn]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":B()}],"scroll-mx":[{"scroll-mx":B()}],"scroll-my":[{"scroll-my":B()}],"scroll-ms":[{"scroll-ms":B()}],"scroll-me":[{"scroll-me":B()}],"scroll-mt":[{"scroll-mt":B()}],"scroll-mr":[{"scroll-mr":B()}],"scroll-mb":[{"scroll-mb":B()}],"scroll-ml":[{"scroll-ml":B()}],"scroll-p":[{"scroll-p":B()}],"scroll-px":[{"scroll-px":B()}],"scroll-py":[{"scroll-py":B()}],"scroll-ps":[{"scroll-ps":B()}],"scroll-pe":[{"scroll-pe":B()}],"scroll-pt":[{"scroll-pt":B()}],"scroll-pr":[{"scroll-pr":B()}],"scroll-pb":[{"scroll-pb":B()}],"scroll-pl":[{"scroll-pl":B()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Sn]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[af,Fh,GA]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},tn=rZ(wZ);function Ia(n){const e=Object.prototype.toString.call(n);return n instanceof Date||typeof n=="object"&&e==="[object Date]"?new n.constructor(+n):typeof n=="number"||e==="[object Number]"||typeof n=="string"||e==="[object String]"?new Date(n):new Date(NaN)}function rE(n,e){return n instanceof Date?new n.constructor(e):new Date(e)}function Ao(n,e){const t=Ia(n);return isNaN(e)?rE(n,NaN):(e&&t.setDate(t.getDate()+e),t)}function Of(n,e){const t=Ia(n);if(isNaN(e))return rE(n,NaN);if(!e)return t;const i=t.getDate(),r=rE(n,t.getTime());r.setMonth(t.getMonth()+e+1,0);const s=r.getDate();return i>=s?r:(t.setFullYear(r.getFullYear(),r.getMonth(),i),t)}let SZ={};function r6(){return SZ}function zO(n,e){const t=r6(),i=t.weekStartsOn??t.locale?.options?.weekStartsOn??0,r=Ia(n),s=r.getDay(),o=(s<i?7:0)+s-i;return r.setDate(r.getDate()-o),r.setHours(0,0,0,0),r}function lu(n){const e=Ia(n);return e.setHours(0,0,0,0),e}function Xp(n,e){const t=e*7;return Ao(n,t)}function Yp(n,e){return Of(n,e*12)}function cu(n){const e=Ia(n);return e.setHours(23,59,59,999),e}function FO(n){const e=Ia(n),t=e.getMonth();return e.setFullYear(e.getFullYear(),t+1,0),e.setHours(23,59,59,999),e}function BO(n){const e=Ia(n);return e.setDate(1),e.setHours(0,0,0,0),e}function s6(n){const e=Ia(n),t=e.getFullYear();return e.setFullYear(t+1,0,0),e.setHours(23,59,59,999),e}function o6(n){const e=Ia(n),t=rE(n,0);return t.setFullYear(e.getFullYear(),0,1),t.setHours(0,0,0,0),t}function VO(n,e){const t=r6(),i=t.weekStartsOn??t.locale?.options?.weekStartsOn??0,r=Ia(n),s=r.getDay(),o=(s<i?-7:0)+6-(s-i);return r.setDate(r.getDate()+o),r.setHours(23,59,59,999),r}function ou(n,e){return Ao(n,-e)}function lf(n,e){const t=Ia(n);return t.setHours(e),t}function cf(n,e){const t=Ia(n);return t.setMinutes(e),t}function uf(n,e){const t=Ia(n);return t.setSeconds(e),t}function Gp(n,e){return Of(n,-e)}function _0(n,e){return Xp(n,-e)}function x0(n,e){return Yp(n,-e)}var HA={exports:{}},jA,tU;function EZ(){if(tU)return jA;tU=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return jA=n,jA}var WA,nU;function MZ(){if(nU)return WA;nU=1;var n=EZ();function e(){}function t(){}return t.resetWarningCache=e,WA=function(){function i(o,a,l,c,f,d){if(d!==n){var m=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw m.name="Invariant Violation",m}}i.isRequired=i;function r(){return i}var s={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:r,element:i,elementType:i,instanceOf:r,node:i,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:t,resetWarningCache:e};return s.PropTypes=s,s},WA}var iU;function TZ(){return iU||(iU=1,HA.exports=MZ()()),HA.exports}function V3(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=Array(e);t<e;t++)i[t]=n[t];return i}function AZ(n){if(Array.isArray(n))return V3(n)}function rU(n,e){var t=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!t){if(Array.isArray(n)||(t=a6(n))||e){t&&(n=t);var i=0,r=function(){};return{s:r,n:function(){return i>=n.length?{done:!0}:{done:!1,value:n[i++]}},e:function(l){throw l},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s,o=!0,a=!1;return{s:function(){t=t.call(n)},n:function(){var l=t.next();return o=l.done,l},e:function(l){a=!0,s=l},f:function(){try{o||t.return==null||t.return()}finally{if(a)throw s}}}}function CZ(n,e,t){return(e=PZ(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function RZ(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function DZ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sU(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function oU(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?sU(Object(t),!0).forEach(function(i){CZ(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):sU(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function OZ(n){return AZ(n)||RZ(n)||a6(n)||DZ()}function LZ(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function PZ(n){var e=LZ(n,"string");return typeof e=="symbol"?e:e+""}function a6(n,e){if(n){if(typeof n=="string")return V3(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?V3(n,e):void 0}}var Af={getActiveTrap:function(e){return e?.length>0?e[e.length-1]:null},activateTrap:function(e,t){var i=Af.getActiveTrap(e);t!==i&&Af.pauseTrap(e);var r=e.indexOf(t);r===-1||e.splice(r,1),e.push(t)},deactivateTrap:function(e,t){var i=e.indexOf(t);i!==-1&&e.splice(i,1),Af.unpauseTrap(e)},pauseTrap:function(e){var t=Af.getActiveTrap(e);t?._setPausedState(!0)},unpauseTrap:function(e){var t=Af.getActiveTrap(e);t&&!t._isManuallyPaused()&&t._setPausedState(!1)}},IZ=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},NZ=function(e){return e?.key==="Escape"||e?.key==="Esc"||e?.keyCode===27},Vb=function(e){return e?.key==="Tab"||e?.keyCode===9},UZ=function(e){return Vb(e)&&!e.shiftKey},kZ=function(e){return Vb(e)&&e.shiftKey},aU=function(e){return setTimeout(e,0)},zy=function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];return typeof e=="function"?e.apply(void 0,i):e},K1=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},zZ=[],FZ=function(e,t){var i=t?.document||document,r=t?.trapStack||zZ,s=oU({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isolateSubtrees:!1,isKeyForward:UZ,isKeyBackward:kZ},t),o={containers:[],containerGroups:[],tabbableGroups:[],adjacentElements:new Set,alreadySilent:new Set,nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,manuallyPaused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},a,l=function(j,q,W){return j&&j[q]!==void 0?j[q]:s[W||q]},c=function(j,q){var W=typeof q?.composedPath=="function"?q.composedPath():void 0;return o.containerGroups.findIndex(function(G){var K=G.container,te=G.tabbableNodes;return K.contains(j)||W?.includes(K)||te.find(function(ie){return ie===j})})},f=function(j){var q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},W=q.hasFallback,G=W===void 0?!1:W,K=q.params,te=K===void 0?[]:K,ie=s[j];if(typeof ie=="function"&&(ie=ie.apply(void 0,OZ(te))),ie===!0&&(ie=void 0),!ie){if(ie===void 0||ie===!1)return ie;throw new Error("`".concat(j,"` was specified but was not a node, or did not return a node"))}var F=ie;if(typeof ie=="string"){try{F=i.querySelector(ie)}catch(X){throw new Error("`".concat(j,'` appears to be an invalid selector; error="').concat(X.message,'"'))}if(!F&&!G)throw new Error("`".concat(j,"` as selector refers to no known node"))}return F},d=function(){var j=f("initialFocus",{hasFallback:!0});if(j===!1)return!1;if(j===void 0||j&&!MS(j,s.tabbableOptions))if(c(i.activeElement)>=0)j=i.activeElement;else{var q=o.tabbableGroups[0],W=q&&q.firstTabbableNode;j=W||f("fallbackFocus")}else j===null&&(j=f("fallbackFocus"));if(!j)throw new Error("Your focus-trap needs to have at least one focusable element");return j},m=function(){if(o.containerGroups=o.containers.map(function(j){var q=VB(j,s.tabbableOptions),W=GB(j,s.tabbableOptions),G=q.length>0?q[0]:void 0,K=q.length>0?q[q.length-1]:void 0,te=W.find(function(X){return Op(X)}),ie=W.slice().reverse().find(function(X){return Op(X)}),F=!!q.find(function(X){return nd(X)>0});return{container:j,tabbableNodes:q,focusableNodes:W,posTabIndexesFound:F,firstTabbableNode:G,lastTabbableNode:K,firstDomTabbableNode:te,lastDomTabbableNode:ie,nextTabbableNode:function(ee){var le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,oe=q.indexOf(ee);return oe<0?le?W.slice(W.indexOf(ee)+1).find(function(ue){return Op(ue)}):W.slice(0,W.indexOf(ee)).reverse().find(function(ue){return Op(ue)}):q[oe+(le?1:-1)]}}}),o.tabbableGroups=o.containerGroups.filter(function(j){return j.tabbableNodes.length>0}),o.tabbableGroups.length<=0&&!f("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(o.containerGroups.find(function(j){return j.posTabIndexesFound})&&o.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},v=function(j){var q=j.activeElement;if(q)return q.shadowRoot&&q.shadowRoot.activeElement!==null?v(q.shadowRoot):q},b=function(j){if(j!==!1&&j!==v(document)){if(!j||!j.focus){b(d());return}j.focus({preventScroll:!!s.preventScroll}),o.mostRecentlyFocusedNode=j,IZ(j)&&j.select()}},x=function(j){var q=f("setReturnFocus",{params:[j]});return q||(q===!1?!1:j)},w=function(j){var q=j.target,W=j.event,G=j.isBackward,K=G===void 0?!1:G;q=q||K1(W),m();var te=null;if(o.tabbableGroups.length>0){var ie=c(q,W),F=ie>=0?o.containerGroups[ie]:void 0;if(ie<0)K?te=o.tabbableGroups[o.tabbableGroups.length-1].lastTabbableNode:te=o.tabbableGroups[0].firstTabbableNode;else if(K){var X=o.tabbableGroups.findIndex(function(be){var Te=be.firstTabbableNode;return q===Te});if(X<0&&(F.container===q||MS(q,s.tabbableOptions)&&!Op(q,s.tabbableOptions)&&!F.nextTabbableNode(q,!1))&&(X=ie),X>=0){var ee=X===0?o.tabbableGroups.length-1:X-1,le=o.tabbableGroups[ee];te=nd(q)>=0?le.lastTabbableNode:le.lastDomTabbableNode}else Vb(W)||(te=F.nextTabbableNode(q,!1))}else{var oe=o.tabbableGroups.findIndex(function(be){var Te=be.lastTabbableNode;return q===Te});if(oe<0&&(F.container===q||MS(q,s.tabbableOptions)&&!Op(q,s.tabbableOptions)&&!F.nextTabbableNode(q))&&(oe=ie),oe>=0){var ue=oe===o.tabbableGroups.length-1?0:oe+1,he=o.tabbableGroups[ue];te=nd(q)>=0?he.firstTabbableNode:he.firstDomTabbableNode}else Vb(W)||(te=F.nextTabbableNode(q))}}else te=f("fallbackFocus");return te},_=function(j){var q=K1(j);if(!(c(q,j)>=0)){if(zy(s.clickOutsideDeactivates,j)){a.deactivate({returnFocus:s.returnFocusOnDeactivate});return}zy(s.allowOutsideClick,j)||j.preventDefault()}},A=function(j){var q=K1(j),W=c(q,j)>=0;if(W||q instanceof Document)W&&(o.mostRecentlyFocusedNode=q);else{j.stopImmediatePropagation();var G,K=!0;if(o.mostRecentlyFocusedNode)if(nd(o.mostRecentlyFocusedNode)>0){var te=c(o.mostRecentlyFocusedNode),ie=o.containerGroups[te].tabbableNodes;if(ie.length>0){var F=ie.findIndex(function(X){return X===o.mostRecentlyFocusedNode});F>=0&&(s.isKeyForward(o.recentNavEvent)?F+1<ie.length&&(G=ie[F+1],K=!1):F-1>=0&&(G=ie[F-1],K=!1))}}else o.containerGroups.some(function(X){return X.tabbableNodes.some(function(ee){return nd(ee)>0})})||(K=!1);else K=!1;K&&(G=w({target:o.mostRecentlyFocusedNode,isBackward:s.isKeyBackward(o.recentNavEvent)})),b(G||o.mostRecentlyFocusedNode||d())}o.recentNavEvent=void 0},T=function(j){var q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;o.recentNavEvent=j;var W=w({event:j,isBackward:q});W&&(Vb(j)&&j.preventDefault(),b(W))},E=function(j){(s.isKeyForward(j)||s.isKeyBackward(j))&&T(j,s.isKeyBackward(j))},C=function(j){NZ(j)&&zy(s.escapeDeactivates,j)!==!1&&(j.preventDefault(),a.deactivate())},R=function(j){var q=K1(j);c(q,j)>=0||zy(s.clickOutsideDeactivates,j)||zy(s.allowOutsideClick,j)||(j.preventDefault(),j.stopImmediatePropagation())},O=function(){if(o.active)return Af.activateTrap(r,a),o.delayInitialFocusTimer=s.delayInitialFocus?aU(function(){b(d())}):b(d()),i.addEventListener("focusin",A,!0),i.addEventListener("mousedown",_,{capture:!0,passive:!1}),i.addEventListener("touchstart",_,{capture:!0,passive:!1}),i.addEventListener("click",R,{capture:!0,passive:!1}),i.addEventListener("keydown",E,{capture:!0,passive:!1}),i.addEventListener("keydown",C),a},I=function(j){o.active&&!o.paused&&a._setSubtreeIsolation(!1),o.adjacentElements.clear(),o.alreadySilent.clear();var q=new Set,W=new Set,G=rU(j),K;try{for(G.s();!(K=G.n()).done;){var te=K.value;q.add(te);for(var ie=typeof ShadowRoot<"u"&&te.getRootNode()instanceof ShadowRoot,F=te;F;){q.add(F);var X=F.parentElement,ee=[];X?ee=X.children:!X&&ie&&(ee=F.getRootNode().children,X=F.getRootNode().host,ie=typeof ShadowRoot<"u"&&X.getRootNode()instanceof ShadowRoot);var le=rU(ee),oe;try{for(le.s();!(oe=le.n()).done;){var ue=oe.value;W.add(ue)}}catch(he){le.e(he)}finally{le.f()}F=X}}}catch(he){G.e(he)}finally{G.f()}q.forEach(function(he){W.delete(he)}),o.adjacentElements=W},L=function(){if(o.active)return i.removeEventListener("focusin",A,!0),i.removeEventListener("mousedown",_,!0),i.removeEventListener("touchstart",_,!0),i.removeEventListener("click",R,!0),i.removeEventListener("keydown",E,!0),i.removeEventListener("keydown",C),a},N=function(j){var q=j.some(function(W){var G=Array.from(W.removedNodes);return G.some(function(K){return K===o.mostRecentlyFocusedNode})});q&&b(d())},V=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(N):void 0,B=function(){V&&(V.disconnect(),o.active&&!o.paused&&o.containers.map(function(j){V.observe(j,{subtree:!0,childList:!0})}))};return a={get active(){return o.active},get paused(){return o.paused},activate:function(j){if(o.active)return this;var q=l(j,"onActivate"),W=l(j,"onPostActivate"),G=l(j,"checkCanFocusTrap"),K=Af.getActiveTrap(r),te=!1;if(K&&!K.paused){var ie;(ie=K._setSubtreeIsolation)===null||ie===void 0||ie.call(K,!1),te=!0}try{G||m(),o.active=!0,o.paused=!1,o.nodeFocusedBeforeActivation=v(i),q?.();var F=function(){G&&m(),O(),B(),s.isolateSubtrees&&a._setSubtreeIsolation(!0),W?.()};if(G)return G(o.containers.concat()).then(F,F),this;F()}catch(ee){if(K===Af.getActiveTrap(r)&&te){var X;(X=K._setSubtreeIsolation)===null||X===void 0||X.call(K,!0)}throw ee}return this},deactivate:function(j){if(!o.active)return this;var q=oU({onDeactivate:s.onDeactivate,onPostDeactivate:s.onPostDeactivate,checkCanReturnFocus:s.checkCanReturnFocus},j);clearTimeout(o.delayInitialFocusTimer),o.delayInitialFocusTimer=void 0,o.paused||a._setSubtreeIsolation(!1),o.alreadySilent.clear(),L(),o.active=!1,o.paused=!1,B(),Af.deactivateTrap(r,a);var W=l(q,"onDeactivate"),G=l(q,"onPostDeactivate"),K=l(q,"checkCanReturnFocus"),te=l(q,"returnFocus","returnFocusOnDeactivate");W?.();var ie=function(){aU(function(){te&&b(x(o.nodeFocusedBeforeActivation)),G?.()})};return te&&K?(K(x(o.nodeFocusedBeforeActivation)).then(ie,ie),this):(ie(),this)},pause:function(j){return o.active?(o.manuallyPaused=!0,this._setPausedState(!0,j)):this},unpause:function(j){return o.active?(o.manuallyPaused=!1,r[r.length-1]!==this?this:this._setPausedState(!1,j)):this},updateContainerElements:function(j){var q=[].concat(j).filter(Boolean);return o.containers=q.map(function(W){return typeof W=="string"?i.querySelector(W):W}),s.isolateSubtrees&&I(o.containers),o.active&&(m(),s.isolateSubtrees&&!o.paused&&a._setSubtreeIsolation(!0)),B(),this}},Object.defineProperties(a,{_isManuallyPaused:{value:function(){return o.manuallyPaused}},_setPausedState:{value:function(j,q){if(o.paused===j)return this;if(o.paused=j,j){var W=l(q,"onPause"),G=l(q,"onPostPause");W?.(),L(),B(),a._setSubtreeIsolation(!1),G?.()}else{var K=l(q,"onUnpause"),te=l(q,"onPostUnpause");K?.(),a._setSubtreeIsolation(!0),m(),O(),B(),te?.()}return this}},_setSubtreeIsolation:{value:function(j){s.isolateSubtrees&&o.adjacentElements.forEach(function(q){var W;j?s.isolateSubtrees==="aria-hidden"?((q.ariaHidden==="true"||((W=q.getAttribute("aria-hidden"))===null||W===void 0?void 0:W.toLowerCase())==="true")&&o.alreadySilent.add(q),q.setAttribute("aria-hidden","true")):((q.inert||q.hasAttribute("inert"))&&o.alreadySilent.add(q),q.setAttribute("inert",!0)):o.alreadySilent.has(q)||(s.isolateSubtrees==="aria-hidden"?q.removeAttribute("aria-hidden"):q.removeAttribute("inert"))})}}}),a.updateContainerElements(e),a};const BZ=Object.freeze(Object.defineProperty({__proto__:null,createFocusTrap:FZ},Symbol.toStringTag,{value:"Module"})),VZ=wM(BZ),GZ=wM(ZX);var $A,lU;function HZ(){if(lU)return $A;lU=1;function n(R){"@babel/helpers - typeof";return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},n(R)}function e(R,O){if(!(R instanceof O))throw new TypeError("Cannot call a class as a function")}function t(R,O){for(var I=0;I<O.length;I++){var L=O[I];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(R,m(L.key),L)}}function i(R,O,I){return O&&t(R.prototype,O),Object.defineProperty(R,"prototype",{writable:!1}),R}function r(R,O,I){return O=l(O),s(R,a()?Reflect.construct(O,I||[],l(R).constructor):O.apply(R,I))}function s(R,O){if(O&&(n(O)=="object"||typeof O=="function"))return O;if(O!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return o(R)}function o(R){if(R===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R}function a(){try{var R=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(a=function(){return!!R})()}function l(R){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(O){return O.__proto__||Object.getPrototypeOf(O)},l(R)}function c(R,O){if(typeof O!="function"&&O!==null)throw new TypeError("Super expression must either be null or a function");R.prototype=Object.create(O&&O.prototype,{constructor:{value:R,writable:!0,configurable:!0}}),Object.defineProperty(R,"prototype",{writable:!1}),O&&f(R,O)}function f(R,O){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(I,L){return I.__proto__=L,I},f(R,O)}function d(R,O,I){return(O=m(O))in R?Object.defineProperty(R,O,{value:I,enumerable:!0,configurable:!0,writable:!0}):R[O]=I,R}function m(R){var O=v(R,"string");return n(O)=="symbol"?O:O+""}function v(R,O){if(n(R)!="object"||!R)return R;var I=R[Symbol.toPrimitive];if(I!==void 0){var L=I.call(R,O);if(n(L)!="object")return L;throw new TypeError("@@toPrimitive must return a primitive value.")}return(O==="string"?String:Number)(R)}var b=Xf(),x=TZ(),w=VZ,_=w.createFocusTrap,A=GZ,T=A.isFocusable,E=(function(R){function O(I){var L;e(this,O),L=r(this,O,[I]),d(L,"getNodeForOption",function(B){var k,j=(k=this.internalOptions[B])!==null&&k!==void 0?k:this.originalOptions[B];if(typeof j=="function"){for(var q=arguments.length,W=new Array(q>1?q-1:0),G=1;G<q;G++)W[G-1]=arguments[G];j=j.apply(void 0,W)}if(j===!0&&(j=void 0),!j){if(j===void 0||j===!1)return j;throw new Error("`".concat(B,"` was specified but was not a node, or did not return a node"))}var K=j;if(typeof j=="string"){var te;if(K=(te=this.getDocument())===null||te===void 0?void 0:te.querySelector(j),!K)throw new Error("`".concat(B,"` as selector refers to no known node"))}return K}),L.handleDeactivate=L.handleDeactivate.bind(L),L.handlePostDeactivate=L.handlePostDeactivate.bind(L),L.handleClickOutsideDeactivates=L.handleClickOutsideDeactivates.bind(L),L.internalOptions={returnFocusOnDeactivate:!1,checkCanReturnFocus:null,onDeactivate:L.handleDeactivate,onPostDeactivate:L.handlePostDeactivate,clickOutsideDeactivates:L.handleClickOutsideDeactivates},L.originalOptions={returnFocusOnDeactivate:!0,onDeactivate:null,onPostDeactivate:null,checkCanReturnFocus:null,clickOutsideDeactivates:!1};var N=I.focusTrapOptions;for(var V in N)if(Object.prototype.hasOwnProperty.call(N,V)){if(V==="returnFocusOnDeactivate"||V==="onDeactivate"||V==="onPostDeactivate"||V==="checkCanReturnFocus"||V==="clickOutsideDeactivates"){L.originalOptions[V]=N[V];continue}L.internalOptions[V]=N[V]}return L.outsideClick=null,L.focusTrapElements=I.containerElements||[],L.updatePreviousElement(),L}return c(O,R),i(O,[{key:"getDocument",value:function(){return this.props.focusTrapOptions.document||(typeof document<"u"?document:void 0)}},{key:"getReturnFocusNode",value:function(){var L=this.getNodeForOption("setReturnFocus",this.previouslyFocusedElement);return L||(L===!1?!1:this.previouslyFocusedElement)}},{key:"updatePreviousElement",value:function(){var L=this.getDocument();L&&(this.previouslyFocusedElement=L.activeElement)}},{key:"deactivateTrap",value:function(){!this.focusTrap||!this.focusTrap.active||this.focusTrap.deactivate({returnFocus:!1,checkCanReturnFocus:null,onDeactivate:this.originalOptions.onDeactivate})}},{key:"handleClickOutsideDeactivates",value:function(L){var N=typeof this.originalOptions.clickOutsideDeactivates=="function"?this.originalOptions.clickOutsideDeactivates.call(null,L):this.originalOptions.clickOutsideDeactivates;return N&&(this.outsideClick={target:L.target,allowDeactivation:N}),N}},{key:"handleDeactivate",value:function(){this.originalOptions.onDeactivate&&this.originalOptions.onDeactivate.call(null),this.deactivateTrap()}},{key:"handlePostDeactivate",value:function(){var L=this,N=function(){var B=L.getReturnFocusNode(),k=!!(L.originalOptions.returnFocusOnDeactivate&&B!==null&&B!==void 0&&B.focus&&(!L.outsideClick||L.outsideClick.allowDeactivation&&!T(L.outsideClick.target,L.internalOptions.tabbableOptions))),j=L.internalOptions.preventScroll,q=j===void 0?!1:j;k&&B.focus({preventScroll:q}),L.originalOptions.onPostDeactivate&&L.originalOptions.onPostDeactivate.call(null),L.outsideClick=null};this.originalOptions.checkCanReturnFocus?this.originalOptions.checkCanReturnFocus.call(null,this.getReturnFocusNode()).then(N,N):N()}},{key:"setupFocusTrap",value:function(){if(this.focusTrap)this.props.active&&!this.focusTrap.active&&(this.focusTrap.activate(),this.props.paused&&this.focusTrap.pause());else{var L=this.focusTrapElements.some(Boolean);L&&(this.focusTrap=this.props._createFocusTrap(this.focusTrapElements,this.internalOptions),this.props.active&&this.focusTrap.activate(),this.props.paused&&this.focusTrap.pause())}}},{key:"componentDidMount",value:function(){this.props.active&&this.setupFocusTrap()}},{key:"componentDidUpdate",value:function(L){if(this.focusTrap){L.containerElements!==this.props.containerElements&&this.focusTrap.updateContainerElements(this.props.containerElements);var N=!L.active&&this.props.active,V=L.active&&!this.props.active,B=!L.paused&&this.props.paused,k=L.paused&&!this.props.paused;if(N&&(this.updatePreviousElement(),this.focusTrap.activate()),V){this.deactivateTrap();return}B&&this.focusTrap.pause(),k&&this.focusTrap.unpause()}else L.containerElements!==this.props.containerElements&&(this.focusTrapElements=this.props.containerElements),this.props.active&&(this.updatePreviousElement(),this.setupFocusTrap())}},{key:"componentWillUnmount",value:function(){this.deactivateTrap()}},{key:"render",value:function(){var L=this,N=this.props.children?b.Children.only(this.props.children):void 0;if(N){if(N.type&&N.type===b.Fragment)throw new Error("A focus-trap cannot use a Fragment as its child container. Try replacing it with a <div> element.");var V=function(j){var q=L.props.containerElements;N&&(typeof N.ref=="function"?N.ref(j):N.ref&&(N.ref.current=j)),L.focusTrapElements=q||[j]},B=b.cloneElement(N,{ref:V});return B}return null}}])})(b.Component),C=typeof Element>"u"?Function:Element;return E.propTypes={active:x.bool,paused:x.bool,focusTrapOptions:x.shape({document:x.object,onActivate:x.func,onPostActivate:x.func,checkCanFocusTrap:x.func,onPause:x.func,onPostPause:x.func,onUnpause:x.func,onPostUnpause:x.func,onDeactivate:x.func,onPostDeactivate:x.func,checkCanReturnFocus:x.func,initialFocus:x.oneOfType([x.instanceOf(C),x.string,x.bool,x.func]),fallbackFocus:x.oneOfType([x.instanceOf(C),x.string,x.func]),escapeDeactivates:x.oneOfType([x.bool,x.func]),clickOutsideDeactivates:x.oneOfType([x.bool,x.func]),returnFocusOnDeactivate:x.bool,setReturnFocus:x.oneOfType([x.instanceOf(C),x.string,x.bool,x.func]),allowOutsideClick:x.oneOfType([x.bool,x.func]),preventScroll:x.bool,tabbableOptions:x.shape({displayCheck:x.oneOf(["full","legacy-full","non-zero-area","none"]),getShadowRoot:x.oneOfType([x.bool,x.func])}),trapStack:x.array,isKeyForward:x.func,isKeyBackward:x.func}),containerElements:x.arrayOf(x.instanceOf(C)),children:x.oneOfType([x.element,x.instanceOf(C)])},E.defaultProps={active:!0,paused:!1,focusTrapOptions:{},_createFocusTrap:_},$A=E,$A}var jZ=HZ();const WZ=ro(jZ);var Q1={exports:{}},cU;function $Z(){return cU||(cU=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(i){for(var r=i.toUpperCase().split(/[\s+-]/),s=[],o="",a=0;a<r.length&&t.test(r[a]);a++)s.push(r[a]);if(s.length>=1&&(o+=s[0].substr(0,1)),s.length>=2){for(var l=!1,c=1;c<s.length;c++)if(!s[c].match(/.\./)){l=!0,o+=s[c].substr(0,1);break}l||(o+=s[1].substr(0,1))}return o};var t=/^[a-z\u00C0-\u017F]/i;n.exports=e.default})(Q1,Q1.exports)),Q1.exports}var qZ=$Z();const XZ=ro(qZ);function YZ(n,e){let t=()=>(n.next()>>>0)/4294967296;return t.double=()=>{let i,r,s;do i=n.next()>>>11,r=(n.next()>>>0)/4294967296,s=(i+r)/(1<<21);while(s===0);return s},t.int32=()=>n.next()|0,t.quick=t,t}function ZZ(n,e){let t=new KZ(n);return YZ(t)}var KZ=class{constructor(e){e==null&&(e=+new Date);let t="";this.x=0,this.y=0,this.z=0,this.w=0,e===(e|0)?this.x=e:t+=e;for(let i=0;i<t.length+64;i++)this.x^=t.charCodeAt(i)|0,this.next()}next(){let{x:e,y:t,z:i,w:r}=this,s=e^e<<11;return this.x=t,this.y=i,this.z=r,this.w=r^(r>>>19^s^s>>>8)}copy(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}},QZ=n=>ZZ(n)(),qA={saturation:75,lightness:50,alpha:100},JZ=1.618033988749895;function eK(n,e={}){let{saturation:t,lightness:i,alpha:r}=tK(e),s=e.algorithm||QZ,o=nK(n,s);return`hsl(
    ${Math.floor(o*360)}
    , ${t}%, ${i}%, ${r}%
  )`}function tK(n={}){let{s:e,l:t,a:i,saturation:r=e??qA.saturation,lightness:s=t??qA.lightness,alpha:o=i??qA.alpha}=n;return{saturation:r,lightness:s,alpha:o}}function nK(n,e){return(e(n)+1/JZ)%1}var Fy={exports:{}},uU;function iK(){if(uU)return Fy.exports;uU=1;var n={ellipse:"",chars:[" ","-"],max:140,truncate:!0};function e(i,r,s,o){if(i<=r)return i;if(r<2)return i.slice(0,r-s.length)+s;for(var a=r-s.length,l=Math.floor(a/2),c=l,f=i.length-l,d=0;d<l;d++){var m=i.charAt(d),v=i.length-d,b=i.charAt(v);o.indexOf(m)!==-1&&(c=d),o.indexOf(b)!==-1&&(f=v)}return i.slice(0,c)+s+i.slice(f)}function t(i,r,s,o,a){if(i.length<=r)return i;for(var l=r-s.length,c=l,f=0;f<=l;f++){var d=i.charAt(f);o.indexOf(d)!==-1&&(c=f)}return!a&&c==l?"":i.slice(0,c)+s}return Fy.exports=function(i,r,s){if(typeof i!="string"||i.length===0||r===0)return"";s=s||{};for(var o in n)(s[o]===null||typeof s[o]>"u")&&(s[o]=n[o]);return s.max=r||s.max,s.truncate=="middle"?e(i,s.max,s.ellipse,s.chars):t(i,s.max,s.ellipse,s.chars,s.truncate)},Fy.exports.ellipsizeMiddle=e,Fy.exports.ellipsize=t,Fy.exports}iK();var l6="__0_1_2_3_4_5_6_7_8_9_a_b_c_d_e_f_g_h_i_j_k_l_m_n_o_p_q_r_s_t_u_v_w_x_y_z_ _`_'_\"_~_!_@_#_$_%_^_&_*_(_)_._-_+_=_[_]_{_}_<_>_,_/_?_;_:_\\_|_capslock_numlock_enter_tab_arrowdown_arrowleft_arrowright_arrowup_end_home_pagedown_pageup_backspace_delete_insert_escape_f1_f2_f3_f4_f5_f6_f7_f8_f9_f10_f11_f12_f13_f14_f15_f16_f17_f18_f19_f20_f21_f22_f23".split("_");l6[1]="_";for(let[n,e]of l6.entries());var XA={exports:{}};var fU;function rK(){return fU||(fU=1,(function(n){(function(){var e={}.hasOwnProperty;function t(){for(var s="",o=0;o<arguments.length;o++){var a=arguments[o];a&&(s=r(s,i(a)))}return s}function i(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return t.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var o="";for(var a in s)e.call(s,a)&&s[a]&&(o=r(o,a));return o}function r(s,o){return o?s?s+" "+o:s+o:s}n.exports?(t.default=t,n.exports=t):window.classNames=t})()})(XA)),XA.exports}var sK=rK();const id=ro(sK);var YA={exports:{}},hU;function oK(){return hU||(hU=1,(function(n){n.exports=(function(e){var t={};function i(r){if(t[r])return t[r].exports;var s=t[r]={exports:{},id:r,loaded:!1};return e[r].call(s.exports,s,s.exports,i),s.loaded=!0,s.exports}return i.m=e,i.c=t,i.p="",i(0)})([(function(e,t,i){e.exports=i(1)}),(function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});function r(a){return a&&a.__esModule?a:{default:a}}var s=i(2),o=r(s);t.default=o.default,e.exports=t.default}),(function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(b){for(var x=1;x<arguments.length;x++){var w=arguments[x];for(var _ in w)Object.prototype.hasOwnProperty.call(w,_)&&(b[_]=w[_])}return b};t.default=v;function s(b){return b&&b.__esModule?b:{default:b}}function o(b,x){var w={};for(var _ in b)x.indexOf(_)>=0||Object.prototype.hasOwnProperty.call(b,_)&&(w[_]=b[_]);return w}var a=i(3),l=i(4),c=s(l),f=i(14),d=i(15),m=s(d);v.propTypes={activeClassName:c.default.string,activeIndex:c.default.number,activeStyle:c.default.object,autoEscape:c.default.bool,className:c.default.string,findChunks:c.default.func,highlightClassName:c.default.oneOfType([c.default.object,c.default.string]),highlightStyle:c.default.object,highlightTag:c.default.oneOfType([c.default.node,c.default.func,c.default.string]),sanitize:c.default.func,searchWords:c.default.arrayOf(c.default.oneOfType([c.default.string,c.default.instanceOf(RegExp)])).isRequired,textToHighlight:c.default.string.isRequired,unhighlightTag:c.default.oneOfType([c.default.node,c.default.func,c.default.string]),unhighlightClassName:c.default.string,unhighlightStyle:c.default.object};function v(b){var x=b.activeClassName,w=x===void 0?"":x,_=b.activeIndex,A=_===void 0?-1:_,T=b.activeStyle,E=b.autoEscape,C=b.caseSensitive,R=C===void 0?!1:C,O=b.className,I=b.findChunks,L=b.highlightClassName,N=L===void 0?"":L,V=b.highlightStyle,B=V===void 0?{}:V,k=b.highlightTag,j=k===void 0?"mark":k,q=b.sanitize,W=b.searchWords,G=b.textToHighlight,K=b.unhighlightTag,te=K===void 0?"span":K,ie=b.unhighlightClassName,F=ie===void 0?"":ie,X=b.unhighlightStyle,ee=o(b,["activeClassName","activeIndex","activeStyle","autoEscape","caseSensitive","className","findChunks","highlightClassName","highlightStyle","highlightTag","sanitize","searchWords","textToHighlight","unhighlightTag","unhighlightClassName","unhighlightStyle"]),le=(0,a.findAll)({autoEscape:E,caseSensitive:R,findChunks:I,sanitize:q,searchWords:W,textToHighlight:G}),oe=j,ue=-1,he="",be=void 0,Te=function(we){var ae={};for(var ve in we)ae[ve.toLowerCase()]=we[ve];return ae},Ee=(0,m.default)(Te);return(0,f.createElement)("span",r({className:O},ee,{children:le.map(function(Ce,we){var ae=G.substr(Ce.start,Ce.end-Ce.start);if(Ce.highlight){ue++;var ve=void 0;typeof N=="object"?R?ve=N[ae]:(N=Ee(N),ve=N[ae.toLowerCase()]):ve=N;var xe=ue===+A;he=ve+" "+(xe?w:""),be=xe===!0&&T!=null?Object.assign({},B,T):B;var me={children:ae,className:he,key:we,style:be};return typeof oe!="string"&&(me.highlightIndex=ue),(0,f.createElement)(oe,me)}else return(0,f.createElement)(te,{children:ae,className:F,key:we,style:X})})}))}e.exports=t.default}),(function(e,t){e.exports=(function(i){var r={};function s(o){if(r[o])return r[o].exports;var a=r[o]={exports:{},id:o,loaded:!1};return i[o].call(a.exports,a,a.exports,s),a.loaded=!0,a.exports}return s.m=i,s.c=r,s.p="",s(0)})([(function(i,r,s){i.exports=s(1)}),(function(i,r,s){Object.defineProperty(r,"__esModule",{value:!0});var o=s(2);Object.defineProperty(r,"combineChunks",{enumerable:!0,get:function(){return o.combineChunks}}),Object.defineProperty(r,"fillInChunks",{enumerable:!0,get:function(){return o.fillInChunks}}),Object.defineProperty(r,"findAll",{enumerable:!0,get:function(){return o.findAll}}),Object.defineProperty(r,"findChunks",{enumerable:!0,get:function(){return o.findChunks}})}),(function(i,r){Object.defineProperty(r,"__esModule",{value:!0}),r.findAll=function(d){var m=d.autoEscape,v=d.caseSensitive,b=v===void 0?!1:v,x=d.findChunks,w=x===void 0?o:x,_=d.sanitize,A=d.searchWords,T=d.textToHighlight;return a({chunksToHighlight:s({chunks:w({autoEscape:m,caseSensitive:b,sanitize:_,searchWords:A,textToHighlight:T})}),totalLength:T?T.length:0})};var s=r.combineChunks=function(d){var m=d.chunks;return m=m.sort(function(v,b){return v.start-b.start}).reduce(function(v,b){if(v.length===0)return[b];var x=v.pop();if(b.start<=x.end){var w=Math.max(x.end,b.end);v.push({start:x.start,end:w})}else v.push(x,b);return v},[]),m},o=function(d){var m=d.autoEscape,v=d.caseSensitive,b=d.sanitize,x=b===void 0?l:b,w=d.searchWords,_=d.textToHighlight;return _=x(_),w.filter(function(A){return A}).reduce(function(A,T){T=x(T),m&&(T=c(T));for(var E=new RegExp(T,v?"g":"gi"),C=void 0;C=E.exec(_);){var R=C.index,O=E.lastIndex;O>R&&A.push({start:R,end:O}),C.index==E.lastIndex&&E.lastIndex++}return A},[])};r.findChunks=o;var a=r.fillInChunks=function(d){var m=d.chunksToHighlight,v=d.totalLength,b=[],x=function(A,T,E){T-A>0&&b.push({start:A,end:T,highlight:E})};if(m.length===0)x(0,v,!1);else{var w=0;m.forEach(function(_){x(w,_.start,!1),x(_.start,_.end,!0),w=_.end}),x(w,v,!1)}return b};function l(f){return f}function c(f){return f.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}})])}),(function(e,t,i){(function(r){if(r.env.NODE_ENV!=="production"){var s=typeof Symbol=="function"&&Symbol.for&&Symbol.for("react.element")||60103,o=function(l){return typeof l=="object"&&l!==null&&l.$$typeof===s},a=!0;e.exports=i(6)(o,a)}else e.exports=i(13)()}).call(t,i(5))}),(function(e,t){var i=e.exports={},r,s;function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?r=setTimeout:r=o}catch{r=o}try{typeof clearTimeout=="function"?s=clearTimeout:s=a}catch{s=a}})();function l(A){if(r===setTimeout)return setTimeout(A,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(A,0);try{return r(A,0)}catch{try{return r.call(null,A,0)}catch{return r.call(this,A,0)}}}function c(A){if(s===clearTimeout)return clearTimeout(A);if((s===a||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(A);try{return s(A)}catch{try{return s.call(null,A)}catch{return s.call(this,A)}}}var f=[],d=!1,m,v=-1;function b(){!d||!m||(d=!1,m.length?f=m.concat(f):v=-1,f.length&&x())}function x(){if(!d){var A=l(b);d=!0;for(var T=f.length;T;){for(m=f,f=[];++v<T;)m&&m[v].run();v=-1,T=f.length}m=null,d=!1,c(A)}}i.nextTick=function(A){var T=new Array(arguments.length-1);if(arguments.length>1)for(var E=1;E<arguments.length;E++)T[E-1]=arguments[E];f.push(new w(A,T)),f.length===1&&!d&&l(x)};function w(A,T){this.fun=A,this.array=T}w.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={};function _(){}i.on=_,i.addListener=_,i.once=_,i.off=_,i.removeListener=_,i.removeAllListeners=_,i.emit=_,i.prependListener=_,i.prependOnceListener=_,i.listeners=function(A){return[]},i.binding=function(A){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(A){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}}),(function(e,t,i){(function(r){var s=i(7),o=i(8),a=i(9),l=i(10),c=i(11),f=i(12);e.exports=function(d,m){var v=typeof Symbol=="function"&&Symbol.iterator,b="@@iterator";function x(X){var ee=X&&(v&&X[v]||X[b]);if(typeof ee=="function")return ee}var w="<<anonymous>>",_={array:C("array"),bool:C("boolean"),func:C("function"),number:C("number"),object:C("object"),string:C("string"),symbol:C("symbol"),any:R(),arrayOf:O,element:I(),instanceOf:L,node:k(),objectOf:V,oneOf:N,oneOfType:B,shape:j,exact:q};function A(X,ee){return X===ee?X!==0||1/X===1/ee:X!==X&&ee!==ee}function T(X){this.message=X,this.stack=""}T.prototype=Error.prototype;function E(X){if(r.env.NODE_ENV!=="production")var ee={},le=0;function oe(he,be,Te,Ee,Ce,we,ae){if(Ee=Ee||w,we=we||Te,ae!==c){if(m)o(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");else if(r.env.NODE_ENV!=="production"&&typeof console<"u"){var ve=Ee+":"+Te;!ee[ve]&&le<3&&(a(!1,"You are manually calling a React.PropTypes validation function for the `%s` prop on `%s`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details.",we,Ee),ee[ve]=!0,le++)}}return be[Te]==null?he?be[Te]===null?new T("The "+Ce+" `"+we+"` is marked as required "+("in `"+Ee+"`, but its value is `null`.")):new T("The "+Ce+" `"+we+"` is marked as required in "+("`"+Ee+"`, but its value is `undefined`.")):null:X(be,Te,Ee,Ce,we)}var ue=oe.bind(null,!1);return ue.isRequired=oe.bind(null,!0),ue}function C(X){function ee(le,oe,ue,he,be,Te){var Ee=le[oe],Ce=K(Ee);if(Ce!==X){var we=te(Ee);return new T("Invalid "+he+" `"+be+"` of type "+("`"+we+"` supplied to `"+ue+"`, expected ")+("`"+X+"`."))}return null}return E(ee)}function R(){return E(s.thatReturnsNull)}function O(X){function ee(le,oe,ue,he,be){if(typeof X!="function")return new T("Property `"+be+"` of component `"+ue+"` has invalid PropType notation inside arrayOf.");var Te=le[oe];if(!Array.isArray(Te)){var Ee=K(Te);return new T("Invalid "+he+" `"+be+"` of type "+("`"+Ee+"` supplied to `"+ue+"`, expected an array."))}for(var Ce=0;Ce<Te.length;Ce++){var we=X(Te,Ce,ue,he,be+"["+Ce+"]",c);if(we instanceof Error)return we}return null}return E(ee)}function I(){function X(ee,le,oe,ue,he){var be=ee[le];if(!d(be)){var Te=K(be);return new T("Invalid "+ue+" `"+he+"` of type "+("`"+Te+"` supplied to `"+oe+"`, expected a single ReactElement."))}return null}return E(X)}function L(X){function ee(le,oe,ue,he,be){if(!(le[oe]instanceof X)){var Te=X.name||w,Ee=F(le[oe]);return new T("Invalid "+he+" `"+be+"` of type "+("`"+Ee+"` supplied to `"+ue+"`, expected ")+("instance of `"+Te+"`."))}return null}return E(ee)}function N(X){if(!Array.isArray(X))return r.env.NODE_ENV!=="production"&&a(!1,"Invalid argument supplied to oneOf, expected an instance of array."),s.thatReturnsNull;function ee(le,oe,ue,he,be){for(var Te=le[oe],Ee=0;Ee<X.length;Ee++)if(A(Te,X[Ee]))return null;var Ce=JSON.stringify(X);return new T("Invalid "+he+" `"+be+"` of value `"+Te+"` "+("supplied to `"+ue+"`, expected one of "+Ce+"."))}return E(ee)}function V(X){function ee(le,oe,ue,he,be){if(typeof X!="function")return new T("Property `"+be+"` of component `"+ue+"` has invalid PropType notation inside objectOf.");var Te=le[oe],Ee=K(Te);if(Ee!=="object")return new T("Invalid "+he+" `"+be+"` of type "+("`"+Ee+"` supplied to `"+ue+"`, expected an object."));for(var Ce in Te)if(Te.hasOwnProperty(Ce)){var we=X(Te,Ce,ue,he,be+"."+Ce,c);if(we instanceof Error)return we}return null}return E(ee)}function B(X){if(!Array.isArray(X))return r.env.NODE_ENV!=="production"&&a(!1,"Invalid argument supplied to oneOfType, expected an instance of array."),s.thatReturnsNull;for(var ee=0;ee<X.length;ee++){var le=X[ee];if(typeof le!="function")return a(!1,"Invalid argument supplied to oneOfType. Expected an array of check functions, but received %s at index %s.",ie(le),ee),s.thatReturnsNull}function oe(ue,he,be,Te,Ee){for(var Ce=0;Ce<X.length;Ce++){var we=X[Ce];if(we(ue,he,be,Te,Ee,c)==null)return null}return new T("Invalid "+Te+" `"+Ee+"` supplied to "+("`"+be+"`."))}return E(oe)}function k(){function X(ee,le,oe,ue,he){return W(ee[le])?null:new T("Invalid "+ue+" `"+he+"` supplied to "+("`"+oe+"`, expected a ReactNode."))}return E(X)}function j(X){function ee(le,oe,ue,he,be){var Te=le[oe],Ee=K(Te);if(Ee!=="object")return new T("Invalid "+he+" `"+be+"` of type `"+Ee+"` "+("supplied to `"+ue+"`, expected `object`."));for(var Ce in X){var we=X[Ce];if(we){var ae=we(Te,Ce,ue,he,be+"."+Ce,c);if(ae)return ae}}return null}return E(ee)}function q(X){function ee(le,oe,ue,he,be){var Te=le[oe],Ee=K(Te);if(Ee!=="object")return new T("Invalid "+he+" `"+be+"` of type `"+Ee+"` "+("supplied to `"+ue+"`, expected `object`."));var Ce=l({},le[oe],X);for(var we in Ce){var ae=X[we];if(!ae)return new T("Invalid "+he+" `"+be+"` key `"+we+"` supplied to `"+ue+"`.\nBad object: "+JSON.stringify(le[oe],null,"  ")+`
Valid keys: `+JSON.stringify(Object.keys(X),null,"  "));var ve=ae(Te,we,ue,he,be+"."+we,c);if(ve)return ve}return null}return E(ee)}function W(X){switch(typeof X){case"number":case"string":case"undefined":return!0;case"boolean":return!X;case"object":if(Array.isArray(X))return X.every(W);if(X===null||d(X))return!0;var ee=x(X);if(ee){var le=ee.call(X),oe;if(ee!==X.entries){for(;!(oe=le.next()).done;)if(!W(oe.value))return!1}else for(;!(oe=le.next()).done;){var ue=oe.value;if(ue&&!W(ue[1]))return!1}}else return!1;return!0;default:return!1}}function G(X,ee){return X==="symbol"||ee["@@toStringTag"]==="Symbol"||typeof Symbol=="function"&&ee instanceof Symbol}function K(X){var ee=typeof X;return Array.isArray(X)?"array":X instanceof RegExp?"object":G(ee,X)?"symbol":ee}function te(X){if(typeof X>"u"||X===null)return""+X;var ee=K(X);if(ee==="object"){if(X instanceof Date)return"date";if(X instanceof RegExp)return"regexp"}return ee}function ie(X){var ee=te(X);switch(ee){case"array":case"object":return"an "+ee;case"boolean":case"date":case"regexp":return"a "+ee;default:return ee}}function F(X){return!X.constructor||!X.constructor.name?w:X.constructor.name}return _.checkPropTypes=f,_.PropTypes=_,_}}).call(t,i(5))}),(function(e,t){function i(s){return function(){return s}}var r=function(){};r.thatReturns=i,r.thatReturnsFalse=i(!1),r.thatReturnsTrue=i(!0),r.thatReturnsNull=i(null),r.thatReturnsThis=function(){return this},r.thatReturnsArgument=function(s){return s},e.exports=r}),(function(e,t,i){(function(r){var s=function(l){};r.env.NODE_ENV!=="production"&&(s=function(l){if(l===void 0)throw new Error("invariant requires an error message argument")});function o(a,l,c,f,d,m,v,b){if(s(l),!a){var x;if(l===void 0)x=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var w=[c,f,d,m,v,b],_=0;x=new Error(l.replace(/%s/g,function(){return w[_++]})),x.name="Invariant Violation"}throw x.framesToPop=1,x}}e.exports=o}).call(t,i(5))}),(function(e,t,i){(function(r){var s=i(7),o=s;if(r.env.NODE_ENV!=="production"){var a=function(c){for(var f=arguments.length,d=Array(f>1?f-1:0),m=1;m<f;m++)d[m-1]=arguments[m];var v=0,b="Warning: "+c.replace(/%s/g,function(){return d[v++]});typeof console<"u"&&console.error(b);try{throw new Error(b)}catch{}};o=function(c,f){if(f===void 0)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(f.indexOf("Failed Composite propType: ")!==0&&!c){for(var d=arguments.length,m=Array(d>2?d-2:0),v=2;v<d;v++)m[v-2]=arguments[v];a.apply(void 0,[f].concat(m))}}}e.exports=o}).call(t,i(5))}),(function(e,t){var i=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;function o(l){if(l==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(l)}function a(){try{if(!Object.assign)return!1;var l=new String("abc");if(l[5]="de",Object.getOwnPropertyNames(l)[0]==="5")return!1;for(var c={},f=0;f<10;f++)c["_"+String.fromCharCode(f)]=f;var d=Object.getOwnPropertyNames(c).map(function(v){return c[v]});if(d.join("")!=="0123456789")return!1;var m={};return"abcdefghijklmnopqrst".split("").forEach(function(v){m[v]=v}),Object.keys(Object.assign({},m)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}e.exports=a()?Object.assign:function(l,c){for(var f,d=o(l),m,v=1;v<arguments.length;v++){f=Object(arguments[v]);for(var b in f)r.call(f,b)&&(d[b]=f[b]);if(i){m=i(f);for(var x=0;x<m.length;x++)s.call(f,m[x])&&(d[m[x]]=f[m[x]])}}return d}}),(function(e,t){var i="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";e.exports=i}),(function(e,t,i){(function(r){if(r.env.NODE_ENV!=="production")var s=i(8),o=i(9),a=i(11),l={};function c(f,d,m,v,b){if(r.env.NODE_ENV!=="production"){for(var x in f)if(f.hasOwnProperty(x)){var w;try{s(typeof f[x]=="function","%s: %s type `%s` is invalid; it must be a function, usually from the `prop-types` package, but received `%s`.",v||"React class",m,x,typeof f[x]),w=f[x](d,x,v,m,null,a)}catch(A){w=A}if(o(!w||w instanceof Error,"%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",v||"React class",m,x,typeof w),w instanceof Error&&!(w.message in l)){l[w.message]=!0;var _=b?b():"";o(!1,"Failed %s type: %s%s",m,w.message,_??"")}}}}e.exports=c}).call(t,i(5))}),(function(e,t,i){var r=i(7),s=i(8),o=i(11);e.exports=function(){function a(f,d,m,v,b,x){x!==o&&s(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}a.isRequired=a;function l(){return a}var c={array:a,bool:a,func:a,number:a,object:a,string:a,symbol:a,any:a,arrayOf:l,element:a,instanceOf:l,node:a,objectOf:l,oneOf:l,oneOfType:l,shape:l,exact:l};return c.checkPropTypes=r,c.PropTypes=c,c}}),(function(e,t){e.exports=Xf()}),(function(e,t){var i=function(o,a){return o===a};function r(s){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:i,a=void 0,l=[],c=void 0,f=!1,d=function(b,x){return o(b,l[x])},m=function(){for(var b=arguments.length,x=Array(b),w=0;w<b;w++)x[w]=arguments[w];return f&&a===this&&x.length===l.length&&x.every(d)||(f=!0,a=this,l=x,c=s.apply(this,x)),c};return m}e.exports=r})])})(YA)),YA.exports}oK();var Xl={};function Gf(n){return Array.isArray?Array.isArray(n):f6(n)==="[object Array]"}function aK(n){if(typeof n=="string")return n;let e=n+"";return e=="0"&&1/n==-1/0?"-0":e}function lK(n){return n==null?"":aK(n)}function fu(n){return typeof n=="string"}function c6(n){return typeof n=="number"}function cK(n){return n===!0||n===!1||uK(n)&&f6(n)=="[object Boolean]"}function u6(n){return typeof n=="object"}function uK(n){return u6(n)&&n!==null}function Da(n){return n!=null}function ZA(n){return!n.trim().length}function f6(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}const fK="Incorrect 'index' type",hK=n=>`Invalid value for key ${n}`,dK=n=>`Pattern length exceeds max of ${n}.`,pK=n=>`Missing ${n} property in key`,mK=n=>`Property 'weight' in key '${n}' must be a positive integer`,dU=Object.prototype.hasOwnProperty;class gK{constructor(e){this._keys=[],this._keyMap={};let t=0;e.forEach(i=>{let r=h6(i);t+=r.weight,this._keys.push(r),this._keyMap[r.id]=r,t+=r.weight}),this._keys.forEach(i=>{i.weight/=t})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function h6(n){let e=null,t=null,i=null,r=1,s=null;if(fu(n)||Gf(n))i=n,e=pU(n),t=G3(n);else{if(!dU.call(n,"name"))throw new Error(pK("name"));const o=n.name;if(i=o,dU.call(n,"weight")&&(r=n.weight,r<=0))throw new Error(mK(o));e=pU(o),t=G3(o),s=n.getFn}return{path:e,id:t,weight:r,src:i,getFn:s}}function pU(n){return Gf(n)?n:n.split(".")}function G3(n){return Gf(n)?n.join("."):n}function vK(n,e){let t=[],i=!1;const r=(s,o,a)=>{if(Da(s))if(!o[a])t.push(s);else{let l=o[a];const c=s[l];if(!Da(c))return;if(a===o.length-1&&(fu(c)||c6(c)||cK(c)))t.push(lK(c));else if(Gf(c)){i=!0;for(let f=0,d=c.length;f<d;f+=1)r(c[f],o,a+1)}else o.length&&r(c,o,a+1)}};return r(n,fu(e)?e.split("."):e,0),i?t:t[0]}const yK={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},bK={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(n,e)=>n.score===e.score?n.idx<e.idx?-1:1:n.score<e.score?-1:1},_K={location:0,threshold:.6,distance:100},xK={useExtendedSearch:!1,getFn:vK,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var rn={...bK,...yK,..._K,...xK};const wK=/[^ ]+/g;function SK(n=1,e=3){const t=new Map,i=Math.pow(10,e);return{get(r){const s=r.match(wK).length;if(t.has(s))return t.get(s);const o=1/Math.pow(s,.5*n),a=parseFloat(Math.round(o*i)/i);return t.set(s,a),a},clear(){t.clear()}}}class GO{constructor({getFn:e=rn.getFn,fieldNormWeight:t=rn.fieldNormWeight}={}){this.norm=SK(t,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((t,i)=>{this._keysMap[t.id]=i})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,fu(this.docs[0])?this.docs.forEach((e,t)=>{this._addString(e,t)}):this.docs.forEach((e,t)=>{this._addObject(e,t)}),this.norm.clear())}add(e){const t=this.size();fu(e)?this._addString(e,t):this._addObject(e,t)}removeAt(e){this.records.splice(e,1);for(let t=e,i=this.size();t<i;t+=1)this.records[t].i-=1}getValueForItemAtKeyId(e,t){return e[this._keysMap[t]]}size(){return this.records.length}_addString(e,t){if(!Da(e)||ZA(e))return;let i={v:e,i:t,n:this.norm.get(e)};this.records.push(i)}_addObject(e,t){let i={i:t,$:{}};this.keys.forEach((r,s)=>{let o=r.getFn?r.getFn(e):this.getFn(e,r.path);if(Da(o)){if(Gf(o)){let a=[];const l=[{nestedArrIndex:-1,value:o}];for(;l.length;){const{nestedArrIndex:c,value:f}=l.pop();if(Da(f))if(fu(f)&&!ZA(f)){let d={v:f,i:c,n:this.norm.get(f)};a.push(d)}else Gf(f)&&f.forEach((d,m)=>{l.push({nestedArrIndex:m,value:d})})}i.$[s]=a}else if(fu(o)&&!ZA(o)){let a={v:o,n:this.norm.get(o)};i.$[s]=a}}}),this.records.push(i)}toJSON(){return{keys:this.keys,records:this.records}}}function d6(n,e,{getFn:t=rn.getFn,fieldNormWeight:i=rn.fieldNormWeight}={}){const r=new GO({getFn:t,fieldNormWeight:i});return r.setKeys(n.map(h6)),r.setSources(e),r.create(),r}function EK(n,{getFn:e=rn.getFn,fieldNormWeight:t=rn.fieldNormWeight}={}){const{keys:i,records:r}=n,s=new GO({getFn:e,fieldNormWeight:t});return s.setKeys(i),s.setIndexRecords(r),s}function J1(n,{errors:e=0,currentLocation:t=0,expectedLocation:i=0,distance:r=rn.distance,ignoreLocation:s=rn.ignoreLocation}={}){const o=e/n.length;if(s)return o;const a=Math.abs(i-t);return r?o+a/r:a?1:o}function MK(n=[],e=rn.minMatchCharLength){let t=[],i=-1,r=-1,s=0;for(let o=n.length;s<o;s+=1){let a=n[s];a&&i===-1?i=s:!a&&i!==-1&&(r=s-1,r-i+1>=e&&t.push([i,r]),i=-1)}return n[s-1]&&s-i>=e&&t.push([i,s-1]),t}const kp=32;function TK(n,e,t,{location:i=rn.location,distance:r=rn.distance,threshold:s=rn.threshold,findAllMatches:o=rn.findAllMatches,minMatchCharLength:a=rn.minMatchCharLength,includeMatches:l=rn.includeMatches,ignoreLocation:c=rn.ignoreLocation}={}){if(e.length>kp)throw new Error(dK(kp));const f=e.length,d=n.length,m=Math.max(0,Math.min(i,d));let v=s,b=m;const x=a>1||l,w=x?Array(d):[];let _;for(;(_=n.indexOf(e,b))>-1;){let O=J1(e,{currentLocation:_,expectedLocation:m,distance:r,ignoreLocation:c});if(v=Math.min(O,v),b=_+f,x){let I=0;for(;I<f;)w[_+I]=1,I+=1}}b=-1;let A=[],T=1,E=f+d;const C=1<<f-1;for(let O=0;O<f;O+=1){let I=0,L=E;for(;I<L;)J1(e,{errors:O,currentLocation:m+L,expectedLocation:m,distance:r,ignoreLocation:c})<=v?I=L:E=L,L=Math.floor((E-I)/2+I);E=L;let N=Math.max(1,m-L+1),V=o?d:Math.min(m+L,d)+f,B=Array(V+2);B[V+1]=(1<<O)-1;for(let j=V;j>=N;j-=1){let q=j-1,W=t[n.charAt(q)];if(x&&(w[q]=+!!W),B[j]=(B[j+1]<<1|1)&W,O&&(B[j]|=(A[j+1]|A[j])<<1|1|A[j+1]),B[j]&C&&(T=J1(e,{errors:O,currentLocation:q,expectedLocation:m,distance:r,ignoreLocation:c}),T<=v)){if(v=T,b=q,b<=m)break;N=Math.max(1,2*m-b)}}if(J1(e,{errors:O+1,currentLocation:m,expectedLocation:m,distance:r,ignoreLocation:c})>v)break;A=B}const R={isMatch:b>=0,score:Math.max(.001,T)};if(x){const O=MK(w,a);O.length?l&&(R.indices=O):R.isMatch=!1}return R}function AK(n){let e={};for(let t=0,i=n.length;t<i;t+=1){const r=n.charAt(t);e[r]=(e[r]||0)|1<<i-t-1}return e}class p6{constructor(e,{location:t=rn.location,threshold:i=rn.threshold,distance:r=rn.distance,includeMatches:s=rn.includeMatches,findAllMatches:o=rn.findAllMatches,minMatchCharLength:a=rn.minMatchCharLength,isCaseSensitive:l=rn.isCaseSensitive,ignoreLocation:c=rn.ignoreLocation}={}){if(this.options={location:t,threshold:i,distance:r,includeMatches:s,findAllMatches:o,minMatchCharLength:a,isCaseSensitive:l,ignoreLocation:c},this.pattern=l?e:e.toLowerCase(),this.chunks=[],!this.pattern.length)return;const f=(m,v)=>{this.chunks.push({pattern:m,alphabet:AK(m),startIndex:v})},d=this.pattern.length;if(d>kp){let m=0;const v=d%kp,b=d-v;for(;m<b;)f(this.pattern.substr(m,kp),m),m+=kp;if(v){const x=d-kp;f(this.pattern.substr(x),x)}}else f(this.pattern,0)}searchIn(e){const{isCaseSensitive:t,includeMatches:i}=this.options;if(t||(e=e.toLowerCase()),this.pattern===e){let b={isMatch:!0,score:0};return i&&(b.indices=[[0,e.length-1]]),b}const{location:r,distance:s,threshold:o,findAllMatches:a,minMatchCharLength:l,ignoreLocation:c}=this.options;let f=[],d=0,m=!1;this.chunks.forEach(({pattern:b,alphabet:x,startIndex:w})=>{const{isMatch:_,score:A,indices:T}=TK(e,b,x,{location:r+w,distance:s,threshold:o,findAllMatches:a,minMatchCharLength:l,includeMatches:i,ignoreLocation:c});_&&(m=!0),d+=A,_&&T&&(f=[...f,...T])});let v={isMatch:m,score:m?d/this.chunks.length:1};return m&&i&&(v.indices=f),v}}class _d{constructor(e){this.pattern=e}static isMultiMatch(e){return mU(e,this.multiRegex)}static isSingleMatch(e){return mU(e,this.singleRegex)}search(){}}function mU(n,e){const t=n.match(e);return t?t[1]:null}class CK extends _d{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const t=e===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}class RK extends _d{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const i=e.indexOf(this.pattern)===-1;return{isMatch:i,score:i?0:1,indices:[0,e.length-1]}}}class DK extends _d{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const t=e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}class OK extends _d{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const t=!e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}}class LK extends _d{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const t=e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class PK extends _d{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const t=!e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}}class m6 extends _d{constructor(e,{location:t=rn.location,threshold:i=rn.threshold,distance:r=rn.distance,includeMatches:s=rn.includeMatches,findAllMatches:o=rn.findAllMatches,minMatchCharLength:a=rn.minMatchCharLength,isCaseSensitive:l=rn.isCaseSensitive,ignoreLocation:c=rn.ignoreLocation}={}){super(e),this._bitapSearch=new p6(e,{location:t,threshold:i,distance:r,includeMatches:s,findAllMatches:o,minMatchCharLength:a,isCaseSensitive:l,ignoreLocation:c})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class g6 extends _d{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let t=0,i;const r=[],s=this.pattern.length;for(;(i=e.indexOf(this.pattern,t))>-1;)t=i+s,r.push([i,t-1]);const o=!!r.length;return{isMatch:o,score:o?0:1,indices:r}}}const H3=[CK,g6,DK,OK,PK,LK,RK,m6],gU=H3.length,IK=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,NK="|";function UK(n,e={}){return n.split(NK).map(t=>{let i=t.trim().split(IK).filter(s=>s&&!!s.trim()),r=[];for(let s=0,o=i.length;s<o;s+=1){const a=i[s];let l=!1,c=-1;for(;!l&&++c<gU;){const f=H3[c];let d=f.isMultiMatch(a);d&&(r.push(new f(d,e)),l=!0)}if(!l)for(c=-1;++c<gU;){const f=H3[c];let d=f.isSingleMatch(a);if(d){r.push(new f(d,e));break}}}return r})}const kK=new Set([m6.type,g6.type]);class zK{constructor(e,{isCaseSensitive:t=rn.isCaseSensitive,includeMatches:i=rn.includeMatches,minMatchCharLength:r=rn.minMatchCharLength,ignoreLocation:s=rn.ignoreLocation,findAllMatches:o=rn.findAllMatches,location:a=rn.location,threshold:l=rn.threshold,distance:c=rn.distance}={}){this.query=null,this.options={isCaseSensitive:t,includeMatches:i,minMatchCharLength:r,findAllMatches:o,ignoreLocation:s,location:a,threshold:l,distance:c},this.pattern=t?e:e.toLowerCase(),this.query=UK(this.pattern,this.options)}static condition(e,t){return t.useExtendedSearch}searchIn(e){const t=this.query;if(!t)return{isMatch:!1,score:1};const{includeMatches:i,isCaseSensitive:r}=this.options;e=r?e:e.toLowerCase();let s=0,o=[],a=0;for(let l=0,c=t.length;l<c;l+=1){const f=t[l];o.length=0,s=0;for(let d=0,m=f.length;d<m;d+=1){const v=f[d],{isMatch:b,indices:x,score:w}=v.search(e);if(b){if(s+=1,a+=w,i){const _=v.constructor.type;kK.has(_)?o=[...o,...x]:o.push(x)}}else{a=0,s=0,o.length=0;break}}if(s){let d={isMatch:!0,score:a/s};return i&&(d.indices=o),d}}return{isMatch:!1,score:1}}}const j3=[];function FK(...n){j3.push(...n)}function W3(n,e){for(let t=0,i=j3.length;t<i;t+=1){let r=j3[t];if(r.condition(n,e))return new r(n,e)}return new p6(n,e)}const sE={AND:"$and",OR:"$or"},$3={PATH:"$path",PATTERN:"$val"},q3=n=>!!(n[sE.AND]||n[sE.OR]),BK=n=>!!n[$3.PATH],VK=n=>!Gf(n)&&u6(n)&&!q3(n),vU=n=>({[sE.AND]:Object.keys(n).map(e=>({[e]:n[e]}))});function v6(n,e,{auto:t=!0}={}){const i=r=>{let s=Object.keys(r);const o=BK(r);if(!o&&s.length>1&&!q3(r))return i(vU(r));if(VK(r)){const l=o?r[$3.PATH]:s[0],c=o?r[$3.PATTERN]:r[l];if(!fu(c))throw new Error(hK(l));const f={keyId:G3(l),pattern:c};return t&&(f.searcher=W3(c,e)),f}let a={children:[],operator:s[0]};return s.forEach(l=>{const c=r[l];Gf(c)&&c.forEach(f=>{a.children.push(i(f))})}),a};return q3(n)||(n=vU(n)),i(n)}function GK(n,{ignoreFieldNorm:e=rn.ignoreFieldNorm}){n.forEach(t=>{let i=1;t.matches.forEach(({key:r,norm:s,score:o})=>{const a=r?r.weight:null;i*=Math.pow(o===0&&a?Number.EPSILON:o,(a||1)*(e?1:s))}),t.score=i})}function HK(n,e){const t=n.matches;e.matches=[],Da(t)&&t.forEach(i=>{if(!Da(i.indices)||!i.indices.length)return;const{indices:r,value:s}=i;let o={indices:r,value:s};i.key&&(o.key=i.key.src),i.idx>-1&&(o.refIndex=i.idx),e.matches.push(o)})}function jK(n,e){e.score=n.score}function WK(n,e,{includeMatches:t=rn.includeMatches,includeScore:i=rn.includeScore}={}){const r=[];return t&&r.push(HK),i&&r.push(jK),n.map(s=>{const{idx:o}=s,a={item:e[o],refIndex:o};return r.length&&r.forEach(l=>{l(s,a)}),a})}class ev{constructor(e,t={},i){this.options={...rn,...t},this.options.useExtendedSearch,this._keyStore=new gK(this.options.keys),this.setCollection(e,i)}setCollection(e,t){if(this._docs=e,t&&!(t instanceof GO))throw new Error(fK);this._myIndex=t||d6(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){Da(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const t=[];for(let i=0,r=this._docs.length;i<r;i+=1){const s=this._docs[i];e(s,i)&&(this.removeAt(i),i-=1,r-=1,t.push(s))}return t}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:t=-1}={}){const{includeMatches:i,includeScore:r,shouldSort:s,sortFn:o,ignoreFieldNorm:a}=this.options;let l=fu(e)?fu(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return GK(l,{ignoreFieldNorm:a}),s&&l.sort(o),c6(t)&&t>-1&&(l=l.slice(0,t)),WK(l,this._docs,{includeMatches:i,includeScore:r})}_searchStringList(e){const t=W3(e,this.options),{records:i}=this._myIndex,r=[];return i.forEach(({v:s,i:o,n:a})=>{if(!Da(s))return;const{isMatch:l,score:c,indices:f}=t.searchIn(s);l&&r.push({item:s,idx:o,matches:[{score:c,value:s,norm:a,indices:f}]})}),r}_searchLogical(e){const t=v6(e,this.options),i=(a,l,c)=>{if(!a.children){const{keyId:d,searcher:m}=a,v=this._findMatches({key:this._keyStore.get(d),value:this._myIndex.getValueForItemAtKeyId(l,d),searcher:m});return v&&v.length?[{idx:c,item:l,matches:v}]:[]}const f=[];for(let d=0,m=a.children.length;d<m;d+=1){const v=a.children[d],b=i(v,l,c);if(b.length)f.push(...b);else if(a.operator===sE.AND)return[]}return f},r=this._myIndex.records,s={},o=[];return r.forEach(({$:a,i:l})=>{if(Da(a)){let c=i(t,a,l);c.length&&(s[l]||(s[l]={idx:l,item:a,matches:[]},o.push(s[l])),c.forEach(({matches:f})=>{s[l].matches.push(...f)}))}}),o}_searchObjectList(e){const t=W3(e,this.options),{keys:i,records:r}=this._myIndex,s=[];return r.forEach(({$:o,i:a})=>{if(!Da(o))return;let l=[];i.forEach((c,f)=>{l.push(...this._findMatches({key:c,value:o[f],searcher:t}))}),l.length&&s.push({idx:a,item:o,matches:l})}),s}_findMatches({key:e,value:t,searcher:i}){if(!Da(t))return[];let r=[];if(Gf(t))t.forEach(({v:s,i:o,n:a})=>{if(!Da(s))return;const{isMatch:l,score:c,indices:f}=i.searchIn(s);l&&r.push({score:c,key:e,value:s,idx:o,norm:a,indices:f})});else{const{v:s,n:o}=t,{isMatch:a,score:l,indices:c}=i.searchIn(s);a&&r.push({score:l,key:e,value:s,norm:o,indices:c})}return r}}ev.version="6.6.2";ev.createIndex=d6;ev.parseIndex=EK;ev.config=rn;ev.parseQuery=v6;FK(zK);const $K=Object.freeze(Object.defineProperty({__proto__:null,default:ev},Symbol.toStringTag,{value:"Module"})),qK=wM($K);var yU;function XK(){if(yU)return Xl;yU=1;var n=Xl&&Xl.__assign||function(){return n=Object.assign||function(s){for(var o,a=1,l=arguments.length;a<l;a++){o=arguments[a];for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(s[c]=o[c])}return s},n.apply(this,arguments)},e=Xl&&Xl.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Xl,"__esModule",{value:!0}),Xl.useSearch=Xl.useFuzzy=void 0;var t=e(qK),i=Xf();function r(s,o){var a=(0,i.useState)(""),l=a[0],c=a[1],f=function(){return c("")},d=(0,i.useMemo)(function(){var v={tokenize:!0,threshold:.2};return new t.default(s,n(n({},v),o))},[s,o]),m=l?(d.search(l)||[]).map(function(v){return n(n({},v.item),{matches:v.matches})}):s;return{keyword:l,resetSearch:f,result:m,search:c}}return Xl.useFuzzy=r,Xl.useSearch=r,Xl}XK();var KA,bU;function YK(){if(bU)return KA;bU=1;var n=typeof Element<"u",e=typeof Map=="function",t=typeof Set=="function",i=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function r(s,o){if(s===o)return!0;if(s&&o&&typeof s=="object"&&typeof o=="object"){if(s.constructor!==o.constructor)return!1;var a,l,c;if(Array.isArray(s)){if(a=s.length,a!=o.length)return!1;for(l=a;l--!==0;)if(!r(s[l],o[l]))return!1;return!0}var f;if(e&&s instanceof Map&&o instanceof Map){if(s.size!==o.size)return!1;for(f=s.entries();!(l=f.next()).done;)if(!o.has(l.value[0]))return!1;for(f=s.entries();!(l=f.next()).done;)if(!r(l.value[1],o.get(l.value[0])))return!1;return!0}if(t&&s instanceof Set&&o instanceof Set){if(s.size!==o.size)return!1;for(f=s.entries();!(l=f.next()).done;)if(!o.has(l.value[0]))return!1;return!0}if(i&&ArrayBuffer.isView(s)&&ArrayBuffer.isView(o)){if(a=s.length,a!=o.length)return!1;for(l=a;l--!==0;)if(s[l]!==o[l])return!1;return!0}if(s.constructor===RegExp)return s.source===o.source&&s.flags===o.flags;if(s.valueOf!==Object.prototype.valueOf&&typeof s.valueOf=="function"&&typeof o.valueOf=="function")return s.valueOf()===o.valueOf();if(s.toString!==Object.prototype.toString&&typeof s.toString=="function"&&typeof o.toString=="function")return s.toString()===o.toString();if(c=Object.keys(s),a=c.length,a!==Object.keys(o).length)return!1;for(l=a;l--!==0;)if(!Object.prototype.hasOwnProperty.call(o,c[l]))return!1;if(n&&s instanceof Element)return!1;for(l=a;l--!==0;)if(!((c[l]==="_owner"||c[l]==="__v"||c[l]==="__o")&&s.$$typeof)&&!r(s[c[l]],o[c[l]]))return!1;return!0}return s!==s&&o!==o}return KA=function(o,a){try{return r(o,a)}catch(l){if((l.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw l}},KA}var ZK=YK();const KK=ro(ZK);function pd(){return pd=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},pd.apply(null,arguments)}function QK(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}var JK=$.useLayoutEffect,eQ=function(e){var t=eo.useRef(e);return JK(function(){t.current=e}),t},_U=function(e,t){if(typeof e=="function"){e(t);return}e.current=t},tQ=function(e,t){var i=eo.useRef();return eo.useCallback(function(r){e.current=r,i.current&&_U(i.current,null),i.current=t,t&&_U(t,r)},[t])},xU={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0",display:"block"},nQ=function(e){Object.keys(xU).forEach(function(t){e.style.setProperty(t,xU[t],"important")})},wU=nQ,wo=null,SU=function(e,t){var i=e.scrollHeight;return t.sizingStyle.boxSizing==="border-box"?i+t.borderSize:i-t.paddingSize};function iQ(n,e,t,i){t===void 0&&(t=1),i===void 0&&(i=1/0),wo||(wo=document.createElement("textarea"),wo.setAttribute("tabindex","-1"),wo.setAttribute("aria-hidden","true"),wU(wo)),wo.parentNode===null&&document.body.appendChild(wo);var r=n.paddingSize,s=n.borderSize,o=n.sizingStyle,a=o.boxSizing;Object.keys(o).forEach(function(m){var v=m;wo.style[v]=o[v]}),wU(wo),wo.value=e;var l=SU(wo,n);wo.value=e,l=SU(wo,n),wo.value="x";var c=wo.scrollHeight-r,f=c*t;a==="border-box"&&(f=f+r+s),l=Math.max(f,l);var d=c*i;return a==="border-box"&&(d=d+r+s),l=Math.min(d,l),[l,c]}var EU=function(){},rQ=function(e,t){return e.reduce(function(i,r){return i[r]=t[r],i},{})},sQ=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak","wordSpacing","scrollbarGutter"],oQ=!!document.documentElement.currentStyle,aQ=function(e){var t=window.getComputedStyle(e);if(t===null)return null;var i=rQ(sQ,t),r=i.boxSizing;if(r==="")return null;oQ&&r==="border-box"&&(i.width=parseFloat(i.width)+parseFloat(i.borderRightWidth)+parseFloat(i.borderLeftWidth)+parseFloat(i.paddingRight)+parseFloat(i.paddingLeft)+"px");var s=parseFloat(i.paddingBottom)+parseFloat(i.paddingTop),o=parseFloat(i.borderBottomWidth)+parseFloat(i.borderTopWidth);return{sizingStyle:i,paddingSize:s,borderSize:o}},lQ=aQ;function HO(n,e,t){var i=eQ(t);$.useLayoutEffect(function(){var r=function(o){return i.current(o)};if(n)return n.addEventListener(e,r),function(){return n.removeEventListener(e,r)}},[])}var cQ=function(e,t){HO(document.body,"reset",function(i){e.current.form===i.target&&t(i)})},uQ=function(e){HO(window,"resize",e)},fQ=function(e){HO(document.fonts,"loadingdone",e)},hQ=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],dQ=function(e,t){var i=e.cacheMeasurements,r=e.maxRows,s=e.minRows,o=e.onChange,a=o===void 0?EU:o,l=e.onHeightChange,c=l===void 0?EU:l,f=QK(e,hQ),d=f.value!==void 0,m=$.useRef(null),v=tQ(m,t),b=$.useRef(0),x=$.useRef(),w=function(){var T=m.current,E=i&&x.current?x.current:lQ(T);if(E){x.current=E;var C=iQ(E,T.value||T.placeholder||"x",s,r),R=C[0],O=C[1];b.current!==R&&(b.current=R,T.style.setProperty("height",R+"px","important"),c(R,{rowHeight:O}))}},_=function(T){d||w(),a(T)};return $.useLayoutEffect(w),cQ(m,function(){if(!d){var A=m.current.value;requestAnimationFrame(function(){var T=m.current;T&&A!==T.value&&w()})}}),uQ(w),fQ(w),$.createElement("textarea",pd({},f,{onChange:_,ref:v}))},pQ=$.forwardRef(dQ);function mQ(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var AS={exports:{}},gQ=AS.exports,MU;function vQ(){return MU||(MU=1,(function(n,e){(function(t,i){typeof mQ=="function"?n.exports=i():t.pluralize=i()})(gQ,function(){var t=[],i=[],r={},s={},o={};function a(x){return typeof x=="string"?new RegExp("^"+x+"$","i"):x}function l(x,w){return x===w?w:x===x.toLowerCase()?w.toLowerCase():x===x.toUpperCase()?w.toUpperCase():x[0]===x[0].toUpperCase()?w.charAt(0).toUpperCase()+w.substr(1).toLowerCase():w.toLowerCase()}function c(x,w){return x.replace(/\$(\d{1,2})/g,function(_,A){return w[A]||""})}function f(x,w){return x.replace(w[0],function(_,A){var T=c(w[1],arguments);return l(_===""?x[A-1]:_,T)})}function d(x,w,_){if(!x.length||r.hasOwnProperty(x))return w;for(var A=_.length;A--;){var T=_[A];if(T[0].test(w))return f(w,T)}return w}function m(x,w,_){return function(A){var T=A.toLowerCase();return w.hasOwnProperty(T)?l(A,T):x.hasOwnProperty(T)?l(A,x[T]):d(T,A,_)}}function v(x,w,_,A){return function(T){var E=T.toLowerCase();return w.hasOwnProperty(E)?!0:x.hasOwnProperty(E)?!1:d(E,E,_)===E}}function b(x,w,_){var A=w===1?b.singular(x):b.plural(x);return(_?w+" ":"")+A}return b.plural=m(o,s,t),b.isPlural=v(o,s,t),b.singular=m(s,o,i),b.isSingular=v(s,o,i),b.addPluralRule=function(x,w){t.push([a(x),w])},b.addSingularRule=function(x,w){i.push([a(x),w])},b.addUncountableRule=function(x){if(typeof x=="string"){r[x.toLowerCase()]=!0;return}b.addPluralRule(x,"$0"),b.addSingularRule(x,"$0")},b.addIrregularRule=function(x,w){w=w.toLowerCase(),x=x.toLowerCase(),o[x]=w,s[w]=x},[["I","we"],["me","us"],["he","they"],["she","they"],["them","them"],["myself","ourselves"],["yourself","yourselves"],["itself","themselves"],["herself","themselves"],["himself","themselves"],["themself","themselves"],["is","are"],["was","were"],["has","have"],["this","these"],["that","those"],["echo","echoes"],["dingo","dingoes"],["volcano","volcanoes"],["tornado","tornadoes"],["torpedo","torpedoes"],["genus","genera"],["viscus","viscera"],["stigma","stigmata"],["stoma","stomata"],["dogma","dogmata"],["lemma","lemmata"],["schema","schemata"],["anathema","anathemata"],["ox","oxen"],["axe","axes"],["die","dice"],["yes","yeses"],["foot","feet"],["eave","eaves"],["goose","geese"],["tooth","teeth"],["quiz","quizzes"],["human","humans"],["proof","proofs"],["carve","carves"],["valve","valves"],["looey","looies"],["thief","thieves"],["groove","grooves"],["pickaxe","pickaxes"],["passerby","passersby"]].forEach(function(x){return b.addIrregularRule(x[0],x[1])}),[[/s?$/i,"s"],[/[^\u0000-\u007F]$/i,"$0"],[/([^aeiou]ese)$/i,"$1"],[/(ax|test)is$/i,"$1es"],[/(alias|[^aou]us|t[lm]as|gas|ris)$/i,"$1es"],[/(e[mn]u)s?$/i,"$1s"],[/([^l]ias|[aeiou]las|[ejzr]as|[iu]am)$/i,"$1"],[/(alumn|syllab|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1i"],[/(alumn|alg|vertebr)(?:a|ae)$/i,"$1ae"],[/(seraph|cherub)(?:im)?$/i,"$1im"],[/(her|at|gr)o$/i,"$1oes"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|automat|quor)(?:a|um)$/i,"$1a"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)(?:a|on)$/i,"$1a"],[/sis$/i,"ses"],[/(?:(kni|wi|li)fe|(ar|l|ea|eo|oa|hoo)f)$/i,"$1$2ves"],[/([^aeiouy]|qu)y$/i,"$1ies"],[/([^ch][ieo][ln])ey$/i,"$1ies"],[/(x|ch|ss|sh|zz)$/i,"$1es"],[/(matr|cod|mur|sil|vert|ind|append)(?:ix|ex)$/i,"$1ices"],[/\b((?:tit)?m|l)(?:ice|ouse)$/i,"$1ice"],[/(pe)(?:rson|ople)$/i,"$1ople"],[/(child)(?:ren)?$/i,"$1ren"],[/eaux$/i,"$0"],[/m[ae]n$/i,"men"],["thou","you"]].forEach(function(x){return b.addPluralRule(x[0],x[1])}),[[/s$/i,""],[/(ss)$/i,"$1"],[/(wi|kni|(?:after|half|high|low|mid|non|night|[^\w]|^)li)ves$/i,"$1fe"],[/(ar|(?:wo|[ae])l|[eo][ao])ves$/i,"$1f"],[/ies$/i,"y"],[/\b([pl]|zomb|(?:neck|cross)?t|coll|faer|food|gen|goon|group|lass|talk|goal|cut)ies$/i,"$1ie"],[/\b(mon|smil)ies$/i,"$1ey"],[/\b((?:tit)?m|l)ice$/i,"$1ouse"],[/(seraph|cherub)im$/i,"$1"],[/(x|ch|ss|sh|zz|tto|go|cho|alias|[^aou]us|t[lm]as|gas|(?:her|at|gr)o|[aeiou]ris)(?:es)?$/i,"$1"],[/(analy|diagno|parenthe|progno|synop|the|empha|cri|ne)(?:sis|ses)$/i,"$1sis"],[/(movie|twelve|abuse|e[mn]u)s$/i,"$1"],[/(test)(?:is|es)$/i,"$1is"],[/(alumn|syllab|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1us"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|quor)a$/i,"$1um"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)a$/i,"$1on"],[/(alumn|alg|vertebr)ae$/i,"$1a"],[/(cod|mur|sil|vert|ind)ices$/i,"$1ex"],[/(matr|append)ices$/i,"$1ix"],[/(pe)(rson|ople)$/i,"$1rson"],[/(child)ren$/i,"$1"],[/(eau)x?$/i,"$1"],[/men$/i,"man"]].forEach(function(x){return b.addSingularRule(x[0],x[1])}),["adulthood","advice","agenda","aid","aircraft","alcohol","ammo","analytics","anime","athletics","audio","bison","blood","bream","buffalo","butter","carp","cash","chassis","chess","clothing","cod","commerce","cooperation","corps","debris","diabetes","digestion","elk","energy","equipment","excretion","expertise","firmware","flounder","fun","gallows","garbage","graffiti","hardware","headquarters","health","herpes","highjinks","homework","housework","information","jeans","justice","kudos","labour","literature","machinery","mackerel","mail","media","mews","moose","music","mud","manga","news","only","personnel","pike","plankton","pliers","police","pollution","premises","rain","research","rice","salmon","scissors","series","sewage","shambles","shrimp","software","species","staff","swine","tennis","traffic","transportation","trout","tuna","wealth","welfare","whiting","wildebeest","wildlife","you",/pok[e]mon$/i,/[^aeiou]ese$/i,/deer$/i,/fish$/i,/measles$/i,/o[iu]s$/i,/pox$/i,/sheep$/i].forEach(b.addUncountableRule),b})})(AS)),AS.exports}vQ();var CS={exports:{}},yQ=CS.exports,TU;function bQ(){return TU||(TU=1,(function(n,e){(function(t,i){n.exports=i()})(yQ,function(){function t(E,C){var R,O,I;for(R=1,O=arguments.length;R<O;++R)if(C=arguments[R],C!=null)for(I in C)l(C,I)&&(E[I]=C[I]);return E}function i(E,C){return C.length-E.length}function r(E,C){return E.factor-C.factor}function s(E){return E.replace(/([.*+?=^!:${}()|[\]/\\])/g,"\\$1")}function o(E,C){var R,O;for(R=0,O=E.length;R<O;++R)C(E[R],R)}function a(E,C){var R;for(R in E)l(E,R)&&C(E[R],R)}var l=(function(E){return function(R,O){return R!=null&&E.call(R,O)}})(Object.prototype.hasOwnProperty);function c(E,C){for(;typeof C=="string";)C=E[C];return C}function f(E){this._prefixes=E;var C=[],R=[];a(E,function(I,L){C.push(s(L)),R.push({factor:I,prefix:L})});var O=this._lcPrefixes={};a(E,function(I,L){var N=L.toLowerCase();l(E,N)||(O[N]=L)}),R.sort(r),this._list=R,C.sort(i),this._regexp=new RegExp("^\\s*(-)?\\s*(\\d+(?:\\.\\d+)?)\\s*("+C.join("|")+")\\s*(.*)\\s*?$","i")}f.create=function(C,R,O){var I={};return O===void 0&&(O=0),o(C,function(L,N){I[L]=Math.pow(R,N+O)}),new f(I)},f.prototype.findPrefix=function(C){for(var R=this._list,O=0,I=R.length-1,L,N;O!==I;)L=O+I+1>>1,N=R[L].factor,N>C?I=L-1:O=L;return R[O]},f.prototype.parse=function(C,R){var O=C.match(this._regexp);if(O!==null){var I=O[3],L;if(l(this._prefixes,I))L=this._prefixes[I];else if(!R&&(I=I.toLowerCase(),l(this._lcPrefixes,I)))I=this._lcPrefixes[I],L=this._prefixes[I];else return;var N=+O[2];return O[1]!==void 0&&(N=-N),{factor:L,prefix:I,unit:O[4],value:N}}};var d={binary:f.create(",Ki,Mi,Gi,Ti,Pi,Ei,Zi,Yi".split(","),1024),SI:f.create("y,z,a,f,p,n,,m,,k,M,G,T,P,E,Z,Y".split(","),1e3,-8)},m={maxDecimals:2,separator:" ",unit:""},v={scale:"SI",strict:!1};function b(E,C){C=t({},m,C);var R=C.decimals;R!==void 0&&delete C.maxDecimals;var O=T(E,C);E=R!==void 0?O.value.toFixed(R):String(O.value);var I=O.prefix+C.unit;return I===""?E:E+C.separator+I}var x={scale:"binary",unit:"B"};function w(E,C){return b(E,C===void 0?x:t({},x,C))}function _(E,C){var R=A(E,C);return R.value*R.factor}function A(E,C){if(typeof E!="string")throw new TypeError("str must be a string");C=t({},v,C);var R=c(d,C.scale);if(R===void 0)throw new Error("missing scale");var O=R.parse(E,C.strict);if(O===void 0)throw new Error("cannot parse str");return O}function T(E,C){if(E===0)return{value:0,prefix:""};if(E<0){var R=T(-E,C);return R.value=-R.value,R}if(typeof E!="number"||Number.isNaN(E))throw new TypeError("value must be a number");C=t({},v,C);var O=c(d,C.scale);if(O===void 0)throw new Error("missing scale");var I,L=C.maxDecimals,N=L==="auto";N?I=10:L!==void 0&&(I=Math.pow(10,L));var V=C.prefix,B;if(V!==void 0){if(!l(O._prefixes,V))throw new Error("invalid prefix");B=O._prefixes[V]}else{var k=O.findPrefix(E);if(I!==void 0)do{B=k.factor;var j=B/I;E=Math.round(E/j)*j}while((k=O.findPrefix(E)).factor!==B);else B=k.factor;V=k.prefix}return E=I===void 0?E/B:Math.round(E*I/B)/I,N&&Math.abs(E)>=10&&(E=Math.round(E)),{prefix:V,value:E}}return b.bytes=w,b.parse=_,_.raw=A,b.raw=T,b.Scale=f,b})})(CS)),CS.exports}var _Q=bQ();const jO=ro(_Q),{min:xQ,max:wQ}=Math,Zp=(n,e=0,t=1)=>xQ(wQ(e,n),t),WO=n=>{n._clipped=!1,n._unclipped=n.slice(0);for(let e=0;e<=3;e++)e<3?((n[e]<0||n[e]>255)&&(n._clipped=!0),n[e]=Zp(n[e],0,255)):e===3&&(n[e]=Zp(n[e],0,1));return n},y6={};for(let n of["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"])y6[`[object ${n}]`]=n.toLowerCase();function Pn(n){return y6[Object.prototype.toString.call(n)]||"object"}const xn=(n,e=null)=>n.length>=3?Array.prototype.slice.call(n):Pn(n[0])=="object"&&e?e.split("").filter(t=>n[0][t]!==void 0).map(t=>n[0][t]):n[0].slice(0),tv=n=>{if(n.length<2)return null;const e=n.length-1;return Pn(n[e])=="string"?n[e].toLowerCase():null},{PI:LM,min:b6,max:_6}=Math,Sl=n=>Math.round(n*100)/100,X3=n=>Math.round(n*100)/100,Sf=LM*2,QA=LM/3,SQ=LM/180,EQ=180/LM;function x6(n){return[...n.slice(0,3).reverse(),...n.slice(3)]}const pn={format:{},autodetect:[]};let pt=class{constructor(...e){const t=this;if(Pn(e[0])==="object"&&e[0].constructor&&e[0].constructor===this.constructor)return e[0];let i=tv(e),r=!1;if(!i){r=!0,pn.sorted||(pn.autodetect=pn.autodetect.sort((s,o)=>o.p-s.p),pn.sorted=!0);for(let s of pn.autodetect)if(i=s.test(...e),i)break}if(pn.format[i]){const s=pn.format[i].apply(null,r?e:e.slice(0,-1));t._rgb=WO(s)}else throw new Error("unknown format: "+e);t._rgb.length===3&&t._rgb.push(1)}toString(){return Pn(this.hex)=="function"?this.hex():`[${this._rgb.join(",")}]`}};const MQ="3.2.0",Ln=(...n)=>new pt(...n);Ln.version=MQ;const C0={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},TQ=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,AQ=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,w6=n=>{if(n.match(TQ)){(n.length===4||n.length===7)&&(n=n.substr(1)),n.length===3&&(n=n.split(""),n=n[0]+n[0]+n[1]+n[1]+n[2]+n[2]);const e=parseInt(n,16),t=e>>16,i=e>>8&255,r=e&255;return[t,i,r,1]}if(n.match(AQ)){(n.length===5||n.length===9)&&(n=n.substr(1)),n.length===4&&(n=n.split(""),n=n[0]+n[0]+n[1]+n[1]+n[2]+n[2]+n[3]+n[3]);const e=parseInt(n,16),t=e>>24&255,i=e>>16&255,r=e>>8&255,s=Math.round((e&255)/255*100)/100;return[t,i,r,s]}throw new Error(`unknown hex color: ${n}`)},{round:ew}=Math,S6=(...n)=>{let[e,t,i,r]=xn(n,"rgba"),s=tv(n)||"auto";r===void 0&&(r=1),s==="auto"&&(s=r<1?"rgba":"rgb"),e=ew(e),t=ew(t),i=ew(i);let a="000000"+(e<<16|t<<8|i).toString(16);a=a.substr(a.length-6);let l="0"+ew(r*255).toString(16);switch(l=l.substr(l.length-2),s.toLowerCase()){case"rgba":return`#${a}${l}`;case"argb":return`#${l}${a}`;default:return`#${a}`}};pt.prototype.name=function(){const n=S6(this._rgb,"rgb");for(let e of Object.keys(C0))if(C0[e]===n)return e.toLowerCase();return n};pn.format.named=n=>{if(n=n.toLowerCase(),C0[n])return w6(C0[n]);throw new Error("unknown color name: "+n)};pn.autodetect.push({p:5,test:(n,...e)=>{if(!e.length&&Pn(n)==="string"&&C0[n.toLowerCase()])return"named"}});pt.prototype.alpha=function(n,e=!1){return n!==void 0&&Pn(n)==="number"?e?(this._rgb[3]=n,this):new pt([this._rgb[0],this._rgb[1],this._rgb[2],n],"rgb"):this._rgb[3]};pt.prototype.clipped=function(){return this._rgb._clipped||!1};const gu={Kn:18,labWhitePoint:"d65",Xn:.95047,Yn:1,Zn:1.08883,kE:216/24389,kKE:8,kK:24389/27,RefWhiteRGB:{X:.95047,Y:1,Z:1.08883},MtxRGB2XYZ:{m00:.4124564390896922,m01:.21267285140562253,m02:.0193338955823293,m10:.357576077643909,m11:.715152155287818,m12:.11919202588130297,m20:.18043748326639894,m21:.07217499330655958,m22:.9503040785363679},MtxXYZ2RGB:{m00:3.2404541621141045,m01:-.9692660305051868,m02:.055643430959114726,m10:-1.5371385127977166,m11:1.8760108454466942,m12:-.2040259135167538,m20:-.498531409556016,m21:.041556017530349834,m22:1.0572251882231791},As:.9414285350000001,Bs:1.040417467,Cs:1.089532651,MtxAdaptMa:{m00:.8951,m01:-.7502,m02:.0389,m10:.2664,m11:1.7135,m12:-.0685,m20:-.1614,m21:.0367,m22:1.0296},MtxAdaptMaI:{m00:.9869929054667123,m01:.43230526972339456,m02:-.008528664575177328,m10:-.14705425642099013,m11:.5183602715367776,m12:.04004282165408487,m20:.15996265166373125,m21:.0492912282128556,m22:.9684866957875502}},CQ=new Map([["a",[1.0985,.35585]],["b",[1.0985,.35585]],["c",[.98074,1.18232]],["d50",[.96422,.82521]],["d55",[.95682,.92149]],["d65",[.95047,1.08883]],["e",[1,1,1]],["f2",[.99186,.67393]],["f7",[.95041,1.08747]],["f11",[1.00962,.6435]],["icc",[.96422,.82521]]]);function Lf(n){const e=CQ.get(String(n).toLowerCase());if(!e)throw new Error("unknown Lab illuminant "+n);gu.labWhitePoint=n,gu.Xn=e[0],gu.Zn=e[1]}function f_(){return gu.labWhitePoint}const $O=(...n)=>{n=xn(n,"lab");const[e,t,i]=n,[r,s,o]=RQ(e,t,i),[a,l,c]=E6(r,s,o);return[a,l,c,n.length>3?n[3]:1]},RQ=(n,e,t)=>{const{kE:i,kK:r,kKE:s,Xn:o,Yn:a,Zn:l}=gu,c=(n+16)/116,f=.002*e+c,d=c-.005*t,m=f*f*f,v=d*d*d,b=m>i?m:(116*f-16)/r,x=n>s?Math.pow((n+16)/116,3):n/r,w=v>i?v:(116*d-16)/r,_=b*o,A=x*a,T=w*l;return[_,A,T]},JA=n=>{const e=Math.sign(n);return n=Math.abs(n),(n<=.0031308?n*12.92:1.055*Math.pow(n,1/2.4)-.055)*e},E6=(n,e,t)=>{const{MtxAdaptMa:i,MtxAdaptMaI:r,MtxXYZ2RGB:s,RefWhiteRGB:o,Xn:a,Yn:l,Zn:c}=gu,f=a*i.m00+l*i.m10+c*i.m20,d=a*i.m01+l*i.m11+c*i.m21,m=a*i.m02+l*i.m12+c*i.m22,v=o.X*i.m00+o.Y*i.m10+o.Z*i.m20,b=o.X*i.m01+o.Y*i.m11+o.Z*i.m21,x=o.X*i.m02+o.Y*i.m12+o.Z*i.m22,w=(n*i.m00+e*i.m10+t*i.m20)*(v/f),_=(n*i.m01+e*i.m11+t*i.m21)*(b/d),A=(n*i.m02+e*i.m12+t*i.m22)*(x/m),T=w*r.m00+_*r.m10+A*r.m20,E=w*r.m01+_*r.m11+A*r.m21,C=w*r.m02+_*r.m12+A*r.m22,R=JA(T*s.m00+E*s.m10+C*s.m20),O=JA(T*s.m01+E*s.m11+C*s.m21),I=JA(T*s.m02+E*s.m12+C*s.m22);return[R*255,O*255,I*255]},qO=(...n)=>{const[e,t,i,...r]=xn(n,"rgb"),[s,o,a]=M6(e,t,i),[l,c,f]=DQ(s,o,a);return[l,c,f,...r.length>0&&r[0]<1?[r[0]]:[]]};function DQ(n,e,t){const{Xn:i,Yn:r,Zn:s,kE:o,kK:a}=gu,l=n/i,c=e/r,f=t/s,d=l>o?Math.pow(l,1/3):(a*l+16)/116,m=c>o?Math.pow(c,1/3):(a*c+16)/116,v=f>o?Math.pow(f,1/3):(a*f+16)/116;return[116*m-16,500*(d-m),200*(m-v)]}function eC(n){const e=Math.sign(n);return n=Math.abs(n),(n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4))*e}const M6=(n,e,t)=>{n=eC(n/255),e=eC(e/255),t=eC(t/255);const{MtxRGB2XYZ:i,MtxAdaptMa:r,MtxAdaptMaI:s,Xn:o,Yn:a,Zn:l,As:c,Bs:f,Cs:d}=gu;let m=n*i.m00+e*i.m10+t*i.m20,v=n*i.m01+e*i.m11+t*i.m21,b=n*i.m02+e*i.m12+t*i.m22;const x=o*r.m00+a*r.m10+l*r.m20,w=o*r.m01+a*r.m11+l*r.m21,_=o*r.m02+a*r.m12+l*r.m22;let A=m*r.m00+v*r.m10+b*r.m20,T=m*r.m01+v*r.m11+b*r.m21,E=m*r.m02+v*r.m12+b*r.m22;return A*=x/c,T*=w/f,E*=_/d,m=A*s.m00+T*s.m10+E*s.m20,v=A*s.m01+T*s.m11+E*s.m21,b=A*s.m02+T*s.m12+E*s.m22,[m,v,b]};pt.prototype.lab=function(){return qO(this._rgb)};const OQ=(...n)=>new pt(...n,"lab");Object.assign(Ln,{lab:OQ,getLabWhitePoint:f_,setLabWhitePoint:Lf});pn.format.lab=$O;pn.autodetect.push({p:2,test:(...n)=>{if(n=xn(n,"lab"),Pn(n)==="array"&&n.length===3)return"lab"}});pt.prototype.darken=function(n=1){const e=this,t=e.lab();return t[0]-=gu.Kn*n,new pt(t,"lab").alpha(e.alpha(),!0)};pt.prototype.brighten=function(n=1){return this.darken(-n)};pt.prototype.darker=pt.prototype.darken;pt.prototype.brighter=pt.prototype.brighten;pt.prototype.get=function(n){const[e,t]=n.split("."),i=this[e]();if(t){const r=e.indexOf(t)-(e.substr(0,2)==="ok"?2:0);if(r>-1)return i[r];throw new Error(`unknown channel ${t} in mode ${e}`)}else return i};const{pow:LQ}=Math,PQ=1e-7,IQ=20;pt.prototype.luminance=function(n,e="rgb"){if(n!==void 0&&Pn(n)==="number"){if(n===0)return new pt([0,0,0,this._rgb[3]],"rgb");if(n===1)return new pt([255,255,255,this._rgb[3]],"rgb");let t=this.luminance(),i=IQ;const r=(o,a)=>{const l=o.interpolate(a,.5,e),c=l.luminance();return Math.abs(n-c)<PQ||!i--?l:c>n?r(o,l):r(l,a)},s=(t>n?r(new pt([0,0,0]),this):r(this,new pt([255,255,255]))).rgb();return new pt([...s,this._rgb[3]])}return NQ(...this._rgb.slice(0,3))};const NQ=(n,e,t)=>(n=tC(n),e=tC(e),t=tC(t),.2126*n+.7152*e+.0722*t),tC=n=>(n/=255,n<=.03928?n/12.92:LQ((n+.055)/1.055,2.4)),no={},R0=(n,e,t=.5,...i)=>{let r=i[0]||"lrgb";if(!no[r]&&!i.length&&(r=Object.keys(no)[0]),!no[r])throw new Error(`interpolation mode ${r} is not defined`);return Pn(n)!=="object"&&(n=new pt(n)),Pn(e)!=="object"&&(e=new pt(e)),no[r](n,e,t).alpha(n.alpha()+t*(e.alpha()-n.alpha()))};pt.prototype.mix=pt.prototype.interpolate=function(n,e=.5,...t){return R0(this,n,e,...t)};pt.prototype.premultiply=function(n=!1){const e=this._rgb,t=e[3];return n?(this._rgb=[e[0]*t,e[1]*t,e[2]*t,t],this):new pt([e[0]*t,e[1]*t,e[2]*t,t],"rgb")};const{sin:UQ,cos:kQ}=Math,T6=(...n)=>{let[e,t,i]=xn(n,"lch");return isNaN(i)&&(i=0),i=i*SQ,[e,kQ(i)*t,UQ(i)*t]},XO=(...n)=>{n=xn(n,"lch");const[e,t,i]=n,[r,s,o]=T6(e,t,i),[a,l,c]=$O(r,s,o);return[a,l,c,n.length>3?n[3]:1]},zQ=(...n)=>{const e=x6(xn(n,"hcl"));return XO(...e)},{sqrt:FQ,atan2:BQ,round:VQ}=Math,A6=(...n)=>{const[e,t,i]=xn(n,"lab"),r=FQ(t*t+i*i);let s=(BQ(i,t)*EQ+360)%360;return VQ(r*1e4)===0&&(s=Number.NaN),[e,r,s]},YO=(...n)=>{const[e,t,i,...r]=xn(n,"rgb"),[s,o,a]=qO(e,t,i),[l,c,f]=A6(s,o,a);return[l,c,f,...r.length>0&&r[0]<1?[r[0]]:[]]};pt.prototype.lch=function(){return YO(this._rgb)};pt.prototype.hcl=function(){return x6(YO(this._rgb))};const GQ=(...n)=>new pt(...n,"lch"),HQ=(...n)=>new pt(...n,"hcl");Object.assign(Ln,{lch:GQ,hcl:HQ});pn.format.lch=XO;pn.format.hcl=zQ;["lch","hcl"].forEach(n=>pn.autodetect.push({p:2,test:(...e)=>{if(e=xn(e,n),Pn(e)==="array"&&e.length===3)return n}}));pt.prototype.saturate=function(n=1){const e=this,t=e.lch();return t[1]+=gu.Kn*n,t[1]<0&&(t[1]=0),new pt(t,"lch").alpha(e.alpha(),!0)};pt.prototype.desaturate=function(n=1){return this.saturate(-n)};pt.prototype.set=function(n,e,t=!1){const[i,r]=n.split("."),s=this[i]();if(r){const o=i.indexOf(r)-(i.substr(0,2)==="ok"?2:0);if(o>-1){if(Pn(e)=="string")switch(e.charAt(0)){case"+":s[o]+=+e;break;case"-":s[o]+=+e;break;case"*":s[o]*=+e.substr(1);break;case"/":s[o]/=+e.substr(1);break;default:s[o]=+e}else if(Pn(e)==="number")s[o]=e;else throw new Error("unsupported value for Color.set");const a=new pt(s,i);return t?(this._rgb=a._rgb,this):a}throw new Error(`unknown channel ${r} in mode ${i}`)}else return s};pt.prototype.tint=function(n=.5,...e){return R0(this,"white",n,...e)};pt.prototype.shade=function(n=.5,...e){return R0(this,"black",n,...e)};const jQ=(n,e,t)=>{const i=n._rgb,r=e._rgb;return new pt(i[0]+t*(r[0]-i[0]),i[1]+t*(r[1]-i[1]),i[2]+t*(r[2]-i[2]),"rgb")};no.rgb=jQ;const{sqrt:nC,pow:xg}=Math,WQ=(n,e,t)=>{const[i,r,s]=n._rgb,[o,a,l]=e._rgb;return new pt(nC(xg(i,2)*(1-t)+xg(o,2)*t),nC(xg(r,2)*(1-t)+xg(a,2)*t),nC(xg(s,2)*(1-t)+xg(l,2)*t),"rgb")};no.lrgb=WQ;const $Q=(n,e,t)=>{const i=n.lab(),r=e.lab();return new pt(i[0]+t*(r[0]-i[0]),i[1]+t*(r[1]-i[1]),i[2]+t*(r[2]-i[2]),"lab")};no.lab=$Q;const nv=(n,e,t,i)=>{let r,s;i==="hsl"?(r=n.hsl(),s=e.hsl()):i==="hsv"?(r=n.hsv(),s=e.hsv()):i==="hcg"?(r=n.hcg(),s=e.hcg()):i==="hsi"?(r=n.hsi(),s=e.hsi()):i==="lch"||i==="hcl"?(i="hcl",r=n.hcl(),s=e.hcl()):i==="oklch"&&(r=n.oklch().reverse(),s=e.oklch().reverse());let o,a,l,c,f,d;(i.substr(0,1)==="h"||i==="oklch")&&([o,l,f]=r,[a,c,d]=s);let m,v,b,x;return!isNaN(o)&&!isNaN(a)?(a>o&&a-o>180?x=a-(o+360):a<o&&o-a>180?x=a+360-o:x=a-o,v=o+t*x):isNaN(o)?isNaN(a)?v=Number.NaN:(v=a,(f==1||f==0)&&i!="hsv"&&(m=c)):(v=o,(d==1||d==0)&&i!="hsv"&&(m=l)),m===void 0&&(m=l+t*(c-l)),b=f+t*(d-f),i==="oklch"?new pt([b,m,v],i):new pt([v,m,b],i)},C6=(n,e,t)=>nv(n,e,t,"lch");no.lch=C6;no.hcl=C6;const qQ=n=>{if(Pn(n)=="number"&&n>=0&&n<=16777215){const e=n>>16,t=n>>8&255,i=n&255;return[e,t,i,1]}throw new Error("unknown num color: "+n)},XQ=(...n)=>{const[e,t,i]=xn(n,"rgb");return(e<<16)+(t<<8)+i};pt.prototype.num=function(){return XQ(this._rgb)};const YQ=(...n)=>new pt(...n,"num");Object.assign(Ln,{num:YQ});pn.format.num=qQ;pn.autodetect.push({p:5,test:(...n)=>{if(n.length===1&&Pn(n[0])==="number"&&n[0]>=0&&n[0]<=16777215)return"num"}});const ZQ=(n,e,t)=>{const i=n.num(),r=e.num();return new pt(i+t*(r-i),"num")};no.num=ZQ;const{floor:KQ}=Math,QQ=(...n)=>{n=xn(n,"hcg");let[e,t,i]=n,r,s,o;i=i*255;const a=t*255;if(t===0)r=s=o=i;else{e===360&&(e=0),e>360&&(e-=360),e<0&&(e+=360),e/=60;const l=KQ(e),c=e-l,f=i*(1-t),d=f+a*(1-c),m=f+a*c,v=f+a;switch(l){case 0:[r,s,o]=[v,m,f];break;case 1:[r,s,o]=[d,v,f];break;case 2:[r,s,o]=[f,v,m];break;case 3:[r,s,o]=[f,d,v];break;case 4:[r,s,o]=[m,f,v];break;case 5:[r,s,o]=[v,f,d];break}}return[r,s,o,n.length>3?n[3]:1]},JQ=(...n)=>{const[e,t,i]=xn(n,"rgb"),r=b6(e,t,i),s=_6(e,t,i),o=s-r,a=o*100/255,l=r/(255-o)*100;let c;return o===0?c=Number.NaN:(e===s&&(c=(t-i)/o),t===s&&(c=2+(i-e)/o),i===s&&(c=4+(e-t)/o),c*=60,c<0&&(c+=360)),[c,a,l]};pt.prototype.hcg=function(){return JQ(this._rgb)};const eJ=(...n)=>new pt(...n,"hcg");Ln.hcg=eJ;pn.format.hcg=QQ;pn.autodetect.push({p:1,test:(...n)=>{if(n=xn(n,"hcg"),Pn(n)==="array"&&n.length===3)return"hcg"}});const tJ=(n,e,t)=>nv(n,e,t,"hcg");no.hcg=tJ;const{cos:wg}=Math,nJ=(...n)=>{n=xn(n,"hsi");let[e,t,i]=n,r,s,o;return isNaN(e)&&(e=0),isNaN(t)&&(t=0),e>360&&(e-=360),e<0&&(e+=360),e/=360,e<1/3?(o=(1-t)/3,r=(1+t*wg(Sf*e)/wg(QA-Sf*e))/3,s=1-(o+r)):e<2/3?(e-=1/3,r=(1-t)/3,s=(1+t*wg(Sf*e)/wg(QA-Sf*e))/3,o=1-(r+s)):(e-=2/3,s=(1-t)/3,o=(1+t*wg(Sf*e)/wg(QA-Sf*e))/3,r=1-(s+o)),r=Zp(i*r*3),s=Zp(i*s*3),o=Zp(i*o*3),[r*255,s*255,o*255,n.length>3?n[3]:1]},{min:iJ,sqrt:rJ,acos:sJ}=Math,oJ=(...n)=>{let[e,t,i]=xn(n,"rgb");e/=255,t/=255,i/=255;let r;const s=iJ(e,t,i),o=(e+t+i)/3,a=o>0?1-s/o:0;return a===0?r=NaN:(r=(e-t+(e-i))/2,r/=rJ((e-t)*(e-t)+(e-i)*(t-i)),r=sJ(r),i>t&&(r=Sf-r),r/=Sf),[r*360,a,o]};pt.prototype.hsi=function(){return oJ(this._rgb)};const aJ=(...n)=>new pt(...n,"hsi");Ln.hsi=aJ;pn.format.hsi=nJ;pn.autodetect.push({p:2,test:(...n)=>{if(n=xn(n,"hsi"),Pn(n)==="array"&&n.length===3)return"hsi"}});const lJ=(n,e,t)=>nv(n,e,t,"hsi");no.hsi=lJ;const Y3=(...n)=>{n=xn(n,"hsl");const[e,t,i]=n;let r,s,o;if(t===0)r=s=o=i*255;else{const a=[0,0,0],l=[0,0,0],c=i<.5?i*(1+t):i+t-i*t,f=2*i-c,d=e/360;a[0]=d+1/3,a[1]=d,a[2]=d-1/3;for(let m=0;m<3;m++)a[m]<0&&(a[m]+=1),a[m]>1&&(a[m]-=1),6*a[m]<1?l[m]=f+(c-f)*6*a[m]:2*a[m]<1?l[m]=c:3*a[m]<2?l[m]=f+(c-f)*(2/3-a[m])*6:l[m]=f;[r,s,o]=[l[0]*255,l[1]*255,l[2]*255]}return n.length>3?[r,s,o,n[3]]:[r,s,o,1]},R6=(...n)=>{n=xn(n,"rgba");let[e,t,i]=n;e/=255,t/=255,i/=255;const r=b6(e,t,i),s=_6(e,t,i),o=(s+r)/2;let a,l;return s===r?(a=0,l=Number.NaN):a=o<.5?(s-r)/(s+r):(s-r)/(2-s-r),e==s?l=(t-i)/(s-r):t==s?l=2+(i-e)/(s-r):i==s&&(l=4+(e-t)/(s-r)),l*=60,l<0&&(l+=360),n.length>3&&n[3]!==void 0?[l,a,o,n[3]]:[l,a,o]};pt.prototype.hsl=function(){return R6(this._rgb)};const cJ=(...n)=>new pt(...n,"hsl");Ln.hsl=cJ;pn.format.hsl=Y3;pn.autodetect.push({p:2,test:(...n)=>{if(n=xn(n,"hsl"),Pn(n)==="array"&&n.length===3)return"hsl"}});const uJ=(n,e,t)=>nv(n,e,t,"hsl");no.hsl=uJ;const{floor:fJ}=Math,hJ=(...n)=>{n=xn(n,"hsv");let[e,t,i]=n,r,s,o;if(i*=255,t===0)r=s=o=i;else{e===360&&(e=0),e>360&&(e-=360),e<0&&(e+=360),e/=60;const a=fJ(e),l=e-a,c=i*(1-t),f=i*(1-t*l),d=i*(1-t*(1-l));switch(a){case 0:[r,s,o]=[i,d,c];break;case 1:[r,s,o]=[f,i,c];break;case 2:[r,s,o]=[c,i,d];break;case 3:[r,s,o]=[c,f,i];break;case 4:[r,s,o]=[d,c,i];break;case 5:[r,s,o]=[i,c,f];break}}return[r,s,o,n.length>3?n[3]:1]},{min:dJ,max:pJ}=Math,mJ=(...n)=>{n=xn(n,"rgb");let[e,t,i]=n;const r=dJ(e,t,i),s=pJ(e,t,i),o=s-r;let a,l,c;return c=s/255,s===0?(a=Number.NaN,l=0):(l=o/s,e===s&&(a=(t-i)/o),t===s&&(a=2+(i-e)/o),i===s&&(a=4+(e-t)/o),a*=60,a<0&&(a+=360)),[a,l,c]};pt.prototype.hsv=function(){return mJ(this._rgb)};const gJ=(...n)=>new pt(...n,"hsv");Ln.hsv=gJ;pn.format.hsv=hJ;pn.autodetect.push({p:2,test:(...n)=>{if(n=xn(n,"hsv"),Pn(n)==="array"&&n.length===3)return"hsv"}});const vJ=(n,e,t)=>nv(n,e,t,"hsv");no.hsv=vJ;function oE(n,e){let t=n.length;Array.isArray(n[0])||(n=[n]),Array.isArray(e[0])||(e=e.map(o=>[o]));let i=e[0].length,r=e[0].map((o,a)=>e.map(l=>l[a])),s=n.map(o=>r.map(a=>Array.isArray(o)?o.reduce((l,c,f)=>l+c*(a[f]||0),0):a.reduce((l,c)=>l+c*o,0)));return t===1&&(s=s[0]),i===1?s.map(o=>o[0]):s}const ZO=(...n)=>{n=xn(n,"lab");const[e,t,i,...r]=n,[s,o,a]=yJ([e,t,i]),[l,c,f]=E6(s,o,a);return[l,c,f,...r.length>0&&r[0]<1?[r[0]]:[]]};function yJ(n){var e=[[1.2268798758459243,-.5578149944602171,.2813910456659647],[-.0405757452148008,1.112286803280317,-.0717110580655164],[-.0763729366746601,-.4214933324022432,1.5869240198367816]],t=[[1,.3963377773761749,.2158037573099136],[1,-.1055613458156586,-.0638541728258133],[1,-.0894841775298119,-1.2914855480194092]],i=oE(t,n);return oE(e,i.map(r=>r**3))}const KO=(...n)=>{const[e,t,i,...r]=xn(n,"rgb"),s=M6(e,t,i);return[...bJ(s),...r.length>0&&r[0]<1?[r[0]]:[]]};function bJ(n){const e=[[.819022437996703,.3619062600528904,-.1288737815209879],[.0329836539323885,.9292868615863434,.0361446663506424],[.0481771893596242,.2642395317527308,.6335478284694309]],t=[[.210454268309314,.7936177747023054,-.0040720430116193],[1.9779985324311684,-2.42859224204858,.450593709617411],[.0259040424655478,.7827717124575296,-.8086757549230774]],i=oE(e,n);return oE(t,i.map(r=>Math.cbrt(r)))}pt.prototype.oklab=function(){return KO(this._rgb)};const _J=(...n)=>new pt(...n,"oklab");Object.assign(Ln,{oklab:_J});pn.format.oklab=ZO;pn.autodetect.push({p:2,test:(...n)=>{if(n=xn(n,"oklab"),Pn(n)==="array"&&n.length===3)return"oklab"}});const xJ=(n,e,t)=>{const i=n.oklab(),r=e.oklab();return new pt(i[0]+t*(r[0]-i[0]),i[1]+t*(r[1]-i[1]),i[2]+t*(r[2]-i[2]),"oklab")};no.oklab=xJ;const wJ=(n,e,t)=>nv(n,e,t,"oklch");no.oklch=wJ;const{pow:iC,sqrt:rC,PI:sC,cos:AU,sin:CU,atan2:SJ}=Math,EJ=(n,e="lrgb",t=null)=>{const i=n.length;t||(t=Array.from(new Array(i)).map(()=>1));const r=i/t.reduce(function(d,m){return d+m});if(t.forEach((d,m)=>{t[m]*=r}),n=n.map(d=>new pt(d)),e==="lrgb")return MJ(n,t);const s=n.shift(),o=s.get(e),a=[];let l=0,c=0;for(let d=0;d<o.length;d++)if(o[d]=(o[d]||0)*t[0],a.push(isNaN(o[d])?0:t[0]),e.charAt(d)==="h"&&!isNaN(o[d])){const m=o[d]/180*sC;l+=AU(m)*t[0],c+=CU(m)*t[0]}let f=s.alpha()*t[0];n.forEach((d,m)=>{const v=d.get(e);f+=d.alpha()*t[m+1];for(let b=0;b<o.length;b++)if(!isNaN(v[b]))if(a[b]+=t[m+1],e.charAt(b)==="h"){const x=v[b]/180*sC;l+=AU(x)*t[m+1],c+=CU(x)*t[m+1]}else o[b]+=v[b]*t[m+1]});for(let d=0;d<o.length;d++)if(e.charAt(d)==="h"){let m=SJ(c/a[d],l/a[d])/sC*180;for(;m<0;)m+=360;for(;m>=360;)m-=360;o[d]=m}else o[d]=o[d]/a[d];return f/=i,new pt(o,e).alpha(f>.99999?1:f,!0)},MJ=(n,e)=>{const t=n.length,i=[0,0,0,0];for(let r=0;r<n.length;r++){const s=n[r],o=e[r]/t,a=s._rgb;i[0]+=iC(a[0],2)*o,i[1]+=iC(a[1],2)*o,i[2]+=iC(a[2],2)*o,i[3]+=a[3]*o}return i[0]=rC(i[0]),i[1]=rC(i[1]),i[2]=rC(i[2]),i[3]>.9999999&&(i[3]=1),new pt(WO(i))},{pow:TJ}=Math;function aE(n){let e="rgb",t=Ln("#ccc"),i=0,r=[0,1],s=[0,1],o=[],a=[0,0],l=!1,c=[],f=!1,d=0,m=1,v=!1,b={},x=!0,w=1;const _=function(I){if(I=I||["#fff","#000"],I&&Pn(I)==="string"&&Ln.brewer&&Ln.brewer[I.toLowerCase()]&&(I=Ln.brewer[I.toLowerCase()]),Pn(I)==="array"){I.length===1&&(I=[I[0],I[0]]),I=I.slice(0);for(let L=0;L<I.length;L++)I[L]=Ln(I[L]);o.length=0;for(let L=0;L<I.length;L++)o.push(L/(I.length-1))}return R(),c=I},A=function(I){if(l!=null){const L=l.length-1;let N=0;for(;N<L&&I>=l[N];)N++;return N-1}return 0};let T=I=>I,E=I=>I;const C=function(I,L){let N,V;if(L==null&&(L=!1),isNaN(I)||I===null)return t;L?V=I:l&&l.length>2?V=A(I)/(l.length-2):m!==d?V=(I-d)/(m-d):V=1,V=E(V),L||(V=T(V)),w!==1&&(V=TJ(V,w)),V=a[0]+V*(1-a[0]-a[1]),V=Zp(V,0,1);const B=Math.floor(V*1e4);if(x&&b[B])N=b[B];else{if(Pn(c)==="array")for(let k=0;k<o.length;k++){const j=o[k];if(V<=j){N=c[k];break}if(V>=j&&k===o.length-1){N=c[k];break}if(V>j&&V<o[k+1]){V=(V-j)/(o[k+1]-j),N=Ln.interpolate(c[k],c[k+1],V,e);break}}else Pn(c)==="function"&&(N=c(V));x&&(b[B]=N)}return N};var R=()=>b={};_(n);const O=function(I){const L=Ln(C(I));return f&&L[f]?L[f]():L};return O.classes=function(I){if(I!=null){if(Pn(I)==="array")l=I,r=[I[0],I[I.length-1]];else{const L=Ln.analyze(r);I===0?l=[L.min,L.max]:l=Ln.limits(L,"e",I)}return O}return l},O.domain=function(I){if(!arguments.length)return s;s=I.slice(0),d=I[0],m=I[I.length-1],o=[];const L=c.length;if(I.length===L&&d!==m)for(let N of Array.from(I))o.push((N-d)/(m-d));else{for(let N=0;N<L;N++)o.push(N/(L-1));if(I.length>2){const N=I.map((B,k)=>k/(I.length-1)),V=I.map(B=>(B-d)/(m-d));V.every((B,k)=>N[k]===B)||(E=B=>{if(B<=0||B>=1)return B;let k=0;for(;B>=V[k+1];)k++;const j=(B-V[k])/(V[k+1]-V[k]);return N[k]+j*(N[k+1]-N[k])})}}return r=[d,m],O},O.mode=function(I){return arguments.length?(e=I,R(),O):e},O.range=function(I,L){return _(I),O},O.out=function(I){return f=I,O},O.spread=function(I){return arguments.length?(i=I,O):i},O.correctLightness=function(I){return I==null&&(I=!0),v=I,R(),v?T=function(L){const N=C(0,!0).lab()[0],V=C(1,!0).lab()[0],B=N>V;let k=C(L,!0).lab()[0];const j=N+(V-N)*L;let q=k-j,W=0,G=1,K=20;for(;Math.abs(q)>.01&&K-- >0;)(function(){return B&&(q*=-1),q<0?(W=L,L+=(G-L)*.5):(G=L,L+=(W-L)*.5),k=C(L,!0).lab()[0],q=k-j})();return L}:T=L=>L,O},O.padding=function(I){return I!=null?(Pn(I)==="number"&&(I=[I,I]),a=I,O):a},O.colors=function(I,L){arguments.length<2&&(L="hex");let N=[];if(arguments.length===0)N=c.slice(0);else if(I===1)N=[O(.5)];else if(I>1){const V=r[0],B=r[1]-V;N=AJ(0,I).map(k=>O(V+k/(I-1)*B))}else{n=[];let V=[];if(l&&l.length>2)for(let B=1,k=l.length,j=1<=k;j?B<k:B>k;j?B++:B--)V.push((l[B-1]+l[B])*.5);else V=r;N=V.map(B=>O(B))}return Ln[L]&&(N=N.map(V=>V[L]())),N},O.cache=function(I){return I!=null?(x=I,O):x},O.gamma=function(I){return I!=null?(w=I,O):w},O.nodata=function(I){return I!=null?(t=Ln(I),O):t},O}function AJ(n,e,t){let i=[],r=n<e,s=e;for(let o=n;r?o<s:o>s;r?o++:o--)i.push(o);return i}const CJ=function(n){let e=[1,1];for(let t=1;t<n;t++){let i=[1];for(let r=1;r<=e.length;r++)i[r]=(e[r]||0)+e[r-1];e=i}return e},RJ=function(n){let e,t,i,r;if(n=n.map(s=>new pt(s)),n.length===2)[t,i]=n.map(s=>s.lab()),e=function(s){const o=[0,1,2].map(a=>t[a]+s*(i[a]-t[a]));return new pt(o,"lab")};else if(n.length===3)[t,i,r]=n.map(s=>s.lab()),e=function(s){const o=[0,1,2].map(a=>(1-s)*(1-s)*t[a]+2*(1-s)*s*i[a]+s*s*r[a]);return new pt(o,"lab")};else if(n.length===4){let s;[t,i,r,s]=n.map(o=>o.lab()),e=function(o){const a=[0,1,2].map(l=>(1-o)*(1-o)*(1-o)*t[l]+3*(1-o)*(1-o)*o*i[l]+3*(1-o)*o*o*r[l]+o*o*o*s[l]);return new pt(a,"lab")}}else if(n.length>=5){let s,o,a;s=n.map(l=>l.lab()),a=n.length-1,o=CJ(a),e=function(l){const c=1-l,f=[0,1,2].map(d=>s.reduce((m,v,b)=>m+o[b]*c**(a-b)*l**b*v[d],0));return new pt(f,"lab")}}else throw new RangeError("No point in running bezier with only one color.");return e},DJ=n=>{const e=RJ(n);return e.scale=()=>aE(e),e},{round:D6}=Math;pt.prototype.rgb=function(n=!0){return n===!1?this._rgb.slice(0,3):this._rgb.slice(0,3).map(D6)};pt.prototype.rgba=function(n=!0){return this._rgb.slice(0,4).map((e,t)=>t<3?n===!1?e:D6(e):e)};const OJ=(...n)=>new pt(...n,"rgb");Object.assign(Ln,{rgb:OJ});pn.format.rgb=(...n)=>{const e=xn(n,"rgba");return e[3]===void 0&&(e[3]=1),e};pn.autodetect.push({p:3,test:(...n)=>{if(n=xn(n,"rgba"),Pn(n)==="array"&&(n.length===3||n.length===4&&Pn(n[3])=="number"&&n[3]>=0&&n[3]<=1))return"rgb"}});const pc=(n,e,t)=>{if(!pc[t])throw new Error("unknown blend mode "+t);return pc[t](n,e)},xd=n=>(e,t)=>{const i=Ln(t).rgb(),r=Ln(e).rgb();return Ln.rgb(n(i,r))},wd=n=>(e,t)=>{const i=[];return i[0]=n(e[0],t[0]),i[1]=n(e[1],t[1]),i[2]=n(e[2],t[2]),i},LJ=n=>n,PJ=(n,e)=>n*e/255,IJ=(n,e)=>n>e?e:n,NJ=(n,e)=>n>e?n:e,UJ=(n,e)=>255*(1-(1-n/255)*(1-e/255)),kJ=(n,e)=>e<128?2*n*e/255:255*(1-2*(1-n/255)*(1-e/255)),zJ=(n,e)=>255*(1-(1-e/255)/(n/255)),FJ=(n,e)=>n===255?255:(n=255*(e/255)/(1-n/255),n>255?255:n);pc.normal=xd(wd(LJ));pc.multiply=xd(wd(PJ));pc.screen=xd(wd(UJ));pc.overlay=xd(wd(kJ));pc.darken=xd(wd(IJ));pc.lighten=xd(wd(NJ));pc.dodge=xd(wd(FJ));pc.burn=xd(wd(zJ));const{pow:BJ,sin:VJ,cos:GJ}=Math;function HJ(n=300,e=-1.5,t=1,i=1,r=[0,1]){let s=0,o;Pn(r)==="array"?o=r[1]-r[0]:(o=0,r=[r,r]);const a=function(l){const c=Sf*((n+120)/360+e*l),f=BJ(r[0]+o*l,i),m=(s!==0?t[0]+l*s:t)*f*(1-f)/2,v=GJ(c),b=VJ(c),x=f+m*(-.14861*v+1.78277*b),w=f+m*(-.29227*v-.90649*b),_=f+m*(1.97294*v);return Ln(WO([x*255,w*255,_*255,1]))};return a.start=function(l){return l==null?n:(n=l,a)},a.rotations=function(l){return l==null?e:(e=l,a)},a.gamma=function(l){return l==null?i:(i=l,a)},a.hue=function(l){return l==null?t:(t=l,Pn(t)==="array"?(s=t[1]-t[0],s===0&&(t=t[1])):s=0,a)},a.lightness=function(l){return l==null?r:(Pn(l)==="array"?(r=l,o=l[1]-l[0]):(r=[l,l],o=0),a)},a.scale=()=>Ln.scale(a),a.hue(t),a}const jJ="0123456789abcdef",{floor:WJ,random:$J}=Math,qJ=(n=$J)=>{let e="#";for(let t=0;t<6;t++)e+=jJ.charAt(WJ(n()*16));return new pt(e,"hex")},{log:RU,pow:XJ,floor:YJ,abs:ZJ}=Math;function O6(n,e=null){const t={min:Number.MAX_VALUE,max:Number.MAX_VALUE*-1,sum:0,values:[],count:0};return Pn(n)==="object"&&(n=Object.values(n)),n.forEach(i=>{e&&Pn(i)==="object"&&(i=i[e]),i!=null&&!isNaN(i)&&(t.values.push(i),t.sum+=i,i<t.min&&(t.min=i),i>t.max&&(t.max=i),t.count+=1)}),t.domain=[t.min,t.max],t.limits=(i,r)=>L6(t,i,r),t}function L6(n,e="equal",t=7){Pn(n)=="array"&&(n=O6(n));const{min:i,max:r}=n,s=n.values.sort((a,l)=>a-l);if(t===1)return[i,r];const o=[];if(e.substr(0,1)==="c"&&(o.push(i),o.push(r)),e.substr(0,1)==="e"){o.push(i);for(let a=1;a<t;a++)o.push(i+a/t*(r-i));o.push(r)}else if(e.substr(0,1)==="l"){if(i<=0)throw new Error("Logarithmic scales are only possible for values > 0");const a=Math.LOG10E*RU(i),l=Math.LOG10E*RU(r);o.push(i);for(let c=1;c<t;c++)o.push(XJ(10,a+c/t*(l-a)));o.push(r)}else if(e.substr(0,1)==="q"){o.push(i);for(let a=1;a<t;a++){const l=(s.length-1)*a/t,c=YJ(l);if(c===l)o.push(s[c]);else{const f=l-c;o.push(s[c]*(1-f)+s[c+1]*f)}}o.push(r)}else if(e.substr(0,1)==="k"){let a;const l=s.length,c=new Array(l),f=new Array(t);let d=!0,m=0,v=null;v=[],v.push(i);for(let w=1;w<t;w++)v.push(i+w/t*(r-i));for(v.push(r);d;){for(let _=0;_<t;_++)f[_]=0;for(let _=0;_<l;_++){const A=s[_];let T=Number.MAX_VALUE,E;for(let C=0;C<t;C++){const R=ZJ(v[C]-A);R<T&&(T=R,E=C),f[E]++,c[_]=E}}const w=new Array(t);for(let _=0;_<t;_++)w[_]=null;for(let _=0;_<l;_++)a=c[_],w[a]===null?w[a]=s[_]:w[a]+=s[_];for(let _=0;_<t;_++)w[_]*=1/f[_];d=!1;for(let _=0;_<t;_++)if(w[_]!==v[_]){d=!0;break}v=w,m++,m>200&&(d=!1)}const b={};for(let w=0;w<t;w++)b[w]=[];for(let w=0;w<l;w++)a=c[w],b[a].push(s[w]);let x=[];for(let w=0;w<t;w++)x.push(b[w][0]),x.push(b[w][b[w].length-1]);x=x.sort((w,_)=>w-_),o.push(x[0]);for(let w=1;w<x.length;w+=2){const _=x[w];!isNaN(_)&&o.indexOf(_)===-1&&o.push(_)}}return o}const KJ=(n,e)=>{n=new pt(n),e=new pt(e);const t=n.luminance(),i=e.luminance();return t>i?(t+.05)/(i+.05):(i+.05)/(t+.05)};const DU=.027,QJ=5e-4,JJ=.1,OU=1.14,tw=.022,LU=1.414,eee=(n,e)=>{n=new pt(n),e=new pt(e),n.alpha()<1&&(n=R0(e,n,n.alpha(),"rgb"));const t=PU(...n.rgb()),i=PU(...e.rgb()),r=t>=tw?t:t+Math.pow(tw-t,LU),s=i>=tw?i:i+Math.pow(tw-i,LU),o=Math.pow(s,.56)-Math.pow(r,.57),a=Math.pow(s,.65)-Math.pow(r,.62),l=Math.abs(s-r)<QJ?0:r<s?o*OU:a*OU;return(Math.abs(l)<JJ?0:l>0?l-DU:l+DU)*100};function PU(n,e,t){return .2126729*Math.pow(n/255,2.4)+.7151522*Math.pow(e/255,2.4)+.072175*Math.pow(t/255,2.4)}const{sqrt:ff,pow:Ir,min:tee,max:nee,atan2:IU,abs:NU,cos:nw,sin:UU,exp:iee,PI:kU}=Math;function ree(n,e,t=1,i=1,r=1){var s=function(ee){return 360*ee/(2*kU)},o=function(ee){return 2*kU*ee/360};n=new pt(n),e=new pt(e);const[a,l,c]=Array.from(n.lab()),[f,d,m]=Array.from(e.lab()),v=(a+f)/2,b=ff(Ir(l,2)+Ir(c,2)),x=ff(Ir(d,2)+Ir(m,2)),w=(b+x)/2,_=.5*(1-ff(Ir(w,7)/(Ir(w,7)+Ir(25,7)))),A=l*(1+_),T=d*(1+_),E=ff(Ir(A,2)+Ir(c,2)),C=ff(Ir(T,2)+Ir(m,2)),R=(E+C)/2,O=s(IU(c,A)),I=s(IU(m,T)),L=O>=0?O:O+360,N=I>=0?I:I+360,V=NU(L-N)>180?(L+N+360)/2:(L+N)/2,B=1-.17*nw(o(V-30))+.24*nw(o(2*V))+.32*nw(o(3*V+6))-.2*nw(o(4*V-63));let k=N-L;k=NU(k)<=180?k:N<=L?k+360:k-360,k=2*ff(E*C)*UU(o(k)/2);const j=f-a,q=C-E,W=1+.015*Ir(v-50,2)/ff(20+Ir(v-50,2)),G=1+.045*R,K=1+.015*R*B,te=30*iee(-Ir((V-275)/25,2)),F=-(2*ff(Ir(R,7)/(Ir(R,7)+Ir(25,7))))*UU(2*o(te)),X=ff(Ir(j/(t*W),2)+Ir(q/(i*G),2)+Ir(k/(r*K),2)+F*(q/(i*G))*(k/(r*K)));return nee(0,tee(100,X))}function see(n,e,t="lab"){n=new pt(n),e=new pt(e);const i=n.get(t),r=e.get(t);let s=0;for(let o in i){const a=(i[o]||0)-(r[o]||0);s+=a*a}return Math.sqrt(s)}const oee=(...n)=>{try{return new pt(...n),!0}catch{return!1}},aee={cool(){return aE([Ln.hsl(180,1,.9),Ln.hsl(250,.7,.4)])},hot(){return aE(["#000","#f00","#ff0","#fff"]).mode("rgb")}},Z3={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},P6=Object.keys(Z3),zU=new Map(P6.map(n=>[n.toLowerCase(),n])),lee=typeof Proxy=="function"?new Proxy(Z3,{get(n,e){const t=e.toLowerCase();if(zU.has(t))return n[zU.get(t)]},getOwnPropertyNames(){return Object.getOwnPropertyNames(P6)}}):Z3,cee=(...n)=>{n=xn(n,"cmyk");const[e,t,i,r]=n,s=n.length>4?n[4]:1;return r===1?[0,0,0,s]:[e>=1?0:255*(1-e)*(1-r),t>=1?0:255*(1-t)*(1-r),i>=1?0:255*(1-i)*(1-r),s]},{max:FU}=Math,uee=(...n)=>{let[e,t,i]=xn(n,"rgb");e=e/255,t=t/255,i=i/255;const r=1-FU(e,FU(t,i)),s=r<1?1/(1-r):0,o=(1-e-r)*s,a=(1-t-r)*s,l=(1-i-r)*s;return[o,a,l,r]};pt.prototype.cmyk=function(){return uee(this._rgb)};const fee=(...n)=>new pt(...n,"cmyk");Object.assign(Ln,{cmyk:fee});pn.format.cmyk=cee;pn.autodetect.push({p:2,test:(...n)=>{if(n=xn(n,"cmyk"),Pn(n)==="array"&&n.length===4)return"cmyk"}});const hee=(...n)=>{const e=xn(n,"hsla");let t=tv(n)||"lsa";return e[0]=Sl(e[0]||0)+"deg",e[1]=Sl(e[1]*100)+"%",e[2]=Sl(e[2]*100)+"%",t==="hsla"||e.length>3&&e[3]<1?(e[3]="/ "+(e.length>3?e[3]:1),t="hsla"):e.length=3,`${t.substr(0,3)}(${e.join(" ")})`},dee=(...n)=>{const e=xn(n,"lab");let t=tv(n)||"lab";return e[0]=Sl(e[0])+"%",e[1]=Sl(e[1]),e[2]=Sl(e[2]),t==="laba"||e.length>3&&e[3]<1?e[3]="/ "+(e.length>3?e[3]:1):e.length=3,`lab(${e.join(" ")})`},pee=(...n)=>{const e=xn(n,"lch");let t=tv(n)||"lab";return e[0]=Sl(e[0])+"%",e[1]=Sl(e[1]),e[2]=isNaN(e[2])?"none":Sl(e[2])+"deg",t==="lcha"||e.length>3&&e[3]<1?e[3]="/ "+(e.length>3?e[3]:1):e.length=3,`lch(${e.join(" ")})`},mee=(...n)=>{const e=xn(n,"lab");return e[0]=Sl(e[0]*100)+"%",e[1]=X3(e[1]),e[2]=X3(e[2]),e.length>3&&e[3]<1?e[3]="/ "+(e.length>3?e[3]:1):e.length=3,`oklab(${e.join(" ")})`},I6=(...n)=>{const[e,t,i,...r]=xn(n,"rgb"),[s,o,a]=KO(e,t,i),[l,c,f]=A6(s,o,a);return[l,c,f,...r.length>0&&r[0]<1?[r[0]]:[]]},gee=(...n)=>{const e=xn(n,"lch");return e[0]=Sl(e[0]*100)+"%",e[1]=X3(e[1]),e[2]=isNaN(e[2])?"none":Sl(e[2])+"deg",e.length>3&&e[3]<1?e[3]="/ "+(e.length>3?e[3]:1):e.length=3,`oklch(${e.join(" ")})`},{round:oC}=Math,vee=(...n)=>{const e=xn(n,"rgba");let t=tv(n)||"rgb";if(t.substr(0,3)==="hsl")return hee(R6(e),t);if(t.substr(0,3)==="lab"){const i=f_();Lf("d50");const r=dee(qO(e),t);return Lf(i),r}if(t.substr(0,3)==="lch"){const i=f_();Lf("d50");const r=pee(YO(e),t);return Lf(i),r}return t.substr(0,5)==="oklab"?mee(KO(e)):t.substr(0,5)==="oklch"?gee(I6(e)):(e[0]=oC(e[0]),e[1]=oC(e[1]),e[2]=oC(e[2]),(t==="rgba"||e.length>3&&e[3]<1)&&(e[3]="/ "+(e.length>3?e[3]:1),t="rgba"),`${t.substr(0,3)}(${e.slice(0,t==="rgb"?3:4).join(" ")})`)},N6=(...n)=>{n=xn(n,"lch");const[e,t,i,...r]=n,[s,o,a]=T6(e,t,i),[l,c,f]=ZO(s,o,a);return[l,c,f,...r.length>0&&r[0]<1?[r[0]]:[]]},If=/((?:-?\d+)|(?:-?\d+(?:\.\d+)?)%|none)/.source,hc=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)%?)|none)/.source,lE=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)%)|none)/.source,Ml=/\s*/.source,iv=/\s+/.source,QO=/\s*,\s*/.source,PM=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)(?:deg)?)|none)/.source,rv=/\s*(?:\/\s*((?:[01]|[01]?\.\d+)|\d+(?:\.\d+)?%))?/.source,U6=new RegExp("^rgba?\\("+Ml+[If,If,If].join(iv)+rv+"\\)$"),k6=new RegExp("^rgb\\("+Ml+[If,If,If].join(QO)+Ml+"\\)$"),z6=new RegExp("^rgba\\("+Ml+[If,If,If,hc].join(QO)+Ml+"\\)$"),F6=new RegExp("^hsla?\\("+Ml+[PM,lE,lE].join(iv)+rv+"\\)$"),B6=new RegExp("^hsl?\\("+Ml+[PM,lE,lE].join(QO)+Ml+"\\)$"),V6=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,G6=new RegExp("^lab\\("+Ml+[hc,hc,hc].join(iv)+rv+"\\)$"),H6=new RegExp("^lch\\("+Ml+[hc,hc,PM].join(iv)+rv+"\\)$"),j6=new RegExp("^oklab\\("+Ml+[hc,hc,hc].join(iv)+rv+"\\)$"),W6=new RegExp("^oklch\\("+Ml+[hc,hc,PM].join(iv)+rv+"\\)$"),{round:$6}=Math,Sg=n=>n.map((e,t)=>t<=2?Zp($6(e),0,255):e),Nr=(n,e=0,t=100,i=!1)=>(typeof n=="string"&&n.endsWith("%")&&(n=parseFloat(n.substring(0,n.length-1))/100,i?n=e+(n+1)*.5*(t-e):n=e+n*(t-e)),+n),So=(n,e)=>n==="none"?e:n,JO=n=>{if(n=n.toLowerCase().trim(),n==="transparent")return[0,0,0,0];let e;if(pn.format.named)try{return pn.format.named(n)}catch{}if((e=n.match(U6))||(e=n.match(k6))){let t=e.slice(1,4);for(let r=0;r<3;r++)t[r]=+Nr(So(t[r],0),0,255);t=Sg(t);const i=e[4]!==void 0?+Nr(e[4],0,1):1;return t[3]=i,t}if(e=n.match(z6)){const t=e.slice(1,5);for(let i=0;i<4;i++)t[i]=+Nr(t[i],0,255);return t}if((e=n.match(F6))||(e=n.match(B6))){const t=e.slice(1,4);t[0]=+So(t[0].replace("deg",""),0),t[1]=+Nr(So(t[1],0),0,100)*.01,t[2]=+Nr(So(t[2],0),0,100)*.01;const i=Sg(Y3(t)),r=e[4]!==void 0?+Nr(e[4],0,1):1;return i[3]=r,i}if(e=n.match(V6)){const t=e.slice(1,4);t[1]*=.01,t[2]*=.01;const i=Y3(t);for(let r=0;r<3;r++)i[r]=$6(i[r]);return i[3]=+e[4],i}if(e=n.match(G6)){const t=e.slice(1,4);t[0]=Nr(So(t[0],0),0,100),t[1]=Nr(So(t[1],0),-125,125,!0),t[2]=Nr(So(t[2],0),-125,125,!0);const i=f_();Lf("d50");const r=Sg($O(t));Lf(i);const s=e[4]!==void 0?+Nr(e[4],0,1):1;return r[3]=s,r}if(e=n.match(H6)){const t=e.slice(1,4);t[0]=Nr(t[0],0,100),t[1]=Nr(So(t[1],0),0,150,!1),t[2]=+So(t[2].replace("deg",""),0);const i=f_();Lf("d50");const r=Sg(XO(t));Lf(i);const s=e[4]!==void 0?+Nr(e[4],0,1):1;return r[3]=s,r}if(e=n.match(j6)){const t=e.slice(1,4);t[0]=Nr(So(t[0],0),0,1),t[1]=Nr(So(t[1],0),-.4,.4,!0),t[2]=Nr(So(t[2],0),-.4,.4,!0);const i=Sg(ZO(t)),r=e[4]!==void 0?+Nr(e[4],0,1):1;return i[3]=r,i}if(e=n.match(W6)){const t=e.slice(1,4);t[0]=Nr(So(t[0],0),0,1),t[1]=Nr(So(t[1],0),0,.4,!1),t[2]=+So(t[2].replace("deg",""),0);const i=Sg(N6(t)),r=e[4]!==void 0?+Nr(e[4],0,1):1;return i[3]=r,i}};JO.test=n=>U6.test(n)||F6.test(n)||G6.test(n)||H6.test(n)||j6.test(n)||W6.test(n)||k6.test(n)||z6.test(n)||B6.test(n)||V6.test(n)||n==="transparent";pt.prototype.css=function(n){return vee(this._rgb,n)};const yee=(...n)=>new pt(...n,"css");Ln.css=yee;pn.format.css=JO;pn.autodetect.push({p:5,test:(n,...e)=>{if(!e.length&&Pn(n)==="string"&&JO.test(n))return"css"}});pn.format.gl=(...n)=>{const e=xn(n,"rgba");return e[0]*=255,e[1]*=255,e[2]*=255,e};const bee=(...n)=>new pt(...n,"gl");Ln.gl=bee;pt.prototype.gl=function(){const n=this._rgb;return[n[0]/255,n[1]/255,n[2]/255,n[3]]};pt.prototype.hex=function(n){return S6(this._rgb,n)};const _ee=(...n)=>new pt(...n,"hex");Ln.hex=_ee;pn.format.hex=w6;pn.autodetect.push({p:4,test:(n,...e)=>{if(!e.length&&Pn(n)==="string"&&[3,4,5,6,7,8,9].indexOf(n.length)>=0)return"hex"}});const{log:iw}=Math,q6=n=>{const e=n/100;let t,i,r;return e<66?(t=255,i=e<6?0:-155.25485562709179-.44596950469579133*(i=e-2)+104.49216199393888*iw(i),r=e<20?0:-254.76935184120902+.8274096064007395*(r=e-10)+115.67994401066147*iw(r)):(t=351.97690566805693+.114206453784165*(t=e-55)-40.25366309332127*iw(t),i=325.4494125711974+.07943456536662342*(i=e-50)-28.0852963507957*iw(i),r=255),[t,i,r,1]},{round:xee}=Math,wee=(...n)=>{const e=xn(n,"rgb"),t=e[0],i=e[2];let r=1e3,s=4e4;const o=.4;let a;for(;s-r>o;){a=(s+r)*.5;const l=q6(a);l[2]/l[0]>=i/t?s=a:r=a}return xee(a)};pt.prototype.temp=pt.prototype.kelvin=pt.prototype.temperature=function(){return wee(this._rgb)};const aC=(...n)=>new pt(...n,"temp");Object.assign(Ln,{temp:aC,kelvin:aC,temperature:aC});pn.format.temp=pn.format.kelvin=pn.format.temperature=q6;pt.prototype.oklch=function(){return I6(this._rgb)};const See=(...n)=>new pt(...n,"oklch");Object.assign(Ln,{oklch:See});pn.format.oklch=N6;pn.autodetect.push({p:2,test:(...n)=>{if(n=xn(n,"oklch"),Pn(n)==="array"&&n.length===3)return"oklch"}});Object.assign(Ln,{analyze:O6,average:EJ,bezier:DJ,blend:pc,brewer:lee,Color:pt,colors:C0,contrast:KJ,contrastAPCA:eee,cubehelix:HJ,deltaE:ree,distance:see,input:pn,interpolate:R0,limits:L6,mix:R0,random:qJ,scale:aE,scales:aee,valid:oee});var lC,BU;function Eee(){if(BU)return lC;BU=1;const{useState:n,useCallback:e,useEffect:t}=Xf();return lC=function(r){const s=[],o=()=>s.forEach(l=>l());let a=r instanceof Function?r():r;return function(){const c=n({})[1],f=e(()=>c({}),[c]);t(()=>(s.push(f),()=>{s.splice(s.findIndex(f),1)}),[f]);const d=e(m=>{m instanceof Function?a=m(a):a=m,o()},[f]);return[a,d]}},lC}var Mee=Eee();const Tee=ro(Mee),Aee=({ref:n,open:e=!0,onClickOutside:t,onEscape:i})=>{$.useEffect(()=>{if(!e)return;const r=o=>{n.current&&!n.current.contains(o.target)&&t?.(o)},s=o=>{o.code==="Escape"&&i?.(o)};return t&&(document.addEventListener("mousedown",r),document.addEventListener("touchstart",r)),i&&document.addEventListener("keydown",s),()=>{t&&(document.removeEventListener("mousedown",r),document.removeEventListener("touchstart",r)),i&&document.removeEventListener("keydown",s)}},[n,t,i,e])},Cee=$.createContext({close:()=>{}});let Ree=0;const Dee=()=>`ref-${++Ree}`,Q_=n=>{const[e]=$.useState(n||Dee());return`${e}`},Oee=n=>{const e=$.useRef(n);e.current=n,$.useLayoutEffect(()=>()=>e.current(),[])},Lee=$.forwardRef(({children:n,className:e,style:t,element:i="div",onMount:r,onUnmount:s},o)=>{const a=$.useRef(null),l=$.useRef(!1);return $.useEffect(()=>{var c;e&&a.current&&a.current.setAttribute("class",`${e} rdk-portal`),t&&a.current&&((c=Object.keys(t))==null||c.forEach(f=>{var d;return(d=a.current.style)==null?void 0:d.setProperty(f,t[f])}))},[e,t,a.current]),$.useLayoutEffect(()=>{a.current=document.createElement(i),r?.()},[]),Oee(()=>{s?.();const c=a.current;c&&document.body.contains(c)&&document.body.removeChild(c)}),$.useImperativeHandle(o,()=>a.current),a.current?(l.current||(l.current=!0,a.current.classList.add("rdk-portal"),document.body.appendChild(a.current)),DB.createPortal(n,a.current)):null}),u0=[],Pee=990,Iee=$.forwardRef(({className:n,children:e,onMount:t,onUnmount:i,appendToBody:r=!0,id:s,style:o},a)=>{let l=Q_(s);const[c,f]=$.useState(null),[d,m]=$.useState(null),v=$.useRef(null);return $.useImperativeHandle(a,()=>v.current),ne.jsx(Lee,{className:n,ref:v,style:o,appendToBody:r,onMount:()=>{u0.push(l);let b=u0.indexOf(l);f(b);const x=Pee+b*2+1;m(x),t?.({portalId:l,overlayIndex:x,portalIndex:b,backdropIndex:x})},onUnmount:()=>{i?.(),u0.splice(u0.indexOf(l),1),f(null),m(null)},children:e({overlayIndex:d,portalIndex:c,backdropIndex:d,portalId:l})})}),Nee={base:"fixed top-0 left-0 w-full h-full opacity-0 select-none bg-black",opacity:.8},Uee=$.forwardRef(({children:n,className:e,elementType:t="span",trigger:i=["click"],onOpen:r=()=>{},onClose:s=()=>{}},o)=>{const a=$.useCallback(w=>Array.isArray(i)?i.includes(w):w===i,[i]),l=$.useCallback(w=>{a("focus")&&r({type:"focus",nativeEvent:w})},[r,a]),c=$.useCallback(w=>{a("focus")&&s({type:"focus",nativeEvent:w})},[s,a]),f=$.useCallback(w=>{a("hover")&&r({type:"hover",nativeEvent:w})},[r,a]),d=$.useCallback(w=>{a("hover")&&s({type:"hover",nativeEvent:w})},[s,a]),m=$.useCallback(w=>{a("click")&&r({type:"click",nativeEvent:w}),a("click")||s({type:"hover",nativeEvent:w})},[r,s,a]),v=$.useCallback(w=>{a("contextmenu")&&(w.preventDefault(),r({type:"contextmenu",nativeEvent:w}))},[a,r]),b=a("focus")?-1:void 0,x=t;return ne.jsx(x,{ref:o,tabIndex:b,onMouseEnter:f,onMouseLeave:d,onFocus:l,onBlur:c,onClick:m,onContextMenu:v,className:e,children:n})}),kee=({reference:n,floating:e,followCursor:t,placement:i="top",modifiers:r=[OY(),RY({limiter:DY()})]}={})=>{const s=$.useMemo(()=>!n?.nodeType,[n]),{refs:o,floatingStyles:a,update:l}=WY({open:!0,placement:i,middleware:r,elements:{reference:s?null:n,floating:e},whileElementsMounted:xY});$.useEffect(()=>{if(s&&n&&!t){const f=n;o.setPositionReference({getBoundingClientRect(){return{width:f.width,height:f.height,x:f.left,y:f.top,left:f.left,top:f.top,right:f.left+f.width,bottom:f.top+f.height}}})}},[n,o,s,t]);const c=$.useCallback(({clientX:f,clientY:d})=>{o.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:f,y:d,left:f,top:d,right:f,bottom:d}}})},[o]);return $.useLayoutEffect(()=>(t&&window.addEventListener("mousemove",c),()=>{window.removeEventListener("mousemove",c)}),[t,c]),{refs:o,anchorRef:o.reference,floatingRef:o.floating,floatingStyles:a,update:l}},zee=$.forwardRef(({triggerRef:n,children:e,portalClassName:t,closeOnBodyClick:i=!0,closeOnEscape:r=!0,elementType:s,appendToBody:o=!0,followCursor:a,modifiers:l,placement:c="bottom",onClose:f},d)=>{const m=Q_(),[v,b]=$.useState(null),{refs:x,floatingStyles:w,update:_}=kee({reference:n.current??n,followCursor:a,modifiers:l,placement:c});$.useImperativeHandle(d,()=>({updatePosition:()=>{_()}}));const A=$.useCallback(E=>{if(i){let C=null;n.current?C=n.current:n.contains!==void 0&&(C=n);const R=E.target.closest(".rdk-portal"),O=u0.indexOf(m)===u0.length-1;!C?.contains(E.target)&&(O||!R)&&f?.(E)}},[i,f]),T=$.useCallback(()=>{r&&f?.()},[r,f]);return Aee({open:!0,ref:x.floating,onClickOutside:A,onEscape:T}),ne.jsx(Iee,{id:m,ref:x.setFloating,style:{...w,"z-index":v},className:t,elementType:s,appendToBody:o,onMount:E=>b(E.overlayIndex),onUnmount:()=>b(null),children:e})}),X6=$.forwardRef(({reference:n,children:e,open:t,content:i,triggerElement:r,triggerClassName:s,trigger:o="click",onOpen:a,onClose:l,...c},f)=>{const d=$.useRef(!1),m=$.useRef(null),v=$.useRef(null),b=n||m;$.useImperativeHandle(f,()=>({updatePosition:()=>{var w;(w=v.current)==null||w.updatePosition()}})),$.useEffect(()=>{d.current&&(t?a?.():l?.())},[t]),$.useEffect(()=>{d.current||(d.current=!0)});const x=$.useMemo(()=>({close:()=>l?.()}),[l]);return ne.jsxs(Cee.Provider,{value:x,children:[e&&ne.jsx($.Fragment,{children:o?ne.jsx(Uee,{elementType:r,ref:m,className:s,trigger:o,onOpen:a,onClose:l,children:e}):e}),ne.jsx(pB,{children:t&&ne.jsx(zee,{...c,ref:v,triggerRef:b,onClose:l,children:i})})]})}),ic={base:"inline-flex whitespace-no-wrap select-none items-center justify-center px-2.5 py-1 rounded-xs font-sans cursor-pointer",disabled:"disabled:cursor-not-allowed",fullWidth:"flex w-full",group:"rounded-none first:rounded-s last:rounded-e border-s-0 first:border-s",groupText:"border border-y-transparent border-l-transparent last:border-r-transparent hover:bg-initial",adornment:{base:"flex",start:"pr-1",end:"pl-1",sizes:{small:"[&>svg]:w-3 [&>svg]:h-3",medium:"[&>svg]:w-4 [&>svg]:h-4",large:"[&>svg]:w-5 [&>svg]:h-5"}},sizes:{small:"text-sm px-2 py-1 leading-[normal]",medium:"text-base px-4 py-2 leading-[normal]",large:"text-xl px-5 py-2.5 leading-[normal]"},iconSizes:{small:"px-2 py-1",medium:"px-4 py-2",large:"px-5 py-2.5"}},Fee={base:[ic.base,"text-text-primary font-semibold"].join(" "),disabled:[ic.disabled,"data-[variant=filled]:disabled:bg-gray-600 disabled:text-gray-400 border-gray-500"].join(" "),fullWidth:ic.fullWidth,group:ic.group,groupText:ic.groupText,adornment:ic.adornment,sizes:ic.sizes,iconSizes:ic.iconSizes,variants:{filled:"bg-secondary hover:bg-border-secondary-hover border-secondary light:text-gray-100",outline:"border-grey border",text:"border-0"},colors:{default:{filled:"bg-gray-800 hover:bg-gray-700 border-gray-800",outline:"border-secondary border",text:"text-text-primary"},primary:{filled:"bg-primary hover:bg-primary-hover border-primary text-text-primary",outline:"border border-primary",text:"text-primary hover:text-primary-hover"},secondary:{filled:"bg-secondary hover:bg-secondary-hover text-text-primary!",outline:"border border-secondary",text:"text-secondary hover:text-secondary-hover"},success:{filled:"bg-success hover:bg-success-hover border-success text-text-primary",outline:"border border-success",text:"text-success hover:text-success-hover"},warning:{filled:"bg-warning hover:bg-warning-hover border-warning text-text-primary",outline:"border border-warning",text:"text-warning hover:text-warning-hover"},error:{filled:"bg-error hover:bg-error-hover border-error text-text-primary",outline:"border border-error",text:"text-error hover:text-error-hover"}}};({...ic.adornment,start:[ic.adornment.start,"[padding-right:_calc(var(--list-item-spacing)_/_2)]"].join(" "),end:[ic.adornment.start,"[padding-left:_calc(var(--list-item-spacing)_/_2)]"].join(" ")});const Bee=$.createContext({variant:null,size:null}),h_=$.forwardRef(({color:n="default",variant:e="filled",children:t,fullWidth:i,size:r="medium",disableAnimation:s,className:o,disableMargins:a,disablePadding:l,disabled:c,startAdornment:f,endAdornment:d,theme:m,type:v="button",...b},x)=>{const w=Yn("button",m),{variant:_,size:A}=$.useContext(Bee),T=!!_&&!!A;return ne.jsxs(Js.button,{...b,type:v,disabled:c,ref:x,whileTap:{scale:c||s?1:.9},"data-variant":_||e,className:tn(w.base,w.disabled,i&&w.fullWidth,w.variants[_||e],w.colors[n][_||e],w.sizes[A||r],T&&w.group,T&&_==="text"&&w.groupText,a&&"m-0",l&&"p-0",o),children:[f&&ne.jsx("div",{className:tn(w.adornment.base,w.adornment.start,w.adornment.sizes[r]),children:f}),t,d&&ne.jsx("div",{className:tn(w.adornment.base,w.adornment.end,w.adornment.sizes[r]),children:d})]})}),Y6=$.forwardRef(({children:n,color:e="default",variant:t="filled",size:i="medium",selected:r,disabled:s,className:o,disableMargins:a,start:l,end:c,onClick:f,theme:d,...m},v)=>{var b,x,w,_,A,T,E,C,R,O,I,L,N;const V=Yn("chip",d);return ne.jsxs("div",{...m,ref:v,tabIndex:f?0:-1,onClick:s?void 0:f,className:tn(V.base,V.variants[t],(b=V.colors[e])==null?void 0:b.base,(w=(x=V.colors[e])==null?void 0:x.variants)==null?void 0:w[t],V.sizes[i],V.focus,!!f&&!s&&((A=(_=V.colors[e])==null?void 0:_.selectable)==null?void 0:A.base),!!f&&!s&&((R=(C=(E=(T=V.colors[e])==null?void 0:T.selectable)==null?void 0:E.variants)==null?void 0:C[t])==null?void 0:R.base),r&&((N=(L=(I=(O=V.colors[e])==null?void 0:O.selectable)==null?void 0:I.variants)==null?void 0:L[t])==null?void 0:N.selected),a&&"m-0","transition-colors duration-300 ease [&>svg]:transition-[fill] [&>svg]:will-change-[fill]",o,s&&V.disabled),"aria-disabled":s,children:[l&&ne.jsx("div",{className:tn(V.adornment.base,V.adornment.start,V.adornment.sizes[i]),children:l}),ne.jsx("div",{className:"flex items-center",children:n}),c&&ne.jsx("div",{className:tn(V.adornment.base,V.adornment.end,V.adornment.sizes[i]),children:c})]})});function Vee(n,e="short"){!n&&typeof window<"u"&&(n=navigator.language);const t=new Intl.DateTimeFormat(n,{month:e,timeZone:"UTC"});return[1,2,3,4,5,6,7,8,9,10,11,12].map(r=>{const s=r<10?`0${r}`:r;return new Date(`2017-${s}-01T00:00:00+00:00`)}).map(r=>t.format(r))}Vee();function Gee(n){return Array.from({length:7},(e,t)=>(!n&&typeof window<"u"&&(n=navigator.language),new Intl.DateTimeFormat(n,{weekday:"short"}).format(new Date(1970,0,4+t))))}Gee();$.forwardRef(({children:n,color:e="default",variant:t="default",disableMargins:i=!1,className:r,theme:s,...o},a)=>{const l=Yn("typography",s);return ne.jsx("h1",{ref:a,className:tn(l.colors[e],l.variant[t],l.pageTitle,i&&l.disableMargins,r),...o,children:n})});$.forwardRef(({children:n,color:e="default",variant:t="default",disableMargins:i=!1,className:r,theme:s,...o},a)=>{const l=Yn("typography",s);return ne.jsx("h2",{ref:a,className:tn(l.colors[e],l.variant[t],l.primaryHeading,i&&l.disableMargins,r),...o,children:n})});$.forwardRef(({children:n,color:e="default",variant:t="default",disableMargins:i=!1,className:r,theme:s,...o},a)=>{const l=Yn("typography",s);return ne.jsx("h3",{ref:a,className:tn(l.colors[e],l.variant[t],l.secondaryHeading,i&&l.disableMargins,r),...o,children:n})});$.forwardRef(({children:n,color:e="default",variant:t="default",disableMargins:i=!1,className:r,theme:s,...o},a)=>{const l=Yn("typography",s);return ne.jsx("h5",{ref:a,className:tn(l.colors[e],l.variant[t],l.smallHeading,i&&l.disableMargins,r),...o,children:n})});const Hee=$.forwardRef(({color:n="default",variant:e="default",disableMargins:t=!1,children:i,className:r,theme:s,...o},a)=>{const l=Yn("typography",s);return ne.jsx("h6",{ref:a,className:tn(l.colors[n],l.variant[e],l.sub,t&&l.disableMargins,r),...o,children:i})});$.forwardRef(({color:n="default",variant:e="default",fontStyle:t="default",children:i,className:r,theme:s,...o},a)=>{const l=Yn("typography",s);return ne.jsx("span",{ref:a,className:tn(l.colors[n],l.variant[e],l.text[t],r),...o,children:i})});const Z6={text:{thin:"font-thin",bold:"font-semibold",extraBold:"font-extrabold",italic:"italic"},variant:{default:"",mono:"font-mono"},colors:{primary:"text-primary",secondary:"text-secondary",success:"text-success",warning:"text-warning",error:"text-error",info:"text-info"},sub:"text-sm font-semibold mb-0.5",smallHeading:"text-base font-normal mb-1",secondaryHeading:"text-3xl font-normal mb-1",primaryHeading:"text-3xl font-extrabold mb-1",pageTitle:"text-[40px] font-semibold mb-5",disableMargins:"m-0"},jee={...Z6};({...Z6.text});const K3={base:"border-none",orientation:{horizontal:"h-px w-full my-2.5",vertical:"w-px h-full mx-2.5"},variant:{primary:"bg-surface",secondary:"bg-linear-to-r from-transparent to-transparent via-blue-500"},disableMargins:"my-0 mx-0"},Wee={...K3};[K3.orientation.horizontal,"my-[var(--divider-spacing)]"].join(" "),[K3.orientation.vertical," mx-[var(--divider-spacing)]"].join(" ");const $ee={base:"will-change-[height,opacity] overflow-hidden"},qee={...$ee},Xee={initial:{transition:{staggerChildren:.05,staggerDirection:-1}},animate:{transition:{staggerChildren:.07,delayChildren:.2}}},Yee=({children:n,...e})=>ne.jsx(Js.div,{variants:Xee,initial:"initial",animate:"animate",...e,children:n}),Zee={initial:{y:-20,opacity:0,transition:{when:"beforeChildren"}},animate:{y:0,opacity:1,transition:{when:"beforeChildren"}},exit:{y:-20,opacity:0}},Kee={initial:{x:"-100%",opacity:0,transition:{when:"beforeChildren",x:{stiffness:10}}},animate:{x:"0%",opacity:1,transition:{x:{stiffness:10,velocity:-100},when:"beforeChildren",opacity:{duration:1}}},exit:{x:"-100%",opacity:0,transition:{x:{stiffness:10}}}},K6=({children:n,direction:e="vertical",...t})=>ne.jsx(Js.div,{variants:e==="vertical"?Zee:Kee,...t,children:n}),Qee=$.forwardRef(({className:n,children:e,theme:t,...i},r)=>{const s=Yn("list",t);return ne.jsx("div",{...i,ref:r,role:"list",className:tn(s.base,n),children:e})}),Jee=$.forwardRef(({className:n,contentClassName:e,children:t,active:i,disabled:r,disablePadding:s,disableGutters:o,start:a,end:l,dense:c,onClick:f,theme:d,...m},v)=>{const b=Yn("list",d);return ne.jsxs("div",{...m,ref:v,role:f?"button":"listitem",tabIndex:f?0:void 0,onClick:x=>!r&&f?.(x),className:Rs(b.listItem.base,c&&b.listItem.dense.base,r&&b.listItem.disabled,i&&b.listItem.active,f&&!r&&b.listItem.clickable,s&&b.listItem.disablePadding,o&&b.listItem.disableGutters,n),children:[a&&ne.jsx("div",{className:Rs(b.listItem.adornment.base,b.listItem.adornment.start,{[b.listItem.dense.startAdornment]:c}),children:a}),ne.jsx("div",{className:Rs(b.listItem.content,{[b.listItem.dense.content]:c},e),children:t}),l&&ne.jsx("div",{className:Rs(b.listItem.adornment.base,b.listItem.adornment.end,{[b.listItem.dense.endAdornment]:c}),children:l})]})}),ete=({className:n,children:e,theme:t,...i})=>{const r=Yn("list",t);return ne.jsx(Hee,{...i,className:tn(n,r.header),children:e})},ms={base:"flex flex-col",header:"pl-2 pr-2",listItem:{base:"items-center flex p-2.5 relative rounded-none",disabled:"cursor-not-allowed pointer-events-none",active:"",clickable:"cursor-pointer transition-color duration-300 ease-linear transition-bg duration-300 ease-linear hover:color-inherit hover:bg-transparent",disablePadding:"p-0",disableGutters:"pl-0 pr-0",dense:{base:"p-1",content:"",startAdornment:"pr-[calc(5/2)]",endAdornment:"pl-[calc(5/2)]"},adornment:{base:"items-center flex",start:"pr-1",end:"pl-1",svg:"fill-current"},content:"overflow-wrap break-word word-wrap break-all flex-1"}},tte={...ms,base:[ms.base,"text-text-primary"].join(" "),header:[ms.header,"text-text-primary"].join(" "),listItem:{...ms.listItem,base:[ms.listItem.base,"hover:bg-panel-accent hover:text-mystic light:hover:bg-vulcan/5 light:hover:text-text-secondary [&:has(h3)]:hover:bg-transparent"].join(" "),active:[ms.listItem.active,"text-primary-active hover:text-mystic"].join(" "),disabled:[ms.listItem.disabled,"opacity-40 text-text-secondary"].join(" ")}};({...ms.listItem,base:[ms.listItem.base,"p-[var(--list-item-spacing)] text-[var(--list-item-color)] rounded-[var(--list-item-border-radius)]"].join(" "),clickable:[ms.listItem.clickable,"hover:text-[var(--list-item-color-active)] hover:bg-[var(--list-item-background-active)]"].join(" "),dense:{...ms.listItem.dense,base:[ms.listItem.dense.base,"[padding:_var(--list-item-dense-spacing)]"].join(" "),startAdornment:[ms.listItem.dense.startAdornment,"[padding-right:_calc(var(--spacing-md)_/_2)]"].join(" "),endAdornment:[ms.listItem.dense.endAdornment,"[padding-left:_calc(var(--spacing-md)_/_2)]"].join(" ")},adornment:{...ms.listItem.adornment,start:[ms.listItem.adornment.start,"[padding-right:_calc(var(--spacing-sm)_/_2)]"].join(" "),end:[ms.listItem.adornment.start,"[padding-left:_calc(var(--spacing-sm)_/_2)]"].join(" "),svg:[ms.listItem.adornment.svg,"fill:[var(--list-item-adornment-fill)]"].join(" ")}});const Tb={base:"mb-2.5",disableMargin:"mb-0",label:"text-sm",centerAlign:"items-center",endAlign:"items-end",horizontal:{base:"flex flex-row items-baseline",label:"mr-0.5 whitespace-nowrap"},vertical:{base:"block",label:"block mb-0.5"}},nte={...Tb};({...Tb.horizontal,label:[Tb.horizontal.label,"mr-[var(--block-label-spacing)]"].join(" ")},{...Tb.vertical,label:[Tb.vertical.label,"mb-[var(--block-label-spacing)]"].join(" ")});const VU={base:"relative flex flex-col p-7 rounded-xs",disablePadding:"p-0",header:"flex items-center",headerText:"text-sm font-medium mt-0 mb-1",content:"flex-1"},ite={...VU,base:[VU.base,"bg-panel border border-panel-accent text-text-primary"].join(" ")};$.forwardRef(({children:n,disablePadding:e,className:t,header:i,headerClassName:r,contentClassName:s,theme:o,...a},l)=>{const c=Yn("card",o);return ne.jsxs("section",{...a,ref:l,className:tn(c.base,e&&c.disablePadding,t),children:[i&&ne.jsx("header",{className:tn(c.header,r),children:i&&typeof i=="string"?ne.jsx("h3",{className:c.headerText,children:i}):i}),ne.jsx("div",{className:tn(c.content,s),children:n})]})});$.forwardRef(({children:n,className:e,direction:t="row",dense:i=!1,inline:r=!1,alignItems:s="center",justifyContent:o="start",theme:a,...l},c)=>{const f=Yn("stack",a);return ne.jsx("div",{className:tn(f.base,i&&f.dense,r&&f.inline,f.direction[t],f.alignItems[s],f.justifyContent[o],e),ref:c,...l,children:n})});const GU={base:"flex items-center gap-2.5",dense:"gap-1",inline:"inline-flex",direction:{row:"flex-row",column:"flex-col",rowReverse:"flex-row-reverse",columnReverse:"flex-col-reverse"},alignItems:{start:"items-start",end:"items-end",center:"items-center",stretch:"items-stretch"},justifyContent:{start:"justify-start",end:"justify-end",center:"justify-center",spaceBetween:"justify-between"}},rte={...GU,base:[GU.base,"text-text-primary"].join(" ")},HU={base:"",up:"rotate-180",down:"",left:"rotate-90",right:"-rotate-90"},ste={...HU,base:[HU.base,"text-text-primary"].join(" ")};$.createContext({collapsedIcon:null,expandedIcon:null});const Ef={base:"relative m-0 p-0 list-none",tree:"border pt-1 pb-1 px-3 border-solid border-transparent",arrow:"w-3 h-3",node:{base:"pt-0.5 m-0 list-style-none first:pt-0 last:pb-0",collapsed:"-rotate-90",disabled:"opacity-60",leaf:"pl-4",label:"",button:{base:"min-w-[auto] min-h-[auto] w-auto h-auto transition-transform duration-100 ease-in-out ml-0 mr-1 my-0 p-0",icon:"align-middle block h-2 w-2 m-0.5"}},nodeBlock:"flex items-center",subtree:"relative ml-5 mr-0 mt-1 mb-0 p-0"},ote={...Ef,arrow:[Ef.arrow,"fill-text-primary"].join(" "),node:{...Ef.node,base:[Ef.node.base,"text-text-primary"].join(" "),button:{...Ef.node.button,icon:[Ef.node.button.icon,"fill-text-primary"].join(" ")}}};({...Ef.node,button:{...Ef.node.button,icon:[Ef.node.button.icon,"fill-[var(--white)]"].join(" ")}});function Lp(n){return n!==null&&typeof n=="object"&&n.constructor===Object}function Q3(n){if(!Lp(n))return n;const e={};for(const t in n)e[t]=Q3(n[t]);return e}function Q6(n,e){if(Lp(e)&&Object.keys(e).length===0)return Q3({...n,...e});const t={...n,...e};if(Lp(e)&&Lp(n))for(const i in e)Lp(e[i])&&i in n&&Lp(n[i])?t[i]=Q6(n[i],e[i]):t[i]=Lp(e[i])?Q3(e[i]):e[i];return t}function Rs(...n){return tn(id(n))}const ate=()=>{const n=Array.from(document.documentElement.classList).find(e=>e.startsWith("theme-"));return n?n.replace("theme-",""):"dark"},lte=n=>{const e=document.documentElement;if(!e)throw new Error("Document element not found");const t=new MutationObserver(i=>{i.forEach(r=>{if(r.type==="attributes"&&r.attributeName==="class"){const s=ate();n(s)}})});return t.observe(e,{attributes:!0,attributeFilter:["class"]}),t},cte=(n,e)=>Array.from(n.style).filter(i=>i.startsWith("--")).reduce((i,r)=>(i[r]=e.getPropertyValue(r).trim(),i),{}),jU=()=>{const n=getComputedStyle(document.documentElement);function e(s){return Array.from(s).reduce((o,a)=>(a instanceof CSSStyleRule&&a.selectorText===":root, :host"&&o.push(a),"cssRules"in a&&a.cssRules.length>0&&o.push(...e(a.cssRules)),o),[])}const t=Array.from(document.styleSheets).flatMap(s=>{try{return e(s.cssRules)}catch{return[]}}),i={};return t.forEach((s,o)=>{const a=cte(s,n);i[`${s.selectorText}-${o}`]=a}),Object.entries(i).map(([,s])=>s).reduce((s,o)=>({...s,...o}),{})},J6=$.createContext(null),ute=({children:n,theme:e})=>{const[t,i]=$.useState(e),[r,s]=$.useState({});$.useEffect(()=>{e&&i(Q6(n8,e)),s(jU());const a=lte(()=>s(jU()));return()=>a.disconnect()},[e]);const o=a=>{i({...t,...a})};return ne.jsx(J6.Provider,{value:{theme:t,updateTheme:o,tokens:r,updateTokens:s},children:n})},fte=()=>{const n=$.useContext(J6);return n||null},Yn=(n,e)=>{const t=fte();if(e)return e;if(!t)throw new Error("useTheme must be used within a ThemeProvider");const i=t.theme.components[n];if(!i)throw new Error(`Component ${n} does not exist in theme`);return i},hte={dots:"cursor-pointer opacity-50 text-[unset] p-0 border-[none] outline-hidden"},dte={...hte},pte=({items:n,threshold:e=3,size:t=10,nextSize:i})=>{const[r,s]=$.useState(0),o=$.useMemo(()=>[...n].slice(0,r),[r,n]),a=r<n.length,l=n.length-r,c=$.useCallback(f=>{if(a){const d=i===1/0?l:i||f||t,m=Math.min(n.length,r+d);s(m)}},[a,r,t,n,l,i]);return $.useEffect(()=>{const f=n?.length||0,d=f<=t+e?t+e:Math.min(f,t);s(d)},[n.length,t,e]),{data:o,hasMore:a,remaining:l,showNext:c}},e8={node:{label:"font-mono text-anakiwa light:text-blue-500",delimiter:"pr-1",symbol:"px-1 opacity-50 font-mono",value:"",count:"opacity-50"},pager:"opacity-50 cursor-pointer pl-4"};({...e8});$.forwardRef(({space:n="md",className:e,theme:t,...i},r)=>{const s=Yn("verticalSpacer",t);return ne.jsx("div",{className:tn(e,s.base,s.size[n]),ref:r,...i})});const mte={base:"",size:{xs:"h-0.5",sm:"h-1.5",md:"h-2.5",lg:"h-5",xl:"h-6",xxl:"h-8"}},gte={...mte},cE=({children:n,className:e,theme:t})=>{const i=Yn("tabs",t);return ne.jsx("section",{role:"tabpanel",className:tn(i.panel,e),children:n})},uE=({children:n,id:e,selected:t,containerClassName:i,className:r,disabled:s,onSelect:o,size:a="medium",theme:l})=>{var c,f,d,m;const v=Yn("tabs",l);return ne.jsxs("span",{className:Rs(v.list.tab.base,i),children:[ne.jsx(h_,{className:Rs(v.list.tab.button,r,{[v.list.tab.disabled]:s,[v.list.tab.selected]:t},(c=v.list.tab.size)==null?void 0:c[a]),disabled:s,role:"tab",variant:"text","aria-selected":t?"true":"false","aria-disabled":s?"true":"false",onClick:()=>{!s&&o&&o()},children:n}),t&&ne.jsx(Js.div,{className:Rs((f=v.list.indicator)==null?void 0:f.base,(m=(d=v.list.indicator)==null?void 0:d.size)==null?void 0:m[a]),layoutId:`${e}-tabs-underline`})]})},J3=({id:n,children:e,direction:t,className:i,selectedIndex:r,onSelect:s,variant:o="primary",size:a="medium",theme:l})=>{const c=Yn("tabs",l),f=$.Children.toArray(e).filter(d=>{var m;return((m=d.type)==null?void 0:m.name)===uE.name}).map(d=>d.props);return ne.jsxs("nav",{role:"tablist",className:Rs(c.list.base,i,{"justify-end":t==="rtl"}),children:[f.map(({children:d,...m},v)=>ne.jsx(uE,{...m,id:n,selected:v===r,onSelect:()=>s(v),size:a,children:d},v)),ne.jsx("hr",{className:Rs(c.list.divider,c.list.variant[o].divider)})]})},vte=({children:n,className:e,style:t,variant:i="primary",size:r="medium",direction:s="ltr",defaultIndex:o=0,selectedIndex:a,onSelect:l,theme:c})=>{const f=Q_(),d=Yn("tabs",c),[m,v]=$.useState(a||o);$.useEffect(()=>{a!==void 0&&v(a)},[a]);const[b,x]=$.useMemo(()=>{const w=$.Children.toArray(n),[_]=w.filter(T=>{var E;return((E=T.type)==null?void 0:E.name)===J3.name}).map(T=>T.props),A=w.filter(T=>{var E;return((E=T.type)==null?void 0:E.name)===cE.name}).map(T=>T.props);return[_,A]},[n]);return ne.jsxs("div",{className:tn(d.base,e),style:t,children:[ne.jsx(J3,{...b,variant:i,size:r,direction:s,id:f,selectedIndex:m,theme:d,onSelect:w=>{v(w),l?.(w)}}),ne.jsx(pB,{children:x.map(({children:w,..._},A)=>ne.jsx($.Fragment,{children:m===A&&ne.jsx(cE,{..._,children:w})},A))})]})},yte={base:"flex flex-col",list:{base:"flex text-center flex-wrap -mb-px",indicator:{base:"bg-primary absolute bottom-0 left-0 right-0",size:{small:"h-0.5",medium:"h-0.5",large:"h-1"}},divider:"w-full h-px border-0",variant:{primary:{divider:"bg-surface"},secondary:{divider:"bg-linear-to-r from-transparent to-transparent via-primary"}},tab:{base:"relative",button:"transition-colors text-text-secondary font-bold hover:text-primary-hover",selected:"text-text-primary",disabled:"cursor-not-allowed opacity-40",size:{small:"pb-1 text-sm",medium:"pb-2 text-lg",large:"pb-4 text-xl"}}},panel:"mt-2"},bte=yte,_te={base:"",separator:"[&>svg]:size-3.5",list:"flex gap-2 items-center",link:"hover:text-text-primary text-text-secondary transition-colors",activePage:"text-primary pointer-events-none"},xte={base:"grid grid-cols-[min-content_1fr] gap-x-3",step:{base:"border-l border-solid border-panel-accent translate-x-1/2",marker:{base:"rounded-full w-[9px] h-[9px] bg-surface",container:"w-max pt-1 pb-0.5 backdrop-blur-md -translate-x-[calc(50%+0.5px)]",active:"bg-info",label:{base:"flex flex-row items-center gap-1 border border-solid border-surface px-3 py-1 rounded-[20px]",active:"border-info bg-info-background"}},active:"border-primary",content:"pb-6"}};Array.from({length:24},(n,e)=>e);[...Array.from({length:11},(n,e)=>e+1)];Array.from({length:60},(n,e)=>e);Array.from({length:60},(n,e)=>e);lf(cf(uf(new Date,0),0),0),lf(cf(uf(new Date,0),0),9),lf(cf(uf(new Date,0),0),12),lf(cf(uf(new Date,0),0),15),lf(cf(uf(new Date,0),0),18),lf(cf(uf(new Date,0),0),21),lf(cf(uf(Ao(new Date,1),0),0),9),lf(cf(uf(Ao(new Date,1),0),0),12),lf(cf(uf(Ao(new Date,1),0),0),18);ou(new Date,1),ou(new Date,2),ou(new Date,3),_0(new Date,1),_0(new Date,2),_0(new Date,3),Gp(new Date,1),Gp(new Date,2),Gp(new Date,3),Gp(new Date,6),x0(new Date,1),x0(new Date,2),x0(new Date,3);Ao(new Date,1),Ao(new Date,2),Ao(new Date,3),Xp(new Date,1),Xp(new Date,2),Xp(new Date,3),Of(new Date,1),Of(new Date,2),Of(new Date,3),Of(new Date,6),Yp(new Date,1),Yp(new Date,2),Yp(new Date,3);ou(new Date,1),Ao(new Date,1),zO(new Date),VO(new Date),BO(new Date),FO(new Date);lu(ou(new Date,1)),cu(ou(new Date,1)),lu(ou(new Date,2)),cu(new Date),lu(ou(new Date,6)),cu(new Date),lu(ou(new Date,13)),cu(new Date),lu(ou(new Date,29)),cu(new Date),zO(_0(new Date,1)),VO(_0(new Date,1)),_0(new Date,1),BO(Gp(new Date,1)),FO(Gp(new Date,1)),Gp(new Date,1),o6(x0(new Date,1)),s6(x0(new Date,1)),x0(new Date,1);lu(Ao(new Date,1)),cu(Ao(new Date,1)),lu(new Date),cu(Ao(new Date,2)),lu(new Date),cu(Ao(new Date,6)),lu(new Date),cu(Ao(new Date,13)),lu(new Date),cu(Ao(new Date,29)),Xp(new Date,1),zO(Xp(new Date,1)),VO(Xp(new Date,1)),Of(new Date,1),BO(Of(new Date,1)),FO(Of(new Date,1)),Yp(new Date,1),o6(Yp(new Date,1)),s6(Yp(new Date,1));const Kn={base:"relative overflow-hidden",header:{base:"flex text-center justify-between mb-2 items-center",prev:"text-xl leading-4",mid:"",next:"text-xl leading-4"},title:"font-semibold leading-[normal]",content:"flex",days:{header:"text-center grid grid-cols-7 mb-1 pt-2 font-medium",dayOfWeek:"text-center font-medium",week:"grid grid-cols-7",day:"font-normal flex p-2 border",outside:"",startRangeDate:"rounded-tl-md rounded-tr-none rounded-br-none",cornerStartDateBottom:"rounded-bl-none",endRangeDate:"rounded-br-md rounded-bl-none rounded-tl-none",cornerEndDateTop:"rounded-tr-none",range:"rounded-none",selected:"",hover:"rounded-sm",today:"rounded-sm border"},months:{root:"grid grid-cols-4 gap-2",month:"p-1.5",selected:""},years:{root:"grid grid-cols-4 gap-2",year:"p-1.5",selected:""},time:{base:"flex flex-col h-full gap-0",wrapper:"mt-4 bg-panel z-10 flex flex-row",dividerTop:"w-full",dividerLeft:"h-auto mt-2.5 mx-1 bg-surface z-10",header:"flex gap-4 px-0.5 pb-2.5 mb-2",column:{base:"w-6",wrapper:"overflow-y-auto h-52",label:"text-center text-xs text-gray-500",list:"p-0 m-0 list-none",scrollbar:"scrollbar-thin scrollbar-thumb-gray-300 dark:scrollbar-thumb-gray-600 scrollbar-track-transparent hover:scrollbar-thumb-gray-400 dark:hover:scrollbar-thumb-gray-500"},items:{wrapper:"flex flex-row flex-auto gap-0.25 pt-1 h-46",container:"h-full",list:"relative h-full p-0 m-0 list-none overflow-y-auto [&::-webkit-scrollbar]:hidden scrollbar-none touch-pan-y",divider:"mx-0",item:{base:"py-0.5 px-1.5 text-center select-none cursor-pointer rounded transition-colors duration-150",selected:"",disabled:"cursor-not-allowed"}}},presets:{wrapper:"bg-panel z-10",divider:"mx-1 h-[calc(100%-26px)] self-end",base:"relative h-59 max-w-52 pr-1 overflow-y-auto [&::-webkit-scrollbar]:hidden scrollbar-none touch-pan-y space-y-0",group:"text-sm font-medium my-1 !pr-0 !pl-0",item:{base:"text-sm p-1.5 my-0.5 duration-0",active:""}}},d_={...Kn,header:{...Kn.header,base:[Kn.header.base,"text-text-secondary"].join(" ")},days:{...Kn.days,day:[Kn.days.day,"border-transparent text-text-secondary opacity-90 hover:bg-primary-hover hover:disabled:bg-transparent! hover:text-black disabled:text-text-secondary/60"].join(" "),header:[Kn.days.header,"text-text-secondary"].join(" "),outside:[Kn.days.outside,"opacity-40 text-text-secondary"].join(" "),selected:[Kn.days.selected,"text-black border-transparent light:text-white light:border-transparent opacity-100"].join(" "),hover:[Kn.days.hover,"bg-primary-active text-black border-transparent light:text-white opacity-100"].join(" "),today:[Kn.days.today,"border-panel-accent text-text-primary"].join(" ")},months:{...Kn.months,month:[Kn.months.month,"hover:bg-primary-hover hover:text-black border-transparent text-text-secondary light:hover:text-white"].join(" "),selected:[Kn.years.selected,"border-transparent text-black light:text-white"].join(" ")},years:{...Kn.years,year:[Kn.years.year,"hover:bg-primary-hover hover:text-black border-transparent text-text-secondary light:hover:text-white"].join(" "),selected:[Kn.years.selected,"border-transparent text-black light:text-white"].join(" ")},time:{...Kn.time,wrapper:[Kn.time.wrapper,"border-panel-border"].join(" "),items:{...Kn.time.items,item:{...Kn.time.items.item,base:[Kn.time.items.item.base,"text-text-secondary hover:bg-primary-hover hover:text-black"].join(" "),selected:[Kn.time.items.item.selected,"bg-blue-500 text-white dark:bg-blue-600 dark:text-white"].join(" "),disabled:[Kn.time.items.item.disabled,"opacity-50"].join(" ")}}},presets:{...Kn.presets,group:[Kn.presets.group,"!text-gray-500 dark:text-gray-400"].join(" "),item:{...Kn.presets.item,base:[Kn.presets.item.base,"hover:text-black dark:hover:bg-primary-hover hover:rounded-sm"].join(" "),active:[Kn.presets.item.active,"bg-primary text-black rounded-sm"].join(" ")}}};({...Kn.header,base:[Kn.header.base,"mb-[var(--spacing-sm)] mb-[var(--calendar-gap)]"].join(" ")},{...Kn.days,header:[Kn.days.header,"gap-[var(--calendar-gap)]"].join(" "),outside:[Kn.days.outside,"text-gray-100/60"].join(" ")});const rw={base:"relative overflow-hidden",header:{base:"flex text-center justify-between mb-2 items-center",prev:"",mid:"",next:""},title:"font-semibold flex grow justify-around",content:"flex gap-4"},wte={base:rw.base,header:rw.header,title:rw.title,content:rw.content,days:d_.days,presets:{...d_.presets,divider:"mx-1 h-[calc(100%-30px)] self-end"}};d_.days;const WU=({label:n,size:e,disabled:t,checked:i,onChange:r,labelClassName:s,theme:o})=>ne.jsx("span",{className:tn(o.label.base,o.label.sizes[e],i&&o.label.checked,t&&o.label.disabled,!t&&r&&o.label.clickable,s),onClick:()=>{!t&&r&&r()},children:n}),cC=$.forwardRef(({checked:n=!1,intermediate:e=!1,label:t,disabled:i,size:r="medium",labelPosition:s="end",onChange:o,onBlur:a,className:l,containerClassName:c,labelClassName:f,borderPath:d="M 1 0 L 16 0 C 16.552 0 17 0.448 17 1 L 17 15 C 17 15.552 16.552 16 16 16 L 1 16 C 0.448 16 0 15.552 0 15 L 0 1 C 0 0.448 0.448 0 1 0 Z",checkedPath:m="M 4 8 L 8 12 L 12 4",intermediatePath:v="M 5.36396 8.17792 L 10.6044 8.17792",theme:b,...x},w)=>{const _=Yn("checkbox",b),A=AB(0),T=RB(A,[.05,.15],[0,1]),[E,C]=$.useState(!1);$.useEffect(()=>{(n||e)&&C(!0)},[]);const R={pressed:I=>({pathLength:I?.85:.3}),checked:{pathLength:1},unchecked:{pathLength:0}},O=$.useCallback(()=>{!i&&o&&o(!n)},[i,o,n]);return ne.jsxs("div",{className:tn(_.base,c,n&&"checked"),children:[s==="start"&&t&&ne.jsx(WU,{label:t,size:r,checked:n,disabled:i,onChange:O,labelClassName:tn("mr-2.5",f),theme:_}),ne.jsx(Js.div,{...x,ref:w,tabIndex:i?-1:0,className:tn(_.checkbox.base,n&&_.checkbox.checked,i&&_.checkbox.disabled,_.sizes[r],l),onClick:I=>{!i&&o&&(I.stopPropagation(),o(!n))},onBlur:a,onKeyDown:I=>{!i&&o&&I.code==="Space"&&o(!n)},children:ne.jsxs(Js.svg,{animate:n?"checked":"unchecked",whileHover:i?void 0:"hover",whileTap:i?void 0:"pressed",viewBox:"0 0 16 16",width:16,height:16,children:[ne.jsx(Js.path,{className:tn(_.border.base,n&&_.border.checked,i&&_.border.disabled),d,variants:_.boxVariants}),e?ne.jsx(Js.path,{d:v,fill:"transparent",strokeWidth:"1",className:_.check.base,variants:R,style:{pathLength:A,opacity:T},custom:n}):ne.jsx(Js.path,{d:m,fill:"transparent",strokeWidth:"1",className:tn(_.check.base,i&&_.check.disabled,n&&_.check.checked),variants:R,style:{pathLength:A,opacity:T},custom:n})]})}),s==="end"&&t&&ne.jsx(WU,{label:t,size:r,checked:n,disabled:i,onChange:O,labelClassName:tn("ml-2.5",f),theme:_})]})}),ds={base:"inline-flex items-center w-full group",label:{base:"dark:text-gray-400 light:text-gray-700 ml-2.5 w-full",checked:"checked dark:text-gray-100 light:text-gray-900",disabled:"cursor-not-allowed dark:text-gray-600 light:text-gray-400",clickable:"cursor-pointer",sizes:{small:"text-sm",medium:"text-base",large:"text-lg"}},check:{base:"stroke-white",checked:"",disabled:"cursor-not-allowed"},border:{base:"stroke-gray-400 light:stroke-gray-700",checked:"stroke-blue-500",disabled:"cursor-not-allowed stroke-gray-500"},checkbox:{base:"fill-transparent flex items-center justify-center cursor-pointer focus-visible:outline-hidden",checked:"fill-blue-500 checked",disabled:"fill-transparent disabled"},sizes:{small:"[&>svg]:w-3 [&>svg]:h-3",medium:"[&>svg]:w-4 [&>svg]:h-4",large:"[&>svg]:w-5 [&>svg]:h-5"}},Ste={...ds,checkbox:{...ds.checkbox,base:[ds.checkbox.base,"border border-surface","[&.checked.disabled]:fill-gray-400"].join(" "),checked:[ds.checkbox.checked,"group-hover:fill-blue-400","light:group-hover:fill-blue-600","light:group-hover:[&.disabled]:fill-gray-400"].join(" "),disabled:[ds.checkbox.disabled,"group-hover:transparent","light:group-hover:transparent"].join(" ")},check:{...ds.check,base:[ds.check.base,"group-hover:stroke-black light:group-hover:stroke-white"].join(" "),disabled:[ds.check.disabled,"stroke-black light:stroke-white group-hover:stroke-black "].join(" ")},border:{...ds.border,base:[ds.border.base,"dark:group-hover:stroke-blue-300","light:group-hover:stroke-blue-600"].join(" "),disabled:[ds.border.disabled,"dark:group-hover:stroke-gray-500","light:group-hover:stroke-gray-400"].join(" ")},label:{...ds.label,base:[ds.label.base,"text-text-primary dark:group-hover:text-blue-300 light:group-hover:text-blue-400"].join(" "),checked:[ds.label.checked,"group-hover:text-gray-100"].join(" "),disabled:[ds.label.disabled,"light:group-hover:text-gray-400","dark:group-hover:text-gray-600"].join(" ")},boxVariants:{hover:{strokeWidth:1},pressed:{scale:.95}}};[ds.check.base,"stroke-[var(--checkbox-check-stroke)]"].join(" "),{...ds.label,base:[ds.label.base,"text-[var(--checkbox-label-color)] ml-[var(--spacing-md)]"].join(" ")};const Ete=$.forwardRef(({className:n,containerClassname:e,error:t,fullWidth:i,selectOnFocus:r,start:s,end:o,startAdornment:a,endAdornment:l,autoFocus:c,disabled:f,value:d,size:m="medium",onFocus:v,onChange:b,onValueChange:x,onBlur:w,theme:_,...A},T)=>{const E=$.useRef(null),C=$.useRef(null),[R,O]=$.useState(!1);$.useImperativeHandle(T,()=>({inputRef:C,containerRef:E,blur:()=>{var L;return(L=C.current)==null?void 0:L.blur()},focus:()=>{var L;return(L=C.current)==null?void 0:L.focus()},select:()=>{var L;return(L=C.current)==null?void 0:L.select()}})),$.useLayoutEffect(()=>{c&&requestAnimationFrame(()=>{var L;return(L=C.current)==null?void 0:L.focus()})},[c]);const I=Yn("input",_);return ne.jsxs("div",{className:tn(I.base,R&&I.focused,i&&I.fullWidth,t&&I.error,I.sizes[m],f&&I.disabled,e),ref:E,children:[(s||a)&&ne.jsx("div",{className:tn(I.adornment.base,I.adornment.start),children:s??a}),ne.jsx("input",{...A,ref:C,value:d,disabled:f,className:tn(I.input,n),onFocus:L=>{r&&L.target.select(),O(!0),v?.(L)},onBlur:L=>{w?.(L),O(!1)},onChange:L=>{x?.(L.target.value),b?.(L)}}),(o||l)&&ne.jsx("div",{className:tn(I.adornment.base,I.adornment.end),children:o??l})]})});$.forwardRef(({inputClassName:n,className:e,placeholder:t,value:i,theme:r,...s},o)=>{const a=Yn("input",r);return ne.jsxs("div",{className:Rs("inline-grid",e),children:[ne.jsxs("span",{className:"invisible",style:{gridArea:" 1 / 1 "},children:[!i&&"",typeof i=="string"?i?i?.replace(/ /g,""):t?.replace(/ /g,""):i]}),ne.jsx("input",{...s,size:1,ref:o,style:{gridArea:" 1 / 1 "},type:"text",placeholder:t,value:i,className:Rs("border-none bg-transparent focus:outline-hidden",a.inline,n)})]})});$.forwardRef(({debounce:n=100,value:e,onChange:t,onValueChange:i,...r},s)=>{const o=$.useRef(null),[a,l]=$.useState(e);return $.useEffect(()=>{l(e)},[e]),ne.jsx(Ete,{...r,ref:s,value:a,onKeyDown:c=>{c.key==="Enter"&&(i?.(c.target.value),t?.(c))},onChange:c=>{l(c.target.value),n?(clearTimeout(o.current),o.current=setTimeout(()=>{i?.(c.target.value),t?.(c)},n)):(i?.(c.target.value),t?.(c))}})});const Jh={base:"flex relative flex-row items-center flex-nowrap box-border transition-colors rounded-xs",focused:"",input:"flex-1 font-normal font-sans bg-transparent border-0 p-0 m-0 disabled:pointer-events-none outline-hidden px-0.5 disabled:cursor-not-allowed disabled:text-disabled",inline:"bg-transparent border-0 outline-hidden",disabled:"text-waterloo cursor-not-allowed",fullWidth:"w-full",error:"border-error",sizes:{small:"[&>input]:text-sm p-1 text-sm",medium:"[&>input]:text-base px-2.5 py-1.5 text-base",large:"[&>input]:text-lg p-5 text-lg"},adornment:{base:"flex items-center justify-center [&>svg]:w-4 [&>svg]:h-4 [&>svg]:current-color",start:"pr-1.5",end:"pl-1.5"}},td={...Jh,base:[Jh.base,"bg-panel border border-panel-accent text-text-primary hover:border-panel-accent light:hover:border-panel-accent","hover:after:bg-[radial-gradient(circle,_#105EFF_0%,_#105EFF_36%,_#242433_100%)] light:hover:after:bg-[radial-gradient(circle,_#105EFF_0%,_#105EFF_36%,_#E6E6F0_100%)]",'hover:after:content-[""] hover:after:absolute hover:after:mx-1 hover:after:h-px after:z-2 hover:after:rounded-sm hover:after:-bottom-[1px] hover:after:inset-x-0.5'].join(" "),focused:[Jh.focused,"focus-within:after:bg-[radial-gradient(circle,_#93B6FF_0%,_#105EFF_36%,_#3D3D4D_90%,_#242433_100%)] light:focus-within:after:bg-[radial-gradient(circle,_#105EFF_10%,_#93B6FF_36%,_#E6E6F0_90%)]",'focus-within:after:content-[""] focus-within:after:absolute focus-within:after:mx-0 focus-within:after:h-px after:z-2 focus-within:after:rounded-sm focus-within:after:-bottom-[1px] focus-within:after:inset-x-0.5'].join(" "),input:[Jh.input,"placeholder-accent"].join(" "),disabled:[Jh.disabled,"disabled-within:bg-dark-disabled disabled-within:after:content-none"].join(" "),adornment:{...Jh.adornment,base:[Jh.adornment.base,"text-text-primary"].join(" ")}};[Jh.adornment.base,"[&>svg]:w-[var(--input-adornment-size)] [&>svg]:h-[var(--input-adornment-size)] [&>svg]:fill-[var(--input-adornment-fill)]"].join(" ");const Mte=$.createContext({onChange:null,selectedValue:null}),Tte={check:{opacity:1,scale:1},uncheck:{opacity:0,scale:0}};$.forwardRef(({checked:n,label:e,disabled:t,onChange:i,onBlur:r,className:s,size:o="medium",value:a,theme:l,...c},f)=>{const{onChange:d,selectedValue:m}=$.useContext(Mte),v=$.useMemo(()=>m===null?n:m===a,[n,m,a]),b=w=>{d?.(a),i?.(w)},x=Yn("radio",l);return ne.jsxs("div",{className:Rs(x.base,s),children:[ne.jsx("div",{...c,ref:f,tabIndex:0,className:Rs(x.radio.base,x.sizes[o],{[x.radio.checked]:v,[x.radio.disabled]:t}),onClick:()=>{t||b(!v)},onBlur:r,onKeyDown:w=>{!t&&w.code==="Space"&&b(!v)},children:ne.jsx(Js.div,{className:Rs(x.indicator.base,x.indicator.sizes[o],{[x.indicator.disabled]:t}),initial:t?{}:{opacity:0,scale:.5},variants:Tte,animate:v?"check":"uncheck",transition:{duration:.15}})}),e&&ne.jsx("span",{className:Rs(x.label.base,{[x.label.checked]:v,[x.label.disabled]:t,[x.label.clickable]:!t}),onClick:()=>{t||b(!v)},children:e})]})});const Jr={base:"box-border leading-none group",radio:{base:"will-change-[border-color] inline-flex justify-center items-center box-border align-middle rounded-[100%] bg-transparent border cursor-pointer",disabled:"cursor-not-allowed",checked:""},indicator:{base:"rounded-[100%]",disabled:"cursor-not-allowed",sizes:{small:"w-2 h-2",medium:"w-2.5 h-2.5",large:"w-3.5 h-3.5"}},label:{base:"w-full align-middle ml-2.5",clickable:"cursor-pointer hover:text-blue-300",disabled:"cursor-not-allowed",checked:""},sizes:{small:"w-3 h-3",medium:"w-4 h-4",large:"w-5 h-5"}},Ate={...Jr,label:{...Jr.label,base:[Jr.label.base,"text-text-secondary"].join(" "),checked:[Jr.label.checked,"text-text-primary"].join(" "),disabled:[Jr.label.disabled,"text-secondary-inactive/40!"].join(" ")},radio:{...Jr.radio,base:[Jr.radio.base,"border-surface group-hover:border-primary-hover hover:border-primary-hover"].join(" "),checked:[Jr.radio.checked,"border-primary-active group-hover:border-primary-hover"].join(" "),disabled:[Jr.radio.disabled,"border-secondary-inactive!"].join(" ")},indicator:{...Jr.indicator,base:[Jr.indicator.base,"bg-primary group-hover:bg-primary-hover"].join(" "),disabled:[Jr.indicator.disabled,"bg-secondary-inactive!"].join(" ")}};({...Jr.label,base:[Jr.label.base,"text-[var(--radio-label-color)] ml-[var(--spacing-md)]"].join(" ")},{...Jr.radio,base:[Jr.radio.base,"bg-[var(--radio-background)] [border:_var(--radio-stroke-size)_solid_var(--radio-stroke)]"].join(" "),checked:[Jr.radio.checked,"border-[var(--radio-stroke-active)]"].join(" ")}),{...Jr.indicator,base:[Jr.indicator.base,"bg-[var(--radio-indicator-active)]"].join(" ")};const ru={base:"relative box-border w-full h-0.5",drag:"absolute w-4 h-4 -left-2 -top-2 rounded-full",inputWrapper:{base:"cursor-pointer inline-block relative h-full w-full rounded-full",disabled:"cursor-not-allowed"},rangeHighlight:{base:"pointer-events-none h-0.5",disabled:"cursor-not-allowed"},disabled:"cursor-not-allowed",input:"absolute left-[-9999px]",tooltip:"absolute top-[-45px] whitespace-nowrap text-center left-2/4 rounded-lg p-2.5"},Cte={...ru,base:[ru.base,"bg-surface light:bg-gray-200"].join(" "),inputWrapper:{...ru.inputWrapper,base:[ru.inputWrapper.base,"bg-primary-active hover:bg-primary-hover shadow-[0px_4px_4px_0px_rgba(0,0,0,0.20)]"].join(" "),disabled:[ru.inputWrapper.disabled,"bg-secondary-inactive hover:bg-secondary-inactive"].join(" ")},rangeHighlight:{base:[ru.rangeHighlight.base,"bg-primary-active"].join(" "),disabled:[ru.rangeHighlight.disabled,"bg-secondary-inactive"].join(" ")},tooltip:[ru.tooltip,"text-text-primary bg-surface"].join(" ")};({...ru.rangeHighlight,base:[ru.rangeHighlight.base,"h-[var(--range-track-size)] bg-[var(--range-track-active-background)]"].join(" ")});const Rte=({height:n=16,width:e=16})=>ne.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:e,height:n,viewBox:"0 0 16 16",fill:"currentColor",children:ne.jsx("path",{d:"M12.6667 4.27331L11.7267 3.33331L8.00004 7.05998L4.27337 3.33331L3.33337 4.27331L7.06004 7.99998L3.33337 11.7266L4.27337 12.6666L8.00004 8.93998L11.7267 12.6666L12.6667 11.7266L8.94004 7.99998L12.6667 4.27331Z",fill:"currentColor"})}),ps={base:"flex flex-nowrap items-center box-border border rounded-sm",container:"relative",inputContainer:"flex-wrap flex items-center overflow-hidden flex-1 max-w-full [&>div]:max-w-full [&_.invisible]:text-ellipsis [&_.invisible]:overflow-hidden",input:"p-0 bg-transparent text-ellipsis align-middle max-w-full read-only:cursor-not-allowed focus:outline-hidden disabled:text-disabled",placeholder:"",prefix:"overflow-hidden whitespace-nowrap text-ellipsis",suffix:{container:"flex items-center justify-center",button:"disabled:cursor-not-allowed",refresh:"mr-1.5 [&>svg]:w-4 [&>svg]:h-4 [&>svg]:fill-text-secondary",loader:"mr-2.5",close:"mr-1.5 [&>svg]:w-4 [&>svg]:h-4 [&>svg]:fill-text-secondary",expand:"[&>svg]:w-4 [&>svg]:h-4 [&>svg]:fill-text-secondary"},disabled:"cursor-not-allowed text-disabled hover:after:content-none",unfilterable:"caret-transparent",error:"border border-solid",open:"rounded-sm rounded-ee-none rounded-es-none",single:{prefix:"overflow-hidden whitespace-nowrap text-ellipsis max-w-full",inputContainer:"flex-nowrap",input:"max-w-full"},multiple:{prefix:"contents",inputContainer:"flex-wrap"},chip:{base:"cursor-pointer flex text-sm leading-none box-border mr-1 px-1 py-1 rounded-sm border-solid border-transparent",hover:"",focused:"focused:border-transparent focused:outline-none",disabled:"disabled:cursor-not-allowed",removeButton:"cursor-pointer leading-0 ml-1 p-0 border-0 [&>svg]:w-3 [&>svg]:h-3 [&>svg]:align-baseline [&>svg]:pointer-events-none"},size:{small:"py-1 px-2 text-sm min-h-8",medium:"py-2 px-3 text-base min-h-[35px]",large:"py-2 px-3 text-lg min-h-[42px]"}},Dte={...ps,base:[ps.base,"bg-panel text-text-primary border-panel-accent border-solid hover:border-panel-accent light:hover:border-panel-accent","hover:after:bg-[radial-gradient(circle,_#105EFF_0%,_#105EFF_36%,_#242433_100%)] light:hover:after:bg-[radial-gradient(circle,_#105EFF_0%,_#105EFF_36%,_#E6E6F0_100%)]","focus-within:after:bg-[radial-gradient(circle,_#93B6FF_0%,_#105EFF_36%,_#3D3D4D_90%,_#242433_100%)] light:focus-within:after:bg-[radial-gradient(circle,_#105EFF_10%,_#93B6FF_36%,_#E6E6F0_90%)]",'hover:after:content-[""] hover:after:absolute hover:after:mx-1 hover:after:h-px after:z-2 hover:after:rounded-sm hover:after:-bottom-[0px] hover:after:inset-x-0.5','focus-within:after:content-[""] focus-within:after:absolute focus-within:after:mx-0 focus-within:after:h-px after:z-2 focus-within:after:rounded-sm focus-within:after:-bottom-[0px] focus-within:after:inset-x-0.5'].join(" "),placeholder:[ps.placeholder,"placeholder:text-secondary-content"].join(" "),disabled:[ps.disabled,"text-text-secondary/40 border-surface light:hover:border-surface"].join(" "),error:[ps.error,"border-error light:border-error/20"].join(" "),suffix:{...ps.suffix,button:[ps.suffix.button,"hover:cursor-pointer"].join(" ")},chip:{...ps.chip,base:[ps.chip.base,"[&>svg]:fill-text-primary [&>svg]:disabled:fill-text-secondary/40"].join(" "),hover:[ps.chip.hover,"hover:brightness-150"].join(" "),focused:[ps.chip.focused,"border-panel-accent"].join(" "),removeButton:[ps.chip.removeButton,"[&>svg]:fill-text-primary [&>svg]:disabled:fill-text-secondary/40"].join(" ")}};({...ps.suffix,close:[ps.suffix.close,"[&>svg]:fill-[var(--select-input-icon-color)]"].join(" "),expand:[ps.suffix.expand,"[&>svg]:fill-[var(--select-input-icon-color)]"].join(" ")},{...ps.chip,base:[ps.chip.base,"bg-[var(--select-chip-background)] text-[var(--select-chip-color)] [border:_var(--select-chip-border)]"].join(" "),removeButton:[ps.chip.removeButton,"[&>svg]:fill-[var(--select-chip-icon-color)]"].join(" ")});const Ks={base:"border border-solid rounded-b-md text-center will-change-[transform,opacity] min-w-[112px] max-h-[300px] overflow-y-auto text-left box-border",groupItem:{base:"p-0 border-0 first:pt-2 last:pb-2",title:"font-bold uppercase m-0 px-1.5 py-2.5",size:{small:"px-2.5 text-sm",medium:"px-3 text-sm",large:"px-3.5 text-base"}},option:{base:"flex-1 whitespace-break-spaces break-words py-1.5 px-2.5",hover:"",selected:"",active:"",disabled:"",checkIcon:"ml-1",content:"flex flex-row justify-between"},size:{small:"px-2.5 py-1.5 text-sm",medium:"px-4 py-2 text-base",large:"px-5 py-3 text-lg"}},Ote={...Ks,base:[Ks.base,"bg-panel text-text-primary border-panel-accent border-t-transparent"].join(" "),groupItem:{...Ks.groupItem,title:[Ks.groupItem.title,"text-text-primary"].join(" ")},option:{...Ks.option,base:[Ks.option.base,"text-text-secondary "].join(" "),hover:[Ks.option.hover,"hover:bg-vulcan hover:text-mystic light:hover:bg-vulcan/5 light:hover:text-text-secondary"].join(" "),active:[Ks.option.active,"bg-vulcan hover:text-mystic"].join(" "),selected:[Ks.option.selected,"text-primary-active"].join(" ")}};({...Ks.groupItem,title:[Ks.groupItem.title,"text-gray-600"].join(" ")},{...Ks.option,base:[Ks.option.base,"text-[var(--select-menu-item-color)] [padding:_var(--select-menu-item-spacing)]"].join(" "),hover:[Ks.option.hover,"hover:bg-[var(--select-menu-item-active-background)] hover:text-[var(--select-menu-item-active-color)]"].join(" "),active:[Ks.option.active,"hover:bg-[var(--select-menu-item-active-background)] text-[var(--select-menu-item-active-color)]"].join(" "),selected:[Ks.option.selected,"bg-[var(--select-menu-item-selected-background)] text-[var(--select-menu-item-selected-color)]"].join(" ")});const Lte={selectInput:Dte,selectMenu:Ote};$.forwardRef(({fullWidth:n,size:e="medium",containerClassName:t,className:i,error:r,autoFocus:s,theme:o,...a},l)=>{const c=$.useRef(null),f=$.useRef(null);$.useImperativeHandle(l,()=>({textareaRef:f,containerRef:c,blur:()=>{var m;return(m=f.current)==null?void 0:m.blur()},focus:()=>{var m;return(m=f.current)==null?void 0:m.focus()}})),$.useLayoutEffect(()=>{s&&requestAnimationFrame(()=>{var m;return(m=f.current)==null?void 0:m.focus()})},[s]);const d=Yn("textarea",o);return ne.jsx("div",{className:tn(d.base,n&&d.fullWidth,r&&d.error,t),ref:c,children:ne.jsx(pQ,{ref:f,className:tn(d.input,n&&d.fullWidth,a.disabled&&d.disabled,d.sizes[e],i),autoFocus:s,...a})})});const sw={input:"resize-none read-only:cursor-not-allowed"},Pte={...sw,base:[sw.base,td.base,"disabled-within:hover:after:content-none"].join(" "),input:[sw.input,td.input].join(" "),disabled:[sw.disabled,td.disabled].join(" "),fullWidth:td.fullWidth,error:td.error,sizes:td.sizes};$.forwardRef(({checked:n,disabled:e,onChange:t,onBlur:i,className:r,size:s="medium",animated:o=!0,animation:a,theme:l,...c},f)=>{const d=Yn("toggle",l);return ne.jsx("div",{...c,ref:f,tabIndex:0,role:"switch",className:Rs(d.base,d.sizes[s],{[d.checked]:n,[d.disabled]:e,[d.disabledAndChecked]:e&&n},r),onClick:()=>{!e&&t&&t(!n)},onBlur:i,onKeyDown:m=>{!e&&t&&m.code==="Space"&&t(!n)},children:ne.jsx(Js.div,{className:Rs(d.handle.base,d.handle.sizes[s],{[d.handle.disabled]:e,[d.handle.disabledAndChecked]:e&&n}),layout:!0,...a||{transition:{type:"spring",stiffness:700,damping:30,duration:o?.3:0}}})})});const Pp={base:"flex items-center justify-start cursor-pointer bg-surface box-border border border-panel-accent rounded-full hover:bg-primary-hover transition-[background-color] ease-in-out duration-300",disabled:"cursor-not-allowed bg-transparent hover:bg-transparent",checked:"justify-end bg-primary",disabledAndChecked:"bg-secondary-inactive hover:bg-secondary-inactive light:bg-gray-400 light:hover:bg-gray-400",handle:{base:"rounded-full bg-panel",sizes:{small:"w-3 h-full",medium:"w-5 h-full",large:"w-6 h-full"},disabled:"bg-secondary-inactive light:bg-gray-400",disabledAndChecked:"bg-black light:bg-white"},sizes:{small:"w-8 h-4 p-px",medium:"w-12 h-6 p-px",large:"w-16 h-7 p-px"}},Ite=Pp;({...Pp,base:[Pp.base,"bg-[var(--toggle-background)] rounded-[var(--toggle-border-radius)] [border:_var(--toggle-border)]"].join(" "),disabled:[Pp.disabled,"opacity-[var(--toggle-disabled-opacity,0.8)] bg-[var(--toggle-disabled-background)]"].join(" "),checked:[Pp.checked,"bg-[var(--toggle-background-checked)] [border:_var(--toggle-border-checked)]"].join(" "),handle:{...Pp.handle,base:[Pp.handle.base,"bg-[var(--toggle-handle-background)] rounded-[var(--toggle-handle-border-radius)]"].join(" ")}});$.forwardRef(({children:n,className:e,size:t="medium",theme:i,...r},s)=>{const o=Yn("button",i);return ne.jsx(h_,{className:tn(o.iconSizes[t],e),size:t,...r,ref:s,children:n})});const Nte=$.forwardRef(({reference:n,children:e,style:t,className:i,placement:r="bottom-start",closeOnEscape:s=!0,open:o=!1,appendToBody:a=!0,closeOnBodyClick:l=!0,maxHeight:c="max-height: calc(100vh - 48px)",autofocus:f=!0,animated:d=!0,animation:m,modifiers:v,autoWidth:b,minWidth:x,maxWidth:w,onClose:_,onMouseEnter:A,onMouseLeave:T,theme:E},C)=>{const R=Q_(),O=$.useMemo(()=>{if(b){const L={name:"sameWidth",fn:V=>{const{width:B}=V.rects.reference;let k=B;return w&&k>w?k=w:x&&k<x&&(k=x),{data:{menuWidth:k}}}},N=ZN({apply({middlewareData:V,elements:B}){var k;B.floating.style.width=`${((k=V?.sameWidth)==null?void 0:k.menuWidth)??0}px`}});return v?[...v??[],L,N]:[L,N]}else{const L=ZN({apply({elements:N}){N.floating.style.width="auto"}});return[...v??[],L]}},[v,b,x,w]),I=Yn("menu",E);return ne.jsx(X6,{open:o,closeOnBodyClick:l,appendToBody:a,reference:n,placement:r,modifiers:O,closeOnEscape:s,content:()=>ne.jsx(Js.div,{ref:C,...m||{transition:{duration:d?.3:0},initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10}},className:tn(I.base,i),style:t,onMouseEnter:A,onMouseLeave:T,children:f?ne.jsx(WZ,{focusTrapOptions:{escapeDeactivates:!0,clickOutsideDeactivates:!0,fallbackFocus:`#${R}`},children:ne.jsx("div",{id:R,className:I.inner,tabIndex:-1,style:{maxHeight:c},children:typeof e=="function"?e():e})}):ne.jsx("div",{className:I.inner,style:{maxHeight:c},children:typeof e=="function"?e():e})}),onClose:_})});$.forwardRef(({label:n,children:e,style:t,placement:i="right-start",menuClassName:r,menuStyle:s,enterDelay:o=0,autofocus:a=!0,leaveDelay:l=100,className:c,maxHeight:f,activeClassName:d,closeOnBodyClick:m=!0,closeOnEscape:v=!0,animation:b,onClose:x},w)=>{const[_,A]=$.useState(!1),T=$.useRef(null),E=$.useRef(null),C=$.useRef(!1),R=$.useRef(null),O=$.useRef(null),I=$.useCallback(()=>{clearTimeout(R.current),clearTimeout(O.current),R.current=setTimeout(()=>A(!0),o)},[o]),L=$.useCallback(()=>{clearTimeout(R.current),clearTimeout(O.current),A(!_)},[_]),N=$.useCallback(()=>{O.current=setTimeout(()=>{C.current||A(!1)},l)},[l]),V=$.useCallback(j=>{clearTimeout(R.current),clearTimeout(O.current),C.current=!0},[]),B=$.useCallback(j=>{clearTimeout(R.current),clearTimeout(O.current),C.current=!1,O.current=setTimeout(()=>{var q;(q=T.current)!=null&&q.contains(j.target)||A(!1)},l)},[l]),k=$.useCallback(j=>{A(!1),x?.(j)},[x]);return $.useImperativeHandle(w,()=>({close:()=>{A(!1)}})),ne.jsxs($.Fragment,{children:[ne.jsx("div",{className:id(c,{[d]:_}),style:t,ref:T,onClick:L,onMouseEnter:I,onMouseLeave:N,children:n}),ne.jsx(Nte,{className:r,autofocus:a,style:s,reference:T,closeOnBodyClick:m,closeOnEscape:v,open:_,placement:i,maxHeight:f,animation:b,ref:E,onMouseEnter:V,onMouseLeave:B,onClose:k,children:e})]})});const $U={base:"relative min-w-[112px] max-w-[500px] p-px",inner:"focus:outline-hidden"},Ute={...$U,inner:[$U.inner,"text-text-primary bg-panel"].join(" ")},kte={input:td,calendar:d_,preset:{list:"w-full border border-panel-accent",option:{base:"hover:bg-vulcan hover:text-mystic light:hover:bg-vulcan/5 light:hover:text-text-secondary",active:"bg-vulcan hover:text-mystic"}}};$.forwardRef(({children:n,disabled:e,deleteIcon:t=ne.jsx(Rte,{height:12,width:12}),onDelete:i,size:r="medium",color:s="default",theme:o,variant:a="filled",...l},c)=>{const f=Yn("chip",o);return ne.jsx(Y6,{ref:c,size:r,disabled:e,color:s,end:ne.jsx(h_,{tabIndex:0,variant:"text",size:r,className:tn(f.deleteButton.base,f.deleteButton[r]),onClick:d=>{e||(d.stopPropagation(),i?.())},disabled:e,disableMargins:!0,disablePadding:!0,children:t}),variant:a,theme:f,...l,children:n})});const Qr={base:`
  inline-flex whitespace-no-wrap select-none items-center justify-center px-2.5 py-0.5
  rounded-xs leading-none text-white transition-colors
  duration-300 ease [&>svg]:transition-[fill] [&>svg]:will-change-[fill] font-medium
  `,colors:{default:{selectable:{base:"hover:cursor-pointer"}},primary:{selectable:{base:"hover:cursor-pointer"}},secondary:{selectable:{base:"hover:cursor-pointer"}},success:{selectable:{base:"hover:cursor-pointer"}},warning:{selectable:{base:"hover:cursor-pointer"}},error:{selectable:{base:"hover:cursor-pointer"}},info:{selectable:{base:"hover:cursor-pointer"}}},adornment:{base:"flex items-center justify-center",start:"mr-1",end:"ml-1",sizes:{small:"[&>svg]:w-3 [&>svg]:h-3",medium:"[&>svg]:w-4 [&>svg]:h-4",large:"[&>svg]:w-5 [&>svg]:h-5"}},sizes:{small:"text-[10px] leading-[inherit] px-1 py-0.5",medium:"text-sm leading-[inherit] px-2 py-0.5",large:"text-base leading-[inherit] px-3 py-0.5"},focus:"focus-visible:outline-dashed focus-visible:outline-1 focus-visible:outline-offset-2",deleteButton:{base:"text-inherit",sizes:{small:"leading-[10px] max-h-2.5",medium:"leading-3 max-h-3",large:"leading-[14px] max-h-3.5"}},disabled:"opacity-50 cursor-not-allowed"},zte={base:Qr.base,adornment:Qr.adornment,sizes:Qr.sizes,focus:Qr.focus,variants:{filled:"border border-transparent box-border",outline:"bg-transparent border hover:bg-transparent"},colors:{default:{variants:{filled:"bg-panel border-panel text-text-primary",outline:"text-text-primary dark:border-gray-100 light:border-gray-900"},selectable:{base:`${Qr.colors.default.selectable.base}`,variants:{filled:{base:"hover:bg-primary-hover hover:border-primary-hover hover:text-panel",selected:"bg-primary text-panel"},outline:{base:"hover:text-primary-hover hover:border-panel-accent",selected:"border-panel-accent text-primary"}}}},primary:{variants:{outline:"text-primary border-panel-accent",filled:"bg-primary border-primary text-panel"},selectable:{base:`${Qr.colors.primary.selectable.base}`,variants:{filled:{base:"hover:bg-primary-hover hover:border-primary-hover hover:text-panel",selected:"bg-primary-hover"},outline:{base:"hover:text-primary-hover hover:border-primary",selected:"border-primary"}}}},secondary:{variants:{filled:"bg-secondary border-secondary text-text-primary",outline:"text-secondary border-panel-accent"},selectable:{base:`${Qr.colors.secondary.selectable.base}`,variants:{filled:{base:"hover:bg-secondary-hover hover:border-secondary-hover hover:text-panel",selected:"bg-secondary-hover text-panel"},outline:{base:"hover:text-secondary-hover hover:border-secondary",selected:"border-secondary"}}}},success:{variants:{filled:"bg-success border-success text-panel",outline:"text-success border-panel-accent"},selectable:{base:`${Qr.colors.success.selectable.base}`,variants:{filled:{base:"hover:bg-success-hover hover:border-success-hover",selected:"bg-success-hover"},outline:{base:"hover:text-success-hover hover:border-success",selected:"border-success"}}}},warning:{variants:{filled:"bg-warning border-warning text-panel",outline:"text-warning border-panel-accent"},selectable:{base:`${Qr.colors.warning.selectable.base}`,variants:{filled:{base:"hover:bg-warning-hover hover:border-warning-hover hover:text-panel",selected:"bg-warning-hover"},outline:{base:"hover:text-warning-hover hover:border-warning",selected:"border-warning"}}}},error:{variants:{filled:"bg-error border-error text-panel",outline:"text-error border-panel-accent"},selectable:{base:`${Qr.colors.error.selectable.base}`,variants:{filled:{base:"hover:bg-error-hover hover:border-error-hover hover:text-panel",selected:"bg-error-hover"},outline:{base:"hover:text-error-hover hover:border-error",selected:"border-error"}}}},info:{variants:{filled:"bg-info border-info text-panel",outline:"text-info border-panel-accent"},selectable:{base:`${Qr.colors.info.selectable.base}`,variants:{filled:{base:"hover:bg-info-hover hover:border-info-hover hover:text-panel",selected:"bg-info-hover"},outline:{base:"hover:text-info-hover hover:border-info",selected:"border-info"}}}}},deleteButton:Qr.deleteButton,disabled:Qr.disabled};({...Qr.adornment,start:[Qr.adornment.start,"pr-[var(--spacing-xs)]"].join(" "),end:[Qr.adornment.end,"pl-[var(--spacing-xs)]"].join(" ")},[Qr.sizes.small,"p-[var(--spacing-xs)]"].join(" "),[Qr.sizes.medium,"py-[var(--spacing-xs)] px-[var(--spacing-md)]"].join(" "),[Qr.sizes.large,"p-[var(--spacing-md)]"].join(" "));const qU={base:"flex",dot:"rounded-[50%]",sizes:{small:"w-1 h-1 m-1",medium:"w-1.5 h-1.5 m-1.5",large:"w-2 h-2 m-2"}},Fte={...qU,dot:[qU.dot,"light:bg-gray-900 dark:bg-gray-100"].join(" ")};$.forwardRef(({name:n,src:e,color:t,size:i=24,variant:r="filled",rounded:s=!0,className:o,colorOptions:a,theme:l,...c},f)=>{const d=i*.4,m=$.useMemo(()=>XZ(n||""),[n]),v=$.useMemo(()=>e?"transparent":t||eK(n||"",a),[t,n,e,a]),b=Yn("avatar",l);return ne.jsx("div",{...c,className:tn(b.base,s&&b.rounded,o),style:{width:`${i}px`,height:`${i}px`,fontSize:`${d}px`,backgroundImage:e?`url(${e})`:"none",backgroundColor:v,...r==="outline"&&{backgroundColor:"transparent",border:`solid 1px ${v}`,color:v}},ref:f,children:!e&&n&&ne.jsx("span",{children:m})})});const XU={base:"flex justify-center items-center bg-cover bg-center font-bold",rounded:"rounded-[50%]"},Bte={...XU,base:[XU.base,"text-white"].join(" ")},YU={base:"cursor-text",interactive:"cursor-pointer hover:underline"},Vte={...YU,base:[YU.base,"text-text-primary"].join(" ")};new jO.Scale({ms:1,s:1*1e3,min:60*1e3,hr:3600*1e3,day:86400*1e3,month:2592e3*1e3});const Gte={base:"cursor-text",interactive:"cursor-pointer hover:underline"},Hte={...Gte},eD={base:"cursor-pointer select-none flex items-center relative",disabled:"cursor-[initial]",hasValue:"cursor-not-allowed",icon:{base:"w-4 h-4 align-middle mx-1.5 fill-current",ascending:"rotate-180"}},jte={...eD,base:[eD.base,"text-text-primary"].join(" ")};({...eD.icon});const uC={base:"flex w-full items-center border-b-2",input:"flex-1 border-0 box-border p-2.5 focus-within:outline-hidden focus-visible:outline-hidden",icon:"w-4 h-4 ml-2.5"},Wte={...uC,base:[uC.base,"bg-panel border-bottom border-panel-accent"].join(" "),input:[uC.input,"bg-panel text-text-primary placeholder:placeholder-accent"].join(" ")};let t8=!1;try{typeof window<"u"&&(t8=navigator.platform.toUpperCase().indexOf("MAC")>=0)}catch{}const fC=t8?"":"CTRL";function $te(n){return n.replace("modifier",fC).replace("mod",fC).replace("meta",fC).replace("shift","").replace("plus","+").replace("minus","-")}const qte=({className:n,keycode:e,theme:t,...i})=>{const r=e.split("+").map($te),s=Yn("kbd");return ne.jsx("span",{className:s.base,children:r?.map((o,a)=>ne.jsx(Y6,{...i,className:tn(s.chip,n),children:ne.jsx("kbd",{children:o})},a))})},Xte={base:"inline-flex gap-1 items-center",chip:"whitespace-nowrap rounded-sm font-mono"},Yte={...Xte},Zte=$.forwardRef(({children:n,active:e,className:t,end:i,hotkey:r,onClick:s,theme:o,...a},l)=>{const{item:c}=Yn("commandPalette",o);return ne.jsx(K6,{layout:!0,children:ne.jsx(Jee,{...a,ref:l,className:tn(c.base,e&&c.active,s&&c.clickable),end:ne.jsxs(ne.Fragment,{children:[r&&ne.jsx(qte,{keycode:r,size:"small"}),i]}),children:n})})});Zte.displayName="CommandPaletteItem";const hC={base:"transition-colors ease-in-out duration-200",active:"",clickable:"cursor-pointer"},Kte={...hC,active:[hC.active,"bg-primary text-text-primary"].join(" "),clickable:[hC.clickable,"hover:bg-primary-hover/70 dark:hover:bg-primary-hover dark:hover:text-white"].join(" ")},Qte=$.forwardRef(({children:n,className:e,title:t,index:i,theme:r,...s},o)=>{const{section:a}=Yn("commandPalette",r);return ne.jsx(K6,{layout:!0,children:ne.jsxs(Qee,{ref:o,...s,className:tn(a.base,i===0&&a.first,e),children:[t&&ne.jsx(ete,{children:t}),ne.jsx(Yee,{children:n})]})})});Qte.displayName="CommandPaletteSection";const ZU={base:"",first:"pt-2.5"},Jte={...ZU,base:[ZU.base,"bg-panel"].join(" ")},KU={base:"w-full border",inner:"max-h-[80vh] overflow-y-auto"},ene={base:[KU.base,"border-panel-accent"].join(" "),inner:[KU.inner,"bg-panel border-0"].join(" "),emptyContainer:"bg-panel",input:Wte,item:Kte,section:Jte},Mf={base:"items-center flex user-select-none",pages:{base:"inline-flex",page:{base:"py-1",active:"font-bold"}},ellipsis:"cursor-pointer",pagerDisplayItems:"mr-1.5",itemsDisplay:"",showPageRange:"",totalCount:"",control:"[&>svg]:w-5 [&>svg]:h-5",firstPage:"",prevPage:"",lastPage:"",nextPage:""},tne={...Mf,pages:{...Mf.pages,page:{base:[Mf.pages.page.base,"text-slate-500"].join(" "),active:[Mf.pages.page.active,"text-text-primary!"].join(" ")}},control:[Mf.control,"text-slate-200 light:text-slate-400 disabled:light:text-slate-300"].join(" "),pagerDisplayItems:[Mf.pagerDisplayItems,"text-slate-500"].join(" ")};({...Mf.pages,page:([Mf.pages.page.base,"px-[var(--spacing-sm)]"].join(" "),[Mf.pages.page.active,"text-(--input-color)!"].join(" "))});$.forwardRef(({children:n,className:e,size:t=10,theme:i,...r},s)=>{const o=$.Children.toArray(n),{data:a,hasMore:l,remaining:c}=pte({items:o,size:t}),f=Yn("avatarGroup",i);return ne.jsxs("div",{...r,ref:s,className:tn(f.base,e),children:[a.map((d,m)=>ne.jsx("div",{className:f.avatar,children:d},m)),l&&ne.jsxs("span",{className:f.overflow,children:["+",c," more"]})]})});const QU={base:"flex items-center",avatar:"-ml-2.5",overflow:"ml-[5px]"},nne={...QU,base:[QU.base,"text-text-primary"].join(" ")};$.forwardRef(({children:n,color:e="default",className:t,disableMargins:i,content:r,hidden:s,placement:o="top-end",theme:a,...l},c)=>{const f=Yn("badge",a);return ne.jsxs("span",{className:tn(f.base,i&&f.disableMargins),children:[n,!s&&ne.jsx(Js.span,{initial:{opacity:0,scale:1},animate:{opacity:1,scale:1},"aria-hidden":"true",children:ne.jsx("span",{...l,ref:c,className:tn(f.badge,f.position,f.colors[e],f.positions[o],t),children:r})})]})});const By={base:"relative inline-flex align-middle shrink-0 mx-2 my-0",disableMargins:"m-0",badge:`flex flex-row flex-wrap justify-center content-center items-center absolute box-border
   leading-none text-sm p-1.5 w-[18px] h-[18px] z-1 rounded-[50%] pointer-events-none `,position:"translate-x-2/4 -translate-y-2/4 origin-[100%_0%] right-0 top-0",positions:{"top-start":"top-0 left-0 -translate-x-2/4 -translate-y-2/4 origin-[0%_0%]","top-end":"top-0 right-0 translate-x-2/4 -translate-y-2/4 origin-[100%_0%]","bottom-start":"bottom-0 left-0 -translate-x-2/4 translate-y-2/4 origin-[0%_100%]","bottom-end":"bottom-0 right-0 translate-x-2/4 translate-y-2/4 origin-[100%_100%]"}},ine={base:By.base,disableMargins:By.disableMargins,badge:By.badge,position:By.position,positions:By.positions,colors:{default:"bg-white text-black",primary:"bg-primary text-text-primary",secondary:"bg-secondary text-text-primary",error:"bg-error text-text-primary"}},rne=()=>{let n=[];function e(r){n=[...n,r]}function t(r,s){const o=n.indexOf(r);if(o>-1){const a=n[o];a(!1,s)&&n.splice(o,1)}}function i(r){const s=[];n.forEach(o=>{o(!1,r)||s.push(o)}),n=[...s]}return()=>{const[r,s]=$.useState([]);return $.useEffect(()=>{s(n)},[]),{tooltips:r,deactivateAllTooltips:i,deactivateTooltip:t,addTooltip:e}}},sne=rne(),one=({className:n,children:e,content:t,triggerClassName:i,disabled:r=!1,enterDelay:s=0,leaveDelay:o=200,placement:a="top",trigger:l="hover",animated:c=!0,animation:f,visible:d=!1,followCursor:m=!1,closeOnClick:v=!1,closeOnEscape:b=!0,closeOnBodyClick:x=!0,pointerEvents:w="none",isPopover:_,onOpen:A,onClose:T,theme:E,...C})=>{const{addTooltip:R,deactivateTooltip:O,deactivateAllTooltips:I}=sne(),[L,N]=$.useState(d),V=$.useRef(null),B=$.useRef(!1),k=$.useRef((q,W)=>(W===_&&N(q),W===_));$.useEffect(()=>{B.current?N(d):B.current=!0;const q=k.current,W=V.current;return()=>{clearTimeout(W),O(q,_)}},[O,_,d]);const j=Yn("tooltip",E);return ne.jsx(X6,{...C,placement:a,trigger:l,followCursor:m,triggerClassName:i,portalClassName:w==="none"&&j.disablePointer,open:L,closeOnBodyClick:x,closeOnEscape:b,content:()=>{const q=typeof t=="function"?t():t;return q?ne.jsx(Js.div,{className:tn(j.base,n),...f||{transition:{duration:c?.3:0},initial:{opacity:0,scale:.3,transition:{when:"beforeChildren",duration:c?.3:0}},animate:{opacity:1,scale:1,transition:{when:"beforeChildren",duration:c?.3:0}},exit:{opacity:0,scale:.3,transition:{when:"beforeChildren",duration:c?.3:0}}},onClick:()=>{v&&I(_)},children:q}):null},onOpen:()=>{L||(clearTimeout(V.current),V.current=setTimeout(()=>{r||(I(_),N(!0),R(k.current),A?.())},s))},onClose:q=>{var W,G;(((W=q?.nativeEvent)==null?void 0:W.type)!=="click"||((G=q?.nativeEvent)==null?void 0:G.type)==="click"&&v)&&(clearTimeout(V.current),V.current=setTimeout(()=>{O(k.current,_),T?.()},o))},children:e})},JU={base:"whitespace-nowrap text-center will-change-[transform,opacity] p-1.5 rounded-sm",disablePointer:"pointer-events-none"},ane={...JU,base:[JU.base,"bg-panel-accent text-text-primary"].join(" ")},e2={base:"whitespace-nowrap text-center will-change-[transform,opacity] p-1.5 rounded-sm",disablePadding:"p-0"},lne={...e2,base:[e2.base,"bg-panel text-text-primary"].join(" ")},ow={base:"justify-center items-center flex pointer-events-none top-0 left-0 w-full h-full fixed will-change-transform will-change-opacity",inner:"flex flex-col box-border outline-0 pointer-events-auto overflow-auto max-w-[80vw] max-h-[80vh]",content:"p-[20px] flex-auto overflow-auto",footer:"flex p-[20px] pb-[10px]",header:{base:"flex justify-between pt-[20px] px-[20px] pb-[10px]",text:"flex-1 m-0 p-0 inline-flex text-3xl font-bold",closeButton:"p-0 m-0 ml-[15px] opacity-80 h-auto w-auto inline-flex bg-none border-none cursor-pointer items-center text-[16px] focus:outline-hidden"}},cne={...ow,inner:[ow.inner,"bg-panel text-text-primary border border-panel-accent rounded-sm shadow-2xl"].join(" "),header:{...ow.header,closeButton:[ow.header.closeButton,"text-text-primary"].join(" ")}},fE={base:"fixed overflow-y-auto overflow-x-hidden",header:{base:"flex items-center justify-between px-8 py-5 text-3xl font-bold",text:"flex-1 m-0"},content:"px-8 py-5",disablePadding:"p-0",closeButton:{base:"opacity-80 h-auto w-auto min-w-[auto] min-h-[auto] cursor-pointer text-base p-0 border-0 focus:outline-hidden",headerless:"absolute right-5 top-5"},positions:{top:"w-full inset-x-0 top-0",end:"h-full inset-y-0 right-0",bottom:"w-full inset-x-0 bottom-0",start:"h-full inset-y-0 left-0"}},une={...fE,base:[fE.base,"bg-panel text-text-primary"].join(" ")};({...fE.closeButton,base:[fE.closeButton.base,"text-[var(--drawer-color)]"].join(" ")});Tee([]);const fne={enabled:"cursor-context-menu"},hne={...fne};$.createContext({notify:()=>{},notifyError:()=>{},notifyWarning:()=>{},notifySuccess:()=>{},notifyInfo:()=>{},clearNotification:()=>{},clearAllNotifications:()=>{}});const rc={container:"",positions:"fixed z-9998 h-auto -translate-x-2/4 mb-1 px-24 py-0 left-2/4 bottom-0",notification:{base:"flex relative text-base min-w-[400px] rounded-xs mb-2.5 py-2 px-4",variants:{success:{base:"bg-success-background border border-success",icon:"text-success h-4 w-4"},error:{base:"bg-error-background border border-error",icon:"text-error h-4 w-4"},warning:{base:"bg-warning-background border border-warning",icon:"text-warning h-4 w-4"},info:{base:"bg-info-background border border-info",icon:"text-info h-4 w-4"}},content:"inline-flex items-start flex-1 flex-col justify-center",header:"text-base flex gap-2 items-center",closeContainer:"inline-flex items-center",action:"ml-auto mr-2 items-center flex",closeButton:"cursor-pointer text-sm font-semibold m-0 border-0 text-text-primary hover:text-text-primary/70",body:"opacity-70 text-sm mt-1"}},dne={...rc,notification:{...rc.notification,base:[rc.notification.base,"bg-panel text-text-primary border-panel-accent border"].join(" ")}};({...rc.notification,base:[rc.notification.base,"bg-[var(--notification-background)] border-[var(--notification-border)] text-[var(--notification-color)]"].join(" "),closeButton:[rc.notification.closeButton,"text-[var(--color-on-notification)]"].join(" "),body:[rc.notification.body,"text-[var(--color-on-notification)]"].join(" "),variants:{...rc.notification.variants,success:[rc.notification.variants.success,"text-[var(--notification-color-success)]"].join(" "),error:[rc.notification.variants.error,"text-[var(--notification-color-error)]"].join(" "),warning:[rc.notification.variants.error,"text-[var(--notification-color-warning)]"].join(" ")}});const pne={base:{common:"px-4 py-3 border-b",variant:{default:"bg-panel-background border-panel-accent",success:"bg-success-background border-success",error:"bg-error-background border-error",warning:"bg-warning-background border-warning",info:"bg-info-background border-info"}},icon:{common:"",variant:{default:"",success:"text-success",error:"text-error",warning:"text-warning",info:"text-info"}},text:"text-base"},n8={components:{avatar:Bte,avatarGroup:nne,arrow:ste,badge:ine,button:Fee,block:nte,chip:zte,contextMenu:hne,checkbox:Ste,dateFormat:Hte,dialog:cne,divider:Wee,dotsLoader:Fte,drawer:une,ellipsis:dte,select:Lte,list:tte,menu:Ute,sort:jte,stack:rte,card:ite,kbd:Yte,verticalSpacer:gte,notification:dne,input:td,dateInput:kte,calendar:d_,calendarRange:wte,commandPalette:ene,collapse:qee,textarea:Pte,typography:jee,radio:Ate,range:Cte,redact:Vte,toggle:Ite,tooltip:ane,tree:ote,popover:lne,pager:tne,tabs:bte,jsonTree:e8,breadcrumbs:_te,stepper:xte,callout:pne,backdrop:Nee}};function i8({children:n,element:e,childRef:t,...i}){const r=$.useMemo(()=>a=>{const l=e.props;return Object.keys(a).reduce((c,f)=>{const d=a[f],m=l[f];return typeof d=="function"&&typeof m=="function"?c[f]=(...v)=>(d(...v),m(...v)):f==="className"?c[f]=id(d,m):c[f]=d,c},{})},[i]);if(e===null)return n;const s=t?a=>{typeof t=="function"?t(a):s&&(t.current=a)}:void 0,o=r(i);return $.cloneElement(e,{...e.props,...o,children:n,ref:s})}function mne({viewMode:n,onViewModeChange:e}){return ne.jsx("header",{className:"header",children:ne.jsxs("div",{className:"container header-content",children:[ne.jsxs("div",{children:[ne.jsx("h1",{children:" Salesforce Types Explorer"}),ne.jsx("p",{children:"Interactive visualization of Salesforce metadata type dependencies"})]}),ne.jsxs("div",{className:"view-mode-buttons",children:[ne.jsx(h_,{variant:n==="dashboard"?"filled":"outline",color:n==="dashboard"?"primary":"default",onClick:()=>e("dashboard"),children:" Dashboard"}),ne.jsx(h_,{variant:n==="graph"?"filled":"outline",color:n==="graph"?"primary":"default",onClick:()=>e("graph"),children:" Graph"})]})]})})}function gne({graphData:n,searchQuery:e,setSearchQuery:t,filters:i,onFilterChange:r,onTypeSelect:s,viewMode:o}){const a=$.useMemo(()=>{if(!n)return{totalTypes:0,totalEdges:0,totalCategories:0};const d=new Set(Object.values(n.categories));return{totalTypes:n.nodes.length,totalEdges:n.edges.length,totalCategories:d.size}},[n]),l=$.useMemo(()=>{if(!n)return{};const d={};return Object.entries(n.categories).forEach(([m,v])=>{d[v]||(d[v]=[]),d[v].push(m)}),d},[n]),c=$.useMemo(()=>Object.keys(l).sort(),[l]),f=d=>{const m=l[d];m.length>0&&s(m[0])};return ne.jsxs("aside",{className:"sidebar",children:[ne.jsx("div",{className:"sidebar-section",children:ne.jsx("input",{type:"text",placeholder:"Search types...",value:e,onChange:d=>t(d.target.value),className:"search-input"})}),ne.jsxs("div",{className:"sidebar-section",children:[ne.jsx("h3",{children:"Statistics"}),ne.jsxs("div",{className:"stat-item",children:[ne.jsx("span",{className:"stat-label",children:"Total Types:"}),ne.jsx("span",{className:"stat-value",children:a.totalTypes.toLocaleString()})]}),ne.jsxs("div",{className:"stat-item",children:[ne.jsx("span",{className:"stat-label",children:"Dependencies:"}),ne.jsx("span",{className:"stat-value",children:a.totalEdges.toLocaleString()})]}),ne.jsxs("div",{className:"stat-item",children:[ne.jsx("span",{className:"stat-label",children:"Categories:"}),ne.jsx("span",{className:"stat-value",children:a.totalCategories.toLocaleString()})]})]}),o==="graph"&&ne.jsxs("div",{className:"sidebar-section",children:[ne.jsx("h3",{children:"Relationship Filters"}),ne.jsxs("div",{className:"filter-label",children:[ne.jsx(cC,{checked:i.contains,onChange:d=>r("contains",d.target.checked)}),ne.jsx("span",{className:"relationship-badge contains",children:"Contains"})]}),ne.jsxs("div",{className:"filter-label",children:[ne.jsx(cC,{checked:i.extends,onChange:d=>r("extends",d.target.checked)}),ne.jsx("span",{className:"relationship-badge extends",children:"Extends"})]}),ne.jsxs("div",{className:"filter-label",children:[ne.jsx(cC,{checked:i.generic,onChange:d=>r("generic",d.target.checked)}),ne.jsx("span",{className:"relationship-badge generic",children:"Generic"})]})]}),ne.jsxs("div",{className:"sidebar-section",children:[ne.jsx("h3",{children:"Categories"}),ne.jsx("div",{className:"categories-list",children:c.map(d=>ne.jsxs("div",{className:"category-item",onClick:()=>f(d),children:[d," ",ne.jsxs("span",{style:{opacity:.6},children:["(",l[d].length,")"]})]},d))})]})]})}const IM="180",r8={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},vne={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},s8=0,tD=1,o8=2,yne=3,a8=0,NM=1,Gb=2,sc=3,Hf=0,Po=1,yr=2,Nf=0,Kp=1,nD=2,iD=3,rD=4,l8=5,rd=100,c8=101,u8=102,f8=103,h8=104,d8=200,p8=201,m8=202,g8=203,hE=204,dE=205,v8=206,y8=207,b8=208,_8=209,x8=210,w8=211,S8=212,E8=213,M8=214,pE=0,mE=1,gE=2,am=3,vE=4,yE=5,bE=6,_E=7,J_=0,T8=1,A8=2,vu=0,C8=1,R8=2,D8=3,eL=4,O8=5,L8=6,P8=7,sD="attached",I8="detached",UM=300,jf=301,md=302,p_=303,m_=304,sv=306,g_=1e3,_l=1001,v_=1002,Ds=1003,tL=1004,bne=1004,f0=1005,_ne=1005,br=1006,Hb=1007,xne=1007,hu=1008,wne=1008,Tl=1009,nL=1010,iL=1011,D0=1012,kM=1013,Wf=1014,fa=1015,ov=1016,zM=1017,FM=1018,O0=1020,rL=35902,sL=35899,oL=1021,aL=1022,io=1023,L0=1026,P0=1027,BM=1028,ex=1029,lL=1030,VM=1031,Sne=1032,GM=1033,jb=33776,Wb=33777,$b=33778,qb=33779,xE=35840,wE=35841,SE=35842,EE=35843,ME=36196,TE=37492,AE=37496,CE=37808,RE=37809,DE=37810,OE=37811,LE=37812,PE=37813,IE=37814,NE=37815,UE=37816,kE=37817,zE=37818,FE=37819,BE=37820,VE=37821,GE=36492,HE=36494,jE=36495,WE=36283,$E=36284,qE=36285,XE=36286,N8=2200,U8=2201,k8=2202,y_=2300,YE=2301,RS=2302,Hp=2400,jp=2401,b_=2402,HM=2500,cL=2501,Ene=0,Mne=1,Tne=2,z8=3200,uL=3201,Ane=3202,Cne=3203,Sd=0,F8=1,Cf="",Qs="srgb",gd="srgb-linear",__="linear",mi="srgb",Rne=0,Ip=7680,Dne=7681,One=7682,Lne=7683,Pne=34055,Ine=34056,Nne=5386,Une=512,kne=513,zne=514,Fne=515,Bne=516,Vne=517,Gne=518,oD=519,B8=512,V8=513,G8=514,fL=515,H8=516,j8=517,W8=518,$8=519,x_=35044,Hne=35048,jne=35040,Wne=35045,$ne=35049,qne=35041,Xne=35046,Yne=35050,Zne=35042,Kne="100",aD="300 es",Oa=2e3,I0=2001,Qne={COMPUTE:"compute",RENDER:"render"},Jne={PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},eie={NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FIRST:"first",EITHER:"either"};let Eu=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){const i=this._listeners;return i===void 0?!1:i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){const i=this._listeners;if(i===void 0)return;const r=i[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){const t=this._listeners;if(t===void 0)return;const i=t[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}};const qs=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let t2=1234567;const Qp=Math.PI/180,N0=180/Math.PI;function Pa(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(qs[n&255]+qs[n>>8&255]+qs[n>>16&255]+qs[n>>24&255]+"-"+qs[e&255]+qs[e>>8&255]+"-"+qs[e>>16&15|64]+qs[e>>24&255]+"-"+qs[t&63|128]+qs[t>>8&255]+"-"+qs[t>>16&255]+qs[t>>24&255]+qs[i&255]+qs[i>>8&255]+qs[i>>16&255]+qs[i>>24&255]).toLowerCase()}function Qt(n,e,t){return Math.max(e,Math.min(t,n))}function hL(n,e){return(n%e+e)%e}function tie(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function nie(n,e,t){return n!==e?(t-n)/(e-n):0}function Xb(n,e,t){return(1-t)*n+t*e}function iie(n,e,t,i){return Xb(n,e,1-Math.exp(-t*i))}function rie(n,e=1){return e-Math.abs(hL(n,e*2)-e)}function sie(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function oie(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function aie(n,e){return n+Math.floor(Math.random()*(e-n+1))}function lie(n,e){return n+Math.random()*(e-n)}function cie(n){return n*(.5-Math.random())}function uie(n){n!==void 0&&(t2=n);let e=t2+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function fie(n){return n*Qp}function hie(n){return n*N0}function die(n){return(n&n-1)===0&&n!==0}function pie(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function mie(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function gie(n,e,t,i,r){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),c=s((e+i)/2),f=o((e+i)/2),d=s((e-i)/2),m=o((e-i)/2),v=s((i-e)/2),b=o((i-e)/2);switch(r){case"XYX":n.set(a*f,l*d,l*m,a*c);break;case"YZY":n.set(l*m,a*f,l*d,a*c);break;case"ZXZ":n.set(l*d,l*m,a*f,a*c);break;case"XZX":n.set(a*f,l*b,l*v,a*c);break;case"YXY":n.set(l*v,a*f,l*b,a*c);break;case"ZYZ":n.set(l*b,l*v,a*f,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function Co(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function _n(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const ZE={DEG2RAD:Qp,RAD2DEG:N0,generateUUID:Pa,clamp:Qt,euclideanModulo:hL,mapLinear:tie,inverseLerp:nie,lerp:Xb,damp:iie,pingpong:rie,smoothstep:sie,smootherstep:oie,randInt:aie,randFloat:lie,randFloatSpread:cie,seededRandom:uie,degToRad:fie,radToDeg:hie,isPowerOfTwo:die,ceilPowerOfTwo:pie,floorPowerOfTwo:mie,setQuaternionFromProperEuler:gie,normalize:_n,denormalize:Co};class ut{constructor(e=0,t=0){ut.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Qt(this.x,e.x,t.x),this.y=Qt(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=Qt(this.x,e,t),this.y=Qt(this.y,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Qt(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Qt(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Os{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,o,a){let l=i[r+0],c=i[r+1],f=i[r+2],d=i[r+3];const m=s[o+0],v=s[o+1],b=s[o+2],x=s[o+3];if(a===0){e[t+0]=l,e[t+1]=c,e[t+2]=f,e[t+3]=d;return}if(a===1){e[t+0]=m,e[t+1]=v,e[t+2]=b,e[t+3]=x;return}if(d!==x||l!==m||c!==v||f!==b){let w=1-a;const _=l*m+c*v+f*b+d*x,A=_>=0?1:-1,T=1-_*_;if(T>Number.EPSILON){const C=Math.sqrt(T),R=Math.atan2(C,_*A);w=Math.sin(w*R)/C,a=Math.sin(a*R)/C}const E=a*A;if(l=l*w+m*E,c=c*w+v*E,f=f*w+b*E,d=d*w+x*E,w===1-a){const C=1/Math.sqrt(l*l+c*c+f*f+d*d);l*=C,c*=C,f*=C,d*=C}}e[t]=l,e[t+1]=c,e[t+2]=f,e[t+3]=d}static multiplyQuaternionsFlat(e,t,i,r,s,o){const a=i[r],l=i[r+1],c=i[r+2],f=i[r+3],d=s[o],m=s[o+1],v=s[o+2],b=s[o+3];return e[t]=a*b+f*d+l*v-c*m,e[t+1]=l*b+f*m+c*d-a*v,e[t+2]=c*b+f*v+a*m-l*d,e[t+3]=f*b-a*d-l*m-c*v,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(i/2),f=a(r/2),d=a(s/2),m=l(i/2),v=l(r/2),b=l(s/2);switch(o){case"XYZ":this._x=m*f*d+c*v*b,this._y=c*v*d-m*f*b,this._z=c*f*b+m*v*d,this._w=c*f*d-m*v*b;break;case"YXZ":this._x=m*f*d+c*v*b,this._y=c*v*d-m*f*b,this._z=c*f*b-m*v*d,this._w=c*f*d+m*v*b;break;case"ZXY":this._x=m*f*d-c*v*b,this._y=c*v*d+m*f*b,this._z=c*f*b+m*v*d,this._w=c*f*d-m*v*b;break;case"ZYX":this._x=m*f*d-c*v*b,this._y=c*v*d+m*f*b,this._z=c*f*b-m*v*d,this._w=c*f*d+m*v*b;break;case"YZX":this._x=m*f*d+c*v*b,this._y=c*v*d+m*f*b,this._z=c*f*b-m*v*d,this._w=c*f*d-m*v*b;break;case"XZY":this._x=m*f*d-c*v*b,this._y=c*v*d-m*f*b,this._z=c*f*b+m*v*d,this._w=c*f*d+m*v*b;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],o=t[1],a=t[5],l=t[9],c=t[2],f=t[6],d=t[10],m=i+a+d;if(m>0){const v=.5/Math.sqrt(m+1);this._w=.25/v,this._x=(f-l)*v,this._y=(s-c)*v,this._z=(o-r)*v}else if(i>a&&i>d){const v=2*Math.sqrt(1+i-a-d);this._w=(f-l)/v,this._x=.25*v,this._y=(r+o)/v,this._z=(s+c)/v}else if(a>d){const v=2*Math.sqrt(1+a-i-d);this._w=(s-c)/v,this._x=(r+o)/v,this._y=.25*v,this._z=(l+f)/v}else{const v=2*Math.sqrt(1+d-i-a);this._w=(o-r)/v,this._x=(s+c)/v,this._y=(l+f)/v,this._z=.25*v}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<1e-8?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Qt(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,o=e._w,a=t._x,l=t._y,c=t._z,f=t._w;return this._x=i*f+o*a+r*c-s*l,this._y=r*f+o*l+s*a-i*c,this._z=s*f+o*c+i*l-r*a,this._w=o*f-i*a-r*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+i*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const v=1-t;return this._w=v*o+t*this._w,this._x=v*i+t*this._x,this._y=v*r+t*this._y,this._z=v*s+t*this._z,this.normalize(),this}const c=Math.sqrt(l),f=Math.atan2(c,a),d=Math.sin((1-t)*f)/c,m=Math.sin(t*f)/c;return this._w=o*d+this._w*m,this._x=i*d+this._x*m,this._y=r*d+this._y*m,this._z=s*d+this._z*m,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),s=Math.sqrt(i);return this.set(r*Math.sin(e),r*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class de{constructor(e=0,t=0,i=0){de.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(n2.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(n2.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=2*(o*r-a*i),f=2*(a*t-s*r),d=2*(s*i-o*t);return this.x=t+l*c+o*d-a*f,this.y=i+l*f+a*c-s*d,this.z=r+l*d+s*f-o*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Qt(this.x,e.x,t.x),this.y=Qt(this.y,e.y,t.y),this.z=Qt(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=Qt(this.x,e,t),this.y=Qt(this.y,e,t),this.z=Qt(this.z,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Qt(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=r*l-s*a,this.y=s*o-i*l,this.z=i*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return dC.copy(this).projectOnVector(e),this.sub(dC)}reflect(e){return this.sub(dC.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Qt(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const dC=new de,n2=new Os;class un{constructor(e,t,i,r,s,o,a,l,c){un.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,o,a,l,c)}set(e,t,i,r,s,o,a,l,c){const f=this.elements;return f[0]=e,f[1]=r,f[2]=a,f[3]=t,f[4]=s,f[5]=l,f[6]=i,f[7]=o,f[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[3],l=i[6],c=i[1],f=i[4],d=i[7],m=i[2],v=i[5],b=i[8],x=r[0],w=r[3],_=r[6],A=r[1],T=r[4],E=r[7],C=r[2],R=r[5],O=r[8];return s[0]=o*x+a*A+l*C,s[3]=o*w+a*T+l*R,s[6]=o*_+a*E+l*O,s[1]=c*x+f*A+d*C,s[4]=c*w+f*T+d*R,s[7]=c*_+f*E+d*O,s[2]=m*x+v*A+b*C,s[5]=m*w+v*T+b*R,s[8]=m*_+v*E+b*O,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],f=e[8];return t*o*f-t*a*c-i*s*f+i*a*l+r*s*c-r*o*l}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],f=e[8],d=f*o-a*c,m=a*l-f*s,v=c*s-o*l,b=t*d+i*m+r*v;if(b===0)return this.set(0,0,0,0,0,0,0,0,0);const x=1/b;return e[0]=d*x,e[1]=(r*c-f*i)*x,e[2]=(a*i-r*o)*x,e[3]=m*x,e[4]=(f*t-r*l)*x,e[5]=(r*s-a*t)*x,e[6]=v*x,e[7]=(i*l-c*t)*x,e[8]=(o*t-i*s)*x,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(i*l,i*c,-i*(l*o+c*a)+o+e,-r*c,r*l,-r*(-c*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(pC.makeScale(e,t)),this}rotate(e){return this.premultiply(pC.makeRotation(-e)),this}translate(e,t){return this.premultiply(pC.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const pC=new un;function q8(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const vie={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function h0(n,e){return new vie[n](e)}function w_(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function X8(){const n=w_("canvas");return n.style.display="block",n}const i2={};function S_(n){n in i2||(i2[n]=!0,console.warn(n))}function yie(n,e,t){return new Promise(function(i,r){function s(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:r();break;case n.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:i()}}setTimeout(s,t)})}const r2=new un().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),s2=new un().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function bie(){const n={enabled:!0,workingColorSpace:gd,spaces:{},convert:function(r,s,o){return this.enabled===!1||s===o||!s||!o||(this.spaces[s].transfer===mi&&(r.r=Uf(r.r),r.g=Uf(r.g),r.b=Uf(r.b)),this.spaces[s].primaries!==this.spaces[o].primaries&&(r.applyMatrix3(this.spaces[s].toXYZ),r.applyMatrix3(this.spaces[o].fromXYZ)),this.spaces[o].transfer===mi&&(r.r=w0(r.r),r.g=w0(r.g),r.b=w0(r.b))),r},workingToColorSpace:function(r,s){return this.convert(r,this.workingColorSpace,s)},colorSpaceToWorking:function(r,s){return this.convert(r,s,this.workingColorSpace)},getPrimaries:function(r){return this.spaces[r].primaries},getTransfer:function(r){return r===Cf?__:this.spaces[r].transfer},getToneMappingMode:function(r){return this.spaces[r].outputColorSpaceConfig.toneMappingMode||"standard"},getLuminanceCoefficients:function(r,s=this.workingColorSpace){return r.fromArray(this.spaces[s].luminanceCoefficients)},define:function(r){Object.assign(this.spaces,r)},_getMatrix:function(r,s,o){return r.copy(this.spaces[s].toXYZ).multiply(this.spaces[o].fromXYZ)},_getDrawingBufferColorSpace:function(r){return this.spaces[r].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(r=this.workingColorSpace){return this.spaces[r].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(r,s){return S_("THREE.ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),n.workingToColorSpace(r,s)},toWorkingColorSpace:function(r,s){return S_("THREE.ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),n.colorSpaceToWorking(r,s)}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],i=[.3127,.329];return n.define({[gd]:{primaries:e,whitePoint:i,transfer:__,toXYZ:r2,fromXYZ:s2,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:Qs},outputColorSpaceConfig:{drawingBufferColorSpace:Qs}},[Qs]:{primaries:e,whitePoint:i,transfer:mi,toXYZ:r2,fromXYZ:s2,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:Qs}}}),n}const Wn=bie();function Uf(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function w0(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let Eg;class Y8{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let i;if(e instanceof HTMLCanvasElement)i=e;else{Eg===void 0&&(Eg=w_("canvas")),Eg.width=e.width,Eg.height=e.height;const r=Eg.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),i=Eg}return i.toDataURL(t)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=w_("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=Uf(s[o]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(Uf(t[i]/255)*255):t[i]=Uf(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let _ie=0;class ad{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:_ie++}),this.uuid=Pa(),this.data=e,this.dataReady=!0,this.version=0}getSize(e){const t=this.data;return typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement?e.set(t.videoWidth,t.videoHeight,0):t instanceof VideoFrame?e.set(t.displayHeight,t.displayWidth,0):t!==null?e.set(t.width,t.height,t.depth||0):e.set(0,0,0),e}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)r[o].isDataTexture?s.push(mC(r[o].image)):s.push(mC(r[o]))}else s=mC(r);i.url=s}return t||(e.images[this.uuid]=i),i}}function mC(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?Y8.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let xie=0;const gC=new de;class ur extends Eu{constructor(e=ur.DEFAULT_IMAGE,t=ur.DEFAULT_MAPPING,i=_l,r=_l,s=br,o=hu,a=io,l=Tl,c=ur.DEFAULT_ANISOTROPY,f=Cf){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:xie++}),this.uuid=Pa(),this.name="",this.source=new ad(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=o,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new ut(0,0),this.repeat=new ut(1,1),this.center=new ut(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new un,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=f,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(e&&e.depth&&e.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(gC).x}get height(){return this.source.getSize(gC).y}get depth(){return this.source.getSize(gC).z}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isArrayTexture=e.isArrayTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}setValues(e){for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Texture.setValues(): parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Texture.setValues(): property '${t}' does not exist.`);continue}r&&i&&r.isVector2&&i.isVector2||r&&i&&r.isVector3&&i.isVector3||r&&i&&r.isMatrix3&&i.isMatrix3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==UM)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case g_:e.x=e.x-Math.floor(e.x);break;case _l:e.x=e.x<0?0:1;break;case v_:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case g_:e.y=e.y-Math.floor(e.y);break;case _l:e.y=e.y<0?0:1;break;case v_:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}ur.DEFAULT_IMAGE=null;ur.DEFAULT_MAPPING=UM;ur.DEFAULT_ANISOTROPY=1;class Gn{constructor(e=0,t=0,i=0,r=1){Gn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*i+o[11]*r+o[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const l=e.elements,c=l[0],f=l[4],d=l[8],m=l[1],v=l[5],b=l[9],x=l[2],w=l[6],_=l[10];if(Math.abs(f-m)<.01&&Math.abs(d-x)<.01&&Math.abs(b-w)<.01){if(Math.abs(f+m)<.1&&Math.abs(d+x)<.1&&Math.abs(b+w)<.1&&Math.abs(c+v+_-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const T=(c+1)/2,E=(v+1)/2,C=(_+1)/2,R=(f+m)/4,O=(d+x)/4,I=(b+w)/4;return T>E&&T>C?T<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(T),r=R/i,s=O/i):E>C?E<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(E),i=R/r,s=I/r):C<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(C),i=O/s,r=I/s),this.set(i,r,s,t),this}let A=Math.sqrt((w-b)*(w-b)+(d-x)*(d-x)+(m-f)*(m-f));return Math.abs(A)<.001&&(A=1),this.x=(w-b)/A,this.y=(d-x)/A,this.z=(m-f)/A,this.w=Math.acos((c+v+_-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Qt(this.x,e.x,t.x),this.y=Qt(this.y,e.y,t.y),this.z=Qt(this.z,e.z,t.z),this.w=Qt(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=Qt(this.x,e,t),this.y=Qt(this.y,e,t),this.z=Qt(this.z,e,t),this.w=Qt(this.w,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Qt(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class dL extends Eu{constructor(e=1,t=1,i={}){super(),i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:br,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},i),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=i.depth,this.scissor=new Gn(0,0,e,t),this.scissorTest=!1,this.viewport=new Gn(0,0,e,t);const r={width:e,height:t,depth:i.depth},s=new ur(r);this.textures=[];const o=i.count;for(let a=0;a<o;a++)this.textures[a]=s.clone(),this.textures[a].isRenderTargetTexture=!0,this.textures[a].renderTarget=this;this._setTextureOptions(i),this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=i.depthTexture,this.samples=i.samples,this.multiview=i.multiview}_setTextureOptions(e={}){const t={minFilter:br,generateMipmaps:!1,flipY:!1,internalFormat:null};e.mapping!==void 0&&(t.mapping=e.mapping),e.wrapS!==void 0&&(t.wrapS=e.wrapS),e.wrapT!==void 0&&(t.wrapT=e.wrapT),e.wrapR!==void 0&&(t.wrapR=e.wrapR),e.magFilter!==void 0&&(t.magFilter=e.magFilter),e.minFilter!==void 0&&(t.minFilter=e.minFilter),e.format!==void 0&&(t.format=e.format),e.type!==void 0&&(t.type=e.type),e.anisotropy!==void 0&&(t.anisotropy=e.anisotropy),e.colorSpace!==void 0&&(t.colorSpace=e.colorSpace),e.flipY!==void 0&&(t.flipY=e.flipY),e.generateMipmaps!==void 0&&(t.generateMipmaps=e.generateMipmaps),e.internalFormat!==void 0&&(t.internalFormat=e.internalFormat);for(let i=0;i<this.textures.length;i++)this.textures[i].setValues(t)}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,s=this.textures.length;r<s;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=i,this.textures[r].isArrayTexture=this.textures[r].image.depth>1;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,i=e.textures.length;t<i;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const r=Object.assign({},e.textures[t].image);this.textures[t].source=new ad(r)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class wu extends dL{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class jM extends ur{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Ds,this.minFilter=Ds,this.wrapR=_l,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class wie extends wu{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new jM(null,e,t,i),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}}class WM extends ur{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Ds,this.minFilter=Ds,this.wrapR=_l,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Sie extends wu{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new WM(null,e,t,i),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}}class Vr{constructor(e=new de(1/0,1/0,1/0),t=new de(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(Yl.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(Yl.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=Yl.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const s=i.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=s.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,Yl):Yl.fromBufferAttribute(s,o),Yl.applyMatrix4(e.matrixWorld),this.expandByPoint(Yl);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),aw.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),aw.copy(i.boundingBox)),aw.applyMatrix4(e.matrixWorld),this.union(aw)}const r=e.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Yl),Yl.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Vy),lw.subVectors(this.max,Vy),Mg.subVectors(e.a,Vy),Tg.subVectors(e.b,Vy),Ag.subVectors(e.c,Vy),Vh.subVectors(Tg,Mg),Gh.subVectors(Ag,Tg),up.subVectors(Mg,Ag);let t=[0,-Vh.z,Vh.y,0,-Gh.z,Gh.y,0,-up.z,up.y,Vh.z,0,-Vh.x,Gh.z,0,-Gh.x,up.z,0,-up.x,-Vh.y,Vh.x,0,-Gh.y,Gh.x,0,-up.y,up.x,0];return!vC(t,Mg,Tg,Ag,lw)||(t=[1,0,0,0,1,0,0,0,1],!vC(t,Mg,Tg,Ag,lw))?!1:(cw.crossVectors(Vh,Gh),t=[cw.x,cw.y,cw.z],vC(t,Mg,Tg,Ag,lw))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Yl).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Yl).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(hf[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),hf[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),hf[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),hf[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),hf[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),hf[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),hf[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),hf[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(hf),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}}const hf=[new de,new de,new de,new de,new de,new de,new de,new de],Yl=new de,aw=new Vr,Mg=new de,Tg=new de,Ag=new de,Vh=new de,Gh=new de,up=new de,Vy=new de,lw=new de,cw=new de,fp=new de;function vC(n,e,t,i,r){for(let s=0,o=n.length-3;s<=o;s+=3){fp.fromArray(n,s);const a=r.x*Math.abs(fp.x)+r.y*Math.abs(fp.y)+r.z*Math.abs(fp.z),l=e.dot(fp),c=t.dot(fp),f=i.dot(fp);if(Math.max(-Math.max(l,c,f),Math.min(l,c,f))>a)return!1}return!0}const Eie=new Vr,Gy=new de,yC=new de;let ts=class{constructor(e=new de,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):Eie.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Gy.subVectors(e,this.center);const t=Gy.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(Gy,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(yC.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Gy.copy(e.center).add(yC)),this.expandByPoint(Gy.copy(e.center).sub(yC))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(e){return this.radius=e.radius,this.center.fromArray(e.center),this}};const df=new de,bC=new de,uw=new de,Hh=new de,_C=new de,fw=new de,xC=new de;class av{constructor(e=new de,t=new de(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,df)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=df.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(df.copy(this.origin).addScaledVector(this.direction,t),df.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){bC.copy(e).add(t).multiplyScalar(.5),uw.copy(t).sub(e).normalize(),Hh.copy(this.origin).sub(bC);const s=e.distanceTo(t)*.5,o=-this.direction.dot(uw),a=Hh.dot(this.direction),l=-Hh.dot(uw),c=Hh.lengthSq(),f=Math.abs(1-o*o);let d,m,v,b;if(f>0)if(d=o*l-a,m=o*a-l,b=s*f,d>=0)if(m>=-b)if(m<=b){const x=1/f;d*=x,m*=x,v=d*(d+o*m+2*a)+m*(o*d+m+2*l)+c}else m=s,d=Math.max(0,-(o*m+a)),v=-d*d+m*(m+2*l)+c;else m=-s,d=Math.max(0,-(o*m+a)),v=-d*d+m*(m+2*l)+c;else m<=-b?(d=Math.max(0,-(-o*s+a)),m=d>0?-s:Math.min(Math.max(-s,-l),s),v=-d*d+m*(m+2*l)+c):m<=b?(d=0,m=Math.min(Math.max(-s,-l),s),v=m*(m+2*l)+c):(d=Math.max(0,-(o*s+a)),m=d>0?s:Math.min(Math.max(-s,-l),s),v=-d*d+m*(m+2*l)+c);else m=o>0?-s:s,d=Math.max(0,-(o*m+a)),v=-d*d+m*(m+2*l)+c;return i&&i.copy(this.origin).addScaledVector(this.direction,d),r&&r.copy(bC).addScaledVector(uw,m),v}intersectSphere(e,t){df.subVectors(e.center,this.origin);const i=df.dot(this.direction),r=df.dot(df)-i*i,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=i-o,l=i+o;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return e.radius<0?!1:this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,o,a,l;const c=1/this.direction.x,f=1/this.direction.y,d=1/this.direction.z,m=this.origin;return c>=0?(i=(e.min.x-m.x)*c,r=(e.max.x-m.x)*c):(i=(e.max.x-m.x)*c,r=(e.min.x-m.x)*c),f>=0?(s=(e.min.y-m.y)*f,o=(e.max.y-m.y)*f):(s=(e.max.y-m.y)*f,o=(e.min.y-m.y)*f),i>o||s>r||((s>i||isNaN(i))&&(i=s),(o<r||isNaN(r))&&(r=o),d>=0?(a=(e.min.z-m.z)*d,l=(e.max.z-m.z)*d):(a=(e.max.z-m.z)*d,l=(e.min.z-m.z)*d),i>l||a>r)||((a>i||i!==i)&&(i=a),(l<r||r!==r)&&(r=l),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,df)!==null}intersectTriangle(e,t,i,r,s){_C.subVectors(t,e),fw.subVectors(i,e),xC.crossVectors(_C,fw);let o=this.direction.dot(xC),a;if(o>0){if(r)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Hh.subVectors(this.origin,e);const l=a*this.direction.dot(fw.crossVectors(Hh,fw));if(l<0)return null;const c=a*this.direction.dot(_C.cross(Hh));if(c<0||l+c>o)return null;const f=-a*Hh.dot(xC);return f<0?null:this.at(f/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Kt{constructor(e,t,i,r,s,o,a,l,c,f,d,m,v,b,x,w){Kt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,o,a,l,c,f,d,m,v,b,x,w)}set(e,t,i,r,s,o,a,l,c,f,d,m,v,b,x,w){const _=this.elements;return _[0]=e,_[4]=t,_[8]=i,_[12]=r,_[1]=s,_[5]=o,_[9]=a,_[13]=l,_[2]=c,_[6]=f,_[10]=d,_[14]=m,_[3]=v,_[7]=b,_[11]=x,_[15]=w,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Kt().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/Cg.setFromMatrixColumn(e,0).length(),s=1/Cg.setFromMatrixColumn(e,1).length(),o=1/Cg.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),a=Math.sin(i),l=Math.cos(r),c=Math.sin(r),f=Math.cos(s),d=Math.sin(s);if(e.order==="XYZ"){const m=o*f,v=o*d,b=a*f,x=a*d;t[0]=l*f,t[4]=-l*d,t[8]=c,t[1]=v+b*c,t[5]=m-x*c,t[9]=-a*l,t[2]=x-m*c,t[6]=b+v*c,t[10]=o*l}else if(e.order==="YXZ"){const m=l*f,v=l*d,b=c*f,x=c*d;t[0]=m+x*a,t[4]=b*a-v,t[8]=o*c,t[1]=o*d,t[5]=o*f,t[9]=-a,t[2]=v*a-b,t[6]=x+m*a,t[10]=o*l}else if(e.order==="ZXY"){const m=l*f,v=l*d,b=c*f,x=c*d;t[0]=m-x*a,t[4]=-o*d,t[8]=b+v*a,t[1]=v+b*a,t[5]=o*f,t[9]=x-m*a,t[2]=-o*c,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const m=o*f,v=o*d,b=a*f,x=a*d;t[0]=l*f,t[4]=b*c-v,t[8]=m*c+x,t[1]=l*d,t[5]=x*c+m,t[9]=v*c-b,t[2]=-c,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const m=o*l,v=o*c,b=a*l,x=a*c;t[0]=l*f,t[4]=x-m*d,t[8]=b*d+v,t[1]=d,t[5]=o*f,t[9]=-a*f,t[2]=-c*f,t[6]=v*d+b,t[10]=m-x*d}else if(e.order==="XZY"){const m=o*l,v=o*c,b=a*l,x=a*c;t[0]=l*f,t[4]=-d,t[8]=c*f,t[1]=m*d+x,t[5]=o*f,t[9]=v*d-b,t[2]=b*d-v,t[6]=a*f,t[10]=x*d+m}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Mie,e,Tie)}lookAt(e,t,i){const r=this.elements;return Ta.subVectors(e,t),Ta.lengthSq()===0&&(Ta.z=1),Ta.normalize(),jh.crossVectors(i,Ta),jh.lengthSq()===0&&(Math.abs(i.z)===1?Ta.x+=1e-4:Ta.z+=1e-4,Ta.normalize(),jh.crossVectors(i,Ta)),jh.normalize(),hw.crossVectors(Ta,jh),r[0]=jh.x,r[4]=hw.x,r[8]=Ta.x,r[1]=jh.y,r[5]=hw.y,r[9]=Ta.y,r[2]=jh.z,r[6]=hw.z,r[10]=Ta.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[4],l=i[8],c=i[12],f=i[1],d=i[5],m=i[9],v=i[13],b=i[2],x=i[6],w=i[10],_=i[14],A=i[3],T=i[7],E=i[11],C=i[15],R=r[0],O=r[4],I=r[8],L=r[12],N=r[1],V=r[5],B=r[9],k=r[13],j=r[2],q=r[6],W=r[10],G=r[14],K=r[3],te=r[7],ie=r[11],F=r[15];return s[0]=o*R+a*N+l*j+c*K,s[4]=o*O+a*V+l*q+c*te,s[8]=o*I+a*B+l*W+c*ie,s[12]=o*L+a*k+l*G+c*F,s[1]=f*R+d*N+m*j+v*K,s[5]=f*O+d*V+m*q+v*te,s[9]=f*I+d*B+m*W+v*ie,s[13]=f*L+d*k+m*G+v*F,s[2]=b*R+x*N+w*j+_*K,s[6]=b*O+x*V+w*q+_*te,s[10]=b*I+x*B+w*W+_*ie,s[14]=b*L+x*k+w*G+_*F,s[3]=A*R+T*N+E*j+C*K,s[7]=A*O+T*V+E*q+C*te,s[11]=A*I+T*B+E*W+C*ie,s[15]=A*L+T*k+E*G+C*F,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],f=e[2],d=e[6],m=e[10],v=e[14],b=e[3],x=e[7],w=e[11],_=e[15];return b*(+s*l*d-r*c*d-s*a*m+i*c*m+r*a*v-i*l*v)+x*(+t*l*v-t*c*m+s*o*m-r*o*v+r*c*f-s*l*f)+w*(+t*c*d-t*a*v-s*o*d+i*o*v+s*a*f-i*c*f)+_*(-r*a*f-t*l*d+t*a*m+r*o*d-i*o*m+i*l*f)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],f=e[8],d=e[9],m=e[10],v=e[11],b=e[12],x=e[13],w=e[14],_=e[15],A=d*w*c-x*m*c+x*l*v-a*w*v-d*l*_+a*m*_,T=b*m*c-f*w*c-b*l*v+o*w*v+f*l*_-o*m*_,E=f*x*c-b*d*c+b*a*v-o*x*v-f*a*_+o*d*_,C=b*d*l-f*x*l-b*a*m+o*x*m+f*a*w-o*d*w,R=t*A+i*T+r*E+s*C;if(R===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const O=1/R;return e[0]=A*O,e[1]=(x*m*s-d*w*s-x*r*v+i*w*v+d*r*_-i*m*_)*O,e[2]=(a*w*s-x*l*s+x*r*c-i*w*c-a*r*_+i*l*_)*O,e[3]=(d*l*s-a*m*s-d*r*c+i*m*c+a*r*v-i*l*v)*O,e[4]=T*O,e[5]=(f*w*s-b*m*s+b*r*v-t*w*v-f*r*_+t*m*_)*O,e[6]=(b*l*s-o*w*s-b*r*c+t*w*c+o*r*_-t*l*_)*O,e[7]=(o*m*s-f*l*s+f*r*c-t*m*c-o*r*v+t*l*v)*O,e[8]=E*O,e[9]=(b*d*s-f*x*s-b*i*v+t*x*v+f*i*_-t*d*_)*O,e[10]=(o*x*s-b*a*s+b*i*c-t*x*c-o*i*_+t*a*_)*O,e[11]=(f*a*s-o*d*s-f*i*c+t*d*c+o*i*v-t*a*v)*O,e[12]=C*O,e[13]=(f*x*r-b*d*r+b*i*m-t*x*m-f*i*w+t*d*w)*O,e[14]=(b*a*r-o*x*r-b*i*l+t*x*l+o*i*w-t*a*w)*O,e[15]=(o*d*r-f*a*r+f*i*l-t*d*l-o*i*m+t*a*m)*O,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,o=e.x,a=e.y,l=e.z,c=s*o,f=s*a;return this.set(c*o+i,c*a-r*l,c*l+r*a,0,c*a+r*l,f*a+i,f*l-r*o,0,c*l-r*a,f*l+r*o,s*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,c=s+s,f=o+o,d=a+a,m=s*c,v=s*f,b=s*d,x=o*f,w=o*d,_=a*d,A=l*c,T=l*f,E=l*d,C=i.x,R=i.y,O=i.z;return r[0]=(1-(x+_))*C,r[1]=(v+E)*C,r[2]=(b-T)*C,r[3]=0,r[4]=(v-E)*R,r[5]=(1-(m+_))*R,r[6]=(w+A)*R,r[7]=0,r[8]=(b+T)*O,r[9]=(w-A)*O,r[10]=(1-(m+x))*O,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=Cg.set(r[0],r[1],r[2]).length();const o=Cg.set(r[4],r[5],r[6]).length(),a=Cg.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],Zl.copy(this);const c=1/s,f=1/o,d=1/a;return Zl.elements[0]*=c,Zl.elements[1]*=c,Zl.elements[2]*=c,Zl.elements[4]*=f,Zl.elements[5]*=f,Zl.elements[6]*=f,Zl.elements[8]*=d,Zl.elements[9]*=d,Zl.elements[10]*=d,t.setFromRotationMatrix(Zl),i.x=s,i.y=o,i.z=a,this}makePerspective(e,t,i,r,s,o,a=Oa,l=!1){const c=this.elements,f=2*s/(t-e),d=2*s/(i-r),m=(t+e)/(t-e),v=(i+r)/(i-r);let b,x;if(l)b=s/(o-s),x=o*s/(o-s);else if(a===Oa)b=-(o+s)/(o-s),x=-2*o*s/(o-s);else if(a===I0)b=-o/(o-s),x=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return c[0]=f,c[4]=0,c[8]=m,c[12]=0,c[1]=0,c[5]=d,c[9]=v,c[13]=0,c[2]=0,c[6]=0,c[10]=b,c[14]=x,c[3]=0,c[7]=0,c[11]=-1,c[15]=0,this}makeOrthographic(e,t,i,r,s,o,a=Oa,l=!1){const c=this.elements,f=2/(t-e),d=2/(i-r),m=-(t+e)/(t-e),v=-(i+r)/(i-r);let b,x;if(l)b=1/(o-s),x=o/(o-s);else if(a===Oa)b=-2/(o-s),x=-(o+s)/(o-s);else if(a===I0)b=-1/(o-s),x=-s/(o-s);else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return c[0]=f,c[4]=0,c[8]=0,c[12]=m,c[1]=0,c[5]=d,c[9]=0,c[13]=v,c[2]=0,c[6]=0,c[10]=b,c[14]=x,c[3]=0,c[7]=0,c[11]=0,c[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const Cg=new de,Zl=new Kt,Mie=new de(0,0,0),Tie=new de(1,1,1),jh=new de,hw=new de,Ta=new de,o2=new Kt,a2=new Os;class Io{constructor(e=0,t=0,i=0,r=Io.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,s=r[0],o=r[4],a=r[8],l=r[1],c=r[5],f=r[9],d=r[2],m=r[6],v=r[10];switch(t){case"XYZ":this._y=Math.asin(Qt(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-f,v),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(m,c),this._z=0);break;case"YXZ":this._x=Math.asin(-Qt(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(a,v),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-d,s),this._z=0);break;case"ZXY":this._x=Math.asin(Qt(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(-d,v),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-Qt(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(m,v),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(Qt(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-f,c),this._y=Math.atan2(-d,s)):(this._x=0,this._y=Math.atan2(a,v));break;case"XZY":this._z=Math.asin(-Qt(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(m,c),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-f,v),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return o2.makeRotationFromQuaternion(e),this.setFromRotationMatrix(o2,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return a2.setFromEuler(this),this.setFromQuaternion(a2,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Io.DEFAULT_ORDER="XYZ";class U0{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let Aie=0;const l2=new de,Rg=new Os,pf=new Kt,dw=new de,Hy=new de,Cie=new de,Rie=new Os,c2=new de(1,0,0),u2=new de(0,1,0),f2=new de(0,0,1),h2={type:"added"},Die={type:"removed"},Dg={type:"childadded",child:null},wC={type:"childremoved",child:null};class Jn extends Eu{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Aie++}),this.uuid=Pa(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Jn.DEFAULT_UP.clone();const e=new de,t=new Io,i=new Os,r=new de(1,1,1);function s(){i.setFromEuler(t,!1)}function o(){t.setFromQuaternion(i,void 0,!1)}t._onChange(s),i._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Kt},normalMatrix:{value:new un}}),this.matrix=new Kt,this.matrixWorld=new Kt,this.matrixAutoUpdate=Jn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Jn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new U0,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Rg.setFromAxisAngle(e,t),this.quaternion.multiply(Rg),this}rotateOnWorldAxis(e,t){return Rg.setFromAxisAngle(e,t),this.quaternion.premultiply(Rg),this}rotateX(e){return this.rotateOnAxis(c2,e)}rotateY(e){return this.rotateOnAxis(u2,e)}rotateZ(e){return this.rotateOnAxis(f2,e)}translateOnAxis(e,t){return l2.copy(e).applyQuaternion(this.quaternion),this.position.add(l2.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(c2,e)}translateY(e){return this.translateOnAxis(u2,e)}translateZ(e){return this.translateOnAxis(f2,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(pf.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?dw.copy(e):dw.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),Hy.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?pf.lookAt(Hy,dw,this.up):pf.lookAt(dw,Hy,this.up),this.quaternion.setFromRotationMatrix(pf),r&&(pf.extractRotation(r.matrixWorld),Rg.setFromRotationMatrix(pf),this.quaternion.premultiply(Rg.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(h2),Dg.child=e,this.dispatchEvent(Dg),Dg.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(Die),wC.child=e,this.dispatchEvent(wC),wC.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),pf.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),pf.multiply(e.parent.matrixWorld)),e.applyMatrix4(pf),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(h2),Dg.child=e,this.dispatchEvent(Dg),Dg.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const o=this.children[i].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,i=[]){this[e]===t&&i.push(this);const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].getObjectsByProperty(e,t,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Hy,e,Cie),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Hy,Rie,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].updateMatrixWorld(e)}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.geometryInfo=this._geometryInfo.map(a=>({...a,boundingBox:a.boundingBox?a.boundingBox.toJSON():void 0,boundingSphere:a.boundingSphere?a.boundingSphere.toJSON():void 0})),r.instanceInfo=this._instanceInfo.map(a=>({...a})),r.availableInstanceIds=this._availableInstanceIds.slice(),r.availableGeometryIds=this._availableGeometryIds.slice(),r.nextIndexStart=this._nextIndexStart,r.nextVertexStart=this._nextVertexStart,r.geometryCount=this._geometryCount,r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.matricesTexture=this._matricesTexture.toJSON(e),r.indirectTexture=this._indirectTexture.toJSON(e),this._colorsTexture!==null&&(r.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(r.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(r.boundingBox=this.boundingBox.toJSON()));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let c=0,f=l.length;c<f;c++){const d=l[c];s(e.shapes,d)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(s(e.materials,this.material[l]));r.material=a}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];r.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),c=o(e.textures),f=o(e.images),d=o(e.shapes),m=o(e.skeletons),v=o(e.animations),b=o(e.nodes);a.length>0&&(i.geometries=a),l.length>0&&(i.materials=l),c.length>0&&(i.textures=c),f.length>0&&(i.images=f),d.length>0&&(i.shapes=d),m.length>0&&(i.skeletons=m),v.length>0&&(i.animations=v),b.length>0&&(i.nodes=b)}return i.object=r,i;function o(a){const l=[];for(const c in a){const f=a[c];delete f.metadata,l.push(f)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}Jn.DEFAULT_UP=new de(0,1,0);Jn.DEFAULT_MATRIX_AUTO_UPDATE=!0;Jn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Kl=new de,mf=new de,SC=new de,gf=new de,Og=new de,Lg=new de,d2=new de,EC=new de,MC=new de,TC=new de,AC=new Gn,CC=new Gn,RC=new Gn;class ua{constructor(e=new de,t=new de,i=new de){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),Kl.subVectors(e,t),r.cross(Kl);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){Kl.subVectors(r,t),mf.subVectors(i,t),SC.subVectors(e,t);const o=Kl.dot(Kl),a=Kl.dot(mf),l=Kl.dot(SC),c=mf.dot(mf),f=mf.dot(SC),d=o*c-a*a;if(d===0)return s.set(0,0,0),null;const m=1/d,v=(c*l-a*f)*m,b=(o*f-a*l)*m;return s.set(1-v-b,b,v)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,gf)===null?!1:gf.x>=0&&gf.y>=0&&gf.x+gf.y<=1}static getInterpolation(e,t,i,r,s,o,a,l){return this.getBarycoord(e,t,i,r,gf)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,gf.x),l.addScaledVector(o,gf.y),l.addScaledVector(a,gf.z),l)}static getInterpolatedAttribute(e,t,i,r,s,o){return AC.setScalar(0),CC.setScalar(0),RC.setScalar(0),AC.fromBufferAttribute(e,t),CC.fromBufferAttribute(e,i),RC.fromBufferAttribute(e,r),o.setScalar(0),o.addScaledVector(AC,s.x),o.addScaledVector(CC,s.y),o.addScaledVector(RC,s.z),o}static isFrontFacing(e,t,i,r){return Kl.subVectors(i,t),mf.subVectors(e,t),Kl.cross(mf).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Kl.subVectors(this.c,this.b),mf.subVectors(this.a,this.b),Kl.cross(mf).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return ua.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return ua.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,r,s){return ua.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return ua.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return ua.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let o,a;Og.subVectors(r,i),Lg.subVectors(s,i),EC.subVectors(e,i);const l=Og.dot(EC),c=Lg.dot(EC);if(l<=0&&c<=0)return t.copy(i);MC.subVectors(e,r);const f=Og.dot(MC),d=Lg.dot(MC);if(f>=0&&d<=f)return t.copy(r);const m=l*d-f*c;if(m<=0&&l>=0&&f<=0)return o=l/(l-f),t.copy(i).addScaledVector(Og,o);TC.subVectors(e,s);const v=Og.dot(TC),b=Lg.dot(TC);if(b>=0&&v<=b)return t.copy(s);const x=v*c-l*b;if(x<=0&&c>=0&&b<=0)return a=c/(c-b),t.copy(i).addScaledVector(Lg,a);const w=f*b-v*d;if(w<=0&&d-f>=0&&v-b>=0)return d2.subVectors(s,r),a=(d-f)/(d-f+(v-b)),t.copy(r).addScaledVector(d2,a);const _=1/(w+x+m);return o=x*_,a=m*_,t.copy(i).addScaledVector(Og,o).addScaledVector(Lg,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const Z8={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Wh={h:0,s:0,l:0},pw={h:0,s:0,l:0};function DC(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}let yt=class{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Qs){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Wn.colorSpaceToWorking(this,t),this}setRGB(e,t,i,r=Wn.workingColorSpace){return this.r=e,this.g=t,this.b=i,Wn.colorSpaceToWorking(this,r),this}setHSL(e,t,i,r=Wn.workingColorSpace){if(e=hL(e,1),t=Qt(t,0,1),i=Qt(i,0,1),t===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+t):i+t-i*t,o=2*i-s;this.r=DC(o,s,e+1/3),this.g=DC(o,s,e),this.b=DC(o,s,e-1/3)}return Wn.colorSpaceToWorking(this,r),this}setStyle(e,t=Qs){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=r[1],a=r[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Qs){const i=Z8[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Uf(e.r),this.g=Uf(e.g),this.b=Uf(e.b),this}copyLinearToSRGB(e){return this.r=w0(e.r),this.g=w0(e.g),this.b=w0(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Qs){return Wn.workingToColorSpace(Xs.copy(this),e),Math.round(Qt(Xs.r*255,0,255))*65536+Math.round(Qt(Xs.g*255,0,255))*256+Math.round(Qt(Xs.b*255,0,255))}getHexString(e=Qs){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Wn.workingColorSpace){Wn.workingToColorSpace(Xs.copy(this),t);const i=Xs.r,r=Xs.g,s=Xs.b,o=Math.max(i,r,s),a=Math.min(i,r,s);let l,c;const f=(a+o)/2;if(a===o)l=0,c=0;else{const d=o-a;switch(c=f<=.5?d/(o+a):d/(2-o-a),o){case i:l=(r-s)/d+(r<s?6:0);break;case r:l=(s-i)/d+2;break;case s:l=(i-r)/d+4;break}l/=6}return e.h=l,e.s=c,e.l=f,e}getRGB(e,t=Wn.workingColorSpace){return Wn.workingToColorSpace(Xs.copy(this),t),e.r=Xs.r,e.g=Xs.g,e.b=Xs.b,e}getStyle(e=Qs){Wn.workingToColorSpace(Xs.copy(this),e);const t=Xs.r,i=Xs.g,r=Xs.b;return e!==Qs?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,t,i){return this.getHSL(Wh),this.setHSL(Wh.h+e,Wh.s+t,Wh.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(Wh),e.getHSL(pw);const i=Xb(Wh.h,pw.h,t),r=Xb(Wh.s,pw.s,t),s=Xb(Wh.l,pw.l,t);return this.setHSL(i,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*i+s[6]*r,this.g=s[1]*t+s[4]*i+s[7]*r,this.b=s[2]*t+s[5]*i+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const Xs=new yt;yt.NAMES=Z8;let Oie=0;class so extends Eu{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Oie++}),this.uuid=Pa(),this.name="",this.type="Material",this.blending=Kp,this.side=Hf,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=hE,this.blendDst=dE,this.blendEquation=rd,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new yt(0,0,0),this.blendAlpha=0,this.depthFunc=am,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=oD,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Ip,this.stencilZFail=Ip,this.stencilZPass=Ip,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.sheenColorMap&&this.sheenColorMap.isTexture&&(i.sheenColorMap=this.sheenColorMap.toJSON(e).uuid),this.sheenRoughnessMap&&this.sheenRoughnessMap.isTexture&&(i.sheenRoughnessMap=this.sheenRoughnessMap.toJSON(e).uuid),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Kp&&(i.blending=this.blending),this.side!==Hf&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==hE&&(i.blendSrc=this.blendSrc),this.blendDst!==dE&&(i.blendDst=this.blendDst),this.blendEquation!==rd&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==am&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==oD&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Ip&&(i.stencilFail=this.stencilFail),this.stencilZFail!==Ip&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==Ip&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=r(e.textures),o=r(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class Yf extends so{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new yt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Io,this.combine=J_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Rf=Lie();function Lie(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(i[l]=0,i[l|256]=32768,r[l]=24,r[l|256]=24):c<-14?(i[l]=1024>>-c-14,i[l|256]=1024>>-c-14|32768,r[l]=-c-1,r[l|256]=-c-1):c<=15?(i[l]=c+15<<10,i[l|256]=c+15<<10|32768,r[l]=13,r[l|256]=13):c<128?(i[l]=31744,i[l|256]=64512,r[l]=24,r[l|256]=24):(i[l]=31744,i[l|256]=64512,r[l]=13,r[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,f=0;for(;(c&8388608)===0;)c<<=1,f-=8388608;c&=-8388609,f+=947912704,s[l]=c|f}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:o,offsetTable:a}}function aa(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=Qt(n,-65504,65504),Rf.floatView[0]=n;const e=Rf.uint32View[0],t=e>>23&511;return Rf.baseTable[t]+((e&8388607)>>Rf.shiftTable[t])}function Ab(n){const e=n>>10;return Rf.uint32View[0]=Rf.mantissaTable[Rf.offsetTable[e]+(n&1023)]+Rf.exponentTable[e],Rf.floatView[0]}class Pie{static toHalfFloat(e){return aa(e)}static fromHalfFloat(e){return Ab(e)}}const Ur=new de,mw=new ut;let Iie=0;class li{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:Iie++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=x_,this.updateRanges=[],this.gpuType=fa,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)mw.fromBufferAttribute(this,t),mw.applyMatrix3(e),this.setXY(t,mw.x,mw.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)Ur.fromBufferAttribute(this,t),Ur.applyMatrix3(e),this.setXYZ(t,Ur.x,Ur.y,Ur.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)Ur.fromBufferAttribute(this,t),Ur.applyMatrix4(e),this.setXYZ(t,Ur.x,Ur.y,Ur.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Ur.fromBufferAttribute(this,t),Ur.applyNormalMatrix(e),this.setXYZ(t,Ur.x,Ur.y,Ur.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Ur.fromBufferAttribute(this,t),Ur.transformDirection(e),this.setXYZ(t,Ur.x,Ur.y,Ur.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=Co(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=_n(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Co(t,this.array)),t}setX(e,t){return this.normalized&&(t=_n(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Co(t,this.array)),t}setY(e,t){return this.normalized&&(t=_n(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Co(t,this.array)),t}setZ(e,t){return this.normalized&&(t=_n(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Co(t,this.array)),t}setW(e,t){return this.normalized&&(t=_n(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=_n(t,this.array),i=_n(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=_n(t,this.array),i=_n(i,this.array),r=_n(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=_n(t,this.array),i=_n(i,this.array),r=_n(r,this.array),s=_n(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==x_&&(e.usage=this.usage),e}}class Nie extends li{constructor(e,t,i){super(new Int8Array(e),t,i)}}class Uie extends li{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class kie extends li{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class zie extends li{constructor(e,t,i){super(new Int16Array(e),t,i)}}class pL extends li{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class Fie extends li{constructor(e,t,i){super(new Int32Array(e),t,i)}}class mL extends li{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class Bie extends li{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}getX(e){let t=Ab(this.array[e*this.itemSize]);return this.normalized&&(t=Co(t,this.array)),t}setX(e,t){return this.normalized&&(t=_n(t,this.array)),this.array[e*this.itemSize]=aa(t),this}getY(e){let t=Ab(this.array[e*this.itemSize+1]);return this.normalized&&(t=Co(t,this.array)),t}setY(e,t){return this.normalized&&(t=_n(t,this.array)),this.array[e*this.itemSize+1]=aa(t),this}getZ(e){let t=Ab(this.array[e*this.itemSize+2]);return this.normalized&&(t=Co(t,this.array)),t}setZ(e,t){return this.normalized&&(t=_n(t,this.array)),this.array[e*this.itemSize+2]=aa(t),this}getW(e){let t=Ab(this.array[e*this.itemSize+3]);return this.normalized&&(t=Co(t,this.array)),t}setW(e,t){return this.normalized&&(t=_n(t,this.array)),this.array[e*this.itemSize+3]=aa(t),this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=_n(t,this.array),i=_n(i,this.array)),this.array[e+0]=aa(t),this.array[e+1]=aa(i),this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=_n(t,this.array),i=_n(i,this.array),r=_n(r,this.array)),this.array[e+0]=aa(t),this.array[e+1]=aa(i),this.array[e+2]=aa(r),this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=_n(t,this.array),i=_n(i,this.array),r=_n(r,this.array),s=_n(s,this.array)),this.array[e+0]=aa(t),this.array[e+1]=aa(i),this.array[e+2]=aa(r),this.array[e+3]=aa(s),this}}class kt extends li{constructor(e,t,i){super(new Float32Array(e),t,i)}}let Vie=0;const hl=new Kt,OC=new Jn,Pg=new de,Aa=new Vr,jy=new Vr,hs=new de;class hn extends Eu{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Vie++}),this.uuid=Pa(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(q8(e)?mL:pL)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new un().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return hl.makeRotationFromQuaternion(e),this.applyMatrix4(hl),this}rotateX(e){return hl.makeRotationX(e),this.applyMatrix4(hl),this}rotateY(e){return hl.makeRotationY(e),this.applyMatrix4(hl),this}rotateZ(e){return hl.makeRotationZ(e),this.applyMatrix4(hl),this}translate(e,t,i){return hl.makeTranslation(e,t,i),this.applyMatrix4(hl),this}scale(e,t,i){return hl.makeScale(e,t,i),this.applyMatrix4(hl),this}lookAt(e){return OC.lookAt(e),OC.updateMatrix(),this.applyMatrix4(OC.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Pg).negate(),this.translate(Pg.x,Pg.y,Pg.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const i=[];for(let r=0,s=e.length;r<s;r++){const o=e[r];i.push(o.x,o.y,o.z||0)}this.setAttribute("position",new kt(i,3))}else{const i=Math.min(e.length,t.count);for(let r=0;r<i;r++){const s=e[r];t.setXYZ(r,s.x,s.y,s.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Vr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new de(-1/0,-1/0,-1/0),new de(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){const s=t[i];Aa.setFromBufferAttribute(s),this.morphTargetsRelative?(hs.addVectors(this.boundingBox.min,Aa.min),this.boundingBox.expandByPoint(hs),hs.addVectors(this.boundingBox.max,Aa.max),this.boundingBox.expandByPoint(hs)):(this.boundingBox.expandByPoint(Aa.min),this.boundingBox.expandByPoint(Aa.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ts);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new de,1/0);return}if(e){const i=this.boundingSphere.center;if(Aa.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];jy.setFromBufferAttribute(a),this.morphTargetsRelative?(hs.addVectors(Aa.min,jy.min),Aa.expandByPoint(hs),hs.addVectors(Aa.max,jy.max),Aa.expandByPoint(hs)):(Aa.expandByPoint(jy.min),Aa.expandByPoint(jy.max))}Aa.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)hs.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(hs));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let c=0,f=a.count;c<f;c++)hs.fromBufferAttribute(a,c),l&&(Pg.fromBufferAttribute(e,c),hs.add(Pg)),r=Math.max(r,i.distanceToSquared(hs))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=t.position,r=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new li(new Float32Array(4*i.count),4));const o=this.getAttribute("tangent"),a=[],l=[];for(let I=0;I<i.count;I++)a[I]=new de,l[I]=new de;const c=new de,f=new de,d=new de,m=new ut,v=new ut,b=new ut,x=new de,w=new de;function _(I,L,N){c.fromBufferAttribute(i,I),f.fromBufferAttribute(i,L),d.fromBufferAttribute(i,N),m.fromBufferAttribute(s,I),v.fromBufferAttribute(s,L),b.fromBufferAttribute(s,N),f.sub(c),d.sub(c),v.sub(m),b.sub(m);const V=1/(v.x*b.y-b.x*v.y);isFinite(V)&&(x.copy(f).multiplyScalar(b.y).addScaledVector(d,-v.y).multiplyScalar(V),w.copy(d).multiplyScalar(v.x).addScaledVector(f,-b.x).multiplyScalar(V),a[I].add(x),a[L].add(x),a[N].add(x),l[I].add(w),l[L].add(w),l[N].add(w))}let A=this.groups;A.length===0&&(A=[{start:0,count:e.count}]);for(let I=0,L=A.length;I<L;++I){const N=A[I],V=N.start,B=N.count;for(let k=V,j=V+B;k<j;k+=3)_(e.getX(k+0),e.getX(k+1),e.getX(k+2))}const T=new de,E=new de,C=new de,R=new de;function O(I){C.fromBufferAttribute(r,I),R.copy(C);const L=a[I];T.copy(L),T.sub(C.multiplyScalar(C.dot(L))).normalize(),E.crossVectors(R,L);const V=E.dot(l[I])<0?-1:1;o.setXYZW(I,T.x,T.y,T.z,V)}for(let I=0,L=A.length;I<L;++I){const N=A[I],V=N.start,B=N.count;for(let k=V,j=V+B;k<j;k+=3)O(e.getX(k+0)),O(e.getX(k+1)),O(e.getX(k+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new li(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let m=0,v=i.count;m<v;m++)i.setXYZ(m,0,0,0);const r=new de,s=new de,o=new de,a=new de,l=new de,c=new de,f=new de,d=new de;if(e)for(let m=0,v=e.count;m<v;m+=3){const b=e.getX(m+0),x=e.getX(m+1),w=e.getX(m+2);r.fromBufferAttribute(t,b),s.fromBufferAttribute(t,x),o.fromBufferAttribute(t,w),f.subVectors(o,s),d.subVectors(r,s),f.cross(d),a.fromBufferAttribute(i,b),l.fromBufferAttribute(i,x),c.fromBufferAttribute(i,w),a.add(f),l.add(f),c.add(f),i.setXYZ(b,a.x,a.y,a.z),i.setXYZ(x,l.x,l.y,l.z),i.setXYZ(w,c.x,c.y,c.z)}else for(let m=0,v=t.count;m<v;m+=3)r.fromBufferAttribute(t,m+0),s.fromBufferAttribute(t,m+1),o.fromBufferAttribute(t,m+2),f.subVectors(o,s),d.subVectors(r,s),f.cross(d),i.setXYZ(m+0,f.x,f.y,f.z),i.setXYZ(m+1,f.x,f.y,f.z),i.setXYZ(m+2,f.x,f.y,f.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)hs.fromBufferAttribute(e,t),hs.normalize(),e.setXYZ(t,hs.x,hs.y,hs.z)}toNonIndexed(){function e(a,l){const c=a.array,f=a.itemSize,d=a.normalized,m=new c.constructor(l.length*f);let v=0,b=0;for(let x=0,w=l.length;x<w;x++){a.isInterleavedBufferAttribute?v=l[x]*a.data.stride+a.offset:v=l[x]*f;for(let _=0;_<f;_++)m[b++]=c[v++]}return new li(m,f,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new hn,i=this.index.array,r=this.attributes;for(const a in r){const l=r[a],c=e(l,i);t.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let f=0,d=c.length;f<d;f++){const m=c[f],v=e(m,i);l.push(v)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const l in i){const c=i[l];e.data.attributes[l]=c.toJSON(e.data)}const r={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],f=[];for(let d=0,m=c.length;d<m;d++){const v=c[d];f.push(v.toJSON(e.data))}f.length>0&&(r[l]=f,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere=a.toJSON()),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone());const r=e.attributes;for(const c in r){const f=r[c];this.setAttribute(c,f.clone(t))}const s=e.morphAttributes;for(const c in s){const f=[],d=s[c];for(let m=0,v=d.length;m<v;m++)f.push(d[m].clone(t));this.morphAttributes[c]=f}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,f=o.length;c<f;c++){const d=o[c];this.addGroup(d.start,d.count,d.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const p2=new Kt,hp=new av,gw=new ts,m2=new de,vw=new de,yw=new de,bw=new de,LC=new de,_w=new de,g2=new de,xw=new de;class Pi extends Jn{constructor(e=new hn,t=new Yf){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const i=this.geometry,r=i.attributes.position,s=i.morphAttributes.position,o=i.morphTargetsRelative;t.fromBufferAttribute(r,e);const a=this.morphTargetInfluences;if(s&&a){_w.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const f=a[l],d=s[l];f!==0&&(LC.fromBufferAttribute(d,e),o?_w.addScaledVector(LC,f):_w.addScaledVector(LC.sub(t),f))}t.add(_w)}return t}raycast(e,t){const i=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),gw.copy(i.boundingSphere),gw.applyMatrix4(s),hp.copy(e.ray).recast(e.near),!(gw.containsPoint(hp.origin)===!1&&(hp.intersectSphere(gw,m2)===null||hp.origin.distanceToSquared(m2)>(e.far-e.near)**2))&&(p2.copy(s).invert(),hp.copy(e.ray).applyMatrix4(p2),!(i.boundingBox!==null&&hp.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,hp)))}_computeIntersections(e,t,i){let r;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,c=s.attributes.uv,f=s.attributes.uv1,d=s.attributes.normal,m=s.groups,v=s.drawRange;if(a!==null)if(Array.isArray(o))for(let b=0,x=m.length;b<x;b++){const w=m[b],_=o[w.materialIndex],A=Math.max(w.start,v.start),T=Math.min(a.count,Math.min(w.start+w.count,v.start+v.count));for(let E=A,C=T;E<C;E+=3){const R=a.getX(E),O=a.getX(E+1),I=a.getX(E+2);r=ww(this,_,e,i,c,f,d,R,O,I),r&&(r.faceIndex=Math.floor(E/3),r.face.materialIndex=w.materialIndex,t.push(r))}}else{const b=Math.max(0,v.start),x=Math.min(a.count,v.start+v.count);for(let w=b,_=x;w<_;w+=3){const A=a.getX(w),T=a.getX(w+1),E=a.getX(w+2);r=ww(this,o,e,i,c,f,d,A,T,E),r&&(r.faceIndex=Math.floor(w/3),t.push(r))}}else if(l!==void 0)if(Array.isArray(o))for(let b=0,x=m.length;b<x;b++){const w=m[b],_=o[w.materialIndex],A=Math.max(w.start,v.start),T=Math.min(l.count,Math.min(w.start+w.count,v.start+v.count));for(let E=A,C=T;E<C;E+=3){const R=E,O=E+1,I=E+2;r=ww(this,_,e,i,c,f,d,R,O,I),r&&(r.faceIndex=Math.floor(E/3),r.face.materialIndex=w.materialIndex,t.push(r))}}else{const b=Math.max(0,v.start),x=Math.min(l.count,v.start+v.count);for(let w=b,_=x;w<_;w+=3){const A=w,T=w+1,E=w+2;r=ww(this,o,e,i,c,f,d,A,T,E),r&&(r.faceIndex=Math.floor(w/3),t.push(r))}}}}function Gie(n,e,t,i,r,s,o,a){let l;if(e.side===Po?l=i.intersectTriangle(o,s,r,!0,a):l=i.intersectTriangle(r,s,o,e.side===Hf,a),l===null)return null;xw.copy(a),xw.applyMatrix4(n.matrixWorld);const c=t.ray.origin.distanceTo(xw);return c<t.near||c>t.far?null:{distance:c,point:xw.clone(),object:n}}function ww(n,e,t,i,r,s,o,a,l,c){n.getVertexPosition(a,vw),n.getVertexPosition(l,yw),n.getVertexPosition(c,bw);const f=Gie(n,e,t,i,vw,yw,bw,g2);if(f){const d=new de;ua.getBarycoord(g2,vw,yw,bw,d),r&&(f.uv=ua.getInterpolatedAttribute(r,a,l,c,d,new ut)),s&&(f.uv1=ua.getInterpolatedAttribute(s,a,l,c,d,new ut)),o&&(f.normal=ua.getInterpolatedAttribute(o,a,l,c,d,new de),f.normal.dot(i.direction)>0&&f.normal.multiplyScalar(-1));const m={a,b:l,c,normal:new de,materialIndex:0};ua.getNormal(vw,yw,bw,m.normal),f.face=m,f.barycoord=d}return f}class Ed extends hn{constructor(e=1,t=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],f=[],d=[];let m=0,v=0;b("z","y","x",-1,-1,i,t,e,o,s,0),b("z","y","x",1,-1,i,t,-e,o,s,1),b("x","z","y",1,1,e,i,t,r,o,2),b("x","z","y",1,-1,e,i,-t,r,o,3),b("x","y","z",1,-1,e,t,i,r,s,4),b("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(l),this.setAttribute("position",new kt(c,3)),this.setAttribute("normal",new kt(f,3)),this.setAttribute("uv",new kt(d,2));function b(x,w,_,A,T,E,C,R,O,I,L){const N=E/O,V=C/I,B=E/2,k=C/2,j=R/2,q=O+1,W=I+1;let G=0,K=0;const te=new de;for(let ie=0;ie<W;ie++){const F=ie*V-k;for(let X=0;X<q;X++){const ee=X*N-B;te[x]=ee*A,te[w]=F*T,te[_]=j,c.push(te.x,te.y,te.z),te[x]=0,te[w]=0,te[_]=R>0?1:-1,f.push(te.x,te.y,te.z),d.push(X/O),d.push(1-ie/I),G+=1}}for(let ie=0;ie<I;ie++)for(let F=0;F<O;F++){const X=m+F+q*ie,ee=m+F+q*(ie+1),le=m+(F+1)+q*(ie+1),oe=m+(F+1)+q*ie;l.push(X,ee,oe),l.push(ee,le,oe),K+=6}a.addGroup(v,K,L),v+=K,m+=G}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ed(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function k0(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function To(n){const e={};for(let t=0;t<n.length;t++){const i=k0(n[t]);for(const r in i)e[r]=i[r]}return e}function Hie(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function K8(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Wn.workingColorSpace}const gL={clone:k0,merge:To};var jie=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Wie=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Al extends so{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=jie,this.fragmentShader=Wie,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=k0(e.uniforms),this.uniformsGroups=Hie(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;o&&o.isTexture?t.uniforms[r]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[r]={type:"m4",value:o.toArray()}:t.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class $M extends Jn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Kt,this.projectionMatrix=new Kt,this.projectionMatrixInverse=new Kt,this.coordinateSystem=Oa,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const $h=new de,v2=new ut,y2=new ut;class Fr extends $M{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=N0*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Qp*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return N0*2*Math.atan(Math.tan(Qp*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){$h.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set($h.x,$h.y).multiplyScalar(-e/$h.z),$h.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set($h.x,$h.y).multiplyScalar(-e/$h.z)}getViewSize(e,t){return this.getViewBounds(e,v2,y2),t.subVectors(y2,v2)}setViewOffset(e,t,i,r,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Qp*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*r/l,t-=o.offsetY*i/c,r*=o.width/l,i*=o.height/c}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Ig=-90,Ng=1;class Q8 extends Jn{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new Fr(Ig,Ng,e,t);r.layers=this.layers,this.add(r);const s=new Fr(Ig,Ng,e,t);s.layers=this.layers,this.add(s);const o=new Fr(Ig,Ng,e,t);o.layers=this.layers,this.add(o);const a=new Fr(Ig,Ng,e,t);a.layers=this.layers,this.add(a);const l=new Fr(Ig,Ng,e,t);l.layers=this.layers,this.add(l);const c=new Fr(Ig,Ng,e,t);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,r,s,o,a,l]=t;for(const c of t)this.remove(c);if(e===Oa)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===I0)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of t)this.add(c),c.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,l,c,f]=this.children,d=e.getRenderTarget(),m=e.getActiveCubeFace(),v=e.getActiveMipmapLevel(),b=e.xr.enabled;e.xr.enabled=!1;const x=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(t,s),e.setRenderTarget(i,1,r),e.render(t,o),e.setRenderTarget(i,2,r),e.render(t,a),e.setRenderTarget(i,3,r),e.render(t,l),e.setRenderTarget(i,4,r),e.render(t,c),i.texture.generateMipmaps=x,e.setRenderTarget(i,5,r),e.render(t,f),e.setRenderTarget(d,m,v),e.xr.enabled=b,i.texture.needsPMREMUpdate=!0}}class tx extends ur{constructor(e=[],t=jf,i,r,s,o,a,l,c,f){super(e,t,i,r,s,o,a,l,c,f),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class J8 extends wu{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new tx(r),this._setTextureOptions(t),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new Ed(5,5,5),s=new Al({name:"CubemapFromEquirect",uniforms:k0(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Po,blending:Nf});s.uniforms.tEquirect.value=t;const o=new Pi(r,s),a=t.minFilter;return t.minFilter===hu&&(t.minFilter=br),new Q8(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t=!0,i=!0,r=!0){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,r);e.setRenderTarget(s)}}class d0 extends Jn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const $ie={type:"move"};class DS{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new d0,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new d0,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new de,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new de),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new d0,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new de,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new de),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(c&&e.hand){o=!0;for(const x of e.hand.values()){const w=t.getJointPose(x,i),_=this._getHandJoint(c,x);w!==null&&(_.matrix.fromArray(w.transform.matrix),_.matrix.decompose(_.position,_.rotation,_.scale),_.matrixWorldNeedsUpdate=!0,_.jointRadius=w.radius),_.visible=w!==null}const f=c.joints["index-finger-tip"],d=c.joints["thumb-tip"],m=f.position.distanceTo(d.position),v=.02,b=.005;c.inputState.pinching&&m>v+b?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&m<=v-b&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&s!==null&&(r=s),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent($ie)))}return a!==null&&(a.visible=r!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new d0;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class qM{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new yt(e),this.density=t}clone(){return new qM(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class XM{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new yt(e),this.near=t,this.far=i}clone(){return new XM(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class YM extends Jn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Io,this.environmentIntensity=1,this.environmentRotation=new Io,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class ZM{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=x_,this.updateRanges=[],this.version=0,this.uuid=Pa()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Pa()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Pa()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Eo=new de;class lm{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)Eo.fromBufferAttribute(this,t),Eo.applyMatrix4(e),this.setXYZ(t,Eo.x,Eo.y,Eo.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Eo.fromBufferAttribute(this,t),Eo.applyNormalMatrix(e),this.setXYZ(t,Eo.x,Eo.y,Eo.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Eo.fromBufferAttribute(this,t),Eo.transformDirection(e),this.setXYZ(t,Eo.x,Eo.y,Eo.z);return this}getComponent(e,t){let i=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(i=Co(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=_n(i,this.array)),this.data.array[e*this.data.stride+this.offset+t]=i,this}setX(e,t){return this.normalized&&(t=_n(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=_n(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=_n(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=_n(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Co(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Co(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Co(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Co(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=_n(t,this.array),i=_n(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=_n(t,this.array),i=_n(i,this.array),r=_n(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=_n(t,this.array),i=_n(i,this.array),r=_n(r,this.array),s=_n(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new li(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new lm(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class vL extends so{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new yt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Ug;const Wy=new de,kg=new de,zg=new de,Fg=new ut,$y=new ut,eV=new Kt,Sw=new de,qy=new de,Ew=new de,b2=new ut,PC=new ut,_2=new ut;class tV extends Jn{constructor(e=new vL){if(super(),this.isSprite=!0,this.type="Sprite",Ug===void 0){Ug=new hn;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new ZM(t,5);Ug.setIndex([0,1,2,0,2,3]),Ug.setAttribute("position",new lm(i,3,0,!1)),Ug.setAttribute("uv",new lm(i,2,3,!1))}this.geometry=Ug,this.material=e,this.center=new ut(.5,.5),this.count=1}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),kg.setFromMatrixScale(this.matrixWorld),eV.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),zg.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&kg.multiplyScalar(-zg.z);const i=this.material.rotation;let r,s;i!==0&&(s=Math.cos(i),r=Math.sin(i));const o=this.center;Mw(Sw.set(-.5,-.5,0),zg,o,kg,r,s),Mw(qy.set(.5,-.5,0),zg,o,kg,r,s),Mw(Ew.set(.5,.5,0),zg,o,kg,r,s),b2.set(0,0),PC.set(1,0),_2.set(1,1);let a=e.ray.intersectTriangle(Sw,qy,Ew,!1,Wy);if(a===null&&(Mw(qy.set(-.5,.5,0),zg,o,kg,r,s),PC.set(0,1),a=e.ray.intersectTriangle(Sw,Ew,qy,!1,Wy),a===null))return;const l=e.ray.origin.distanceTo(Wy);l<e.near||l>e.far||t.push({distance:l,point:Wy.clone(),uv:ua.getInterpolation(Wy,Sw,qy,Ew,b2,PC,_2,new ut),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function Mw(n,e,t,i,r,s){Fg.subVectors(n,t).addScalar(.5).multiply(i),r!==void 0?($y.x=s*Fg.x-r*Fg.y,$y.y=r*Fg.x+s*Fg.y):$y.copy(Fg),n.copy(e),n.x+=$y.x,n.y+=$y.y,n.applyMatrix4(eV)}const Tw=new de,x2=new de;class nV extends Jn{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,r=t.length;i<r;i++){const s=t[i];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,i=0){t=Math.abs(t);const r=this.levels;let s;for(s=0;s<r.length&&!(t<r[s].distance);s++);return r.splice(s,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let i=0;i<t.length;i++)if(t[i].distance===e){const r=t.splice(i,1);return this.remove(r[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,r;for(i=1,r=t.length;i<r;i++){let s=t[i].distance;if(t[i].object.visible&&(s-=s*t[i].hysteresis),e<s)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){Tw.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(Tw);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){Tw.setFromMatrixPosition(e.matrixWorld),x2.setFromMatrixPosition(this.matrixWorld);const i=Tw.distanceTo(x2)/e.zoom;t[0].object.visible=!0;let r,s;for(r=1,s=t.length;r<s;r++){let o=t[r].distance;if(t[r].object.visible&&(o-=o*t[r].hysteresis),i>=o)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<s;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let r=0,s=i.length;r<s;r++){const o=i[r];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const w2=new de,S2=new Gn,E2=new Gn,qie=new de,M2=new Kt,Aw=new de,IC=new ts,T2=new Kt,NC=new av;class iV extends Pi{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=sD,this.bindMatrix=new Kt,this.bindMatrixInverse=new Kt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Vr),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,Aw),this.boundingBox.expandByPoint(Aw)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new ts),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,Aw),this.boundingSphere.expandByPoint(Aw)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const i=this.material,r=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),IC.copy(this.boundingSphere),IC.applyMatrix4(r),e.ray.intersectsSphere(IC)!==!1&&(T2.copy(r).invert(),NC.copy(e.ray).applyMatrix4(T2),!(this.boundingBox!==null&&NC.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,NC)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Gn,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===sD?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===I8?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,r=this.geometry;S2.fromBufferAttribute(r.attributes.skinIndex,e),E2.fromBufferAttribute(r.attributes.skinWeight,e),w2.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=E2.getComponent(s);if(o!==0){const a=S2.getComponent(s);M2.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),t.addScaledVector(qie.copy(w2).applyMatrix4(M2),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class yL extends Jn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class yu extends ur{constructor(e=null,t=1,i=1,r,s,o,a,l,c=Ds,f=Ds,d,m){super(null,o,a,l,c,f,r,s,d,m),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const A2=new Kt,Xie=new Kt;class KM{constructor(e=[],t=[]){this.uuid=Pa(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new Kt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new Kt;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:Xie;A2.multiplyMatrices(a,t[s]),A2.toArray(i,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new KM(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new yu(t,e,e,io,fa);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new yL),this.bones.push(o),this.boneInverses.push(new Kt().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.7,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,s=t.length;r<s;r++){const o=t[r];e.bones.push(o.uuid);const a=i[r];e.boneInverses.push(a.toArray())}return e}}class cm extends li{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Bg=new Kt,C2=new Kt,Cw=[],R2=new Vr,Yie=new Kt,Xy=new Pi,Yy=new ts;class rV extends Pi{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new cm(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,Yie)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Vr),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Bg),R2.copy(e.boundingBox).applyMatrix4(Bg),this.boundingBox.union(R2)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new ts),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Bg),Yy.copy(e.boundingSphere).applyMatrix4(Bg),this.boundingSphere.union(Yy)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const i=t.morphTargetInfluences,r=this.morphTexture.source.data.data,s=i.length+1,o=e*s+1;for(let a=0;a<i.length;a++)i[a]=r[o+a]}raycast(e,t){const i=this.matrixWorld,r=this.count;if(Xy.geometry=this.geometry,Xy.material=this.material,Xy.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Yy.copy(this.boundingSphere),Yy.applyMatrix4(i),e.ray.intersectsSphere(Yy)!==!1))for(let s=0;s<r;s++){this.getMatrixAt(s,Bg),C2.multiplyMatrices(i,Bg),Xy.matrixWorld=C2,Xy.raycast(e,Cw);for(let o=0,a=Cw.length;o<a;o++){const l=Cw[o];l.instanceId=s,l.object=this,t.push(l)}Cw.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new cm(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const i=t.morphTargetInfluences,r=i.length+1;this.morphTexture===null&&(this.morphTexture=new yu(new Float32Array(r*this.count),r,this.count,BM,fa));const s=this.morphTexture.source.data.data;let o=0;for(let c=0;c<i.length;c++)o+=i[c];const a=this.geometry.morphTargetsRelative?1:1-o,l=r*e;s[l]=a,s.set(i,l+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const UC=new de,Zie=new de,Kie=new un;class Tf{constructor(e=new de(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=UC.subVectors(i,t).cross(Zie.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(UC),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(i,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||Kie.getNormalMatrix(e),r=this.coplanarPoint(UC).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const dp=new ts,Qie=new ut(.5,.5),Rw=new de;class mm{constructor(e=new Tf,t=new Tf,i=new Tf,r=new Tf,s=new Tf,o=new Tf){this.planes=[e,t,i,r,s,o]}set(e,t,i,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=Oa,i=!1){const r=this.planes,s=e.elements,o=s[0],a=s[1],l=s[2],c=s[3],f=s[4],d=s[5],m=s[6],v=s[7],b=s[8],x=s[9],w=s[10],_=s[11],A=s[12],T=s[13],E=s[14],C=s[15];if(r[0].setComponents(c-o,v-f,_-b,C-A).normalize(),r[1].setComponents(c+o,v+f,_+b,C+A).normalize(),r[2].setComponents(c+a,v+d,_+x,C+T).normalize(),r[3].setComponents(c-a,v-d,_-x,C-T).normalize(),i)r[4].setComponents(l,m,w,E).normalize(),r[5].setComponents(c-l,v-m,_-w,C-E).normalize();else if(r[4].setComponents(c-l,v-m,_-w,C-E).normalize(),t===Oa)r[5].setComponents(c+l,v+m,_+w,C+E).normalize();else if(t===I0)r[5].setComponents(l,m,w,E).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),dp.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),dp.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(dp)}intersectsSprite(e){dp.center.set(0,0,0);const t=Qie.distanceTo(e.center);return dp.radius=.7071067811865476+t,dp.applyMatrix4(e.matrixWorld),this.intersectsSphere(dp)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(Rw.x=r.normal.x>0?e.max.x:e.min.x,Rw.y=r.normal.y>0?e.max.y:e.min.y,Rw.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Rw)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}const Kc=new Kt,Qc=new mm;class QM{constructor(){this.coordinateSystem=Oa}intersectsObject(e,t){if(!t.isArrayCamera||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(Kc.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Qc.setFromProjectionMatrix(Kc,r.coordinateSystem,r.reversedDepth),Qc.intersectsObject(e))return!0}return!1}intersectsSprite(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(Kc.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Qc.setFromProjectionMatrix(Kc,r.coordinateSystem,r.reversedDepth),Qc.intersectsSprite(e))return!0}return!1}intersectsSphere(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(Kc.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Qc.setFromProjectionMatrix(Kc,r.coordinateSystem,r.reversedDepth),Qc.intersectsSphere(e))return!0}return!1}intersectsBox(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(Kc.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Qc.setFromProjectionMatrix(Kc,r.coordinateSystem,r.reversedDepth),Qc.intersectsBox(e))return!0}return!1}containsPoint(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(Kc.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Qc.setFromProjectionMatrix(Kc,r.coordinateSystem,r.reversedDepth),Qc.containsPoint(e))return!0}return!1}clone(){return new QM}}function kC(n,e){return n-e}function Jie(n,e){return n.z-e.z}function ere(n,e){return e.z-n.z}class tre{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,i,r){const s=this.pool,o=this.list;this.index>=s.length&&s.push({start:-1,count:-1,z:-1,index:-1});const a=s[this.index];o.push(a),this.index++,a.start=e,a.count=t,a.z=i,a.index=r}reset(){this.list.length=0,this.index=0}}const sa=new Kt,nre=new yt(1,1,1),D2=new mm,ire=new QM,Dw=new Vr,pp=new ts,Zy=new de,O2=new de,rre=new de,zC=new tre,Ys=new Pi,Ow=[];function sre(n,e,t=0){const i=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const r=n.count;for(let s=0;s<r;s++)for(let o=0;o<i;o++)e.setComponent(s+t,o,n.getComponent(s,o))}else e.array.set(n.array,t*i);e.needsUpdate=!0}function mp(n,e){if(n.constructor!==e.constructor){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++)e[i]=n[i]}else{const t=Math.min(n.length,e.length);e.set(new n.constructor(n.buffer,0,t))}}class sV extends Pi{constructor(e,t,i=t*2,r){super(new hn,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=i,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),i=new yu(t,e,e,io,fa);this._matricesTexture=i}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),i=new yu(t,e,e,ex,Wf);this._indirectTexture=i}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),i=new yu(t,e,e,io,fa);i.colorSpace=Wn.workingColorSpace,this._colorsTexture=i}_initializeGeometry(e){const t=this.geometry,i=this._maxVertexCount,r=this._maxIndexCount;if(this._geometryInitialized===!1){for(const s in e.attributes){const o=e.getAttribute(s),{array:a,itemSize:l,normalized:c}=o,f=new a.constructor(i*l),d=new li(f,l,c);t.setAttribute(s,d)}if(e.getIndex()!==null){const s=i>65535?new Uint32Array(r):new Uint16Array(r);t.setIndex(new li(s,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const i in t.attributes){if(!e.hasAttribute(i))throw new Error(`THREE.BatchedMesh: Added geometry missing "${i}". All geometries must have consistent attributes.`);const r=e.getAttribute(i),s=t.getAttribute(i);if(r.itemSize!==s.itemSize||r.normalized!==s.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Vr);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let i=0,r=t.length;i<r;i++){if(t[i].active===!1)continue;const s=t[i].geometryIndex;this.getMatrixAt(i,sa),this.getBoundingBoxAt(s,Dw).applyMatrix4(sa),e.union(Dw)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ts);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let i=0,r=t.length;i<r;i++){if(t[i].active===!1)continue;const s=t[i].geometryIndex;this.getMatrixAt(i,sa),this.getBoundingSphereAt(s,pp).applyMatrix4(sa),e.union(pp)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const i={visible:!0,active:!0,geometryIndex:e};let r=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(kC),r=this._availableInstanceIds.shift(),this._instanceInfo[r]=i):(r=this._instanceInfo.length,this._instanceInfo.push(i));const s=this._matricesTexture;sa.identity().toArray(s.image.data,r*16),s.needsUpdate=!0;const o=this._colorsTexture;return o&&(nre.toArray(o.image.data,r*4),o.needsUpdate=!0),this._visibilityChanged=!0,r}addGeometry(e,t=-1,i=-1){this._initializeGeometry(e),this._validateGeometry(e);const r={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},s=this._geometryInfo;r.vertexStart=this._nextVertexStart,r.reservedVertexCount=t===-1?e.getAttribute("position").count:t;const o=e.getIndex();if(o!==null&&(r.indexStart=this._nextIndexStart,r.reservedIndexCount=i===-1?o.count:i),r.indexStart!==-1&&r.indexStart+r.reservedIndexCount>this._maxIndexCount||r.vertexStart+r.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let l;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(kC),l=this._availableGeometryIds.shift(),s[l]=r):(l=this._geometryCount,this._geometryCount++,s.push(r)),this.setGeometryAt(l,e),this._nextIndexStart=r.indexStart+r.reservedIndexCount,this._nextVertexStart=r.vertexStart+r.reservedVertexCount,l}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const i=this.geometry,r=i.getIndex()!==null,s=i.getIndex(),o=t.getIndex(),a=this._geometryInfo[e];if(r&&o.count>a.reservedIndexCount||t.attributes.position.count>a.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const l=a.vertexStart,c=a.reservedVertexCount;a.vertexCount=t.getAttribute("position").count;for(const f in i.attributes){const d=t.getAttribute(f),m=i.getAttribute(f);sre(d,m,l);const v=d.itemSize;for(let b=d.count,x=c;b<x;b++){const w=l+b;for(let _=0;_<v;_++)m.setComponent(w,_,0)}m.needsUpdate=!0,m.addUpdateRange(l*v,c*v)}if(r){const f=a.indexStart,d=a.reservedIndexCount;a.indexCount=t.getIndex().count;for(let m=0;m<o.count;m++)s.setX(f+m,l+o.getX(m));for(let m=o.count,v=d;m<v;m++)s.setX(f+m,l);s.needsUpdate=!0,s.addUpdateRange(f,a.reservedIndexCount)}return a.start=r?a.indexStart:a.vertexStart,a.count=r?a.indexCount:a.vertexCount,a.boundingBox=null,t.boundingBox!==null&&(a.boundingBox=t.boundingBox.clone()),a.boundingSphere=null,t.boundingSphere!==null&&(a.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||t[e].active===!1)return this;const i=this._instanceInfo;for(let r=0,s=i.length;r<s;r++)i[r].active&&i[r].geometryIndex===e&&this.deleteInstance(r);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const i=this._geometryInfo,r=i.map((o,a)=>a).sort((o,a)=>i[o].vertexStart-i[a].vertexStart),s=this.geometry;for(let o=0,a=i.length;o<a;o++){const l=r[o],c=i[l];if(c.active!==!1){if(s.index!==null){if(c.indexStart!==t){const{indexStart:f,vertexStart:d,reservedIndexCount:m}=c,v=s.index,b=v.array,x=e-d;for(let w=f;w<f+m;w++)b[w]=b[w]+x;v.array.copyWithin(t,f,f+m),v.addUpdateRange(t,m),c.indexStart=t}t+=c.reservedIndexCount}if(c.vertexStart!==e){const{vertexStart:f,reservedVertexCount:d}=c,m=s.attributes;for(const v in m){const b=m[v],{array:x,itemSize:w}=b;x.copyWithin(e*w,f*w,(f+d)*w),b.addUpdateRange(e*w,d*w)}c.vertexStart=e}e+=c.reservedVertexCount,c.start=s.index?c.indexStart:c.vertexStart,this._nextIndexStart=s.index?c.indexStart+c.reservedIndexCount:0,this._nextVertexStart=c.vertexStart+c.reservedVertexCount}}return this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const i=this.geometry,r=this._geometryInfo[e];if(r.boundingBox===null){const s=new Vr,o=i.index,a=i.attributes.position;for(let l=r.start,c=r.start+r.count;l<c;l++){let f=l;o&&(f=o.getX(f)),s.expandByPoint(Zy.fromBufferAttribute(a,f))}r.boundingBox=s}return t.copy(r.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const i=this.geometry,r=this._geometryInfo[e];if(r.boundingSphere===null){const s=new ts;this.getBoundingBoxAt(e,Dw),Dw.getCenter(s.center);const o=i.index,a=i.attributes.position;let l=0;for(let c=r.start,f=r.start+r.count;c<f;c++){let d=c;o&&(d=o.getX(d)),Zy.fromBufferAttribute(a,d),l=Math.max(l,s.center.distanceToSquared(Zy))}s.radius=Math.sqrt(l),r.boundingSphere=s}return t.copy(r.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const i=this._matricesTexture,r=this._matricesTexture.image.data;return t.toArray(r,e*16),i.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,t){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t?this:(this._instanceInfo[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);const i=this._geometryInfo[e];return t.vertexStart=i.vertexStart,t.vertexCount=i.vertexCount,t.reservedVertexCount=i.reservedVertexCount,t.indexStart=i.indexStart,t.indexCount=i.indexCount,t.reservedIndexCount=i.reservedIndexCount,t.start=i.start,t.count=i.count,t}setInstanceCount(e){const t=this._availableInstanceIds,i=this._instanceInfo;for(t.sort(kC);t[t.length-1]===i.length-1;)i.pop(),t.pop();if(e<i.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const r=new Int32Array(e),s=new Int32Array(e);mp(this._multiDrawCounts,r),mp(this._multiDrawStarts,s),this._multiDrawCounts=r,this._multiDrawStarts=s,this._maxInstanceCount=e;const o=this._indirectTexture,a=this._matricesTexture,l=this._colorsTexture;o.dispose(),this._initIndirectTexture(),mp(o.image.data,this._indirectTexture.image.data),a.dispose(),this._initMatricesTexture(),mp(a.image.data,this._matricesTexture.image.data),l&&(l.dispose(),this._initColorsTexture(),mp(l.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const i=[...this._geometryInfo].filter(a=>a.active);if(Math.max(...i.map(a=>a.vertexStart+a.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...i.map(l=>l.indexStart+l.reservedIndexCount))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);const s=this.geometry;s.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new hn,this._initializeGeometry(s));const o=this.geometry;s.index&&mp(s.index.array,o.index.array);for(const a in s.attributes)mp(s.attributes[a].array,o.attributes[a].array)}raycast(e,t){const i=this._instanceInfo,r=this._geometryInfo,s=this.matrixWorld,o=this.geometry;Ys.material=this.material,Ys.geometry.index=o.index,Ys.geometry.attributes=o.attributes,Ys.geometry.boundingBox===null&&(Ys.geometry.boundingBox=new Vr),Ys.geometry.boundingSphere===null&&(Ys.geometry.boundingSphere=new ts);for(let a=0,l=i.length;a<l;a++){if(!i[a].visible||!i[a].active)continue;const c=i[a].geometryIndex,f=r[c];Ys.geometry.setDrawRange(f.start,f.count),this.getMatrixAt(a,Ys.matrixWorld).premultiply(s),this.getBoundingBoxAt(c,Ys.geometry.boundingBox),this.getBoundingSphereAt(c,Ys.geometry.boundingSphere),Ys.raycast(e,Ow);for(let d=0,m=Ow.length;d<m;d++){const v=Ow[d];v.object=this,v.batchId=a,t.push(v)}Ow.length=0}Ys.material=null,Ys.geometry.index=null,Ys.geometry.attributes={},Ys.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=>({...t,boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=>({...t})),this._availableInstanceIds=e._availableInstanceIds.slice(),this._availableGeometryIds=e._availableGeometryIds.slice(),this._nextIndexStart=e._nextIndexStart,this._nextVertexStart=e._nextVertexStart,this._geometryCount=e._geometryCount,this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._indirectTexture=e._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(e,t,i,r,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=r.getIndex(),a=o===null?1:o.array.BYTES_PER_ELEMENT,l=this._instanceInfo,c=this._multiDrawStarts,f=this._multiDrawCounts,d=this._geometryInfo,m=this.perObjectFrustumCulled,v=this._indirectTexture,b=v.image.data,x=i.isArrayCamera?ire:D2;m&&!i.isArrayCamera&&(sa.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse).multiply(this.matrixWorld),D2.setFromProjectionMatrix(sa,i.coordinateSystem,i.reversedDepth));let w=0;if(this.sortObjects){sa.copy(this.matrixWorld).invert(),Zy.setFromMatrixPosition(i.matrixWorld).applyMatrix4(sa),O2.set(0,0,-1).transformDirection(i.matrixWorld).transformDirection(sa);for(let T=0,E=l.length;T<E;T++)if(l[T].visible&&l[T].active){const C=l[T].geometryIndex;this.getMatrixAt(T,sa),this.getBoundingSphereAt(C,pp).applyMatrix4(sa);let R=!1;if(m&&(R=!x.intersectsSphere(pp,i)),!R){const O=d[C],I=rre.subVectors(pp.center,Zy).dot(O2);zC.push(O.start,O.count,I,T)}}const _=zC.list,A=this.customSort;A===null?_.sort(s.transparent?ere:Jie):A.call(this,_,i);for(let T=0,E=_.length;T<E;T++){const C=_[T];c[w]=C.start*a,f[w]=C.count,b[w]=C.index,w++}zC.reset()}else for(let _=0,A=l.length;_<A;_++)if(l[_].visible&&l[_].active){const T=l[_].geometryIndex;let E=!1;if(m&&(this.getMatrixAt(_,sa),this.getBoundingSphereAt(T,pp).applyMatrix4(sa),E=!x.intersectsSphere(pp,i)),!E){const C=d[T];c[w]=C.start*a,f[w]=C.count,b[w]=_,w++}}v.needsUpdate=!0,this._multiDrawCount=w,this._visibilityChanged=!1}onBeforeShadow(e,t,i,r,s,o){this.onBeforeRender(e,null,r,s,o)}}class No extends so{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new yt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const KE=new de,QE=new de,L2=new Kt,Ky=new av,Lw=new ts,FC=new de,P2=new de;let vd=class extends Jn{constructor(e=new hn,t=new No){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)KE.fromBufferAttribute(t,r-1),QE.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=KE.distanceTo(QE);e.setAttribute("lineDistance",new kt(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Lw.copy(i.boundingSphere),Lw.applyMatrix4(r),Lw.radius+=s,e.ray.intersectsSphere(Lw)===!1)return;L2.copy(r).invert(),Ky.copy(e.ray).applyMatrix4(L2);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=this.isLineSegments?2:1,f=i.index,m=i.attributes.position;if(f!==null){const v=Math.max(0,o.start),b=Math.min(f.count,o.start+o.count);for(let x=v,w=b-1;x<w;x+=c){const _=f.getX(x),A=f.getX(x+1),T=Pw(this,e,Ky,l,_,A,x);T&&t.push(T)}if(this.isLineLoop){const x=f.getX(b-1),w=f.getX(v),_=Pw(this,e,Ky,l,x,w,b-1);_&&t.push(_)}}else{const v=Math.max(0,o.start),b=Math.min(m.count,o.start+o.count);for(let x=v,w=b-1;x<w;x+=c){const _=Pw(this,e,Ky,l,x,x+1,x);_&&t.push(_)}if(this.isLineLoop){const x=Pw(this,e,Ky,l,b-1,v,b-1);x&&t.push(x)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}};function Pw(n,e,t,i,r,s,o){const a=n.geometry.attributes.position;if(KE.fromBufferAttribute(a,r),QE.fromBufferAttribute(a,s),t.distanceSqToSegment(KE,QE,FC,P2)>i)return;FC.applyMatrix4(n.matrixWorld);const c=e.ray.origin.distanceTo(FC);if(!(c<e.near||c>e.far))return{distance:c,point:P2.clone().applyMatrix4(n.matrixWorld),index:o,face:null,faceIndex:null,barycoord:null,object:n}}const I2=new de,N2=new de;class Mu extends vd{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)I2.fromBufferAttribute(t,r),N2.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+I2.distanceTo(N2);e.setAttribute("lineDistance",new kt(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class oV extends vd{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class bL extends so{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new yt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const U2=new Kt,lD=new av,Iw=new ts,Nw=new de;class aV extends Jn{constructor(e=new hn,t=new bL){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Iw.copy(i.boundingSphere),Iw.applyMatrix4(r),Iw.radius+=s,e.ray.intersectsSphere(Iw)===!1)return;U2.copy(r).invert(),lD.copy(e.ray).applyMatrix4(U2);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=i.index,d=i.attributes.position;if(c!==null){const m=Math.max(0,o.start),v=Math.min(c.count,o.start+o.count);for(let b=m,x=v;b<x;b++){const w=c.getX(b);Nw.fromBufferAttribute(d,w),k2(Nw,w,l,r,e,t,this)}}else{const m=Math.max(0,o.start),v=Math.min(d.count,o.start+o.count);for(let b=m,x=v;b<x;b++)Nw.fromBufferAttribute(d,b),k2(Nw,b,l,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function k2(n,e,t,i,r,s,o){const a=lD.distanceSqToPoint(n);if(a<t){const l=new de;lD.closestPointToPoint(n,l),l.applyMatrix4(i);const c=r.ray.origin.distanceTo(l);if(c<r.near||c>r.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,faceIndex:null,barycoord:null,object:o})}}class lV extends ur{constructor(e,t,i,r,s=br,o=br,a,l,c){super(e,t,i,r,s,o,a,l,c),this.isVideoTexture=!0,this.generateMipmaps=!1,this._requestVideoFrameCallbackId=0;const f=this;function d(){f.needsUpdate=!0,f._requestVideoFrameCallbackId=e.requestVideoFrameCallback(d)}"requestVideoFrameCallback"in e&&(this._requestVideoFrameCallbackId=e.requestVideoFrameCallback(d))}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}dispose(){this._requestVideoFrameCallbackId!==0&&this.source.data.cancelVideoFrameCallback(this._requestVideoFrameCallbackId),super.dispose()}}class ore extends lV{constructor(e,t,i,r,s,o,a,l){super({},e,t,i,r,s,o,a,l),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class are extends ur{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Ds,this.minFilter=Ds,this.generateMipmaps=!1,this.needsUpdate=!0}}class JM extends ur{constructor(e,t,i,r,s,o,a,l,c,f,d,m){super(null,o,a,l,c,f,r,s,d,m),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class lre extends JM{constructor(e,t,i,r,s,o){super(e,t,i,s,o),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=_l,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class cre extends JM{constructor(e,t,i){super(void 0,e[0].width,e[0].height,t,i,jf),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class ure extends ur{constructor(e,t,i,r,s,o,a,l,c){super(e,t,i,r,s,o,a,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class _L extends ur{constructor(e,t,i=Wf,r,s,o,a=Ds,l=Ds,c,f=L0,d=1){if(f!==L0&&f!==P0)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");const m={width:e,height:t,depth:d};super(m,r,s,o,a,l,f,i,c),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new ad(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class xL extends ur{constructor(e=null){super(),this.sourceTexture=e,this.isExternalTexture=!0}copy(e){return super.copy(e),this.sourceTexture=e.sourceTexture,this}}class eT extends hn{constructor(e=1,t=1,i=4,r=8,s=1){super(),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:i,radialSegments:r,heightSegments:s},t=Math.max(0,t),i=Math.max(1,Math.floor(i)),r=Math.max(3,Math.floor(r)),s=Math.max(1,Math.floor(s));const o=[],a=[],l=[],c=[],f=t/2,d=Math.PI/2*e,m=t,v=2*d+m,b=i*2+s,x=r+1,w=new de,_=new de;for(let A=0;A<=b;A++){let T=0,E=0,C=0,R=0;if(A<=i){const L=A/i,N=L*Math.PI/2;E=-f-e*Math.cos(N),C=e*Math.sin(N),R=-e*Math.cos(N),T=L*d}else if(A<=i+s){const L=(A-i)/s;E=-f+L*t,C=e,R=0,T=d+L*m}else{const L=(A-i-s)/i,N=L*Math.PI/2;E=f+e*Math.sin(N),C=e*Math.cos(N),R=e*Math.sin(N),T=d+m+L*d}const O=Math.max(0,Math.min(1,T/v));let I=0;A===0?I=.5/r:A===b&&(I=-.5/r);for(let L=0;L<=r;L++){const N=L/r,V=N*Math.PI*2,B=Math.sin(V),k=Math.cos(V);_.x=-C*k,_.y=E,_.z=C*B,a.push(_.x,_.y,_.z),w.set(-C*k,R,C*B),w.normalize(),l.push(w.x,w.y,w.z),c.push(N+I,O)}if(A>0){const L=(A-1)*x;for(let N=0;N<r;N++){const V=L+N,B=L+N+1,k=A*x+N,j=A*x+N+1;o.push(V,B,k),o.push(B,j,k)}}}this.setIndex(o),this.setAttribute("position",new kt(a,3)),this.setAttribute("normal",new kt(l,3)),this.setAttribute("uv",new kt(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new eT(e.radius,e.height,e.capSegments,e.radialSegments,e.heightSegments)}}class tT extends hn{constructor(e=1,t=32,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},t=Math.max(3,t);const s=[],o=[],a=[],l=[],c=new de,f=new ut;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let d=0,m=3;d<=t;d++,m+=3){const v=i+d/t*r;c.x=e*Math.cos(v),c.y=e*Math.sin(v),o.push(c.x,c.y,c.z),a.push(0,0,1),f.x=(o[m]/e+1)/2,f.y=(o[m+1]/e+1)/2,l.push(f.x,f.y)}for(let d=1;d<=t;d++)s.push(d,d+1,0);this.setIndex(s),this.setAttribute("position",new kt(o,3)),this.setAttribute("normal",new kt(a,3)),this.setAttribute("uv",new kt(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new tT(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class lv extends hn{constructor(e=1,t=1,i=1,r=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const c=this;r=Math.floor(r),s=Math.floor(s);const f=[],d=[],m=[],v=[];let b=0;const x=[],w=i/2;let _=0;A(),o===!1&&(e>0&&T(!0),t>0&&T(!1)),this.setIndex(f),this.setAttribute("position",new kt(d,3)),this.setAttribute("normal",new kt(m,3)),this.setAttribute("uv",new kt(v,2));function A(){const E=new de,C=new de;let R=0;const O=(t-e)/i;for(let I=0;I<=s;I++){const L=[],N=I/s,V=N*(t-e)+e;for(let B=0;B<=r;B++){const k=B/r,j=k*l+a,q=Math.sin(j),W=Math.cos(j);C.x=V*q,C.y=-N*i+w,C.z=V*W,d.push(C.x,C.y,C.z),E.set(q,O,W).normalize(),m.push(E.x,E.y,E.z),v.push(k,1-N),L.push(b++)}x.push(L)}for(let I=0;I<r;I++)for(let L=0;L<s;L++){const N=x[L][I],V=x[L+1][I],B=x[L+1][I+1],k=x[L][I+1];(e>0||L!==0)&&(f.push(N,V,k),R+=3),(t>0||L!==s-1)&&(f.push(V,B,k),R+=3)}c.addGroup(_,R,0),_+=R}function T(E){const C=b,R=new ut,O=new de;let I=0;const L=E===!0?e:t,N=E===!0?1:-1;for(let B=1;B<=r;B++)d.push(0,w*N,0),m.push(0,N,0),v.push(.5,.5),b++;const V=b;for(let B=0;B<=r;B++){const j=B/r*l+a,q=Math.cos(j),W=Math.sin(j);O.x=L*W,O.y=w*N,O.z=L*q,d.push(O.x,O.y,O.z),m.push(0,N,0),R.x=q*.5+.5,R.y=W*.5*N+.5,v.push(R.x,R.y),b++}for(let B=0;B<r;B++){const k=C+B,j=V+B;E===!0?f.push(j,j+1,k):f.push(j+1,j,k),I+=3}c.addGroup(_,I,E===!0?1:2),_+=I}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new lv(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class nx extends lv{constructor(e=1,t=1,i=32,r=1,s=!1,o=0,a=Math.PI*2){super(0,e,t,i,r,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new nx(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Md extends hn{constructor(e=[],t=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r};const s=[],o=[];a(r),c(i),f(),this.setAttribute("position",new kt(s,3)),this.setAttribute("normal",new kt(s.slice(),3)),this.setAttribute("uv",new kt(o,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function a(A){const T=new de,E=new de,C=new de;for(let R=0;R<t.length;R+=3)v(t[R+0],T),v(t[R+1],E),v(t[R+2],C),l(T,E,C,A)}function l(A,T,E,C){const R=C+1,O=[];for(let I=0;I<=R;I++){O[I]=[];const L=A.clone().lerp(E,I/R),N=T.clone().lerp(E,I/R),V=R-I;for(let B=0;B<=V;B++)B===0&&I===R?O[I][B]=L:O[I][B]=L.clone().lerp(N,B/V)}for(let I=0;I<R;I++)for(let L=0;L<2*(R-I)-1;L++){const N=Math.floor(L/2);L%2===0?(m(O[I][N+1]),m(O[I+1][N]),m(O[I][N])):(m(O[I][N+1]),m(O[I+1][N+1]),m(O[I+1][N]))}}function c(A){const T=new de;for(let E=0;E<s.length;E+=3)T.x=s[E+0],T.y=s[E+1],T.z=s[E+2],T.normalize().multiplyScalar(A),s[E+0]=T.x,s[E+1]=T.y,s[E+2]=T.z}function f(){const A=new de;for(let T=0;T<s.length;T+=3){A.x=s[T+0],A.y=s[T+1],A.z=s[T+2];const E=w(A)/2/Math.PI+.5,C=_(A)/Math.PI+.5;o.push(E,1-C)}b(),d()}function d(){for(let A=0;A<o.length;A+=6){const T=o[A+0],E=o[A+2],C=o[A+4],R=Math.max(T,E,C),O=Math.min(T,E,C);R>.9&&O<.1&&(T<.2&&(o[A+0]+=1),E<.2&&(o[A+2]+=1),C<.2&&(o[A+4]+=1))}}function m(A){s.push(A.x,A.y,A.z)}function v(A,T){const E=A*3;T.x=e[E+0],T.y=e[E+1],T.z=e[E+2]}function b(){const A=new de,T=new de,E=new de,C=new de,R=new ut,O=new ut,I=new ut;for(let L=0,N=0;L<s.length;L+=9,N+=6){A.set(s[L+0],s[L+1],s[L+2]),T.set(s[L+3],s[L+4],s[L+5]),E.set(s[L+6],s[L+7],s[L+8]),R.set(o[N+0],o[N+1]),O.set(o[N+2],o[N+3]),I.set(o[N+4],o[N+5]),C.copy(A).add(T).add(E).divideScalar(3);const V=w(C);x(R,N+0,A,V),x(O,N+2,T,V),x(I,N+4,E,V)}}function x(A,T,E,C){C<0&&A.x===1&&(o[T]=A.x-1),E.x===0&&E.z===0&&(o[T]=C/2/Math.PI+.5)}function w(A){return Math.atan2(A.z,-A.x)}function _(A){return Math.atan2(-A.y,Math.sqrt(A.x*A.x+A.z*A.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Md(e.vertices,e.indices,e.radius,e.details)}}class nT extends Md{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new nT(e.radius,e.detail)}}const Uw=new de,kw=new de,BC=new de,zw=new ua;class cV extends hn{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),s=Math.cos(Qp*t),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,c=[0,0,0],f=["a","b","c"],d=new Array(3),m={},v=[];for(let b=0;b<l;b+=3){o?(c[0]=o.getX(b),c[1]=o.getX(b+1),c[2]=o.getX(b+2)):(c[0]=b,c[1]=b+1,c[2]=b+2);const{a:x,b:w,c:_}=zw;if(x.fromBufferAttribute(a,c[0]),w.fromBufferAttribute(a,c[1]),_.fromBufferAttribute(a,c[2]),zw.getNormal(BC),d[0]=`${Math.round(x.x*r)},${Math.round(x.y*r)},${Math.round(x.z*r)}`,d[1]=`${Math.round(w.x*r)},${Math.round(w.y*r)},${Math.round(w.z*r)}`,d[2]=`${Math.round(_.x*r)},${Math.round(_.y*r)},${Math.round(_.z*r)}`,!(d[0]===d[1]||d[1]===d[2]||d[2]===d[0]))for(let A=0;A<3;A++){const T=(A+1)%3,E=d[A],C=d[T],R=zw[f[A]],O=zw[f[T]],I=`${E}_${C}`,L=`${C}_${E}`;L in m&&m[L]?(BC.dot(m[L].normal)<=s&&(v.push(R.x,R.y,R.z),v.push(O.x,O.y,O.z)),m[L]=null):I in m||(m[I]={index0:c[A],index1:c[T],normal:BC.clone()})}}for(const b in m)if(m[b]){const{index0:x,index1:w}=m[b];Uw.fromBufferAttribute(a,x),kw.fromBufferAttribute(a,w),v.push(Uw.x,Uw.y,Uw.z),v.push(kw.x,kw.y,kw.z)}this.setAttribute("position",new kt(v,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class gc{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){console.warn("THREE.Curve: .getPoint() not implemented.")}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),s+=i.distanceTo(r),t.push(s),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t=null){const i=this.getLengths();let r=0;const s=i.length;let o;t?o=t:o=e*i[s-1];let a=0,l=s-1,c;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),c=i[r]-o,c<0)a=r+1;else if(c>0)l=r-1;else{l=r;break}if(r=l,i[r]===o)return r/(s-1);const f=i[r],m=i[r+1]-f,v=(o-f)/m;return(r+v)/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),a=this.getPoint(s),l=t||(o.isVector2?new ut:new de);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t=!1){const i=new de,r=[],s=[],o=[],a=new de,l=new Kt;for(let v=0;v<=e;v++){const b=v/e;r[v]=this.getTangentAt(b,new de)}s[0]=new de,o[0]=new de;let c=Number.MAX_VALUE;const f=Math.abs(r[0].x),d=Math.abs(r[0].y),m=Math.abs(r[0].z);f<=c&&(c=f,i.set(1,0,0)),d<=c&&(c=d,i.set(0,1,0)),m<=c&&i.set(0,0,1),a.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let v=1;v<=e;v++){if(s[v]=s[v-1].clone(),o[v]=o[v-1].clone(),a.crossVectors(r[v-1],r[v]),a.length()>Number.EPSILON){a.normalize();const b=Math.acos(Qt(r[v-1].dot(r[v]),-1,1));s[v].applyMatrix4(l.makeRotationAxis(a,b))}o[v].crossVectors(r[v],s[v])}if(t===!0){let v=Math.acos(Qt(s[0].dot(s[e]),-1,1));v/=e,r[0].dot(a.crossVectors(s[0],s[e]))>0&&(v=-v);for(let b=1;b<=e;b++)s[b].applyMatrix4(l.makeRotationAxis(r[b],v*b)),o[b].crossVectors(r[b],s[b])}return{tangents:r,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class iT extends gc{constructor(e=0,t=0,i=1,r=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t=new ut){const i=t,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(o?s=0:s=r),this.aClockwise===!0&&!o&&(s===r?s=-r:s=s-r);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const f=Math.cos(this.aRotation),d=Math.sin(this.aRotation),m=l-this.aX,v=c-this.aY;l=m*f-v*d+this.aX,c=m*d+v*f+this.aY}return i.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class uV extends iT{constructor(e,t,i,r,s,o){super(e,t,i,i,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function wL(){let n=0,e=0,t=0,i=0;function r(s,o,a,l){n=s,e=a,t=-3*s+3*o-2*a-l,i=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){r(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,f,d){let m=(o-s)/c-(a-s)/(c+f)+(a-o)/f,v=(a-o)/f-(l-o)/(f+d)+(l-a)/d;m*=f,v*=f,r(o,a,m,v)},calc:function(s){const o=s*s,a=o*s;return n+e*s+t*o+i*a}}}const Fw=new de,VC=new wL,GC=new wL,HC=new wL;class rT extends gc{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new de){const i=t,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let c,f;this.closed||a>0?c=r[(a-1)%s]:(Fw.subVectors(r[0],r[1]).add(r[0]),c=Fw);const d=r[a%s],m=r[(a+1)%s];if(this.closed||a+2<s?f=r[(a+2)%s]:(Fw.subVectors(r[s-1],r[s-2]).add(r[s-1]),f=Fw),this.curveType==="centripetal"||this.curveType==="chordal"){const v=this.curveType==="chordal"?.5:.25;let b=Math.pow(c.distanceToSquared(d),v),x=Math.pow(d.distanceToSquared(m),v),w=Math.pow(m.distanceToSquared(f),v);x<1e-4&&(x=1),b<1e-4&&(b=x),w<1e-4&&(w=x),VC.initNonuniformCatmullRom(c.x,d.x,m.x,f.x,b,x,w),GC.initNonuniformCatmullRom(c.y,d.y,m.y,f.y,b,x,w),HC.initNonuniformCatmullRom(c.z,d.z,m.z,f.z,b,x,w)}else this.curveType==="catmullrom"&&(VC.initCatmullRom(c.x,d.x,m.x,f.x,this.tension),GC.initCatmullRom(c.y,d.y,m.y,f.y,this.tension),HC.initCatmullRom(c.z,d.z,m.z,f.z,this.tension));return i.set(VC.calc(l),GC.calc(l),HC.calc(l)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new de().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function z2(n,e,t,i,r){const s=(i-e)*.5,o=(r-t)*.5,a=n*n,l=n*a;return(2*t-2*i+s+o)*l+(-3*t+3*i-2*s-o)*a+s*n+t}function fre(n,e){const t=1-n;return t*t*e}function hre(n,e){return 2*(1-n)*n*e}function dre(n,e){return n*n*e}function Yb(n,e,t,i){return fre(n,e)+hre(n,t)+dre(n,i)}function pre(n,e){const t=1-n;return t*t*t*e}function mre(n,e){const t=1-n;return 3*t*t*n*e}function gre(n,e){return 3*(1-n)*n*n*e}function vre(n,e){return n*n*n*e}function Zb(n,e,t,i,r){return pre(n,e)+mre(n,t)+gre(n,i)+vre(n,r)}class SL extends gc{constructor(e=new ut,t=new ut,i=new ut,r=new ut){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new ut){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(Zb(e,r.x,s.x,o.x,a.x),Zb(e,r.y,s.y,o.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class fV extends gc{constructor(e=new de,t=new de,i=new de,r=new de){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new de){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(Zb(e,r.x,s.x,o.x,a.x),Zb(e,r.y,s.y,o.y,a.y),Zb(e,r.z,s.z,o.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class EL extends gc{constructor(e=new ut,t=new ut){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new ut){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new ut){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class ML extends gc{constructor(e=new de,t=new de){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new de){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new de){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class TL extends gc{constructor(e=new ut,t=new ut,i=new ut){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new ut){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(Yb(e,r.x,s.x,o.x),Yb(e,r.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class sT extends gc{constructor(e=new de,t=new de,i=new de){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new de){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(Yb(e,r.x,s.x,o.x),Yb(e,r.y,s.y,o.y),Yb(e,r.z,s.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class AL extends gc{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new ut){const i=t,r=this.points,s=(r.length-1)*e,o=Math.floor(s),a=s-o,l=r[o===0?o:o-1],c=r[o],f=r[o>r.length-2?r.length-1:o+1],d=r[o>r.length-3?r.length-1:o+2];return i.set(z2(a,l.x,c.x,f.x,d.x),z2(a,l.y,c.y,f.y,d.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new ut().fromArray(r))}return this}}var JE=Object.freeze({__proto__:null,ArcCurve:uV,CatmullRomCurve3:rT,CubicBezierCurve:SL,CubicBezierCurve3:fV,EllipseCurve:iT,LineCurve:EL,LineCurve3:ML,QuadraticBezierCurve:TL,QuadraticBezierCurve3:sT,SplineCurve:AL});class hV extends gc{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const i=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new JE[i](t,e))}return this}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const o=r[s]-i,a=this.curves[s],l=a.getLength(),c=l===0?0:1-o/l;return a.getPointAt(c,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let c=0;c<l.length;c++){const f=l[c];i&&i.equals(f)||(t.push(f),i=f)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(new JE[r.type]().fromJSON(r))}return this}}let eM=class extends hV{constructor(e){super(),this.type="Path",this.currentPoint=new ut,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new EL(this.currentPoint.clone(),new ut(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const s=new TL(this.currentPoint.clone(),new ut(e,t),new ut(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,s,o){const a=new SL(this.currentPoint.clone(),new ut(e,t),new ut(i,r),new ut(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new AL(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,i,r,s,o),this}absarc(e,t,i,r,s,o){return this.absellipse(e,t,i,i,r,s,o),this}ellipse(e,t,i,r,s,o,a,l){const c=this.currentPoint.x,f=this.currentPoint.y;return this.absellipse(e+c,t+f,i,r,s,o,a,l),this}absellipse(e,t,i,r,s,o,a,l){const c=new iT(e,t,i,r,s,o,a,l);if(this.curves.length>0){const d=c.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(c);const f=c.getPoint(1);return this.currentPoint.copy(f),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}};class ud extends eM{constructor(e){super(e),this.uuid=Pa(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(new eM().fromJSON(r))}return this}}function yre(n,e,t=2){const i=e&&e.length,r=i?e[0]*t:n.length;let s=dV(n,0,r,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,c;if(i&&(s=Sre(n,e,s,t)),n.length>80*t){a=1/0,l=1/0;let f=-1/0,d=-1/0;for(let m=t;m<r;m+=t){const v=n[m],b=n[m+1];v<a&&(a=v),b<l&&(l=b),v>f&&(f=v),b>d&&(d=b)}c=Math.max(f-a,d-l),c=c!==0?32767/c:0}return E_(s,o,t,a,l,c,0),o}function dV(n,e,t,i,r){let s;if(r===Ire(n,e,t,i)>0)for(let o=e;o<t;o+=i)s=F2(o/i|0,n[o],n[o+1],s);else for(let o=t-i;o>=e;o-=i)s=F2(o/i|0,n[o],n[o+1],s);return s&&z0(s,s.next)&&(T_(s),s=s.next),s}function um(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(z0(t,t.next)||or(t.prev,t,t.next)===0)){if(T_(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function E_(n,e,t,i,r,s,o){if(!n)return;!o&&s&&Cre(n,i,r,s);let a=n;for(;n.prev!==n.next;){const l=n.prev,c=n.next;if(s?_re(n,i,r,s):bre(n)){e.push(l.i,n.i,c.i),T_(n),n=c.next,a=c.next;continue}if(n=c,n===a){o?o===1?(n=xre(um(n),e),E_(n,e,t,i,r,s,2)):o===2&&wre(n,e,t,i,r,s):E_(um(n),e,t,i,r,s,1);break}}}function bre(n){const e=n.prev,t=n,i=n.next;if(or(e,t,i)>=0)return!1;const r=e.x,s=t.x,o=i.x,a=e.y,l=t.y,c=i.y,f=Math.min(r,s,o),d=Math.min(a,l,c),m=Math.max(r,s,o),v=Math.max(a,l,c);let b=i.next;for(;b!==e;){if(b.x>=f&&b.x<=m&&b.y>=d&&b.y<=v&&Cb(r,a,s,l,o,c,b.x,b.y)&&or(b.prev,b,b.next)>=0)return!1;b=b.next}return!0}function _re(n,e,t,i){const r=n.prev,s=n,o=n.next;if(or(r,s,o)>=0)return!1;const a=r.x,l=s.x,c=o.x,f=r.y,d=s.y,m=o.y,v=Math.min(a,l,c),b=Math.min(f,d,m),x=Math.max(a,l,c),w=Math.max(f,d,m),_=cD(v,b,e,t,i),A=cD(x,w,e,t,i);let T=n.prevZ,E=n.nextZ;for(;T&&T.z>=_&&E&&E.z<=A;){if(T.x>=v&&T.x<=x&&T.y>=b&&T.y<=w&&T!==r&&T!==o&&Cb(a,f,l,d,c,m,T.x,T.y)&&or(T.prev,T,T.next)>=0||(T=T.prevZ,E.x>=v&&E.x<=x&&E.y>=b&&E.y<=w&&E!==r&&E!==o&&Cb(a,f,l,d,c,m,E.x,E.y)&&or(E.prev,E,E.next)>=0))return!1;E=E.nextZ}for(;T&&T.z>=_;){if(T.x>=v&&T.x<=x&&T.y>=b&&T.y<=w&&T!==r&&T!==o&&Cb(a,f,l,d,c,m,T.x,T.y)&&or(T.prev,T,T.next)>=0)return!1;T=T.prevZ}for(;E&&E.z<=A;){if(E.x>=v&&E.x<=x&&E.y>=b&&E.y<=w&&E!==r&&E!==o&&Cb(a,f,l,d,c,m,E.x,E.y)&&or(E.prev,E,E.next)>=0)return!1;E=E.nextZ}return!0}function xre(n,e){let t=n;do{const i=t.prev,r=t.next.next;!z0(i,r)&&mV(i,t,t.next,r)&&M_(i,r)&&M_(r,i)&&(e.push(i.i,t.i,r.i),T_(t),T_(t.next),t=n=r),t=t.next}while(t!==n);return um(t)}function wre(n,e,t,i,r,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&Ore(o,a)){let l=gV(o,a);o=um(o,o.next),l=um(l,l.next),E_(o,e,t,i,r,s,0),E_(l,e,t,i,r,s,0);return}a=a.next}o=o.next}while(o!==n)}function Sre(n,e,t,i){const r=[];for(let s=0,o=e.length;s<o;s++){const a=e[s]*i,l=s<o-1?e[s+1]*i:n.length,c=dV(n,a,l,i,!1);c===c.next&&(c.steiner=!0),r.push(Dre(c))}r.sort(Ere);for(let s=0;s<r.length;s++)t=Mre(r[s],t);return t}function Ere(n,e){let t=n.x-e.x;if(t===0&&(t=n.y-e.y,t===0)){const i=(n.next.y-n.y)/(n.next.x-n.x),r=(e.next.y-e.y)/(e.next.x-e.x);t=i-r}return t}function Mre(n,e){const t=Tre(n,e);if(!t)return e;const i=gV(t,n);return um(i,i.next),um(t,t.next)}function Tre(n,e){let t=e;const i=n.x,r=n.y;let s=-1/0,o;if(z0(n,t))return t;do{if(z0(n,t.next))return t.next;if(r<=t.y&&r>=t.next.y&&t.next.y!==t.y){const d=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(d<=i&&d>s&&(s=d,o=t.x<t.next.x?t:t.next,d===i))return o}t=t.next}while(t!==e);if(!o)return null;const a=o,l=o.x,c=o.y;let f=1/0;t=o;do{if(i>=t.x&&t.x>=l&&i!==t.x&&pV(r<c?i:s,r,l,c,r<c?s:i,r,t.x,t.y)){const d=Math.abs(r-t.y)/(i-t.x);M_(t,n)&&(d<f||d===f&&(t.x>o.x||t.x===o.x&&Are(o,t)))&&(o=t,f=d)}t=t.next}while(t!==a);return o}function Are(n,e){return or(n.prev,n,e.prev)<0&&or(e.next,n,n.next)<0}function Cre(n,e,t,i){let r=n;do r.z===0&&(r.z=cD(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,Rre(r)}function Rre(n){let e,t=1;do{let i=n,r;n=null;let s=null;for(e=0;i;){e++;let o=i,a=0;for(let c=0;c<t&&(a++,o=o.nextZ,!!o);c++);let l=t;for(;a>0||l>0&&o;)a!==0&&(l===0||!o||i.z<=o.z)?(r=i,i=i.nextZ,a--):(r=o,o=o.nextZ,l--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;i=o}s.nextZ=null,t*=2}while(e>1);return n}function cD(n,e,t,i,r){return n=(n-t)*r|0,e=(e-i)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function Dre(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function pV(n,e,t,i,r,s,o,a){return(r-o)*(e-a)>=(n-o)*(s-a)&&(n-o)*(i-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(r-o)*(i-a)}function Cb(n,e,t,i,r,s,o,a){return!(n===o&&e===a)&&pV(n,e,t,i,r,s,o,a)}function Ore(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!Lre(n,e)&&(M_(n,e)&&M_(e,n)&&Pre(n,e)&&(or(n.prev,n,e.prev)||or(n,e.prev,e))||z0(n,e)&&or(n.prev,n,n.next)>0&&or(e.prev,e,e.next)>0)}function or(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function z0(n,e){return n.x===e.x&&n.y===e.y}function mV(n,e,t,i){const r=Vw(or(n,e,t)),s=Vw(or(n,e,i)),o=Vw(or(t,i,n)),a=Vw(or(t,i,e));return!!(r!==s&&o!==a||r===0&&Bw(n,t,e)||s===0&&Bw(n,i,e)||o===0&&Bw(t,n,i)||a===0&&Bw(t,e,i))}function Bw(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function Vw(n){return n>0?1:n<0?-1:0}function Lre(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&mV(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function M_(n,e){return or(n.prev,n,n.next)<0?or(n,e,n.next)>=0&&or(n,n.prev,e)>=0:or(n,e,n.prev)<0||or(n,n.next,e)<0}function Pre(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function gV(n,e){const t=uD(n.i,n.x,n.y),i=uD(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function F2(n,e,t,i){const r=uD(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function T_(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function uD(n,e,t){return{i:n,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function Ire(n,e,t,i){let r=0;for(let s=e,o=t-i;s<t;s+=i)r+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return r}class Nre{static triangulate(e,t,i=2){return yre(e,t,i)}}class cc{static area(e){const t=e.length;let i=0;for(let r=t-1,s=0;s<t;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return i*.5}static isClockWise(e){return cc.area(e)<0}static triangulateShape(e,t){const i=[],r=[],s=[];B2(e),V2(i,e);let o=e.length;t.forEach(B2);for(let l=0;l<t.length;l++)r.push(o),o+=t[l].length,V2(i,t[l]);const a=Nre.triangulate(i,r);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function B2(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function V2(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class oT extends hn{constructor(e=new ud([new ut(.5,.5),new ut(-.5,.5),new ut(-.5,-.5),new ut(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let a=0,l=e.length;a<l;a++){const c=e[a];o(c)}this.setAttribute("position",new kt(r,3)),this.setAttribute("uv",new kt(s,2)),this.computeVertexNormals();function o(a){const l=[],c=t.curveSegments!==void 0?t.curveSegments:12,f=t.steps!==void 0?t.steps:1,d=t.depth!==void 0?t.depth:1;let m=t.bevelEnabled!==void 0?t.bevelEnabled:!0,v=t.bevelThickness!==void 0?t.bevelThickness:.2,b=t.bevelSize!==void 0?t.bevelSize:v-.1,x=t.bevelOffset!==void 0?t.bevelOffset:0,w=t.bevelSegments!==void 0?t.bevelSegments:3;const _=t.extrudePath,A=t.UVGenerator!==void 0?t.UVGenerator:Ure;let T,E=!1,C,R,O,I;_&&(T=_.getSpacedPoints(f),E=!0,m=!1,C=_.computeFrenetFrames(f,!1),R=new de,O=new de,I=new de),m||(w=0,v=0,b=0,x=0);const L=a.extractPoints(c);let N=L.shape;const V=L.holes;if(!cc.isClockWise(N)){N=N.reverse();for(let ve=0,xe=V.length;ve<xe;ve++){const me=V[ve];cc.isClockWise(me)&&(V[ve]=me.reverse())}}function k(ve){const me=10000000000000001e-36;let Ie=ve[0];for(let Ne=1;Ne<=ve.length;Ne++){const ke=Ne%ve.length,Fe=ve[ke],Ae=Fe.x-Ie.x,tt=Fe.y-Ie.y,se=Ae*Ae+tt*tt,Z=Math.max(Math.abs(Fe.x),Math.abs(Fe.y),Math.abs(Ie.x),Math.abs(Ie.y)),ye=me*Z*Z;if(se<=ye){ve.splice(ke,1),Ne--;continue}Ie=Fe}}k(N),V.forEach(k);const j=V.length,q=N;for(let ve=0;ve<j;ve++){const xe=V[ve];N=N.concat(xe)}function W(ve,xe,me){return xe||console.error("THREE.ExtrudeGeometry: vec does not exist"),ve.clone().addScaledVector(xe,me)}const G=N.length;function K(ve,xe,me){let Ie,Ne,ke;const Fe=ve.x-xe.x,Ae=ve.y-xe.y,tt=me.x-ve.x,se=me.y-ve.y,Z=Fe*Fe+Ae*Ae,ye=Fe*se-Ae*tt;if(Math.abs(ye)>Number.EPSILON){const Y=Math.sqrt(Z),J=Math.sqrt(tt*tt+se*se),re=xe.x-Ae/Y,ge=xe.y+Fe/Y,_e=me.x-se/J,Se=me.y+tt/J,Ue=((_e-re)*se-(Se-ge)*tt)/(Fe*se-Ae*tt);Ie=re+Fe*Ue-ve.x,Ne=ge+Ae*Ue-ve.y;const Me=Ie*Ie+Ne*Ne;if(Me<=2)return new ut(Ie,Ne);ke=Math.sqrt(Me/2)}else{let Y=!1;Fe>Number.EPSILON?tt>Number.EPSILON&&(Y=!0):Fe<-Number.EPSILON?tt<-Number.EPSILON&&(Y=!0):Math.sign(Ae)===Math.sign(se)&&(Y=!0),Y?(Ie=-Ae,Ne=Fe,ke=Math.sqrt(Z)):(Ie=Fe,Ne=Ae,ke=Math.sqrt(Z/2))}return new ut(Ie/ke,Ne/ke)}const te=[];for(let ve=0,xe=q.length,me=xe-1,Ie=ve+1;ve<xe;ve++,me++,Ie++)me===xe&&(me=0),Ie===xe&&(Ie=0),te[ve]=K(q[ve],q[me],q[Ie]);const ie=[];let F,X=te.concat();for(let ve=0,xe=j;ve<xe;ve++){const me=V[ve];F=[];for(let Ie=0,Ne=me.length,ke=Ne-1,Fe=Ie+1;Ie<Ne;Ie++,ke++,Fe++)ke===Ne&&(ke=0),Fe===Ne&&(Fe=0),F[Ie]=K(me[Ie],me[ke],me[Fe]);ie.push(F),X=X.concat(F)}let ee;if(w===0)ee=cc.triangulateShape(q,V);else{const ve=[],xe=[];for(let me=0;me<w;me++){const Ie=me/w,Ne=v*Math.cos(Ie*Math.PI/2),ke=b*Math.sin(Ie*Math.PI/2)+x;for(let Fe=0,Ae=q.length;Fe<Ae;Fe++){const tt=W(q[Fe],te[Fe],ke);Te(tt.x,tt.y,-Ne),Ie===0&&ve.push(tt)}for(let Fe=0,Ae=j;Fe<Ae;Fe++){const tt=V[Fe];F=ie[Fe];const se=[];for(let Z=0,ye=tt.length;Z<ye;Z++){const Y=W(tt[Z],F[Z],ke);Te(Y.x,Y.y,-Ne),Ie===0&&se.push(Y)}Ie===0&&xe.push(se)}}ee=cc.triangulateShape(ve,xe)}const le=ee.length,oe=b+x;for(let ve=0;ve<G;ve++){const xe=m?W(N[ve],X[ve],oe):N[ve];E?(O.copy(C.normals[0]).multiplyScalar(xe.x),R.copy(C.binormals[0]).multiplyScalar(xe.y),I.copy(T[0]).add(O).add(R),Te(I.x,I.y,I.z)):Te(xe.x,xe.y,0)}for(let ve=1;ve<=f;ve++)for(let xe=0;xe<G;xe++){const me=m?W(N[xe],X[xe],oe):N[xe];E?(O.copy(C.normals[ve]).multiplyScalar(me.x),R.copy(C.binormals[ve]).multiplyScalar(me.y),I.copy(T[ve]).add(O).add(R),Te(I.x,I.y,I.z)):Te(me.x,me.y,d/f*ve)}for(let ve=w-1;ve>=0;ve--){const xe=ve/w,me=v*Math.cos(xe*Math.PI/2),Ie=b*Math.sin(xe*Math.PI/2)+x;for(let Ne=0,ke=q.length;Ne<ke;Ne++){const Fe=W(q[Ne],te[Ne],Ie);Te(Fe.x,Fe.y,d+me)}for(let Ne=0,ke=V.length;Ne<ke;Ne++){const Fe=V[Ne];F=ie[Ne];for(let Ae=0,tt=Fe.length;Ae<tt;Ae++){const se=W(Fe[Ae],F[Ae],Ie);E?Te(se.x,se.y+T[f-1].y,T[f-1].x+me):Te(se.x,se.y,d+me)}}}ue(),he();function ue(){const ve=r.length/3;if(m){let xe=0,me=G*xe;for(let Ie=0;Ie<le;Ie++){const Ne=ee[Ie];Ee(Ne[2]+me,Ne[1]+me,Ne[0]+me)}xe=f+w*2,me=G*xe;for(let Ie=0;Ie<le;Ie++){const Ne=ee[Ie];Ee(Ne[0]+me,Ne[1]+me,Ne[2]+me)}}else{for(let xe=0;xe<le;xe++){const me=ee[xe];Ee(me[2],me[1],me[0])}for(let xe=0;xe<le;xe++){const me=ee[xe];Ee(me[0]+G*f,me[1]+G*f,me[2]+G*f)}}i.addGroup(ve,r.length/3-ve,0)}function he(){const ve=r.length/3;let xe=0;be(q,xe),xe+=q.length;for(let me=0,Ie=V.length;me<Ie;me++){const Ne=V[me];be(Ne,xe),xe+=Ne.length}i.addGroup(ve,r.length/3-ve,1)}function be(ve,xe){let me=ve.length;for(;--me>=0;){const Ie=me;let Ne=me-1;Ne<0&&(Ne=ve.length-1);for(let ke=0,Fe=f+w*2;ke<Fe;ke++){const Ae=G*ke,tt=G*(ke+1),se=xe+Ie+Ae,Z=xe+Ne+Ae,ye=xe+Ne+tt,Y=xe+Ie+tt;Ce(se,Z,ye,Y)}}}function Te(ve,xe,me){l.push(ve),l.push(xe),l.push(me)}function Ee(ve,xe,me){we(ve),we(xe),we(me);const Ie=r.length/3,Ne=A.generateTopUV(i,r,Ie-3,Ie-2,Ie-1);ae(Ne[0]),ae(Ne[1]),ae(Ne[2])}function Ce(ve,xe,me,Ie){we(ve),we(xe),we(Ie),we(xe),we(me),we(Ie);const Ne=r.length/3,ke=A.generateSideWallUV(i,r,Ne-6,Ne-3,Ne-2,Ne-1);ae(ke[0]),ae(ke[1]),ae(ke[3]),ae(ke[1]),ae(ke[2]),ae(ke[3])}function we(ve){r.push(l[ve*3+0]),r.push(l[ve*3+1]),r.push(l[ve*3+2])}function ae(ve){s.push(ve.x),s.push(ve.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return kre(t,i,e)}static fromJSON(e,t){const i=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];i.push(a)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new JE[r.type]().fromJSON(r)),new oT(i,e.options)}}const Ure={generateTopUV:function(n,e,t,i,r){const s=e[t*3],o=e[t*3+1],a=e[i*3],l=e[i*3+1],c=e[r*3],f=e[r*3+1];return[new ut(s,o),new ut(a,l),new ut(c,f)]},generateSideWallUV:function(n,e,t,i,r,s){const o=e[t*3],a=e[t*3+1],l=e[t*3+2],c=e[i*3],f=e[i*3+1],d=e[i*3+2],m=e[r*3],v=e[r*3+1],b=e[r*3+2],x=e[s*3],w=e[s*3+1],_=e[s*3+2];return Math.abs(a-f)<Math.abs(o-c)?[new ut(o,1-l),new ut(c,1-d),new ut(m,1-b),new ut(x,1-_)]:[new ut(a,1-l),new ut(f,1-d),new ut(v,1-b),new ut(w,1-_)]}};function kre(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){const s=n[i];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class aT extends Md{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new aT(e.radius,e.detail)}}class lT extends hn{constructor(e=[new ut(0,-.5),new ut(.5,0),new ut(0,.5)],t=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=Math.floor(t),r=Qt(r,0,Math.PI*2);const s=[],o=[],a=[],l=[],c=[],f=1/t,d=new de,m=new ut,v=new de,b=new de,x=new de;let w=0,_=0;for(let A=0;A<=e.length-1;A++)switch(A){case 0:w=e[A+1].x-e[A].x,_=e[A+1].y-e[A].y,v.x=_*1,v.y=-w,v.z=_*0,x.copy(v),v.normalize(),l.push(v.x,v.y,v.z);break;case e.length-1:l.push(x.x,x.y,x.z);break;default:w=e[A+1].x-e[A].x,_=e[A+1].y-e[A].y,v.x=_*1,v.y=-w,v.z=_*0,b.copy(v),v.x+=x.x,v.y+=x.y,v.z+=x.z,v.normalize(),l.push(v.x,v.y,v.z),x.copy(b)}for(let A=0;A<=t;A++){const T=i+A*f*r,E=Math.sin(T),C=Math.cos(T);for(let R=0;R<=e.length-1;R++){d.x=e[R].x*E,d.y=e[R].y,d.z=e[R].x*C,o.push(d.x,d.y,d.z),m.x=A/t,m.y=R/(e.length-1),a.push(m.x,m.y);const O=l[3*R+0]*E,I=l[3*R+1],L=l[3*R+0]*C;c.push(O,I,L)}}for(let A=0;A<t;A++)for(let T=0;T<e.length-1;T++){const E=T+A*e.length,C=E,R=E+e.length,O=E+e.length+1,I=E+1;s.push(C,R,I),s.push(O,I,R)}this.setIndex(s),this.setAttribute("position",new kt(o,3)),this.setAttribute("uv",new kt(a,2)),this.setAttribute("normal",new kt(c,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new lT(e.points,e.segments,e.phiStart,e.phiLength)}}class ix extends Md{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new ix(e.radius,e.detail)}}class Zf extends hn{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,o=t/2,a=Math.floor(i),l=Math.floor(r),c=a+1,f=l+1,d=e/a,m=t/l,v=[],b=[],x=[],w=[];for(let _=0;_<f;_++){const A=_*m-o;for(let T=0;T<c;T++){const E=T*d-s;b.push(E,-A,0),x.push(0,0,1),w.push(T/a),w.push(1-_/l)}}for(let _=0;_<l;_++)for(let A=0;A<a;A++){const T=A+c*_,E=A+c*(_+1),C=A+1+c*(_+1),R=A+1+c*_;v.push(T,E,R),v.push(E,C,R)}this.setIndex(v),this.setAttribute("position",new kt(b,3)),this.setAttribute("normal",new kt(x,3)),this.setAttribute("uv",new kt(w,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Zf(e.width,e.height,e.widthSegments,e.heightSegments)}}class cT extends hn{constructor(e=.5,t=1,i=32,r=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:s,thetaLength:o},i=Math.max(3,i),r=Math.max(1,r);const a=[],l=[],c=[],f=[];let d=e;const m=(t-e)/r,v=new de,b=new ut;for(let x=0;x<=r;x++){for(let w=0;w<=i;w++){const _=s+w/i*o;v.x=d*Math.cos(_),v.y=d*Math.sin(_),l.push(v.x,v.y,v.z),c.push(0,0,1),b.x=(v.x/t+1)/2,b.y=(v.y/t+1)/2,f.push(b.x,b.y)}d+=m}for(let x=0;x<r;x++){const w=x*(i+1);for(let _=0;_<i;_++){const A=_+w,T=A,E=A+i+1,C=A+i+2,R=A+1;a.push(T,E,R),a.push(E,C,R)}}this.setIndex(a),this.setAttribute("position",new kt(l,3)),this.setAttribute("normal",new kt(c,3)),this.setAttribute("uv",new kt(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new cT(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class uT extends hn{constructor(e=new ud([new ut(0,.5),new ut(-.5,-.5),new ut(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],r=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let f=0;f<e.length;f++)c(e[f]),this.addGroup(a,l,f),a+=l,l=0;this.setIndex(i),this.setAttribute("position",new kt(r,3)),this.setAttribute("normal",new kt(s,3)),this.setAttribute("uv",new kt(o,2));function c(f){const d=r.length/3,m=f.extractPoints(t);let v=m.shape;const b=m.holes;cc.isClockWise(v)===!1&&(v=v.reverse());for(let w=0,_=b.length;w<_;w++){const A=b[w];cc.isClockWise(A)===!0&&(b[w]=A.reverse())}const x=cc.triangulateShape(v,b);for(let w=0,_=b.length;w<_;w++){const A=b[w];v=v.concat(A)}for(let w=0,_=v.length;w<_;w++){const A=v[w];r.push(A.x,A.y,0),s.push(0,0,1),o.push(A.x,A.y)}for(let w=0,_=x.length;w<_;w++){const A=x[w],T=A[0]+d,E=A[1]+d,C=A[2]+d;i.push(T,E,C),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return zre(t,e)}static fromJSON(e,t){const i=[];for(let r=0,s=e.shapes.length;r<s;r++){const o=t[e.shapes[r]];i.push(o)}return new uT(i,e.curveSegments)}}function zre(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}class rx extends hn{constructor(e=1,t=32,i=16,r=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const l=Math.min(o+a,Math.PI);let c=0;const f=[],d=new de,m=new de,v=[],b=[],x=[],w=[];for(let _=0;_<=i;_++){const A=[],T=_/i;let E=0;_===0&&o===0?E=.5/t:_===i&&l===Math.PI&&(E=-.5/t);for(let C=0;C<=t;C++){const R=C/t;d.x=-e*Math.cos(r+R*s)*Math.sin(o+T*a),d.y=e*Math.cos(o+T*a),d.z=e*Math.sin(r+R*s)*Math.sin(o+T*a),b.push(d.x,d.y,d.z),m.copy(d).normalize(),x.push(m.x,m.y,m.z),w.push(R+E,1-T),A.push(c++)}f.push(A)}for(let _=0;_<i;_++)for(let A=0;A<t;A++){const T=f[_][A+1],E=f[_][A],C=f[_+1][A],R=f[_+1][A+1];(_!==0||o>0)&&v.push(T,E,R),(_!==i-1||l<Math.PI)&&v.push(E,C,R)}this.setIndex(v),this.setAttribute("position",new kt(b,3)),this.setAttribute("normal",new kt(x,3)),this.setAttribute("uv",new kt(w,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new rx(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class fT extends Md{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new fT(e.radius,e.detail)}}class hT extends hn{constructor(e=1,t=.4,i=12,r=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:s},i=Math.floor(i),r=Math.floor(r);const o=[],a=[],l=[],c=[],f=new de,d=new de,m=new de;for(let v=0;v<=i;v++)for(let b=0;b<=r;b++){const x=b/r*s,w=v/i*Math.PI*2;d.x=(e+t*Math.cos(w))*Math.cos(x),d.y=(e+t*Math.cos(w))*Math.sin(x),d.z=t*Math.sin(w),a.push(d.x,d.y,d.z),f.x=e*Math.cos(x),f.y=e*Math.sin(x),m.subVectors(d,f).normalize(),l.push(m.x,m.y,m.z),c.push(b/r),c.push(v/i)}for(let v=1;v<=i;v++)for(let b=1;b<=r;b++){const x=(r+1)*v+b-1,w=(r+1)*(v-1)+b-1,_=(r+1)*(v-1)+b,A=(r+1)*v+b;o.push(x,w,A),o.push(w,_,A)}this.setIndex(o),this.setAttribute("position",new kt(a,3)),this.setAttribute("normal",new kt(l,3)),this.setAttribute("uv",new kt(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new hT(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class dT extends hn{constructor(e=1,t=.4,i=64,r=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:s,q:o},i=Math.floor(i),r=Math.floor(r);const a=[],l=[],c=[],f=[],d=new de,m=new de,v=new de,b=new de,x=new de,w=new de,_=new de;for(let T=0;T<=i;++T){const E=T/i*s*Math.PI*2;A(E,s,o,e,v),A(E+.01,s,o,e,b),w.subVectors(b,v),_.addVectors(b,v),x.crossVectors(w,_),_.crossVectors(x,w),x.normalize(),_.normalize();for(let C=0;C<=r;++C){const R=C/r*Math.PI*2,O=-t*Math.cos(R),I=t*Math.sin(R);d.x=v.x+(O*_.x+I*x.x),d.y=v.y+(O*_.y+I*x.y),d.z=v.z+(O*_.z+I*x.z),l.push(d.x,d.y,d.z),m.subVectors(d,v).normalize(),c.push(m.x,m.y,m.z),f.push(T/i),f.push(C/r)}}for(let T=1;T<=i;T++)for(let E=1;E<=r;E++){const C=(r+1)*(T-1)+(E-1),R=(r+1)*T+(E-1),O=(r+1)*T+E,I=(r+1)*(T-1)+E;a.push(C,R,I),a.push(R,O,I)}this.setIndex(a),this.setAttribute("position",new kt(l,3)),this.setAttribute("normal",new kt(c,3)),this.setAttribute("uv",new kt(f,2));function A(T,E,C,R,O){const I=Math.cos(T),L=Math.sin(T),N=C/E*T,V=Math.cos(N);O.x=R*(2+V)*.5*I,O.y=R*(2+V)*L*.5,O.z=R*Math.sin(N)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new dT(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class yd extends hn{constructor(e=new sT(new de(-1,-1,0),new de(-1,1,0),new de(1,1,0)),t=64,i=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new de,l=new de,c=new ut;let f=new de;const d=[],m=[],v=[],b=[];x(),this.setIndex(b),this.setAttribute("position",new kt(d,3)),this.setAttribute("normal",new kt(m,3)),this.setAttribute("uv",new kt(v,2));function x(){for(let T=0;T<t;T++)w(T);w(s===!1?t:0),A(),_()}function w(T){f=e.getPointAt(T/t,f);const E=o.normals[T],C=o.binormals[T];for(let R=0;R<=r;R++){const O=R/r*Math.PI*2,I=Math.sin(O),L=-Math.cos(O);l.x=L*E.x+I*C.x,l.y=L*E.y+I*C.y,l.z=L*E.z+I*C.z,l.normalize(),m.push(l.x,l.y,l.z),a.x=f.x+i*l.x,a.y=f.y+i*l.y,a.z=f.z+i*l.z,d.push(a.x,a.y,a.z)}}function _(){for(let T=1;T<=t;T++)for(let E=1;E<=r;E++){const C=(r+1)*(T-1)+(E-1),R=(r+1)*T+(E-1),O=(r+1)*T+E,I=(r+1)*(T-1)+E;b.push(C,R,I),b.push(R,O,I)}}function A(){for(let T=0;T<=t;T++)for(let E=0;E<=r;E++)c.x=T/t,c.y=E/r,v.push(c.x,c.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new yd(new JE[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class vV extends hn{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,r=new de,s=new de;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let c=0,f=l.length;c<f;++c){const d=l[c],m=d.start,v=d.count;for(let b=m,x=m+v;b<x;b+=3)for(let w=0;w<3;w++){const _=a.getX(b+w),A=a.getX(b+(w+1)%3);r.fromBufferAttribute(o,_),s.fromBufferAttribute(o,A),G2(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let c=0;c<3;c++){const f=3*a+c,d=3*a+(c+1)%3;r.fromBufferAttribute(o,f),s.fromBufferAttribute(o,d),G2(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new kt(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function G2(n,e,t){const i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(r)===!0?!1:(t.add(i),t.add(r),!0)}var H2=Object.freeze({__proto__:null,BoxGeometry:Ed,CapsuleGeometry:eT,CircleGeometry:tT,ConeGeometry:nx,CylinderGeometry:lv,DodecahedronGeometry:nT,EdgesGeometry:cV,ExtrudeGeometry:oT,IcosahedronGeometry:aT,LatheGeometry:lT,OctahedronGeometry:ix,PlaneGeometry:Zf,PolyhedronGeometry:Md,RingGeometry:cT,ShapeGeometry:uT,SphereGeometry:rx,TetrahedronGeometry:fT,TorusGeometry:hT,TorusKnotGeometry:dT,TubeGeometry:yd,WireframeGeometry:vV});class yV extends so{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new yt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class bV extends Al{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class CL extends so{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new yt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new yt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Sd,this.normalScale=new ut(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Io,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class _V extends CL{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new ut(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Qt(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new yt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new yt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new yt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class xV extends so{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new yt(16777215),this.specular=new yt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new yt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Sd,this.normalScale=new ut(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Io,this.combine=J_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class wV extends so{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new yt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new yt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Sd,this.normalScale=new ut(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class SV extends so{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Sd,this.normalScale=new ut(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class EV extends so{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new yt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new yt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Sd,this.normalScale=new ut(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Io,this.combine=J_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class pT extends so{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=z8,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class mT extends so{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class MV extends so{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new yt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Sd,this.normalScale=new ut(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class TV extends No{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Wp(n,e){return!n||n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function AV(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function CV(n){function e(r,s){return n[r]-n[s]}const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i}function fD(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,o=0;o!==i;++s){const a=t[s]*e;for(let l=0;l!==e;++l)r[o++]=n[a+l]}return r}function RL(n,e,t,i){let r=1,s=n[0];for(;s!==void 0&&s[i]===void 0;)s=n[r++];if(s===void 0)return;let o=s[i];if(o!==void 0)if(Array.isArray(o))do o=s[i],o!==void 0&&(e.push(s.time),t.push(...o)),s=n[r++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[i],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[r++];while(s!==void 0);else do o=s[i],o!==void 0&&(e.push(s.time),t.push(o)),s=n[r++];while(s!==void 0)}function Fre(n,e,t,i,r=30){const s=n.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const c=s.tracks[l],f=c.getValueSize(),d=[],m=[];for(let v=0;v<c.times.length;++v){const b=c.times[v]*r;if(!(b<t||b>=i)){d.push(c.times[v]);for(let x=0;x<f;++x)m.push(c.values[v*f+x])}}d.length!==0&&(c.times=Wp(d,c.times.constructor),c.values=Wp(m,c.values.constructor),o.push(c))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function Bre(n,e=0,t=n,i=30){i<=0&&(i=30);const r=t.tracks.length,s=e/i;for(let o=0;o<r;++o){const a=t.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const c=n.tracks.find(function(_){return _.name===a.name&&_.ValueTypeName===l});if(c===void 0)continue;let f=0;const d=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(f=d/3);let m=0;const v=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(m=v/3);const b=a.times.length-1;let x;if(s<=a.times[0]){const _=f,A=d-f;x=a.values.slice(_,A)}else if(s>=a.times[b]){const _=b*d+f,A=_+d-f;x=a.values.slice(_,A)}else{const _=a.createInterpolant(),A=f,T=d-f;_.evaluate(s),x=_.resultBuffer.slice(A,T)}l==="quaternion"&&new Os().fromArray(x).normalize().conjugate().toArray(x);const w=c.times.length;for(let _=0;_<w;++_){const A=_*v+m;if(l==="quaternion")Os.multiplyQuaternionsFlat(c.values,A,x,0,c.values,A);else{const T=v-m*2;for(let E=0;E<T;++E)c.values[A+E]-=x[E]}}}return n.blendMode=cL,n}class Vre{static convertArray(e,t){return Wp(e,t)}static isTypedArray(e){return AV(e)}static getKeyframeOrder(e){return CV(e)}static sortedArray(e,t,i){return fD(e,t,i)}static flattenJSON(e,t,i,r){RL(e,t,i,r)}static subclip(e,t,i,r,s=30){return Fre(e,t,i,r,s)}static makeClipAdditive(e,t=0,i=e,r=30){return Bre(e,t,i,r)}}class sx{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=i+2;;){if(r===void 0){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(s=r,r=t[++i],e<r)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(i=2,s=a);for(let l=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(r=s,s=t[--i-1],e>=s)break t}o=i,i=0;break n}break e}for(;i<o;){const a=i+o>>>1;e<t[a]?o=a:i=a+1}if(r=t[i],s=t[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=i[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class RV extends sx{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Hp,endingEnd:Hp}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],l=r[o];if(a===void 0)switch(this.getSettings_().endingStart){case jp:s=e,a=2*t-i;break;case b_:s=r.length-2,a=t+r[s]-r[s+1];break;default:s=e,a=i}if(l===void 0)switch(this.getSettings_().endingEnd){case jp:o=e,l=2*i-t;break;case b_:o=1,l=i+r[1]-r[0];break;default:o=e-1,l=t}const c=(i-t)*.5,f=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(l-i),this._offsetPrev=s*f,this._offsetNext=o*f}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,f=this._offsetPrev,d=this._offsetNext,m=this._weightPrev,v=this._weightNext,b=(i-t)/(r-t),x=b*b,w=x*b,_=-m*w+2*m*x-m*b,A=(1+m)*w+(-1.5-2*m)*x+(-.5+m)*b+1,T=(-1-v)*w+(1.5+v)*x+.5*b,E=v*w-v*x;for(let C=0;C!==a;++C)s[C]=_*o[f+C]+A*o[c+C]+T*o[l+C]+E*o[d+C];return s}}class DL extends sx{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,f=(i-t)/(r-t),d=1-f;for(let m=0;m!==a;++m)s[m]=o[c+m]*d+o[l+m]*f;return s}}class DV extends sx{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class Cl{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Wp(t,this.TimeBufferType),this.values=Wp(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:Wp(e.times,Array),values:Wp(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new DV(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new DL(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new RV(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case y_:t=this.InterpolantFactoryMethodDiscrete;break;case YE:t=this.InterpolantFactoryMethodLinear;break;case RS:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return y_;case this.InterpolantFactoryMethodLinear:return YE;case this.InterpolantFactoryMethodSmooth:return RS}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&&i[s]<e;)++s;for(;o!==-1&&i[o]>t;)--o;if(++o,s!==0||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=i.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=i[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(r!==void 0&&AV(r))for(let a=0,l=r.length;a!==l;++a){const c=r[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===RS,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=e[a],f=e[a+1];if(c!==f&&(a!==1||c!==e[0]))if(r)l=!0;else{const d=a*i,m=d-i,v=d+i;for(let b=0;b!==i;++b){const x=t[d+b];if(x!==t[m+b]||x!==t[v+b]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const d=a*i,m=o*i;for(let v=0;v!==i;++v)t[m+v]=t[d+v]}++o}}if(s>0){e[o]=e[s];for(let a=s*i,l=o*i,c=0;c!==i;++c)t[l+c]=t[a+c];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}Cl.prototype.ValueTypeName="";Cl.prototype.TimeBufferType=Float32Array;Cl.prototype.ValueBufferType=Float32Array;Cl.prototype.DefaultInterpolation=YE;class gm extends Cl{constructor(e,t,i){super(e,t,i)}}gm.prototype.ValueTypeName="bool";gm.prototype.ValueBufferType=Array;gm.prototype.DefaultInterpolation=y_;gm.prototype.InterpolantFactoryMethodLinear=void 0;gm.prototype.InterpolantFactoryMethodSmooth=void 0;class OL extends Cl{constructor(e,t,i,r){super(e,t,i,r)}}OL.prototype.ValueTypeName="color";class A_ extends Cl{constructor(e,t,i,r){super(e,t,i,r)}}A_.prototype.ValueTypeName="number";class OV extends sx{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(i-t)/(r-t);let c=e*a;for(let f=c+a;c!==f;c+=4)Os.slerpFlat(s,0,o,c-a,o,c,l);return s}}class ox extends Cl{constructor(e,t,i,r){super(e,t,i,r)}InterpolantFactoryMethodLinear(e){return new OV(this.times,this.values,this.getValueSize(),e)}}ox.prototype.ValueTypeName="quaternion";ox.prototype.InterpolantFactoryMethodSmooth=void 0;class vm extends Cl{constructor(e,t,i){super(e,t,i)}}vm.prototype.ValueTypeName="string";vm.prototype.ValueBufferType=Array;vm.prototype.DefaultInterpolation=y_;vm.prototype.InterpolantFactoryMethodLinear=void 0;vm.prototype.InterpolantFactoryMethodSmooth=void 0;class C_ extends Cl{constructor(e,t,i,r){super(e,t,i,r)}}C_.prototype.ValueTypeName="vector";class R_{constructor(e="",t=-1,i=[],r=HM){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=Pa(),this.userData={},this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let o=0,a=i.length;o!==a;++o)t.push(Hre(i[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s.userData=JSON.parse(e.userData||"{}"),s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode,userData:JSON.stringify(e.userData)};for(let s=0,o=i.length;s!==o;++s)t.push(Cl.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],c=[];l.push((a+s-1)%s,a,(a+1)%s),c.push(0,1,0);const f=CV(l);l=fD(l,1,f),c=fD(c,1,f),!r&&l[0]===0&&(l.push(s),c.push(c[0])),o.push(new A_(".morphTargetInfluences["+t[a].name+"]",l,c).scale(1/i))}return new this(e,-1,o)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],f=c.name.match(s);if(f&&f.length>1){const d=f[1];let m=r[d];m||(r[d]=m=[]),m.push(c)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],t,i));return o}static parseAnimation(e,t){if(console.warn("THREE.AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(d,m,v,b,x){if(v.length!==0){const w=[],_=[];RL(v,w,_,b),w.length!==0&&x.push(new d(m,w,_))}},r=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let d=0;d<c.length;d++){const m=c[d].keys;if(!(!m||m.length===0))if(m[0].morphTargets){const v={};let b;for(b=0;b<m.length;b++)if(m[b].morphTargets)for(let x=0;x<m[b].morphTargets.length;x++)v[m[b].morphTargets[x]]=-1;for(const x in v){const w=[],_=[];for(let A=0;A!==m[b].morphTargets.length;++A){const T=m[b];w.push(T.time),_.push(T.morphTarget===x?1:0)}r.push(new A_(".morphTargetInfluence["+x+"]",w,_))}l=v.length*o}else{const v=".bones["+t[d].name+"]";i(C_,v+".position",m,"pos",r),i(ox,v+".quaternion",m,"rot",r),i(C_,v+".scale",m,"scl",r)}}return r.length===0?null:new this(s,l,r,a)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,r=e.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let i=0;i<this.tracks.length;i++)e.push(this.tracks[i].clone());const t=new this.constructor(this.name,this.duration,e,this.blendMode);return t.userData=JSON.parse(JSON.stringify(this.userData)),t}toJSON(){return this.constructor.toJSON(this)}}function Gre(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return A_;case"vector":case"vector2":case"vector3":case"vector4":return C_;case"color":return OL;case"quaternion":return ox;case"bool":case"boolean":return gm;case"string":return vm}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function Hre(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=Gre(n.type);if(n.times===void 0){const t=[],i=[];RL(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const du={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class LL{constructor(e,t,i){const r=this;let s=!1,o=0,a=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.abortController=new AbortController,this.itemStart=function(f){a++,s===!1&&r.onStart!==void 0&&r.onStart(f,o,a),s=!0},this.itemEnd=function(f){o++,r.onProgress!==void 0&&r.onProgress(f,o,a),o===a&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(f){r.onError!==void 0&&r.onError(f)},this.resolveURL=function(f){return l?l(f):f},this.setURLModifier=function(f){return l=f,this},this.addHandler=function(f,d){return c.push(f,d),this},this.removeHandler=function(f){const d=c.indexOf(f);return d!==-1&&c.splice(d,2),this},this.getHandler=function(f){for(let d=0,m=c.length;d<m;d+=2){const v=c[d],b=c[d+1];if(v.global&&(v.lastIndex=0),v.test(f))return b}return null},this.abort=function(){return this.abortController.abort(),this.abortController=new AbortController,this}}}const LV=new LL;class ma{constructor(e){this.manager=e!==void 0?e:LV,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,s){i.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}abort(){return this}}ma.DEFAULT_MATERIAL_NAME="__DEFAULT";const vf={};class jre extends Error{constructor(e,t){super(e),this.response=t}}class $f extends ma{constructor(e){super(e),this.mimeType="",this.responseType="",this._abortController=new AbortController}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=du.get(`file:${e}`);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(vf[e]!==void 0){vf[e].push({onLoad:t,onProgress:i,onError:r});return}vf[e]=[],vf[e].push({onLoad:t,onProgress:i,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin",signal:typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const f=vf[e],d=c.body.getReader(),m=c.headers.get("X-File-Size")||c.headers.get("Content-Length"),v=m?parseInt(m):0,b=v!==0;let x=0;const w=new ReadableStream({start(_){A();function A(){d.read().then(({done:T,value:E})=>{if(T)_.close();else{x+=E.byteLength;const C=new ProgressEvent("progress",{lengthComputable:b,loaded:x,total:v});for(let R=0,O=f.length;R<O;R++){const I=f[R];I.onProgress&&I.onProgress(C)}_.enqueue(E),A()}},T=>{_.error(T)})}}});return new Response(w)}else throw new jre(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(f=>new DOMParser().parseFromString(f,a));case"json":return c.json();default:if(a==="")return c.text();{const d=/charset="?([^;"\s]*)"?/i.exec(a),m=d&&d[1]?d[1].toLowerCase():void 0,v=new TextDecoder(m);return c.arrayBuffer().then(b=>v.decode(b))}}}).then(c=>{du.add(`file:${e}`,c);const f=vf[e];delete vf[e];for(let d=0,m=f.length;d<m;d++){const v=f[d];v.onLoad&&v.onLoad(c)}}).catch(c=>{const f=vf[e];if(f===void 0)throw this.manager.itemError(e),c;delete vf[e];for(let d=0,m=f.length;d<m;d++){const v=f[d];v.onError&&v.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}class Wre extends ma{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new $f(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t=[];for(let i=0;i<e.length;i++){const r=R_.parse(e[i]);t.push(r)}return t}}class $re extends ma{constructor(e){super(e)}load(e,t,i,r){const s=this,o=[],a=new JM,l=new $f(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let c=0;function f(d){l.load(e[d],function(m){const v=s.parse(m,!0);o[d]={width:v.width,height:v.height,format:v.format,mipmaps:v.mipmaps},c+=1,c===6&&(v.mipmapCount===1&&(a.minFilter=br),a.image=o,a.format=v.format,a.needsUpdate=!0,t&&t(a))},i,r)}if(Array.isArray(e))for(let d=0,m=e.length;d<m;++d)f(d);else l.load(e,function(d){const m=s.parse(d,!0);if(m.isCubemap){const v=m.mipmaps.length/m.mipmapCount;for(let b=0;b<v;b++){o[b]={mipmaps:[]};for(let x=0;x<m.mipmapCount;x++)o[b].mipmaps.push(m.mipmaps[b*m.mipmapCount+x]),o[b].format=m.format,o[b].width=m.width,o[b].height=m.height}a.image=o}else a.image.width=m.width,a.image.height=m.height,a.mipmaps=m.mipmaps;m.mipmapCount===1&&(a.minFilter=br),a.format=m.format,a.needsUpdate=!0,t&&t(a)},i,r);return a}}const Vg=new WeakMap;class D_ extends ma{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=du.get(`image:${e}`);if(o!==void 0){if(o.complete===!0)s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0);else{let d=Vg.get(o);d===void 0&&(d=[],Vg.set(o,d)),d.push({onLoad:t,onError:r})}return o}const a=w_("img");function l(){f(),t&&t(this);const d=Vg.get(this)||[];for(let m=0;m<d.length;m++){const v=d[m];v.onLoad&&v.onLoad(this)}Vg.delete(this),s.manager.itemEnd(e)}function c(d){f(),r&&r(d),du.remove(`image:${e}`);const m=Vg.get(this)||[];for(let v=0;v<m.length;v++){const b=m[v];b.onError&&b.onError(d)}Vg.delete(this),s.manager.itemError(e),s.manager.itemEnd(e)}function f(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),du.add(`image:${e}`,a),s.manager.itemStart(e),a.src=e,a}}class qre extends ma{constructor(e){super(e)}load(e,t,i,r){const s=new tx;s.colorSpace=Qs;const o=new D_(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(c){o.load(e[c],function(f){s.images[c]=f,a++,a===6&&(s.needsUpdate=!0,t&&t(s))},void 0,r)}for(let c=0;c<e.length;++c)l(c);return s}}class Xre extends ma{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new yu,a=new $f(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){let c;try{c=s.parse(l)}catch(f){if(r!==void 0)r(f);else{console.error(f);return}}c.image!==void 0?o.image=c.image:c.data!==void 0&&(o.image.width=c.width,o.image.height=c.height,o.image.data=c.data),o.wrapS=c.wrapS!==void 0?c.wrapS:_l,o.wrapT=c.wrapT!==void 0?c.wrapT:_l,o.magFilter=c.magFilter!==void 0?c.magFilter:br,o.minFilter=c.minFilter!==void 0?c.minFilter:br,o.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.colorSpace!==void 0&&(o.colorSpace=c.colorSpace),c.flipY!==void 0&&(o.flipY=c.flipY),c.format!==void 0&&(o.format=c.format),c.type!==void 0&&(o.type=c.type),c.mipmaps!==void 0&&(o.mipmaps=c.mipmaps,o.minFilter=hu),c.mipmapCount===1&&(o.minFilter=br),c.generateMipmaps!==void 0&&(o.generateMipmaps=c.generateMipmaps),o.needsUpdate=!0,t&&t(o,c)},i,r),o}}class PV extends ma{constructor(e){super(e)}load(e,t,i,r){const s=new ur,o=new D_(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},i,r),s}}class Td extends Jn{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new yt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}class IV extends Td{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Jn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new yt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const jC=new Kt,j2=new de,W2=new de;class PL{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new ut(512,512),this.mapType=Tl,this.map=null,this.mapPass=null,this.matrix=new Kt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new mm,this._frameExtents=new ut(1,1),this._viewportCount=1,this._viewports=[new Gn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;j2.setFromMatrixPosition(e.matrixWorld),t.position.copy(j2),W2.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(W2),t.updateMatrixWorld(),jC.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(jC,t.coordinateSystem,t.reversedDepth),t.reversedDepth?i.set(.5,0,0,.5,0,.5,0,.5,0,0,1,0,0,0,0,1):i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(jC)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class Yre extends PL{constructor(){super(new Fr(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1,this.aspect=1}updateMatrices(e){const t=this.camera,i=N0*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height*this.aspect,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class NV extends Td{constructor(e,t,i=0,r=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Jn.DEFAULT_UP),this.updateMatrix(),this.target=new Jn,this.distance=i,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new Yre}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const $2=new Kt,Qy=new de,WC=new de;class Zre extends PL{constructor(){super(new Fr(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new ut(4,2),this._viewportCount=6,this._viewports=[new Gn(2,1,1,1),new Gn(0,1,1,1),new Gn(3,1,1,1),new Gn(1,1,1,1),new Gn(3,0,1,1),new Gn(1,0,1,1)],this._cubeDirections=[new de(1,0,0),new de(-1,0,0),new de(0,0,1),new de(0,0,-1),new de(0,1,0),new de(0,-1,0)],this._cubeUps=[new de(0,1,0),new de(0,1,0),new de(0,1,0),new de(0,1,0),new de(0,0,1),new de(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),Qy.setFromMatrixPosition(e.matrixWorld),i.position.copy(Qy),WC.copy(i.position),WC.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(WC),i.updateMatrixWorld(),r.makeTranslation(-Qy.x,-Qy.y,-Qy.z),$2.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix($2,i.coordinateSystem,i.reversedDepth)}}class UV extends Td{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new Zre}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class ym extends $M{constructor(e=-1,t=1,i=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,o=i+e,a=r+t,l=r-t;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,f=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=f*this.view.offsetY,l=a-f*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class Kre extends PL{constructor(){super(new ym(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class kV extends Td{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Jn.DEFAULT_UP),this.updateMatrix(),this.target=new Jn,this.shadow=new Kre}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class zV extends Td{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class FV extends Td{constructor(e,t,i=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class BV{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new de)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*i),t.addScaledVector(o[4],1.092548*(i*r)),t.addScaledVector(o[5],1.092548*(r*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(i*s)),t.addScaledVector(o[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*r),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*i),t.addScaledVector(o[4],2*.429043*i*r),t.addScaledVector(o[5],2*.429043*r*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*i*s),t.addScaledVector(o[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const i=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*i*s,t[8]=.546274*(i*i-r*r)}}class VV extends Td{constructor(e=new BV,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class gT extends ma{constructor(e){super(e),this.textures={}}load(e,t,i,r){const s=this,o=new $f(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t=this.textures;function i(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const r=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new yt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(r.dispersion=e.dispersion),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(r.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(r.depthFunc=e.depthFunc),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(r.blendSrc=e.blendSrc),e.blendDst!==void 0&&(r.blendDst=e.blendDst),e.blendEquation!==void 0&&(r.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(r.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(r.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(r.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&r.blendColor!==void 0&&r.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(r.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==void 0&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(r.uniforms[s]={},o.type){case"t":r.uniforms[s].value=i(o.value);break;case"c":r.uniforms[s].value=new yt().setHex(o.value);break;case"v2":r.uniforms[s].value=new ut().fromArray(o.value);break;case"v3":r.uniforms[s].value=new de().fromArray(o.value);break;case"v4":r.uniforms[s].value=new Gn().fromArray(o.value);break;case"m3":r.uniforms[s].value=new un().fromArray(o.value);break;case"m4":r.uniforms[s].value=new Kt().fromArray(o.value);break;default:r.uniforms[s].value=o.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new ut().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapRotation!==void 0&&r.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new ut().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=i(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return gT.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:yV,SpriteMaterial:vL,RawShaderMaterial:bV,ShaderMaterial:Al,PointsMaterial:bL,MeshPhysicalMaterial:_V,MeshStandardMaterial:CL,MeshPhongMaterial:xV,MeshToonMaterial:wV,MeshNormalMaterial:SV,MeshLambertMaterial:EV,MeshDepthMaterial:pT,MeshDistanceMaterial:mT,MeshBasicMaterial:Yf,MeshMatcapMaterial:MV,LineDashedMaterial:TV,LineBasicMaterial:No,Material:so};return new t[e]}}class hD{static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class IL extends hn{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class GV extends ma{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new $f(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t={},i={};function r(v,b){if(t[b]!==void 0)return t[b];const w=v.interleavedBuffers[b],_=s(v,w.buffer),A=h0(w.type,_),T=new ZM(A,w.stride);return T.uuid=w.uuid,t[b]=T,T}function s(v,b){if(i[b]!==void 0)return i[b];const w=v.arrayBuffers[b],_=new Uint32Array(w).buffer;return i[b]=_,_}const o=e.isInstancedBufferGeometry?new IL:new hn,a=e.data.index;if(a!==void 0){const v=h0(a.type,a.array);o.setIndex(new li(v,1))}const l=e.data.attributes;for(const v in l){const b=l[v];let x;if(b.isInterleavedBufferAttribute){const w=r(e.data,b.data);x=new lm(w,b.itemSize,b.offset,b.normalized)}else{const w=h0(b.type,b.array),_=b.isInstancedBufferAttribute?cm:li;x=new _(w,b.itemSize,b.normalized)}b.name!==void 0&&(x.name=b.name),b.usage!==void 0&&x.setUsage(b.usage),o.setAttribute(v,x)}const c=e.data.morphAttributes;if(c)for(const v in c){const b=c[v],x=[];for(let w=0,_=b.length;w<_;w++){const A=b[w];let T;if(A.isInterleavedBufferAttribute){const E=r(e.data,A.data);T=new lm(E,A.itemSize,A.offset,A.normalized)}else{const E=h0(A.type,A.array);T=new li(E,A.itemSize,A.normalized)}A.name!==void 0&&(T.name=A.name),x.push(T)}o.morphAttributes[v]=x}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const d=e.data.groups||e.data.drawcalls||e.data.offsets;if(d!==void 0)for(let v=0,b=d.length;v!==b;++v){const x=d[v];o.addGroup(x.start,x.count,x.materialIndex)}const m=e.data.boundingSphere;return m!==void 0&&(o.boundingSphere=new ts().fromJSON(m)),e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class Qre extends ma{constructor(e){super(e)}load(e,t,i,r){const s=this,o=this.path===""?hD.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new $f(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let c=null;try{c=JSON.parse(l)}catch(d){r!==void 0&&r(d),console.error("THREE:ObjectLoader: Can't parse "+e+".",d.message);return}const f=c.metadata;if(f===void 0||f.type===void 0||f.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(c,t)},i,r)}async loadAsync(e,t){const i=this,r=this.path===""?hD.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new $f(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(a)}parse(e,t){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),o=this.parseImages(e.images,function(){t!==void 0&&t(c)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),c=this.parseObject(e.object,s,l,a,i),f=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,f),this.bindLightTargets(c),t!==void 0){let d=!1;for(const m in o)if(o[m].data instanceof HTMLImageElement){d=!0;break}d===!1&&t(c)}return c}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,r,a,o,t),c=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,c),this.bindLightTargets(l),l}parseShapes(e){const t={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const s=new ud().fromJSON(e[i]);t[s.uuid]=s}return t}parseSkeletons(e,t){const i={},r={};if(t.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new KM().fromJSON(e[s],r);i[a.uuid]=a}return i}parseGeometries(e,t){const i={};if(e!==void 0){const r=new GV;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(l);break;default:l.type in H2?a=H2[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),i[l.uuid]=a}}return i}parseMaterials(e,t){const i={},r={};if(e!==void 0){const s=new gT;s.setTextures(t);for(let o=0,a=e.length;o<a;o++){const l=e[o];i[l.uuid]===void 0&&(i[l.uuid]=s.parse(l)),r[l.uuid]=i[l.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],s=R_.parse(r);t[s.uuid]=s}return t}parseImages(e,t){const i=this,r={};let s;function o(l){return i.manager.itemStart(l),s.load(l,function(){i.manager.itemEnd(l)},void 0,function(){i.manager.itemError(l),i.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const c=l,f=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:i.resourcePath+c;return o(f)}else return l.data?{data:h0(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new LL(t);s=new D_(l),s.setCrossOrigin(this.crossOrigin);for(let c=0,f=e.length;c<f;c++){const d=e[c],m=d.url;if(Array.isArray(m)){const v=[];for(let b=0,x=m.length;b<x;b++){const w=m[b],_=a(w);_!==null&&(_ instanceof HTMLImageElement?v.push(_):v.push(new yu(_.data,_.width,_.height)))}r[d.uuid]=new ad(v)}else{const v=a(d.url);r[d.uuid]=new ad(v)}}}return r}async parseImagesAsync(e){const t=this,i={};let r;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await r.loadAsync(l)}else return o.data?{data:h0(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){r=new D_(this.manager),r.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.url;if(Array.isArray(c)){const f=[];for(let d=0,m=c.length;d<m;d++){const v=c[d],b=await s(v);b!==null&&(b instanceof HTMLImageElement?f.push(b):f.push(new yu(b.data,b.width,b.height)))}i[l.uuid]=new ad(f)}else{const f=await s(l.url);i[l.uuid]=new ad(f)}}}return i}parseTextures(e,t){function i(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const r={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=t[a.image],c=l.data;let f;Array.isArray(c)?(f=new tx,c.length===6&&(f.needsUpdate=!0)):(c&&c.data?f=new yu:f=new ur,c&&(f.needsUpdate=!0)),f.source=l,f.uuid=a.uuid,a.name!==void 0&&(f.name=a.name),a.mapping!==void 0&&(f.mapping=i(a.mapping,Jre)),a.channel!==void 0&&(f.channel=a.channel),a.offset!==void 0&&f.offset.fromArray(a.offset),a.repeat!==void 0&&f.repeat.fromArray(a.repeat),a.center!==void 0&&f.center.fromArray(a.center),a.rotation!==void 0&&(f.rotation=a.rotation),a.wrap!==void 0&&(f.wrapS=i(a.wrap[0],q2),f.wrapT=i(a.wrap[1],q2)),a.format!==void 0&&(f.format=a.format),a.internalFormat!==void 0&&(f.internalFormat=a.internalFormat),a.type!==void 0&&(f.type=a.type),a.colorSpace!==void 0&&(f.colorSpace=a.colorSpace),a.minFilter!==void 0&&(f.minFilter=i(a.minFilter,X2)),a.magFilter!==void 0&&(f.magFilter=i(a.magFilter,X2)),a.anisotropy!==void 0&&(f.anisotropy=a.anisotropy),a.flipY!==void 0&&(f.flipY=a.flipY),a.generateMipmaps!==void 0&&(f.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(f.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(f.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(f.compareFunction=a.compareFunction),a.userData!==void 0&&(f.userData=a.userData),r[a.uuid]=f}return r}parseObject(e,t,i,r,s){let o;function a(m){return t[m]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",m),t[m]}function l(m){if(m!==void 0){if(Array.isArray(m)){const v=[];for(let b=0,x=m.length;b<x;b++){const w=m[b];i[w]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",w),v.push(i[w])}return v}return i[m]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",m),i[m]}}function c(m){return r[m]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",m),r[m]}let f,d;switch(e.type){case"Scene":o=new YM,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new yt(e.background):o.background=c(e.background)),e.environment!==void 0&&(o.environment=c(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new XM(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new qM(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&o.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(o.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&o.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":o=new Fr(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new ym(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new zV(e.color,e.intensity);break;case"DirectionalLight":o=new kV(e.color,e.intensity),o.target=e.target||"";break;case"PointLight":o=new UV(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new FV(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new NV(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),o.target=e.target||"";break;case"HemisphereLight":o=new IV(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new VV().fromJSON(e);break;case"SkinnedMesh":f=a(e.geometry),d=l(e.material),o=new iV(f,d),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":f=a(e.geometry),d=l(e.material),o=new Pi(f,d);break;case"InstancedMesh":f=a(e.geometry),d=l(e.material);const m=e.count,v=e.instanceMatrix,b=e.instanceColor;o=new rV(f,d,m),o.instanceMatrix=new cm(new Float32Array(v.array),16),b!==void 0&&(o.instanceColor=new cm(new Float32Array(b.array),b.itemSize));break;case"BatchedMesh":f=a(e.geometry),d=l(e.material),o=new sV(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,d),o.geometry=f,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._geometryInfo=e.geometryInfo.map(x=>{let w=null,_=null;return x.boundingBox!==void 0&&(w=new Vr().fromJSON(x.boundingBox)),x.boundingSphere!==void 0&&(_=new ts().fromJSON(x.boundingSphere)),{...x,boundingBox:w,boundingSphere:_}}),o._instanceInfo=e.instanceInfo,o._availableInstanceIds=e._availableInstanceIds,o._availableGeometryIds=e._availableGeometryIds,o._nextIndexStart=e.nextIndexStart,o._nextVertexStart=e.nextVertexStart,o._geometryCount=e.geometryCount,o._maxInstanceCount=e.maxInstanceCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._matricesTexture=c(e.matricesTexture.uuid),o._indirectTexture=c(e.indirectTexture.uuid),e.colorsTexture!==void 0&&(o._colorsTexture=c(e.colorsTexture.uuid)),e.boundingSphere!==void 0&&(o.boundingSphere=new ts().fromJSON(e.boundingSphere)),e.boundingBox!==void 0&&(o.boundingBox=new Vr().fromJSON(e.boundingBox));break;case"LOD":o=new nV;break;case"Line":o=new vd(a(e.geometry),l(e.material));break;case"LineLoop":o=new oV(a(e.geometry),l(e.material));break;case"LineSegments":o=new Mu(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new aV(a(e.geometry),l(e.material));break;case"Sprite":o=new tV(l(e.material));break;case"Group":o=new d0;break;case"Bone":o=new yL;break;default:o=new Jn}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(o.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const m=e.children;for(let v=0;v<m.length;v++)o.add(this.parseObject(m[v],t,i,r,s))}if(e.animations!==void 0){const m=e.animations;for(let v=0;v<m.length;v++){const b=m[v];o.animations.push(s[b])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const m=e.levels;for(let v=0;v<m.length;v++){const b=m[v],x=o.getObjectByProperty("uuid",b.object);x!==void 0&&o.addLevel(x,b.distance,b.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=t[i.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const i=t.target,r=e.getObjectByProperty("uuid",i);r!==void 0?t.target=r:t.target=new Jn}})}}const Jre={UVMapping:UM,CubeReflectionMapping:jf,CubeRefractionMapping:md,EquirectangularReflectionMapping:p_,EquirectangularRefractionMapping:m_,CubeUVReflectionMapping:sv},q2={RepeatWrapping:g_,ClampToEdgeWrapping:_l,MirroredRepeatWrapping:v_},X2={NearestFilter:Ds,NearestMipmapNearestFilter:tL,NearestMipmapLinearFilter:f0,LinearFilter:br,LinearMipmapNearestFilter:Hb,LinearMipmapLinearFilter:hu},$C=new WeakMap;class ese extends ma{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"},this._abortController=new AbortController}setOptions(e){return this.options=e,this}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=du.get(`image-bitmap:${e}`);if(o!==void 0){if(s.manager.itemStart(e),o.then){o.then(c=>{if($C.has(o)===!0)r&&r($C.get(o)),s.manager.itemError(e),s.manager.itemEnd(e);else return t&&t(c),s.manager.itemEnd(e),c});return}return setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o}const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader,a.signal=typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal;const l=fetch(e,a).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(c){return du.add(`image-bitmap:${e}`,c),t&&t(c),s.manager.itemEnd(e),c}).catch(function(c){r&&r(c),$C.set(l,c),du.remove(`image-bitmap:${e}`),s.manager.itemError(e),s.manager.itemEnd(e)});du.add(`image-bitmap:${e}`,l),s.manager.itemStart(e)}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}let Gw;class NL{static getContext(){return Gw===void 0&&(Gw=new(window.AudioContext||window.webkitAudioContext)),Gw}static setContext(e){Gw=e}}class tse extends ma{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new $f(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const c=l.slice(0);NL.getContext().decodeAudioData(c,function(d){t(d)}).catch(a)}catch(c){a(c)}},i,r);function a(l){r?r(l):console.error(l),s.manager.itemError(e)}}}const Y2=new Kt,Z2=new Kt,gp=new Kt;class nse{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Fr,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Fr,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,gp.copy(e.projectionMatrix);const r=t.eyeSep/2,s=r*t.near/t.focus,o=t.near*Math.tan(Qp*t.fov*.5)/t.zoom;let a,l;Z2.elements[12]=-r,Y2.elements[12]=r,a=-o*t.aspect+s,l=o*t.aspect+s,gp.elements[0]=2*t.near/(l-a),gp.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(gp),a=-o*t.aspect-s,l=o*t.aspect-s,gp.elements[0]=2*t.near/(l-a),gp.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(gp)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(Z2),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(Y2)}}class HV extends Fr{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}class UL{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=performance.now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=performance.now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}const vp=new de,qC=new Os,ise=new de,yp=new de,bp=new de;class rse extends Jn{constructor(){super(),this.type="AudioListener",this.context=NL.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new UL}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(vp,qC,ise),yp.set(0,0,-1).applyQuaternion(qC),bp.set(0,1,0).applyQuaternion(qC),t.positionX){const i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(vp.x,i),t.positionY.linearRampToValueAtTime(vp.y,i),t.positionZ.linearRampToValueAtTime(vp.z,i),t.forwardX.linearRampToValueAtTime(yp.x,i),t.forwardY.linearRampToValueAtTime(yp.y,i),t.forwardZ.linearRampToValueAtTime(yp.z,i),t.upX.linearRampToValueAtTime(bp.x,i),t.upY.linearRampToValueAtTime(bp.y,i),t.upZ.linearRampToValueAtTime(bp.z,i)}else t.setPosition(vp.x,vp.y,vp.z),t.setOrientation(yp.x,yp.y,yp.z,bp.x,bp.y,bp.z)}}class jV extends Jn{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),e.sourceType!=="buffer"?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const _p=new de,K2=new Os,sse=new de,xp=new de;class ose extends jV{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(_p,K2,sse),xp.set(0,0,1).applyQuaternion(K2);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(_p.x,i),t.positionY.linearRampToValueAtTime(_p.y,i),t.positionZ.linearRampToValueAtTime(_p.z,i),t.orientationX.linearRampToValueAtTime(xp.x,i),t.orientationY.linearRampToValueAtTime(xp.y,i),t.orientationZ.linearRampToValueAtTime(xp.z,i)}else t.setPosition(_p.x,_p.y,_p.z),t.setOrientation(xp.x,xp.y,xp.z)}}class ase{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class WV{constructor(e,t,i){this.binding=e,this.valueSize=i;let r,s,o;switch(t){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,s=e*r+r;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==r;++a)i[s+a]=i[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(i,s,0,a,r)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(i,r,l,1-s,t)}o>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let l=t,c=t+t;l!==c;++l)if(i[l]!==i[l+t]){a.setValue(i,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(t,r);for(let s=i,o=r;s!==o;++s)t[s]=t[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,s){if(r>=.5)for(let o=0;o!==s;++o)e[t+o]=e[i+o]}_slerp(e,t,i,r){Os.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,s){const o=this._workIndex*s;Os.multiplyQuaternionsFlat(e,o,e,t,e,i),Os.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,i,r,s){const o=1-r;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[i+a]*r}}_lerpAdditive(e,t,i,r,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[i+o]*r}}}const kL="\\[\\]\\.:\\/",lse=new RegExp("["+kL+"]","g"),zL="[^"+kL+"]",cse="[^"+kL.replace("\\.","")+"]",use=/((?:WC+[\/:])*)/.source.replace("WC",zL),fse=/(WCOD+)?/.source.replace("WCOD",cse),hse=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",zL),dse=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",zL),pse=new RegExp("^"+use+fse+hse+dse+"$"),mse=["material","materials","bones","map"];class gse{constructor(e,t,i){const r=i||Qn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class Qn{constructor(e,t,i){this.path=t,this.parsedPath=i||Qn.parseTrackName(t),this.node=Qn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new Qn.Composite(e,t,i):new Qn(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(lse,"")}static parseTrackName(e){const t=pse.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=i.nodeName.substring(r+1);mse.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const l=i(a.children);if(l)return l}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)e[t++]=i[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=Qn.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let c=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let f=0;f<e.length;f++)if(e[f].name===c){c=f;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const o=e[r];if(o===void 0){const c=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+r+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?a=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Qn.Composite=gse;Qn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Qn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Qn.prototype.GetterByBindingType=[Qn.prototype._getValue_direct,Qn.prototype._getValue_array,Qn.prototype._getValue_arrayElement,Qn.prototype._getValue_toArray];Qn.prototype.SetterByBindingTypeAndVersioning=[[Qn.prototype._setValue_direct,Qn.prototype._setValue_direct_setNeedsUpdate,Qn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Qn.prototype._setValue_array,Qn.prototype._setValue_array_setNeedsUpdate,Qn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Qn.prototype._setValue_arrayElement,Qn.prototype._setValue_arrayElement_setNeedsUpdate,Qn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Qn.prototype._setValue_fromArray,Qn.prototype._setValue_fromArray_setNeedsUpdate,Qn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class vse{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Pa(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,r=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,c=this.nCachedObjects_;for(let f=0,d=arguments.length;f!==d;++f){const m=arguments[f],v=m.uuid;let b=t[v];if(b===void 0){b=l++,t[v]=b,e.push(m);for(let x=0,w=o;x!==w;++x)s[x].push(new Qn(m,i[x],r[x]))}else if(b<c){a=e[b];const x=--c,w=e[x];t[w.uuid]=b,e[b]=w,t[v]=x,e[x]=m;for(let _=0,A=o;_!==A;++_){const T=s[_],E=T[x];let C=T[b];T[b]=E,C===void 0&&(C=new Qn(m,i[_],r[_])),T[x]=C}}else e[b]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],c=l.uuid,f=t[c];if(f!==void 0&&f>=s){const d=s++,m=e[d];t[m.uuid]=f,e[f]=m,t[c]=d,e[d]=l;for(let v=0,b=r;v!==b;++v){const x=i[v],w=x[d],_=x[f];x[f]=w,x[d]=_}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const c=arguments[a],f=c.uuid,d=t[f];if(d!==void 0)if(delete t[f],d<s){const m=--s,v=e[m],b=--o,x=e[b];t[v.uuid]=d,e[d]=v,t[x.uuid]=m,e[m]=x,e.pop();for(let w=0,_=r;w!==_;++w){const A=i[w],T=A[m],E=A[b];A[d]=T,A[m]=E,A.pop()}}else{const m=--o,v=e[m];m>0&&(t[v.uuid]=d),e[d]=v,e.pop();for(let b=0,x=r;b!==x;++b){const w=i[b];w[d]=w[m],w.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const i=this._bindingsIndicesByPath;let r=i[e];const s=this._bindings;if(r!==void 0)return s[r];const o=this._paths,a=this._parsedPaths,l=this._objects,c=l.length,f=this.nCachedObjects_,d=new Array(c);r=s.length,i[e]=r,o.push(e),a.push(t),s.push(d);for(let m=f,v=l.length;m!==v;++m){const b=l[m];d[m]=new Qn(b,e,t)}return d}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const r=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],c=e[a];t[c]=i,o[i]=l,o.pop(),s[i]=s[a],s.pop(),r[i]=r[a],r.pop()}}}class $V{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:Hp,endingEnd:Hp};for(let c=0;c!==o;++c){const f=s[c].createInterpolant(null);a[c]=f,f.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=U8,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i=!1){if(e.fadeOut(t),this.fadeIn(t),i===!0){const r=this._clip.duration,s=e._clip.duration,o=s/r,a=r/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,i=!1){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,s=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=s,l[1]=s+i,c[0]=e/o,c[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*i;l<0||i===0?t=0:(this._startTime=null,t=i*l)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case cL:for(let f=0,d=l.length;f!==d;++f)l[f].evaluate(o),c[f].accumulateAdditive(a);break;case HM:default:for(let f=0,d=l.length;f!==d;++f)l[f].evaluate(o),c[f].accumulate(r,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const o=i===k8;if(e===0)return s===-1?r:o&&(s&1)===1?t-r:r;if(i===N8){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),r>=t||r<0){const a=Math.floor(r/t);r-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(o&&(s&1)===1)return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=jp,r.endingEnd=jp):(e?r.endingStart=this.zeroSlopeAtStart?jp:Hp:r.endingStart=b_,t?r.endingEnd=this.zeroSlopeAtEnd?jp:Hp:r.endingEnd=b_)}_scheduleFading(e,t,i){const r=this._mixer,s=r.time;let o=this._weightInterpolant;o===null&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=i,this}}const yse=new Float32Array(1);class bse extends Eu{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,o=e._propertyBindings,a=e._interpolants,l=i.uuid,c=this._bindingsByRootAndName;let f=c[l];f===void 0&&(f={},c[l]=f);for(let d=0;d!==s;++d){const m=r[d],v=m.name;let b=f[v];if(b!==void 0)++b.referenceCount,o[d]=b;else{if(b=o[d],b!==void 0){b._cacheIndex===null&&(++b.referenceCount,this._addInactiveBinding(b,l,v));continue}const x=t&&t._propertyBindings[d].binding.parsedPath;b=new WV(Qn.create(i,v,x),m.ValueTypeName,m.getValueSize()),++b.referenceCount,this._addInactiveBinding(b,l,v),o[d]=b}a[d].resultBuffer=b.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,c=l[l.length-1],f=e._byClipCacheIndex;c._byClipCacheIndex=f,l[f]=c,l.pop(),e._byClipCacheIndex=null;const d=a.actionByRoot,m=(e._localRoot||this._root).uuid;delete d[m],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[t];o===void 0&&(o={},r[t]=o),o[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,o=this._bindingsByRootAndName,a=o[r],l=t[t.length-1],c=e._cacheIndex;l._cacheIndex=c,t[c]=l,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new DL(new Float32Array(2),new Float32Array(2),1,yse),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=i,t[i]=s}clipAction(e,t,i){const r=t||this._root,s=r.uuid;let o=typeof e=="string"?R_.findByName(r,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let c=null;if(i===void 0&&(o!==null?i=o.blendMode:i=HM),l!==void 0){const d=l.actionByRoot[s];if(d!==void 0&&d.blendMode===i)return d;c=l.knownActions[0],o===null&&(o=c._clip)}if(o===null)return null;const f=new $V(this,o,t,i);return this._bindAction(f,c),this._addInactiveAction(f,a,s),f}existingAction(e,t){const i=t||this._root,r=i.uuid,s=typeof e=="string"?R_.findByName(i,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,r=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let c=0;c!==i;++c)t[c]._update(r,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)a[c].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const c=o[a];this._deactivateAction(c);const f=c._cacheIndex,d=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,d._cacheIndex=f,t[f]=d,t.pop(),this._removeInactiveBindingsForAction(c)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const o in i){const a=i[o].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const r=this._bindingsByRootAndName,s=r[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class _se extends dL{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isRenderTarget3D=!0,this.depth=i,this.texture=new WM(null,e,t,i),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}}class FL{constructor(e){this.value=e}clone(){return new FL(this.value.clone===void 0?this.value:this.value.clone())}}let xse=0;class wse extends Eu{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:xse++}),this.name="",this.usage=x_,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let i=0,r=t.length;i<r;i++){const s=Array.isArray(t[i])?t[i]:[t[i]];for(let o=0;o<s.length;o++)this.uniforms.push(s[o].clone())}return this}clone(){return new this.constructor().copy(this)}}class Sse extends ZM{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class Ese{constructor(e,t,i,r,s,o=!1){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=r,this.count=s,this.normalized=o,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const Q2=new Kt;class BL{constructor(e,t,i=0,r=1/0){this.ray=new av(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new U0,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return Q2.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(Q2),this}intersectObject(e,t=!0,i=[]){return dD(e,this,i,t),i.sort(J2),i}intersectObjects(e,t=!0,i=[]){for(let r=0,s=e.length;r<s;r++)dD(e[r],this,i,t);return i.sort(J2),i}}function J2(n,e){return n.distance-e.distance}function dD(n,e,t,i){let r=!0;if(n.layers.test(e.layers)&&n.raycast(e,t)===!1&&(r=!1),r===!0&&i===!0){const s=n.children;for(let o=0,a=s.length;o<a;o++)dD(s[o],e,t,!0)}}let Mse=class{constructor(){this._previousTime=0,this._currentTime=0,this._startTime=performance.now(),this._delta=0,this._elapsed=0,this._timescale=1,this._document=null,this._pageVisibilityHandler=null}connect(e){this._document=e,e.hidden!==void 0&&(this._pageVisibilityHandler=Tse.bind(this),e.addEventListener("visibilitychange",this._pageVisibilityHandler,!1))}disconnect(){this._pageVisibilityHandler!==null&&(this._document.removeEventListener("visibilitychange",this._pageVisibilityHandler),this._pageVisibilityHandler=null),this._document=null}getDelta(){return this._delta/1e3}getElapsed(){return this._elapsed/1e3}getTimescale(){return this._timescale}setTimescale(e){return this._timescale=e,this}reset(){return this._currentTime=performance.now()-this._startTime,this}dispose(){this.disconnect()}update(e){return this._pageVisibilityHandler!==null&&this._document.hidden===!0?this._delta=0:(this._previousTime=this._currentTime,this._currentTime=(e!==void 0?e:performance.now())-this._startTime,this._delta=(this._currentTime-this._previousTime)*this._timescale,this._elapsed+=this._delta),this}};function Tse(){this._document.hidden===!1&&this.reset()}class qV{constructor(e=1,t=0,i=0){this.radius=e,this.phi=t,this.theta=i}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Qt(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(Qt(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class Ase{constructor(e=1,t=0,i=0){this.radius=e,this.theta=t,this.y=i}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}class VL{constructor(e,t,i,r){VL.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,i,r)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let i=0;i<4;i++)this.elements[i]=e[i+t];return this}set(e,t,i,r){const s=this.elements;return s[0]=e,s[2]=t,s[1]=i,s[3]=r,this}}const ek=new ut;class Cse{constructor(e=new ut(1/0,1/0),t=new ut(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=ek.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,ek).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const tk=new de,Hw=new de,Gg=new de,Hg=new de,XC=new de,Rse=new de,Dse=new de;class Ose{constructor(e=new de,t=new de){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){tk.subVectors(e,this.start),Hw.subVectors(this.end,this.start);const i=Hw.dot(Hw);let s=Hw.dot(tk)/i;return t&&(s=Qt(s,0,1)),s}closestPointToPoint(e,t,i){const r=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(r).add(this.start)}distanceSqToLine3(e,t=Rse,i=Dse){const r=10000000000000001e-32;let s,o;const a=this.start,l=e.start,c=this.end,f=e.end;Gg.subVectors(c,a),Hg.subVectors(f,l),XC.subVectors(a,l);const d=Gg.dot(Gg),m=Hg.dot(Hg),v=Hg.dot(XC);if(d<=r&&m<=r)return t.copy(a),i.copy(l),t.sub(i),t.dot(t);if(d<=r)s=0,o=v/m,o=Qt(o,0,1);else{const b=Gg.dot(XC);if(m<=r)o=0,s=Qt(-b/d,0,1);else{const x=Gg.dot(Hg),w=d*m-x*x;w!==0?s=Qt((x*v-b*m)/w,0,1):s=0,o=(x*s+v)/m,o<0?(o=0,s=Qt(-b/d,0,1)):o>1&&(o=1,s=Qt((x-b)/d,0,1))}}return t.copy(a).add(Gg.multiplyScalar(s)),i.copy(l).add(Hg.multiplyScalar(o)),t.sub(i),t.dot(t)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const nk=new de;class Lse extends Jn{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const i=new hn,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const c=o/l*Math.PI*2,f=a/l*Math.PI*2;r.push(Math.cos(c),Math.sin(c),1,Math.cos(f),Math.sin(f),1)}i.setAttribute("position",new kt(r,3));const s=new No({fog:!1,toneMapped:!1});this.cone=new Mu(i,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),nk.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(nk),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const qh=new de,jw=new Kt,YC=new Kt;class Pse extends Mu{constructor(e){const t=XV(e),i=new hn,r=[],s=[];for(let c=0;c<t.length;c++){const f=t[c];f.parent&&f.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(0,0,0),s.push(0,0,0))}i.setAttribute("position",new kt(r,3)),i.setAttribute("color",new kt(s,3));const o=new No({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,o),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;const a=new yt(255),l=new yt(65280);this.setColors(a,l)}updateMatrixWorld(e){const t=this.bones,i=this.geometry,r=i.getAttribute("position");YC.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(jw.multiplyMatrices(YC,a.matrixWorld),qh.setFromMatrixPosition(jw),r.setXYZ(o,qh.x,qh.y,qh.z),jw.multiplyMatrices(YC,a.parent.matrixWorld),qh.setFromMatrixPosition(jw),r.setXYZ(o+1,qh.x,qh.y,qh.z),o+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}setColors(e,t){const r=this.geometry.getAttribute("color");for(let s=0;s<r.count;s+=2)r.setXYZ(s,e.r,e.g,e.b),r.setXYZ(s+1,t.r,t.g,t.b);return r.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}function XV(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push(...XV(n.children[t]));return e}class Ise extends Pi{constructor(e,t,i){const r=new rx(t,4,2),s=new Yf({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const Nse=new de,ik=new yt,rk=new yt;class Use extends Jn{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const r=new ix(t);r.rotateY(Math.PI*.5),this.material=new Yf({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),o=new Float32Array(s.count*3);r.setAttribute("color",new li(o,3)),this.add(new Pi(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");ik.copy(this.light.color),rk.copy(this.light.groundColor);for(let i=0,r=t.count;i<r;i++){const s=i<r/2?ik:rk;t.setXYZ(i,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(Nse.setFromMatrixPosition(this.light.matrixWorld).negate())}}class kse extends Mu{constructor(e=10,t=10,i=4473924,r=8947848){i=new yt(i),r=new yt(r);const s=t/2,o=e/t,a=e/2,l=[],c=[];for(let m=0,v=0,b=-a;m<=t;m++,b+=o){l.push(-a,0,b,a,0,b),l.push(b,0,-a,b,0,a);const x=m===s?i:r;x.toArray(c,v),v+=3,x.toArray(c,v),v+=3,x.toArray(c,v),v+=3,x.toArray(c,v),v+=3}const f=new hn;f.setAttribute("position",new kt(l,3)),f.setAttribute("color",new kt(c,3));const d=new No({vertexColors:!0,toneMapped:!1});super(f,d),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class zse extends Mu{constructor(e=10,t=16,i=8,r=64,s=4473924,o=8947848){s=new yt(s),o=new yt(o);const a=[],l=[];if(t>1)for(let d=0;d<t;d++){const m=d/t*(Math.PI*2),v=Math.sin(m)*e,b=Math.cos(m)*e;a.push(0,0,0),a.push(v,0,b);const x=d&1?s:o;l.push(x.r,x.g,x.b),l.push(x.r,x.g,x.b)}for(let d=0;d<i;d++){const m=d&1?s:o,v=e-e/i*d;for(let b=0;b<r;b++){let x=b/r*(Math.PI*2),w=Math.sin(x)*v,_=Math.cos(x)*v;a.push(w,0,_),l.push(m.r,m.g,m.b),x=(b+1)/r*(Math.PI*2),w=Math.sin(x)*v,_=Math.cos(x)*v,a.push(w,0,_),l.push(m.r,m.g,m.b)}}const c=new hn;c.setAttribute("position",new kt(a,3)),c.setAttribute("color",new kt(l,3));const f=new No({vertexColors:!0,toneMapped:!1});super(c,f),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const sk=new de,Ww=new de,ok=new de;class Fse extends Jn{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new hn;r.setAttribute("position",new kt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new No({fog:!1,toneMapped:!1});this.lightPlane=new vd(r,s),this.add(this.lightPlane),r=new hn,r.setAttribute("position",new kt([0,0,0,0,0,1],3)),this.targetLine=new vd(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),sk.setFromMatrixPosition(this.light.matrixWorld),Ww.setFromMatrixPosition(this.light.target.matrixWorld),ok.subVectors(Ww,sk),this.lightPlane.lookAt(Ww),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Ww),this.targetLine.scale.z=ok.length()}}const $w=new de,gr=new $M;class Bse extends Mu{constructor(e){const t=new hn,i=new No({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(b,x){l(b),l(x)}function l(b){r.push(0,0,0),s.push(0,0,0),o[b]===void 0&&(o[b]=[]),o[b].push(r.length/3-1)}t.setAttribute("position",new kt(r,3)),t.setAttribute("color",new kt(s,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const c=new yt(16755200),f=new yt(16711680),d=new yt(43775),m=new yt(16777215),v=new yt(3355443);this.setColors(c,f,d,m,v)}setColors(e,t,i,r,s){const a=this.geometry.getAttribute("color");return a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,i.r,i.g,i.b),a.setXYZ(33,i.r,i.g,i.b),a.setXYZ(34,i.r,i.g,i.b),a.setXYZ(35,i.r,i.g,i.b),a.setXYZ(36,i.r,i.g,i.b),a.setXYZ(37,i.r,i.g,i.b),a.setXYZ(38,r.r,r.g,r.b),a.setXYZ(39,r.r,r.g,r.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0,this}update(){const e=this.geometry,t=this.pointMap,i=1,r=1;let s,o;if(gr.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),this.camera.reversedDepth===!0)s=1,o=0;else if(this.camera.coordinateSystem===Oa)s=-1,o=1;else if(this.camera.coordinateSystem===I0)s=0,o=1;else throw new Error("THREE.CameraHelper.update(): Invalid coordinate system: "+this.camera.coordinateSystem);Tr("c",t,e,gr,0,0,s),Tr("t",t,e,gr,0,0,o),Tr("n1",t,e,gr,-i,-r,s),Tr("n2",t,e,gr,i,-r,s),Tr("n3",t,e,gr,-i,r,s),Tr("n4",t,e,gr,i,r,s),Tr("f1",t,e,gr,-i,-r,o),Tr("f2",t,e,gr,i,-r,o),Tr("f3",t,e,gr,-i,r,o),Tr("f4",t,e,gr,i,r,o),Tr("u1",t,e,gr,i*.7,r*1.1,s),Tr("u2",t,e,gr,-i*.7,r*1.1,s),Tr("u3",t,e,gr,0,r*2,s),Tr("cf1",t,e,gr,-i,0,o),Tr("cf2",t,e,gr,i,0,o),Tr("cf3",t,e,gr,0,-r,o),Tr("cf4",t,e,gr,0,r,o),Tr("cn1",t,e,gr,-i,0,s),Tr("cn2",t,e,gr,i,0,s),Tr("cn3",t,e,gr,0,-r,s),Tr("cn4",t,e,gr,0,r,s),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Tr(n,e,t,i,r,s,o){$w.set(r,s,o).unproject(i);const a=e[n];if(a!==void 0){const l=t.getAttribute("position");for(let c=0,f=a.length;c<f;c++)l.setXYZ(a[c],$w.x,$w.y,$w.z)}}const qw=new Vr;class Vse extends Mu{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),s=new hn;s.setIndex(new li(i,1)),s.setAttribute("position",new li(r,3)),super(s,new No({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&qw.setFromObject(this.object),qw.isEmpty())return;const e=qw.min,t=qw.max,i=this.geometry.attributes.position,r=i.array;r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=e.x,r[4]=t.y,r[5]=t.z,r[6]=e.x,r[7]=e.y,r[8]=t.z,r[9]=t.x,r[10]=e.y,r[11]=t.z,r[12]=t.x,r[13]=t.y,r[14]=e.z,r[15]=e.x,r[16]=t.y,r[17]=e.z,r[18]=e.x,r[19]=e.y,r[20]=e.z,r[21]=t.x,r[22]=e.y,r[23]=e.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Gse extends Mu{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new hn;s.setIndex(new li(i,1)),s.setAttribute("position",new kt(r,3)),super(s,new No({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class Hse extends vd{constructor(e,t=1,i=16776960){const r=i,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new hn;o.setAttribute("position",new kt(s,3)),o.computeBoundingSphere(),super(o,new No({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new hn;l.setAttribute("position",new kt(a,3)),l.computeBoundingSphere(),this.add(new Pi(l,new Yf({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const ak=new de;let Xw,ZC;class jse extends Jn{constructor(e=new de(0,0,1),t=new de(0,0,0),i=1,r=16776960,s=i*.2,o=s*.2){super(),this.type="ArrowHelper",Xw===void 0&&(Xw=new hn,Xw.setAttribute("position",new kt([0,0,0,0,1,0],3)),ZC=new nx(.5,1,5,1),ZC.translate(0,-.5,0)),this.position.copy(t),this.line=new vd(Xw,new No({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Pi(ZC,new Yf({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{ak.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(ak,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class Wse extends Mu{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new hn;r.setAttribute("position",new kt(t,3)),r.setAttribute("color",new kt(i,3));const s=new No({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,t,i){const r=new yt,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(i),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class $se{constructor(){this.type="ShapePath",this.color=new yt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new eM,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,r){return this.currentPath.quadraticCurveTo(e,t,i,r),this}bezierCurveTo(e,t,i,r,s,o){return this.currentPath.bezierCurveTo(e,t,i,r,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(_){const A=[];for(let T=0,E=_.length;T<E;T++){const C=_[T],R=new ud;R.curves=C.curves,A.push(R)}return A}function i(_,A){const T=A.length;let E=!1;for(let C=T-1,R=0;R<T;C=R++){let O=A[C],I=A[R],L=I.x-O.x,N=I.y-O.y;if(Math.abs(N)>Number.EPSILON){if(N<0&&(O=A[R],L=-L,I=A[C],N=-N),_.y<O.y||_.y>I.y)continue;if(_.y===O.y){if(_.x===O.x)return!0}else{const V=N*(_.x-O.x)-L*(_.y-O.y);if(V===0)return!0;if(V<0)continue;E=!E}}else{if(_.y!==O.y)continue;if(I.x<=_.x&&_.x<=O.x||O.x<=_.x&&_.x<=I.x)return!0}}return E}const r=cc.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const c=[];if(s.length===1)return a=s[0],l=new ud,l.curves=a.curves,c.push(l),c;let f=!r(s[0].getPoints());f=e?!f:f;const d=[],m=[];let v=[],b=0,x;m[b]=void 0,v[b]=[];for(let _=0,A=s.length;_<A;_++)a=s[_],x=a.getPoints(),o=r(x),o=e?!o:o,o?(!f&&m[b]&&b++,m[b]={s:new ud,p:x},m[b].s.curves=a.curves,f&&b++,v[b]=[]):v[b].push({h:a,p:x[0]});if(!m[0])return t(s);if(m.length>1){let _=!1,A=0;for(let T=0,E=m.length;T<E;T++)d[T]=[];for(let T=0,E=m.length;T<E;T++){const C=v[T];for(let R=0;R<C.length;R++){const O=C[R];let I=!0;for(let L=0;L<m.length;L++)i(O.p,m[L].p)&&(T!==L&&A++,I?(I=!1,d[L].push(O)):_=!0);I&&d[T].push(O)}}A>0&&_===!1&&(v=d)}let w;for(let _=0,A=m.length;_<A;_++){l=m[_].s,c.push(l),w=v[_];for(let T=0,E=w.length;T<E;T++)l.holes.push(w[T].h)}return c}}class qse extends Eu{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){console.warn("THREE.Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}}function Xse(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2):(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0),n}function Yse(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0):(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2),n}function Zse(n){return n.repeat.x=1,n.repeat.y=1,n.offset.x=0,n.offset.y=0,n}function pD(n,e,t,i){const r=Kse(i);switch(t){case oL:return n*e;case BM:return n*e/r.components*r.byteLength;case ex:return n*e/r.components*r.byteLength;case lL:return n*e*2/r.components*r.byteLength;case VM:return n*e*2/r.components*r.byteLength;case aL:return n*e*3/r.components*r.byteLength;case io:return n*e*4/r.components*r.byteLength;case GM:return n*e*4/r.components*r.byteLength;case jb:case Wb:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case $b:case qb:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case wE:case EE:return Math.max(n,16)*Math.max(e,8)/4;case xE:case SE:return Math.max(n,8)*Math.max(e,8)/2;case ME:case TE:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case AE:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case CE:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case RE:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case DE:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case OE:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case LE:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case PE:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case IE:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case NE:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case UE:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case kE:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case zE:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case FE:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case BE:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case VE:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case GE:case HE:case jE:return Math.ceil(n/4)*Math.ceil(e/4)*16;case WE:case $E:return Math.ceil(n/4)*Math.ceil(e/4)*8;case qE:case XE:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function Kse(n){switch(n){case Tl:case nL:return{byteLength:1,components:1};case D0:case iL:case ov:return{byteLength:2,components:1};case zM:case FM:return{byteLength:2,components:4};case Wf:case kM:case fa:return{byteLength:4,components:1};case rL:case sL:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}class Qse{static contain(e,t){return Xse(e,t)}static cover(e,t){return Yse(e,t)}static fill(e){return Zse(e)}static getByteLength(e,t,i,r){return pD(e,t,i,r)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:IM}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=IM);function YV(){let n=null,e=!1,t=null,i=null;function r(s,o){t(s,o),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function Jse(n){const e=new WeakMap;function t(a,l){const c=a.array,f=a.usage,d=c.byteLength,m=n.createBuffer();n.bindBuffer(l,m),n.bufferData(l,c,f),a.onUploadCallback();let v;if(c instanceof Float32Array)v=n.FLOAT;else if(typeof Float16Array<"u"&&c instanceof Float16Array)v=n.HALF_FLOAT;else if(c instanceof Uint16Array)a.isFloat16BufferAttribute?v=n.HALF_FLOAT:v=n.UNSIGNED_SHORT;else if(c instanceof Int16Array)v=n.SHORT;else if(c instanceof Uint32Array)v=n.UNSIGNED_INT;else if(c instanceof Int32Array)v=n.INT;else if(c instanceof Int8Array)v=n.BYTE;else if(c instanceof Uint8Array)v=n.UNSIGNED_BYTE;else if(c instanceof Uint8ClampedArray)v=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+c);return{buffer:m,type:v,bytesPerElement:c.BYTES_PER_ELEMENT,version:a.version,size:d}}function i(a,l,c){const f=l.array,d=l.updateRanges;if(n.bindBuffer(c,a),d.length===0)n.bufferSubData(c,0,f);else{d.sort((v,b)=>v.start-b.start);let m=0;for(let v=1;v<d.length;v++){const b=d[m],x=d[v];x.start<=b.start+b.count+1?b.count=Math.max(b.count,x.start+x.count-b.start):(++m,d[m]=x)}d.length=m+1;for(let v=0,b=d.length;v<b;v++){const x=d[v];n.bufferSubData(c,x.start*f.BYTES_PER_ELEMENT,f,x.start,x.count)}l.clearUpdateRanges()}l.onUploadCallback()}function r(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)}function s(a){a.isInterleavedBufferAttribute&&(a=a.data);const l=e.get(a);l&&(n.deleteBuffer(l.buffer),e.delete(a))}function o(a,l){if(a.isInterleavedBufferAttribute&&(a=a.data),a.isGLBufferAttribute){const f=e.get(a);(!f||f.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}const c=e.get(a);if(c===void 0)e.set(a,t(a,l));else if(c.version<a.version){if(c.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(c.buffer,a,l),c.version=a.version}}return{get:r,remove:s,update:o}}var eoe=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,toe=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,noe=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,ioe=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,roe=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,soe=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,ooe=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,aoe=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,loe=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,coe=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,uoe=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,foe=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,hoe=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,doe=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,poe=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,moe=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,goe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,voe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,yoe=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,boe=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,_oe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,xoe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,woe=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,Soe=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,Eoe=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Moe=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Toe=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,Aoe=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,Coe=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Roe=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Doe="gl_FragColor = linearToOutputTexel( gl_FragColor );",Ooe=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,Loe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,Poe=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,Ioe=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,Noe=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,Uoe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,koe=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,zoe=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,Foe=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,Boe=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,Voe=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,Goe=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,Hoe=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,joe=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,Woe=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,$oe=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,qoe=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,Xoe=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,Yoe=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Zoe=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,Koe=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,Qoe=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Joe=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,eae=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,tae=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,nae=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,iae=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,rae=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,sae=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,oae=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,aae=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,lae=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,cae=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,uae=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,fae=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,hae=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,dae=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,pae=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,mae=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,gae=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,vae=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,yae=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,bae=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,_ae=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,xae=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,wae=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,Sae=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,Eae=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,Mae=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,Tae=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,Aae=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,Cae=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,Rae=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,Dae=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,Oae=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,Lae=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,Pae=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,Iae=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,Nae=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		float depth = unpackRGBAToDepth( texture2D( depths, uv ) );
		#ifdef USE_REVERSED_DEPTH_BUFFER
			return step( depth, compare );
		#else
			return step( compare, depth );
		#endif
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow( sampler2D shadow, vec2 uv, float compare ) {
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		#ifdef USE_REVERSED_DEPTH_BUFFER
			float hard_shadow = step( distribution.x, compare );
		#else
			float hard_shadow = step( compare, distribution.x );
		#endif
		if ( hard_shadow != 1.0 ) {
			float distance = compare - distribution.x;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,Uae=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,kae=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,zae=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,Fae=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Bae=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,Vae=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Gae=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Hae=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,jae=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,Wae=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,$ae=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,qae=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,Xae=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,Yae=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Zae=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Kae=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,Qae=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const Jae=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,ele=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,tle=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,nle=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,ile=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,rle=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,sle=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,ole=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	#ifdef USE_REVERSED_DEPTH_BUFFER
		float fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];
	#else
		float fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;
	#endif
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,ale=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,lle=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,cle=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,ule=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,fle=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,hle=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,dle=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,ple=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,mle=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,gle=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vle=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,yle=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ble=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,_le=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,xle=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,wle=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Sle=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,Ele=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Mle=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Tle=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Ale=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,Cle=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Rle=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Dle=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Ole=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Lle=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,bn={alphahash_fragment:eoe,alphahash_pars_fragment:toe,alphamap_fragment:noe,alphamap_pars_fragment:ioe,alphatest_fragment:roe,alphatest_pars_fragment:soe,aomap_fragment:ooe,aomap_pars_fragment:aoe,batching_pars_vertex:loe,batching_vertex:coe,begin_vertex:uoe,beginnormal_vertex:foe,bsdfs:hoe,iridescence_fragment:doe,bumpmap_pars_fragment:poe,clipping_planes_fragment:moe,clipping_planes_pars_fragment:goe,clipping_planes_pars_vertex:voe,clipping_planes_vertex:yoe,color_fragment:boe,color_pars_fragment:_oe,color_pars_vertex:xoe,color_vertex:woe,common:Soe,cube_uv_reflection_fragment:Eoe,defaultnormal_vertex:Moe,displacementmap_pars_vertex:Toe,displacementmap_vertex:Aoe,emissivemap_fragment:Coe,emissivemap_pars_fragment:Roe,colorspace_fragment:Doe,colorspace_pars_fragment:Ooe,envmap_fragment:Loe,envmap_common_pars_fragment:Poe,envmap_pars_fragment:Ioe,envmap_pars_vertex:Noe,envmap_physical_pars_fragment:$oe,envmap_vertex:Uoe,fog_vertex:koe,fog_pars_vertex:zoe,fog_fragment:Foe,fog_pars_fragment:Boe,gradientmap_pars_fragment:Voe,lightmap_pars_fragment:Goe,lights_lambert_fragment:Hoe,lights_lambert_pars_fragment:joe,lights_pars_begin:Woe,lights_toon_fragment:qoe,lights_toon_pars_fragment:Xoe,lights_phong_fragment:Yoe,lights_phong_pars_fragment:Zoe,lights_physical_fragment:Koe,lights_physical_pars_fragment:Qoe,lights_fragment_begin:Joe,lights_fragment_maps:eae,lights_fragment_end:tae,logdepthbuf_fragment:nae,logdepthbuf_pars_fragment:iae,logdepthbuf_pars_vertex:rae,logdepthbuf_vertex:sae,map_fragment:oae,map_pars_fragment:aae,map_particle_fragment:lae,map_particle_pars_fragment:cae,metalnessmap_fragment:uae,metalnessmap_pars_fragment:fae,morphinstance_vertex:hae,morphcolor_vertex:dae,morphnormal_vertex:pae,morphtarget_pars_vertex:mae,morphtarget_vertex:gae,normal_fragment_begin:vae,normal_fragment_maps:yae,normal_pars_fragment:bae,normal_pars_vertex:_ae,normal_vertex:xae,normalmap_pars_fragment:wae,clearcoat_normal_fragment_begin:Sae,clearcoat_normal_fragment_maps:Eae,clearcoat_pars_fragment:Mae,iridescence_pars_fragment:Tae,opaque_fragment:Aae,packing:Cae,premultiplied_alpha_fragment:Rae,project_vertex:Dae,dithering_fragment:Oae,dithering_pars_fragment:Lae,roughnessmap_fragment:Pae,roughnessmap_pars_fragment:Iae,shadowmap_pars_fragment:Nae,shadowmap_pars_vertex:Uae,shadowmap_vertex:kae,shadowmask_pars_fragment:zae,skinbase_vertex:Fae,skinning_pars_vertex:Bae,skinning_vertex:Vae,skinnormal_vertex:Gae,specularmap_fragment:Hae,specularmap_pars_fragment:jae,tonemapping_fragment:Wae,tonemapping_pars_fragment:$ae,transmission_fragment:qae,transmission_pars_fragment:Xae,uv_pars_fragment:Yae,uv_pars_vertex:Zae,uv_vertex:Kae,worldpos_vertex:Qae,background_vert:Jae,background_frag:ele,backgroundCube_vert:tle,backgroundCube_frag:nle,cube_vert:ile,cube_frag:rle,depth_vert:sle,depth_frag:ole,distanceRGBA_vert:ale,distanceRGBA_frag:lle,equirect_vert:cle,equirect_frag:ule,linedashed_vert:fle,linedashed_frag:hle,meshbasic_vert:dle,meshbasic_frag:ple,meshlambert_vert:mle,meshlambert_frag:gle,meshmatcap_vert:vle,meshmatcap_frag:yle,meshnormal_vert:ble,meshnormal_frag:_le,meshphong_vert:xle,meshphong_frag:wle,meshphysical_vert:Sle,meshphysical_frag:Ele,meshtoon_vert:Mle,meshtoon_frag:Tle,points_vert:Ale,points_frag:Cle,shadow_vert:Rle,shadow_frag:Dle,sprite_vert:Ole,sprite_frag:Lle},At={common:{diffuse:{value:new yt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new un},alphaMap:{value:null},alphaMapTransform:{value:new un},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new un}},envmap:{envMap:{value:null},envMapRotation:{value:new un},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new un}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new un}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new un},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new un},normalScale:{value:new ut(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new un},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new un}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new un}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new un}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new yt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new yt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new un},alphaTest:{value:0},uvTransform:{value:new un}},sprite:{diffuse:{value:new yt(16777215)},opacity:{value:1},center:{value:new ut(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new un},alphaMap:{value:null},alphaMapTransform:{value:new un},alphaTest:{value:0}}},oc={basic:{uniforms:To([At.common,At.specularmap,At.envmap,At.aomap,At.lightmap,At.fog]),vertexShader:bn.meshbasic_vert,fragmentShader:bn.meshbasic_frag},lambert:{uniforms:To([At.common,At.specularmap,At.envmap,At.aomap,At.lightmap,At.emissivemap,At.bumpmap,At.normalmap,At.displacementmap,At.fog,At.lights,{emissive:{value:new yt(0)}}]),vertexShader:bn.meshlambert_vert,fragmentShader:bn.meshlambert_frag},phong:{uniforms:To([At.common,At.specularmap,At.envmap,At.aomap,At.lightmap,At.emissivemap,At.bumpmap,At.normalmap,At.displacementmap,At.fog,At.lights,{emissive:{value:new yt(0)},specular:{value:new yt(1118481)},shininess:{value:30}}]),vertexShader:bn.meshphong_vert,fragmentShader:bn.meshphong_frag},standard:{uniforms:To([At.common,At.envmap,At.aomap,At.lightmap,At.emissivemap,At.bumpmap,At.normalmap,At.displacementmap,At.roughnessmap,At.metalnessmap,At.fog,At.lights,{emissive:{value:new yt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:bn.meshphysical_vert,fragmentShader:bn.meshphysical_frag},toon:{uniforms:To([At.common,At.aomap,At.lightmap,At.emissivemap,At.bumpmap,At.normalmap,At.displacementmap,At.gradientmap,At.fog,At.lights,{emissive:{value:new yt(0)}}]),vertexShader:bn.meshtoon_vert,fragmentShader:bn.meshtoon_frag},matcap:{uniforms:To([At.common,At.bumpmap,At.normalmap,At.displacementmap,At.fog,{matcap:{value:null}}]),vertexShader:bn.meshmatcap_vert,fragmentShader:bn.meshmatcap_frag},points:{uniforms:To([At.points,At.fog]),vertexShader:bn.points_vert,fragmentShader:bn.points_frag},dashed:{uniforms:To([At.common,At.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:bn.linedashed_vert,fragmentShader:bn.linedashed_frag},depth:{uniforms:To([At.common,At.displacementmap]),vertexShader:bn.depth_vert,fragmentShader:bn.depth_frag},normal:{uniforms:To([At.common,At.bumpmap,At.normalmap,At.displacementmap,{opacity:{value:1}}]),vertexShader:bn.meshnormal_vert,fragmentShader:bn.meshnormal_frag},sprite:{uniforms:To([At.sprite,At.fog]),vertexShader:bn.sprite_vert,fragmentShader:bn.sprite_frag},background:{uniforms:{uvTransform:{value:new un},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:bn.background_vert,fragmentShader:bn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new un}},vertexShader:bn.backgroundCube_vert,fragmentShader:bn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:bn.cube_vert,fragmentShader:bn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:bn.equirect_vert,fragmentShader:bn.equirect_frag},distanceRGBA:{uniforms:To([At.common,At.displacementmap,{referencePosition:{value:new de},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:bn.distanceRGBA_vert,fragmentShader:bn.distanceRGBA_frag},shadow:{uniforms:To([At.lights,At.fog,{color:{value:new yt(0)},opacity:{value:1}}]),vertexShader:bn.shadow_vert,fragmentShader:bn.shadow_frag}};oc.physical={uniforms:To([oc.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new un},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new un},clearcoatNormalScale:{value:new ut(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new un},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new un},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new un},sheen:{value:0},sheenColor:{value:new yt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new un},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new un},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new un},transmissionSamplerSize:{value:new ut},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new un},attenuationDistance:{value:0},attenuationColor:{value:new yt(0)},specularColor:{value:new yt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new un},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new un},anisotropyVector:{value:new ut},anisotropyMap:{value:null},anisotropyMapTransform:{value:new un}}]),vertexShader:bn.meshphysical_vert,fragmentShader:bn.meshphysical_frag};const Yw={r:0,b:0,g:0},wp=new Io,Ple=new Kt;function Ile(n,e,t,i,r,s,o){const a=new yt(0);let l=s===!0?0:1,c,f,d=null,m=0,v=null;function b(T){let E=T.isScene===!0?T.background:null;return E&&E.isTexture&&(E=(T.backgroundBlurriness>0?t:e).get(E)),E}function x(T){let E=!1;const C=b(T);C===null?_(a,l):C&&C.isColor&&(_(C,1),E=!0);const R=n.xr.getEnvironmentBlendMode();R==="additive"?i.buffers.color.setClear(0,0,0,1,o):R==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,o),(n.autoClear||E)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function w(T,E){const C=b(E);C&&(C.isCubeTexture||C.mapping===sv)?(f===void 0&&(f=new Pi(new Ed(1,1,1),new Al({name:"BackgroundCubeMaterial",uniforms:k0(oc.backgroundCube.uniforms),vertexShader:oc.backgroundCube.vertexShader,fragmentShader:oc.backgroundCube.fragmentShader,side:Po,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),f.geometry.deleteAttribute("normal"),f.geometry.deleteAttribute("uv"),f.onBeforeRender=function(R,O,I){this.matrixWorld.copyPosition(I.matrixWorld)},Object.defineProperty(f.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(f)),wp.copy(E.backgroundRotation),wp.x*=-1,wp.y*=-1,wp.z*=-1,C.isCubeTexture&&C.isRenderTargetTexture===!1&&(wp.y*=-1,wp.z*=-1),f.material.uniforms.envMap.value=C,f.material.uniforms.flipEnvMap.value=C.isCubeTexture&&C.isRenderTargetTexture===!1?-1:1,f.material.uniforms.backgroundBlurriness.value=E.backgroundBlurriness,f.material.uniforms.backgroundIntensity.value=E.backgroundIntensity,f.material.uniforms.backgroundRotation.value.setFromMatrix4(Ple.makeRotationFromEuler(wp)),f.material.toneMapped=Wn.getTransfer(C.colorSpace)!==mi,(d!==C||m!==C.version||v!==n.toneMapping)&&(f.material.needsUpdate=!0,d=C,m=C.version,v=n.toneMapping),f.layers.enableAll(),T.unshift(f,f.geometry,f.material,0,0,null)):C&&C.isTexture&&(c===void 0&&(c=new Pi(new Zf(2,2),new Al({name:"BackgroundMaterial",uniforms:k0(oc.background.uniforms),vertexShader:oc.background.vertexShader,fragmentShader:oc.background.fragmentShader,side:Hf,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(c)),c.material.uniforms.t2D.value=C,c.material.uniforms.backgroundIntensity.value=E.backgroundIntensity,c.material.toneMapped=Wn.getTransfer(C.colorSpace)!==mi,C.matrixAutoUpdate===!0&&C.updateMatrix(),c.material.uniforms.uvTransform.value.copy(C.matrix),(d!==C||m!==C.version||v!==n.toneMapping)&&(c.material.needsUpdate=!0,d=C,m=C.version,v=n.toneMapping),c.layers.enableAll(),T.unshift(c,c.geometry,c.material,0,0,null))}function _(T,E){T.getRGB(Yw,K8(n)),i.buffers.color.setClear(Yw.r,Yw.g,Yw.b,E,o)}function A(){f!==void 0&&(f.geometry.dispose(),f.material.dispose(),f=void 0),c!==void 0&&(c.geometry.dispose(),c.material.dispose(),c=void 0)}return{getClearColor:function(){return a},setClearColor:function(T,E=1){a.set(T),l=E,_(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(T){l=T,_(a,l)},render:x,addToRenderList:w,dispose:A}}function Nle(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},r=m(null);let s=r,o=!1;function a(N,V,B,k,j){let q=!1;const W=d(k,B,V);s!==W&&(s=W,c(s.object)),q=v(N,k,B,j),q&&b(N,k,B,j),j!==null&&e.update(j,n.ELEMENT_ARRAY_BUFFER),(q||o)&&(o=!1,E(N,V,B,k),j!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(j).buffer))}function l(){return n.createVertexArray()}function c(N){return n.bindVertexArray(N)}function f(N){return n.deleteVertexArray(N)}function d(N,V,B){const k=B.wireframe===!0;let j=i[N.id];j===void 0&&(j={},i[N.id]=j);let q=j[V.id];q===void 0&&(q={},j[V.id]=q);let W=q[k];return W===void 0&&(W=m(l()),q[k]=W),W}function m(N){const V=[],B=[],k=[];for(let j=0;j<t;j++)V[j]=0,B[j]=0,k[j]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:V,enabledAttributes:B,attributeDivisors:k,object:N,attributes:{},index:null}}function v(N,V,B,k){const j=s.attributes,q=V.attributes;let W=0;const G=B.getAttributes();for(const K in G)if(G[K].location>=0){const ie=j[K];let F=q[K];if(F===void 0&&(K==="instanceMatrix"&&N.instanceMatrix&&(F=N.instanceMatrix),K==="instanceColor"&&N.instanceColor&&(F=N.instanceColor)),ie===void 0||ie.attribute!==F||F&&ie.data!==F.data)return!0;W++}return s.attributesNum!==W||s.index!==k}function b(N,V,B,k){const j={},q=V.attributes;let W=0;const G=B.getAttributes();for(const K in G)if(G[K].location>=0){let ie=q[K];ie===void 0&&(K==="instanceMatrix"&&N.instanceMatrix&&(ie=N.instanceMatrix),K==="instanceColor"&&N.instanceColor&&(ie=N.instanceColor));const F={};F.attribute=ie,ie&&ie.data&&(F.data=ie.data),j[K]=F,W++}s.attributes=j,s.attributesNum=W,s.index=k}function x(){const N=s.newAttributes;for(let V=0,B=N.length;V<B;V++)N[V]=0}function w(N){_(N,0)}function _(N,V){const B=s.newAttributes,k=s.enabledAttributes,j=s.attributeDivisors;B[N]=1,k[N]===0&&(n.enableVertexAttribArray(N),k[N]=1),j[N]!==V&&(n.vertexAttribDivisor(N,V),j[N]=V)}function A(){const N=s.newAttributes,V=s.enabledAttributes;for(let B=0,k=V.length;B<k;B++)V[B]!==N[B]&&(n.disableVertexAttribArray(B),V[B]=0)}function T(N,V,B,k,j,q,W){W===!0?n.vertexAttribIPointer(N,V,B,j,q):n.vertexAttribPointer(N,V,B,k,j,q)}function E(N,V,B,k){x();const j=k.attributes,q=B.getAttributes(),W=V.defaultAttributeValues;for(const G in q){const K=q[G];if(K.location>=0){let te=j[G];if(te===void 0&&(G==="instanceMatrix"&&N.instanceMatrix&&(te=N.instanceMatrix),G==="instanceColor"&&N.instanceColor&&(te=N.instanceColor)),te!==void 0){const ie=te.normalized,F=te.itemSize,X=e.get(te);if(X===void 0)continue;const ee=X.buffer,le=X.type,oe=X.bytesPerElement,ue=le===n.INT||le===n.UNSIGNED_INT||te.gpuType===kM;if(te.isInterleavedBufferAttribute){const he=te.data,be=he.stride,Te=te.offset;if(he.isInstancedInterleavedBuffer){for(let Ee=0;Ee<K.locationSize;Ee++)_(K.location+Ee,he.meshPerAttribute);N.isInstancedMesh!==!0&&k._maxInstanceCount===void 0&&(k._maxInstanceCount=he.meshPerAttribute*he.count)}else for(let Ee=0;Ee<K.locationSize;Ee++)w(K.location+Ee);n.bindBuffer(n.ARRAY_BUFFER,ee);for(let Ee=0;Ee<K.locationSize;Ee++)T(K.location+Ee,F/K.locationSize,le,ie,be*oe,(Te+F/K.locationSize*Ee)*oe,ue)}else{if(te.isInstancedBufferAttribute){for(let he=0;he<K.locationSize;he++)_(K.location+he,te.meshPerAttribute);N.isInstancedMesh!==!0&&k._maxInstanceCount===void 0&&(k._maxInstanceCount=te.meshPerAttribute*te.count)}else for(let he=0;he<K.locationSize;he++)w(K.location+he);n.bindBuffer(n.ARRAY_BUFFER,ee);for(let he=0;he<K.locationSize;he++)T(K.location+he,F/K.locationSize,le,ie,F*oe,F/K.locationSize*he*oe,ue)}}else if(W!==void 0){const ie=W[G];if(ie!==void 0)switch(ie.length){case 2:n.vertexAttrib2fv(K.location,ie);break;case 3:n.vertexAttrib3fv(K.location,ie);break;case 4:n.vertexAttrib4fv(K.location,ie);break;default:n.vertexAttrib1fv(K.location,ie)}}}}A()}function C(){I();for(const N in i){const V=i[N];for(const B in V){const k=V[B];for(const j in k)f(k[j].object),delete k[j];delete V[B]}delete i[N]}}function R(N){if(i[N.id]===void 0)return;const V=i[N.id];for(const B in V){const k=V[B];for(const j in k)f(k[j].object),delete k[j];delete V[B]}delete i[N.id]}function O(N){for(const V in i){const B=i[V];if(B[N.id]===void 0)continue;const k=B[N.id];for(const j in k)f(k[j].object),delete k[j];delete B[N.id]}}function I(){L(),o=!0,s!==r&&(s=r,c(s.object))}function L(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:a,reset:I,resetDefaultState:L,dispose:C,releaseStatesOfGeometry:R,releaseStatesOfProgram:O,initAttributes:x,enableAttribute:w,disableUnusedAttributes:A}}function Ule(n,e,t){let i;function r(c){i=c}function s(c,f){n.drawArrays(i,c,f),t.update(f,i,1)}function o(c,f,d){d!==0&&(n.drawArraysInstanced(i,c,f,d),t.update(f,i,d))}function a(c,f,d){if(d===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,c,0,f,0,d);let v=0;for(let b=0;b<d;b++)v+=f[b];t.update(v,i,1)}function l(c,f,d,m){if(d===0)return;const v=e.get("WEBGL_multi_draw");if(v===null)for(let b=0;b<c.length;b++)o(c[b],f[b],m[b]);else{v.multiDrawArraysInstancedWEBGL(i,c,0,f,0,m,0,d);let b=0;for(let x=0;x<d;x++)b+=f[x]*m[x];t.update(b,i,1)}}this.setMode=r,this.render=s,this.renderInstances=o,this.renderMultiDraw=a,this.renderMultiDrawInstances=l}function kle(n,e,t,i){let r;function s(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const O=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(O.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function o(O){return!(O!==io&&i.convert(O)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(O){const I=O===ov&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(O!==Tl&&i.convert(O)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&O!==fa&&!I)}function l(O){if(O==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";O="mediump"}return O==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let c=t.precision!==void 0?t.precision:"highp";const f=l(c);f!==c&&(console.warn("THREE.WebGLRenderer:",c,"not supported, using",f,"instead."),c=f);const d=t.logarithmicDepthBuffer===!0,m=t.reversedDepthBuffer===!0&&e.has("EXT_clip_control"),v=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),b=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),x=n.getParameter(n.MAX_TEXTURE_SIZE),w=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),_=n.getParameter(n.MAX_VERTEX_ATTRIBS),A=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),T=n.getParameter(n.MAX_VARYING_VECTORS),E=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),C=b>0,R=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:l,textureFormatReadable:o,textureTypeReadable:a,precision:c,logarithmicDepthBuffer:d,reversedDepthBuffer:m,maxTextures:v,maxVertexTextures:b,maxTextureSize:x,maxCubemapSize:w,maxAttributes:_,maxVertexUniforms:A,maxVaryings:T,maxFragmentUniforms:E,vertexTextures:C,maxSamples:R}}function zle(n){const e=this;let t=null,i=0,r=!1,s=!1;const o=new Tf,a=new un,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,m){const v=d.length!==0||m||i!==0||r;return r=m,i=d.length,v},this.beginShadows=function(){s=!0,f(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(d,m){t=f(d,m,0)},this.setState=function(d,m,v){const b=d.clippingPlanes,x=d.clipIntersection,w=d.clipShadows,_=n.get(d);if(!r||b===null||b.length===0||s&&!w)s?f(null):c();else{const A=s?0:i,T=A*4;let E=_.clippingState||null;l.value=E,E=f(b,m,T,v);for(let C=0;C!==T;++C)E[C]=t[C];_.clippingState=E,this.numIntersection=x?this.numPlanes:0,this.numPlanes+=A}};function c(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function f(d,m,v,b){const x=d!==null?d.length:0;let w=null;if(x!==0){if(w=l.value,b!==!0||w===null){const _=v+x*4,A=m.matrixWorldInverse;a.getNormalMatrix(A),(w===null||w.length<_)&&(w=new Float32Array(_));for(let T=0,E=v;T!==x;++T,E+=4)o.copy(d[T]).applyMatrix4(A,a),o.normal.toArray(w,E),w[E+3]=o.constant}l.value=w,l.needsUpdate=!0}return e.numPlanes=x,e.numIntersection=0,w}}function Fle(n){let e=new WeakMap;function t(o,a){return a===p_?o.mapping=jf:a===m_&&(o.mapping=md),o}function i(o){if(o&&o.isTexture){const a=o.mapping;if(a===p_||a===m_)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const c=new J8(l.height);return c.fromEquirectangularTexture(n,o),e.set(o,c),o.addEventListener("dispose",r),t(c.texture,o.mapping)}else return null}}return o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}const p0=4,lk=[.125,.215,.35,.446,.526,.582],zp=20,KC=new ym,ck=new yt;let QC=null,JC=0,eR=0,tR=!1;const Np=(1+Math.sqrt(5))/2,jg=1/Np,uk=[new de(-Np,jg,0),new de(Np,jg,0),new de(-jg,0,Np),new de(jg,0,Np),new de(0,Np,-jg),new de(0,Np,jg),new de(-1,1,-1),new de(1,1,-1),new de(-1,1,1),new de(1,1,1)],Ble=new de;class mD{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100,s={}){const{size:o=256,position:a=Ble}=s;QC=this._renderer.getRenderTarget(),JC=this._renderer.getActiveCubeFace(),eR=this._renderer.getActiveMipmapLevel(),tR=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(o);const l=this._allocateTargets();return l.depthBuffer=!0,this._sceneToCubeUV(e,i,r,l,a),t>0&&this._blur(l,0,0,t),this._applyPMREM(l),this._cleanup(l),l}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=dk(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=hk(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(QC,JC,eR),this._renderer.xr.enabled=tR,e.scissorTest=!1,Zw(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===jf||e.mapping===md?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),QC=this._renderer.getRenderTarget(),JC=this._renderer.getActiveCubeFace(),eR=this._renderer.getActiveMipmapLevel(),tR=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:br,minFilter:br,generateMipmaps:!1,type:ov,format:io,colorSpace:gd,depthBuffer:!1},r=fk(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=fk(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=Vle(s)),this._blurMaterial=Gle(s,e,t)}return r}_compileMaterial(e){const t=new Pi(this._lodPlanes[0],e);this._renderer.compile(t,KC)}_sceneToCubeUV(e,t,i,r,s){const l=new Fr(90,1,t,i),c=[1,-1,1,1,1,1],f=[1,1,1,-1,-1,-1],d=this._renderer,m=d.autoClear,v=d.toneMapping;d.getClearColor(ck),d.toneMapping=vu,d.autoClear=!1,d.state.buffers.depth.getReversed()&&(d.setRenderTarget(r),d.clearDepth(),d.setRenderTarget(null));const x=new Yf({name:"PMREM.Background",side:Po,depthWrite:!1,depthTest:!1}),w=new Pi(new Ed,x);let _=!1;const A=e.background;A?A.isColor&&(x.color.copy(A),e.background=null,_=!0):(x.color.copy(ck),_=!0);for(let T=0;T<6;T++){const E=T%3;E===0?(l.up.set(0,c[T],0),l.position.set(s.x,s.y,s.z),l.lookAt(s.x+f[T],s.y,s.z)):E===1?(l.up.set(0,0,c[T]),l.position.set(s.x,s.y,s.z),l.lookAt(s.x,s.y+f[T],s.z)):(l.up.set(0,c[T],0),l.position.set(s.x,s.y,s.z),l.lookAt(s.x,s.y,s.z+f[T]));const C=this._cubeSize;Zw(r,E*C,T>2?C:0,C,C),d.setRenderTarget(r),_&&d.render(w,l),d.render(e,l)}w.geometry.dispose(),w.material.dispose(),d.toneMapping=v,d.autoClear=m,e.background=A}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===jf||e.mapping===md;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=dk()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=hk());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new Pi(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;Zw(t,0,0,3*l,2*l),i.setRenderTarget(t),i.render(o,KC)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;const r=this._lodPlanes.length;for(let s=1;s<r;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),a=uk[(r-s-1)%uk.length];this._blur(e,s-1,s,o,a)}t.autoClear=i}_blur(e,t,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,o,a){const l=this._renderer,c=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const f=3,d=new Pi(this._lodPlanes[r],c),m=c.uniforms,v=this._sizeLods[i]-1,b=isFinite(s)?Math.PI/(2*v):2*Math.PI/(2*zp-1),x=s/b,w=isFinite(s)?1+Math.floor(f*x):zp;w>zp&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${w} samples when the maximum is set to ${zp}`);const _=[];let A=0;for(let O=0;O<zp;++O){const I=O/x,L=Math.exp(-I*I/2);_.push(L),O===0?A+=L:O<w&&(A+=2*L)}for(let O=0;O<_.length;O++)_[O]=_[O]/A;m.envMap.value=e.texture,m.samples.value=w,m.weights.value=_,m.latitudinal.value=o==="latitudinal",a&&(m.poleAxis.value=a);const{_lodMax:T}=this;m.dTheta.value=b,m.mipInt.value=T-i;const E=this._sizeLods[r],C=3*E*(r>T-p0?r-T+p0:0),R=4*(this._cubeSize-E);Zw(t,C,R,3*E,2*E),l.setRenderTarget(t),l.render(d,KC)}}function Vle(n){const e=[],t=[],i=[];let r=n;const s=n-p0+1+lk.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);t.push(a);let l=1/a;o>n-p0?l=lk[o-n+p0-1]:o===0&&(l=0),i.push(l);const c=1/(a-2),f=-c,d=1+c,m=[f,f,d,f,d,d,f,f,d,d,f,d],v=6,b=6,x=3,w=2,_=1,A=new Float32Array(x*b*v),T=new Float32Array(w*b*v),E=new Float32Array(_*b*v);for(let R=0;R<v;R++){const O=R%3*2/3-1,I=R>2?0:-1,L=[O,I,0,O+2/3,I,0,O+2/3,I+1,0,O,I,0,O+2/3,I+1,0,O,I+1,0];A.set(L,x*b*R),T.set(m,w*b*R);const N=[R,R,R,R,R,R];E.set(N,_*b*R)}const C=new hn;C.setAttribute("position",new li(A,x)),C.setAttribute("uv",new li(T,w)),C.setAttribute("faceIndex",new li(E,_)),e.push(C),r>p0&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function fk(n,e,t){const i=new wu(n,e,t);return i.texture.mapping=sv,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function Zw(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function Gle(n,e,t){const i=new Float32Array(zp),r=new de(0,1,0);return new Al({name:"SphericalGaussianBlur",defines:{n:zp,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:GL(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Nf,depthTest:!1,depthWrite:!1})}function hk(){return new Al({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:GL(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Nf,depthTest:!1,depthWrite:!1})}function dk(){return new Al({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:GL(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Nf,depthTest:!1,depthWrite:!1})}function GL(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function Hle(n){let e=new WeakMap,t=null;function i(a){if(a&&a.isTexture){const l=a.mapping,c=l===p_||l===m_,f=l===jf||l===md;if(c||f){let d=e.get(a);const m=d!==void 0?d.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==m)return t===null&&(t=new mD(n)),d=c?t.fromEquirectangular(a,d):t.fromCubemap(a,d),d.texture.pmremVersion=a.pmremVersion,e.set(a,d),d.texture;if(d!==void 0)return d.texture;{const v=a.image;return c&&v&&v.height>0||f&&v&&r(v)?(t===null&&(t=new mD(n)),d=c?t.fromEquirectangular(a):t.fromCubemap(a),d.texture.pmremVersion=a.pmremVersion,e.set(a,d),a.addEventListener("dispose",s),d.texture):null}}}return a}function r(a){let l=0;const c=6;for(let f=0;f<c;f++)a[f]!==void 0&&l++;return l===c}function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:o}}function jle(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(i){const r=t(i);return r===null&&S_("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function Wle(n,e,t,i){const r={},s=new WeakMap;function o(d){const m=d.target;m.index!==null&&e.remove(m.index);for(const b in m.attributes)e.remove(m.attributes[b]);m.removeEventListener("dispose",o),delete r[m.id];const v=s.get(m);v&&(e.remove(v),s.delete(m)),i.releaseStatesOfGeometry(m),m.isInstancedBufferGeometry===!0&&delete m._maxInstanceCount,t.memory.geometries--}function a(d,m){return r[m.id]===!0||(m.addEventListener("dispose",o),r[m.id]=!0,t.memory.geometries++),m}function l(d){const m=d.attributes;for(const v in m)e.update(m[v],n.ARRAY_BUFFER)}function c(d){const m=[],v=d.index,b=d.attributes.position;let x=0;if(v!==null){const A=v.array;x=v.version;for(let T=0,E=A.length;T<E;T+=3){const C=A[T+0],R=A[T+1],O=A[T+2];m.push(C,R,R,O,O,C)}}else if(b!==void 0){const A=b.array;x=b.version;for(let T=0,E=A.length/3-1;T<E;T+=3){const C=T+0,R=T+1,O=T+2;m.push(C,R,R,O,O,C)}}else return;const w=new(q8(m)?mL:pL)(m,1);w.version=x;const _=s.get(d);_&&e.remove(_),s.set(d,w)}function f(d){const m=s.get(d);if(m){const v=d.index;v!==null&&m.version<v.version&&c(d)}else c(d);return s.get(d)}return{get:a,update:l,getWireframeAttribute:f}}function $le(n,e,t){let i;function r(m){i=m}let s,o;function a(m){s=m.type,o=m.bytesPerElement}function l(m,v){n.drawElements(i,v,s,m*o),t.update(v,i,1)}function c(m,v,b){b!==0&&(n.drawElementsInstanced(i,v,s,m*o,b),t.update(v,i,b))}function f(m,v,b){if(b===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,v,0,s,m,0,b);let w=0;for(let _=0;_<b;_++)w+=v[_];t.update(w,i,1)}function d(m,v,b,x){if(b===0)return;const w=e.get("WEBGL_multi_draw");if(w===null)for(let _=0;_<m.length;_++)c(m[_]/o,v[_],x[_]);else{w.multiDrawElementsInstancedWEBGL(i,v,0,s,m,0,x,0,b);let _=0;for(let A=0;A<b;A++)_+=v[A]*x[A];t.update(_,i,1)}}this.setMode=r,this.setIndex=a,this.render=l,this.renderInstances=c,this.renderMultiDraw=f,this.renderMultiDrawInstances=d}function qle(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,o,a){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=a*(s/3);break;case n.LINES:t.lines+=a*(s/2);break;case n.LINE_STRIP:t.lines+=a*(s-1);break;case n.LINE_LOOP:t.lines+=a*s;break;case n.POINTS:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function Xle(n,e,t){const i=new WeakMap,r=new Gn;function s(o,a,l){const c=o.morphTargetInfluences,f=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,d=f!==void 0?f.length:0;let m=i.get(a);if(m===void 0||m.count!==d){let N=function(){I.dispose(),i.delete(a),a.removeEventListener("dispose",N)};var v=N;m!==void 0&&m.texture.dispose();const b=a.morphAttributes.position!==void 0,x=a.morphAttributes.normal!==void 0,w=a.morphAttributes.color!==void 0,_=a.morphAttributes.position||[],A=a.morphAttributes.normal||[],T=a.morphAttributes.color||[];let E=0;b===!0&&(E=1),x===!0&&(E=2),w===!0&&(E=3);let C=a.attributes.position.count*E,R=1;C>e.maxTextureSize&&(R=Math.ceil(C/e.maxTextureSize),C=e.maxTextureSize);const O=new Float32Array(C*R*4*d),I=new jM(O,C,R,d);I.type=fa,I.needsUpdate=!0;const L=E*4;for(let V=0;V<d;V++){const B=_[V],k=A[V],j=T[V],q=C*R*4*V;for(let W=0;W<B.count;W++){const G=W*L;b===!0&&(r.fromBufferAttribute(B,W),O[q+G+0]=r.x,O[q+G+1]=r.y,O[q+G+2]=r.z,O[q+G+3]=0),x===!0&&(r.fromBufferAttribute(k,W),O[q+G+4]=r.x,O[q+G+5]=r.y,O[q+G+6]=r.z,O[q+G+7]=0),w===!0&&(r.fromBufferAttribute(j,W),O[q+G+8]=r.x,O[q+G+9]=r.y,O[q+G+10]=r.z,O[q+G+11]=j.itemSize===4?r.w:1)}}m={count:d,texture:I,size:new ut(C,R)},i.set(a,m),a.addEventListener("dispose",N)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)l.getUniforms().setValue(n,"morphTexture",o.morphTexture,t);else{let b=0;for(let w=0;w<c.length;w++)b+=c[w];const x=a.morphTargetsRelative?1:1-b;l.getUniforms().setValue(n,"morphTargetBaseInfluence",x),l.getUniforms().setValue(n,"morphTargetInfluences",c)}l.getUniforms().setValue(n,"morphTargetsTexture",m.texture,t),l.getUniforms().setValue(n,"morphTargetsTextureSize",m.size)}return{update:s}}function Yle(n,e,t,i){let r=new WeakMap;function s(l){const c=i.render.frame,f=l.geometry,d=e.get(l,f);if(r.get(d)!==c&&(e.update(d),r.set(d,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),r.get(l)!==c&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),r.set(l,c))),l.isSkinnedMesh){const m=l.skeleton;r.get(m)!==c&&(m.update(),r.set(m,c))}return d}function o(){r=new WeakMap}function a(l){const c=l.target;c.removeEventListener("dispose",a),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:s,dispose:o}}const ZV=new ur,pk=new _L(1,1),KV=new jM,QV=new WM,JV=new tx,mk=[],gk=[],vk=new Float32Array(16),yk=new Float32Array(9),bk=new Float32Array(4);function cv(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=mk[r];if(s===void 0&&(s=new Float32Array(r),mk[r]=s),e!==0){i.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function ns(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function is(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function vT(n,e){let t=gk[e];t===void 0&&(t=new Int32Array(e),gk[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function Zle(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function Kle(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ns(t,e))return;n.uniform2fv(this.addr,e),is(t,e)}}function Qle(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(ns(t,e))return;n.uniform3fv(this.addr,e),is(t,e)}}function Jle(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ns(t,e))return;n.uniform4fv(this.addr,e),is(t,e)}}function ece(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(ns(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),is(t,e)}else{if(ns(t,i))return;bk.set(i),n.uniformMatrix2fv(this.addr,!1,bk),is(t,i)}}function tce(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(ns(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),is(t,e)}else{if(ns(t,i))return;yk.set(i),n.uniformMatrix3fv(this.addr,!1,yk),is(t,i)}}function nce(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(ns(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),is(t,e)}else{if(ns(t,i))return;vk.set(i),n.uniformMatrix4fv(this.addr,!1,vk),is(t,i)}}function ice(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function rce(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ns(t,e))return;n.uniform2iv(this.addr,e),is(t,e)}}function sce(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(ns(t,e))return;n.uniform3iv(this.addr,e),is(t,e)}}function oce(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ns(t,e))return;n.uniform4iv(this.addr,e),is(t,e)}}function ace(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function lce(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ns(t,e))return;n.uniform2uiv(this.addr,e),is(t,e)}}function cce(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(ns(t,e))return;n.uniform3uiv(this.addr,e),is(t,e)}}function uce(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ns(t,e))return;n.uniform4uiv(this.addr,e),is(t,e)}}function fce(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r);let s;this.type===n.SAMPLER_2D_SHADOW?(pk.compareFunction=fL,s=pk):s=ZV,t.setTexture2D(e||s,r)}function hce(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||QV,r)}function dce(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||JV,r)}function pce(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||KV,r)}function mce(n){switch(n){case 5126:return Zle;case 35664:return Kle;case 35665:return Qle;case 35666:return Jle;case 35674:return ece;case 35675:return tce;case 35676:return nce;case 5124:case 35670:return ice;case 35667:case 35671:return rce;case 35668:case 35672:return sce;case 35669:case 35673:return oce;case 5125:return ace;case 36294:return lce;case 36295:return cce;case 36296:return uce;case 35678:case 36198:case 36298:case 36306:case 35682:return fce;case 35679:case 36299:case 36307:return hce;case 35680:case 36300:case 36308:case 36293:return dce;case 36289:case 36303:case 36311:case 36292:return pce}}function gce(n,e){n.uniform1fv(this.addr,e)}function vce(n,e){const t=cv(e,this.size,2);n.uniform2fv(this.addr,t)}function yce(n,e){const t=cv(e,this.size,3);n.uniform3fv(this.addr,t)}function bce(n,e){const t=cv(e,this.size,4);n.uniform4fv(this.addr,t)}function _ce(n,e){const t=cv(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function xce(n,e){const t=cv(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function wce(n,e){const t=cv(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function Sce(n,e){n.uniform1iv(this.addr,e)}function Ece(n,e){n.uniform2iv(this.addr,e)}function Mce(n,e){n.uniform3iv(this.addr,e)}function Tce(n,e){n.uniform4iv(this.addr,e)}function Ace(n,e){n.uniform1uiv(this.addr,e)}function Cce(n,e){n.uniform2uiv(this.addr,e)}function Rce(n,e){n.uniform3uiv(this.addr,e)}function Dce(n,e){n.uniform4uiv(this.addr,e)}function Oce(n,e,t){const i=this.cache,r=e.length,s=vT(t,r);ns(i,s)||(n.uniform1iv(this.addr,s),is(i,s));for(let o=0;o!==r;++o)t.setTexture2D(e[o]||ZV,s[o])}function Lce(n,e,t){const i=this.cache,r=e.length,s=vT(t,r);ns(i,s)||(n.uniform1iv(this.addr,s),is(i,s));for(let o=0;o!==r;++o)t.setTexture3D(e[o]||QV,s[o])}function Pce(n,e,t){const i=this.cache,r=e.length,s=vT(t,r);ns(i,s)||(n.uniform1iv(this.addr,s),is(i,s));for(let o=0;o!==r;++o)t.setTextureCube(e[o]||JV,s[o])}function Ice(n,e,t){const i=this.cache,r=e.length,s=vT(t,r);ns(i,s)||(n.uniform1iv(this.addr,s),is(i,s));for(let o=0;o!==r;++o)t.setTexture2DArray(e[o]||KV,s[o])}function Nce(n){switch(n){case 5126:return gce;case 35664:return vce;case 35665:return yce;case 35666:return bce;case 35674:return _ce;case 35675:return xce;case 35676:return wce;case 5124:case 35670:return Sce;case 35667:case 35671:return Ece;case 35668:case 35672:return Mce;case 35669:case 35673:return Tce;case 5125:return Ace;case 36294:return Cce;case 36295:return Rce;case 36296:return Dce;case 35678:case 36198:case 36298:case 36306:case 35682:return Oce;case 35679:case 36299:case 36307:return Lce;case 35680:case 36300:case 36308:case 36293:return Pce;case 36289:case 36303:case 36311:case 36292:return Ice}}class Uce{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=mce(t.type)}}class kce{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=Nce(t.type)}}class zce{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const a=r[s];a.setValue(e,t[a.id],i)}}}const nR=/(\w+)(\])?(\[|\.)?/g;function _k(n,e){n.seq.push(e),n.map[e.id]=e}function Fce(n,e,t){const i=n.name,r=i.length;for(nR.lastIndex=0;;){const s=nR.exec(i),o=nR.lastIndex;let a=s[1];const l=s[2]==="]",c=s[3];if(l&&(a=a|0),c===void 0||c==="["&&o+2===r){_k(t,c===void 0?new Uce(a,n,e):new kce(a,n,e));break}else{let d=t.map[a];d===void 0&&(d=new zce(a),_k(t,d)),t=d}}}class OS{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const s=e.getActiveUniform(t,r),o=e.getUniformLocation(t,s.name);Fce(s,o,this)}}setValue(e,t,i,r){const s=this.map[t];s!==void 0&&s.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=i[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in t&&i.push(o)}return i}}function xk(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}const Bce=37297;let Vce=0;function Gce(n,e){const t=n.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o<s;o++){const a=o+1;i.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return i.join(`
`)}const wk=new un;function Hce(n){Wn._getMatrix(wk,Wn.workingColorSpace,n);const e=`mat3( ${wk.elements.map(t=>t.toFixed(4))} )`;switch(Wn.getTransfer(n)){case __:return[e,"LinearTransferOETF"];case mi:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",n),[e,"LinearTransferOETF"]}}function Sk(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),s=(n.getShaderInfoLog(e)||"").trim();if(i&&s==="")return"";const o=/ERROR: 0:(\d+)/.exec(s);if(o){const a=parseInt(o[1]);return t.toUpperCase()+`

`+s+`

`+Gce(n.getShaderSource(e),a)}else return s}function jce(n,e){const t=Hce(e);return[`vec4 ${n}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function Wce(n,e){let t;switch(e){case C8:t="Linear";break;case R8:t="Reinhard";break;case D8:t="Cineon";break;case eL:t="ACESFilmic";break;case L8:t="AgX";break;case P8:t="Neutral";break;case O8:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const Kw=new de;function $ce(){Wn.getLuminanceCoefficients(Kw);const n=Kw.x.toFixed(4),e=Kw.y.toFixed(4),t=Kw.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function qce(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Rb).join(`
`)}function Xce(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function Yce(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),o=s.name;let a=1;s.type===n.FLOAT_MAT2&&(a=2),s.type===n.FLOAT_MAT3&&(a=3),s.type===n.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function Rb(n){return n!==""}function Ek(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Mk(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Zce=/^[ \t]*#include +<([\w\d./]+)>/gm;function gD(n){return n.replace(Zce,Qce)}const Kce=new Map;function Qce(n,e){let t=bn[e];if(t===void 0){const i=Kce.get(e);if(i!==void 0)t=bn[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return gD(t)}const Jce=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Tk(n){return n.replace(Jce,eue)}function eue(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function Ak(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function tue(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===NM?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===Gb?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===sc&&(e="SHADOWMAP_TYPE_VSM"),e}function nue(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case jf:case md:e="ENVMAP_TYPE_CUBE";break;case sv:e="ENVMAP_TYPE_CUBE_UV";break}return e}function iue(n){let e="ENVMAP_MODE_REFLECTION";return n.envMap&&n.envMapMode===md&&(e="ENVMAP_MODE_REFRACTION"),e}function rue(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case J_:e="ENVMAP_BLENDING_MULTIPLY";break;case T8:e="ENVMAP_BLENDING_MIX";break;case A8:e="ENVMAP_BLENDING_ADD";break}return e}function sue(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:i,maxMip:t}}function oue(n,e,t,i){const r=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=tue(t),c=nue(t),f=iue(t),d=rue(t),m=sue(t),v=qce(t),b=Xce(s),x=r.createProgram();let w,_,A=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(w=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,b].filter(Rb).join(`
`),w.length>0&&(w+=`
`),_=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,b].filter(Rb).join(`
`),_.length>0&&(_+=`
`)):(w=[Ak(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,b,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+f:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",t.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Rb).join(`
`),_=[Ak(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,b,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+f:"",t.envMap?"#define "+d:"",m?"#define CUBEUV_TEXEL_WIDTH "+m.texelWidth:"",m?"#define CUBEUV_TEXEL_HEIGHT "+m.texelHeight:"",m?"#define CUBEUV_MAX_MIP "+m.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",t.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==vu?"#define TONE_MAPPING":"",t.toneMapping!==vu?bn.tonemapping_pars_fragment:"",t.toneMapping!==vu?Wce("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",bn.colorspace_pars_fragment,jce("linearToOutputTexel",t.outputColorSpace),$ce(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Rb).join(`
`)),o=gD(o),o=Ek(o,t),o=Mk(o,t),a=gD(a),a=Ek(a,t),a=Mk(a,t),o=Tk(o),a=Tk(a),t.isRawShaderMaterial!==!0&&(A=`#version 300 es
`,w=[v,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+w,_=["#define varying in",t.glslVersion===aD?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===aD?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+_);const T=A+w+o,E=A+_+a,C=xk(r,r.VERTEX_SHADER,T),R=xk(r,r.FRAGMENT_SHADER,E);r.attachShader(x,C),r.attachShader(x,R),t.index0AttributeName!==void 0?r.bindAttribLocation(x,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(x,0,"position"),r.linkProgram(x);function O(V){if(n.debug.checkShaderErrors){const B=r.getProgramInfoLog(x)||"",k=r.getShaderInfoLog(C)||"",j=r.getShaderInfoLog(R)||"",q=B.trim(),W=k.trim(),G=j.trim();let K=!0,te=!0;if(r.getProgramParameter(x,r.LINK_STATUS)===!1)if(K=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,x,C,R);else{const ie=Sk(r,C,"vertex"),F=Sk(r,R,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(x,r.VALIDATE_STATUS)+`

Material Name: `+V.name+`
Material Type: `+V.type+`

Program Info Log: `+q+`
`+ie+`
`+F)}else q!==""?console.warn("THREE.WebGLProgram: Program Info Log:",q):(W===""||G==="")&&(te=!1);te&&(V.diagnostics={runnable:K,programLog:q,vertexShader:{log:W,prefix:w},fragmentShader:{log:G,prefix:_}})}r.deleteShader(C),r.deleteShader(R),I=new OS(r,x),L=Yce(r,x)}let I;this.getUniforms=function(){return I===void 0&&O(this),I};let L;this.getAttributes=function(){return L===void 0&&O(this),L};let N=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return N===!1&&(N=r.getProgramParameter(x,Bce)),N},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(x),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=Vce++,this.cacheKey=e,this.usedTimes=1,this.program=x,this.vertexShader=C,this.fragmentShader=R,this}let aue=0;class lue{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return o.has(r)===!1&&(o.add(r),r.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new cue(e),t.set(e,i)),i}}class cue{constructor(e){this.id=aue++,this.code=e,this.usedTimes=0}}function uue(n,e,t,i,r,s,o){const a=new U0,l=new lue,c=new Set,f=[],d=r.logarithmicDepthBuffer,m=r.vertexTextures;let v=r.precision;const b={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function x(L){return c.add(L),L===0?"uv":`uv${L}`}function w(L,N,V,B,k){const j=B.fog,q=k.geometry,W=L.isMeshStandardMaterial?B.environment:null,G=(L.isMeshStandardMaterial?t:e).get(L.envMap||W),K=G&&G.mapping===sv?G.image.height:null,te=b[L.type];L.precision!==null&&(v=r.getMaxPrecision(L.precision),v!==L.precision&&console.warn("THREE.WebGLProgram.getParameters:",L.precision,"not supported, using",v,"instead."));const ie=q.morphAttributes.position||q.morphAttributes.normal||q.morphAttributes.color,F=ie!==void 0?ie.length:0;let X=0;q.morphAttributes.position!==void 0&&(X=1),q.morphAttributes.normal!==void 0&&(X=2),q.morphAttributes.color!==void 0&&(X=3);let ee,le,oe,ue;if(te){const Bt=oc[te];ee=Bt.vertexShader,le=Bt.fragmentShader}else ee=L.vertexShader,le=L.fragmentShader,l.update(L),oe=l.getVertexShaderID(L),ue=l.getFragmentShaderID(L);const he=n.getRenderTarget(),be=n.state.buffers.depth.getReversed(),Te=k.isInstancedMesh===!0,Ee=k.isBatchedMesh===!0,Ce=!!L.map,we=!!L.matcap,ae=!!G,ve=!!L.aoMap,xe=!!L.lightMap,me=!!L.bumpMap,Ie=!!L.normalMap,Ne=!!L.displacementMap,ke=!!L.emissiveMap,Fe=!!L.metalnessMap,Ae=!!L.roughnessMap,tt=L.anisotropy>0,se=L.clearcoat>0,Z=L.dispersion>0,ye=L.iridescence>0,Y=L.sheen>0,J=L.transmission>0,re=tt&&!!L.anisotropyMap,ge=se&&!!L.clearcoatMap,_e=se&&!!L.clearcoatNormalMap,Se=se&&!!L.clearcoatRoughnessMap,Ue=ye&&!!L.iridescenceMap,Me=ye&&!!L.iridescenceThicknessMap,Le=Y&&!!L.sheenColorMap,He=Y&&!!L.sheenRoughnessMap,nt=!!L.specularMap,Je=!!L.specularColorMap,gt=!!L.specularIntensityMap,Re=J&&!!L.transmissionMap,$e=J&&!!L.thicknessMap,at=!!L.gradientMap,_t=!!L.alphaMap,st=L.alphaTest>0,qe=!!L.alphaHash,vt=!!L.extensions;let Rt=vu;L.toneMapped&&(he===null||he.isXRRenderTarget===!0)&&(Rt=n.toneMapping);const Tt={shaderID:te,shaderType:L.type,shaderName:L.name,vertexShader:ee,fragmentShader:le,defines:L.defines,customVertexShaderID:oe,customFragmentShaderID:ue,isRawShaderMaterial:L.isRawShaderMaterial===!0,glslVersion:L.glslVersion,precision:v,batching:Ee,batchingColor:Ee&&k._colorsTexture!==null,instancing:Te,instancingColor:Te&&k.instanceColor!==null,instancingMorph:Te&&k.morphTexture!==null,supportsVertexTextures:m,outputColorSpace:he===null?n.outputColorSpace:he.isXRRenderTarget===!0?he.texture.colorSpace:gd,alphaToCoverage:!!L.alphaToCoverage,map:Ce,matcap:we,envMap:ae,envMapMode:ae&&G.mapping,envMapCubeUVHeight:K,aoMap:ve,lightMap:xe,bumpMap:me,normalMap:Ie,displacementMap:m&&Ne,emissiveMap:ke,normalMapObjectSpace:Ie&&L.normalMapType===F8,normalMapTangentSpace:Ie&&L.normalMapType===Sd,metalnessMap:Fe,roughnessMap:Ae,anisotropy:tt,anisotropyMap:re,clearcoat:se,clearcoatMap:ge,clearcoatNormalMap:_e,clearcoatRoughnessMap:Se,dispersion:Z,iridescence:ye,iridescenceMap:Ue,iridescenceThicknessMap:Me,sheen:Y,sheenColorMap:Le,sheenRoughnessMap:He,specularMap:nt,specularColorMap:Je,specularIntensityMap:gt,transmission:J,transmissionMap:Re,thicknessMap:$e,gradientMap:at,opaque:L.transparent===!1&&L.blending===Kp&&L.alphaToCoverage===!1,alphaMap:_t,alphaTest:st,alphaHash:qe,combine:L.combine,mapUv:Ce&&x(L.map.channel),aoMapUv:ve&&x(L.aoMap.channel),lightMapUv:xe&&x(L.lightMap.channel),bumpMapUv:me&&x(L.bumpMap.channel),normalMapUv:Ie&&x(L.normalMap.channel),displacementMapUv:Ne&&x(L.displacementMap.channel),emissiveMapUv:ke&&x(L.emissiveMap.channel),metalnessMapUv:Fe&&x(L.metalnessMap.channel),roughnessMapUv:Ae&&x(L.roughnessMap.channel),anisotropyMapUv:re&&x(L.anisotropyMap.channel),clearcoatMapUv:ge&&x(L.clearcoatMap.channel),clearcoatNormalMapUv:_e&&x(L.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Se&&x(L.clearcoatRoughnessMap.channel),iridescenceMapUv:Ue&&x(L.iridescenceMap.channel),iridescenceThicknessMapUv:Me&&x(L.iridescenceThicknessMap.channel),sheenColorMapUv:Le&&x(L.sheenColorMap.channel),sheenRoughnessMapUv:He&&x(L.sheenRoughnessMap.channel),specularMapUv:nt&&x(L.specularMap.channel),specularColorMapUv:Je&&x(L.specularColorMap.channel),specularIntensityMapUv:gt&&x(L.specularIntensityMap.channel),transmissionMapUv:Re&&x(L.transmissionMap.channel),thicknessMapUv:$e&&x(L.thicknessMap.channel),alphaMapUv:_t&&x(L.alphaMap.channel),vertexTangents:!!q.attributes.tangent&&(Ie||tt),vertexColors:L.vertexColors,vertexAlphas:L.vertexColors===!0&&!!q.attributes.color&&q.attributes.color.itemSize===4,pointsUvs:k.isPoints===!0&&!!q.attributes.uv&&(Ce||_t),fog:!!j,useFog:L.fog===!0,fogExp2:!!j&&j.isFogExp2,flatShading:L.flatShading===!0&&L.wireframe===!1,sizeAttenuation:L.sizeAttenuation===!0,logarithmicDepthBuffer:d,reversedDepthBuffer:be,skinning:k.isSkinnedMesh===!0,morphTargets:q.morphAttributes.position!==void 0,morphNormals:q.morphAttributes.normal!==void 0,morphColors:q.morphAttributes.color!==void 0,morphTargetsCount:F,morphTextureStride:X,numDirLights:N.directional.length,numPointLights:N.point.length,numSpotLights:N.spot.length,numSpotLightMaps:N.spotLightMap.length,numRectAreaLights:N.rectArea.length,numHemiLights:N.hemi.length,numDirLightShadows:N.directionalShadowMap.length,numPointLightShadows:N.pointShadowMap.length,numSpotLightShadows:N.spotShadowMap.length,numSpotLightShadowsWithMaps:N.numSpotLightShadowsWithMaps,numLightProbes:N.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:L.dithering,shadowMapEnabled:n.shadowMap.enabled&&V.length>0,shadowMapType:n.shadowMap.type,toneMapping:Rt,decodeVideoTexture:Ce&&L.map.isVideoTexture===!0&&Wn.getTransfer(L.map.colorSpace)===mi,decodeVideoTextureEmissive:ke&&L.emissiveMap.isVideoTexture===!0&&Wn.getTransfer(L.emissiveMap.colorSpace)===mi,premultipliedAlpha:L.premultipliedAlpha,doubleSided:L.side===yr,flipSided:L.side===Po,useDepthPacking:L.depthPacking>=0,depthPacking:L.depthPacking||0,index0AttributeName:L.index0AttributeName,extensionClipCullDistance:vt&&L.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(vt&&L.extensions.multiDraw===!0||Ee)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:L.customProgramCacheKey()};return Tt.vertexUv1s=c.has(1),Tt.vertexUv2s=c.has(2),Tt.vertexUv3s=c.has(3),c.clear(),Tt}function _(L){const N=[];if(L.shaderID?N.push(L.shaderID):(N.push(L.customVertexShaderID),N.push(L.customFragmentShaderID)),L.defines!==void 0)for(const V in L.defines)N.push(V),N.push(L.defines[V]);return L.isRawShaderMaterial===!1&&(A(N,L),T(N,L),N.push(n.outputColorSpace)),N.push(L.customProgramCacheKey),N.join()}function A(L,N){L.push(N.precision),L.push(N.outputColorSpace),L.push(N.envMapMode),L.push(N.envMapCubeUVHeight),L.push(N.mapUv),L.push(N.alphaMapUv),L.push(N.lightMapUv),L.push(N.aoMapUv),L.push(N.bumpMapUv),L.push(N.normalMapUv),L.push(N.displacementMapUv),L.push(N.emissiveMapUv),L.push(N.metalnessMapUv),L.push(N.roughnessMapUv),L.push(N.anisotropyMapUv),L.push(N.clearcoatMapUv),L.push(N.clearcoatNormalMapUv),L.push(N.clearcoatRoughnessMapUv),L.push(N.iridescenceMapUv),L.push(N.iridescenceThicknessMapUv),L.push(N.sheenColorMapUv),L.push(N.sheenRoughnessMapUv),L.push(N.specularMapUv),L.push(N.specularColorMapUv),L.push(N.specularIntensityMapUv),L.push(N.transmissionMapUv),L.push(N.thicknessMapUv),L.push(N.combine),L.push(N.fogExp2),L.push(N.sizeAttenuation),L.push(N.morphTargetsCount),L.push(N.morphAttributeCount),L.push(N.numDirLights),L.push(N.numPointLights),L.push(N.numSpotLights),L.push(N.numSpotLightMaps),L.push(N.numHemiLights),L.push(N.numRectAreaLights),L.push(N.numDirLightShadows),L.push(N.numPointLightShadows),L.push(N.numSpotLightShadows),L.push(N.numSpotLightShadowsWithMaps),L.push(N.numLightProbes),L.push(N.shadowMapType),L.push(N.toneMapping),L.push(N.numClippingPlanes),L.push(N.numClipIntersection),L.push(N.depthPacking)}function T(L,N){a.disableAll(),N.supportsVertexTextures&&a.enable(0),N.instancing&&a.enable(1),N.instancingColor&&a.enable(2),N.instancingMorph&&a.enable(3),N.matcap&&a.enable(4),N.envMap&&a.enable(5),N.normalMapObjectSpace&&a.enable(6),N.normalMapTangentSpace&&a.enable(7),N.clearcoat&&a.enable(8),N.iridescence&&a.enable(9),N.alphaTest&&a.enable(10),N.vertexColors&&a.enable(11),N.vertexAlphas&&a.enable(12),N.vertexUv1s&&a.enable(13),N.vertexUv2s&&a.enable(14),N.vertexUv3s&&a.enable(15),N.vertexTangents&&a.enable(16),N.anisotropy&&a.enable(17),N.alphaHash&&a.enable(18),N.batching&&a.enable(19),N.dispersion&&a.enable(20),N.batchingColor&&a.enable(21),N.gradientMap&&a.enable(22),L.push(a.mask),a.disableAll(),N.fog&&a.enable(0),N.useFog&&a.enable(1),N.flatShading&&a.enable(2),N.logarithmicDepthBuffer&&a.enable(3),N.reversedDepthBuffer&&a.enable(4),N.skinning&&a.enable(5),N.morphTargets&&a.enable(6),N.morphNormals&&a.enable(7),N.morphColors&&a.enable(8),N.premultipliedAlpha&&a.enable(9),N.shadowMapEnabled&&a.enable(10),N.doubleSided&&a.enable(11),N.flipSided&&a.enable(12),N.useDepthPacking&&a.enable(13),N.dithering&&a.enable(14),N.transmission&&a.enable(15),N.sheen&&a.enable(16),N.opaque&&a.enable(17),N.pointsUvs&&a.enable(18),N.decodeVideoTexture&&a.enable(19),N.decodeVideoTextureEmissive&&a.enable(20),N.alphaToCoverage&&a.enable(21),L.push(a.mask)}function E(L){const N=b[L.type];let V;if(N){const B=oc[N];V=gL.clone(B.uniforms)}else V=L.uniforms;return V}function C(L,N){let V;for(let B=0,k=f.length;B<k;B++){const j=f[B];if(j.cacheKey===N){V=j,++V.usedTimes;break}}return V===void 0&&(V=new oue(n,N,L,s),f.push(V)),V}function R(L){if(--L.usedTimes===0){const N=f.indexOf(L);f[N]=f[f.length-1],f.pop(),L.destroy()}}function O(L){l.remove(L)}function I(){l.dispose()}return{getParameters:w,getProgramCacheKey:_,getUniforms:E,acquireProgram:C,releaseProgram:R,releaseShaderCache:O,programs:f,dispose:I}}function fue(){let n=new WeakMap;function e(o){return n.has(o)}function t(o){let a=n.get(o);return a===void 0&&(a={},n.set(o,a)),a}function i(o){n.delete(o)}function r(o,a,l){n.get(o)[a]=l}function s(){n=new WeakMap}return{has:e,get:t,remove:i,update:r,dispose:s}}function hue(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function Ck(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function Rk(){const n=[];let e=0;const t=[],i=[],r=[];function s(){e=0,t.length=0,i.length=0,r.length=0}function o(d,m,v,b,x,w){let _=n[e];return _===void 0?(_={id:d.id,object:d,geometry:m,material:v,groupOrder:b,renderOrder:d.renderOrder,z:x,group:w},n[e]=_):(_.id=d.id,_.object=d,_.geometry=m,_.material=v,_.groupOrder=b,_.renderOrder=d.renderOrder,_.z=x,_.group=w),e++,_}function a(d,m,v,b,x,w){const _=o(d,m,v,b,x,w);v.transmission>0?i.push(_):v.transparent===!0?r.push(_):t.push(_)}function l(d,m,v,b,x,w){const _=o(d,m,v,b,x,w);v.transmission>0?i.unshift(_):v.transparent===!0?r.unshift(_):t.unshift(_)}function c(d,m){t.length>1&&t.sort(d||hue),i.length>1&&i.sort(m||Ck),r.length>1&&r.sort(m||Ck)}function f(){for(let d=e,m=n.length;d<m;d++){const v=n[d];if(v.id===null)break;v.id=null,v.object=null,v.geometry=null,v.material=null,v.group=null}}return{opaque:t,transmissive:i,transparent:r,init:s,push:a,unshift:l,finish:f,sort:c}}function due(){let n=new WeakMap;function e(i,r){const s=n.get(i);let o;return s===void 0?(o=new Rk,n.set(i,[o])):r>=s.length?(o=new Rk,s.push(o)):o=s[r],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function pue(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new de,color:new yt};break;case"SpotLight":t={position:new de,direction:new de,color:new yt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new de,color:new yt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new de,skyColor:new yt,groundColor:new yt};break;case"RectAreaLight":t={color:new yt,position:new de,halfWidth:new de,halfHeight:new de};break}return n[e.id]=t,t}}}function mue(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ut};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ut};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ut,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let gue=0;function vue(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function yue(n){const e=new pue,t=mue(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let c=0;c<9;c++)i.probe.push(new de);const r=new de,s=new Kt,o=new Kt;function a(c){let f=0,d=0,m=0;for(let L=0;L<9;L++)i.probe[L].set(0,0,0);let v=0,b=0,x=0,w=0,_=0,A=0,T=0,E=0,C=0,R=0,O=0;c.sort(vue);for(let L=0,N=c.length;L<N;L++){const V=c[L],B=V.color,k=V.intensity,j=V.distance,q=V.shadow&&V.shadow.map?V.shadow.map.texture:null;if(V.isAmbientLight)f+=B.r*k,d+=B.g*k,m+=B.b*k;else if(V.isLightProbe){for(let W=0;W<9;W++)i.probe[W].addScaledVector(V.sh.coefficients[W],k);O++}else if(V.isDirectionalLight){const W=e.get(V);if(W.color.copy(V.color).multiplyScalar(V.intensity),V.castShadow){const G=V.shadow,K=t.get(V);K.shadowIntensity=G.intensity,K.shadowBias=G.bias,K.shadowNormalBias=G.normalBias,K.shadowRadius=G.radius,K.shadowMapSize=G.mapSize,i.directionalShadow[v]=K,i.directionalShadowMap[v]=q,i.directionalShadowMatrix[v]=V.shadow.matrix,A++}i.directional[v]=W,v++}else if(V.isSpotLight){const W=e.get(V);W.position.setFromMatrixPosition(V.matrixWorld),W.color.copy(B).multiplyScalar(k),W.distance=j,W.coneCos=Math.cos(V.angle),W.penumbraCos=Math.cos(V.angle*(1-V.penumbra)),W.decay=V.decay,i.spot[x]=W;const G=V.shadow;if(V.map&&(i.spotLightMap[C]=V.map,C++,G.updateMatrices(V),V.castShadow&&R++),i.spotLightMatrix[x]=G.matrix,V.castShadow){const K=t.get(V);K.shadowIntensity=G.intensity,K.shadowBias=G.bias,K.shadowNormalBias=G.normalBias,K.shadowRadius=G.radius,K.shadowMapSize=G.mapSize,i.spotShadow[x]=K,i.spotShadowMap[x]=q,E++}x++}else if(V.isRectAreaLight){const W=e.get(V);W.color.copy(B).multiplyScalar(k),W.halfWidth.set(V.width*.5,0,0),W.halfHeight.set(0,V.height*.5,0),i.rectArea[w]=W,w++}else if(V.isPointLight){const W=e.get(V);if(W.color.copy(V.color).multiplyScalar(V.intensity),W.distance=V.distance,W.decay=V.decay,V.castShadow){const G=V.shadow,K=t.get(V);K.shadowIntensity=G.intensity,K.shadowBias=G.bias,K.shadowNormalBias=G.normalBias,K.shadowRadius=G.radius,K.shadowMapSize=G.mapSize,K.shadowCameraNear=G.camera.near,K.shadowCameraFar=G.camera.far,i.pointShadow[b]=K,i.pointShadowMap[b]=q,i.pointShadowMatrix[b]=V.shadow.matrix,T++}i.point[b]=W,b++}else if(V.isHemisphereLight){const W=e.get(V);W.skyColor.copy(V.color).multiplyScalar(k),W.groundColor.copy(V.groundColor).multiplyScalar(k),i.hemi[_]=W,_++}}w>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=At.LTC_FLOAT_1,i.rectAreaLTC2=At.LTC_FLOAT_2):(i.rectAreaLTC1=At.LTC_HALF_1,i.rectAreaLTC2=At.LTC_HALF_2)),i.ambient[0]=f,i.ambient[1]=d,i.ambient[2]=m;const I=i.hash;(I.directionalLength!==v||I.pointLength!==b||I.spotLength!==x||I.rectAreaLength!==w||I.hemiLength!==_||I.numDirectionalShadows!==A||I.numPointShadows!==T||I.numSpotShadows!==E||I.numSpotMaps!==C||I.numLightProbes!==O)&&(i.directional.length=v,i.spot.length=x,i.rectArea.length=w,i.point.length=b,i.hemi.length=_,i.directionalShadow.length=A,i.directionalShadowMap.length=A,i.pointShadow.length=T,i.pointShadowMap.length=T,i.spotShadow.length=E,i.spotShadowMap.length=E,i.directionalShadowMatrix.length=A,i.pointShadowMatrix.length=T,i.spotLightMatrix.length=E+C-R,i.spotLightMap.length=C,i.numSpotLightShadowsWithMaps=R,i.numLightProbes=O,I.directionalLength=v,I.pointLength=b,I.spotLength=x,I.rectAreaLength=w,I.hemiLength=_,I.numDirectionalShadows=A,I.numPointShadows=T,I.numSpotShadows=E,I.numSpotMaps=C,I.numLightProbes=O,i.version=gue++)}function l(c,f){let d=0,m=0,v=0,b=0,x=0;const w=f.matrixWorldInverse;for(let _=0,A=c.length;_<A;_++){const T=c[_];if(T.isDirectionalLight){const E=i.directional[d];E.direction.setFromMatrixPosition(T.matrixWorld),r.setFromMatrixPosition(T.target.matrixWorld),E.direction.sub(r),E.direction.transformDirection(w),d++}else if(T.isSpotLight){const E=i.spot[v];E.position.setFromMatrixPosition(T.matrixWorld),E.position.applyMatrix4(w),E.direction.setFromMatrixPosition(T.matrixWorld),r.setFromMatrixPosition(T.target.matrixWorld),E.direction.sub(r),E.direction.transformDirection(w),v++}else if(T.isRectAreaLight){const E=i.rectArea[b];E.position.setFromMatrixPosition(T.matrixWorld),E.position.applyMatrix4(w),o.identity(),s.copy(T.matrixWorld),s.premultiply(w),o.extractRotation(s),E.halfWidth.set(T.width*.5,0,0),E.halfHeight.set(0,T.height*.5,0),E.halfWidth.applyMatrix4(o),E.halfHeight.applyMatrix4(o),b++}else if(T.isPointLight){const E=i.point[m];E.position.setFromMatrixPosition(T.matrixWorld),E.position.applyMatrix4(w),m++}else if(T.isHemisphereLight){const E=i.hemi[x];E.direction.setFromMatrixPosition(T.matrixWorld),E.direction.transformDirection(w),x++}}}return{setup:a,setupView:l,state:i}}function Dk(n){const e=new yue(n),t=[],i=[];function r(f){c.camera=f,t.length=0,i.length=0}function s(f){t.push(f)}function o(f){i.push(f)}function a(){e.setup(t)}function l(f){e.setupView(t,f)}const c={lightsArray:t,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:c,setupLights:a,setupLightsView:l,pushLight:s,pushShadow:o}}function bue(n){let e=new WeakMap;function t(r,s=0){const o=e.get(r);let a;return o===void 0?(a=new Dk(n),e.set(r,[a])):s>=o.length?(a=new Dk(n),o.push(a)):a=o[s],a}function i(){e=new WeakMap}return{get:t,dispose:i}}const _ue=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,xue=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function wue(n,e,t){let i=new mm;const r=new ut,s=new ut,o=new Gn,a=new pT({depthPacking:uL}),l=new mT,c={},f=t.maxTextureSize,d={[Hf]:Po,[Po]:Hf,[yr]:yr},m=new Al({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new ut},radius:{value:4}},vertexShader:_ue,fragmentShader:xue}),v=m.clone();v.defines.HORIZONTAL_PASS=1;const b=new hn;b.setAttribute("position",new li(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const x=new Pi(b,m),w=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=NM;let _=this.type;this.render=function(R,O,I){if(w.enabled===!1||w.autoUpdate===!1&&w.needsUpdate===!1||R.length===0)return;const L=n.getRenderTarget(),N=n.getActiveCubeFace(),V=n.getActiveMipmapLevel(),B=n.state;B.setBlending(Nf),B.buffers.depth.getReversed()===!0?B.buffers.color.setClear(0,0,0,0):B.buffers.color.setClear(1,1,1,1),B.buffers.depth.setTest(!0),B.setScissorTest(!1);const k=_!==sc&&this.type===sc,j=_===sc&&this.type!==sc;for(let q=0,W=R.length;q<W;q++){const G=R[q],K=G.shadow;if(K===void 0){console.warn("THREE.WebGLShadowMap:",G,"has no shadow.");continue}if(K.autoUpdate===!1&&K.needsUpdate===!1)continue;r.copy(K.mapSize);const te=K.getFrameExtents();if(r.multiply(te),s.copy(K.mapSize),(r.x>f||r.y>f)&&(r.x>f&&(s.x=Math.floor(f/te.x),r.x=s.x*te.x,K.mapSize.x=s.x),r.y>f&&(s.y=Math.floor(f/te.y),r.y=s.y*te.y,K.mapSize.y=s.y)),K.map===null||k===!0||j===!0){const F=this.type!==sc?{minFilter:Ds,magFilter:Ds}:{};K.map!==null&&K.map.dispose(),K.map=new wu(r.x,r.y,F),K.map.texture.name=G.name+".shadowMap",K.camera.updateProjectionMatrix()}n.setRenderTarget(K.map),n.clear();const ie=K.getViewportCount();for(let F=0;F<ie;F++){const X=K.getViewport(F);o.set(s.x*X.x,s.y*X.y,s.x*X.z,s.y*X.w),B.viewport(o),K.updateMatrices(G,F),i=K.getFrustum(),E(O,I,K.camera,G,this.type)}K.isPointLightShadow!==!0&&this.type===sc&&A(K,I),K.needsUpdate=!1}_=this.type,w.needsUpdate=!1,n.setRenderTarget(L,N,V)};function A(R,O){const I=e.update(x);m.defines.VSM_SAMPLES!==R.blurSamples&&(m.defines.VSM_SAMPLES=R.blurSamples,v.defines.VSM_SAMPLES=R.blurSamples,m.needsUpdate=!0,v.needsUpdate=!0),R.mapPass===null&&(R.mapPass=new wu(r.x,r.y)),m.uniforms.shadow_pass.value=R.map.texture,m.uniforms.resolution.value=R.mapSize,m.uniforms.radius.value=R.radius,n.setRenderTarget(R.mapPass),n.clear(),n.renderBufferDirect(O,null,I,m,x,null),v.uniforms.shadow_pass.value=R.mapPass.texture,v.uniforms.resolution.value=R.mapSize,v.uniforms.radius.value=R.radius,n.setRenderTarget(R.map),n.clear(),n.renderBufferDirect(O,null,I,v,x,null)}function T(R,O,I,L){let N=null;const V=I.isPointLight===!0?R.customDistanceMaterial:R.customDepthMaterial;if(V!==void 0)N=V;else if(N=I.isPointLight===!0?l:a,n.localClippingEnabled&&O.clipShadows===!0&&Array.isArray(O.clippingPlanes)&&O.clippingPlanes.length!==0||O.displacementMap&&O.displacementScale!==0||O.alphaMap&&O.alphaTest>0||O.map&&O.alphaTest>0||O.alphaToCoverage===!0){const B=N.uuid,k=O.uuid;let j=c[B];j===void 0&&(j={},c[B]=j);let q=j[k];q===void 0&&(q=N.clone(),j[k]=q,O.addEventListener("dispose",C)),N=q}if(N.visible=O.visible,N.wireframe=O.wireframe,L===sc?N.side=O.shadowSide!==null?O.shadowSide:O.side:N.side=O.shadowSide!==null?O.shadowSide:d[O.side],N.alphaMap=O.alphaMap,N.alphaTest=O.alphaToCoverage===!0?.5:O.alphaTest,N.map=O.map,N.clipShadows=O.clipShadows,N.clippingPlanes=O.clippingPlanes,N.clipIntersection=O.clipIntersection,N.displacementMap=O.displacementMap,N.displacementScale=O.displacementScale,N.displacementBias=O.displacementBias,N.wireframeLinewidth=O.wireframeLinewidth,N.linewidth=O.linewidth,I.isPointLight===!0&&N.isMeshDistanceMaterial===!0){const B=n.properties.get(N);B.light=I}return N}function E(R,O,I,L,N){if(R.visible===!1)return;if(R.layers.test(O.layers)&&(R.isMesh||R.isLine||R.isPoints)&&(R.castShadow||R.receiveShadow&&N===sc)&&(!R.frustumCulled||i.intersectsObject(R))){R.modelViewMatrix.multiplyMatrices(I.matrixWorldInverse,R.matrixWorld);const k=e.update(R),j=R.material;if(Array.isArray(j)){const q=k.groups;for(let W=0,G=q.length;W<G;W++){const K=q[W],te=j[K.materialIndex];if(te&&te.visible){const ie=T(R,te,L,N);R.onBeforeShadow(n,R,O,I,k,ie,K),n.renderBufferDirect(I,null,k,ie,R,K),R.onAfterShadow(n,R,O,I,k,ie,K)}}}else if(j.visible){const q=T(R,j,L,N);R.onBeforeShadow(n,R,O,I,k,q,null),n.renderBufferDirect(I,null,k,q,R,null),R.onAfterShadow(n,R,O,I,k,q,null)}}const B=R.children;for(let k=0,j=B.length;k<j;k++)E(B[k],O,I,L,N)}function C(R){R.target.removeEventListener("dispose",C);for(const I in c){const L=c[I],N=R.target.uuid;N in L&&(L[N].dispose(),delete L[N])}}}const Sue={[pE]:mE,[gE]:bE,[vE]:_E,[am]:yE,[mE]:pE,[bE]:gE,[_E]:vE,[yE]:am};function Eue(n,e){function t(){let Re=!1;const $e=new Gn;let at=null;const _t=new Gn(0,0,0,0);return{setMask:function(st){at!==st&&!Re&&(n.colorMask(st,st,st,st),at=st)},setLocked:function(st){Re=st},setClear:function(st,qe,vt,Rt,Tt){Tt===!0&&(st*=Rt,qe*=Rt,vt*=Rt),$e.set(st,qe,vt,Rt),_t.equals($e)===!1&&(n.clearColor(st,qe,vt,Rt),_t.copy($e))},reset:function(){Re=!1,at=null,_t.set(-1,0,0,0)}}}function i(){let Re=!1,$e=!1,at=null,_t=null,st=null;return{setReversed:function(qe){if($e!==qe){const vt=e.get("EXT_clip_control");qe?vt.clipControlEXT(vt.LOWER_LEFT_EXT,vt.ZERO_TO_ONE_EXT):vt.clipControlEXT(vt.LOWER_LEFT_EXT,vt.NEGATIVE_ONE_TO_ONE_EXT),$e=qe;const Rt=st;st=null,this.setClear(Rt)}},getReversed:function(){return $e},setTest:function(qe){qe?he(n.DEPTH_TEST):be(n.DEPTH_TEST)},setMask:function(qe){at!==qe&&!Re&&(n.depthMask(qe),at=qe)},setFunc:function(qe){if($e&&(qe=Sue[qe]),_t!==qe){switch(qe){case pE:n.depthFunc(n.NEVER);break;case mE:n.depthFunc(n.ALWAYS);break;case gE:n.depthFunc(n.LESS);break;case am:n.depthFunc(n.LEQUAL);break;case vE:n.depthFunc(n.EQUAL);break;case yE:n.depthFunc(n.GEQUAL);break;case bE:n.depthFunc(n.GREATER);break;case _E:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}_t=qe}},setLocked:function(qe){Re=qe},setClear:function(qe){st!==qe&&($e&&(qe=1-qe),n.clearDepth(qe),st=qe)},reset:function(){Re=!1,at=null,_t=null,st=null,$e=!1}}}function r(){let Re=!1,$e=null,at=null,_t=null,st=null,qe=null,vt=null,Rt=null,Tt=null;return{setTest:function(Bt){Re||(Bt?he(n.STENCIL_TEST):be(n.STENCIL_TEST))},setMask:function(Bt){$e!==Bt&&!Re&&(n.stencilMask(Bt),$e=Bt)},setFunc:function(Bt,$n,qn){(at!==Bt||_t!==$n||st!==qn)&&(n.stencilFunc(Bt,$n,qn),at=Bt,_t=$n,st=qn)},setOp:function(Bt,$n,qn){(qe!==Bt||vt!==$n||Rt!==qn)&&(n.stencilOp(Bt,$n,qn),qe=Bt,vt=$n,Rt=qn)},setLocked:function(Bt){Re=Bt},setClear:function(Bt){Tt!==Bt&&(n.clearStencil(Bt),Tt=Bt)},reset:function(){Re=!1,$e=null,at=null,_t=null,st=null,qe=null,vt=null,Rt=null,Tt=null}}}const s=new t,o=new i,a=new r,l=new WeakMap,c=new WeakMap;let f={},d={},m=new WeakMap,v=[],b=null,x=!1,w=null,_=null,A=null,T=null,E=null,C=null,R=null,O=new yt(0,0,0),I=0,L=!1,N=null,V=null,B=null,k=null,j=null;const q=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let W=!1,G=0;const K=n.getParameter(n.VERSION);K.indexOf("WebGL")!==-1?(G=parseFloat(/^WebGL (\d)/.exec(K)[1]),W=G>=1):K.indexOf("OpenGL ES")!==-1&&(G=parseFloat(/^OpenGL ES (\d)/.exec(K)[1]),W=G>=2);let te=null,ie={};const F=n.getParameter(n.SCISSOR_BOX),X=n.getParameter(n.VIEWPORT),ee=new Gn().fromArray(F),le=new Gn().fromArray(X);function oe(Re,$e,at,_t){const st=new Uint8Array(4),qe=n.createTexture();n.bindTexture(Re,qe),n.texParameteri(Re,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(Re,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let vt=0;vt<at;vt++)Re===n.TEXTURE_3D||Re===n.TEXTURE_2D_ARRAY?n.texImage3D($e,0,n.RGBA,1,1,_t,0,n.RGBA,n.UNSIGNED_BYTE,st):n.texImage2D($e+vt,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,st);return qe}const ue={};ue[n.TEXTURE_2D]=oe(n.TEXTURE_2D,n.TEXTURE_2D,1),ue[n.TEXTURE_CUBE_MAP]=oe(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),ue[n.TEXTURE_2D_ARRAY]=oe(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),ue[n.TEXTURE_3D]=oe(n.TEXTURE_3D,n.TEXTURE_3D,1,1),s.setClear(0,0,0,1),o.setClear(1),a.setClear(0),he(n.DEPTH_TEST),o.setFunc(am),me(!1),Ie(tD),he(n.CULL_FACE),ve(Nf);function he(Re){f[Re]!==!0&&(n.enable(Re),f[Re]=!0)}function be(Re){f[Re]!==!1&&(n.disable(Re),f[Re]=!1)}function Te(Re,$e){return d[Re]!==$e?(n.bindFramebuffer(Re,$e),d[Re]=$e,Re===n.DRAW_FRAMEBUFFER&&(d[n.FRAMEBUFFER]=$e),Re===n.FRAMEBUFFER&&(d[n.DRAW_FRAMEBUFFER]=$e),!0):!1}function Ee(Re,$e){let at=v,_t=!1;if(Re){at=m.get($e),at===void 0&&(at=[],m.set($e,at));const st=Re.textures;if(at.length!==st.length||at[0]!==n.COLOR_ATTACHMENT0){for(let qe=0,vt=st.length;qe<vt;qe++)at[qe]=n.COLOR_ATTACHMENT0+qe;at.length=st.length,_t=!0}}else at[0]!==n.BACK&&(at[0]=n.BACK,_t=!0);_t&&n.drawBuffers(at)}function Ce(Re){return b!==Re?(n.useProgram(Re),b=Re,!0):!1}const we={[rd]:n.FUNC_ADD,[c8]:n.FUNC_SUBTRACT,[u8]:n.FUNC_REVERSE_SUBTRACT};we[f8]=n.MIN,we[h8]=n.MAX;const ae={[d8]:n.ZERO,[p8]:n.ONE,[m8]:n.SRC_COLOR,[hE]:n.SRC_ALPHA,[x8]:n.SRC_ALPHA_SATURATE,[b8]:n.DST_COLOR,[v8]:n.DST_ALPHA,[g8]:n.ONE_MINUS_SRC_COLOR,[dE]:n.ONE_MINUS_SRC_ALPHA,[_8]:n.ONE_MINUS_DST_COLOR,[y8]:n.ONE_MINUS_DST_ALPHA,[w8]:n.CONSTANT_COLOR,[S8]:n.ONE_MINUS_CONSTANT_COLOR,[E8]:n.CONSTANT_ALPHA,[M8]:n.ONE_MINUS_CONSTANT_ALPHA};function ve(Re,$e,at,_t,st,qe,vt,Rt,Tt,Bt){if(Re===Nf){x===!0&&(be(n.BLEND),x=!1);return}if(x===!1&&(he(n.BLEND),x=!0),Re!==l8){if(Re!==w||Bt!==L){if((_!==rd||E!==rd)&&(n.blendEquation(n.FUNC_ADD),_=rd,E=rd),Bt)switch(Re){case Kp:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case nD:n.blendFunc(n.ONE,n.ONE);break;case iD:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case rD:n.blendFuncSeparate(n.DST_COLOR,n.ONE_MINUS_SRC_ALPHA,n.ZERO,n.ONE);break;default:console.error("THREE.WebGLState: Invalid blending: ",Re);break}else switch(Re){case Kp:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case nD:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE,n.ONE,n.ONE);break;case iD:console.error("THREE.WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case rD:console.error("THREE.WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:console.error("THREE.WebGLState: Invalid blending: ",Re);break}A=null,T=null,C=null,R=null,O.set(0,0,0),I=0,w=Re,L=Bt}return}st=st||$e,qe=qe||at,vt=vt||_t,($e!==_||st!==E)&&(n.blendEquationSeparate(we[$e],we[st]),_=$e,E=st),(at!==A||_t!==T||qe!==C||vt!==R)&&(n.blendFuncSeparate(ae[at],ae[_t],ae[qe],ae[vt]),A=at,T=_t,C=qe,R=vt),(Rt.equals(O)===!1||Tt!==I)&&(n.blendColor(Rt.r,Rt.g,Rt.b,Tt),O.copy(Rt),I=Tt),w=Re,L=!1}function xe(Re,$e){Re.side===yr?be(n.CULL_FACE):he(n.CULL_FACE);let at=Re.side===Po;$e&&(at=!at),me(at),Re.blending===Kp&&Re.transparent===!1?ve(Nf):ve(Re.blending,Re.blendEquation,Re.blendSrc,Re.blendDst,Re.blendEquationAlpha,Re.blendSrcAlpha,Re.blendDstAlpha,Re.blendColor,Re.blendAlpha,Re.premultipliedAlpha),o.setFunc(Re.depthFunc),o.setTest(Re.depthTest),o.setMask(Re.depthWrite),s.setMask(Re.colorWrite);const _t=Re.stencilWrite;a.setTest(_t),_t&&(a.setMask(Re.stencilWriteMask),a.setFunc(Re.stencilFunc,Re.stencilRef,Re.stencilFuncMask),a.setOp(Re.stencilFail,Re.stencilZFail,Re.stencilZPass)),ke(Re.polygonOffset,Re.polygonOffsetFactor,Re.polygonOffsetUnits),Re.alphaToCoverage===!0?he(n.SAMPLE_ALPHA_TO_COVERAGE):be(n.SAMPLE_ALPHA_TO_COVERAGE)}function me(Re){N!==Re&&(Re?n.frontFace(n.CW):n.frontFace(n.CCW),N=Re)}function Ie(Re){Re!==s8?(he(n.CULL_FACE),Re!==V&&(Re===tD?n.cullFace(n.BACK):Re===o8?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):be(n.CULL_FACE),V=Re}function Ne(Re){Re!==B&&(W&&n.lineWidth(Re),B=Re)}function ke(Re,$e,at){Re?(he(n.POLYGON_OFFSET_FILL),(k!==$e||j!==at)&&(n.polygonOffset($e,at),k=$e,j=at)):be(n.POLYGON_OFFSET_FILL)}function Fe(Re){Re?he(n.SCISSOR_TEST):be(n.SCISSOR_TEST)}function Ae(Re){Re===void 0&&(Re=n.TEXTURE0+q-1),te!==Re&&(n.activeTexture(Re),te=Re)}function tt(Re,$e,at){at===void 0&&(te===null?at=n.TEXTURE0+q-1:at=te);let _t=ie[at];_t===void 0&&(_t={type:void 0,texture:void 0},ie[at]=_t),(_t.type!==Re||_t.texture!==$e)&&(te!==at&&(n.activeTexture(at),te=at),n.bindTexture(Re,$e||ue[Re]),_t.type=Re,_t.texture=$e)}function se(){const Re=ie[te];Re!==void 0&&Re.type!==void 0&&(n.bindTexture(Re.type,null),Re.type=void 0,Re.texture=void 0)}function Z(){try{n.compressedTexImage2D(...arguments)}catch(Re){console.error("THREE.WebGLState:",Re)}}function ye(){try{n.compressedTexImage3D(...arguments)}catch(Re){console.error("THREE.WebGLState:",Re)}}function Y(){try{n.texSubImage2D(...arguments)}catch(Re){console.error("THREE.WebGLState:",Re)}}function J(){try{n.texSubImage3D(...arguments)}catch(Re){console.error("THREE.WebGLState:",Re)}}function re(){try{n.compressedTexSubImage2D(...arguments)}catch(Re){console.error("THREE.WebGLState:",Re)}}function ge(){try{n.compressedTexSubImage3D(...arguments)}catch(Re){console.error("THREE.WebGLState:",Re)}}function _e(){try{n.texStorage2D(...arguments)}catch(Re){console.error("THREE.WebGLState:",Re)}}function Se(){try{n.texStorage3D(...arguments)}catch(Re){console.error("THREE.WebGLState:",Re)}}function Ue(){try{n.texImage2D(...arguments)}catch(Re){console.error("THREE.WebGLState:",Re)}}function Me(){try{n.texImage3D(...arguments)}catch(Re){console.error("THREE.WebGLState:",Re)}}function Le(Re){ee.equals(Re)===!1&&(n.scissor(Re.x,Re.y,Re.z,Re.w),ee.copy(Re))}function He(Re){le.equals(Re)===!1&&(n.viewport(Re.x,Re.y,Re.z,Re.w),le.copy(Re))}function nt(Re,$e){let at=c.get($e);at===void 0&&(at=new WeakMap,c.set($e,at));let _t=at.get(Re);_t===void 0&&(_t=n.getUniformBlockIndex($e,Re.name),at.set(Re,_t))}function Je(Re,$e){const _t=c.get($e).get(Re);l.get($e)!==_t&&(n.uniformBlockBinding($e,_t,Re.__bindingPointIndex),l.set($e,_t))}function gt(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),o.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),f={},te=null,ie={},d={},m=new WeakMap,v=[],b=null,x=!1,w=null,_=null,A=null,T=null,E=null,C=null,R=null,O=new yt(0,0,0),I=0,L=!1,N=null,V=null,B=null,k=null,j=null,ee.set(0,0,n.canvas.width,n.canvas.height),le.set(0,0,n.canvas.width,n.canvas.height),s.reset(),o.reset(),a.reset()}return{buffers:{color:s,depth:o,stencil:a},enable:he,disable:be,bindFramebuffer:Te,drawBuffers:Ee,useProgram:Ce,setBlending:ve,setMaterial:xe,setFlipSided:me,setCullFace:Ie,setLineWidth:Ne,setPolygonOffset:ke,setScissorTest:Fe,activeTexture:Ae,bindTexture:tt,unbindTexture:se,compressedTexImage2D:Z,compressedTexImage3D:ye,texImage2D:Ue,texImage3D:Me,updateUBOMapping:nt,uniformBlockBinding:Je,texStorage2D:_e,texStorage3D:Se,texSubImage2D:Y,texSubImage3D:J,compressedTexSubImage2D:re,compressedTexSubImage3D:ge,scissor:Le,viewport:He,reset:gt}}function Mue(n,e,t,i,r,s,o){const a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),c=new ut,f=new WeakMap;let d;const m=new WeakMap;let v=!1;try{v=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function b(se,Z){return v?new OffscreenCanvas(se,Z):w_("canvas")}function x(se,Z,ye){let Y=1;const J=tt(se);if((J.width>ye||J.height>ye)&&(Y=ye/Math.max(J.width,J.height)),Y<1)if(typeof HTMLImageElement<"u"&&se instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&se instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&se instanceof ImageBitmap||typeof VideoFrame<"u"&&se instanceof VideoFrame){const re=Math.floor(Y*J.width),ge=Math.floor(Y*J.height);d===void 0&&(d=b(re,ge));const _e=Z?b(re,ge):d;return _e.width=re,_e.height=ge,_e.getContext("2d").drawImage(se,0,0,re,ge),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+J.width+"x"+J.height+") to ("+re+"x"+ge+")."),_e}else return"data"in se&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+J.width+"x"+J.height+")."),se;return se}function w(se){return se.generateMipmaps}function _(se){n.generateMipmap(se)}function A(se){return se.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:se.isWebGL3DRenderTarget?n.TEXTURE_3D:se.isWebGLArrayRenderTarget||se.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function T(se,Z,ye,Y,J=!1){if(se!==null){if(n[se]!==void 0)return n[se];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+se+"'")}let re=Z;if(Z===n.RED&&(ye===n.FLOAT&&(re=n.R32F),ye===n.HALF_FLOAT&&(re=n.R16F),ye===n.UNSIGNED_BYTE&&(re=n.R8)),Z===n.RED_INTEGER&&(ye===n.UNSIGNED_BYTE&&(re=n.R8UI),ye===n.UNSIGNED_SHORT&&(re=n.R16UI),ye===n.UNSIGNED_INT&&(re=n.R32UI),ye===n.BYTE&&(re=n.R8I),ye===n.SHORT&&(re=n.R16I),ye===n.INT&&(re=n.R32I)),Z===n.RG&&(ye===n.FLOAT&&(re=n.RG32F),ye===n.HALF_FLOAT&&(re=n.RG16F),ye===n.UNSIGNED_BYTE&&(re=n.RG8)),Z===n.RG_INTEGER&&(ye===n.UNSIGNED_BYTE&&(re=n.RG8UI),ye===n.UNSIGNED_SHORT&&(re=n.RG16UI),ye===n.UNSIGNED_INT&&(re=n.RG32UI),ye===n.BYTE&&(re=n.RG8I),ye===n.SHORT&&(re=n.RG16I),ye===n.INT&&(re=n.RG32I)),Z===n.RGB_INTEGER&&(ye===n.UNSIGNED_BYTE&&(re=n.RGB8UI),ye===n.UNSIGNED_SHORT&&(re=n.RGB16UI),ye===n.UNSIGNED_INT&&(re=n.RGB32UI),ye===n.BYTE&&(re=n.RGB8I),ye===n.SHORT&&(re=n.RGB16I),ye===n.INT&&(re=n.RGB32I)),Z===n.RGBA_INTEGER&&(ye===n.UNSIGNED_BYTE&&(re=n.RGBA8UI),ye===n.UNSIGNED_SHORT&&(re=n.RGBA16UI),ye===n.UNSIGNED_INT&&(re=n.RGBA32UI),ye===n.BYTE&&(re=n.RGBA8I),ye===n.SHORT&&(re=n.RGBA16I),ye===n.INT&&(re=n.RGBA32I)),Z===n.RGB&&(ye===n.UNSIGNED_INT_5_9_9_9_REV&&(re=n.RGB9_E5),ye===n.UNSIGNED_INT_10F_11F_11F_REV&&(re=n.R11F_G11F_B10F)),Z===n.RGBA){const ge=J?__:Wn.getTransfer(Y);ye===n.FLOAT&&(re=n.RGBA32F),ye===n.HALF_FLOAT&&(re=n.RGBA16F),ye===n.UNSIGNED_BYTE&&(re=ge===mi?n.SRGB8_ALPHA8:n.RGBA8),ye===n.UNSIGNED_SHORT_4_4_4_4&&(re=n.RGBA4),ye===n.UNSIGNED_SHORT_5_5_5_1&&(re=n.RGB5_A1)}return(re===n.R16F||re===n.R32F||re===n.RG16F||re===n.RG32F||re===n.RGBA16F||re===n.RGBA32F)&&e.get("EXT_color_buffer_float"),re}function E(se,Z){let ye;return se?Z===null||Z===Wf||Z===O0?ye=n.DEPTH24_STENCIL8:Z===fa?ye=n.DEPTH32F_STENCIL8:Z===D0&&(ye=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):Z===null||Z===Wf||Z===O0?ye=n.DEPTH_COMPONENT24:Z===fa?ye=n.DEPTH_COMPONENT32F:Z===D0&&(ye=n.DEPTH_COMPONENT16),ye}function C(se,Z){return w(se)===!0||se.isFramebufferTexture&&se.minFilter!==Ds&&se.minFilter!==br?Math.log2(Math.max(Z.width,Z.height))+1:se.mipmaps!==void 0&&se.mipmaps.length>0?se.mipmaps.length:se.isCompressedTexture&&Array.isArray(se.image)?Z.mipmaps.length:1}function R(se){const Z=se.target;Z.removeEventListener("dispose",R),I(Z),Z.isVideoTexture&&f.delete(Z)}function O(se){const Z=se.target;Z.removeEventListener("dispose",O),N(Z)}function I(se){const Z=i.get(se);if(Z.__webglInit===void 0)return;const ye=se.source,Y=m.get(ye);if(Y){const J=Y[Z.__cacheKey];J.usedTimes--,J.usedTimes===0&&L(se),Object.keys(Y).length===0&&m.delete(ye)}i.remove(se)}function L(se){const Z=i.get(se);n.deleteTexture(Z.__webglTexture);const ye=se.source,Y=m.get(ye);delete Y[Z.__cacheKey],o.memory.textures--}function N(se){const Z=i.get(se);if(se.depthTexture&&(se.depthTexture.dispose(),i.remove(se.depthTexture)),se.isWebGLCubeRenderTarget)for(let Y=0;Y<6;Y++){if(Array.isArray(Z.__webglFramebuffer[Y]))for(let J=0;J<Z.__webglFramebuffer[Y].length;J++)n.deleteFramebuffer(Z.__webglFramebuffer[Y][J]);else n.deleteFramebuffer(Z.__webglFramebuffer[Y]);Z.__webglDepthbuffer&&n.deleteRenderbuffer(Z.__webglDepthbuffer[Y])}else{if(Array.isArray(Z.__webglFramebuffer))for(let Y=0;Y<Z.__webglFramebuffer.length;Y++)n.deleteFramebuffer(Z.__webglFramebuffer[Y]);else n.deleteFramebuffer(Z.__webglFramebuffer);if(Z.__webglDepthbuffer&&n.deleteRenderbuffer(Z.__webglDepthbuffer),Z.__webglMultisampledFramebuffer&&n.deleteFramebuffer(Z.__webglMultisampledFramebuffer),Z.__webglColorRenderbuffer)for(let Y=0;Y<Z.__webglColorRenderbuffer.length;Y++)Z.__webglColorRenderbuffer[Y]&&n.deleteRenderbuffer(Z.__webglColorRenderbuffer[Y]);Z.__webglDepthRenderbuffer&&n.deleteRenderbuffer(Z.__webglDepthRenderbuffer)}const ye=se.textures;for(let Y=0,J=ye.length;Y<J;Y++){const re=i.get(ye[Y]);re.__webglTexture&&(n.deleteTexture(re.__webglTexture),o.memory.textures--),i.remove(ye[Y])}i.remove(se)}let V=0;function B(){V=0}function k(){const se=V;return se>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+se+" texture units while this GPU supports only "+r.maxTextures),V+=1,se}function j(se){const Z=[];return Z.push(se.wrapS),Z.push(se.wrapT),Z.push(se.wrapR||0),Z.push(se.magFilter),Z.push(se.minFilter),Z.push(se.anisotropy),Z.push(se.internalFormat),Z.push(se.format),Z.push(se.type),Z.push(se.generateMipmaps),Z.push(se.premultiplyAlpha),Z.push(se.flipY),Z.push(se.unpackAlignment),Z.push(se.colorSpace),Z.join()}function q(se,Z){const ye=i.get(se);if(se.isVideoTexture&&Fe(se),se.isRenderTargetTexture===!1&&se.isExternalTexture!==!0&&se.version>0&&ye.__version!==se.version){const Y=se.image;if(Y===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Y.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{ue(ye,se,Z);return}}else se.isExternalTexture&&(ye.__webglTexture=se.sourceTexture?se.sourceTexture:null);t.bindTexture(n.TEXTURE_2D,ye.__webglTexture,n.TEXTURE0+Z)}function W(se,Z){const ye=i.get(se);if(se.isRenderTargetTexture===!1&&se.version>0&&ye.__version!==se.version){ue(ye,se,Z);return}t.bindTexture(n.TEXTURE_2D_ARRAY,ye.__webglTexture,n.TEXTURE0+Z)}function G(se,Z){const ye=i.get(se);if(se.isRenderTargetTexture===!1&&se.version>0&&ye.__version!==se.version){ue(ye,se,Z);return}t.bindTexture(n.TEXTURE_3D,ye.__webglTexture,n.TEXTURE0+Z)}function K(se,Z){const ye=i.get(se);if(se.version>0&&ye.__version!==se.version){he(ye,se,Z);return}t.bindTexture(n.TEXTURE_CUBE_MAP,ye.__webglTexture,n.TEXTURE0+Z)}const te={[g_]:n.REPEAT,[_l]:n.CLAMP_TO_EDGE,[v_]:n.MIRRORED_REPEAT},ie={[Ds]:n.NEAREST,[tL]:n.NEAREST_MIPMAP_NEAREST,[f0]:n.NEAREST_MIPMAP_LINEAR,[br]:n.LINEAR,[Hb]:n.LINEAR_MIPMAP_NEAREST,[hu]:n.LINEAR_MIPMAP_LINEAR},F={[B8]:n.NEVER,[$8]:n.ALWAYS,[V8]:n.LESS,[fL]:n.LEQUAL,[G8]:n.EQUAL,[W8]:n.GEQUAL,[H8]:n.GREATER,[j8]:n.NOTEQUAL};function X(se,Z){if(Z.type===fa&&e.has("OES_texture_float_linear")===!1&&(Z.magFilter===br||Z.magFilter===Hb||Z.magFilter===f0||Z.magFilter===hu||Z.minFilter===br||Z.minFilter===Hb||Z.minFilter===f0||Z.minFilter===hu)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(se,n.TEXTURE_WRAP_S,te[Z.wrapS]),n.texParameteri(se,n.TEXTURE_WRAP_T,te[Z.wrapT]),(se===n.TEXTURE_3D||se===n.TEXTURE_2D_ARRAY)&&n.texParameteri(se,n.TEXTURE_WRAP_R,te[Z.wrapR]),n.texParameteri(se,n.TEXTURE_MAG_FILTER,ie[Z.magFilter]),n.texParameteri(se,n.TEXTURE_MIN_FILTER,ie[Z.minFilter]),Z.compareFunction&&(n.texParameteri(se,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(se,n.TEXTURE_COMPARE_FUNC,F[Z.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(Z.magFilter===Ds||Z.minFilter!==f0&&Z.minFilter!==hu||Z.type===fa&&e.has("OES_texture_float_linear")===!1)return;if(Z.anisotropy>1||i.get(Z).__currentAnisotropy){const ye=e.get("EXT_texture_filter_anisotropic");n.texParameterf(se,ye.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Z.anisotropy,r.getMaxAnisotropy())),i.get(Z).__currentAnisotropy=Z.anisotropy}}}function ee(se,Z){let ye=!1;se.__webglInit===void 0&&(se.__webglInit=!0,Z.addEventListener("dispose",R));const Y=Z.source;let J=m.get(Y);J===void 0&&(J={},m.set(Y,J));const re=j(Z);if(re!==se.__cacheKey){J[re]===void 0&&(J[re]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,ye=!0),J[re].usedTimes++;const ge=J[se.__cacheKey];ge!==void 0&&(J[se.__cacheKey].usedTimes--,ge.usedTimes===0&&L(Z)),se.__cacheKey=re,se.__webglTexture=J[re].texture}return ye}function le(se,Z,ye){return Math.floor(Math.floor(se/ye)/Z)}function oe(se,Z,ye,Y){const re=se.updateRanges;if(re.length===0)t.texSubImage2D(n.TEXTURE_2D,0,0,0,Z.width,Z.height,ye,Y,Z.data);else{re.sort((Me,Le)=>Me.start-Le.start);let ge=0;for(let Me=1;Me<re.length;Me++){const Le=re[ge],He=re[Me],nt=Le.start+Le.count,Je=le(He.start,Z.width,4),gt=le(Le.start,Z.width,4);He.start<=nt+1&&Je===gt&&le(He.start+He.count-1,Z.width,4)===Je?Le.count=Math.max(Le.count,He.start+He.count-Le.start):(++ge,re[ge]=He)}re.length=ge+1;const _e=n.getParameter(n.UNPACK_ROW_LENGTH),Se=n.getParameter(n.UNPACK_SKIP_PIXELS),Ue=n.getParameter(n.UNPACK_SKIP_ROWS);n.pixelStorei(n.UNPACK_ROW_LENGTH,Z.width);for(let Me=0,Le=re.length;Me<Le;Me++){const He=re[Me],nt=Math.floor(He.start/4),Je=Math.ceil(He.count/4),gt=nt%Z.width,Re=Math.floor(nt/Z.width),$e=Je,at=1;n.pixelStorei(n.UNPACK_SKIP_PIXELS,gt),n.pixelStorei(n.UNPACK_SKIP_ROWS,Re),t.texSubImage2D(n.TEXTURE_2D,0,gt,Re,$e,at,ye,Y,Z.data)}se.clearUpdateRanges(),n.pixelStorei(n.UNPACK_ROW_LENGTH,_e),n.pixelStorei(n.UNPACK_SKIP_PIXELS,Se),n.pixelStorei(n.UNPACK_SKIP_ROWS,Ue)}}function ue(se,Z,ye){let Y=n.TEXTURE_2D;(Z.isDataArrayTexture||Z.isCompressedArrayTexture)&&(Y=n.TEXTURE_2D_ARRAY),Z.isData3DTexture&&(Y=n.TEXTURE_3D);const J=ee(se,Z),re=Z.source;t.bindTexture(Y,se.__webglTexture,n.TEXTURE0+ye);const ge=i.get(re);if(re.version!==ge.__version||J===!0){t.activeTexture(n.TEXTURE0+ye);const _e=Wn.getPrimaries(Wn.workingColorSpace),Se=Z.colorSpace===Cf?null:Wn.getPrimaries(Z.colorSpace),Ue=Z.colorSpace===Cf||_e===Se?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,Z.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Z.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,Z.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ue);let Me=x(Z.image,!1,r.maxTextureSize);Me=Ae(Z,Me);const Le=s.convert(Z.format,Z.colorSpace),He=s.convert(Z.type);let nt=T(Z.internalFormat,Le,He,Z.colorSpace,Z.isVideoTexture);X(Y,Z);let Je;const gt=Z.mipmaps,Re=Z.isVideoTexture!==!0,$e=ge.__version===void 0||J===!0,at=re.dataReady,_t=C(Z,Me);if(Z.isDepthTexture)nt=E(Z.format===P0,Z.type),$e&&(Re?t.texStorage2D(n.TEXTURE_2D,1,nt,Me.width,Me.height):t.texImage2D(n.TEXTURE_2D,0,nt,Me.width,Me.height,0,Le,He,null));else if(Z.isDataTexture)if(gt.length>0){Re&&$e&&t.texStorage2D(n.TEXTURE_2D,_t,nt,gt[0].width,gt[0].height);for(let st=0,qe=gt.length;st<qe;st++)Je=gt[st],Re?at&&t.texSubImage2D(n.TEXTURE_2D,st,0,0,Je.width,Je.height,Le,He,Je.data):t.texImage2D(n.TEXTURE_2D,st,nt,Je.width,Je.height,0,Le,He,Je.data);Z.generateMipmaps=!1}else Re?($e&&t.texStorage2D(n.TEXTURE_2D,_t,nt,Me.width,Me.height),at&&oe(Z,Me,Le,He)):t.texImage2D(n.TEXTURE_2D,0,nt,Me.width,Me.height,0,Le,He,Me.data);else if(Z.isCompressedTexture)if(Z.isCompressedArrayTexture){Re&&$e&&t.texStorage3D(n.TEXTURE_2D_ARRAY,_t,nt,gt[0].width,gt[0].height,Me.depth);for(let st=0,qe=gt.length;st<qe;st++)if(Je=gt[st],Z.format!==io)if(Le!==null)if(Re){if(at)if(Z.layerUpdates.size>0){const vt=pD(Je.width,Je.height,Z.format,Z.type);for(const Rt of Z.layerUpdates){const Tt=Je.data.subarray(Rt*vt/Je.data.BYTES_PER_ELEMENT,(Rt+1)*vt/Je.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,st,0,0,Rt,Je.width,Je.height,1,Le,Tt)}Z.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,st,0,0,0,Je.width,Je.height,Me.depth,Le,Je.data)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,st,nt,Je.width,Je.height,Me.depth,0,Je.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else Re?at&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,st,0,0,0,Je.width,Je.height,Me.depth,Le,He,Je.data):t.texImage3D(n.TEXTURE_2D_ARRAY,st,nt,Je.width,Je.height,Me.depth,0,Le,He,Je.data)}else{Re&&$e&&t.texStorage2D(n.TEXTURE_2D,_t,nt,gt[0].width,gt[0].height);for(let st=0,qe=gt.length;st<qe;st++)Je=gt[st],Z.format!==io?Le!==null?Re?at&&t.compressedTexSubImage2D(n.TEXTURE_2D,st,0,0,Je.width,Je.height,Le,Je.data):t.compressedTexImage2D(n.TEXTURE_2D,st,nt,Je.width,Je.height,0,Je.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Re?at&&t.texSubImage2D(n.TEXTURE_2D,st,0,0,Je.width,Je.height,Le,He,Je.data):t.texImage2D(n.TEXTURE_2D,st,nt,Je.width,Je.height,0,Le,He,Je.data)}else if(Z.isDataArrayTexture)if(Re){if($e&&t.texStorage3D(n.TEXTURE_2D_ARRAY,_t,nt,Me.width,Me.height,Me.depth),at)if(Z.layerUpdates.size>0){const st=pD(Me.width,Me.height,Z.format,Z.type);for(const qe of Z.layerUpdates){const vt=Me.data.subarray(qe*st/Me.data.BYTES_PER_ELEMENT,(qe+1)*st/Me.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,qe,Me.width,Me.height,1,Le,He,vt)}Z.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Me.width,Me.height,Me.depth,Le,He,Me.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,nt,Me.width,Me.height,Me.depth,0,Le,He,Me.data);else if(Z.isData3DTexture)Re?($e&&t.texStorage3D(n.TEXTURE_3D,_t,nt,Me.width,Me.height,Me.depth),at&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Me.width,Me.height,Me.depth,Le,He,Me.data)):t.texImage3D(n.TEXTURE_3D,0,nt,Me.width,Me.height,Me.depth,0,Le,He,Me.data);else if(Z.isFramebufferTexture){if($e)if(Re)t.texStorage2D(n.TEXTURE_2D,_t,nt,Me.width,Me.height);else{let st=Me.width,qe=Me.height;for(let vt=0;vt<_t;vt++)t.texImage2D(n.TEXTURE_2D,vt,nt,st,qe,0,Le,He,null),st>>=1,qe>>=1}}else if(gt.length>0){if(Re&&$e){const st=tt(gt[0]);t.texStorage2D(n.TEXTURE_2D,_t,nt,st.width,st.height)}for(let st=0,qe=gt.length;st<qe;st++)Je=gt[st],Re?at&&t.texSubImage2D(n.TEXTURE_2D,st,0,0,Le,He,Je):t.texImage2D(n.TEXTURE_2D,st,nt,Le,He,Je);Z.generateMipmaps=!1}else if(Re){if($e){const st=tt(Me);t.texStorage2D(n.TEXTURE_2D,_t,nt,st.width,st.height)}at&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,Le,He,Me)}else t.texImage2D(n.TEXTURE_2D,0,nt,Le,He,Me);w(Z)&&_(Y),ge.__version=re.version,Z.onUpdate&&Z.onUpdate(Z)}se.__version=Z.version}function he(se,Z,ye){if(Z.image.length!==6)return;const Y=ee(se,Z),J=Z.source;t.bindTexture(n.TEXTURE_CUBE_MAP,se.__webglTexture,n.TEXTURE0+ye);const re=i.get(J);if(J.version!==re.__version||Y===!0){t.activeTexture(n.TEXTURE0+ye);const ge=Wn.getPrimaries(Wn.workingColorSpace),_e=Z.colorSpace===Cf?null:Wn.getPrimaries(Z.colorSpace),Se=Z.colorSpace===Cf||ge===_e?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,Z.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Z.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,Z.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Se);const Ue=Z.isCompressedTexture||Z.image[0].isCompressedTexture,Me=Z.image[0]&&Z.image[0].isDataTexture,Le=[];for(let qe=0;qe<6;qe++)!Ue&&!Me?Le[qe]=x(Z.image[qe],!0,r.maxCubemapSize):Le[qe]=Me?Z.image[qe].image:Z.image[qe],Le[qe]=Ae(Z,Le[qe]);const He=Le[0],nt=s.convert(Z.format,Z.colorSpace),Je=s.convert(Z.type),gt=T(Z.internalFormat,nt,Je,Z.colorSpace),Re=Z.isVideoTexture!==!0,$e=re.__version===void 0||Y===!0,at=J.dataReady;let _t=C(Z,He);X(n.TEXTURE_CUBE_MAP,Z);let st;if(Ue){Re&&$e&&t.texStorage2D(n.TEXTURE_CUBE_MAP,_t,gt,He.width,He.height);for(let qe=0;qe<6;qe++){st=Le[qe].mipmaps;for(let vt=0;vt<st.length;vt++){const Rt=st[vt];Z.format!==io?nt!==null?Re?at&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+qe,vt,0,0,Rt.width,Rt.height,nt,Rt.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+qe,vt,gt,Rt.width,Rt.height,0,Rt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Re?at&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+qe,vt,0,0,Rt.width,Rt.height,nt,Je,Rt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+qe,vt,gt,Rt.width,Rt.height,0,nt,Je,Rt.data)}}}else{if(st=Z.mipmaps,Re&&$e){st.length>0&&_t++;const qe=tt(Le[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,_t,gt,qe.width,qe.height)}for(let qe=0;qe<6;qe++)if(Me){Re?at&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+qe,0,0,0,Le[qe].width,Le[qe].height,nt,Je,Le[qe].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+qe,0,gt,Le[qe].width,Le[qe].height,0,nt,Je,Le[qe].data);for(let vt=0;vt<st.length;vt++){const Tt=st[vt].image[qe].image;Re?at&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+qe,vt+1,0,0,Tt.width,Tt.height,nt,Je,Tt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+qe,vt+1,gt,Tt.width,Tt.height,0,nt,Je,Tt.data)}}else{Re?at&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+qe,0,0,0,nt,Je,Le[qe]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+qe,0,gt,nt,Je,Le[qe]);for(let vt=0;vt<st.length;vt++){const Rt=st[vt];Re?at&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+qe,vt+1,0,0,nt,Je,Rt.image[qe]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+qe,vt+1,gt,nt,Je,Rt.image[qe])}}}w(Z)&&_(n.TEXTURE_CUBE_MAP),re.__version=J.version,Z.onUpdate&&Z.onUpdate(Z)}se.__version=Z.version}function be(se,Z,ye,Y,J,re){const ge=s.convert(ye.format,ye.colorSpace),_e=s.convert(ye.type),Se=T(ye.internalFormat,ge,_e,ye.colorSpace),Ue=i.get(Z),Me=i.get(ye);if(Me.__renderTarget=Z,!Ue.__hasExternalTextures){const Le=Math.max(1,Z.width>>re),He=Math.max(1,Z.height>>re);J===n.TEXTURE_3D||J===n.TEXTURE_2D_ARRAY?t.texImage3D(J,re,Se,Le,He,Z.depth,0,ge,_e,null):t.texImage2D(J,re,Se,Le,He,0,ge,_e,null)}t.bindFramebuffer(n.FRAMEBUFFER,se),ke(Z)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,Y,J,Me.__webglTexture,0,Ne(Z)):(J===n.TEXTURE_2D||J>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&J<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,Y,J,Me.__webglTexture,re),t.bindFramebuffer(n.FRAMEBUFFER,null)}function Te(se,Z,ye){if(n.bindRenderbuffer(n.RENDERBUFFER,se),Z.depthBuffer){const Y=Z.depthTexture,J=Y&&Y.isDepthTexture?Y.type:null,re=E(Z.stencilBuffer,J),ge=Z.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,_e=Ne(Z);ke(Z)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,_e,re,Z.width,Z.height):ye?n.renderbufferStorageMultisample(n.RENDERBUFFER,_e,re,Z.width,Z.height):n.renderbufferStorage(n.RENDERBUFFER,re,Z.width,Z.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,ge,n.RENDERBUFFER,se)}else{const Y=Z.textures;for(let J=0;J<Y.length;J++){const re=Y[J],ge=s.convert(re.format,re.colorSpace),_e=s.convert(re.type),Se=T(re.internalFormat,ge,_e,re.colorSpace),Ue=Ne(Z);ye&&ke(Z)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Ue,Se,Z.width,Z.height):ke(Z)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Ue,Se,Z.width,Z.height):n.renderbufferStorage(n.RENDERBUFFER,Se,Z.width,Z.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function Ee(se,Z){if(Z&&Z.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,se),!(Z.depthTexture&&Z.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const Y=i.get(Z.depthTexture);Y.__renderTarget=Z,(!Y.__webglTexture||Z.depthTexture.image.width!==Z.width||Z.depthTexture.image.height!==Z.height)&&(Z.depthTexture.image.width=Z.width,Z.depthTexture.image.height=Z.height,Z.depthTexture.needsUpdate=!0),q(Z.depthTexture,0);const J=Y.__webglTexture,re=Ne(Z);if(Z.depthTexture.format===L0)ke(Z)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,J,0,re):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,J,0);else if(Z.depthTexture.format===P0)ke(Z)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,J,0,re):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,J,0);else throw new Error("Unknown depthTexture format")}function Ce(se){const Z=i.get(se),ye=se.isWebGLCubeRenderTarget===!0;if(Z.__boundDepthTexture!==se.depthTexture){const Y=se.depthTexture;if(Z.__depthDisposeCallback&&Z.__depthDisposeCallback(),Y){const J=()=>{delete Z.__boundDepthTexture,delete Z.__depthDisposeCallback,Y.removeEventListener("dispose",J)};Y.addEventListener("dispose",J),Z.__depthDisposeCallback=J}Z.__boundDepthTexture=Y}if(se.depthTexture&&!Z.__autoAllocateDepthBuffer){if(ye)throw new Error("target.depthTexture not supported in Cube render targets");const Y=se.texture.mipmaps;Y&&Y.length>0?Ee(Z.__webglFramebuffer[0],se):Ee(Z.__webglFramebuffer,se)}else if(ye){Z.__webglDepthbuffer=[];for(let Y=0;Y<6;Y++)if(t.bindFramebuffer(n.FRAMEBUFFER,Z.__webglFramebuffer[Y]),Z.__webglDepthbuffer[Y]===void 0)Z.__webglDepthbuffer[Y]=n.createRenderbuffer(),Te(Z.__webglDepthbuffer[Y],se,!1);else{const J=se.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,re=Z.__webglDepthbuffer[Y];n.bindRenderbuffer(n.RENDERBUFFER,re),n.framebufferRenderbuffer(n.FRAMEBUFFER,J,n.RENDERBUFFER,re)}}else{const Y=se.texture.mipmaps;if(Y&&Y.length>0?t.bindFramebuffer(n.FRAMEBUFFER,Z.__webglFramebuffer[0]):t.bindFramebuffer(n.FRAMEBUFFER,Z.__webglFramebuffer),Z.__webglDepthbuffer===void 0)Z.__webglDepthbuffer=n.createRenderbuffer(),Te(Z.__webglDepthbuffer,se,!1);else{const J=se.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,re=Z.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,re),n.framebufferRenderbuffer(n.FRAMEBUFFER,J,n.RENDERBUFFER,re)}}t.bindFramebuffer(n.FRAMEBUFFER,null)}function we(se,Z,ye){const Y=i.get(se);Z!==void 0&&be(Y.__webglFramebuffer,se,se.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),ye!==void 0&&Ce(se)}function ae(se){const Z=se.texture,ye=i.get(se),Y=i.get(Z);se.addEventListener("dispose",O);const J=se.textures,re=se.isWebGLCubeRenderTarget===!0,ge=J.length>1;if(ge||(Y.__webglTexture===void 0&&(Y.__webglTexture=n.createTexture()),Y.__version=Z.version,o.memory.textures++),re){ye.__webglFramebuffer=[];for(let _e=0;_e<6;_e++)if(Z.mipmaps&&Z.mipmaps.length>0){ye.__webglFramebuffer[_e]=[];for(let Se=0;Se<Z.mipmaps.length;Se++)ye.__webglFramebuffer[_e][Se]=n.createFramebuffer()}else ye.__webglFramebuffer[_e]=n.createFramebuffer()}else{if(Z.mipmaps&&Z.mipmaps.length>0){ye.__webglFramebuffer=[];for(let _e=0;_e<Z.mipmaps.length;_e++)ye.__webglFramebuffer[_e]=n.createFramebuffer()}else ye.__webglFramebuffer=n.createFramebuffer();if(ge)for(let _e=0,Se=J.length;_e<Se;_e++){const Ue=i.get(J[_e]);Ue.__webglTexture===void 0&&(Ue.__webglTexture=n.createTexture(),o.memory.textures++)}if(se.samples>0&&ke(se)===!1){ye.__webglMultisampledFramebuffer=n.createFramebuffer(),ye.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,ye.__webglMultisampledFramebuffer);for(let _e=0;_e<J.length;_e++){const Se=J[_e];ye.__webglColorRenderbuffer[_e]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,ye.__webglColorRenderbuffer[_e]);const Ue=s.convert(Se.format,Se.colorSpace),Me=s.convert(Se.type),Le=T(Se.internalFormat,Ue,Me,Se.colorSpace,se.isXRRenderTarget===!0),He=Ne(se);n.renderbufferStorageMultisample(n.RENDERBUFFER,He,Le,se.width,se.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+_e,n.RENDERBUFFER,ye.__webglColorRenderbuffer[_e])}n.bindRenderbuffer(n.RENDERBUFFER,null),se.depthBuffer&&(ye.__webglDepthRenderbuffer=n.createRenderbuffer(),Te(ye.__webglDepthRenderbuffer,se,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(re){t.bindTexture(n.TEXTURE_CUBE_MAP,Y.__webglTexture),X(n.TEXTURE_CUBE_MAP,Z);for(let _e=0;_e<6;_e++)if(Z.mipmaps&&Z.mipmaps.length>0)for(let Se=0;Se<Z.mipmaps.length;Se++)be(ye.__webglFramebuffer[_e][Se],se,Z,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+_e,Se);else be(ye.__webglFramebuffer[_e],se,Z,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+_e,0);w(Z)&&_(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(ge){for(let _e=0,Se=J.length;_e<Se;_e++){const Ue=J[_e],Me=i.get(Ue);let Le=n.TEXTURE_2D;(se.isWebGL3DRenderTarget||se.isWebGLArrayRenderTarget)&&(Le=se.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(Le,Me.__webglTexture),X(Le,Ue),be(ye.__webglFramebuffer,se,Ue,n.COLOR_ATTACHMENT0+_e,Le,0),w(Ue)&&_(Le)}t.unbindTexture()}else{let _e=n.TEXTURE_2D;if((se.isWebGL3DRenderTarget||se.isWebGLArrayRenderTarget)&&(_e=se.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(_e,Y.__webglTexture),X(_e,Z),Z.mipmaps&&Z.mipmaps.length>0)for(let Se=0;Se<Z.mipmaps.length;Se++)be(ye.__webglFramebuffer[Se],se,Z,n.COLOR_ATTACHMENT0,_e,Se);else be(ye.__webglFramebuffer,se,Z,n.COLOR_ATTACHMENT0,_e,0);w(Z)&&_(_e),t.unbindTexture()}se.depthBuffer&&Ce(se)}function ve(se){const Z=se.textures;for(let ye=0,Y=Z.length;ye<Y;ye++){const J=Z[ye];if(w(J)){const re=A(se),ge=i.get(J).__webglTexture;t.bindTexture(re,ge),_(re),t.unbindTexture()}}}const xe=[],me=[];function Ie(se){if(se.samples>0){if(ke(se)===!1){const Z=se.textures,ye=se.width,Y=se.height;let J=n.COLOR_BUFFER_BIT;const re=se.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,ge=i.get(se),_e=Z.length>1;if(_e)for(let Ue=0;Ue<Z.length;Ue++)t.bindFramebuffer(n.FRAMEBUFFER,ge.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ue,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,ge.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ue,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,ge.__webglMultisampledFramebuffer);const Se=se.texture.mipmaps;Se&&Se.length>0?t.bindFramebuffer(n.DRAW_FRAMEBUFFER,ge.__webglFramebuffer[0]):t.bindFramebuffer(n.DRAW_FRAMEBUFFER,ge.__webglFramebuffer);for(let Ue=0;Ue<Z.length;Ue++){if(se.resolveDepthBuffer&&(se.depthBuffer&&(J|=n.DEPTH_BUFFER_BIT),se.stencilBuffer&&se.resolveStencilBuffer&&(J|=n.STENCIL_BUFFER_BIT)),_e){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,ge.__webglColorRenderbuffer[Ue]);const Me=i.get(Z[Ue]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,Me,0)}n.blitFramebuffer(0,0,ye,Y,0,0,ye,Y,J,n.NEAREST),l===!0&&(xe.length=0,me.length=0,xe.push(n.COLOR_ATTACHMENT0+Ue),se.depthBuffer&&se.resolveDepthBuffer===!1&&(xe.push(re),me.push(re),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,me)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,xe))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),_e)for(let Ue=0;Ue<Z.length;Ue++){t.bindFramebuffer(n.FRAMEBUFFER,ge.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ue,n.RENDERBUFFER,ge.__webglColorRenderbuffer[Ue]);const Me=i.get(Z[Ue]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,ge.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ue,n.TEXTURE_2D,Me,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,ge.__webglMultisampledFramebuffer)}else if(se.depthBuffer&&se.resolveDepthBuffer===!1&&l){const Z=se.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[Z])}}}function Ne(se){return Math.min(r.maxSamples,se.samples)}function ke(se){const Z=i.get(se);return se.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&Z.__useRenderToTexture!==!1}function Fe(se){const Z=o.render.frame;f.get(se)!==Z&&(f.set(se,Z),se.update())}function Ae(se,Z){const ye=se.colorSpace,Y=se.format,J=se.type;return se.isCompressedTexture===!0||se.isVideoTexture===!0||ye!==gd&&ye!==Cf&&(Wn.getTransfer(ye)===mi?(Y!==io||J!==Tl)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",ye)),Z}function tt(se){return typeof HTMLImageElement<"u"&&se instanceof HTMLImageElement?(c.width=se.naturalWidth||se.width,c.height=se.naturalHeight||se.height):typeof VideoFrame<"u"&&se instanceof VideoFrame?(c.width=se.displayWidth,c.height=se.displayHeight):(c.width=se.width,c.height=se.height),c}this.allocateTextureUnit=k,this.resetTextureUnits=B,this.setTexture2D=q,this.setTexture2DArray=W,this.setTexture3D=G,this.setTextureCube=K,this.rebindTextures=we,this.setupRenderTarget=ae,this.updateRenderTargetMipmap=ve,this.updateMultisampleRenderTarget=Ie,this.setupDepthRenderbuffer=Ce,this.setupFrameBufferTexture=be,this.useMultisampledRTT=ke}function eG(n,e){function t(i,r=Cf){let s;const o=Wn.getTransfer(r);if(i===Tl)return n.UNSIGNED_BYTE;if(i===zM)return n.UNSIGNED_SHORT_4_4_4_4;if(i===FM)return n.UNSIGNED_SHORT_5_5_5_1;if(i===rL)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===sL)return n.UNSIGNED_INT_10F_11F_11F_REV;if(i===nL)return n.BYTE;if(i===iL)return n.SHORT;if(i===D0)return n.UNSIGNED_SHORT;if(i===kM)return n.INT;if(i===Wf)return n.UNSIGNED_INT;if(i===fa)return n.FLOAT;if(i===ov)return n.HALF_FLOAT;if(i===oL)return n.ALPHA;if(i===aL)return n.RGB;if(i===io)return n.RGBA;if(i===L0)return n.DEPTH_COMPONENT;if(i===P0)return n.DEPTH_STENCIL;if(i===BM)return n.RED;if(i===ex)return n.RED_INTEGER;if(i===lL)return n.RG;if(i===VM)return n.RG_INTEGER;if(i===GM)return n.RGBA_INTEGER;if(i===jb||i===Wb||i===$b||i===qb)if(o===mi)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(i===jb)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===Wb)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===$b)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===qb)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(i===jb)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===Wb)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===$b)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===qb)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===xE||i===wE||i===SE||i===EE)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(i===xE)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===wE)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===SE)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===EE)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===ME||i===TE||i===AE)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(i===ME||i===TE)return o===mi?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(i===AE)return o===mi?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===CE||i===RE||i===DE||i===OE||i===LE||i===PE||i===IE||i===NE||i===UE||i===kE||i===zE||i===FE||i===BE||i===VE)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(i===CE)return o===mi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===RE)return o===mi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===DE)return o===mi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===OE)return o===mi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===LE)return o===mi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===PE)return o===mi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===IE)return o===mi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===NE)return o===mi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===UE)return o===mi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===kE)return o===mi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===zE)return o===mi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===FE)return o===mi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===BE)return o===mi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===VE)return o===mi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===GE||i===HE||i===jE)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(i===GE)return o===mi?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===HE)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===jE)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===WE||i===$E||i===qE||i===XE)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(i===WE)return s.COMPRESSED_RED_RGTC1_EXT;if(i===$E)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===qE)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===XE)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===O0?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:t}}const Tue=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,Aue=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class Cue{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t){if(this.texture===null){const i=new xL(e.texture);(e.depthNear!==t.depthNear||e.depthFar!==t.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=i}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,i=new Al({vertexShader:Tue,fragmentShader:Aue,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Pi(new Zf(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class Rue extends Eu{constructor(e,t){super();const i=this;let r=null,s=1,o=null,a="local-floor",l=1,c=null,f=null,d=null,m=null,v=null,b=null;const x=typeof XRWebGLBinding<"u",w=new Cue,_={},A=t.getContextAttributes();let T=null,E=null;const C=[],R=[],O=new ut;let I=null;const L=new Fr;L.viewport=new Gn;const N=new Fr;N.viewport=new Gn;const V=[L,N],B=new HV;let k=null,j=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ue){let he=C[ue];return he===void 0&&(he=new DS,C[ue]=he),he.getTargetRaySpace()},this.getControllerGrip=function(ue){let he=C[ue];return he===void 0&&(he=new DS,C[ue]=he),he.getGripSpace()},this.getHand=function(ue){let he=C[ue];return he===void 0&&(he=new DS,C[ue]=he),he.getHandSpace()};function q(ue){const he=R.indexOf(ue.inputSource);if(he===-1)return;const be=C[he];be!==void 0&&(be.update(ue.inputSource,ue.frame,c||o),be.dispatchEvent({type:ue.type,data:ue.inputSource}))}function W(){r.removeEventListener("select",q),r.removeEventListener("selectstart",q),r.removeEventListener("selectend",q),r.removeEventListener("squeeze",q),r.removeEventListener("squeezestart",q),r.removeEventListener("squeezeend",q),r.removeEventListener("end",W),r.removeEventListener("inputsourceschange",G);for(let ue=0;ue<C.length;ue++){const he=R[ue];he!==null&&(R[ue]=null,C[ue].disconnect(he))}k=null,j=null,w.reset();for(const ue in _)delete _[ue];e.setRenderTarget(T),v=null,m=null,d=null,r=null,E=null,oe.stop(),i.isPresenting=!1,e.setPixelRatio(I),e.setSize(O.width,O.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ue){s=ue,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ue){a=ue,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(ue){c=ue},this.getBaseLayer=function(){return m!==null?m:v},this.getBinding=function(){return d===null&&x&&(d=new XRWebGLBinding(r,t)),d},this.getFrame=function(){return b},this.getSession=function(){return r},this.setSession=async function(ue){if(r=ue,r!==null){if(T=e.getRenderTarget(),r.addEventListener("select",q),r.addEventListener("selectstart",q),r.addEventListener("selectend",q),r.addEventListener("squeeze",q),r.addEventListener("squeezestart",q),r.addEventListener("squeezeend",q),r.addEventListener("end",W),r.addEventListener("inputsourceschange",G),A.xrCompatible!==!0&&await t.makeXRCompatible(),I=e.getPixelRatio(),e.getSize(O),x&&"createProjectionLayer"in XRWebGLBinding.prototype){let be=null,Te=null,Ee=null;A.depth&&(Ee=A.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,be=A.stencil?P0:L0,Te=A.stencil?O0:Wf);const Ce={colorFormat:t.RGBA8,depthFormat:Ee,scaleFactor:s};d=this.getBinding(),m=d.createProjectionLayer(Ce),r.updateRenderState({layers:[m]}),e.setPixelRatio(1),e.setSize(m.textureWidth,m.textureHeight,!1),E=new wu(m.textureWidth,m.textureHeight,{format:io,type:Tl,depthTexture:new _L(m.textureWidth,m.textureHeight,Te,void 0,void 0,void 0,void 0,void 0,void 0,be),stencilBuffer:A.stencil,colorSpace:e.outputColorSpace,samples:A.antialias?4:0,resolveDepthBuffer:m.ignoreDepthValues===!1,resolveStencilBuffer:m.ignoreDepthValues===!1})}else{const be={antialias:A.antialias,alpha:!0,depth:A.depth,stencil:A.stencil,framebufferScaleFactor:s};v=new XRWebGLLayer(r,t,be),r.updateRenderState({baseLayer:v}),e.setPixelRatio(1),e.setSize(v.framebufferWidth,v.framebufferHeight,!1),E=new wu(v.framebufferWidth,v.framebufferHeight,{format:io,type:Tl,colorSpace:e.outputColorSpace,stencilBuffer:A.stencil,resolveDepthBuffer:v.ignoreDepthValues===!1,resolveStencilBuffer:v.ignoreDepthValues===!1})}E.isXRRenderTarget=!0,this.setFoveation(l),c=null,o=await r.requestReferenceSpace(a),oe.setContext(r),oe.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return w.getDepthTexture()};function G(ue){for(let he=0;he<ue.removed.length;he++){const be=ue.removed[he],Te=R.indexOf(be);Te>=0&&(R[Te]=null,C[Te].disconnect(be))}for(let he=0;he<ue.added.length;he++){const be=ue.added[he];let Te=R.indexOf(be);if(Te===-1){for(let Ce=0;Ce<C.length;Ce++)if(Ce>=R.length){R.push(be),Te=Ce;break}else if(R[Ce]===null){R[Ce]=be,Te=Ce;break}if(Te===-1)break}const Ee=C[Te];Ee&&Ee.connect(be)}}const K=new de,te=new de;function ie(ue,he,be){K.setFromMatrixPosition(he.matrixWorld),te.setFromMatrixPosition(be.matrixWorld);const Te=K.distanceTo(te),Ee=he.projectionMatrix.elements,Ce=be.projectionMatrix.elements,we=Ee[14]/(Ee[10]-1),ae=Ee[14]/(Ee[10]+1),ve=(Ee[9]+1)/Ee[5],xe=(Ee[9]-1)/Ee[5],me=(Ee[8]-1)/Ee[0],Ie=(Ce[8]+1)/Ce[0],Ne=we*me,ke=we*Ie,Fe=Te/(-me+Ie),Ae=Fe*-me;if(he.matrixWorld.decompose(ue.position,ue.quaternion,ue.scale),ue.translateX(Ae),ue.translateZ(Fe),ue.matrixWorld.compose(ue.position,ue.quaternion,ue.scale),ue.matrixWorldInverse.copy(ue.matrixWorld).invert(),Ee[10]===-1)ue.projectionMatrix.copy(he.projectionMatrix),ue.projectionMatrixInverse.copy(he.projectionMatrixInverse);else{const tt=we+Fe,se=ae+Fe,Z=Ne-Ae,ye=ke+(Te-Ae),Y=ve*ae/se*tt,J=xe*ae/se*tt;ue.projectionMatrix.makePerspective(Z,ye,Y,J,tt,se),ue.projectionMatrixInverse.copy(ue.projectionMatrix).invert()}}function F(ue,he){he===null?ue.matrixWorld.copy(ue.matrix):ue.matrixWorld.multiplyMatrices(he.matrixWorld,ue.matrix),ue.matrixWorldInverse.copy(ue.matrixWorld).invert()}this.updateCamera=function(ue){if(r===null)return;let he=ue.near,be=ue.far;w.texture!==null&&(w.depthNear>0&&(he=w.depthNear),w.depthFar>0&&(be=w.depthFar)),B.near=N.near=L.near=he,B.far=N.far=L.far=be,(k!==B.near||j!==B.far)&&(r.updateRenderState({depthNear:B.near,depthFar:B.far}),k=B.near,j=B.far),B.layers.mask=ue.layers.mask|6,L.layers.mask=B.layers.mask&3,N.layers.mask=B.layers.mask&5;const Te=ue.parent,Ee=B.cameras;F(B,Te);for(let Ce=0;Ce<Ee.length;Ce++)F(Ee[Ce],Te);Ee.length===2?ie(B,L,N):B.projectionMatrix.copy(L.projectionMatrix),X(ue,B,Te)};function X(ue,he,be){be===null?ue.matrix.copy(he.matrixWorld):(ue.matrix.copy(be.matrixWorld),ue.matrix.invert(),ue.matrix.multiply(he.matrixWorld)),ue.matrix.decompose(ue.position,ue.quaternion,ue.scale),ue.updateMatrixWorld(!0),ue.projectionMatrix.copy(he.projectionMatrix),ue.projectionMatrixInverse.copy(he.projectionMatrixInverse),ue.isPerspectiveCamera&&(ue.fov=N0*2*Math.atan(1/ue.projectionMatrix.elements[5]),ue.zoom=1)}this.getCamera=function(){return B},this.getFoveation=function(){if(!(m===null&&v===null))return l},this.setFoveation=function(ue){l=ue,m!==null&&(m.fixedFoveation=ue),v!==null&&v.fixedFoveation!==void 0&&(v.fixedFoveation=ue)},this.hasDepthSensing=function(){return w.texture!==null},this.getDepthSensingMesh=function(){return w.getMesh(B)},this.getCameraTexture=function(ue){return _[ue]};let ee=null;function le(ue,he){if(f=he.getViewerPose(c||o),b=he,f!==null){const be=f.views;v!==null&&(e.setRenderTargetFramebuffer(E,v.framebuffer),e.setRenderTarget(E));let Te=!1;be.length!==B.cameras.length&&(B.cameras.length=0,Te=!0);for(let ae=0;ae<be.length;ae++){const ve=be[ae];let xe=null;if(v!==null)xe=v.getViewport(ve);else{const Ie=d.getViewSubImage(m,ve);xe=Ie.viewport,ae===0&&(e.setRenderTargetTextures(E,Ie.colorTexture,Ie.depthStencilTexture),e.setRenderTarget(E))}let me=V[ae];me===void 0&&(me=new Fr,me.layers.enable(ae),me.viewport=new Gn,V[ae]=me),me.matrix.fromArray(ve.transform.matrix),me.matrix.decompose(me.position,me.quaternion,me.scale),me.projectionMatrix.fromArray(ve.projectionMatrix),me.projectionMatrixInverse.copy(me.projectionMatrix).invert(),me.viewport.set(xe.x,xe.y,xe.width,xe.height),ae===0&&(B.matrix.copy(me.matrix),B.matrix.decompose(B.position,B.quaternion,B.scale)),Te===!0&&B.cameras.push(me)}const Ee=r.enabledFeatures;if(Ee&&Ee.includes("depth-sensing")&&r.depthUsage=="gpu-optimized"&&x){d=i.getBinding();const ae=d.getDepthInformation(be[0]);ae&&ae.isValid&&ae.texture&&w.init(ae,r.renderState)}if(Ee&&Ee.includes("camera-access")&&x){e.state.unbindTexture(),d=i.getBinding();for(let ae=0;ae<be.length;ae++){const ve=be[ae].camera;if(ve){let xe=_[ve];xe||(xe=new xL,_[ve]=xe);const me=d.getCameraImage(ve);xe.sourceTexture=me}}}}for(let be=0;be<C.length;be++){const Te=R[be],Ee=C[be];Te!==null&&Ee!==void 0&&Ee.update(Te,he,c||o)}ee&&ee(ue,he),he.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:he}),b=null}const oe=new YV;oe.setAnimationLoop(le),this.setAnimationLoop=function(ue){ee=ue},this.dispose=function(){}}}const Sp=new Io,Due=new Kt;function Oue(n,e){function t(w,_){w.matrixAutoUpdate===!0&&w.updateMatrix(),_.value.copy(w.matrix)}function i(w,_){_.color.getRGB(w.fogColor.value,K8(n)),_.isFog?(w.fogNear.value=_.near,w.fogFar.value=_.far):_.isFogExp2&&(w.fogDensity.value=_.density)}function r(w,_,A,T,E){_.isMeshBasicMaterial||_.isMeshLambertMaterial?s(w,_):_.isMeshToonMaterial?(s(w,_),d(w,_)):_.isMeshPhongMaterial?(s(w,_),f(w,_)):_.isMeshStandardMaterial?(s(w,_),m(w,_),_.isMeshPhysicalMaterial&&v(w,_,E)):_.isMeshMatcapMaterial?(s(w,_),b(w,_)):_.isMeshDepthMaterial?s(w,_):_.isMeshDistanceMaterial?(s(w,_),x(w,_)):_.isMeshNormalMaterial?s(w,_):_.isLineBasicMaterial?(o(w,_),_.isLineDashedMaterial&&a(w,_)):_.isPointsMaterial?l(w,_,A,T):_.isSpriteMaterial?c(w,_):_.isShadowMaterial?(w.color.value.copy(_.color),w.opacity.value=_.opacity):_.isShaderMaterial&&(_.uniformsNeedUpdate=!1)}function s(w,_){w.opacity.value=_.opacity,_.color&&w.diffuse.value.copy(_.color),_.emissive&&w.emissive.value.copy(_.emissive).multiplyScalar(_.emissiveIntensity),_.map&&(w.map.value=_.map,t(_.map,w.mapTransform)),_.alphaMap&&(w.alphaMap.value=_.alphaMap,t(_.alphaMap,w.alphaMapTransform)),_.bumpMap&&(w.bumpMap.value=_.bumpMap,t(_.bumpMap,w.bumpMapTransform),w.bumpScale.value=_.bumpScale,_.side===Po&&(w.bumpScale.value*=-1)),_.normalMap&&(w.normalMap.value=_.normalMap,t(_.normalMap,w.normalMapTransform),w.normalScale.value.copy(_.normalScale),_.side===Po&&w.normalScale.value.negate()),_.displacementMap&&(w.displacementMap.value=_.displacementMap,t(_.displacementMap,w.displacementMapTransform),w.displacementScale.value=_.displacementScale,w.displacementBias.value=_.displacementBias),_.emissiveMap&&(w.emissiveMap.value=_.emissiveMap,t(_.emissiveMap,w.emissiveMapTransform)),_.specularMap&&(w.specularMap.value=_.specularMap,t(_.specularMap,w.specularMapTransform)),_.alphaTest>0&&(w.alphaTest.value=_.alphaTest);const A=e.get(_),T=A.envMap,E=A.envMapRotation;T&&(w.envMap.value=T,Sp.copy(E),Sp.x*=-1,Sp.y*=-1,Sp.z*=-1,T.isCubeTexture&&T.isRenderTargetTexture===!1&&(Sp.y*=-1,Sp.z*=-1),w.envMapRotation.value.setFromMatrix4(Due.makeRotationFromEuler(Sp)),w.flipEnvMap.value=T.isCubeTexture&&T.isRenderTargetTexture===!1?-1:1,w.reflectivity.value=_.reflectivity,w.ior.value=_.ior,w.refractionRatio.value=_.refractionRatio),_.lightMap&&(w.lightMap.value=_.lightMap,w.lightMapIntensity.value=_.lightMapIntensity,t(_.lightMap,w.lightMapTransform)),_.aoMap&&(w.aoMap.value=_.aoMap,w.aoMapIntensity.value=_.aoMapIntensity,t(_.aoMap,w.aoMapTransform))}function o(w,_){w.diffuse.value.copy(_.color),w.opacity.value=_.opacity,_.map&&(w.map.value=_.map,t(_.map,w.mapTransform))}function a(w,_){w.dashSize.value=_.dashSize,w.totalSize.value=_.dashSize+_.gapSize,w.scale.value=_.scale}function l(w,_,A,T){w.diffuse.value.copy(_.color),w.opacity.value=_.opacity,w.size.value=_.size*A,w.scale.value=T*.5,_.map&&(w.map.value=_.map,t(_.map,w.uvTransform)),_.alphaMap&&(w.alphaMap.value=_.alphaMap,t(_.alphaMap,w.alphaMapTransform)),_.alphaTest>0&&(w.alphaTest.value=_.alphaTest)}function c(w,_){w.diffuse.value.copy(_.color),w.opacity.value=_.opacity,w.rotation.value=_.rotation,_.map&&(w.map.value=_.map,t(_.map,w.mapTransform)),_.alphaMap&&(w.alphaMap.value=_.alphaMap,t(_.alphaMap,w.alphaMapTransform)),_.alphaTest>0&&(w.alphaTest.value=_.alphaTest)}function f(w,_){w.specular.value.copy(_.specular),w.shininess.value=Math.max(_.shininess,1e-4)}function d(w,_){_.gradientMap&&(w.gradientMap.value=_.gradientMap)}function m(w,_){w.metalness.value=_.metalness,_.metalnessMap&&(w.metalnessMap.value=_.metalnessMap,t(_.metalnessMap,w.metalnessMapTransform)),w.roughness.value=_.roughness,_.roughnessMap&&(w.roughnessMap.value=_.roughnessMap,t(_.roughnessMap,w.roughnessMapTransform)),_.envMap&&(w.envMapIntensity.value=_.envMapIntensity)}function v(w,_,A){w.ior.value=_.ior,_.sheen>0&&(w.sheenColor.value.copy(_.sheenColor).multiplyScalar(_.sheen),w.sheenRoughness.value=_.sheenRoughness,_.sheenColorMap&&(w.sheenColorMap.value=_.sheenColorMap,t(_.sheenColorMap,w.sheenColorMapTransform)),_.sheenRoughnessMap&&(w.sheenRoughnessMap.value=_.sheenRoughnessMap,t(_.sheenRoughnessMap,w.sheenRoughnessMapTransform))),_.clearcoat>0&&(w.clearcoat.value=_.clearcoat,w.clearcoatRoughness.value=_.clearcoatRoughness,_.clearcoatMap&&(w.clearcoatMap.value=_.clearcoatMap,t(_.clearcoatMap,w.clearcoatMapTransform)),_.clearcoatRoughnessMap&&(w.clearcoatRoughnessMap.value=_.clearcoatRoughnessMap,t(_.clearcoatRoughnessMap,w.clearcoatRoughnessMapTransform)),_.clearcoatNormalMap&&(w.clearcoatNormalMap.value=_.clearcoatNormalMap,t(_.clearcoatNormalMap,w.clearcoatNormalMapTransform),w.clearcoatNormalScale.value.copy(_.clearcoatNormalScale),_.side===Po&&w.clearcoatNormalScale.value.negate())),_.dispersion>0&&(w.dispersion.value=_.dispersion),_.iridescence>0&&(w.iridescence.value=_.iridescence,w.iridescenceIOR.value=_.iridescenceIOR,w.iridescenceThicknessMinimum.value=_.iridescenceThicknessRange[0],w.iridescenceThicknessMaximum.value=_.iridescenceThicknessRange[1],_.iridescenceMap&&(w.iridescenceMap.value=_.iridescenceMap,t(_.iridescenceMap,w.iridescenceMapTransform)),_.iridescenceThicknessMap&&(w.iridescenceThicknessMap.value=_.iridescenceThicknessMap,t(_.iridescenceThicknessMap,w.iridescenceThicknessMapTransform))),_.transmission>0&&(w.transmission.value=_.transmission,w.transmissionSamplerMap.value=A.texture,w.transmissionSamplerSize.value.set(A.width,A.height),_.transmissionMap&&(w.transmissionMap.value=_.transmissionMap,t(_.transmissionMap,w.transmissionMapTransform)),w.thickness.value=_.thickness,_.thicknessMap&&(w.thicknessMap.value=_.thicknessMap,t(_.thicknessMap,w.thicknessMapTransform)),w.attenuationDistance.value=_.attenuationDistance,w.attenuationColor.value.copy(_.attenuationColor)),_.anisotropy>0&&(w.anisotropyVector.value.set(_.anisotropy*Math.cos(_.anisotropyRotation),_.anisotropy*Math.sin(_.anisotropyRotation)),_.anisotropyMap&&(w.anisotropyMap.value=_.anisotropyMap,t(_.anisotropyMap,w.anisotropyMapTransform))),w.specularIntensity.value=_.specularIntensity,w.specularColor.value.copy(_.specularColor),_.specularColorMap&&(w.specularColorMap.value=_.specularColorMap,t(_.specularColorMap,w.specularColorMapTransform)),_.specularIntensityMap&&(w.specularIntensityMap.value=_.specularIntensityMap,t(_.specularIntensityMap,w.specularIntensityMapTransform))}function b(w,_){_.matcap&&(w.matcap.value=_.matcap)}function x(w,_){const A=e.get(_).light;w.referencePosition.value.setFromMatrixPosition(A.matrixWorld),w.nearDistance.value=A.shadow.camera.near,w.farDistance.value=A.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function Lue(n,e,t,i){let r={},s={},o=[];const a=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function l(A,T){const E=T.program;i.uniformBlockBinding(A,E)}function c(A,T){let E=r[A.id];E===void 0&&(b(A),E=f(A),r[A.id]=E,A.addEventListener("dispose",w));const C=T.program;i.updateUBOMapping(A,C);const R=e.render.frame;s[A.id]!==R&&(m(A),s[A.id]=R)}function f(A){const T=d();A.__bindingPointIndex=T;const E=n.createBuffer(),C=A.__size,R=A.usage;return n.bindBuffer(n.UNIFORM_BUFFER,E),n.bufferData(n.UNIFORM_BUFFER,C,R),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,T,E),E}function d(){for(let A=0;A<a;A++)if(o.indexOf(A)===-1)return o.push(A),A;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function m(A){const T=r[A.id],E=A.uniforms,C=A.__cache;n.bindBuffer(n.UNIFORM_BUFFER,T);for(let R=0,O=E.length;R<O;R++){const I=Array.isArray(E[R])?E[R]:[E[R]];for(let L=0,N=I.length;L<N;L++){const V=I[L];if(v(V,R,L,C)===!0){const B=V.__offset,k=Array.isArray(V.value)?V.value:[V.value];let j=0;for(let q=0;q<k.length;q++){const W=k[q],G=x(W);typeof W=="number"||typeof W=="boolean"?(V.__data[0]=W,n.bufferSubData(n.UNIFORM_BUFFER,B+j,V.__data)):W.isMatrix3?(V.__data[0]=W.elements[0],V.__data[1]=W.elements[1],V.__data[2]=W.elements[2],V.__data[3]=0,V.__data[4]=W.elements[3],V.__data[5]=W.elements[4],V.__data[6]=W.elements[5],V.__data[7]=0,V.__data[8]=W.elements[6],V.__data[9]=W.elements[7],V.__data[10]=W.elements[8],V.__data[11]=0):(W.toArray(V.__data,j),j+=G.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,B,V.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function v(A,T,E,C){const R=A.value,O=T+"_"+E;if(C[O]===void 0)return typeof R=="number"||typeof R=="boolean"?C[O]=R:C[O]=R.clone(),!0;{const I=C[O];if(typeof R=="number"||typeof R=="boolean"){if(I!==R)return C[O]=R,!0}else if(I.equals(R)===!1)return I.copy(R),!0}return!1}function b(A){const T=A.uniforms;let E=0;const C=16;for(let O=0,I=T.length;O<I;O++){const L=Array.isArray(T[O])?T[O]:[T[O]];for(let N=0,V=L.length;N<V;N++){const B=L[N],k=Array.isArray(B.value)?B.value:[B.value];for(let j=0,q=k.length;j<q;j++){const W=k[j],G=x(W),K=E%C,te=K%G.boundary,ie=K+te;E+=te,ie!==0&&C-ie<G.storage&&(E+=C-ie),B.__data=new Float32Array(G.storage/Float32Array.BYTES_PER_ELEMENT),B.__offset=E,E+=G.storage}}}const R=E%C;return R>0&&(E+=C-R),A.__size=E,A.__cache={},this}function x(A){const T={boundary:0,storage:0};return typeof A=="number"||typeof A=="boolean"?(T.boundary=4,T.storage=4):A.isVector2?(T.boundary=8,T.storage=8):A.isVector3||A.isColor?(T.boundary=16,T.storage=12):A.isVector4?(T.boundary=16,T.storage=16):A.isMatrix3?(T.boundary=48,T.storage=48):A.isMatrix4?(T.boundary=64,T.storage=64):A.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",A),T}function w(A){const T=A.target;T.removeEventListener("dispose",w);const E=o.indexOf(T.__bindingPointIndex);o.splice(E,1),n.deleteBuffer(r[T.id]),delete r[T.id],delete s[T.id]}function _(){for(const A in r)n.deleteBuffer(r[A]);o=[],r={},s={}}return{bind:l,update:c,dispose:_}}class tG{constructor(e={}){const{canvas:t=X8(),context:i=null,depth:r=!0,stencil:s=!1,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:f="default",failIfMajorPerformanceCaveat:d=!1,reversedDepthBuffer:m=!1}=e;this.isWebGLRenderer=!0;let v;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");v=i.getContextAttributes().alpha}else v=o;const b=new Uint32Array(4),x=new Int32Array(4);let w=null,_=null;const A=[],T=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=vu,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const E=this;let C=!1;this._outputColorSpace=Qs;let R=0,O=0,I=null,L=-1,N=null;const V=new Gn,B=new Gn;let k=null;const j=new yt(0);let q=0,W=t.width,G=t.height,K=1,te=null,ie=null;const F=new Gn(0,0,W,G),X=new Gn(0,0,W,G);let ee=!1;const le=new mm;let oe=!1,ue=!1;const he=new Kt,be=new de,Te=new Gn,Ee={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Ce=!1;function we(){return I===null?K:1}let ae=i;function ve(pe,Be){return t.getContext(pe,Be)}try{const pe={alpha:!0,depth:r,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:f,failIfMajorPerformanceCaveat:d};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${IM}`),t.addEventListener("webglcontextlost",at,!1),t.addEventListener("webglcontextrestored",_t,!1),t.addEventListener("webglcontextcreationerror",st,!1),ae===null){const Be="webgl2";if(ae=ve(Be,pe),ae===null)throw ve(Be)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(pe){throw console.error("THREE.WebGLRenderer: "+pe.message),pe}let xe,me,Ie,Ne,ke,Fe,Ae,tt,se,Z,ye,Y,J,re,ge,_e,Se,Ue,Me,Le,He,nt,Je,gt;function Re(){xe=new jle(ae),xe.init(),nt=new eG(ae,xe),me=new kle(ae,xe,e,nt),Ie=new Eue(ae,xe),me.reversedDepthBuffer&&m&&Ie.buffers.depth.setReversed(!0),Ne=new qle(ae),ke=new fue,Fe=new Mue(ae,xe,Ie,ke,me,nt,Ne),Ae=new Fle(E),tt=new Hle(E),se=new Jse(ae),Je=new Nle(ae,se),Z=new Wle(ae,se,Ne,Je),ye=new Yle(ae,Z,se,Ne),Me=new Xle(ae,me,Fe),_e=new zle(ke),Y=new uue(E,Ae,tt,xe,me,Je,_e),J=new Oue(E,ke),re=new due,ge=new bue(xe),Ue=new Ile(E,Ae,tt,Ie,ye,v,l),Se=new wue(E,ye,me),gt=new Lue(ae,Ne,me,Ie),Le=new Ule(ae,xe,Ne),He=new $le(ae,xe,Ne),Ne.programs=Y.programs,E.capabilities=me,E.extensions=xe,E.properties=ke,E.renderLists=re,E.shadowMap=Se,E.state=Ie,E.info=Ne}Re();const $e=new Rue(E,ae);this.xr=$e,this.getContext=function(){return ae},this.getContextAttributes=function(){return ae.getContextAttributes()},this.forceContextLoss=function(){const pe=xe.get("WEBGL_lose_context");pe&&pe.loseContext()},this.forceContextRestore=function(){const pe=xe.get("WEBGL_lose_context");pe&&pe.restoreContext()},this.getPixelRatio=function(){return K},this.setPixelRatio=function(pe){pe!==void 0&&(K=pe,this.setSize(W,G,!1))},this.getSize=function(pe){return pe.set(W,G)},this.setSize=function(pe,Be,Ye=!0){if($e.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}W=pe,G=Be,t.width=Math.floor(pe*K),t.height=Math.floor(Be*K),Ye===!0&&(t.style.width=pe+"px",t.style.height=Be+"px"),this.setViewport(0,0,pe,Be)},this.getDrawingBufferSize=function(pe){return pe.set(W*K,G*K).floor()},this.setDrawingBufferSize=function(pe,Be,Ye){W=pe,G=Be,K=Ye,t.width=Math.floor(pe*Ye),t.height=Math.floor(Be*Ye),this.setViewport(0,0,pe,Be)},this.getCurrentViewport=function(pe){return pe.copy(V)},this.getViewport=function(pe){return pe.copy(F)},this.setViewport=function(pe,Be,Ye,Ke){pe.isVector4?F.set(pe.x,pe.y,pe.z,pe.w):F.set(pe,Be,Ye,Ke),Ie.viewport(V.copy(F).multiplyScalar(K).round())},this.getScissor=function(pe){return pe.copy(X)},this.setScissor=function(pe,Be,Ye,Ke){pe.isVector4?X.set(pe.x,pe.y,pe.z,pe.w):X.set(pe,Be,Ye,Ke),Ie.scissor(B.copy(X).multiplyScalar(K).round())},this.getScissorTest=function(){return ee},this.setScissorTest=function(pe){Ie.setScissorTest(ee=pe)},this.setOpaqueSort=function(pe){te=pe},this.setTransparentSort=function(pe){ie=pe},this.getClearColor=function(pe){return pe.copy(Ue.getClearColor())},this.setClearColor=function(){Ue.setClearColor(...arguments)},this.getClearAlpha=function(){return Ue.getClearAlpha()},this.setClearAlpha=function(){Ue.setClearAlpha(...arguments)},this.clear=function(pe=!0,Be=!0,Ye=!0){let Ke=0;if(pe){let De=!1;if(I!==null){const lt=I.texture.format;De=lt===GM||lt===VM||lt===ex}if(De){const lt=I.texture.type,xt=lt===Tl||lt===Wf||lt===D0||lt===O0||lt===zM||lt===FM,Ct=Ue.getClearColor(),Et=Ue.getClearAlpha(),Pt=Ct.r,It=Ct.g,Ut=Ct.b;xt?(b[0]=Pt,b[1]=It,b[2]=Ut,b[3]=Et,ae.clearBufferuiv(ae.COLOR,0,b)):(x[0]=Pt,x[1]=It,x[2]=Ut,x[3]=Et,ae.clearBufferiv(ae.COLOR,0,x))}else Ke|=ae.COLOR_BUFFER_BIT}Be&&(Ke|=ae.DEPTH_BUFFER_BIT),Ye&&(Ke|=ae.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),ae.clear(Ke)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",at,!1),t.removeEventListener("webglcontextrestored",_t,!1),t.removeEventListener("webglcontextcreationerror",st,!1),Ue.dispose(),re.dispose(),ge.dispose(),ke.dispose(),Ae.dispose(),tt.dispose(),ye.dispose(),Je.dispose(),gt.dispose(),Y.dispose(),$e.dispose(),$e.removeEventListener("sessionstart",qn),$e.removeEventListener("sessionend",ri),Si.stop()};function at(pe){pe.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),C=!0}function _t(){console.log("THREE.WebGLRenderer: Context Restored."),C=!1;const pe=Ne.autoReset,Be=Se.enabled,Ye=Se.autoUpdate,Ke=Se.needsUpdate,De=Se.type;Re(),Ne.autoReset=pe,Se.enabled=Be,Se.autoUpdate=Ye,Se.needsUpdate=Ke,Se.type=De}function st(pe){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",pe.statusMessage)}function qe(pe){const Be=pe.target;Be.removeEventListener("dispose",qe),vt(Be)}function vt(pe){Rt(pe),ke.remove(pe)}function Rt(pe){const Be=ke.get(pe).programs;Be!==void 0&&(Be.forEach(function(Ye){Y.releaseProgram(Ye)}),pe.isShaderMaterial&&Y.releaseShaderCache(pe))}this.renderBufferDirect=function(pe,Be,Ye,Ke,De,lt){Be===null&&(Be=Ee);const xt=De.isMesh&&De.matrixWorld.determinant()<0,Ct=Ps(pe,Be,Ye,Ke,De);Ie.setMaterial(Ke,xt);let Et=Ye.index,Pt=1;if(Ke.wireframe===!0){if(Et=Z.getWireframeAttribute(Ye),Et===void 0)return;Pt=2}const It=Ye.drawRange,Ut=Ye.attributes.position;let Nt=It.start*Pt,In=(It.start+It.count)*Pt;lt!==null&&(Nt=Math.max(Nt,lt.start*Pt),In=Math.min(In,(lt.start+lt.count)*Pt)),Et!==null?(Nt=Math.max(Nt,0),In=Math.min(In,Et.count)):Ut!=null&&(Nt=Math.max(Nt,0),In=Math.min(In,Ut.count));const kn=In-Nt;if(kn<0||kn===1/0)return;Je.setup(De,Ke,Ct,Ye,Et);let zn,sn=Le;if(Et!==null&&(zn=se.get(Et),sn=He,sn.setIndex(zn)),De.isMesh)Ke.wireframe===!0?(Ie.setLineWidth(Ke.wireframeLinewidth*we()),sn.setMode(ae.LINES)):sn.setMode(ae.TRIANGLES);else if(De.isLine){let Lt=Ke.linewidth;Lt===void 0&&(Lt=1),Ie.setLineWidth(Lt*we()),De.isLineSegments?sn.setMode(ae.LINES):De.isLineLoop?sn.setMode(ae.LINE_LOOP):sn.setMode(ae.LINE_STRIP)}else De.isPoints?sn.setMode(ae.POINTS):De.isSprite&&sn.setMode(ae.TRIANGLES);if(De.isBatchedMesh)if(De._multiDrawInstances!==null)S_("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),sn.renderMultiDrawInstances(De._multiDrawStarts,De._multiDrawCounts,De._multiDrawCount,De._multiDrawInstances);else if(xe.get("WEBGL_multi_draw"))sn.renderMultiDraw(De._multiDrawStarts,De._multiDrawCounts,De._multiDrawCount);else{const Lt=De._multiDrawStarts,Fn=De._multiDrawCounts,mn=De._multiDrawCount,gi=Et?se.get(Et).bytesPerElement:1,di=ke.get(Ke).currentProgram.getUniforms();for(let on=0;on<mn;on++)di.setValue(ae,"_gl_DrawID",on),sn.render(Lt[on]/gi,Fn[on])}else if(De.isInstancedMesh)sn.renderInstances(Nt,kn,De.count);else if(Ye.isInstancedBufferGeometry){const Lt=Ye._maxInstanceCount!==void 0?Ye._maxInstanceCount:1/0,Fn=Math.min(Ye.instanceCount,Lt);sn.renderInstances(Nt,kn,Fn)}else sn.render(Nt,kn)};function Tt(pe,Be,Ye){pe.transparent===!0&&pe.side===yr&&pe.forceSinglePass===!1?(pe.side=Po,pe.needsUpdate=!0,ei(pe,Be,Ye),pe.side=Hf,pe.needsUpdate=!0,ei(pe,Be,Ye),pe.side=yr):ei(pe,Be,Ye)}this.compile=function(pe,Be,Ye=null){Ye===null&&(Ye=pe),_=ge.get(Ye),_.init(Be),T.push(_),Ye.traverseVisible(function(De){De.isLight&&De.layers.test(Be.layers)&&(_.pushLight(De),De.castShadow&&_.pushShadow(De))}),pe!==Ye&&pe.traverseVisible(function(De){De.isLight&&De.layers.test(Be.layers)&&(_.pushLight(De),De.castShadow&&_.pushShadow(De))}),_.setupLights();const Ke=new Set;return pe.traverse(function(De){if(!(De.isMesh||De.isPoints||De.isLine||De.isSprite))return;const lt=De.material;if(lt)if(Array.isArray(lt))for(let xt=0;xt<lt.length;xt++){const Ct=lt[xt];Tt(Ct,Ye,De),Ke.add(Ct)}else Tt(lt,Ye,De),Ke.add(lt)}),_=T.pop(),Ke},this.compileAsync=function(pe,Be,Ye=null){const Ke=this.compile(pe,Be,Ye);return new Promise(De=>{function lt(){if(Ke.forEach(function(xt){ke.get(xt).currentProgram.isReady()&&Ke.delete(xt)}),Ke.size===0){De(pe);return}setTimeout(lt,10)}xe.get("KHR_parallel_shader_compile")!==null?lt():setTimeout(lt,10)})};let Bt=null;function $n(pe){Bt&&Bt(pe)}function qn(){Si.stop()}function ri(){Si.start()}const Si=new YV;Si.setAnimationLoop($n),typeof self<"u"&&Si.setContext(self),this.setAnimationLoop=function(pe){Bt=pe,$e.setAnimationLoop(pe),pe===null?Si.stop():Si.start()},$e.addEventListener("sessionstart",qn),$e.addEventListener("sessionend",ri),this.render=function(pe,Be){if(Be!==void 0&&Be.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(C===!0)return;if(pe.matrixWorldAutoUpdate===!0&&pe.updateMatrixWorld(),Be.parent===null&&Be.matrixWorldAutoUpdate===!0&&Be.updateMatrixWorld(),$e.enabled===!0&&$e.isPresenting===!0&&($e.cameraAutoUpdate===!0&&$e.updateCamera(Be),Be=$e.getCamera()),pe.isScene===!0&&pe.onBeforeRender(E,pe,Be,I),_=ge.get(pe,T.length),_.init(Be),T.push(_),he.multiplyMatrices(Be.projectionMatrix,Be.matrixWorldInverse),le.setFromProjectionMatrix(he,Oa,Be.reversedDepth),ue=this.localClippingEnabled,oe=_e.init(this.clippingPlanes,ue),w=re.get(pe,A.length),w.init(),A.push(w),$e.enabled===!0&&$e.isPresenting===!0){const lt=E.xr.getDepthSensingMesh();lt!==null&&rs(lt,Be,-1/0,E.sortObjects)}rs(pe,Be,0,E.sortObjects),w.finish(),E.sortObjects===!0&&w.sort(te,ie),Ce=$e.enabled===!1||$e.isPresenting===!1||$e.hasDepthSensing()===!1,Ce&&Ue.addToRenderList(w,pe),this.info.render.frame++,oe===!0&&_e.beginShadows();const Ye=_.state.shadowsArray;Se.render(Ye,pe,Be),oe===!0&&_e.endShadows(),this.info.autoReset===!0&&this.info.reset();const Ke=w.opaque,De=w.transmissive;if(_.setupLights(),Be.isArrayCamera){const lt=Be.cameras;if(De.length>0)for(let xt=0,Ct=lt.length;xt<Ct;xt++){const Et=lt[xt];Ar(Ke,De,pe,Et)}Ce&&Ue.render(pe);for(let xt=0,Ct=lt.length;xt<Ct;xt++){const Et=lt[xt];_r(w,pe,Et,Et.viewport)}}else De.length>0&&Ar(Ke,De,pe,Be),Ce&&Ue.render(pe),_r(w,pe,Be);I!==null&&O===0&&(Fe.updateMultisampleRenderTarget(I),Fe.updateRenderTargetMipmap(I)),pe.isScene===!0&&pe.onAfterRender(E,pe,Be),Je.resetDefaultState(),L=-1,N=null,T.pop(),T.length>0?(_=T[T.length-1],oe===!0&&_e.setGlobalState(E.clippingPlanes,_.state.camera)):_=null,A.pop(),A.length>0?w=A[A.length-1]:w=null};function rs(pe,Be,Ye,Ke){if(pe.visible===!1)return;if(pe.layers.test(Be.layers)){if(pe.isGroup)Ye=pe.renderOrder;else if(pe.isLOD)pe.autoUpdate===!0&&pe.update(Be);else if(pe.isLight)_.pushLight(pe),pe.castShadow&&_.pushShadow(pe);else if(pe.isSprite){if(!pe.frustumCulled||le.intersectsSprite(pe)){Ke&&Te.setFromMatrixPosition(pe.matrixWorld).applyMatrix4(he);const xt=ye.update(pe),Ct=pe.material;Ct.visible&&w.push(pe,xt,Ct,Ye,Te.z,null)}}else if((pe.isMesh||pe.isLine||pe.isPoints)&&(!pe.frustumCulled||le.intersectsObject(pe))){const xt=ye.update(pe),Ct=pe.material;if(Ke&&(pe.boundingSphere!==void 0?(pe.boundingSphere===null&&pe.computeBoundingSphere(),Te.copy(pe.boundingSphere.center)):(xt.boundingSphere===null&&xt.computeBoundingSphere(),Te.copy(xt.boundingSphere.center)),Te.applyMatrix4(pe.matrixWorld).applyMatrix4(he)),Array.isArray(Ct)){const Et=xt.groups;for(let Pt=0,It=Et.length;Pt<It;Pt++){const Ut=Et[Pt],Nt=Ct[Ut.materialIndex];Nt&&Nt.visible&&w.push(pe,xt,Nt,Ye,Te.z,Ut)}}else Ct.visible&&w.push(pe,xt,Ct,Ye,Te.z,null)}}const lt=pe.children;for(let xt=0,Ct=lt.length;xt<Ct;xt++)rs(lt[xt],Be,Ye,Ke)}function _r(pe,Be,Ye,Ke){const De=pe.opaque,lt=pe.transmissive,xt=pe.transparent;_.setupLightsView(Ye),oe===!0&&_e.setGlobalState(E.clippingPlanes,Ye),Ke&&Ie.viewport(V.copy(Ke)),De.length>0&&Gr(De,Be,Ye),lt.length>0&&Gr(lt,Be,Ye),xt.length>0&&Gr(xt,Be,Ye),Ie.buffers.depth.setTest(!0),Ie.buffers.depth.setMask(!0),Ie.buffers.color.setMask(!0),Ie.setPolygonOffset(!1)}function Ar(pe,Be,Ye,Ke){if((Ye.isScene===!0?Ye.overrideMaterial:null)!==null)return;_.state.transmissionRenderTarget[Ke.id]===void 0&&(_.state.transmissionRenderTarget[Ke.id]=new wu(1,1,{generateMipmaps:!0,type:xe.has("EXT_color_buffer_half_float")||xe.has("EXT_color_buffer_float")?ov:Tl,minFilter:hu,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Wn.workingColorSpace}));const lt=_.state.transmissionRenderTarget[Ke.id],xt=Ke.viewport||V;lt.setSize(xt.z*E.transmissionResolutionScale,xt.w*E.transmissionResolutionScale);const Ct=E.getRenderTarget(),Et=E.getActiveCubeFace(),Pt=E.getActiveMipmapLevel();E.setRenderTarget(lt),E.getClearColor(j),q=E.getClearAlpha(),q<1&&E.setClearColor(16777215,.5),E.clear(),Ce&&Ue.render(Ye);const It=E.toneMapping;E.toneMapping=vu;const Ut=Ke.viewport;if(Ke.viewport!==void 0&&(Ke.viewport=void 0),_.setupLightsView(Ke),oe===!0&&_e.setGlobalState(E.clippingPlanes,Ke),Gr(pe,Ye,Ke),Fe.updateMultisampleRenderTarget(lt),Fe.updateRenderTargetMipmap(lt),xe.has("WEBGL_multisampled_render_to_texture")===!1){let Nt=!1;for(let In=0,kn=Be.length;In<kn;In++){const zn=Be[In],sn=zn.object,Lt=zn.geometry,Fn=zn.material,mn=zn.group;if(Fn.side===yr&&sn.layers.test(Ke.layers)){const gi=Fn.side;Fn.side=Po,Fn.needsUpdate=!0,Yi(sn,Ye,Ke,Lt,Fn,mn),Fn.side=gi,Fn.needsUpdate=!0,Nt=!0}}Nt===!0&&(Fe.updateMultisampleRenderTarget(lt),Fe.updateRenderTargetMipmap(lt))}E.setRenderTarget(Ct,Et,Pt),E.setClearColor(j,q),Ut!==void 0&&(Ke.viewport=Ut),E.toneMapping=It}function Gr(pe,Be,Ye){const Ke=Be.isScene===!0?Be.overrideMaterial:null;for(let De=0,lt=pe.length;De<lt;De++){const xt=pe[De],Ct=xt.object,Et=xt.geometry,Pt=xt.group;let It=xt.material;It.allowOverride===!0&&Ke!==null&&(It=Ke),Ct.layers.test(Ye.layers)&&Yi(Ct,Be,Ye,Et,It,Pt)}}function Yi(pe,Be,Ye,Ke,De,lt){pe.onBeforeRender(E,Be,Ye,Ke,De,lt),pe.modelViewMatrix.multiplyMatrices(Ye.matrixWorldInverse,pe.matrixWorld),pe.normalMatrix.getNormalMatrix(pe.modelViewMatrix),De.onBeforeRender(E,Be,Ye,Ke,pe,lt),De.transparent===!0&&De.side===yr&&De.forceSinglePass===!1?(De.side=Po,De.needsUpdate=!0,E.renderBufferDirect(Ye,Be,Ke,De,pe,lt),De.side=Hf,De.needsUpdate=!0,E.renderBufferDirect(Ye,Be,Ke,De,pe,lt),De.side=yr):E.renderBufferDirect(Ye,Be,Ke,De,pe,lt),pe.onAfterRender(E,Be,Ye,Ke,De,lt)}function ei(pe,Be,Ye){Be.isScene!==!0&&(Be=Ee);const Ke=ke.get(pe),De=_.state.lights,lt=_.state.shadowsArray,xt=De.state.version,Ct=Y.getParameters(pe,De.state,lt,Be,Ye),Et=Y.getProgramCacheKey(Ct);let Pt=Ke.programs;Ke.environment=pe.isMeshStandardMaterial?Be.environment:null,Ke.fog=Be.fog,Ke.envMap=(pe.isMeshStandardMaterial?tt:Ae).get(pe.envMap||Ke.environment),Ke.envMapRotation=Ke.environment!==null&&pe.envMap===null?Be.environmentRotation:pe.envMapRotation,Pt===void 0&&(pe.addEventListener("dispose",qe),Pt=new Map,Ke.programs=Pt);let It=Pt.get(Et);if(It!==void 0){if(Ke.currentProgram===It&&Ke.lightsStateVersion===xt)return Hi(pe,Ct),It}else Ct.uniforms=Y.getUniforms(pe),pe.onBeforeCompile(Ct,E),It=Y.acquireProgram(Ct,Et),Pt.set(Et,It),Ke.uniforms=Ct.uniforms;const Ut=Ke.uniforms;return(!pe.isShaderMaterial&&!pe.isRawShaderMaterial||pe.clipping===!0)&&(Ut.clippingPlanes=_e.uniform),Hi(pe,Ct),Ke.needsLights=oo(pe),Ke.lightsStateVersion=xt,Ke.needsLights&&(Ut.ambientLightColor.value=De.state.ambient,Ut.lightProbe.value=De.state.probe,Ut.directionalLights.value=De.state.directional,Ut.directionalLightShadows.value=De.state.directionalShadow,Ut.spotLights.value=De.state.spot,Ut.spotLightShadows.value=De.state.spotShadow,Ut.rectAreaLights.value=De.state.rectArea,Ut.ltc_1.value=De.state.rectAreaLTC1,Ut.ltc_2.value=De.state.rectAreaLTC2,Ut.pointLights.value=De.state.point,Ut.pointLightShadows.value=De.state.pointShadow,Ut.hemisphereLights.value=De.state.hemi,Ut.directionalShadowMap.value=De.state.directionalShadowMap,Ut.directionalShadowMatrix.value=De.state.directionalShadowMatrix,Ut.spotShadowMap.value=De.state.spotShadowMap,Ut.spotLightMatrix.value=De.state.spotLightMatrix,Ut.spotLightMap.value=De.state.spotLightMap,Ut.pointShadowMap.value=De.state.pointShadowMap,Ut.pointShadowMatrix.value=De.state.pointShadowMatrix),Ke.currentProgram=It,Ke.uniformsList=null,It}function Zn(pe){if(pe.uniformsList===null){const Be=pe.currentProgram.getUniforms();pe.uniformsList=OS.seqWithValue(Be.seq,pe.uniforms)}return pe.uniformsList}function Hi(pe,Be){const Ye=ke.get(pe);Ye.outputColorSpace=Be.outputColorSpace,Ye.batching=Be.batching,Ye.batchingColor=Be.batchingColor,Ye.instancing=Be.instancing,Ye.instancingColor=Be.instancingColor,Ye.instancingMorph=Be.instancingMorph,Ye.skinning=Be.skinning,Ye.morphTargets=Be.morphTargets,Ye.morphNormals=Be.morphNormals,Ye.morphColors=Be.morphColors,Ye.morphTargetsCount=Be.morphTargetsCount,Ye.numClippingPlanes=Be.numClippingPlanes,Ye.numIntersection=Be.numClipIntersection,Ye.vertexAlphas=Be.vertexAlphas,Ye.vertexTangents=Be.vertexTangents,Ye.toneMapping=Be.toneMapping}function Ps(pe,Be,Ye,Ke,De){Be.isScene!==!0&&(Be=Ee),Fe.resetTextureUnits();const lt=Be.fog,xt=Ke.isMeshStandardMaterial?Be.environment:null,Ct=I===null?E.outputColorSpace:I.isXRRenderTarget===!0?I.texture.colorSpace:gd,Et=(Ke.isMeshStandardMaterial?tt:Ae).get(Ke.envMap||xt),Pt=Ke.vertexColors===!0&&!!Ye.attributes.color&&Ye.attributes.color.itemSize===4,It=!!Ye.attributes.tangent&&(!!Ke.normalMap||Ke.anisotropy>0),Ut=!!Ye.morphAttributes.position,Nt=!!Ye.morphAttributes.normal,In=!!Ye.morphAttributes.color;let kn=vu;Ke.toneMapped&&(I===null||I.isXRRenderTarget===!0)&&(kn=E.toneMapping);const zn=Ye.morphAttributes.position||Ye.morphAttributes.normal||Ye.morphAttributes.color,sn=zn!==void 0?zn.length:0,Lt=ke.get(Ke),Fn=_.state.lights;if(oe===!0&&(ue===!0||pe!==N)){const Hn=pe===N&&Ke.id===L;_e.setState(Ke,pe,Hn)}let mn=!1;Ke.version===Lt.__version?(Lt.needsLights&&Lt.lightsStateVersion!==Fn.state.version||Lt.outputColorSpace!==Ct||De.isBatchedMesh&&Lt.batching===!1||!De.isBatchedMesh&&Lt.batching===!0||De.isBatchedMesh&&Lt.batchingColor===!0&&De.colorTexture===null||De.isBatchedMesh&&Lt.batchingColor===!1&&De.colorTexture!==null||De.isInstancedMesh&&Lt.instancing===!1||!De.isInstancedMesh&&Lt.instancing===!0||De.isSkinnedMesh&&Lt.skinning===!1||!De.isSkinnedMesh&&Lt.skinning===!0||De.isInstancedMesh&&Lt.instancingColor===!0&&De.instanceColor===null||De.isInstancedMesh&&Lt.instancingColor===!1&&De.instanceColor!==null||De.isInstancedMesh&&Lt.instancingMorph===!0&&De.morphTexture===null||De.isInstancedMesh&&Lt.instancingMorph===!1&&De.morphTexture!==null||Lt.envMap!==Et||Ke.fog===!0&&Lt.fog!==lt||Lt.numClippingPlanes!==void 0&&(Lt.numClippingPlanes!==_e.numPlanes||Lt.numIntersection!==_e.numIntersection)||Lt.vertexAlphas!==Pt||Lt.vertexTangents!==It||Lt.morphTargets!==Ut||Lt.morphNormals!==Nt||Lt.morphColors!==In||Lt.toneMapping!==kn||Lt.morphTargetsCount!==sn)&&(mn=!0):(mn=!0,Lt.__version=Ke.version);let gi=Lt.currentProgram;mn===!0&&(gi=ei(Ke,Be,De));let di=!1,on=!1,Ns=!1;const $t=gi.getUniforms(),Zi=Lt.uniforms;if(Ie.useProgram(gi.program)&&(di=!0,on=!0,Ns=!0),Ke.id!==L&&(L=Ke.id,on=!0),di||N!==pe){Ie.buffers.depth.getReversed()&&pe.reversedDepth!==!0&&(pe._reversedDepth=!0,pe.updateProjectionMatrix()),$t.setValue(ae,"projectionMatrix",pe.projectionMatrix),$t.setValue(ae,"viewMatrix",pe.matrixWorldInverse);const pi=$t.map.cameraPosition;pi!==void 0&&pi.setValue(ae,be.setFromMatrixPosition(pe.matrixWorld)),me.logarithmicDepthBuffer&&$t.setValue(ae,"logDepthBufFC",2/(Math.log(pe.far+1)/Math.LN2)),(Ke.isMeshPhongMaterial||Ke.isMeshToonMaterial||Ke.isMeshLambertMaterial||Ke.isMeshBasicMaterial||Ke.isMeshStandardMaterial||Ke.isShaderMaterial)&&$t.setValue(ae,"isOrthographic",pe.isOrthographicCamera===!0),N!==pe&&(N=pe,on=!0,Ns=!0)}if(De.isSkinnedMesh){$t.setOptional(ae,De,"bindMatrix"),$t.setOptional(ae,De,"bindMatrixInverse");const Hn=De.skeleton;Hn&&(Hn.boneTexture===null&&Hn.computeBoneTexture(),$t.setValue(ae,"boneTexture",Hn.boneTexture,Fe))}De.isBatchedMesh&&($t.setOptional(ae,De,"batchingTexture"),$t.setValue(ae,"batchingTexture",De._matricesTexture,Fe),$t.setOptional(ae,De,"batchingIdTexture"),$t.setValue(ae,"batchingIdTexture",De._indirectTexture,Fe),$t.setOptional(ae,De,"batchingColorTexture"),De._colorsTexture!==null&&$t.setValue(ae,"batchingColorTexture",De._colorsTexture,Fe));const ji=Ye.morphAttributes;if((ji.position!==void 0||ji.normal!==void 0||ji.color!==void 0)&&Me.update(De,Ye,gi),(on||Lt.receiveShadow!==De.receiveShadow)&&(Lt.receiveShadow=De.receiveShadow,$t.setValue(ae,"receiveShadow",De.receiveShadow)),Ke.isMeshGouraudMaterial&&Ke.envMap!==null&&(Zi.envMap.value=Et,Zi.flipEnvMap.value=Et.isCubeTexture&&Et.isRenderTargetTexture===!1?-1:1),Ke.isMeshStandardMaterial&&Ke.envMap===null&&Be.environment!==null&&(Zi.envMapIntensity.value=Be.environmentIntensity),on&&($t.setValue(ae,"toneMappingExposure",E.toneMappingExposure),Lt.needsLights&&Is(Zi,Ns),lt&&Ke.fog===!0&&J.refreshFogUniforms(Zi,lt),J.refreshMaterialUniforms(Zi,Ke,K,G,_.state.transmissionRenderTarget[pe.id]),OS.upload(ae,Zn(Lt),Zi,Fe)),Ke.isShaderMaterial&&Ke.uniformsNeedUpdate===!0&&(OS.upload(ae,Zn(Lt),Zi,Fe),Ke.uniformsNeedUpdate=!1),Ke.isSpriteMaterial&&$t.setValue(ae,"center",De.center),$t.setValue(ae,"modelViewMatrix",De.modelViewMatrix),$t.setValue(ae,"normalMatrix",De.normalMatrix),$t.setValue(ae,"modelMatrix",De.matrixWorld),Ke.isShaderMaterial||Ke.isRawShaderMaterial){const Hn=Ke.uniformsGroups;for(let pi=0,lo=Hn.length;pi<lo;pi++){const Hr=Hn[pi];gt.update(Hr,gi),gt.bind(Hr,gi)}}return gi}function Is(pe,Be){pe.ambientLightColor.needsUpdate=Be,pe.lightProbe.needsUpdate=Be,pe.directionalLights.needsUpdate=Be,pe.directionalLightShadows.needsUpdate=Be,pe.pointLights.needsUpdate=Be,pe.pointLightShadows.needsUpdate=Be,pe.spotLights.needsUpdate=Be,pe.spotLightShadows.needsUpdate=Be,pe.rectAreaLights.needsUpdate=Be,pe.hemisphereLights.needsUpdate=Be}function oo(pe){return pe.isMeshLambertMaterial||pe.isMeshToonMaterial||pe.isMeshPhongMaterial||pe.isMeshStandardMaterial||pe.isShadowMaterial||pe.isShaderMaterial&&pe.lights===!0}this.getActiveCubeFace=function(){return R},this.getActiveMipmapLevel=function(){return O},this.getRenderTarget=function(){return I},this.setRenderTargetTextures=function(pe,Be,Ye){const Ke=ke.get(pe);Ke.__autoAllocateDepthBuffer=pe.resolveDepthBuffer===!1,Ke.__autoAllocateDepthBuffer===!1&&(Ke.__useRenderToTexture=!1),ke.get(pe.texture).__webglTexture=Be,ke.get(pe.depthTexture).__webglTexture=Ke.__autoAllocateDepthBuffer?void 0:Ye,Ke.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(pe,Be){const Ye=ke.get(pe);Ye.__webglFramebuffer=Be,Ye.__useDefaultFramebuffer=Be===void 0};const ko=ae.createFramebuffer();this.setRenderTarget=function(pe,Be=0,Ye=0){I=pe,R=Be,O=Ye;let Ke=!0,De=null,lt=!1,xt=!1;if(pe){const Et=ke.get(pe);if(Et.__useDefaultFramebuffer!==void 0)Ie.bindFramebuffer(ae.FRAMEBUFFER,null),Ke=!1;else if(Et.__webglFramebuffer===void 0)Fe.setupRenderTarget(pe);else if(Et.__hasExternalTextures)Fe.rebindTextures(pe,ke.get(pe.texture).__webglTexture,ke.get(pe.depthTexture).__webglTexture);else if(pe.depthBuffer){const Ut=pe.depthTexture;if(Et.__boundDepthTexture!==Ut){if(Ut!==null&&ke.has(Ut)&&(pe.width!==Ut.image.width||pe.height!==Ut.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");Fe.setupDepthRenderbuffer(pe)}}const Pt=pe.texture;(Pt.isData3DTexture||Pt.isDataArrayTexture||Pt.isCompressedArrayTexture)&&(xt=!0);const It=ke.get(pe).__webglFramebuffer;pe.isWebGLCubeRenderTarget?(Array.isArray(It[Be])?De=It[Be][Ye]:De=It[Be],lt=!0):pe.samples>0&&Fe.useMultisampledRTT(pe)===!1?De=ke.get(pe).__webglMultisampledFramebuffer:Array.isArray(It)?De=It[Ye]:De=It,V.copy(pe.viewport),B.copy(pe.scissor),k=pe.scissorTest}else V.copy(F).multiplyScalar(K).floor(),B.copy(X).multiplyScalar(K).floor(),k=ee;if(Ye!==0&&(De=ko),Ie.bindFramebuffer(ae.FRAMEBUFFER,De)&&Ke&&Ie.drawBuffers(pe,De),Ie.viewport(V),Ie.scissor(B),Ie.setScissorTest(k),lt){const Et=ke.get(pe.texture);ae.framebufferTexture2D(ae.FRAMEBUFFER,ae.COLOR_ATTACHMENT0,ae.TEXTURE_CUBE_MAP_POSITIVE_X+Be,Et.__webglTexture,Ye)}else if(xt){const Et=Be;for(let Pt=0;Pt<pe.textures.length;Pt++){const It=ke.get(pe.textures[Pt]);ae.framebufferTextureLayer(ae.FRAMEBUFFER,ae.COLOR_ATTACHMENT0+Pt,It.__webglTexture,Ye,Et)}}else if(pe!==null&&Ye!==0){const Et=ke.get(pe.texture);ae.framebufferTexture2D(ae.FRAMEBUFFER,ae.COLOR_ATTACHMENT0,ae.TEXTURE_2D,Et.__webglTexture,Ye)}L=-1},this.readRenderTargetPixels=function(pe,Be,Ye,Ke,De,lt,xt,Ct=0){if(!(pe&&pe.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Et=ke.get(pe).__webglFramebuffer;if(pe.isWebGLCubeRenderTarget&&xt!==void 0&&(Et=Et[xt]),Et){Ie.bindFramebuffer(ae.FRAMEBUFFER,Et);try{const Pt=pe.textures[Ct],It=Pt.format,Ut=Pt.type;if(!me.textureFormatReadable(It)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!me.textureTypeReadable(Ut)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Be>=0&&Be<=pe.width-Ke&&Ye>=0&&Ye<=pe.height-De&&(pe.textures.length>1&&ae.readBuffer(ae.COLOR_ATTACHMENT0+Ct),ae.readPixels(Be,Ye,Ke,De,nt.convert(It),nt.convert(Ut),lt))}finally{const Pt=I!==null?ke.get(I).__webglFramebuffer:null;Ie.bindFramebuffer(ae.FRAMEBUFFER,Pt)}}},this.readRenderTargetPixelsAsync=async function(pe,Be,Ye,Ke,De,lt,xt,Ct=0){if(!(pe&&pe.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Et=ke.get(pe).__webglFramebuffer;if(pe.isWebGLCubeRenderTarget&&xt!==void 0&&(Et=Et[xt]),Et)if(Be>=0&&Be<=pe.width-Ke&&Ye>=0&&Ye<=pe.height-De){Ie.bindFramebuffer(ae.FRAMEBUFFER,Et);const Pt=pe.textures[Ct],It=Pt.format,Ut=Pt.type;if(!me.textureFormatReadable(It))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!me.textureTypeReadable(Ut))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const Nt=ae.createBuffer();ae.bindBuffer(ae.PIXEL_PACK_BUFFER,Nt),ae.bufferData(ae.PIXEL_PACK_BUFFER,lt.byteLength,ae.STREAM_READ),pe.textures.length>1&&ae.readBuffer(ae.COLOR_ATTACHMENT0+Ct),ae.readPixels(Be,Ye,Ke,De,nt.convert(It),nt.convert(Ut),0);const In=I!==null?ke.get(I).__webglFramebuffer:null;Ie.bindFramebuffer(ae.FRAMEBUFFER,In);const kn=ae.fenceSync(ae.SYNC_GPU_COMMANDS_COMPLETE,0);return ae.flush(),await yie(ae,kn,4),ae.bindBuffer(ae.PIXEL_PACK_BUFFER,Nt),ae.getBufferSubData(ae.PIXEL_PACK_BUFFER,0,lt),ae.deleteBuffer(Nt),ae.deleteSync(kn),lt}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(pe,Be=null,Ye=0){const Ke=Math.pow(2,-Ye),De=Math.floor(pe.image.width*Ke),lt=Math.floor(pe.image.height*Ke),xt=Be!==null?Be.x:0,Ct=Be!==null?Be.y:0;Fe.setTexture2D(pe,0),ae.copyTexSubImage2D(ae.TEXTURE_2D,Ye,0,0,xt,Ct,De,lt),Ie.unbindTexture()};const Na=ae.createFramebuffer(),ao=ae.createFramebuffer();this.copyTextureToTexture=function(pe,Be,Ye=null,Ke=null,De=0,lt=null){lt===null&&(De!==0?(S_("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),lt=De,De=0):lt=0);let xt,Ct,Et,Pt,It,Ut,Nt,In,kn;const zn=pe.isCompressedTexture?pe.mipmaps[lt]:pe.image;if(Ye!==null)xt=Ye.max.x-Ye.min.x,Ct=Ye.max.y-Ye.min.y,Et=Ye.isBox3?Ye.max.z-Ye.min.z:1,Pt=Ye.min.x,It=Ye.min.y,Ut=Ye.isBox3?Ye.min.z:0;else{const ji=Math.pow(2,-De);xt=Math.floor(zn.width*ji),Ct=Math.floor(zn.height*ji),pe.isDataArrayTexture?Et=zn.depth:pe.isData3DTexture?Et=Math.floor(zn.depth*ji):Et=1,Pt=0,It=0,Ut=0}Ke!==null?(Nt=Ke.x,In=Ke.y,kn=Ke.z):(Nt=0,In=0,kn=0);const sn=nt.convert(Be.format),Lt=nt.convert(Be.type);let Fn;Be.isData3DTexture?(Fe.setTexture3D(Be,0),Fn=ae.TEXTURE_3D):Be.isDataArrayTexture||Be.isCompressedArrayTexture?(Fe.setTexture2DArray(Be,0),Fn=ae.TEXTURE_2D_ARRAY):(Fe.setTexture2D(Be,0),Fn=ae.TEXTURE_2D),ae.pixelStorei(ae.UNPACK_FLIP_Y_WEBGL,Be.flipY),ae.pixelStorei(ae.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Be.premultiplyAlpha),ae.pixelStorei(ae.UNPACK_ALIGNMENT,Be.unpackAlignment);const mn=ae.getParameter(ae.UNPACK_ROW_LENGTH),gi=ae.getParameter(ae.UNPACK_IMAGE_HEIGHT),di=ae.getParameter(ae.UNPACK_SKIP_PIXELS),on=ae.getParameter(ae.UNPACK_SKIP_ROWS),Ns=ae.getParameter(ae.UNPACK_SKIP_IMAGES);ae.pixelStorei(ae.UNPACK_ROW_LENGTH,zn.width),ae.pixelStorei(ae.UNPACK_IMAGE_HEIGHT,zn.height),ae.pixelStorei(ae.UNPACK_SKIP_PIXELS,Pt),ae.pixelStorei(ae.UNPACK_SKIP_ROWS,It),ae.pixelStorei(ae.UNPACK_SKIP_IMAGES,Ut);const $t=pe.isDataArrayTexture||pe.isData3DTexture,Zi=Be.isDataArrayTexture||Be.isData3DTexture;if(pe.isDepthTexture){const ji=ke.get(pe),Hn=ke.get(Be),pi=ke.get(ji.__renderTarget),lo=ke.get(Hn.__renderTarget);Ie.bindFramebuffer(ae.READ_FRAMEBUFFER,pi.__webglFramebuffer),Ie.bindFramebuffer(ae.DRAW_FRAMEBUFFER,lo.__webglFramebuffer);for(let Hr=0;Hr<Et;Hr++)$t&&(ae.framebufferTextureLayer(ae.READ_FRAMEBUFFER,ae.COLOR_ATTACHMENT0,ke.get(pe).__webglTexture,De,Ut+Hr),ae.framebufferTextureLayer(ae.DRAW_FRAMEBUFFER,ae.COLOR_ATTACHMENT0,ke.get(Be).__webglTexture,lt,kn+Hr)),ae.blitFramebuffer(Pt,It,xt,Ct,Nt,In,xt,Ct,ae.DEPTH_BUFFER_BIT,ae.NEAREST);Ie.bindFramebuffer(ae.READ_FRAMEBUFFER,null),Ie.bindFramebuffer(ae.DRAW_FRAMEBUFFER,null)}else if(De!==0||pe.isRenderTargetTexture||ke.has(pe)){const ji=ke.get(pe),Hn=ke.get(Be);Ie.bindFramebuffer(ae.READ_FRAMEBUFFER,Na),Ie.bindFramebuffer(ae.DRAW_FRAMEBUFFER,ao);for(let pi=0;pi<Et;pi++)$t?ae.framebufferTextureLayer(ae.READ_FRAMEBUFFER,ae.COLOR_ATTACHMENT0,ji.__webglTexture,De,Ut+pi):ae.framebufferTexture2D(ae.READ_FRAMEBUFFER,ae.COLOR_ATTACHMENT0,ae.TEXTURE_2D,ji.__webglTexture,De),Zi?ae.framebufferTextureLayer(ae.DRAW_FRAMEBUFFER,ae.COLOR_ATTACHMENT0,Hn.__webglTexture,lt,kn+pi):ae.framebufferTexture2D(ae.DRAW_FRAMEBUFFER,ae.COLOR_ATTACHMENT0,ae.TEXTURE_2D,Hn.__webglTexture,lt),De!==0?ae.blitFramebuffer(Pt,It,xt,Ct,Nt,In,xt,Ct,ae.COLOR_BUFFER_BIT,ae.NEAREST):Zi?ae.copyTexSubImage3D(Fn,lt,Nt,In,kn+pi,Pt,It,xt,Ct):ae.copyTexSubImage2D(Fn,lt,Nt,In,Pt,It,xt,Ct);Ie.bindFramebuffer(ae.READ_FRAMEBUFFER,null),Ie.bindFramebuffer(ae.DRAW_FRAMEBUFFER,null)}else Zi?pe.isDataTexture||pe.isData3DTexture?ae.texSubImage3D(Fn,lt,Nt,In,kn,xt,Ct,Et,sn,Lt,zn.data):Be.isCompressedArrayTexture?ae.compressedTexSubImage3D(Fn,lt,Nt,In,kn,xt,Ct,Et,sn,zn.data):ae.texSubImage3D(Fn,lt,Nt,In,kn,xt,Ct,Et,sn,Lt,zn):pe.isDataTexture?ae.texSubImage2D(ae.TEXTURE_2D,lt,Nt,In,xt,Ct,sn,Lt,zn.data):pe.isCompressedTexture?ae.compressedTexSubImage2D(ae.TEXTURE_2D,lt,Nt,In,zn.width,zn.height,sn,zn.data):ae.texSubImage2D(ae.TEXTURE_2D,lt,Nt,In,xt,Ct,sn,Lt,zn);ae.pixelStorei(ae.UNPACK_ROW_LENGTH,mn),ae.pixelStorei(ae.UNPACK_IMAGE_HEIGHT,gi),ae.pixelStorei(ae.UNPACK_SKIP_PIXELS,di),ae.pixelStorei(ae.UNPACK_SKIP_ROWS,on),ae.pixelStorei(ae.UNPACK_SKIP_IMAGES,Ns),lt===0&&Be.generateMipmaps&&ae.generateMipmap(Fn),Ie.unbindTexture()},this.initRenderTarget=function(pe){ke.get(pe).__webglFramebuffer===void 0&&Fe.setupRenderTarget(pe)},this.initTexture=function(pe){pe.isCubeTexture?Fe.setTextureCube(pe,0):pe.isData3DTexture?Fe.setTexture3D(pe,0):pe.isDataArrayTexture||pe.isCompressedArrayTexture?Fe.setTexture2DArray(pe,0):Fe.setTexture2D(pe,0),Ie.unbindTexture()},this.resetState=function(){R=0,O=0,I=null,Ie.reset(),Je.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Oa}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=Wn._getDrawingBufferColorSpace(e),t.unpackColorSpace=Wn._getUnpackColorSpace()}}const nG=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:eL,AddEquation:rd,AddOperation:A8,AdditiveAnimationBlendMode:cL,AdditiveBlending:nD,AgXToneMapping:L8,AlphaFormat:oL,AlwaysCompare:$8,AlwaysDepth:mE,AlwaysStencilFunc:oD,AmbientLight:zV,AnimationAction:$V,AnimationClip:R_,AnimationLoader:Wre,AnimationMixer:bse,AnimationObjectGroup:vse,AnimationUtils:Vre,ArcCurve:uV,ArrayCamera:HV,ArrowHelper:jse,AttachedBindMode:sD,Audio:jV,AudioAnalyser:ase,AudioContext:NL,AudioListener:rse,AudioLoader:tse,AxesHelper:Wse,BackSide:Po,BasicDepthPacking:z8,BasicShadowMap:a8,BatchedMesh:sV,Bone:yL,BooleanKeyframeTrack:gm,Box2:Cse,Box3:Vr,Box3Helper:Gse,BoxGeometry:Ed,BoxHelper:Vse,BufferAttribute:li,BufferGeometry:hn,BufferGeometryLoader:GV,ByteType:nL,Cache:du,Camera:$M,CameraHelper:Bse,CanvasTexture:ure,CapsuleGeometry:eT,CatmullRomCurve3:rT,CineonToneMapping:D8,CircleGeometry:tT,ClampToEdgeWrapping:_l,Clock:UL,Color:yt,ColorKeyframeTrack:OL,ColorManagement:Wn,CompressedArrayTexture:lre,CompressedCubeTexture:cre,CompressedTexture:JM,CompressedTextureLoader:$re,ConeGeometry:nx,ConstantAlphaFactor:E8,ConstantColorFactor:w8,Controls:qse,CubeCamera:Q8,CubeReflectionMapping:jf,CubeRefractionMapping:md,CubeTexture:tx,CubeTextureLoader:qre,CubeUVReflectionMapping:sv,CubicBezierCurve:SL,CubicBezierCurve3:fV,CubicInterpolant:RV,CullFaceBack:tD,CullFaceFront:o8,CullFaceFrontBack:yne,CullFaceNone:s8,Curve:gc,CurvePath:hV,CustomBlending:l8,CustomToneMapping:O8,CylinderGeometry:lv,Cylindrical:Ase,Data3DTexture:WM,DataArrayTexture:jM,DataTexture:yu,DataTextureLoader:Xre,DataUtils:Pie,DecrementStencilOp:Lne,DecrementWrapStencilOp:Ine,DefaultLoadingManager:LV,DepthFormat:L0,DepthStencilFormat:P0,DepthTexture:_L,DetachedBindMode:I8,DirectionalLight:kV,DirectionalLightHelper:Fse,DiscreteInterpolant:DV,DodecahedronGeometry:nT,DoubleSide:yr,DstAlphaFactor:v8,DstColorFactor:b8,DynamicCopyUsage:Yne,DynamicDrawUsage:Hne,DynamicReadUsage:$ne,EdgesGeometry:cV,EllipseCurve:iT,EqualCompare:G8,EqualDepth:vE,EqualStencilFunc:zne,EquirectangularReflectionMapping:p_,EquirectangularRefractionMapping:m_,Euler:Io,EventDispatcher:Eu,ExternalTexture:xL,ExtrudeGeometry:oT,FileLoader:$f,Float16BufferAttribute:Bie,Float32BufferAttribute:kt,FloatType:fa,Fog:XM,FogExp2:qM,FramebufferTexture:are,FrontSide:Hf,Frustum:mm,FrustumArray:QM,GLBufferAttribute:Ese,GLSL1:Kne,GLSL3:aD,GreaterCompare:H8,GreaterDepth:bE,GreaterEqualCompare:W8,GreaterEqualDepth:yE,GreaterEqualStencilFunc:Gne,GreaterStencilFunc:Bne,GridHelper:kse,Group:d0,HalfFloatType:ov,HemisphereLight:IV,HemisphereLightHelper:Use,IcosahedronGeometry:aT,ImageBitmapLoader:ese,ImageLoader:D_,ImageUtils:Y8,IncrementStencilOp:One,IncrementWrapStencilOp:Pne,InstancedBufferAttribute:cm,InstancedBufferGeometry:IL,InstancedInterleavedBuffer:Sse,InstancedMesh:rV,Int16BufferAttribute:zie,Int32BufferAttribute:Fie,Int8BufferAttribute:Nie,IntType:kM,InterleavedBuffer:ZM,InterleavedBufferAttribute:lm,Interpolant:sx,InterpolateDiscrete:y_,InterpolateLinear:YE,InterpolateSmooth:RS,InterpolationSamplingMode:eie,InterpolationSamplingType:Jne,InvertStencilOp:Nne,KeepStencilOp:Ip,KeyframeTrack:Cl,LOD:nV,LatheGeometry:lT,Layers:U0,LessCompare:V8,LessDepth:gE,LessEqualCompare:fL,LessEqualDepth:am,LessEqualStencilFunc:Fne,LessStencilFunc:kne,Light:Td,LightProbe:VV,Line:vd,Line3:Ose,LineBasicMaterial:No,LineCurve:EL,LineCurve3:ML,LineDashedMaterial:TV,LineLoop:oV,LineSegments:Mu,LinearFilter:br,LinearInterpolant:DL,LinearMipMapLinearFilter:wne,LinearMipMapNearestFilter:xne,LinearMipmapLinearFilter:hu,LinearMipmapNearestFilter:Hb,LinearSRGBColorSpace:gd,LinearToneMapping:C8,LinearTransfer:__,Loader:ma,LoaderUtils:hD,LoadingManager:LL,LoopOnce:N8,LoopPingPong:k8,LoopRepeat:U8,MOUSE:r8,Material:so,MaterialLoader:gT,MathUtils:ZE,Matrix2:VL,Matrix3:un,Matrix4:Kt,MaxEquation:h8,Mesh:Pi,MeshBasicMaterial:Yf,MeshDepthMaterial:pT,MeshDistanceMaterial:mT,MeshLambertMaterial:EV,MeshMatcapMaterial:MV,MeshNormalMaterial:SV,MeshPhongMaterial:xV,MeshPhysicalMaterial:_V,MeshStandardMaterial:CL,MeshToonMaterial:wV,MinEquation:f8,MirroredRepeatWrapping:v_,MixOperation:T8,MultiplyBlending:rD,MultiplyOperation:J_,NearestFilter:Ds,NearestMipMapLinearFilter:_ne,NearestMipMapNearestFilter:bne,NearestMipmapLinearFilter:f0,NearestMipmapNearestFilter:tL,NeutralToneMapping:P8,NeverCompare:B8,NeverDepth:pE,NeverStencilFunc:Une,NoBlending:Nf,NoColorSpace:Cf,NoToneMapping:vu,NormalAnimationBlendMode:HM,NormalBlending:Kp,NotEqualCompare:j8,NotEqualDepth:_E,NotEqualStencilFunc:Vne,NumberKeyframeTrack:A_,Object3D:Jn,ObjectLoader:Qre,ObjectSpaceNormalMap:F8,OctahedronGeometry:ix,OneFactor:p8,OneMinusConstantAlphaFactor:M8,OneMinusConstantColorFactor:S8,OneMinusDstAlphaFactor:y8,OneMinusDstColorFactor:_8,OneMinusSrcAlphaFactor:dE,OneMinusSrcColorFactor:g8,OrthographicCamera:ym,PCFShadowMap:NM,PCFSoftShadowMap:Gb,PMREMGenerator:mD,Path:eM,PerspectiveCamera:Fr,Plane:Tf,PlaneGeometry:Zf,PlaneHelper:Hse,PointLight:UV,PointLightHelper:Ise,Points:aV,PointsMaterial:bL,PolarGridHelper:zse,PolyhedronGeometry:Md,PositionalAudio:ose,PropertyBinding:Qn,PropertyMixer:WV,QuadraticBezierCurve:TL,QuadraticBezierCurve3:sT,Quaternion:Os,QuaternionKeyframeTrack:ox,QuaternionLinearInterpolant:OV,RED_GREEN_RGTC2_Format:qE,RED_RGTC1_Format:WE,REVISION:IM,RGBADepthPacking:uL,RGBAFormat:io,RGBAIntegerFormat:GM,RGBA_ASTC_10x10_Format:FE,RGBA_ASTC_10x5_Format:UE,RGBA_ASTC_10x6_Format:kE,RGBA_ASTC_10x8_Format:zE,RGBA_ASTC_12x10_Format:BE,RGBA_ASTC_12x12_Format:VE,RGBA_ASTC_4x4_Format:CE,RGBA_ASTC_5x4_Format:RE,RGBA_ASTC_5x5_Format:DE,RGBA_ASTC_6x5_Format:OE,RGBA_ASTC_6x6_Format:LE,RGBA_ASTC_8x5_Format:PE,RGBA_ASTC_8x6_Format:IE,RGBA_ASTC_8x8_Format:NE,RGBA_BPTC_Format:GE,RGBA_ETC2_EAC_Format:AE,RGBA_PVRTC_2BPPV1_Format:EE,RGBA_PVRTC_4BPPV1_Format:SE,RGBA_S3TC_DXT1_Format:Wb,RGBA_S3TC_DXT3_Format:$b,RGBA_S3TC_DXT5_Format:qb,RGBDepthPacking:Ane,RGBFormat:aL,RGBIntegerFormat:Sne,RGB_BPTC_SIGNED_Format:HE,RGB_BPTC_UNSIGNED_Format:jE,RGB_ETC1_Format:ME,RGB_ETC2_Format:TE,RGB_PVRTC_2BPPV1_Format:wE,RGB_PVRTC_4BPPV1_Format:xE,RGB_S3TC_DXT1_Format:jb,RGDepthPacking:Cne,RGFormat:lL,RGIntegerFormat:VM,RawShaderMaterial:bV,Ray:av,Raycaster:BL,RectAreaLight:FV,RedFormat:BM,RedIntegerFormat:ex,ReinhardToneMapping:R8,RenderTarget:dL,RenderTarget3D:_se,RepeatWrapping:g_,ReplaceStencilOp:Dne,ReverseSubtractEquation:u8,RingGeometry:cT,SIGNED_RED_GREEN_RGTC2_Format:XE,SIGNED_RED_RGTC1_Format:$E,SRGBColorSpace:Qs,SRGBTransfer:mi,Scene:YM,ShaderChunk:bn,ShaderLib:oc,ShaderMaterial:Al,ShadowMaterial:yV,Shape:ud,ShapeGeometry:uT,ShapePath:$se,ShapeUtils:cc,ShortType:iL,Skeleton:KM,SkeletonHelper:Pse,SkinnedMesh:iV,Source:ad,Sphere:ts,SphereGeometry:rx,Spherical:qV,SphericalHarmonics3:BV,SplineCurve:AL,SpotLight:NV,SpotLightHelper:Lse,Sprite:tV,SpriteMaterial:vL,SrcAlphaFactor:hE,SrcAlphaSaturateFactor:x8,SrcColorFactor:m8,StaticCopyUsage:Xne,StaticDrawUsage:x_,StaticReadUsage:Wne,StereoCamera:nse,StreamCopyUsage:Zne,StreamDrawUsage:jne,StreamReadUsage:qne,StringKeyframeTrack:vm,SubtractEquation:c8,SubtractiveBlending:iD,TOUCH:vne,TangentSpaceNormalMap:Sd,TetrahedronGeometry:fT,Texture:ur,TextureLoader:PV,TextureUtils:Qse,Timer:Mse,TimestampQuery:Qne,TorusGeometry:hT,TorusKnotGeometry:dT,Triangle:ua,TriangleFanDrawMode:Tne,TriangleStripDrawMode:Mne,TrianglesDrawMode:Ene,TubeGeometry:yd,UVMapping:UM,Uint16BufferAttribute:pL,Uint32BufferAttribute:mL,Uint8BufferAttribute:Uie,Uint8ClampedBufferAttribute:kie,Uniform:FL,UniformsGroup:wse,UniformsLib:At,UniformsUtils:gL,UnsignedByteType:Tl,UnsignedInt101111Type:sL,UnsignedInt248Type:O0,UnsignedInt5999Type:rL,UnsignedIntType:Wf,UnsignedShort4444Type:zM,UnsignedShort5551Type:FM,UnsignedShortType:D0,VSMShadowMap:sc,Vector2:ut,Vector3:de,Vector4:Gn,VectorKeyframeTrack:C_,VideoFrameTexture:ore,VideoTexture:lV,WebGL3DRenderTarget:Sie,WebGLArrayRenderTarget:wie,WebGLCoordinateSystem:Oa,WebGLCubeRenderTarget:J8,WebGLRenderTarget:wu,WebGLRenderer:tG,WebGLUtils:eG,WebGPUCoordinateSystem:I0,WebXRController:DS,WireframeGeometry:vV,WrapAroundEnding:b_,ZeroCurvatureEnding:Hp,ZeroFactor:d8,ZeroSlopeEnding:jp,ZeroStencilOp:Rne,createCanvasElement:X8},Symbol.toStringTag,{value:"Module"}));var iR={exports:{}},rR={},sR={exports:{}},oR={};var Ok;function Pue(){if(Ok)return oR;Ok=1;var n=Xf();function e(d,m){return d===m&&(d!==0||1/d===1/m)||d!==d&&m!==m}var t=typeof Object.is=="function"?Object.is:e,i=n.useState,r=n.useEffect,s=n.useLayoutEffect,o=n.useDebugValue;function a(d,m){var v=m(),b=i({inst:{value:v,getSnapshot:m}}),x=b[0].inst,w=b[1];return s(function(){x.value=v,x.getSnapshot=m,l(x)&&w({inst:x})},[d,v,m]),r(function(){return l(x)&&w({inst:x}),d(function(){l(x)&&w({inst:x})})},[d]),o(v),v}function l(d){var m=d.getSnapshot;d=d.value;try{var v=m();return!t(d,v)}catch{return!0}}function c(d,m){return m()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:a;return oR.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:f,oR}var Lk;function Iue(){return Lk||(Lk=1,sR.exports=Pue()),sR.exports}var Pk;function Nue(){if(Pk)return rR;Pk=1;var n=Xf(),e=Iue();function t(c,f){return c===f&&(c!==0||1/c===1/f)||c!==c&&f!==f}var i=typeof Object.is=="function"?Object.is:t,r=e.useSyncExternalStore,s=n.useRef,o=n.useEffect,a=n.useMemo,l=n.useDebugValue;return rR.useSyncExternalStoreWithSelector=function(c,f,d,m,v){var b=s(null);if(b.current===null){var x={hasValue:!1,value:null};b.current=x}else x=b.current;b=a(function(){function _(R){if(!A){if(A=!0,T=R,R=m(R),v!==void 0&&x.hasValue){var O=x.value;if(v(O,R))return E=O}return E=R}if(O=E,i(T,R))return O;var I=m(R);return v!==void 0&&v(O,I)?(T=R,O):(T=R,E=I)}var A=!1,T,E,C=d===void 0?null:d;return[function(){return _(f())},C===null?void 0:function(){return _(C())}]},[f,d,m,v]);var w=r(c,b[0],b[1]);return o(function(){x.hasValue=!0,x.value=w},[w]),l(w),w},rR}var Ik;function Uue(){return Ik||(Ik=1,iR.exports=Nue()),iR.exports}var kue=Uue();const zue=ro(kue),Nk=n=>{let e;const t=new Set,i=(c,f)=>{const d=typeof c=="function"?c(e):c;if(!Object.is(d,e)){const m=e;e=f??(typeof d!="object"||d===null)?d:Object.assign({},e,d),t.forEach(v=>v(e,m))}},r=()=>e,a={setState:i,getState:r,getInitialState:()=>l,subscribe:c=>(t.add(c),()=>t.delete(c))},l=e=n(i,r,a);return a},iG=(n=>n?Nk(n):Nk),{useSyncExternalStoreWithSelector:Fue}=zue,Bue=n=>n;function Vue(n,e=Bue,t){const i=Fue(n.subscribe,n.getState,n.getInitialState,e,t);return eo.useDebugValue(i),i}const Uk=(n,e)=>{const t=iG(n),i=(r,s=e)=>Vue(t,r,s);return Object.assign(i,t),i},Gue=((n,e)=>n?Uk(n,e):Uk),Hue=n=>typeof n=="object"&&typeof n.then=="function",Qw=[];function jue(n,e,t=(i,r)=>i===r){if(n===e)return!0;if(!n||!e)return!1;const i=n.length;if(e.length!==i)return!1;for(let r=0;r<i;r++)if(!t(n[r],e[r]))return!1;return!0}function Wue(n,e=null,t=!1,i={}){e===null&&(e=[n]);for(const s of Qw)if(jue(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return i.lifespan&&i.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,i.lifespan)),s.response;if(!t)throw s.promise}const r={keys:e,equal:i.equal,remove:()=>{const s=Qw.indexOf(r);s!==-1&&Qw.splice(s,1)},promise:(Hue(n)?n:n(...e)).then(s=>{r.response=s,i.lifespan&&i.lifespan>0&&(r.timeout=setTimeout(r.remove,i.lifespan))}).catch(s=>r.error=s)};if(Qw.push(r),!t)throw r.promise}const $ue=(n,e,t)=>Wue(n,e,!1,t);var vD=G4();const que=ro(vD);function HL(n,e,t){if(!n)return;if(t(n)===!0)return n;let i=e?n.return:n.child;for(;i;){const r=HL(i,e,t);if(r)return r;i=e?null:i.sibling}}function rG(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const jL=rG($.createContext(null));let sG=class extends $.Component{render(){return $.createElement(jL.Provider,{value:this._reactInternals},this.props.children)}};function oG(){const n=$.useContext(jL);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=$.useId();return $.useMemo(()=>{for(const t of[n,n?.alternate]){if(!t)continue;const i=HL(t,!1,r=>{let s=r.memoizedState;for(;s;){if(s.memoizedState===e)return!0;s=s.next}});if(i)return i}},[n,e])}const Xue=Symbol.for("react.context"),Yue=n=>n!==null&&typeof n=="object"&&"$$typeof"in n&&n.$$typeof===Xue;function Zue(){const n=oG(),[e]=$.useState(()=>new Map);e.clear();let t=n;for(;t;){const i=t.type;Yue(i)&&i!==jL&&!e.has(i)&&e.set(i,$.use(rG(i))),t=t.return}return e}function Kue(){const n=Zue();return $.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>i=>$.createElement(e,null,$.createElement(t.Provider,{...i,value:n.get(t)})),e=>$.createElement(sG,{...e})),[n])}function aG(n){let e=n.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const lG=n=>n&&n.isOrthographicCamera,Que=n=>n&&n.hasOwnProperty("current"),Jue=n=>n!=null&&(typeof n=="string"||typeof n=="number"||n.isColor),ax=((n,e)=>typeof window<"u"&&(((n=window.document)==null?void 0:n.createElement)||((e=window.navigator)==null?void 0:e.product)==="ReactNative"))()?$.useLayoutEffect:$.useEffect;function cG(n){const e=$.useRef(n);return ax(()=>{e.current=n},[n]),e}function efe(){const n=oG(),e=Kue();return $.useMemo(()=>({children:t})=>{const r=!!HL(n,!0,s=>s.type===$.StrictMode)?$.StrictMode:$.Fragment;return ne.jsx(r,{children:ne.jsx(e,{children:t})})},[n,e])}function tfe({set:n}){return ax(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}const nfe=(n=>(n=class extends $.Component{constructor(...t){super(...t),this.state={error:!1}}componentDidCatch(t){this.props.set(t)}render(){return this.state.error?null:this.props.children}},n.getDerivedStateFromError=()=>({error:!0}),n))();function uG(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}function Wg(n){var e;return(e=n.__r3f)==null?void 0:e.root.getState()}const rr={obj:n=>n===Object(n)&&!rr.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,nul:n=>n===null,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:i="reference",strict:r=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(rr.str(n)||rr.num(n)||rr.boo(n))return n===e;const s=rr.obj(n);if(s&&i==="reference")return n===e;const o=rr.arr(n);if(o&&t==="reference")return n===e;if((o||s)&&n===e)return!0;let a;for(a in n)if(!(a in e))return!1;if(s&&t==="shallow"&&i==="shallow"){for(a in r?e:n)if(!rr.equ(n[a],e[a],{strict:r,objects:"reference"}))return!1}else for(a in r?e:n)if(n[a]!==e[a])return!1;if(rr.und(a)){if(o&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function ife(n){n.type!=="Scene"&&(n.dispose==null||n.dispose());for(const e in n){const t=n[e];t?.type!=="Scene"&&(t==null||t.dispose==null||t.dispose())}}const fG=["children","key","ref"];function rfe(n){const e={};for(const t in n)fG.includes(t)||(e[t]=n[t]);return e}function tM(n,e,t,i){const r=n;let s=r?.__r3f;return s||(s={root:e,type:t,parent:null,children:[],props:rfe(i),object:r,eventCount:0,handlers:{},isHidden:!1},r&&(r.__r3f=s)),s}function O_(n,e){if(!e.includes("-"))return{root:n,key:e,target:n[e]};if(e in n)return{root:n,key:e,target:n[e]};let t=n;const i=e.split("-");for(const r of i){if(typeof t!="object"||t===null){if(t!==void 0){const s=i.slice(i.indexOf(r)).join("-");return{root:t,key:s,target:void 0}}return{root:n,key:e,target:void 0}}e=r,n=t,t=t[e]}return{root:n,key:e,target:t}}const kk=/-\d+$/;function nM(n,e){if(rr.str(e.props.attach)){if(kk.test(e.props.attach)){const r=e.props.attach.replace(kk,""),{root:s,key:o}=O_(n.object,r);Array.isArray(s[o])||(s[o]=[])}const{root:t,key:i}=O_(n.object,e.props.attach);e.previousAttach=t[i],t[i]=e.object}else rr.fun(e.props.attach)&&(e.previousAttach=e.props.attach(n.object,e.object))}function iM(n,e){if(rr.str(e.props.attach)){const{root:t,key:i}=O_(n.object,e.props.attach),r=e.previousAttach;r===void 0?delete t[i]:t[i]=r}else e.previousAttach==null||e.previousAttach(n.object,e.object);delete e.previousAttach}const yD=[...fG,"args","dispose","attach","object","onUpdate","dispose"],zk=new Map;function sfe(n){let e=zk.get(n.constructor);try{e||(e=new n.constructor,zk.set(n.constructor,e))}catch{}return e}function ofe(n,e){const t={};for(const i in e)if(!yD.includes(i)&&!rr.equ(e[i],n.props[i])){t[i]=e[i];for(const r in e)r.startsWith(`${i}-`)&&(t[r]=e[r])}for(const i in n.props){if(yD.includes(i)||e.hasOwnProperty(i))continue;const{root:r,key:s}=O_(n.object,i);if(r.constructor&&r.constructor.length===0){const o=sfe(r);rr.und(o)||(t[s]=o[s])}else t[s]=0}return t}const afe=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],lfe=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function Df(n,e){var t;const i=n.__r3f,r=i&&aG(i).getState(),s=i?.eventCount;for(const a in e){let l=e[a];if(yD.includes(a))continue;if(i&&lfe.test(a)){typeof l=="function"?i.handlers[a]=l:delete i.handlers[a],i.eventCount=Object.keys(i.handlers).length;continue}if(l===void 0)continue;let{root:c,key:f,target:d}=O_(n,a);if(d===void 0&&(typeof c!="object"||c===null))throw Error(`R3F: Cannot set "${a}". Ensure it is an object before setting "${f}".`);if(d instanceof U0&&l instanceof U0)d.mask=l.mask;else if(d instanceof yt&&Jue(l))d.set(l);else if(d!==null&&typeof d=="object"&&typeof d.set=="function"&&typeof d.copy=="function"&&l!=null&&l.constructor&&d.constructor===l.constructor)d.copy(l);else if(d!==null&&typeof d=="object"&&typeof d.set=="function"&&Array.isArray(l))typeof d.fromArray=="function"?d.fromArray(l):d.set(...l);else if(d!==null&&typeof d=="object"&&typeof d.set=="function"&&typeof l=="number")typeof d.setScalar=="function"?d.setScalar(l):d.set(l);else{var o;c[f]=l,r&&!r.linear&&afe.includes(f)&&(o=c[f])!=null&&o.isTexture&&c[f].format===io&&c[f].type===Tl&&(c[f].colorSpace=Qs)}}if(i!=null&&i.parent&&r!=null&&r.internal&&(t=i.object)!=null&&t.isObject3D&&s!==i.eventCount){const a=i.object,l=r.internal.interaction.indexOf(a);l>-1&&r.internal.interaction.splice(l,1),i.eventCount&&a.raycast!==null&&r.internal.interaction.push(a)}return i&&i.props.attach===void 0&&(i.object.isBufferGeometry?i.props.attach="geometry":i.object.isMaterial&&(i.props.attach="material")),i&&uv(i),n}function uv(n){var e;if(!n.parent)return;n.props.onUpdate==null||n.props.onUpdate(n.object);const t=(e=n.root)==null||e.getState==null?void 0:e.getState();t&&t.internal.frames===0&&t.invalidate()}function cfe(n,e){n.manual||(lG(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix())}const ca=n=>n?.isObject3D;function Jw(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function hG(n,e,t,i){const r=t.get(e);r&&(t.delete(e),t.size===0&&(n.delete(i),r.target.releasePointerCapture(i)))}function ufe(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(i=>i!==e),t.initialHits=t.initialHits.filter(i=>i!==e),t.hovered.forEach((i,r)=>{(i.eventObject===e||i.object===e)&&t.hovered.delete(r)}),t.capturedMap.forEach((i,r)=>{hG(t.capturedMap,e,i,r)})}function ffe(n){function e(l){const{internal:c}=n.getState(),f=l.offsetX-c.initialClick[0],d=l.offsetY-c.initialClick[1];return Math.round(Math.sqrt(f*f+d*d))}function t(l){return l.filter(c=>["Move","Over","Enter","Out","Leave"].some(f=>{var d;return(d=c.__r3f)==null?void 0:d.handlers["onPointer"+f]}))}function i(l,c){const f=n.getState(),d=new Set,m=[],v=c?c(f.internal.interaction):f.internal.interaction;for(let _=0;_<v.length;_++){const A=Wg(v[_]);A&&(A.raycaster.camera=void 0)}f.previousRoot||f.events.compute==null||f.events.compute(l,f);function b(_){const A=Wg(_);if(!A||!A.events.enabled||A.raycaster.camera===null)return[];if(A.raycaster.camera===void 0){var T;A.events.compute==null||A.events.compute(l,A,(T=A.previousRoot)==null?void 0:T.getState()),A.raycaster.camera===void 0&&(A.raycaster.camera=null)}return A.raycaster.camera?A.raycaster.intersectObject(_,!0):[]}let x=v.flatMap(b).sort((_,A)=>{const T=Wg(_.object),E=Wg(A.object);return!T||!E?_.distance-A.distance:E.events.priority-T.events.priority||_.distance-A.distance}).filter(_=>{const A=Jw(_);return d.has(A)?!1:(d.add(A),!0)});f.events.filter&&(x=f.events.filter(x,f));for(const _ of x){let A=_.object;for(;A;){var w;(w=A.__r3f)!=null&&w.eventCount&&m.push({..._,eventObject:A}),A=A.parent}}if("pointerId"in l&&f.internal.capturedMap.has(l.pointerId))for(let _ of f.internal.capturedMap.get(l.pointerId).values())d.has(Jw(_.intersection))||m.push(_.intersection);return m}function r(l,c,f,d){if(l.length){const m={stopped:!1};for(const v of l){let b=Wg(v.object);if(b||v.object.traverseAncestors(x=>{const w=Wg(x);if(w)return b=w,!1}),b){const{raycaster:x,pointer:w,camera:_,internal:A}=b,T=new de(w.x,w.y,0).unproject(_),E=L=>{var N,V;return(N=(V=A.capturedMap.get(L))==null?void 0:V.has(v.eventObject))!=null?N:!1},C=L=>{const N={intersection:v,target:c.target};A.capturedMap.has(L)?A.capturedMap.get(L).set(v.eventObject,N):A.capturedMap.set(L,new Map([[v.eventObject,N]])),c.target.setPointerCapture(L)},R=L=>{const N=A.capturedMap.get(L);N&&hG(A.capturedMap,v.eventObject,N,L)};let O={};for(let L in c){let N=c[L];typeof N!="function"&&(O[L]=N)}let I={...v,...O,pointer:w,intersections:l,stopped:m.stopped,delta:f,unprojectedPoint:T,ray:x.ray,camera:_,stopPropagation(){const L="pointerId"in c&&A.capturedMap.get(c.pointerId);if((!L||L.has(v.eventObject))&&(I.stopped=m.stopped=!0,A.hovered.size&&Array.from(A.hovered.values()).find(N=>N.eventObject===v.eventObject))){const N=l.slice(0,l.indexOf(v));s([...N,v])}},target:{hasPointerCapture:E,setPointerCapture:C,releasePointerCapture:R},currentTarget:{hasPointerCapture:E,setPointerCapture:C,releasePointerCapture:R},nativeEvent:c};if(d(I),m.stopped===!0)break}}}return l}function s(l){const{internal:c}=n.getState();for(const f of c.hovered.values())if(!l.length||!l.find(d=>d.object===f.object&&d.index===f.index&&d.instanceId===f.instanceId)){const m=f.eventObject.__r3f;if(c.hovered.delete(Jw(f)),m!=null&&m.eventCount){const v=m.handlers,b={...f,intersections:l};v.onPointerOut==null||v.onPointerOut(b),v.onPointerLeave==null||v.onPointerLeave(b)}}}function o(l,c){for(let f=0;f<c.length;f++){const d=c[f].__r3f;d==null||d.handlers.onPointerMissed==null||d.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return c=>{const{internal:f}=n.getState();"pointerId"in c&&f.capturedMap.has(c.pointerId)&&requestAnimationFrame(()=>{f.capturedMap.has(c.pointerId)&&(f.capturedMap.delete(c.pointerId),s([]))})}}return function(f){const{onPointerMissed:d,internal:m}=n.getState();m.lastEvent.current=f;const v=l==="onPointerMove",b=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",w=i(f,v?t:void 0),_=b?e(f):0;l==="onPointerDown"&&(m.initialClick=[f.offsetX,f.offsetY],m.initialHits=w.map(T=>T.eventObject)),b&&!w.length&&_<=2&&(o(f,m.interaction),d&&d(f)),v&&s(w);function A(T){const E=T.eventObject,C=E.__r3f;if(!(C!=null&&C.eventCount))return;const R=C.handlers;if(v){if(R.onPointerOver||R.onPointerEnter||R.onPointerOut||R.onPointerLeave){const O=Jw(T),I=m.hovered.get(O);I?I.stopped&&T.stopPropagation():(m.hovered.set(O,T),R.onPointerOver==null||R.onPointerOver(T),R.onPointerEnter==null||R.onPointerEnter(T))}R.onPointerMove==null||R.onPointerMove(T)}else{const O=R[l];O?(!b||m.initialHits.includes(E))&&(o(f,m.interaction.filter(I=>!m.initialHits.includes(I))),O(T)):b&&m.initialHits.includes(E)&&o(f,m.interaction.filter(I=>!m.initialHits.includes(I)))}}r(w,f,_,A)}}return{handlePointer:a}}const Fk=n=>!!(n!=null&&n.render),dG=$.createContext(null),hfe=(n,e)=>{const t=Gue((a,l)=>{const c=new de,f=new de,d=new de;function m(_=l().camera,A=f,T=l().size){const{width:E,height:C,top:R,left:O}=T,I=E/C;A.isVector3?d.copy(A):d.set(...A);const L=_.getWorldPosition(c).distanceTo(d);if(lG(_))return{width:E/_.zoom,height:C/_.zoom,top:R,left:O,factor:1,distance:L,aspect:I};{const N=_.fov*Math.PI/180,V=2*Math.tan(N/2)*L,B=V*(E/C);return{width:B,height:V,top:R,left:O,factor:E/B,distance:L,aspect:I}}}let v;const b=_=>a(A=>({performance:{...A.performance,current:_}})),x=new ut;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(_=1)=>n(l(),_),advance:(_,A)=>e(_,A,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new UL,pointer:x,mouse:x,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const _=l();v&&clearTimeout(v),_.performance.current!==_.performance.min&&b(_.performance.min),v=setTimeout(()=>b(l().performance.max),_.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:m},setEvents:_=>a(A=>({...A,events:{...A.events,..._}})),setSize:(_,A,T=0,E=0)=>{const C=l().camera,R={width:_,height:A,top:T,left:E};a(O=>({size:R,viewport:{...O.viewport,...m(C,f,R)}}))},setDpr:_=>a(A=>{const T=uG(_);return{viewport:{...A.viewport,dpr:T,initialDpr:A.viewport.initialDpr||T}}}),setFrameloop:(_="always")=>{const A=l().clock;A.stop(),A.elapsedTime=0,_!=="never"&&(A.start(),A.elapsedTime=0),a(()=>({frameloop:_}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:$.createRef(),active:!1,frames:0,priority:0,subscribe:(_,A,T)=>{const E=l().internal;return E.priority=E.priority+(A>0?1:0),E.subscribers.push({ref:_,priority:A,store:T}),E.subscribers=E.subscribers.sort((C,R)=>C.priority-R.priority),()=>{const C=l().internal;C!=null&&C.subscribers&&(C.priority=C.priority-(A>0?1:0),C.subscribers=C.subscribers.filter(R=>R.ref!==_))}}}}}),i=t.getState();let r=i.size,s=i.viewport.dpr,o=i.camera;return t.subscribe(()=>{const{camera:a,size:l,viewport:c,gl:f,set:d}=t.getState();if(l.width!==r.width||l.height!==r.height||c.dpr!==s){r=l,s=c.dpr,cfe(a,l),c.dpr>0&&f.setPixelRatio(c.dpr);const m=typeof HTMLCanvasElement<"u"&&f.domElement instanceof HTMLCanvasElement;f.setSize(l.width,l.height,m)}a!==o&&(o=a,d(m=>({viewport:{...m.viewport,...m.viewport.getCurrentViewport(a)}})))}),t.subscribe(a=>n(a)),t};function pG(){const n=$.useContext(dG);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function Br(n=t=>t,e){return pG()(n,e)}function yT(n,e=0){const t=pG(),i=t.getState().internal.subscribe,r=cG(n);return ax(()=>i(r,e,t),[e,i,t]),null}const dfe=1,pfe=8,mfe=32,gfe=2;var vfe={version:"9.5.0"};function yfe(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Bk={exports:{}},Vk={exports:{}},Gk;function bfe(){return Gk||(Gk=1,(function(n){n.exports=function(e){function t(p,g,M,D){return new Pv(p,g,M,D)}function i(){}function r(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var M=2;M<arguments.length;M++)g+="&args[]="+encodeURIComponent(arguments[M])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(p){var g=p,M=p;if(p.alternate)for(;g.return;)g=g.return;else{p=g;do g=p,(g.flags&4098)!==0&&(M=g.return),p=g.return;while(p)}return g.tag===3?M:null}function o(p){if(s(p)!==p)throw Error(r(188))}function a(p){var g=p.alternate;if(!g){if(g=s(p),g===null)throw Error(r(188));return g!==p?null:p}for(var M=p,D=g;;){var z=M.return;if(z===null)break;var H=z.alternate;if(H===null){if(D=z.return,D!==null){M=D;continue}break}if(z.child===H.child){for(H=z.child;H;){if(H===M)return o(z),p;if(H===D)return o(z),g;H=H.sibling}throw Error(r(188))}if(M.return!==D.return)M=z,D=H;else{for(var ce=!1,Pe=z.child;Pe;){if(Pe===M){ce=!0,M=z,D=H;break}if(Pe===D){ce=!0,D=z,M=H;break}Pe=Pe.sibling}if(!ce){for(Pe=H.child;Pe;){if(Pe===M){ce=!0,M=H,D=z;break}if(Pe===D){ce=!0,D=H,M=z;break}Pe=Pe.sibling}if(!ce)throw Error(r(189))}}if(M.alternate!==D)throw Error(r(190))}if(M.tag!==3)throw Error(r(188));return M.stateNode.current===M?p:g}function l(p){var g=p.tag;if(g===5||g===26||g===27||g===6)return p;for(p=p.child;p!==null;){if(g=l(p),g!==null)return g;p=p.sibling}return null}function c(p){var g=p.tag;if(g===5||g===26||g===27||g===6)return p;for(p=p.child;p!==null;){if(p.tag!==4&&(g=c(p),g!==null))return g;p=p.sibling}return null}function f(p){return p===null||typeof p!="object"?null:(p=kl&&p[kl]||p["@@iterator"],typeof p=="function"?p:null)}function d(p){if(p==null)return null;if(typeof p=="function")return p.$$typeof===Nc?null:p.displayName||p.name||null;if(typeof p=="string")return p;switch(p){case Gu:return"Fragment";case ju:return"Profiler";case Hu:return"StrictMode";case Hm:return"Suspense";case Ul:return"SuspenseList";case jd:return"Activity"}if(typeof p=="object")switch(p.$$typeof){case Vu:return"Portal";case qo:return p.displayName||"Context";case Hd:return(p._context.displayName||"Context")+".Consumer";case gh:var g=p.render;return p=p.displayName,p||(p=g.displayName||g.name||"",p=p!==""?"ForwardRef("+p+")":"ForwardRef"),p;case jm:return g=p.displayName||null,g!==null?g:d(p.type)||"Memo";case bs:g=p._payload,p=p._init;try{return d(p(g))}catch{}}return null}function m(p){return{current:p}}function v(p){0>Yu||(p.current=ig[Yu],ig[Yu]=null,Yu--)}function b(p,g){Yu++,ig[Yu]=p.current,p.current=g}function x(p){return p>>>=0,p===0?32:31-(rg(p)/M1|0)|0}function w(p){var g=p&42;if(g!==0)return g;switch(p&-p){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return p&261888;case 262144:case 524288:case 1048576:case 2097152:return p&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return p&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return p}}function _(p,g,M){var D=p.pendingLanes;if(D===0)return 0;var z=0,H=p.suspendedLanes,ce=p.pingedLanes;p=p.warmLanes;var Pe=D&134217727;return Pe!==0?(D=Pe&~H,D!==0?z=w(D):(ce&=Pe,ce!==0?z=w(ce):M||(M=Pe&~p,M!==0&&(z=w(M))))):(Pe=D&~H,Pe!==0?z=w(Pe):ce!==0?z=w(ce):M||(M=D&~p,M!==0&&(z=w(M)))),z===0?0:g!==0&&g!==z&&(g&H)===0&&(H=z&-z,M=g&-g,H>=M||H===32&&(M&4194048)!==0)?g:z}function A(p,g){return(p.pendingLanes&~(p.suspendedLanes&~p.pingedLanes)&g)===0}function T(p,g){switch(p){case 1:case 2:case 4:case 8:case 64:return g+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function E(){var p=Sh;return Sh<<=1,(Sh&62914560)===0&&(Sh=4194304),p}function C(p){for(var g=[],M=0;31>M;M++)g.push(p);return g}function R(p,g){p.pendingLanes|=g,g!==268435456&&(p.suspendedLanes=0,p.pingedLanes=0,p.warmLanes=0)}function O(p,g,M,D,z,H){var ce=p.pendingLanes;p.pendingLanes=M,p.suspendedLanes=0,p.pingedLanes=0,p.warmLanes=0,p.expiredLanes&=M,p.entangledLanes&=M,p.errorRecoveryDisabledLanes&=M,p.shellSuspendCounter=0;var Pe=p.entanglements,it=p.expirationTimes,ht=p.hiddenUpdates;for(M=ce&~M;0<M;){var bt=31-Vs(M),dt=1<<bt;Pe[bt]=0,it[bt]=-1;var Dt=ht[bt];if(Dt!==null)for(ht[bt]=null,bt=0;bt<Dt.length;bt++){var nn=Dt[bt];nn!==null&&(nn.lane&=-536870913)}M&=~dt}D!==0&&I(p,D,0),H!==0&&z===0&&p.tag!==0&&(p.suspendedLanes|=H&~(ce&~g))}function I(p,g,M){p.pendingLanes|=g,p.suspendedLanes&=~g;var D=31-Vs(g);p.entangledLanes|=g,p.entanglements[D]=p.entanglements[D]|1073741824|M&261930}function L(p,g){var M=p.entangledLanes|=g;for(p=p.entanglements;M;){var D=31-Vs(M),z=1<<D;z&g|p[D]&g&&(p[D]|=g),M&=~z}}function N(p,g){var M=g&-g;return M=(M&42)!==0?1:V(M),(M&(p.suspendedLanes|g))!==0?0:M}function V(p){switch(p){case 2:p=1;break;case 8:p=4;break;case 32:p=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:p=128;break;case 268435456:p=134217728;break;default:p=0}return p}function B(p){return p&=-p,2<p?8<p?(p&134217727)!==0?32:268435456:8:2}function k(p){if(typeof yy=="function"&&C1(p),Gs&&typeof Gs.setStrictMode=="function")try{Gs.setStrictMode(Ku,p)}catch{}}function j(p,g){return p===g&&(p!==0||1/p===1/g)||p!==p&&g!==g}function q(p){if(ug===void 0)try{throw Error()}catch(M){var g=M.stack.trim().match(/\n( *(at )?)/);ug=g&&g[1]||"",nl=-1<M.stack.indexOf(`
    at`)?" (<anonymous>)":-1<M.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ug+p+nl}function W(p,g){if(!p||Jd)return"";Jd=!0;var M=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var D={DetermineComponentFrameRoot:function(){try{if(g){var dt=function(){throw Error()};if(Object.defineProperty(dt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(dt,[])}catch(nn){var Dt=nn}Reflect.construct(p,[],dt)}else{try{dt.call()}catch(nn){Dt=nn}p.call(dt.prototype)}}else{try{throw Error()}catch(nn){Dt=nn}(dt=p())&&typeof dt.catch=="function"&&dt.catch(function(){})}}catch(nn){if(nn&&Dt&&typeof nn.stack=="string")return[nn.stack,Dt.stack]}return[null,null]}};D.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var z=Object.getOwnPropertyDescriptor(D.DetermineComponentFrameRoot,"name");z&&z.configurable&&Object.defineProperty(D.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var H=D.DetermineComponentFrameRoot(),ce=H[0],Pe=H[1];if(ce&&Pe){var it=ce.split(`
`),ht=Pe.split(`
`);for(z=D=0;D<it.length&&!it[D].includes("DetermineComponentFrameRoot");)D++;for(;z<ht.length&&!ht[z].includes("DetermineComponentFrameRoot");)z++;if(D===it.length||z===ht.length)for(D=it.length-1,z=ht.length-1;1<=D&&0<=z&&it[D]!==ht[z];)z--;for(;1<=D&&0<=z;D--,z--)if(it[D]!==ht[z]){if(D!==1||z!==1)do if(D--,z--,0>z||it[D]!==ht[z]){var bt=`
`+it[D].replace(" at new "," at ");return p.displayName&&bt.includes("<anonymous>")&&(bt=bt.replace("<anonymous>",p.displayName)),bt}while(1<=D&&0<=z);break}}}finally{Jd=!1,Error.prepareStackTrace=M}return(M=p?p.displayName||p.name:"")?q(M):""}function G(p,g){switch(p.tag){case 26:case 27:case 5:return q(p.type);case 16:return q("Lazy");case 13:return p.child!==g&&g!==null?q("Suspense Fallback"):q("Suspense");case 19:return q("SuspenseList");case 0:case 15:return W(p.type,!1);case 11:return W(p.type.render,!1);case 1:return W(p.type,!0);case 31:return q("Activity");default:return""}}function K(p){try{var g="",M=null;do g+=G(p,M),M=p,p=p.return;while(p);return g}catch(D){return`
Error generating stack: `+D.message+`
`+D.stack}}function te(p,g){if(typeof p=="object"&&p!==null){var M=by.get(p);return M!==void 0?M:(g={value:p,source:g,stack:K(g)},by.set(p,g),g)}return{value:p,source:g,stack:K(g)}}function ie(p,g){Bl[il++]=ep,Bl[il++]=ui,ui=p,ep=g}function F(p,g,M){Zo[vo++]=$r,Zo[vo++]=wa,Zo[vo++]=Ko,Ko=p;var D=$r;p=wa;var z=32-Vs(D)-1;D&=~(1<<z),M+=1;var H=32-Vs(g)+z;if(30<H){var ce=z-z%5;H=(D&(1<<ce)-1).toString(32),D>>=ce,z-=ce,$r=1<<32-Vs(g)+z|M<<z|D,wa=H+p}else $r=1<<H|M<<z|D,wa=p}function X(p){p.return!==null&&(ie(p,1),F(p,1,0))}function ee(p){for(;p===ui;)ui=Bl[--il],Bl[il]=null,ep=Bl[--il],Bl[il]=null;for(;p===Ko;)Ko=Zo[--vo],Zo[vo]=null,wa=Zo[--vo],Zo[vo]=null,$r=Zo[--vo],Zo[vo]=null}function le(p,g){Zo[vo++]=$r,Zo[vo++]=wa,Zo[vo++]=Ko,$r=g.id,wa=g.overflow,Ko=p}function oe(p,g){b(qr,g),b(Vl,p),b(Or,null),p=Vx(g),v(Or),b(Or,p)}function ue(){v(Or),v(Vl),v(qr)}function he(p){p.memoizedState!==null&&b(tp,p);var g=Or.current,M=bh(g,p.type);g!==M&&(b(Vl,p),b(Or,M))}function be(p){Vl.current===p&&(v(Or),v(Vl)),tp.current===p&&(v(tp),Ki?qu._currentValue=$u:qu._currentValue2=$u)}function Te(p){var g=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw xe(te(g,p)),fg}function Ee(p,g){if(!Ri)throw Error(r(175));d1(p.stateNode,p.type,p.memoizedProps,g,p)||Te(p,!0)}function Ce(p){for(Sr=p.return;Sr;)switch(Sr.tag){case 5:case 31:case 13:xs=!1;return;case 27:case 3:xs=!0;return;default:Sr=Sr.return}}function we(p){if(!Ri||p!==Sr)return!1;if(!Cn)return Ce(p),Cn=!0,!1;var g=p.tag;if(wr?g!==3&&g!==27&&(g!==5||wh(p.type)&&!_s(p.type,p.memoizedProps))&&Di&&Te(p):g!==3&&(g!==5||wh(p.type)&&!_s(p.type,p.memoizedProps))&&Di&&Te(p),Ce(p),g===13){if(!Ri)throw Error(r(316));if(p=p.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(r(317));Di=ay(p)}else if(g===31){if(p=p.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(r(317));Di=m1(p)}else Di=wr&&g===27?s1(p.type,Di):Sr?r1(p.stateNode):null;return!0}function ae(){Ri&&(Di=Sr=null,Cn=!1)}function ve(){var p=rl;return p!==null&&(Ws===null?Ws=p:Ws.push.apply(Ws,p),rl=null),p}function xe(p){rl===null?rl=[p]:rl.push(p)}function me(p,g,M){Ki?(b(Qo,g._currentValue),g._currentValue=M):(b(Qo,g._currentValue2),g._currentValue2=M)}function Ie(p){var g=Qo.current;Ki?p._currentValue=g:p._currentValue2=g,v(Qo)}function Ne(p,g,M){for(;p!==null;){var D=p.alternate;if((p.childLanes&g)!==g?(p.childLanes|=g,D!==null&&(D.childLanes|=g)):D!==null&&(D.childLanes&g)!==g&&(D.childLanes|=g),p===M)break;p=p.return}}function ke(p,g,M,D){var z=p.child;for(z!==null&&(z.return=p);z!==null;){var H=z.dependencies;if(H!==null){var ce=z.child;H=H.firstContext;e:for(;H!==null;){var Pe=H;H=z;for(var it=0;it<g.length;it++)if(Pe.context===g[it]){H.lanes|=M,Pe=H.alternate,Pe!==null&&(Pe.lanes|=M),Ne(H.return,M,p),D||(ce=null);break e}H=Pe.next}}else if(z.tag===18){if(ce=z.return,ce===null)throw Error(r(341));ce.lanes|=M,H=ce.alternate,H!==null&&(H.lanes|=M),Ne(ce,M,p),ce=null}else ce=z.child;if(ce!==null)ce.return=z;else for(ce=z;ce!==null;){if(ce===p){ce=null;break}if(z=ce.sibling,z!==null){z.return=ce.return,ce=z;break}ce=ce.return}z=ce}}function Fe(p,g,M,D){p=null;for(var z=g,H=!1;z!==null;){if(!H){if((z.flags&524288)!==0)H=!0;else if((z.flags&262144)!==0)break}if(z.tag===10){var ce=z.alternate;if(ce===null)throw Error(r(387));if(ce=ce.memoizedProps,ce!==null){var Pe=z.type;Ji(z.pendingProps.value,ce.value)||(p!==null?p.push(Pe):p=[Pe])}}else if(z===tp.current){if(ce=z.alternate,ce===null)throw Error(r(387));ce.memoizedState.memoizedState!==z.memoizedState.memoizedState&&(p!==null?p.push(qu):p=[qu])}z=z.return}p!==null&&ke(g,p,M,D),g.flags|=262144}function Ae(p){for(p=p.firstContext;p!==null;){var g=p.context;if(!Ji(Ki?g._currentValue:g._currentValue2,p.memoizedValue))return!0;p=p.next}return!1}function tt(p){bi=p,Sa=null,p=p.dependencies,p!==null&&(p.firstContext=null)}function se(p){return ye(bi,p)}function Z(p,g){return bi===null&&tt(p),ye(p,g)}function ye(p,g){var M=Ki?g._currentValue:g._currentValue2;if(g={context:g,memoizedValue:M,next:null},Sa===null){if(p===null)throw Error(r(308));Sa=g,p.dependencies={lanes:0,firstContext:g},p.flags|=524288}else Sa=Sa.next=g;return M}function Y(){return{controller:new R1,data:new Map,refCount:0}}function J(p){p.refCount--,p.refCount===0&&Lr(XT,function(){p.controller.abort()})}function re(){}function ge(p){p!==si&&p.next===null&&(si===null?np=si=p:si=si.next=p),Jo=!0,us||(us=!0,nt())}function _e(p,g){if(!hg&&Jo){hg=!0;do for(var M=!1,D=np;D!==null;){if(p!==0){var z=D.pendingLanes;if(z===0)var H=0;else{var ce=D.suspendedLanes,Pe=D.pingedLanes;H=(1<<31-Vs(42|p)+1)-1,H&=z&~(ce&~Pe),H=H&201326741?H&201326741|1:H?H|2:0}H!==0&&(M=!0,He(D,H))}else H=Rn,H=_(D,D===yn?H:0,D.cancelPendingCommit!==null||D.timeoutHandle!==Bs),(H&3)===0||A(D,H)||(M=!0,He(D,H));D=D.next}while(M);hg=!1}}function Se(){Ue()}function Ue(){Jo=us=!1;var p=0;Bc!==0&&Wu()&&(p=Bc);for(var g=cs(),M=null,D=np;D!==null;){var z=D.next,H=Me(D,g);H===0?(D.next=null,M===null?np=z:M.next=z,z===null&&(si=M)):(M=D,(p!==0||(H&3)!==0)&&(Jo=!0)),D=z}mr!==0&&mr!==5||_e(p),Bc!==0&&(Bc=0)}function Me(p,g){for(var M=p.suspendedLanes,D=p.pingedLanes,z=p.expirationTimes,H=p.pendingLanes&-62914561;0<H;){var ce=31-Vs(H),Pe=1<<ce,it=z[ce];it===-1?((Pe&M)===0||(Pe&D)!==0)&&(z[ce]=T(Pe,g)):it<=g&&(p.expiredLanes|=Pe),H&=~Pe}if(g=yn,M=Rn,M=_(p,p===g?M:0,p.cancelPendingCommit!==null||p.timeoutHandle!==Bs),D=p.callbackNode,M===0||p===g&&(ai===2||ai===9)||p.cancelPendingCommit!==null)return D!==null&&D!==null&&og(D),p.callbackNode=null,p.callbackPriority=0;if((M&3)===0||A(p,M)){if(g=M&-M,g===p.callbackPriority)return g;switch(D!==null&&og(D),B(M)){case 2:case 8:M=A1;break;case 32:M=Qd;break;case 268435456:M=lg;break;default:M=Qd}return D=Le.bind(null,p),M=Kd(M,D),p.callbackPriority=g,p.callbackNode=M,g}return D!==null&&D!==null&&og(D),p.callbackPriority=2,p.callbackNode=null,2}function Le(p,g){if(mr!==0&&mr!==5)return p.callbackNode=null,p.callbackPriority=0,null;var M=p.callbackNode;if(Ja()&&p.callbackNode!==M)return null;var D=Rn;return D=_(p,p===yn?D:0,p.cancelPendingCommit!==null||p.timeoutHandle!==Bs),D===0?null:(xa(p,D,g),Me(p,cs()),p.callbackNode!=null&&p.callbackNode===M?Le.bind(null,p):null)}function He(p,g){if(Ja())return null;xa(p,g,!0)}function nt(){Wv?$v(function(){(Mn&6)!==0?Kd(ag,Se):Ue()}):Kd(ag,Se)}function Je(){if(Bc===0){var p=Gl;p===0&&(p=sg,sg<<=1,(sg&261888)===0&&(sg=256)),Bc=p}return Bc}function gt(p,g){if(Eh===null){var M=Eh=[];_y=0,Gl=Je(),Er={status:"pending",value:void 0,then:function(D){M.push(D)}}}return _y++,g.then(Re,Re),g}function Re(){if(--_y===0&&Eh!==null){Er!==null&&(Er.status="fulfilled");var p=Eh;Eh=null,Gl=0,Er=null;for(var g=0;g<p.length;g++)(0,p[g])()}}function $e(p,g){var M=[],D={status:"pending",value:null,reason:null,then:function(z){M.push(z)}};return p.then(function(){D.status="fulfilled",D.value=g;for(var z=0;z<M.length;z++)(0,M[z])(g)},function(z){for(D.status="rejected",D.reason=z,z=0;z<M.length;z++)(0,M[z])(void 0)}),D}function at(){var p=Vc.current;return p!==null?p:yn.pooledCache}function _t(p,g){g===null?b(Vc,Vc.current):b(Vc,g.pool)}function st(){var p=at();return p===null?null:{parent:Ki?Oi._currentValue:Oi._currentValue2,pool:p}}function qe(p,g){if(Ji(p,g))return!0;if(typeof p!="object"||p===null||typeof g!="object"||g===null)return!1;var M=Object.keys(p),D=Object.keys(g);if(M.length!==D.length)return!1;for(D=0;D<M.length;D++){var z=M[D];if(!qT.call(g,z)||!Ji(p[z],g[z]))return!1}return!0}function vt(p){return p=p.status,p==="fulfilled"||p==="rejected"}function Rt(p,g,M){switch(M=p[M],M===void 0?p.push(g):M!==g&&(g.then(re,re),g=M),g.status){case"fulfilled":return g.value;case"rejected":throw p=g.reason,$n(p),p;default:if(typeof g.status=="string")g.then(re,re);else{if(p=yn,p!==null&&100<p.shellSuspendCounter)throw Error(r(482));p=g,p.status="pending",p.then(function(D){if(g.status==="pending"){var z=g;z.status="fulfilled",z.value=D}},function(D){if(g.status==="pending"){var z=g;z.status="rejected",z.reason=D}})}switch(g.status){case"fulfilled":return g.value;case"rejected":throw p=g.reason,$n(p),p}throw ws=g,Mr}}function Tt(p){try{var g=p._init;return g(p._payload)}catch(M){throw M!==null&&typeof M=="object"&&typeof M.then=="function"?(ws=M,Mr):M}}function Bt(){if(ws===null)throw Error(r(459));var p=ws;return ws=null,p}function $n(p){if(p===Mr||p===ta)throw Error(r(483))}function qn(p){var g=Qu;return Qu+=1,Gc===null&&(Gc=[]),Rt(Gc,p,g)}function ri(p,g){g=g.props.ref,p.ref=g!==void 0?g:null}function Si(p,g){throw g.$$typeof===Bu?Error(r(525)):(p=Object.prototype.toString.call(g),Error(r(31,p==="[object Object]"?"object with keys {"+Object.keys(g).join(", ")+"}":p)))}function rs(p){function g(Xe,Ge){if(p){var et=Xe.deletions;et===null?(Xe.deletions=[Ge],Xe.flags|=16):et.push(Ge)}}function M(Xe,Ge){if(!p)return null;for(;Ge!==null;)g(Xe,Ge),Ge=Ge.sibling;return null}function D(Xe){for(var Ge=new Map;Xe!==null;)Xe.key!==null?Ge.set(Xe.key,Xe):Ge.set(Xe.index,Xe),Xe=Xe.sibling;return Ge}function z(Xe,Ge){return Xe=mo(Xe,Ge),Xe.index=0,Xe.sibling=null,Xe}function H(Xe,Ge,et){return Xe.index=et,p?(et=Xe.alternate,et!==null?(et=et.index,et<Ge?(Xe.flags|=67108866,Ge):et):(Xe.flags|=67108866,Ge)):(Xe.flags|=1048576,Ge)}function ce(Xe){return p&&Xe.alternate===null&&(Xe.flags|=67108866),Xe}function Pe(Xe,Ge,et,mt){return Ge===null||Ge.tag!==6?(Ge=Iv(et,Xe.mode,mt),Ge.return=Xe,Ge):(Ge=z(Ge,et),Ge.return=Xe,Ge)}function it(Xe,Ge,et,mt){var Wt=et.type;return Wt===Gu?bt(Xe,Ge,et.props.children,mt,et.key):Ge!==null&&(Ge.elementType===Wt||typeof Wt=="object"&&Wt!==null&&Wt.$$typeof===bs&&Tt(Wt)===Ge.type)?(Ge=z(Ge,et.props),ri(Ge,et),Ge.return=Xe,Ge):(Ge=Nl(et.type,et.key,et.props,null,Xe.mode,mt),ri(Ge,et),Ge.return=Xe,Ge)}function ht(Xe,Ge,et,mt){return Ge===null||Ge.tag!==4||Ge.stateNode.containerInfo!==et.containerInfo||Ge.stateNode.implementation!==et.implementation?(Ge=Uv(et,Xe.mode,mt),Ge.return=Xe,Ge):(Ge=z(Ge,et.children||[]),Ge.return=Xe,Ge)}function bt(Xe,Ge,et,mt,Wt){return Ge===null||Ge.tag!==7?(Ge=$o(et,Xe.mode,mt,Wt),Ge.return=Xe,Ge):(Ge=z(Ge,et),Ge.return=Xe,Ge)}function dt(Xe,Ge,et){if(typeof Ge=="string"&&Ge!==""||typeof Ge=="number"||typeof Ge=="bigint")return Ge=Iv(""+Ge,Xe.mode,et),Ge.return=Xe,Ge;if(typeof Ge=="object"&&Ge!==null){switch(Ge.$$typeof){case el:return et=Nl(Ge.type,Ge.key,Ge.props,null,Xe.mode,et),ri(et,Ge),et.return=Xe,et;case Vu:return Ge=Uv(Ge,Xe.mode,et),Ge.return=Xe,Ge;case bs:return Ge=Tt(Ge),dt(Xe,Ge,et)}if(Uc(Ge)||f(Ge))return Ge=$o(Ge,Xe.mode,et,null),Ge.return=Xe,Ge;if(typeof Ge.then=="function")return dt(Xe,qn(Ge),et);if(Ge.$$typeof===qo)return dt(Xe,Z(Xe,Ge),et);Si(Xe,Ge)}return null}function Dt(Xe,Ge,et,mt){var Wt=Ge!==null?Ge.key:null;if(typeof et=="string"&&et!==""||typeof et=="number"||typeof et=="bigint")return Wt!==null?null:Pe(Xe,Ge,""+et,mt);if(typeof et=="object"&&et!==null){switch(et.$$typeof){case el:return et.key===Wt?it(Xe,Ge,et,mt):null;case Vu:return et.key===Wt?ht(Xe,Ge,et,mt):null;case bs:return et=Tt(et),Dt(Xe,Ge,et,mt)}if(Uc(et)||f(et))return Wt!==null?null:bt(Xe,Ge,et,mt,null);if(typeof et.then=="function")return Dt(Xe,Ge,qn(et),mt);if(et.$$typeof===qo)return Dt(Xe,Ge,Z(Xe,et),mt);Si(Xe,et)}return null}function nn(Xe,Ge,et,mt,Wt){if(typeof mt=="string"&&mt!==""||typeof mt=="number"||typeof mt=="bigint")return Xe=Xe.get(et)||null,Pe(Ge,Xe,""+mt,Wt);if(typeof mt=="object"&&mt!==null){switch(mt.$$typeof){case el:return Xe=Xe.get(mt.key===null?et:mt.key)||null,it(Ge,Xe,mt,Wt);case Vu:return Xe=Xe.get(mt.key===null?et:mt.key)||null,ht(Ge,Xe,mt,Wt);case bs:return mt=Tt(mt),nn(Xe,Ge,et,mt,Wt)}if(Uc(mt)||f(mt))return Xe=Xe.get(et)||null,bt(Ge,Xe,mt,Wt,null);if(typeof mt.then=="function")return nn(Xe,Ge,et,qn(mt),Wt);if(mt.$$typeof===qo)return nn(Xe,Ge,et,Z(Ge,mt),Wt);Si(Ge,mt)}return null}function nr(Xe,Ge,et,mt){for(var Wt=null,Bi=null,qt=Ge,Bn=Ge=0,Pr=null;qt!==null&&Bn<et.length;Bn++){qt.index>Bn?(Pr=qt,qt=null):Pr=qt.sibling;var Xn=Dt(Xe,qt,et[Bn],mt);if(Xn===null){qt===null&&(qt=Pr);break}p&&qt&&Xn.alternate===null&&g(Xe,qt),Ge=H(Xn,Ge,Bn),Bi===null?Wt=Xn:Bi.sibling=Xn,Bi=Xn,qt=Pr}if(Bn===et.length)return M(Xe,qt),Cn&&ie(Xe,Bn),Wt;if(qt===null){for(;Bn<et.length;Bn++)qt=dt(Xe,et[Bn],mt),qt!==null&&(Ge=H(qt,Ge,Bn),Bi===null?Wt=qt:Bi.sibling=qt,Bi=qt);return Cn&&ie(Xe,Bn),Wt}for(qt=D(qt);Bn<et.length;Bn++)Pr=nn(qt,Xe,Bn,et[Bn],mt),Pr!==null&&(p&&Pr.alternate!==null&&qt.delete(Pr.key===null?Bn:Pr.key),Ge=H(Pr,Ge,Bn),Bi===null?Wt=Pr:Bi.sibling=Pr,Bi=Pr);return p&&qt.forEach(function(ra){return g(Xe,ra)}),Cn&&ie(Xe,Bn),Wt}function Lh(Xe,Ge,et,mt){if(et==null)throw Error(r(151));for(var Wt=null,Bi=null,qt=Ge,Bn=Ge=0,Pr=null,Xn=et.next();qt!==null&&!Xn.done;Bn++,Xn=et.next()){qt.index>Bn?(Pr=qt,qt=null):Pr=qt.sibling;var ra=Dt(Xe,qt,Xn.value,mt);if(ra===null){qt===null&&(qt=Pr);break}p&&qt&&ra.alternate===null&&g(Xe,qt),Ge=H(ra,Ge,Bn),Bi===null?Wt=ra:Bi.sibling=ra,Bi=ra,qt=Pr}if(Xn.done)return M(Xe,qt),Cn&&ie(Xe,Bn),Wt;if(qt===null){for(;!Xn.done;Bn++,Xn=et.next())Xn=dt(Xe,Xn.value,mt),Xn!==null&&(Ge=H(Xn,Ge,Bn),Bi===null?Wt=Xn:Bi.sibling=Xn,Bi=Xn);return Cn&&ie(Xe,Bn),Wt}for(qt=D(qt);!Xn.done;Bn++,Xn=et.next())Xn=nn(qt,Xe,Bn,Xn.value,mt),Xn!==null&&(p&&Xn.alternate!==null&&qt.delete(Xn.key===null?Bn:Xn.key),Ge=H(Xn,Ge,Bn),Bi===null?Wt=Xn:Bi.sibling=Xn,Bi=Xn);return p&&qt.forEach(function(YT){return g(Xe,YT)}),Cn&&ie(Xe,Bn),Wt}function Zc(Xe,Ge,et,mt){if(typeof et=="object"&&et!==null&&et.type===Gu&&et.key===null&&(et=et.props.children),typeof et=="object"&&et!==null){switch(et.$$typeof){case el:e:{for(var Wt=et.key;Ge!==null;){if(Ge.key===Wt){if(Wt=et.type,Wt===Gu){if(Ge.tag===7){M(Xe,Ge.sibling),mt=z(Ge,et.props.children),mt.return=Xe,Xe=mt;break e}}else if(Ge.elementType===Wt||typeof Wt=="object"&&Wt!==null&&Wt.$$typeof===bs&&Tt(Wt)===Ge.type){M(Xe,Ge.sibling),mt=z(Ge,et.props),ri(mt,et),mt.return=Xe,Xe=mt;break e}M(Xe,Ge);break}else g(Xe,Ge);Ge=Ge.sibling}et.type===Gu?(mt=$o(et.props.children,Xe.mode,mt,et.key),mt.return=Xe,Xe=mt):(mt=Nl(et.type,et.key,et.props,null,Xe.mode,mt),ri(mt,et),mt.return=Xe,Xe=mt)}return ce(Xe);case Vu:e:{for(Wt=et.key;Ge!==null;){if(Ge.key===Wt)if(Ge.tag===4&&Ge.stateNode.containerInfo===et.containerInfo&&Ge.stateNode.implementation===et.implementation){M(Xe,Ge.sibling),mt=z(Ge,et.children||[]),mt.return=Xe,Xe=mt;break e}else{M(Xe,Ge);break}else g(Xe,Ge);Ge=Ge.sibling}mt=Uv(et,Xe.mode,mt),mt.return=Xe,Xe=mt}return ce(Xe);case bs:return et=Tt(et),Zc(Xe,Ge,et,mt)}if(Uc(et))return nr(Xe,Ge,et,mt);if(f(et)){if(Wt=f(et),typeof Wt!="function")throw Error(r(150));return et=Wt.call(et),Lh(Xe,Ge,et,mt)}if(typeof et.then=="function")return Zc(Xe,Ge,qn(et),mt);if(et.$$typeof===qo)return Zc(Xe,Ge,Z(Xe,et),mt);Si(Xe,et)}return typeof et=="string"&&et!==""||typeof et=="number"||typeof et=="bigint"?(et=""+et,Ge!==null&&Ge.tag===6?(M(Xe,Ge.sibling),mt=z(Ge,et),mt.return=Xe,Xe=mt):(M(Xe,Ge),mt=Iv(et,Xe.mode,mt),mt.return=Xe,Xe=mt),ce(Xe)):M(Xe,Ge)}return function(Xe,Ge,et,mt){try{Qu=0;var Wt=Zc(Xe,Ge,et,mt);return Gc=null,Wt}catch(qt){if(qt===Mr||qt===ta)throw qt;var Bi=t(29,qt,null,Xe.mode);return Bi.lanes=mt,Bi.return=Xe,Bi}}}function _r(){for(var p=ol,g=Ju=ol=0;g<p;){var M=Yr[g];Yr[g++]=null;var D=Yr[g];Yr[g++]=null;var z=Yr[g];Yr[g++]=null;var H=Yr[g];if(Yr[g++]=null,D!==null&&z!==null){var ce=D.pending;ce===null?z.next=z:(z.next=ce.next,ce.next=z),D.pending=z}H!==0&&ei(M,z,H)}}function Ar(p,g,M,D){Yr[ol++]=p,Yr[ol++]=g,Yr[ol++]=M,Yr[ol++]=D,Ju|=D,p.lanes|=D,p=p.alternate,p!==null&&(p.lanes|=D)}function Gr(p,g,M,D){return Ar(p,g,M,D),Zn(p)}function Yi(p,g){return Ar(p,null,null,g),Zn(p)}function ei(p,g,M){p.lanes|=M;var D=p.alternate;D!==null&&(D.lanes|=M);for(var z=!1,H=p.return;H!==null;)H.childLanes|=M,D=H.alternate,D!==null&&(D.childLanes|=M),H.tag===22&&(p=H.stateNode,p===null||p._visibility&1||(z=!0)),p=H,H=H.return;return p.tag===3?(H=p.stateNode,z&&g!==null&&(z=31-Vs(M),p=H.hiddenUpdates,D=p[z],D===null?p[z]=[g]:D.push(g),g.lane=M|536870912),H):null}function Zn(p){if(50<jn)throw jn=0,lp=null,Error(r(185));for(var g=p.return;g!==null;)p=g,g=p.return;return p.tag===3?p.stateNode:null}function Hi(p){p.updateQueue={baseState:p.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ps(p,g){p=p.updateQueue,g.updateQueue===p&&(g.updateQueue={baseState:p.baseState,firstBaseUpdate:p.firstBaseUpdate,lastBaseUpdate:p.lastBaseUpdate,shared:p.shared,callbacks:null})}function Is(p){return{lane:p,tag:0,payload:null,callback:null,next:null}}function oo(p,g,M){var D=p.updateQueue;if(D===null)return null;if(D=D.shared,(Mn&2)!==0){var z=D.pending;return z===null?g.next=g:(g.next=z.next,z.next=g),D.pending=g,g=Zn(p),ei(p,null,M),g}return Ar(p,D,g,M),Zn(p)}function ko(p,g,M){if(g=g.updateQueue,g!==null&&(g=g.shared,(M&4194048)!==0)){var D=g.lanes;D&=p.pendingLanes,M|=D,g.lanes=M,L(p,M)}}function Na(p,g){var M=p.updateQueue,D=p.alternate;if(D!==null&&(D=D.updateQueue,M===D)){var z=null,H=null;if(M=M.firstBaseUpdate,M!==null){do{var ce={lane:M.lane,tag:M.tag,payload:M.payload,callback:null,next:null};H===null?z=H=ce:H=H.next=ce,M=M.next}while(M!==null);H===null?z=H=g:H=H.next=g}else z=H=g;M={baseState:D.baseState,firstBaseUpdate:z,lastBaseUpdate:H,shared:D.shared,callbacks:D.callbacks},p.updateQueue=M;return}p=M.lastBaseUpdate,p===null?M.firstBaseUpdate=g:p.next=g,M.lastBaseUpdate=g}function ao(){if(pg){var p=Er;if(p!==null)throw p}}function pe(p,g,M,D){pg=!1;var z=p.updateQueue;yo=!1;var H=z.firstBaseUpdate,ce=z.lastBaseUpdate,Pe=z.shared.pending;if(Pe!==null){z.shared.pending=null;var it=Pe,ht=it.next;it.next=null,ce===null?H=ht:ce.next=ht,ce=it;var bt=p.alternate;bt!==null&&(bt=bt.updateQueue,Pe=bt.lastBaseUpdate,Pe!==ce&&(Pe===null?bt.firstBaseUpdate=ht:Pe.next=ht,bt.lastBaseUpdate=it))}if(H!==null){var dt=z.baseState;ce=0,bt=ht=it=null,Pe=H;do{var Dt=Pe.lane&-536870913,nn=Dt!==Pe.lane;if(nn?(Rn&Dt)===Dt:(D&Dt)===Dt){Dt!==0&&Dt===Gl&&(pg=!0),bt!==null&&(bt=bt.next={lane:0,tag:Pe.tag,payload:Pe.payload,callback:null,next:null});e:{var nr=p,Lh=Pe;Dt=g;var Zc=M;switch(Lh.tag){case 1:if(nr=Lh.payload,typeof nr=="function"){dt=nr.call(Zc,dt,Dt);break e}dt=nr;break e;case 3:nr.flags=nr.flags&-65537|128;case 0:if(nr=Lh.payload,Dt=typeof nr=="function"?nr.call(Zc,dt,Dt):nr,Dt==null)break e;dt=Gm({},dt,Dt);break e;case 2:yo=!0}}Dt=Pe.callback,Dt!==null&&(p.flags|=64,nn&&(p.flags|=8192),nn=z.callbacks,nn===null?z.callbacks=[Dt]:nn.push(Dt))}else nn={lane:Dt,tag:Pe.tag,payload:Pe.payload,callback:Pe.callback,next:null},bt===null?(ht=bt=nn,it=dt):bt=bt.next=nn,ce|=Dt;if(Pe=Pe.next,Pe===null){if(Pe=z.shared.pending,Pe===null)break;nn=Pe,Pe=nn.next,nn.next=null,z.lastBaseUpdate=nn,z.shared.pending=null}}while(!0);bt===null&&(it=dt),z.baseState=it,z.firstBaseUpdate=ht,z.lastBaseUpdate=bt,H===null&&(z.shared.lanes=0),jl|=ce,p.lanes=ce,p.memoizedState=dt}}function Be(p,g){if(typeof p!="function")throw Error(r(191,p));p.call(g)}function Ye(p,g){var M=p.callbacks;if(M!==null)for(p.callbacks=null,p=0;p<M.length;p++)Be(M[p],g)}function Ke(p,g){p=ll,b(Hc,p),b(ef,g),ll=p|g.baseLanes}function De(){b(Hc,ll),b(ef,ef.current)}function lt(){ll=Hc.current,v(ef),v(Hc)}function xt(p){var g=p.alternate;b($i,$i.current&1),b(Hs,p),js===null&&(g===null||ef.current!==null||g.memoizedState!==null)&&(js=p)}function Ct(p){b($i,$i.current),b(Hs,p),js===null&&(js=p)}function Et(p){p.tag===22?(b($i,$i.current),b(Hs,p),js===null&&(js=p)):Pt()}function Pt(){b($i,$i.current),b(Hs,Hs.current)}function It(p){v(Hs),js===p&&(js=null),v($i)}function Ut(p){for(var g=p;g!==null;){if(g.tag===13){var M=g.memoizedState;if(M!==null&&(M=M.dehydrated,M===null||zc(M)||Zm(M)))return g}else if(g.tag===19&&(g.memoizedProps.revealOrder==="forwards"||g.memoizedProps.revealOrder==="backwards"||g.memoizedProps.revealOrder==="unstable_legacy-backwards"||g.memoizedProps.revealOrder==="together")){if((g.flags&128)!==0)return g}else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===p)break;for(;g.sibling===null;){if(g.return===null||g.return===p)return null;g=g.return}g.sibling.return=g.return,g=g.sibling}return null}function Nt(){throw Error(r(321))}function In(p,g){if(g===null)return!1;for(var M=0;M<g.length&&M<p.length;M++)if(!Ji(p[M],g[M]))return!1;return!0}function kn(p,g,M,D,z,H){return Hl=H,ln=g,g.memoizedState=null,g.updateQueue=null,g.lanes=0,Ht.H=p===null||p.memoizedState===null?ki:al,Nn=!1,H=M(D,z),Nn=!1,dn&&(H=sn(g,M,D,z)),zn(p),H}function zn(p){Ht.H=bo;var g=Gt!==null&&Gt.next!==null;if(Hl=0,Jt=Gt=ln=null,vn=!1,na=0,Ea=null,g)throw Error(r(300));p===null||Ei||(p=p.dependencies,p!==null&&Ae(p)&&(Ei=!0))}function sn(p,g,M,D){ln=p;var z=0;do{if(dn&&(Ea=null),na=0,dn=!1,25<=z)throw Error(r(301));if(z+=1,Jt=Gt=null,p.updateQueue!=null){var H=p.updateQueue;H.lastEffect=null,H.events=null,H.stores=null,H.memoCache!=null&&(H.memoCache.index=0)}Ht.H=jc,H=g(M,D)}while(dn);return H}function Lt(){var p=Ht.H,g=p.useState()[0];return g=typeof g.then=="function"?$t(g):g,p=p.useState()[0],(Gt!==null?Gt.memoizedState:null)!==p&&(ln.flags|=1024),g}function Fn(){var p=fs!==0;return fs=0,p}function mn(p,g,M){g.updateQueue=p.updateQueue,g.flags&=-2053,p.lanes&=~M}function gi(p){if(vn){for(p=p.memoizedState;p!==null;){var g=p.queue;g!==null&&(g.pending=null),p=p.next}vn=!1}Hl=0,Jt=Gt=ln=null,dn=!1,na=fs=0,Ea=null}function di(){var p={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Jt===null?ln.memoizedState=Jt=p:Jt=Jt.next=p,Jt}function on(){if(Gt===null){var p=ln.alternate;p=p!==null?p.memoizedState:null}else p=Gt.next;var g=Jt===null?ln.memoizedState:Jt.next;if(g!==null)Jt=g,Gt=p;else{if(p===null)throw ln.alternate===null?Error(r(467)):Error(r(310));Gt=p,p={memoizedState:Gt.memoizedState,baseState:Gt.baseState,baseQueue:Gt.baseQueue,queue:Gt.queue,next:null},Jt===null?ln.memoizedState=Jt=p:Jt=Jt.next=p}return Jt}function Ns(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function $t(p){var g=na;return na+=1,Ea===null&&(Ea=[]),p=Rt(Ea,p,g),g=ln,(Jt===null?g.memoizedState:Jt.next)===null&&(g=g.alternate,Ht.H=g===null||g.memoizedState===null?ki:al),p}function Zi(p){if(p!==null&&typeof p=="object"){if(typeof p.then=="function")return $t(p);if(p.$$typeof===qo)return se(p)}throw Error(r(438,String(p)))}function ji(p){var g=null,M=ln.updateQueue;if(M!==null&&(g=M.memoCache),g==null){var D=ln.alternate;D!==null&&(D=D.updateQueue,D!==null&&(D=D.memoCache,D!=null&&(g={data:D.data.map(function(z){return z.slice()}),index:0})))}if(g==null&&(g={data:[],index:0}),M===null&&(M=Ns(),ln.updateQueue=M),M.memoCache=g,M=g.data[g.index],M===void 0)for(M=g.data[g.index]=Array(p),D=0;D<p;D++)M[D]=zv;return g.index++,M}function Hn(p,g){return typeof g=="function"?g(p):g}function pi(p){var g=on();return lo(g,Gt,p)}function lo(p,g,M){var D=p.queue;if(D===null)throw Error(r(311));D.lastRenderedReducer=M;var z=p.baseQueue,H=D.pending;if(H!==null){if(z!==null){var ce=z.next;z.next=H.next,H.next=ce}g.baseQueue=z=H,D.pending=null}if(H=p.baseState,z===null)p.memoizedState=H;else{g=z.next;var Pe=ce=null,it=null,ht=g,bt=!1;do{var dt=ht.lane&-536870913;if(dt!==ht.lane?(Rn&dt)===dt:(Hl&dt)===dt){var Dt=ht.revertLane;if(Dt===0)it!==null&&(it=it.next={lane:0,revertLane:0,gesture:null,action:ht.action,hasEagerState:ht.hasEagerState,eagerState:ht.eagerState,next:null}),dt===Gl&&(bt=!0);else if((Hl&Dt)===Dt){ht=ht.next,Dt===Gl&&(bt=!0);continue}else dt={lane:0,revertLane:ht.revertLane,gesture:null,action:ht.action,hasEagerState:ht.hasEagerState,eagerState:ht.eagerState,next:null},it===null?(Pe=it=dt,ce=H):it=it.next=dt,ln.lanes|=Dt,jl|=Dt;dt=ht.action,Nn&&M(H,dt),H=ht.hasEagerState?ht.eagerState:M(H,dt)}else Dt={lane:dt,revertLane:ht.revertLane,gesture:ht.gesture,action:ht.action,hasEagerState:ht.hasEagerState,eagerState:ht.eagerState,next:null},it===null?(Pe=it=Dt,ce=H):it=it.next=Dt,ln.lanes|=dt,jl|=dt;ht=ht.next}while(ht!==null&&ht!==g);if(it===null?ce=H:it.next=Pe,!Ji(H,p.memoizedState)&&(Ei=!0,bt&&(M=Er,M!==null)))throw M;p.memoizedState=H,p.baseState=ce,p.baseQueue=it,D.lastRenderedState=H}return z===null&&(D.lanes=0),[p.memoizedState,D.dispatch]}function Hr(p){var g=on(),M=g.queue;if(M===null)throw Error(r(311));M.lastRenderedReducer=p;var D=M.dispatch,z=M.pending,H=g.memoizedState;if(z!==null){M.pending=null;var ce=z=z.next;do H=p(H,ce.action),ce=ce.next;while(ce!==z);Ji(H,g.memoizedState)||(Ei=!0),g.memoizedState=H,g.baseQueue===null&&(g.baseState=H),M.lastRenderedState=H}return[H,D]}function va(p,g,M){var D=ln,z=on(),H=Cn;if(H){if(M===void 0)throw Error(r(407));M=M()}else M=g();var ce=!Ji((Gt||z).memoizedState,M);if(ce&&(z.memoizedState=M,Ei=!0),z=z.queue,Bo(Tu.bind(null,D,z,p),[p]),z.getSnapshot!==g||ce||Jt!==null&&Jt.memoizedState.tag&1){if(D.flags|=2048,os(9,{destroy:void 0},Jf.bind(null,D,z,M,g),null),yn===null)throw Error(r(349));H||(Hl&127)!==0||Ad(D,g,M)}return M}function Ad(p,g,M){p.flags|=16384,p={getSnapshot:g,value:M},g=ln.updateQueue,g===null?(g=Ns(),ln.updateQueue=g,g.stores=[p]):(M=g.stores,M===null?g.stores=[p]:M.push(p))}function Jf(p,g,M,D){g.value=M,g.getSnapshot=D,Ua(g)&&Cd(p)}function Tu(p,g,M){return M(function(){Ua(g)&&Cd(p)})}function Ua(p){var g=p.getSnapshot;p=p.value;try{var M=g();return!Ji(p,M)}catch{return!0}}function Cd(p){var g=Yi(p,2);g!==null&&Ni(g,p,2)}function vc(p){var g=di();if(typeof p=="function"){var M=p;if(p=M(),Nn){k(!0);try{M()}finally{k(!1)}}}return g.memoizedState=g.baseState=p,g.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hn,lastRenderedState:p},g}function zo(p,g,M,D){return p.baseState=M,lo(p,Gt,typeof D=="function"?D:Hn)}function ss(p,g,M,D,z){if(wm(p))throw Error(r(485));if(p=g.action,p!==null){var H={payload:z,action:p,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(ce){H.listeners.push(ce)}};Ht.T!==null?M(!0):H.isTransition=!1,D(H),M=g.pending,M===null?(H.next=g.pending=H,ka(g,H)):(H.next=M.next,g.pending=M.next=H)}}function ka(p,g){var M=g.action,D=g.payload,z=p.state;if(g.isTransition){var H=Ht.T,ce={};Ht.T=ce;try{var Pe=M(z,D),it=Ht.S;it!==null&&it(ce,Pe),Au(p,g,Pe)}catch(ht){Fo(p,g,ht)}finally{H!==null&&ce.types!==null&&(H.types=ce.types),Ht.T=H}}else try{H=M(z,D),Au(p,g,H)}catch(ht){Fo(p,g,ht)}}function Au(p,g,M){M!==null&&typeof M=="object"&&typeof M.then=="function"?M.then(function(D){co(p,g,D)},function(D){return Fo(p,g,D)}):co(p,g,M)}function co(p,g,M){g.status="fulfilled",g.value=M,Cu(g),p.state=M,g=p.pending,g!==null&&(M=g.next,M===g?p.pending=null:(M=M.next,g.next=M,ka(p,M)))}function Fo(p,g,M){var D=p.pending;if(p.pending=null,D!==null){D=D.next;do g.status="rejected",g.reason=M,Cu(g),g=g.next;while(g!==D)}p.action=null}function Cu(p){p=p.listeners;for(var g=0;g<p.length;g++)(0,p[g])()}function Ru(p,g){return g}function yc(p,g){if(Cn){var M=yn.formState;if(M!==null){e:{var D=ln;if(Cn){if(Di){var z=i1(Di,xs);if(z){Di=r1(z),D=iy(z);break e}}Te(D)}D=!1}D&&(g=M[0])}}M=di(),M.memoizedState=M.baseState=g,D={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ru,lastRenderedState:g},M.queue=D,M=_a.bind(null,ln,D),D.dispatch=M,D=vc(!1);var H=xm.bind(null,ln,!1,D.queue);return D=di(),z={state:g,dispatch:null,action:p,pending:null},D.queue=z,M=ss.bind(null,ln,z,H,M),z.dispatch=M,D.memoizedState=p,[g,M,!1]}function za(p){var g=on();return uo(g,Gt,p)}function uo(p,g,M){if(g=lo(p,g,Ru)[0],p=pi(Hn)[0],typeof g=="object"&&g!==null&&typeof g.then=="function")try{var D=$t(g)}catch(ce){throw ce===Mr?ta:ce}else D=g;g=on();var z=g.queue,H=z.dispatch;return M!==g.memoizedState&&(ln.flags|=2048,os(9,{destroy:void 0},gs.bind(null,z,M),null)),[D,H,p]}function gs(p,g){p.action=g}function Fa(p){var g=on(),M=Gt;if(M!==null)return uo(g,M,p);on(),g=g.memoizedState,M=on();var D=M.queue.dispatch;return M.memoizedState=p,[g,D,!1]}function os(p,g,M,D){return p={tag:p,create:M,deps:D,inst:g,next:null},g=ln.updateQueue,g===null&&(g=Ns(),ln.updateQueue=g),M=g.lastEffect,M===null?g.lastEffect=p.next=p:(D=M.next,M.next=p,p.next=D,g.lastEffect=p),p}function Du(){return on().memoizedState}function ya(p,g,M,D){var z=di();ln.flags|=p,z.memoizedState=os(1|g,{destroy:void 0},M,D===void 0?null:D)}function bc(p,g,M,D){var z=on();D=D===void 0?null:D;var H=z.memoizedState.inst;Gt!==null&&D!==null&&In(D,Gt.memoizedState.deps)?z.memoizedState=os(g,H,M,D):(ln.flags|=p,z.memoizedState=os(1|g,H,M,D))}function _c(p,g){ya(8390656,8,p,g)}function Bo(p,g){bc(2048,8,p,g)}function xc(p){ln.flags|=4;var g=ln.updateQueue;if(g===null)g=Ns(),ln.updateQueue=g,g.events=[p];else{var M=g.events;M===null?g.events=[p]:M.push(p)}}function Ai(p){var g=on().memoizedState;return xc({ref:g,nextImpl:p}),function(){if((Mn&2)!==0)throw Error(r(440));return g.impl.apply(void 0,arguments)}}function ba(p,g){return bc(4,2,p,g)}function Rl(p,g){return bc(4,4,p,g)}function Ba(p,g){if(typeof g=="function"){p=p();var M=g(p);return function(){typeof M=="function"?M():g(null)}}if(g!=null)return p=p(),g.current=p,function(){g.current=null}}function wc(p,g,M){M=M!=null?M.concat([p]):null,bc(4,4,Ba.bind(null,g,p),M)}function Sc(){}function Va(p,g){var M=on();g=g===void 0?null:g;var D=M.memoizedState;return g!==null&&In(g,D[1])?D[0]:(M.memoizedState=[p,g],p)}function Ga(p,g){var M=on();g=g===void 0?null:g;var D=M.memoizedState;if(g!==null&&In(g,D[1]))return D[0];if(D=p(),Nn){k(!0);try{p()}finally{k(!1)}}return M.memoizedState=[D,g],D}function fr(p,g,M){return M===void 0||(Hl&1073741824)!==0&&(Rn&261930)===0?p.memoizedState=g:(p.memoizedState=M,p=Ll(),ln.lanes|=p,jl|=p,M)}function Rd(p,g,M,D){return Ji(M,g)?M:ef.current!==null?(p=fr(p,M,D),Ji(p,g)||(Ei=!0),p):(Hl&42)===0||(Hl&1073741824)!==0&&(Rn&261930)===0?(Ei=!0,p.memoizedState=M):(p=Ll(),ln.lanes|=p,jl|=p,g)}function Ou(p,g,M,D,z){var H=Xo();An(H!==0&&8>H?H:8);var ce=Ht.T,Pe={};Ht.T=Pe,xm(p,!1,g,M);try{var it=z(),ht=Ht.S;if(ht!==null&&ht(Pe,it),it!==null&&typeof it=="object"&&typeof it.then=="function"){var bt=$e(it,D);Ec(p,g,bt,Ci(p))}else Ec(p,g,D,Ci(p))}catch(dt){Ec(p,g,{then:function(){},status:"rejected",reason:dt},Ci())}finally{An(H),ce!==null&&Pe.types!==null&&(ce.types=Pe.types),Ht.T=ce}}function Lu(p){var g=p.memoizedState;if(g!==null)return g;g={memoizedState:$u,baseState:$u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hn,lastRenderedState:$u},next:null};var M={};return g.next={memoizedState:M,baseState:M,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hn,lastRenderedState:M},next:null},p.memoizedState=g,p=p.alternate,p!==null&&(p.memoizedState=g),g}function eh(){return se(qu)}function th(){return on().memoizedState}function jr(){return on().memoizedState}function fo(p){for(var g=p.return;g!==null;){switch(g.tag){case 24:case 3:var M=Ci();p=Is(M);var D=oo(g,p,M);D!==null&&(Ni(D,g,M),ko(D,g,M)),g={cache:Y()},p.payload=g;return}g=g.return}}function as(p,g,M){var D=Ci();M={lane:D,revertLane:0,gesture:null,action:M,hasEagerState:!1,eagerState:null,next:null},wm(p)?gx(g,M):(M=Gr(p,g,M,D),M!==null&&(Ni(M,p,D),vx(M,g,D)))}function _a(p,g,M){var D=Ci();Ec(p,g,M,D)}function Ec(p,g,M,D){var z={lane:D,revertLane:0,gesture:null,action:M,hasEagerState:!1,eagerState:null,next:null};if(wm(p))gx(g,z);else{var H=p.alternate;if(p.lanes===0&&(H===null||H.lanes===0)&&(H=g.lastRenderedReducer,H!==null))try{var ce=g.lastRenderedState,Pe=H(ce,M);if(z.hasEagerState=!0,z.eagerState=Pe,Ji(Pe,ce))return Ar(p,g,z,0),yn===null&&_r(),!1}catch{}if(M=Gr(p,g,z,D),M!==null)return Ni(M,p,D),vx(M,g,D),!0}return!1}function xm(p,g,M,D){if(D={lane:2,revertLane:Je(),gesture:null,action:D,hasEagerState:!1,eagerState:null,next:null},wm(p)){if(g)throw Error(r(479))}else g=Gr(p,M,D,2),g!==null&&Ni(g,p,2)}function wm(p){var g=p.alternate;return p===ln||g!==null&&g===ln}function gx(p,g){dn=vn=!0;var M=p.pending;M===null?g.next=g:(g.next=M.next,M.next=g),p.pending=g}function vx(p,g,M){if((M&4194048)!==0){var D=g.lanes;D&=p.pendingLanes,M|=D,g.lanes=M,L(p,M)}}function mv(p,g,M,D){g=p.memoizedState,M=M(D,g),M=M==null?g:Gm({},g,M),p.memoizedState=M,p.lanes===0&&(p.updateQueue.baseState=M)}function Sm(p,g,M,D,z,H,ce){return p=p.stateNode,typeof p.shouldComponentUpdate=="function"?p.shouldComponentUpdate(D,H,ce):g.prototype&&g.prototype.isPureReactComponent?!qe(M,D)||!qe(z,H):!0}function yx(p,g,M,D){p=g.state,typeof g.componentWillReceiveProps=="function"&&g.componentWillReceiveProps(M,D),typeof g.UNSAFE_componentWillReceiveProps=="function"&&g.UNSAFE_componentWillReceiveProps(M,D),g.state!==p&&ip.enqueueReplaceState(g,g.state,null)}function Pu(p,g){var M=g;if("ref"in g){M={};for(var D in g)D!=="ref"&&(M[D]=g[D])}if(p=p.defaultProps){M===g&&(M=Gm({},M));for(var z in p)M[z]===void 0&&(M[z]=p[z])}return M}function Em(p,g){try{var M=p.onUncaughtError;M(g.value,{componentStack:g.stack})}catch(D){setTimeout(function(){throw D})}}function gv(p,g,M){try{var D=p.onCaughtError;D(M.value,{componentStack:M.stack,errorBoundary:g.tag===1?g.stateNode:null})}catch(z){setTimeout(function(){throw z})}}function vv(p,g,M){return M=Is(M),M.tag=3,M.payload={element:null},M.callback=function(){Em(p,g)},M}function bx(p){return p=Is(p),p.tag=3,p}function _x(p,g,M,D){var z=M.type.getDerivedStateFromError;if(typeof z=="function"){var H=D.value;p.payload=function(){return z(H)},p.callback=function(){gv(g,M,D)}}var ce=M.stateNode;ce!==null&&typeof ce.componentDidCatch=="function"&&(p.callback=function(){gv(g,M,D),typeof z!="function"&&(Wl===null?Wl=new Set([this]):Wl.add(this));var Pe=D.stack;this.componentDidCatch(D.value,{componentStack:Pe!==null?Pe:""})})}function FT(p,g,M,D,z){if(M.flags|=32768,D!==null&&typeof D=="object"&&typeof D.then=="function"){if(g=M.alternate,g!==null&&Fe(g,M,z,!0),M=Hs.current,M!==null){switch(M.tag){case 31:case 13:return js===null?hh():M.alternate===null&&Fi===0&&(Fi=3),M.flags&=-257,M.flags|=65536,M.lanes=z,D===sl?M.flags|=16384:(g=M.updateQueue,g===null?M.updateQueue=new Set([D]):g.add(D),mh(p,D,z)),!1;case 22:return M.flags|=65536,D===sl?M.flags|=16384:(g=M.updateQueue,g===null?(g={transitions:null,markerInstances:null,retryQueue:new Set([D])},M.updateQueue=g):(M=g.retryQueue,M===null?g.retryQueue=new Set([D]):M.add(D)),mh(p,D,z)),!1}throw Error(r(435,M.tag))}return mh(p,D,z),hh(),!1}if(Cn)return g=Hs.current,g!==null?((g.flags&65536)===0&&(g.flags|=256),g.flags|=65536,g.lanes=z,D!==fg&&(p=Error(r(422),{cause:D}),xe(te(p,M)))):(D!==fg&&(g=Error(r(423),{cause:D}),xe(te(g,M))),p=p.current.alternate,p.flags|=65536,z&=-z,p.lanes|=z,D=te(D,M),z=vv(p.stateNode,D,z),Na(p,z),Fi!==4&&(Fi=2)),!1;var H=Error(r(520),{cause:D});if(H=te(H,M),sp===null?sp=[H]:sp.push(H),Fi!==4&&(Fi=2),g===null)return!0;D=te(D,M),M=g;do{switch(M.tag){case 3:return M.flags|=65536,p=z&-z,M.lanes|=p,p=vv(M.stateNode,D,p),Na(M,p),!1;case 1:if(g=M.type,H=M.stateNode,(M.flags&128)===0&&(typeof g.getDerivedStateFromError=="function"||H!==null&&typeof H.componentDidCatch=="function"&&(Wl===null||!Wl.has(H))))return M.flags|=65536,z&=-z,M.lanes|=z,z=bx(z),_x(z,p,M,D),Na(M,z),!1}M=M.return}while(M!==null);return!1}function Wr(p,g,M,D){g.child=p===null?xy(g,null,M,D):Xr(g,p.child,M,D)}function xx(p,g,M,D,z){M=M.render;var H=g.ref;if("ref"in D){var ce={};for(var Pe in D)Pe!=="ref"&&(ce[Pe]=D[Pe])}else ce=D;return tt(g),D=kn(p,g,M,ce,H,z),Pe=Fn(),p!==null&&!Ei?(mn(p,g,z),Ha(p,g,z)):(Cn&&Pe&&X(g),g.flags|=1,Wr(p,g,D,z),g.child)}function wx(p,g,M,D,z){if(p===null){var H=M.type;return typeof H=="function"&&!zu(H)&&H.defaultProps===void 0&&M.compare===null?(g.tag=15,g.type=H,Sx(p,g,H,D,z)):(p=Nl(M.type,null,D,g,g.mode,z),p.ref=g.ref,p.return=g,g.child=p)}if(H=p.child,!Od(p,z)){var ce=H.memoizedProps;if(M=M.compare,M=M!==null?M:qe,M(ce,D)&&p.ref===g.ref)return Ha(p,g,z)}return g.flags|=1,p=mo(H,D),p.ref=g.ref,p.return=g,g.child=p}function Sx(p,g,M,D,z){if(p!==null){var H=p.memoizedProps;if(qe(H,D)&&p.ref===g.ref)if(Ei=!1,g.pendingProps=D=H,Od(p,z))(p.flags&131072)!==0&&(Ei=!0);else return g.lanes=p.lanes,Ha(p,g,z)}return Tm(p,g,M,D,z)}function Ex(p,g,M,D){var z=D.children,H=p!==null?p.memoizedState:null;if(p===null&&g.stateNode===null&&(g.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),D.mode==="hidden"){if((g.flags&128)!==0){if(H=H!==null?H.baseLanes|M:M,p!==null){for(D=g.child=p.child,z=0;D!==null;)z=z|D.lanes|D.childLanes,D=D.sibling;D=z&~H}else D=0,g.child=null;return nh(p,g,H,M,D)}if((M&536870912)!==0)g.memoizedState={baseLanes:0,cachePool:null},p!==null&&_t(g,H!==null?H.cachePool:null),H!==null?Ke(g,H):De(),Et(g);else return D=g.lanes=536870912,nh(p,g,H!==null?H.baseLanes|M:M,M,D)}else H!==null?(_t(g,H.cachePool),Ke(g,H),Pt(),g.memoizedState=null):(p!==null&&_t(g,null),De(),Pt());return Wr(p,g,z,M),g.child}function Iu(p,g){return p!==null&&p.tag===22||g.stateNode!==null||(g.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),g.sibling}function nh(p,g,M,D,z){var H=at();return H=H===null?null:{parent:Ki?Oi._currentValue:Oi._currentValue2,pool:H},g.memoizedState={baseLanes:M,cachePool:H},p!==null&&_t(g,null),De(),Et(g),p!==null&&Fe(p,g,D,!0),g.childLanes=z,null}function Mm(p,g){return g=Mc({mode:g.mode,children:g.children},p.mode),g.ref=p.ref,p.child=g,g.return=p,g}function yv(p,g,M){return Xr(g,p.child,null,M),p=Mm(g,g.pendingProps),p.flags|=2,It(g),g.memoizedState=null,p}function Mx(p,g,M){var D=g.pendingProps,z=(g.flags&128)!==0;if(g.flags&=-129,p===null){if(Cn){if(D.mode==="hidden")return p=Mm(g,D),g.lanes=536870912,Iu(null,p);if(Ct(g),(p=Di)?(p=sy(p,xs),p!==null&&(g.memoizedState={dehydrated:p,treeContext:Ko!==null?{id:$r,overflow:wa}:null,retryLane:536870912,hydrationErrors:null},M=Nv(p),M.return=g,g.child=M,Sr=g,Di=null)):p=null,p===null)throw Te(g);return g.lanes=536870912,null}return Mm(g,D)}var H=p.memoizedState;if(H!==null){var ce=H.dehydrated;if(Ct(g),z)if(g.flags&256)g.flags&=-257,g=yv(p,g,M);else if(g.memoizedState!==null)g.child=p.child,g.flags|=128,g=null;else throw Error(r(558));else if(Ei||Fe(p,g,M,!1),z=(M&p.childLanes)!==0,Ei||z){if(D=yn,D!==null&&(ce=N(D,M),ce!==0&&ce!==H.retryLane))throw H.retryLane=ce,Yi(p,ce),Ni(D,p,ce),Ss;hh(),g=yv(p,g,M)}else p=H.treeContext,Ri&&(Di=l1(ce),Sr=g,Cn=!0,rl=null,xs=!1,p!==null&&le(g,p)),g=Mm(g,D),g.flags|=4096;return g}return p=mo(p.child,{mode:D.mode,children:D.children}),p.ref=g.ref,g.child=p,p.return=g,p}function Dd(p,g){var M=g.ref;if(M===null)p!==null&&p.ref!==null&&(g.flags|=4194816);else{if(typeof M!="function"&&typeof M!="object")throw Error(r(284));(p===null||p.ref!==M)&&(g.flags|=4194816)}}function Tm(p,g,M,D,z){return tt(g),M=kn(p,g,M,D,void 0,z),D=Fn(),p!==null&&!Ei?(mn(p,g,z),Ha(p,g,z)):(Cn&&D&&X(g),g.flags|=1,Wr(p,g,M,z),g.child)}function bv(p,g,M,D,z,H){return tt(g),g.updateQueue=null,M=sn(g,D,M,z),zn(p),D=Fn(),p!==null&&!Ei?(mn(p,g,H),Ha(p,g,H)):(Cn&&D&&X(g),g.flags|=1,Wr(p,g,M,H),g.child)}function Nu(p,g,M,D,z){if(tt(g),g.stateNode===null){var H=tl,ce=M.contextType;typeof ce=="object"&&ce!==null&&(H=se(ce)),H=new M(D,H),g.memoizedState=H.state!==null&&H.state!==void 0?H.state:null,H.updater=ip,g.stateNode=H,H._reactInternals=g,H=g.stateNode,H.props=D,H.state=g.memoizedState,H.refs={},Hi(g),ce=M.contextType,H.context=typeof ce=="object"&&ce!==null?se(ce):tl,H.state=g.memoizedState,ce=M.getDerivedStateFromProps,typeof ce=="function"&&(mv(g,M,ce,D),H.state=g.memoizedState),typeof M.getDerivedStateFromProps=="function"||typeof H.getSnapshotBeforeUpdate=="function"||typeof H.UNSAFE_componentWillMount!="function"&&typeof H.componentWillMount!="function"||(ce=H.state,typeof H.componentWillMount=="function"&&H.componentWillMount(),typeof H.UNSAFE_componentWillMount=="function"&&H.UNSAFE_componentWillMount(),ce!==H.state&&ip.enqueueReplaceState(H,H.state,null),pe(g,D,H,z),ao(),H.state=g.memoizedState),typeof H.componentDidMount=="function"&&(g.flags|=4194308),D=!0}else if(p===null){H=g.stateNode;var Pe=g.memoizedProps,it=Pu(M,Pe);H.props=it;var ht=H.context,bt=M.contextType;ce=tl,typeof bt=="object"&&bt!==null&&(ce=se(bt));var dt=M.getDerivedStateFromProps;bt=typeof dt=="function"||typeof H.getSnapshotBeforeUpdate=="function",Pe=g.pendingProps!==Pe,bt||typeof H.UNSAFE_componentWillReceiveProps!="function"&&typeof H.componentWillReceiveProps!="function"||(Pe||ht!==ce)&&yx(g,H,D,ce),yo=!1;var Dt=g.memoizedState;H.state=Dt,pe(g,D,H,z),ao(),ht=g.memoizedState,Pe||Dt!==ht||yo?(typeof dt=="function"&&(mv(g,M,dt,D),ht=g.memoizedState),(it=yo||Sm(g,M,it,D,Dt,ht,ce))?(bt||typeof H.UNSAFE_componentWillMount!="function"&&typeof H.componentWillMount!="function"||(typeof H.componentWillMount=="function"&&H.componentWillMount(),typeof H.UNSAFE_componentWillMount=="function"&&H.UNSAFE_componentWillMount()),typeof H.componentDidMount=="function"&&(g.flags|=4194308)):(typeof H.componentDidMount=="function"&&(g.flags|=4194308),g.memoizedProps=D,g.memoizedState=ht),H.props=D,H.state=ht,H.context=ce,D=it):(typeof H.componentDidMount=="function"&&(g.flags|=4194308),D=!1)}else{H=g.stateNode,Ps(p,g),ce=g.memoizedProps,bt=Pu(M,ce),H.props=bt,dt=g.pendingProps,Dt=H.context,ht=M.contextType,it=tl,typeof ht=="object"&&ht!==null&&(it=se(ht)),Pe=M.getDerivedStateFromProps,(ht=typeof Pe=="function"||typeof H.getSnapshotBeforeUpdate=="function")||typeof H.UNSAFE_componentWillReceiveProps!="function"&&typeof H.componentWillReceiveProps!="function"||(ce!==dt||Dt!==it)&&yx(g,H,D,it),yo=!1,Dt=g.memoizedState,H.state=Dt,pe(g,D,H,z),ao();var nn=g.memoizedState;ce!==dt||Dt!==nn||yo||p!==null&&p.dependencies!==null&&Ae(p.dependencies)?(typeof Pe=="function"&&(mv(g,M,Pe,D),nn=g.memoizedState),(bt=yo||Sm(g,M,bt,D,Dt,nn,it)||p!==null&&p.dependencies!==null&&Ae(p.dependencies))?(ht||typeof H.UNSAFE_componentWillUpdate!="function"&&typeof H.componentWillUpdate!="function"||(typeof H.componentWillUpdate=="function"&&H.componentWillUpdate(D,nn,it),typeof H.UNSAFE_componentWillUpdate=="function"&&H.UNSAFE_componentWillUpdate(D,nn,it)),typeof H.componentDidUpdate=="function"&&(g.flags|=4),typeof H.getSnapshotBeforeUpdate=="function"&&(g.flags|=1024)):(typeof H.componentDidUpdate!="function"||ce===p.memoizedProps&&Dt===p.memoizedState||(g.flags|=4),typeof H.getSnapshotBeforeUpdate!="function"||ce===p.memoizedProps&&Dt===p.memoizedState||(g.flags|=1024),g.memoizedProps=D,g.memoizedState=nn),H.props=D,H.state=nn,H.context=it,D=bt):(typeof H.componentDidUpdate!="function"||ce===p.memoizedProps&&Dt===p.memoizedState||(g.flags|=4),typeof H.getSnapshotBeforeUpdate!="function"||ce===p.memoizedProps&&Dt===p.memoizedState||(g.flags|=1024),D=!1)}return H=D,Dd(p,g),D=(g.flags&128)!==0,H||D?(H=g.stateNode,M=D&&typeof M.getDerivedStateFromError!="function"?null:H.render(),g.flags|=1,p!==null&&D?(g.child=Xr(g,p.child,null,z),g.child=Xr(g,null,M,z)):Wr(p,g,M,z),g.memoizedState=H.state,p=g.child):p=Ha(p,g,z),p}function Tx(p,g,M,D){return ae(),g.flags|=256,Wr(p,g,M,D),g.child}function _v(p){return{baseLanes:p,cachePool:st()}}function xv(p,g,M){return p=p!==null?p.childLanes&~M:0,g&&(p|=Es),p}function wv(p,g,M){var D=g.pendingProps,z=!1,H=(g.flags&128)!==0,ce;if((ce=H)||(ce=p!==null&&p.memoizedState===null?!1:($i.current&2)!==0),ce&&(z=!0,g.flags&=-129),ce=(g.flags&32)!==0,g.flags&=-33,p===null){if(Cn){if(z?xt(g):Pt(),(p=Di)?(p=h1(p,xs),p!==null&&(g.memoizedState={dehydrated:p,treeContext:Ko!==null?{id:$r,overflow:wa}:null,retryLane:536870912,hydrationErrors:null},M=Nv(p),M.return=g,g.child=M,Sr=g,Di=null)):p=null,p===null)throw Te(g);return Zm(p)?g.lanes=32:g.lanes=536870912,null}var Pe=D.children;return D=D.fallback,z?(Pt(),z=g.mode,Pe=Mc({mode:"hidden",children:Pe},z),D=$o(D,z,M,null),Pe.return=g,D.return=g,Pe.sibling=D,g.child=Pe,D=g.child,D.memoizedState=_v(M),D.childLanes=xv(p,ce,M),g.memoizedState=tf,Iu(null,D)):(xt(g),Am(g,Pe))}var it=p.memoizedState;if(it!==null&&(Pe=it.dehydrated,Pe!==null)){if(H)g.flags&256?(xt(g),g.flags&=-257,g=Uu(p,g,M)):g.memoizedState!==null?(Pt(),g.child=p.child,g.flags|=128,g=null):(Pt(),Pe=D.fallback,z=g.mode,D=Mc({mode:"visible",children:D.children},z),Pe=$o(Pe,z,M,null),Pe.flags|=2,D.return=g,Pe.return=g,D.sibling=Pe,g.child=D,Xr(g,p.child,null,M),D=g.child,D.memoizedState=_v(M),D.childLanes=xv(p,ce,M),g.memoizedState=tf,g=Iu(null,D));else if(xt(g),Zm(Pe))ce=Km(Pe).digest,D=Error(r(419)),D.stack="",D.digest=ce,xe({value:D,source:null,stack:null}),g=Uu(p,g,M);else if(Ei||Fe(p,g,M,!1),ce=(M&p.childLanes)!==0,Ei||ce){if(ce=yn,ce!==null&&(D=N(ce,M),D!==0&&D!==it.retryLane))throw it.retryLane=D,Yi(p,D),Ni(ce,p,D),Ss;zc(Pe)||hh(),g=Uu(p,g,M)}else zc(Pe)?(g.flags|=192,g.child=p.child,g=null):(p=it.treeContext,Ri&&(Di=c1(Pe),Sr=g,Cn=!0,rl=null,xs=!1,p!==null&&le(g,p)),g=Am(g,D.children),g.flags|=4096);return g}return z?(Pt(),Pe=D.fallback,z=g.mode,it=p.child,H=it.sibling,D=mo(it,{mode:"hidden",children:D.children}),D.subtreeFlags=it.subtreeFlags&65011712,H!==null?Pe=mo(H,Pe):(Pe=$o(Pe,z,M,null),Pe.flags|=2),Pe.return=g,D.return=g,D.sibling=Pe,g.child=D,Iu(null,D),D=g.child,Pe=p.child.memoizedState,Pe===null?Pe=_v(M):(z=Pe.cachePool,z!==null?(it=Ki?Oi._currentValue:Oi._currentValue2,z=z.parent!==it?{parent:it,pool:it}:z):z=st(),Pe={baseLanes:Pe.baseLanes|M,cachePool:z}),D.memoizedState=Pe,D.childLanes=xv(p,ce,M),g.memoizedState=tf,Iu(p.child,D)):(xt(g),M=p.child,p=M.sibling,M=mo(M,{mode:"visible",children:D.children}),M.return=g,M.sibling=null,p!==null&&(ce=g.deletions,ce===null?(g.deletions=[p],g.flags|=16):ce.push(p)),g.child=M,g.memoizedState=null,M)}function Am(p,g){return g=Mc({mode:"visible",children:g},p.mode),g.return=p,p.child=g}function Mc(p,g){return p=t(22,p,null,g),p.lanes=0,p}function Uu(p,g,M){return Xr(g,p.child,null,M),p=Am(g,g.pendingProps.children),p.flags|=2,g.memoizedState=null,p}function Ax(p,g,M){p.lanes|=g;var D=p.alternate;D!==null&&(D.lanes|=g),Ne(p.return,g,M)}function ih(p,g,M,D,z,H){var ce=p.memoizedState;ce===null?p.memoizedState={isBackwards:g,rendering:null,renderingStartTime:0,last:D,tail:M,tailMode:z,treeForkCount:H}:(ce.isBackwards=g,ce.rendering=null,ce.renderingStartTime=0,ce.last=D,ce.tail=M,ce.tailMode=z,ce.treeForkCount=H)}function Sv(p,g,M){var D=g.pendingProps,z=D.revealOrder,H=D.tail;D=D.children;var ce=$i.current,Pe=(ce&2)!==0;if(Pe?(ce=ce&1|2,g.flags|=128):ce&=1,b($i,ce),Wr(p,g,D,M),D=Cn?ep:0,!Pe&&p!==null&&(p.flags&128)!==0)e:for(p=g.child;p!==null;){if(p.tag===13)p.memoizedState!==null&&Ax(p,M,g);else if(p.tag===19)Ax(p,M,g);else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===g)break e;for(;p.sibling===null;){if(p.return===null||p.return===g)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}switch(z){case"forwards":for(M=g.child,z=null;M!==null;)p=M.alternate,p!==null&&Ut(p)===null&&(z=M),M=M.sibling;M=z,M===null?(z=g.child,g.child=null):(z=M.sibling,M.sibling=null),ih(g,!1,z,M,H,D);break;case"backwards":case"unstable_legacy-backwards":for(M=null,z=g.child,g.child=null;z!==null;){if(p=z.alternate,p!==null&&Ut(p)===null){g.child=z;break}p=z.sibling,z.sibling=M,M=z,z=p}ih(g,!0,M,null,H,D);break;case"together":ih(g,!1,null,null,void 0,D);break;default:g.memoizedState=null}return g.child}function Ha(p,g,M){if(p!==null&&(g.dependencies=p.dependencies),jl|=g.lanes,(M&g.childLanes)===0)if(p!==null){if(Fe(p,g,M,!1),(M&g.childLanes)===0)return null}else return null;if(p!==null&&g.child!==p.child)throw Error(r(153));if(g.child!==null){for(p=g.child,M=mo(p,p.pendingProps),g.child=M,M.return=g;p.sibling!==null;)p=p.sibling,M=M.sibling=mo(p,p.pendingProps),M.return=g;M.sibling=null}return g.child}function Od(p,g){return(p.lanes&g)!==0?!0:(p=p.dependencies,!!(p!==null&&Ae(p)))}function Ev(p,g,M){switch(g.tag){case 3:oe(g,g.stateNode.containerInfo),me(g,Oi,p.memoizedState.cache),ae();break;case 27:case 5:he(g);break;case 4:oe(g,g.stateNode.containerInfo);break;case 10:me(g,g.type,g.memoizedProps.value);break;case 31:if(g.memoizedState!==null)return g.flags|=128,Ct(g),null;break;case 13:var D=g.memoizedState;if(D!==null)return D.dehydrated!==null?(xt(g),g.flags|=128,null):(M&g.child.childLanes)!==0?wv(p,g,M):(xt(g),p=Ha(p,g,M),p!==null?p.sibling:null);xt(g);break;case 19:var z=(p.flags&128)!==0;if(D=(M&g.childLanes)!==0,D||(Fe(p,g,M,!1),D=(M&g.childLanes)!==0),z){if(D)return Sv(p,g,M);g.flags|=128}if(z=g.memoizedState,z!==null&&(z.rendering=null,z.tail=null,z.lastEffect=null),b($i,$i.current),D)break;return null;case 22:return g.lanes=0,Ex(p,g,M,g.pendingProps);case 24:me(g,Oi,p.memoizedState.cache)}return Ha(p,g,M)}function Mv(p,g,M){if(p!==null)if(p.memoizedProps!==g.pendingProps)Ei=!0;else{if(!Od(p,M)&&(g.flags&128)===0)return Ei=!1,Ev(p,g,M);Ei=(p.flags&131072)!==0}else Ei=!1,Cn&&(g.flags&1048576)!==0&&F(g,ep,g.index);switch(g.lanes=0,g.tag){case 16:e:{var D=g.pendingProps;if(p=Tt(g.elementType),g.type=p,typeof p=="function")zu(p)?(D=Pu(p,D),g.tag=1,g=Nu(null,g,p,D,M)):(g.tag=0,g=Tm(null,g,p,D,M));else{if(p!=null){var z=p.$$typeof;if(z===gh){g.tag=11,g=xx(null,g,p,D,M);break e}else if(z===jm){g.tag=14,g=wx(null,g,p,D,M);break e}}throw g=d(p)||p,Error(r(306,g,""))}}return g;case 0:return Tm(p,g,g.type,g.pendingProps,M);case 1:return D=g.type,z=Pu(D,g.pendingProps),Nu(p,g,D,z,M);case 3:e:{if(oe(g,g.stateNode.containerInfo),p===null)throw Error(r(387));var H=g.pendingProps;z=g.memoizedState,D=z.element,Ps(p,g),pe(g,H,null,M);var ce=g.memoizedState;if(H=ce.cache,me(g,Oi,H),H!==z.cache&&ke(g,[Oi],M,!0),ao(),H=ce.element,Ri&&z.isDehydrated)if(z={element:H,isDehydrated:!1,cache:ce.cache},g.updateQueue.baseState=z,g.memoizedState=z,g.flags&256){g=Tx(p,g,H,M);break e}else if(H!==D){D=te(Error(r(424)),g),xe(D),g=Tx(p,g,H,M);break e}else for(Ri&&(Di=a1(g.stateNode.containerInfo),Sr=g,Cn=!0,rl=null,xs=!0),M=xy(g,null,H,M),g.child=M;M;)M.flags=M.flags&-3|4096,M=M.sibling;else{if(ae(),H===D){g=Ha(p,g,M);break e}Wr(p,g,H,M)}g=g.child}return g;case 26:if(Yo)return Dd(p,g),p===null?(M=uy(g.type,null,g.pendingProps,null))?g.memoizedState=M:Cn||(g.stateNode=tg(g.type,g.pendingProps,qr.current,g)):g.memoizedState=uy(g.type,p.memoizedProps,g.pendingProps,p.memoizedState),null;case 27:if(wr)return he(g),p===null&&wr&&Cn&&(D=g.stateNode=ng(g.type,g.pendingProps,qr.current,Or.current,!1),Sr=g,xs=!0,Di=ry(g.type,D,Di)),Wr(p,g,g.pendingProps.children,M),Dd(p,g),p===null&&(g.flags|=4194304),g.child;case 5:return p===null&&Cn&&(x1(g.type,g.pendingProps,Or.current),(z=D=Di)&&(D=u1(D,g.type,g.pendingProps,xs),D!==null?(g.stateNode=D,Sr=g,Di=o1(D),xs=!1,z=!0):z=!1),z||Te(g)),he(g),z=g.type,H=g.pendingProps,ce=p!==null?p.memoizedProps:null,D=H.children,_s(z,H)?D=null:ce!==null&&_s(z,ce)&&(g.flags|=32),g.memoizedState!==null&&(z=kn(p,g,Lt,null,null,M),Ki?qu._currentValue=z:qu._currentValue2=z),Dd(p,g),Wr(p,g,D,M),g.child;case 6:return p===null&&Cn&&(cy(g.pendingProps,Or.current),(p=M=Di)&&(M=f1(M,g.pendingProps,xs),M!==null?(g.stateNode=M,Sr=g,Di=null,p=!0):p=!1),p||Te(g)),null;case 13:return wv(p,g,M);case 4:return oe(g,g.stateNode.containerInfo),D=g.pendingProps,p===null?g.child=Xr(g,null,D,M):Wr(p,g,D,M),g.child;case 11:return xx(p,g,g.type,g.pendingProps,M);case 7:return Wr(p,g,g.pendingProps,M),g.child;case 8:return Wr(p,g,g.pendingProps.children,M),g.child;case 12:return Wr(p,g,g.pendingProps.children,M),g.child;case 10:return D=g.pendingProps,me(g,g.type,D.value),Wr(p,g,D.children,M),g.child;case 9:return z=g.type._context,D=g.pendingProps.children,tt(g),z=se(z),D=D(z),g.flags|=1,Wr(p,g,D,M),g.child;case 14:return wx(p,g,g.type,g.pendingProps,M);case 15:return Sx(p,g,g.type,g.pendingProps,M);case 19:return Sv(p,g,M);case 31:return Mx(p,g,M);case 22:return Ex(p,g,M,g.pendingProps);case 24:return tt(g),D=se(Oi),p===null?(z=at(),z===null&&(z=yn,H=Y(),z.pooledCache=H,H.refCount++,H!==null&&(z.pooledCacheLanes|=M),z=H),g.memoizedState={parent:D,cache:z},Hi(g),me(g,Oi,z)):((p.lanes&M)!==0&&(Ps(p,g),pe(g,null,null,M),ao()),z=p.memoizedState,H=g.memoizedState,z.parent!==D?(z={parent:D,cache:D},g.memoizedState=z,g.lanes===0&&(g.memoizedState=g.updateQueue.baseState=z),me(g,Oi,D)):(D=H.cache,me(g,Oi,D),D!==z.cache&&ke(g,[Oi],M,!0))),Wr(p,g,g.pendingProps.children,M),g.child;case 29:throw g.pendingProps}throw Error(r(156,g.tag))}function Vo(p){p.flags|=4}function Ld(p){go&&(p.flags|=8)}function Cx(p,g){if(p!==null&&p.child===g.child)return!1;if((g.flags&16)!==0)return!0;for(p=g.child;p!==null;){if((p.flags&8218)!==0||(p.subtreeFlags&8218)!==0)return!0;p=p.sibling}return!1}function Tv(p,g,M,D){if(On)for(M=g.child;M!==null;){if(M.tag===5||M.tag===6)$d(p,M.stateNode);else if(!(M.tag===4||wr&&M.tag===27)&&M.child!==null){M.child.return=M,M=M.child;continue}if(M===g)break;for(;M.sibling===null;){if(M.return===null||M.return===g)return;M=M.return}M.sibling.return=M.return,M=M.sibling}else if(go)for(var z=g.child;z!==null;){if(z.tag===5){var H=z.stateNode;M&&D&&(H=n1(H,z.type,z.memoizedProps)),$d(p,H)}else if(z.tag===6)H=z.stateNode,M&&D&&(H=ny(H,z.memoizedProps)),$d(p,H);else if(z.tag!==4){if(z.tag===22&&z.memoizedState!==null)H=z.child,H!==null&&(H.return=z),Tv(p,z,!0,!0);else if(z.child!==null){z.child.return=z,z=z.child;continue}}if(z===g)break;for(;z.sibling===null;){if(z.return===null||z.return===g)return;z=z.return}z.sibling.return=z.return,z=z.sibling}}function Rx(p,g,M,D){var z=!1;if(go)for(var H=g.child;H!==null;){if(H.tag===5){var ce=H.stateNode;M&&D&&(ce=n1(ce,H.type,H.memoizedProps)),ey(p,ce)}else if(H.tag===6)ce=H.stateNode,M&&D&&(ce=ny(ce,H.memoizedProps)),ey(p,ce);else if(H.tag!==4){if(H.tag===22&&H.memoizedState!==null)z=H.child,z!==null&&(z.return=H),Rx(p,H,!0,!0),z=!0;else if(H.child!==null){H.child.return=H,H=H.child;continue}}if(H===g)break;for(;H.sibling===null;){if(H.return===null||H.return===g)return z;H=H.return}H.sibling.return=H.return,H=H.sibling}return z}function Dx(p,g){if(go&&Cx(p,g)){p=g.stateNode;var M=p.containerInfo,D=Jv();Rx(D,g,!1,!1),p.pendingChildren=D,Vo(g),t1(M,D)}}function Av(p,g,M,D){if(On)p.memoizedProps!==D&&Vo(g);else if(go){var z=p.stateNode,H=p.memoizedProps;if((p=Cx(p,g))||H!==D){var ce=Or.current;H=e1(z,M,H,D,!p,null),H===z?g.stateNode=z:(Ld(g),Fs(H,M,D,ce)&&Vo(g),g.stateNode=H,p&&Tv(H,g,!1,!1))}else g.stateNode=z}}function vs(p,g,M,D,z){if((p.mode&32)!==0&&(M===null?qd(g,D):xh(g,M,D))){if(p.flags|=16777216,(z&335544128)===z||Gv(g,D))if(Ui(p.stateNode,g,D))p.flags|=8192;else if(Dn())p.flags|=8192;else throw ws=sl,dg}else p.flags&=-16777217}function rh(p,g){if(py(g)){if(p.flags|=16777216,!my(g))if(Dn())p.flags|=8192;else throw ws=sl,dg}else p.flags&=-16777217}function Pd(p,g){g!==null&&(p.flags|=4),p.flags&16384&&(g=p.tag!==22?E():536870912,p.lanes|=g,Dh|=g)}function sh(p,g){if(!Cn)switch(p.tailMode){case"hidden":g=p.tail;for(var M=null;g!==null;)g.alternate!==null&&(M=g),g=g.sibling;M===null?p.tail=null:M.sibling=null;break;case"collapsed":M=p.tail;for(var D=null;M!==null;)M.alternate!==null&&(D=M),M=M.sibling;D===null?g||p.tail===null?p.tail=null:p.tail.sibling=null:D.sibling=null}}function vi(p){var g=p.alternate!==null&&p.alternate.child===p.child,M=0,D=0;if(g)for(var z=p.child;z!==null;)M|=z.lanes|z.childLanes,D|=z.subtreeFlags&65011712,D|=z.flags&65011712,z.return=p,z=z.sibling;else for(z=p.child;z!==null;)M|=z.lanes|z.childLanes,D|=z.subtreeFlags,D|=z.flags,z.return=p,z=z.sibling;return p.subtreeFlags|=D,p.childLanes=M,g}function Ox(p,g,M){var D=g.pendingProps;switch(ee(g),g.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vi(g),null;case 1:return vi(g),null;case 3:return M=g.stateNode,D=null,p!==null&&(D=p.memoizedState.cache),g.memoizedState.cache!==D&&(g.flags|=2048),Ie(Oi),ue(),M.pendingContext&&(M.context=M.pendingContext,M.pendingContext=null),(p===null||p.child===null)&&(we(g)?Vo(g):p===null||p.memoizedState.isDehydrated&&(g.flags&256)===0||(g.flags|=1024,ve())),Dx(p,g),vi(g),null;case 26:if(Yo){var z=g.type,H=g.memoizedState;return p===null?(Vo(g),H!==null?(vi(g),rh(g,H)):(vi(g),vs(g,z,null,D,M))):H?H!==p.memoizedState?(Vo(g),vi(g),rh(g,H)):(vi(g),g.flags&=-16777217):(H=p.memoizedProps,On?H!==D&&Vo(g):Av(p,g,z,D),vi(g),vs(g,z,H,D,M)),null}case 27:if(wr){if(be(g),M=qr.current,z=g.type,p!==null&&g.stateNode!=null)On?p.memoizedProps!==D&&Vo(g):Av(p,g,z,D);else{if(!D){if(g.stateNode===null)throw Error(r(166));return vi(g),null}p=Or.current,we(g)?Ee(g,p):(p=ng(z,D,M,p,!0),g.stateNode=p,Vo(g))}return vi(g),null}case 5:if(be(g),z=g.type,p!==null&&g.stateNode!=null)Av(p,g,z,D);else{if(!D){if(g.stateNode===null)throw Error(r(166));return vi(g),null}if(H=Or.current,we(g))Ee(g,H),y1(g.stateNode,z,D,H)&&(g.flags|=64);else{var ce=Bv(z,D,qr.current,H,g);Ld(g),Tv(ce,g,!1,!1),g.stateNode=ce,Fs(ce,z,D,H)&&Vo(g)}}return vi(g),vs(g,g.type,p===null?null:p.memoizedProps,g.pendingProps,M),null;case 6:if(p&&g.stateNode!=null)M=p.memoizedProps,On?M!==D&&Vo(g):go&&(M!==D?(p=qr.current,M=Or.current,Ld(g),g.stateNode=zl(D,p,M,g)):g.stateNode=p.stateNode);else{if(typeof D!="string"&&g.stateNode===null)throw Error(r(166));if(p=qr.current,M=Or.current,we(g)){if(!Ri)throw Error(r(176));if(p=g.stateNode,M=g.memoizedProps,D=null,z=Sr,z!==null)switch(z.tag){case 27:case 5:D=z.memoizedProps}jT(p,M,g,D)||Te(g,!0)}else Ld(g),g.stateNode=zl(D,p,M,g)}return vi(g),null;case 31:if(M=g.memoizedState,p===null||p.memoizedState!==null){if(D=we(g),M!==null){if(p===null){if(!D)throw Error(r(318));if(!Ri)throw Error(r(556));if(p=g.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(r(557));oy(p,g)}else ae(),(g.flags&128)===0&&(g.memoizedState=null),g.flags|=4;vi(g),p=!1}else M=ve(),p!==null&&p.memoizedState!==null&&(p.memoizedState.hydrationErrors=M),p=!0;if(!p)return g.flags&256?(It(g),g):(It(g),null);if((g.flags&128)!==0)throw Error(r(558))}return vi(g),null;case 13:if(D=g.memoizedState,p===null||p.memoizedState!==null&&p.memoizedState.dehydrated!==null){if(z=we(g),D!==null&&D.dehydrated!==null){if(p===null){if(!z)throw Error(r(318));if(!Ri)throw Error(r(344));if(z=g.memoizedState,z=z!==null?z.dehydrated:null,!z)throw Error(r(317));p1(z,g)}else ae(),(g.flags&128)===0&&(g.memoizedState=null),g.flags|=4;vi(g),z=!1}else z=ve(),p!==null&&p.memoizedState!==null&&(p.memoizedState.hydrationErrors=z),z=!0;if(!z)return g.flags&256?(It(g),g):(It(g),null)}return It(g),(g.flags&128)!==0?(g.lanes=M,g):(M=D!==null,p=p!==null&&p.memoizedState!==null,M&&(D=g.child,z=null,D.alternate!==null&&D.alternate.memoizedState!==null&&D.alternate.memoizedState.cachePool!==null&&(z=D.alternate.memoizedState.cachePool.pool),H=null,D.memoizedState!==null&&D.memoizedState.cachePool!==null&&(H=D.memoizedState.cachePool.pool),H!==z&&(D.flags|=2048)),M!==p&&M&&(g.child.flags|=8192),Pd(g,g.updateQueue),vi(g),null);case 4:return ue(),Dx(p,g),p===null&&ci(g.stateNode.containerInfo),vi(g),null;case 10:return Ie(g.type),vi(g),null;case 19:if(v($i),D=g.memoizedState,D===null)return vi(g),null;if(z=(g.flags&128)!==0,H=D.rendering,H===null)if(z)sh(D,!1);else{if(Fi!==0||p!==null&&(p.flags&128)!==0)for(p=g.child;p!==null;){if(H=Ut(p),H!==null){for(g.flags|=128,sh(D,!1),p=H.updateQueue,g.updateQueue=p,Pd(g,p),g.subtreeFlags=0,p=M,M=g.child;M!==null;)Fm(M,p),M=M.sibling;return b($i,$i.current&1|2),Cn&&ie(g,D.treeForkCount),g.child}p=p.sibling}D.tail!==null&&cs()>Yc&&(g.flags|=128,z=!0,sh(D,!1),g.lanes=4194304)}else{if(!z)if(p=Ut(H),p!==null){if(g.flags|=128,z=!0,p=p.updateQueue,g.updateQueue=p,Pd(g,p),sh(D,!0),D.tail===null&&D.tailMode==="hidden"&&!H.alternate&&!Cn)return vi(g),null}else 2*cs()-D.renderingStartTime>Yc&&M!==536870912&&(g.flags|=128,z=!0,sh(D,!1),g.lanes=4194304);D.isBackwards?(H.sibling=g.child,g.child=H):(p=D.last,p!==null?p.sibling=H:g.child=H,D.last=H)}return D.tail!==null?(p=D.tail,D.rendering=p,D.tail=p.sibling,D.renderingStartTime=cs(),p.sibling=null,M=$i.current,b($i,z?M&1|2:M&1),Cn&&ie(g,D.treeForkCount),p):(vi(g),null);case 22:case 23:return It(g),lt(),D=g.memoizedState!==null,p!==null?p.memoizedState!==null!==D&&(g.flags|=8192):D&&(g.flags|=8192),D?(M&536870912)!==0&&(g.flags&128)===0&&(vi(g),g.subtreeFlags&6&&(g.flags|=8192)):vi(g),M=g.updateQueue,M!==null&&Pd(g,M.retryQueue),M=null,p!==null&&p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(M=p.memoizedState.cachePool.pool),D=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(D=g.memoizedState.cachePool.pool),D!==M&&(g.flags|=2048),p!==null&&v(Vc),null;case 24:return M=null,p!==null&&(M=p.memoizedState.cache),g.memoizedState.cache!==M&&(g.flags|=2048),Ie(Oi),vi(g),null;case 25:return null;case 30:return null}throw Error(r(156,g.tag))}function Cv(p,g){switch(ee(g),g.tag){case 1:return p=g.flags,p&65536?(g.flags=p&-65537|128,g):null;case 3:return Ie(Oi),ue(),p=g.flags,(p&65536)!==0&&(p&128)===0?(g.flags=p&-65537|128,g):null;case 26:case 27:case 5:return be(g),null;case 31:if(g.memoizedState!==null){if(It(g),g.alternate===null)throw Error(r(340));ae()}return p=g.flags,p&65536?(g.flags=p&-65537|128,g):null;case 13:if(It(g),p=g.memoizedState,p!==null&&p.dehydrated!==null){if(g.alternate===null)throw Error(r(340));ae()}return p=g.flags,p&65536?(g.flags=p&-65537|128,g):null;case 19:return v($i),null;case 4:return ue(),null;case 10:return Ie(g.type),null;case 22:case 23:return It(g),lt(),p!==null&&v(Vc),p=g.flags,p&65536?(g.flags=p&-65537|128,g):null;case 24:return Ie(Oi),null;case 25:return null;default:return null}}function Lx(p,g){switch(ee(g),g.tag){case 3:Ie(Oi),ue();break;case 26:case 27:case 5:be(g);break;case 4:ue();break;case 31:g.memoizedState!==null&&It(g);break;case 13:It(g);break;case 19:v($i);break;case 10:Ie(g.type);break;case 22:case 23:It(g),lt(),p!==null&&v(Vc);break;case 24:Ie(Oi)}}function ja(p,g){try{var M=g.updateQueue,D=M!==null?M.lastEffect:null;if(D!==null){var z=D.next;M=z;do{if((M.tag&p)===p){D=void 0;var H=M.create,ce=M.inst;D=H(),ce.destroy=D}M=M.next}while(M!==z)}}catch(Pe){Zt(g,g.return,Pe)}}function Wa(p,g,M){try{var D=g.updateQueue,z=D!==null?D.lastEffect:null;if(z!==null){var H=z.next;D=H;do{if((D.tag&p)===p){var ce=D.inst,Pe=ce.destroy;if(Pe!==void 0){ce.destroy=void 0,z=g;var it=M,ht=Pe;try{ht()}catch(bt){Zt(z,it,bt)}}}D=D.next}while(D!==H)}}catch(bt){Zt(g,g.return,bt)}}function oh(p){var g=p.updateQueue;if(g!==null){var M=p.stateNode;try{Ye(g,M)}catch(D){Zt(p,p.return,D)}}}function Cm(p,g,M){M.props=Pu(p.type,p.memoizedProps),M.state=p.memoizedState;try{M.componentWillUnmount()}catch(D){Zt(p,g,D)}}function ah(p,g){try{var M=p.ref;if(M!==null){switch(p.tag){case 26:case 27:case 5:var D=yh(p.stateNode);break;case 30:D=p.stateNode;break;default:D=p.stateNode}typeof M=="function"?p.refCleanup=M(D):M.current=D}}catch(z){Zt(p,g,z)}}function ls(p,g){var M=p.ref,D=p.refCleanup;if(M!==null)if(typeof D=="function")try{D()}catch(z){Zt(p,g,z)}finally{p.refCleanup=null,p=p.alternate,p!=null&&(p.refCleanup=null)}else if(typeof M=="function")try{M(null)}catch(z){Zt(p,g,z)}else M.current=null}function ku(p){var g=p.type,M=p.memoizedProps,D=p.stateNode;try{$x(D,g,M,p)}catch(z){Zt(p,p.return,z)}}function Id(p,g,M){try{qx(p.stateNode,p.type,M,g,p)}catch(D){Zt(p,p.return,D)}}function Rv(p){return p.tag===5||p.tag===3||(Yo?p.tag===26:!1)||(wr?p.tag===27&&Xu(p.type):!1)||p.tag===4}function Dl(p){e:for(;;){for(;p.sibling===null;){if(p.return===null||Rv(p.return))return null;p=p.return}for(p.sibling.return=p.return,p=p.sibling;p.tag!==5&&p.tag!==6&&p.tag!==18;){if(wr&&p.tag===27&&Xu(p.type)||p.flags&2||p.child===null||p.tag===4)continue e;p.child.return=p,p=p.child}if(!(p.flags&2))return p.stateNode}}function Rm(p,g,M){var D=p.tag;if(D===5||D===6)p=p.stateNode,g?Yx(M,p,g):Yv(M,p);else if(D!==4&&(wr&&D===27&&Xu(p.type)&&(M=p.stateNode,g=null),p=p.child,p!==null))for(Rm(p,g,M),p=p.sibling;p!==null;)Rm(p,g,M),p=p.sibling}function Nd(p,g,M){var D=p.tag;if(D===5||D===6)p=p.stateNode,g?Xx(M,p,g):Xv(M,p);else if(D!==4&&(wr&&D===27&&Xu(p.type)&&(M=p.stateNode),p=p.child,p!==null))for(Nd(p,g,M),p=p.sibling;p!==null;)Nd(p,g,M),p=p.sibling}function Dv(p,g,M){p=p.containerInfo;try{ty(p,M)}catch(D){Zt(g,g.return,D)}}function Px(p){var g=p.stateNode,M=p.memoizedProps;try{dr(p.type,M,g,p)}catch(D){Zt(p,p.return,D)}}function BT(p,g){for(Wm(p.containerInfo),er=g;er!==null;)if(p=er,g=p.child,(p.subtreeFlags&1028)!==0&&g!==null)g.return=p,er=g;else for(;er!==null;){p=er;var M=p.alternate;switch(g=p.flags,p.tag){case 0:if((g&4)!==0&&(g=p.updateQueue,g=g!==null?g.events:null,g!==null))for(var D=0;D<g.length;D++){var z=g[D];z.ref.impl=z.nextImpl}break;case 11:case 15:break;case 1:if((g&1024)!==0&&M!==null){g=void 0,D=p,z=M.memoizedProps,M=M.memoizedState;var H=D.stateNode;try{var ce=Pu(D.type,z);g=H.getSnapshotBeforeUpdate(ce,M),H.__reactInternalSnapshotBeforeUpdate=g}catch(Pe){Zt(D,D.return,Pe)}}break;case 3:(g&1024)!==0&&On&&Qv(p.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((g&1024)!==0)throw Error(r(163))}if(g=p.sibling,g!==null){g.return=p.return,er=g;break}er=p.return}}function Ix(p,g,M){var D=M.flags;switch(M.tag){case 0:case 11:case 15:ys(p,M),D&4&&ja(5,M);break;case 1:if(ys(p,M),D&4)if(p=M.stateNode,g===null)try{p.componentDidMount()}catch(ce){Zt(M,M.return,ce)}else{var z=Pu(M.type,g.memoizedProps);g=g.memoizedState;try{p.componentDidUpdate(z,g,p.__reactInternalSnapshotBeforeUpdate)}catch(ce){Zt(M,M.return,ce)}}D&64&&oh(M),D&512&&ah(M,M.return);break;case 3:if(ys(p,M),D&64&&(D=M.updateQueue,D!==null)){if(p=null,M.child!==null)switch(M.child.tag){case 27:case 5:p=yh(M.child.stateNode);break;case 1:p=M.child.stateNode}try{Ye(D,p)}catch(ce){Zt(M,M.return,ce)}}break;case 27:wr&&g===null&&D&4&&Px(M);case 26:case 5:if(ys(p,M),g===null){if(D&4)ku(M);else if(D&64){p=M.type,g=M.memoizedProps,z=M.stateNode;try{g1(z,p,g,M)}catch(ce){Zt(M,M.return,ce)}}}D&512&&ah(M,M.return);break;case 12:ys(p,M);break;case 31:ys(p,M),D&4&&Ho(p,M);break;case 13:ys(p,M),D&4&&kd(p,M),D&64&&(D=M.memoizedState,D!==null&&(D=D.dehydrated,D!==null&&(M=VT.bind(null,M),Qm(D,M))));break;case 22:if(D=M.memoizedState!==null||qi,!D){g=g!==null&&g.memoizedState!==null||Xi,z=qi;var H=Xi;qi=D,(Xi=g)&&!H?Wo(p,M,(M.subtreeFlags&8772)!==0):ys(p,M),qi=z,Xi=H}break;case 30:break;default:ys(p,M)}}function Ov(p){var g=p.alternate;g!==null&&(p.alternate=null,Ov(g)),p.child=null,p.deletions=null,p.sibling=null,p.tag===5&&(g=p.stateNode,g!==null&&$m(g)),p.stateNode=null,p.return=null,p.dependencies=null,p.memoizedProps=null,p.memoizedState=null,p.pendingProps=null,p.stateNode=null,p.updateQueue=null}function Go(p,g,M){for(M=M.child;M!==null;)Ud(p,g,M),M=M.sibling}function Ud(p,g,M){if(Gs&&typeof Gs.onCommitFiberUnmount=="function")try{Gs.onCommitFiberUnmount(Ku,M)}catch{}switch(M.tag){case 26:if(Yo){Xi||ls(M,g),Go(p,g,M),M.memoizedState?Fc(M.memoizedState):M.stateNode&&dy(M.stateNode);break}case 27:if(wr){Xi||ls(M,g);var D=zi,z=tr;Xu(M.type)&&(zi=M.stateNode,tr=!1),Go(p,g,M),Dr(M.stateNode),zi=D,tr=z;break}case 5:Xi||ls(M,g);case 6:if(On){if(D=zi,z=tr,zi=null,Go(p,g,M),zi=D,tr=z,zi!==null)if(tr)try{Zv(zi,M.stateNode)}catch(H){Zt(M,g,H)}else try{Zx(zi,M.stateNode)}catch(H){Zt(M,g,H)}}else Go(p,g,M);break;case 18:On&&zi!==null&&(tr?Jm(zi,M.stateNode):ly(zi,M.stateNode));break;case 4:On?(D=zi,z=tr,zi=M.stateNode.containerInfo,tr=!0,Go(p,g,M),zi=D,tr=z):(go&&Dv(M.stateNode,M,Jv()),Go(p,g,M));break;case 0:case 11:case 14:case 15:Wa(2,M,g),Xi||Wa(4,M,g),Go(p,g,M);break;case 1:Xi||(ls(M,g),D=M.stateNode,typeof D.componentWillUnmount=="function"&&Cm(M,g,D)),Go(p,g,M);break;case 21:Go(p,g,M);break;case 22:Xi=(D=Xi)||M.memoizedState!==null,Go(p,g,M),Xi=D;break;default:Go(p,g,M)}}function Ho(p,g){if(Ri&&g.memoizedState===null&&(p=g.alternate,p!==null&&(p=p.memoizedState,p!==null))){p=p.dehydrated;try{WT(p)}catch(M){Zt(g,g.return,M)}}}function kd(p,g){if(Ri&&g.memoizedState===null&&(p=g.alternate,p!==null&&(p=p.memoizedState,p!==null&&(p=p.dehydrated,p!==null))))try{$T(p)}catch(M){Zt(g,g.return,M)}}function jo(p){switch(p.tag){case 31:case 13:case 19:var g=p.stateNode;return g===null&&(g=p.stateNode=new Sy),g;case 22:return p=p.stateNode,g=p._retryCache,g===null&&(g=p._retryCache=new Sy),g;default:throw Error(r(435,p.tag))}}function Ol(p,g){var M=jo(p);g.forEach(function(D){if(!M.has(D)){M.add(D);var z=GT.bind(null,p,D);D.then(z,z)}})}function Cr(p,g){var M=g.deletions;if(M!==null)for(var D=0;D<M.length;D++){var z=M[D],H=p,ce=g;if(On){var Pe=ce;e:for(;Pe!==null;){switch(Pe.tag){case 27:if(wr){if(Xu(Pe.type)){zi=Pe.stateNode,tr=!1;break e}break}case 5:zi=Pe.stateNode,tr=!1;break e;case 3:case 4:zi=Pe.stateNode.containerInfo,tr=!0;break e}Pe=Pe.return}if(zi===null)throw Error(r(160));Ud(H,ce,z),zi=null,tr=!1}else Ud(H,ce,z);H=z.alternate,H!==null&&(H.return=null),z.return=null}if(g.subtreeFlags&13886)for(g=g.child;g!==null;)zd(g,p),g=g.sibling}function zd(p,g){var M=p.alternate,D=p.flags;switch(p.tag){case 0:case 11:case 14:case 15:Cr(g,p),Rr(p),D&4&&(Wa(3,p,p.return),ja(3,p),Wa(5,p,p.return));break;case 1:Cr(g,p),Rr(p),D&512&&(Xi||M===null||ls(M,M.return)),D&64&&qi&&(p=p.updateQueue,p!==null&&(D=p.callbacks,D!==null&&(M=p.shared.hiddenCallbacks,p.shared.hiddenCallbacks=M===null?D:M.concat(D))));break;case 26:if(Yo){var z=oi;if(Cr(g,p),Rr(p),D&512&&(Xi||M===null||ls(M,M.return)),D&4){D=M!==null?M.memoizedState:null;var H=p.memoizedState;M===null?H===null?p.stateNode===null?p.stateNode=w1(z,p.type,p.memoizedProps,p):hy(z,p.type,p.stateNode):p.stateNode=fy(z,H,p.memoizedProps):D!==H?(D===null?M.stateNode!==null&&dy(M.stateNode):Fc(D),H===null?hy(z,p.type,p.stateNode):fy(z,H,p.memoizedProps)):H===null&&p.stateNode!==null&&Id(p,p.memoizedProps,M.memoizedProps)}break}case 27:if(wr){Cr(g,p),Rr(p),D&512&&(Xi||M===null||ls(M,M.return)),M!==null&&D&4&&Id(p,p.memoizedProps,M.memoizedProps);break}case 5:if(Cr(g,p),Rr(p),D&512&&(Xi||M===null||ls(M,M.return)),On){if(p.flags&32){z=p.stateNode;try{Kv(z)}catch(dt){Zt(p,p.return,dt)}}D&4&&p.stateNode!=null&&(z=p.memoizedProps,Id(p,z,M!==null?M.memoizedProps:z)),D&1024&&(Mh=!0)}else go&&p.alternate!==null&&(p.alternate.stateNode=p.stateNode);break;case 6:if(Cr(g,p),Rr(p),D&4&&On){if(p.stateNode===null)throw Error(r(162));D=p.memoizedProps,M=M!==null?M.memoizedProps:D,z=p.stateNode;try{Wx(z,M,D)}catch(dt){Zt(p,p.return,dt)}}break;case 3:if(Yo?(S1(),z=oi,oi=Zd(g.containerInfo),Cr(g,p),oi=z):Cr(g,p),Rr(p),D&4){if(On&&Ri&&M!==null&&M.memoizedState.isDehydrated)try{v1(g.containerInfo)}catch(dt){Zt(p,p.return,dt)}if(go){D=g.containerInfo,M=g.pendingChildren;try{ty(D,M)}catch(dt){Zt(p,p.return,dt)}}}Mh&&(Mh=!1,Dm(p));break;case 4:Yo?(M=oi,oi=Zd(p.stateNode.containerInfo),Cr(g,p),Rr(p),oi=M):(Cr(g,p),Rr(p)),D&4&&go&&Dv(p.stateNode,p,p.stateNode.pendingChildren);break;case 12:Cr(g,p),Rr(p);break;case 31:Cr(g,p),Rr(p),D&4&&(D=p.updateQueue,D!==null&&(p.updateQueue=null,Ol(p,D)));break;case 13:Cr(g,p),Rr(p),p.child.flags&8192&&p.memoizedState!==null!=(M!==null&&M.memoizedState!==null)&&(op=cs()),D&4&&(D=p.updateQueue,D!==null&&(p.updateQueue=null,Ol(p,D)));break;case 22:z=p.memoizedState!==null;var ce=M!==null&&M.memoizedState!==null,Pe=qi,it=Xi;if(qi=Pe||z,Xi=it||ce,Cr(g,p),Xi=it,qi=Pe,Rr(p),D&8192&&(g=p.stateNode,g._visibility=z?g._visibility&-2:g._visibility|1,z&&(M===null||ce||qi||Xi||Tc(p)),On)){e:if(M=null,On)for(g=p;;){if(g.tag===5||Yo&&g.tag===26){if(M===null){ce=M=g;try{H=ce.stateNode,z?HT(H):Qx(ce.stateNode,ce.memoizedProps)}catch(dt){Zt(ce,ce.return,dt)}}}else if(g.tag===6){if(M===null){ce=g;try{var ht=ce.stateNode;z?Kx(ht):Jx(ht,ce.memoizedProps)}catch(dt){Zt(ce,ce.return,dt)}}}else if(g.tag===18){if(M===null){ce=g;try{var bt=ce.stateNode;z?b1(bt):_1(ce.stateNode)}catch(dt){Zt(ce,ce.return,dt)}}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===p)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===p)break e;for(;g.sibling===null;){if(g.return===null||g.return===p)break e;M===g&&(M=null),g=g.return}M===g&&(M=null),g.sibling.return=g.return,g=g.sibling}}D&4&&(D=p.updateQueue,D!==null&&(M=D.retryQueue,M!==null&&(D.retryQueue=null,Ol(p,M))));break;case 19:Cr(g,p),Rr(p),D&4&&(D=p.updateQueue,D!==null&&(p.updateQueue=null,Ol(p,D)));break;case 30:break;case 21:break;default:Cr(g,p),Rr(p)}}function Rr(p){var g=p.flags;if(g&2){try{for(var M,D=p.return;D!==null;){if(Rv(D)){M=D;break}D=D.return}if(On){if(M==null)throw Error(r(160));switch(M.tag){case 27:if(wr){var z=M.stateNode,H=Dl(p);Nd(p,H,z);break}case 5:var ce=M.stateNode;M.flags&32&&(Kv(ce),M.flags&=-33);var Pe=Dl(p);Nd(p,Pe,ce);break;case 3:case 4:var it=M.stateNode.containerInfo,ht=Dl(p);Rm(p,ht,it);break;default:throw Error(r(161))}}}catch(bt){Zt(p,p.return,bt)}p.flags&=-3}g&4096&&(p.flags&=-4097)}function Dm(p){if(p.subtreeFlags&1024)for(p=p.child;p!==null;){var g=p;Dm(g),g.tag===5&&g.flags&1024&&jv(g.stateNode),p=p.sibling}}function ys(p,g){if(g.subtreeFlags&8772)for(g=g.child;g!==null;)Ix(p,g.alternate,g),g=g.sibling}function Tc(p){for(p=p.child;p!==null;){var g=p;switch(g.tag){case 0:case 11:case 14:case 15:Wa(4,g,g.return),Tc(g);break;case 1:ls(g,g.return);var M=g.stateNode;typeof M.componentWillUnmount=="function"&&Cm(g,g.return,M),Tc(g);break;case 27:wr&&Dr(g.stateNode);case 26:case 5:ls(g,g.return),Tc(g);break;case 22:g.memoizedState===null&&Tc(g);break;case 30:Tc(g);break;default:Tc(g)}p=p.sibling}}function Wo(p,g,M){for(M=M&&(g.subtreeFlags&8772)!==0,g=g.child;g!==null;){var D=g.alternate,z=p,H=g,ce=H.flags;switch(H.tag){case 0:case 11:case 15:Wo(z,H,M),ja(4,H);break;case 1:if(Wo(z,H,M),D=H,z=D.stateNode,typeof z.componentDidMount=="function")try{z.componentDidMount()}catch(ht){Zt(D,D.return,ht)}if(D=H,z=D.updateQueue,z!==null){var Pe=D.stateNode;try{var it=z.shared.hiddenCallbacks;if(it!==null)for(z.shared.hiddenCallbacks=null,z=0;z<it.length;z++)Be(it[z],Pe)}catch(ht){Zt(D,D.return,ht)}}M&&ce&64&&oh(H),ah(H,H.return);break;case 27:wr&&Px(H);case 26:case 5:Wo(z,H,M),M&&D===null&&ce&4&&ku(H),ah(H,H.return);break;case 12:Wo(z,H,M);break;case 31:Wo(z,H,M),M&&ce&4&&Ho(z,H);break;case 13:Wo(z,H,M),M&&ce&4&&kd(z,H);break;case 22:H.memoizedState===null&&Wo(z,H,M),ah(H,H.return);break;case 30:break;default:Wo(z,H,M)}g=g.sibling}}function Ac(p,g){var M=null;p!==null&&p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(M=p.memoizedState.cachePool.pool),p=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(p=g.memoizedState.cachePool.pool),p!==M&&(p!=null&&p.refCount++,M!=null&&J(M))}function Lv(p,g){p=null,g.alternate!==null&&(p=g.alternate.memoizedState.cache),g=g.memoizedState.cache,g!==p&&(g.refCount++,p!=null&&J(p))}function Ii(p,g,M,D){if(g.subtreeFlags&10256)for(g=g.child;g!==null;)Om(p,g,M,D),g=g.sibling}function Om(p,g,M,D){var z=g.flags;switch(g.tag){case 0:case 11:case 15:Ii(p,g,M,D),z&2048&&ja(9,g);break;case 1:Ii(p,g,M,D);break;case 3:Ii(p,g,M,D),z&2048&&(p=null,g.alternate!==null&&(p=g.alternate.memoizedState.cache),g=g.memoizedState.cache,g!==p&&(g.refCount++,p!=null&&J(p)));break;case 12:if(z&2048){Ii(p,g,M,D),p=g.stateNode;try{var H=g.memoizedProps,ce=H.id,Pe=H.onPostCommit;typeof Pe=="function"&&Pe(ce,g.alternate===null?"mount":"update",p.passiveEffectDuration,-0)}catch(it){Zt(g,g.return,it)}}else Ii(p,g,M,D);break;case 31:Ii(p,g,M,D);break;case 13:Ii(p,g,M,D);break;case 23:break;case 22:H=g.stateNode,ce=g.alternate,g.memoizedState!==null?H._visibility&2?Ii(p,g,M,D):lh(p,g):H._visibility&2?Ii(p,g,M,D):(H._visibility|=2,Us(p,g,M,D,(g.subtreeFlags&10256)!==0||!1)),z&2048&&Ac(ce,g);break;case 24:Ii(p,g,M,D),z&2048&&Lv(g.alternate,g);break;default:Ii(p,g,M,D)}}function Us(p,g,M,D,z){for(z=z&&((g.subtreeFlags&10256)!==0||!1),g=g.child;g!==null;){var H=p,ce=g,Pe=M,it=D,ht=ce.flags;switch(ce.tag){case 0:case 11:case 15:Us(H,ce,Pe,it,z),ja(8,ce);break;case 23:break;case 22:var bt=ce.stateNode;ce.memoizedState!==null?bt._visibility&2?Us(H,ce,Pe,it,z):lh(H,ce):(bt._visibility|=2,Us(H,ce,Pe,it,z)),z&&ht&2048&&Ac(ce.alternate,ce);break;case 24:Us(H,ce,Pe,it,z),z&&ht&2048&&Lv(ce.alternate,ce);break;default:Us(H,ce,Pe,it,z)}g=g.sibling}}function lh(p,g){if(g.subtreeFlags&10256)for(g=g.child;g!==null;){var M=p,D=g,z=D.flags;switch(D.tag){case 22:lh(M,D),z&2048&&Ac(D.alternate,D);break;case 24:lh(M,D),z&2048&&Lv(D.alternate,D);break;default:lh(M,D)}g=g.sibling}}function $a(p,g,M){if(p.subtreeFlags&_o)for(p=p.child;p!==null;)Cc(p,g,M),p=p.sibling}function Cc(p,g,M){switch(p.tag){case 26:if($a(p,g,M),p.flags&_o)if(p.memoizedState!==null)E1(M,oi,p.memoizedState,p.memoizedProps);else{var D=p.stateNode,z=p.type;p=p.memoizedProps,((g&335544128)===g||Gv(z,p))&&qm(M,D,z,p)}break;case 5:$a(p,g,M),p.flags&_o&&(D=p.stateNode,z=p.type,p=p.memoizedProps,((g&335544128)===g||Gv(z,p))&&qm(M,D,z,p));break;case 3:case 4:Yo?(D=oi,oi=Zd(p.stateNode.containerInfo),$a(p,g,M),oi=D):$a(p,g,M);break;case 22:p.memoizedState===null&&(D=p.alternate,D!==null&&D.memoizedState!==null?(D=_o,_o=16777216,$a(p,g,M),_o=D):$a(p,g,M));break;default:$a(p,g,M)}}function Lm(p){var g=p.alternate;if(g!==null&&(p=g.child,p!==null)){g.child=null;do g=p.sibling,p.sibling=null,p=g;while(p!==null)}}function ch(p){var g=p.deletions;if((p.flags&16)!==0){if(g!==null)for(var M=0;M<g.length;M++){var D=g[M];er=D,ho(D,p)}Lm(p)}if(p.subtreeFlags&10256)for(p=p.child;p!==null;)Pm(p),p=p.sibling}function Pm(p){switch(p.tag){case 0:case 11:case 15:ch(p),p.flags&2048&&Wa(9,p,p.return);break;case 3:ch(p);break;case 12:ch(p);break;case 22:var g=p.stateNode;p.memoizedState!==null&&g._visibility&2&&(p.return===null||p.return.tag!==13)?(g._visibility&=-3,Fd(p)):ch(p);break;default:ch(p)}}function Fd(p){var g=p.deletions;if((p.flags&16)!==0){if(g!==null)for(var M=0;M<g.length;M++){var D=g[M];er=D,ho(D,p)}Lm(p)}for(p=p.child;p!==null;){switch(g=p,g.tag){case 0:case 11:case 15:Wa(8,g,g.return),Fd(g);break;case 22:M=g.stateNode,M._visibility&2&&(M._visibility&=-3,Fd(g));break;default:Fd(g)}p=p.sibling}}function ho(p,g){for(;er!==null;){var M=er;switch(M.tag){case 0:case 11:case 15:Wa(8,M,g);break;case 23:case 22:if(M.memoizedState!==null&&M.memoizedState.cachePool!==null){var D=M.memoizedState.cachePool.pool;D!=null&&D.refCount++}break;case 24:J(M.memoizedState.cache)}if(D=M.child,D!==null)D.return=M,er=D;else e:for(M=p;er!==null;){D=er;var z=D.sibling,H=D.return;if(Ov(D),D===M){er=null;break e}if(z!==null){z.return=H,er=z;break e}er=H}}}function Rc(p){var g=an(p);if(g!=null){if(typeof g.memoizedProps["data-testname"]!="string")throw Error(r(364));return g}if(p=Qi(p),p===null)throw Error(r(362));return p.stateNode.current}function Dc(p,g){var M=p.tag;switch(g.$$typeof){case ia:if(p.type===g.value)return!0;break;case Ah:e:{for(g=g.value,p=[p,0],M=0;M<p.length;){var D=p[M++],z=D.tag,H=p[M++],ce=g[H];if(z!==5&&z!==26&&z!==27||!kc(D)){for(;ce!=null&&Dc(D,ce);)H++,ce=g[H];if(H===g.length){g=!0;break e}else for(D=D.child;D!==null;)p.push(D,H),D=D.sibling}}g=!1}return g;case Ch:if((M===5||M===26||M===27)&&qv(p.stateNode,g.value))return!0;break;case Wc:if((M===5||M===6||M===26||M===27)&&(p=Xd(p),p!==null&&0<=p.indexOf(g.value)))return!0;break;case rp:if((M===5||M===26||M===27)&&(p=p.memoizedProps["data-testname"],typeof p=="string"&&p.toLowerCase()===g.value.toLowerCase()))return!0;break;default:throw Error(r(365))}return!1}function uh(p){switch(p.$$typeof){case ia:return"<"+(d(p.value)||"Unknown")+">";case Ah:return":has("+(uh(p)||"")+")";case Ch:return'[role="'+p.value+'"]';case Wc:return'"'+p.value+'"';case rp:return'[data-testname="'+p.value+'"]';default:throw Error(r(365))}}function fh(p,g){var M=[];p=[p,0];for(var D=0;D<p.length;){var z=p[D++],H=z.tag,ce=p[D++],Pe=g[ce];if(H!==5&&H!==26&&H!==27||!kc(z)){for(;Pe!=null&&Dc(z,Pe);)ce++,Pe=g[ce];if(ce===g.length)M.push(z);else for(z=z.child;z!==null;)p.push(z,ce),z=z.sibling}}return M}function ks(p,g){if(!xr)throw Error(r(363));p=Rc(p),p=fh(p,g),g=[],p=Array.from(p);for(var M=0;M<p.length;){var D=p[M++],z=D.tag;if(z===5||z===26||z===27)kc(D)||g.push(D.stateNode);else for(D=D.child;D!==null;)p.push(D),D=D.sibling}return g}function Ci(){return(Mn&2)!==0&&Rn!==0?Rn&-Rn:Ht.T!==null?Je():_h()}function Ll(){if(Es===0)if((Rn&536870912)===0||Cn){var p=Zu;Zu<<=1,(Zu&3932160)===0&&(Zu=262144),Es=p}else Es=536870912;return p=Hs.current,p!==null&&(p.flags|=32),Es}function Ni(p,g,M){(p===yn&&(ai===2||ai===9)||p.cancelPendingCommit!==null)&&(Wi(p,0),Xa(p,Rn,Es,!1)),R(p,M),((Mn&2)===0||p!==yn)&&(p===yn&&((Mn&2)===0&&(Xc|=M),Fi===4&&Xa(p,Rn,Es,!1)),ge(p))}function xa(p,g,M){if((Mn&6)!==0)throw Error(r(327));var D=!M&&(g&127)===0&&(g&p.expiredLanes)===0||A(p,g),z=D?kx(p,g):Ya(p,g,!0),H=D;do{if(z===0){$c&&!D&&Xa(p,g,0,!1);break}else{if(M=p.current.alternate,H&&!Nx(M)){z=Ya(p,g,!1),H=!1;continue}if(z===2){if(H=g,p.errorRecoveryDisabledLanes&H)var ce=0;else ce=p.pendingLanes&-536870913,ce=ce!==0?ce:ce&536870912?536870912:0;if(ce!==0){g=ce;e:{var Pe=p;z=sp;var it=Ri&&Pe.current.memoizedState.isDehydrated;if(it&&(Wi(Pe,ce).flags|=256),ce=Ya(Pe,ce,!1),ce!==2){if(qc&&!it){Pe.errorRecoveryDisabledLanes|=H,Xc|=H,z=4;break e}H=Ws,Ws=z,H!==null&&(Ws===null?Ws=H:Ws.push.apply(Ws,H))}z=ce}if(H=!1,z!==2)continue}}if(z===1){Wi(p,0),Xa(p,g,0,!0);break}e:{switch(D=p,H=z,H){case 0:case 1:throw Error(r(345));case 4:if((g&4194048)!==g)break;case 6:Xa(D,g,Es,!Ma);break e;case 2:Ws=null;break;case 3:case 5:break;default:throw Error(r(329))}if((g&62914560)===g&&(z=op+300-cs(),10<z)){if(Xa(D,g,Es,!Ma),_(D,0,!0)!==0)break e;cl=g,D.timeoutHandle=Vv(qa.bind(null,D,M,Ws,ap,mg,g,Es,Xc,Dh,Ma,H,"Throttled",-0,0),z);break e}qa(D,M,Ws,ap,mg,g,Es,Xc,Dh,Ma,H,null,-0,0)}}break}while(!0);ge(p)}function qa(p,g,M,D,z,H,ce,Pe,it,ht,bt,dt,Dt,nn){if(p.timeoutHandle=Bs,dt=g.subtreeFlags,dt&8192||(dt&16785408)===16785408){dt=Hv(),Cc(g,H,dt);var nr=(H&62914560)===H?op-cs():(H&4194048)===H?rf-cs():0;if(nr=jx(dt,nr),nr!==null){cl=H,p.cancelPendingCommit=nr(Ka.bind(null,p,g,H,M,D,z,ce,Pe,it,bt,dt,null,Dt,nn)),Xa(p,H,ce,!ht);return}}Ka(p,g,H,M,D,z,ce,Pe,it)}function Nx(p){for(var g=p;;){var M=g.tag;if((M===0||M===11||M===15)&&g.flags&16384&&(M=g.updateQueue,M!==null&&(M=M.stores,M!==null)))for(var D=0;D<M.length;D++){var z=M[D],H=z.getSnapshot;z=z.value;try{if(!Ji(H(),z))return!1}catch{return!1}}if(M=g.child,g.subtreeFlags&16384&&M!==null)M.return=g,g=M;else{if(g===p)break;for(;g.sibling===null;){if(g.return===null||g.return===p)return!0;g=g.return}g.sibling.return=g.return,g=g.sibling}}return!0}function Xa(p,g,M,D){g&=~Rh,g&=~Xc,p.suspendedLanes|=g,p.pingedLanes&=~g,D&&(p.warmLanes|=g),D=p.expirationTimes;for(var z=g;0<z;){var H=31-Vs(z),ce=1<<H;D[H]=-1,z&=~ce}M!==0&&I(p,M,g)}function Im(){return(Mn&6)===0?(_e(0),!1):!0}function Nm(){if(Tn!==null){if(ai===0)var p=Tn.return;else p=Tn,Sa=bi=null,gi(p),Gc=null,Qu=0,p=Tn;for(;p!==null;)Lx(p.alternate,p),p=p.return;Tn=null}}function Wi(p,g){var M=p.timeoutHandle;M!==Bs&&(p.timeoutHandle=Bs,Hx(M)),M=p.cancelPendingCommit,M!==null&&(p.cancelPendingCommit=null,M()),cl=0,Nm(),yn=p,Tn=M=mo(p.current,null),Rn=g,ai=0,pr=null,Ma=!1,$c=A(p,g),qc=!1,Dh=Es=Rh=Xc=jl=Fi=0,Ws=sp=null,mg=!1,(g&8)!==0&&(g|=g&32);var D=p.entangledLanes;if(D!==0)for(p=p.entanglements,D&=g;0<D;){var z=31-Vs(D),H=1<<z;g|=p[z],D&=~H}return ll=g,_r(),M}function yi(p,g){ln=null,Ht.H=bo,g===Mr||g===ta?(g=Bt(),ai=3):g===dg?(g=Bt(),ai=4):ai=g===Ss?8:g!==null&&typeof g=="object"&&typeof g.then=="function"?6:1,pr=g,Tn===null&&(Fi=1,Em(p,te(g,p.current)))}function Dn(){var p=Hs.current;return p===null?!0:(Rn&4194048)===Rn?js===null:(Rn&62914560)===Rn||(Rn&536870912)!==0?p===js:!1}function Pl(){var p=Ht.H;return Ht.H=bo,p===null?bo:p}function po(){var p=Ht.A;return Ht.A=Th,p}function hh(){Fi=4,Ma||(Rn&4194048)!==Rn&&Hs.current!==null||($c=!0),(jl&134217727)===0&&(Xc&134217727)===0||yn===null||Xa(yn,Rn,Es,!1)}function Ya(p,g,M){var D=Mn;Mn|=2;var z=Pl(),H=po();(yn!==p||Rn!==g)&&(ap=null,Wi(p,g)),g=!1;var ce=Fi;e:do try{if(ai!==0&&Tn!==null){var Pe=Tn,it=pr;switch(ai){case 8:Nm(),ce=6;break e;case 3:case 2:case 9:case 6:Hs.current===null&&(g=!0);var ht=ai;if(ai=0,pr=null,Za(p,Pe,it,ht),M&&$c){ce=0;break e}break;default:ht=ai,ai=0,pr=null,Za(p,Pe,it,ht)}}Ux(),ce=Fi;break}catch(bt){yi(p,bt)}while(!0);return g&&p.shellSuspendCounter++,Sa=bi=null,Mn=D,Ht.H=z,Ht.A=H,Tn===null&&(yn=null,Rn=0,_r()),ce}function Ux(){for(;Tn!==null;)Oc(Tn)}function kx(p,g){var M=Mn;Mn|=2;var D=Pl(),z=po();yn!==p||Rn!==g?(ap=null,Yc=cs()+500,Wi(p,g)):$c=A(p,g);e:do try{if(ai!==0&&Tn!==null){g=Tn;var H=pr;t:switch(ai){case 1:ai=0,pr=null,Za(p,g,H,1);break;case 2:case 9:if(vt(H)){ai=0,pr=null,Um(g);break}g=function(){ai!==2&&ai!==9||yn!==p||(ai=7),ge(p)},H.then(g,g);break e;case 3:ai=7;break e;case 4:ai=5;break e;case 7:vt(H)?(ai=0,pr=null,Um(g)):(ai=0,pr=null,Za(p,g,H,7));break;case 5:var ce=null;switch(Tn.tag){case 26:ce=Tn.memoizedState;case 5:case 27:var Pe=Tn,it=Pe.type,ht=Pe.pendingProps;if(ce?my(ce):Ui(Pe.stateNode,it,ht)){ai=0,pr=null;var bt=Pe.sibling;if(bt!==null)Tn=bt;else{var dt=Pe.return;dt!==null?(Tn=dt,ph(dt)):Tn=null}break t}}ai=0,pr=null,Za(p,g,H,5);break;case 6:ai=0,pr=null,Za(p,g,H,6);break;case 8:Nm(),Fi=6;break e;default:throw Error(r(462))}}dh();break}catch(Dt){yi(p,Dt)}while(!0);return Sa=bi=null,Ht.H=D,Ht.A=z,Mn=M,Tn!==null?0:(yn=null,Rn=0,_r(),Fi)}function dh(){for(;Tn!==null&&!T1();)Oc(Tn)}function Oc(p){var g=Mv(p.alternate,p,ll);p.memoizedProps=p.pendingProps,g===null?ph(p):Tn=g}function Um(p){var g=p,M=g.alternate;switch(g.tag){case 15:case 0:g=bv(M,g,g.pendingProps,g.type,void 0,Rn);break;case 11:g=bv(M,g,g.pendingProps,g.type.render,g.ref,Rn);break;case 5:gi(g);default:Lx(M,g),g=Tn=Fm(g,ll),g=Mv(M,g,ll)}p.memoizedProps=p.pendingProps,g===null?ph(p):Tn=g}function Za(p,g,M,D){Sa=bi=null,gi(g),Gc=null,Qu=0;var z=g.return;try{if(FT(p,z,g,M,Rn)){Fi=1,Em(p,te(M,p.current)),Tn=null;return}}catch(H){if(z!==null)throw Tn=z,H;Fi=1,Em(p,te(M,p.current)),Tn=null;return}g.flags&32768?(Cn||D===1?p=!0:$c||(Rn&536870912)!==0?p=!1:(Ma=p=!0,(D===2||D===9||D===3||D===6)&&(D=Hs.current,D!==null&&D.tag===13&&(D.flags|=16384))),Lc(g,p)):ph(g)}function ph(p){var g=p;do{if((g.flags&32768)!==0){Lc(g,Ma);return}p=g.return;var M=Ox(g.alternate,g,ll);if(M!==null){Tn=M;return}if(g=g.sibling,g!==null){Tn=g;return}Tn=g=p}while(g!==null);Fi===0&&(Fi=5)}function Lc(p,g){do{var M=Cv(p.alternate,p);if(M!==null){M.flags&=32767,Tn=M;return}if(M=p.return,M!==null&&(M.flags|=32768,M.subtreeFlags=0,M.deletions=null),!g&&(p=p.sibling,p!==null)){Tn=p;return}Tn=p=M}while(p!==null);Fi=6,Tn=null}function Ka(p,g,M,D,z,H,ce,Pe,it){p.cancelPendingCommit=null;do Ja();while(mr!==0);if((Mn&6)!==0)throw Error(r(327));if(g!==null){if(g===p.current)throw Error(r(177));if(H=g.lanes|g.childLanes,H|=Ju,O(p,M,H,ce,Pe,it),p===yn&&(Tn=yn=null,Rn=0),sf=g,$l=p,cl=M,Oh=H,gg=z,Ey=D,(g.subtreeFlags&10256)!==0||(g.flags&10256)!==0?(p.callbackNode=null,p.callbackPriority=0,hr(Qd,function(){return Bd(),null})):(p.callbackNode=null,p.callbackPriority=0),D=(g.flags&13878)!==0,(g.subtreeFlags&13878)!==0||D){D=Ht.T,Ht.T=null,z=Xo(),An(2),ce=Mn,Mn|=4;try{BT(p,g,M)}finally{Mn=ce,An(z),Ht.T=D}}mr=1,Il(),Qa(),km()}}function Il(){if(mr===1){mr=0;var p=$l,g=sf,M=(g.flags&13878)!==0;if((g.subtreeFlags&13878)!==0||M){M=Ht.T,Ht.T=null;var D=Xo();An(2);var z=Mn;Mn|=4;try{zd(g,p),Gx(p.containerInfo)}finally{Mn=z,An(D),Ht.T=M}}p.current=g,mr=2}}function Qa(){if(mr===2){mr=0;var p=$l,g=sf,M=(g.flags&8772)!==0;if((g.subtreeFlags&8772)!==0||M){M=Ht.T,Ht.T=null;var D=Xo();An(2);var z=Mn;Mn|=4;try{Ix(p,g.alternate,g)}finally{Mn=z,An(D),Ht.T=M}}mr=3}}function km(){if(mr===4||mr===3){mr=0,vy();var p=$l,g=sf,M=cl,D=Ey;(g.subtreeFlags&10256)!==0||(g.flags&10256)!==0?mr=5:(mr=0,sf=$l=null,zm(p,p.pendingLanes));var z=p.pendingLanes;if(z===0&&(Wl=null),B(M),g=g.stateNode,Gs&&typeof Gs.onCommitFiberRoot=="function")try{Gs.onCommitFiberRoot(Ku,g,void 0,(g.current.flags&128)===128)}catch{}if(D!==null){g=Ht.T,z=Xo(),An(2),Ht.T=null;try{for(var H=p.onRecoverableError,ce=0;ce<D.length;ce++){var Pe=D[ce];H(Pe.value,{componentStack:Pe.stack})}}finally{Ht.T=g,An(z)}}(cl&3)!==0&&Ja(),ge(p),z=p.pendingLanes,(M&261930)!==0&&(z&42)!==0?p===lp?jn++:(jn=0,lp=p):jn=0,Ri&&Yd(),_e(0)}}function zm(p,g){(p.pooledCacheLanes&=g)===0&&(g=p.pooledCache,g!=null&&(p.pooledCache=null,J(g)))}function Ja(){return Il(),Qa(),km(),Bd()}function Bd(){if(mr!==5)return!1;var p=$l,g=Oh;Oh=0;var M=B(cl),D=32>M?32:M;M=Ht.T;var z=Xo();try{An(D),Ht.T=null,D=gg,gg=null;var H=$l,ce=cl;if(mr=0,sf=$l=null,cl=0,(Mn&6)!==0)throw Error(r(331));var Pe=Mn;if(Mn|=4,Pm(H.current),Om(H,H.current,ce,D),Mn=Pe,_e(0,!1),Gs&&typeof Gs.onPostCommitFiberRoot=="function")try{Gs.onPostCommitFiberRoot(Ku,H)}catch{}return!0}finally{An(z),Ht.T=M,zm(p,g)}}function Pc(p,g,M){g=te(M,g),g=vv(p.stateNode,g,2),p=oo(p,g,2),p!==null&&(R(p,2),ge(p))}function Zt(p,g,M){if(p.tag===3)Pc(p,p,M);else for(;g!==null;){if(g.tag===3){Pc(g,p,M);break}else if(g.tag===1){var D=g.stateNode;if(typeof g.type.getDerivedStateFromError=="function"||typeof D.componentDidCatch=="function"&&(Wl===null||!Wl.has(D))){p=te(M,p),M=bx(2),D=oo(g,M,2),D!==null&&(_x(M,D,g,p),R(D,2),ge(D));break}}g=g.return}}function mh(p,g,M){var D=p.pingCache;if(D===null){D=p.pingCache=new xo;var z=new Set;D.set(g,z)}else z=D.get(g),z===void 0&&(z=new Set,D.set(g,z));z.has(M)||(qc=!0,z.add(M),p=zx.bind(null,p,g,M),g.then(p,p))}function zx(p,g,M){var D=p.pingCache;D!==null&&D.delete(g),p.pingedLanes|=p.suspendedLanes&M,p.warmLanes&=~M,yn===p&&(Rn&M)===M&&(Fi===4||Fi===3&&(Rn&62914560)===Rn&&300>cs()-op?(Mn&2)===0&&Wi(p,0):Rh|=M,Dh===Rn&&(Dh=0)),ge(p)}function Fx(p,g){g===0&&(g=E()),p=Yi(p,g),p!==null&&(R(p,g),ge(p))}function VT(p){var g=p.memoizedState,M=0;g!==null&&(M=g.retryLane),Fx(p,M)}function GT(p,g){var M=0;switch(p.tag){case 31:case 13:var D=p.stateNode,z=p.memoizedState;z!==null&&(M=z.retryLane);break;case 19:D=p.stateNode;break;case 22:D=p.stateNode._retryCache;break;default:throw Error(r(314))}D!==null&&D.delete(g),Fx(p,M)}function hr(p,g){return Kd(p,g)}function Pv(p,g,M,D){this.tag=p,this.key=M,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=g,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=D,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zu(p){return p=p.prototype,!(!p||!p.isReactComponent)}function mo(p,g){var M=p.alternate;return M===null?(M=t(p.tag,g,p.key,p.mode),M.elementType=p.elementType,M.type=p.type,M.stateNode=p.stateNode,M.alternate=p,p.alternate=M):(M.pendingProps=g,M.type=p.type,M.flags=0,M.subtreeFlags=0,M.deletions=null),M.flags=p.flags&65011712,M.childLanes=p.childLanes,M.lanes=p.lanes,M.child=p.child,M.memoizedProps=p.memoizedProps,M.memoizedState=p.memoizedState,M.updateQueue=p.updateQueue,g=p.dependencies,M.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext},M.sibling=p.sibling,M.index=p.index,M.ref=p.ref,M.refCleanup=p.refCleanup,M}function Fm(p,g){p.flags&=65011714;var M=p.alternate;return M===null?(p.childLanes=0,p.lanes=g,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=M.childLanes,p.lanes=M.lanes,p.child=M.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=M.memoizedProps,p.memoizedState=M.memoizedState,p.updateQueue=M.updateQueue,p.type=M.type,g=M.dependencies,p.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext}),p}function Nl(p,g,M,D,z,H){var ce=0;if(D=p,typeof p=="function")zu(p)&&(ce=1);else if(typeof p=="string")ce=Yo&&wr?eg(p,M,Or.current)?26:gy(p)?27:5:Yo?eg(p,M,Or.current)?26:5:wr&&gy(p)?27:5;else e:switch(p){case jd:return p=t(31,M,g,z),p.elementType=jd,p.lanes=H,p;case Gu:return $o(M.children,z,H,g);case Hu:ce=8,z|=24;break;case ju:return p=t(12,M,g,z|2),p.elementType=ju,p.lanes=H,p;case Hm:return p=t(13,M,g,z),p.elementType=Hm,p.lanes=H,p;case Ul:return p=t(19,M,g,z),p.elementType=Ul,p.lanes=H,p;default:if(typeof p=="object"&&p!==null)switch(p.$$typeof){case qo:ce=10;break e;case Hd:ce=9;break e;case gh:ce=11;break e;case jm:ce=14;break e;case bs:ce=16,D=null;break e}ce=29,M=Error(r(130,p===null?"null":typeof p,"")),D=null}return g=t(ce,M,g,z),g.elementType=p,g.type=D,g.lanes=H,g}function $o(p,g,M,D){return p=t(7,p,D,g),p.lanes=M,p}function Iv(p,g,M){return p=t(6,p,null,g),p.lanes=M,p}function Nv(p){var g=t(18,null,null,0);return g.stateNode=p,g}function Uv(p,g,M){return g=t(4,p.children!==null?p.children:[],p.key,g),g.lanes=M,g.stateNode={containerInfo:p.containerInfo,pendingChildren:null,implementation:p.implementation},g}function Bx(p,g,M,D,z,H,ce,Pe,it){this.tag=1,this.containerInfo=p,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Bs,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=C(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=C(0),this.hiddenUpdates=C(null),this.identifierPrefix=D,this.onUncaughtError=z,this.onCaughtError=H,this.onRecoverableError=ce,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=it,this.incompleteTransitions=new Map}function Ic(p,g,M,D,z,H,ce,Pe,it,ht,bt,dt){return p=new Bx(p,g,M,ce,it,ht,bt,dt,Pe),g=1,H===!0&&(g|=24),H=t(3,null,null,g),p.current=H,H.stateNode=p,g=Y(),g.refCount++,p.pooledCache=g,g.refCount++,H.memoizedState={element:D,isDehydrated:M,cache:g},Hi(H),p}function Bm(p){return p?(p=tl,p):tl}function Vd(p){var g=p._reactInternals;if(g===void 0)throw typeof p.render=="function"?Error(r(188)):(p=Object.keys(p).join(","),Error(r(268,p)));return p=a(g),p=p!==null?l(p):null,p===null?null:yh(p.stateNode)}function kv(p,g,M,D,z,H){z=Bm(z),D.context===null?D.context=z:D.pendingContext=z,D=Is(g),D.payload={element:M},H=H===void 0?null:H,H!==null&&(D.callback=H),M=oo(p,D,g),M!==null&&(Ni(M,p,g),ko(M,p,g))}function Fu(p,g){if(p=p.memoizedState,p!==null&&p.dehydrated!==null){var M=p.retryLane;p.retryLane=M!==0&&M<g?M:g}}function Gd(p,g){Fu(p,g),(p=p.alternate)&&Fu(p,g)}var gn={},Vm=eo,zs=que,Gm=Object.assign,Bu=Symbol.for("react.element"),el=Symbol.for("react.transitional.element"),Vu=Symbol.for("react.portal"),Gu=Symbol.for("react.fragment"),Hu=Symbol.for("react.strict_mode"),ju=Symbol.for("react.profiler"),Hd=Symbol.for("react.consumer"),qo=Symbol.for("react.context"),gh=Symbol.for("react.forward_ref"),Hm=Symbol.for("react.suspense"),Ul=Symbol.for("react.suspense_list"),jm=Symbol.for("react.memo"),bs=Symbol.for("react.lazy"),jd=Symbol.for("react.activity"),zv=Symbol.for("react.memo_cache_sentinel"),kl=Symbol.iterator,Nc=Symbol.for("react.client.reference"),Uc=Array.isArray,Ht=Vm.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Fv=e.rendererVersion,Wd=e.rendererPackageName,vh=e.extraDevToolsConfig,yh=e.getPublicInstance,Vx=e.getRootHostContext,bh=e.getChildHostContext,Wm=e.prepareForCommit,Gx=e.resetAfterCommit,Bv=e.createInstance;e.cloneMutableInstance;var $d=e.appendInitialChild,Fs=e.finalizeInitialChildren,_s=e.shouldSetTextContent,zl=e.createTextInstance;e.cloneMutableTextInstance;var Vv=e.scheduleTimeout,Hx=e.cancelTimeout,Bs=e.noTimeout,Ki=e.isPrimaryRenderer;e.warnsIfNotActing;var On=e.supportsMutation,go=e.supportsPersistence,Ri=e.supportsHydration,an=e.getInstanceFromNode;e.beforeActiveInstanceBlur;var ci=e.preparePortalMount;e.prepareScopeUpdate,e.getInstanceFromScope;var An=e.setCurrentUpdatePriority,Xo=e.getCurrentUpdatePriority,_h=e.resolveUpdatePriority;e.trackSchedulerEvent,e.resolveEventType,e.resolveEventTimeStamp;var Wu=e.shouldAttemptEagerTransition,$m=e.detachDeletedInstance;e.requestPostPaintCallback;var qd=e.maySuspendCommit,xh=e.maySuspendCommitOnUpdate,Gv=e.maySuspendCommitInSyncRender,Ui=e.preloadInstance,Hv=e.startSuspendingCommit,qm=e.suspendInstance;e.suspendOnActiveViewTransition;var jx=e.waitForCommitToBeReady;e.getSuspendedCommitReason;var $u=e.NotPendingTransition,qu=e.HostTransitionContext,jv=e.resetFormInstance;e.bindToConsole;var Wv=e.supportsMicrotasks,$v=e.scheduleMicrotask,xr=e.supportsTestSelectors,Qi=e.findFiberRoot,Xm=e.getBoundingRect,Xd=e.getTextContent,kc=e.isHiddenSubtree,qv=e.matchAccessibilityRole,Fl=e.setFocusIfFocusable,Ym=e.setupIntersectionObserver,Xv=e.appendChild,Yv=e.appendChildToContainer,Wx=e.commitTextUpdate,$x=e.commitMount,qx=e.commitUpdate,Xx=e.insertBefore,Yx=e.insertInContainerBefore,Zx=e.removeChild,Zv=e.removeChildFromContainer,Kv=e.resetTextContent,HT=e.hideInstance,Kx=e.hideTextInstance,Qx=e.unhideInstance,Jx=e.unhideTextInstance;e.cancelViewTransitionName,e.cancelRootViewTransitionName,e.restoreRootViewTransitionName,e.cloneRootViewTransitionContainer,e.removeRootViewTransitionClone,e.measureClonedInstance,e.hasInstanceChanged,e.hasInstanceAffectedParent,e.startViewTransition,e.startGestureTransition,e.stopViewTransition,e.getCurrentGestureOffset,e.createViewTransitionInstance;var Qv=e.clearContainer;e.createFragmentInstance,e.updateFragmentInstanceFiber,e.commitNewChildToFragmentInstance,e.deleteChildFromFragmentInstance;var e1=e.cloneInstance,Jv=e.createContainerChildSet,ey=e.appendChildToContainerChildSet,t1=e.finalizeContainerChildren,ty=e.replaceContainerChildren,n1=e.cloneHiddenInstance,ny=e.cloneHiddenTextInstance,zc=e.isSuspenseInstancePending,Zm=e.isSuspenseInstanceFallback,Km=e.getSuspenseInstanceFallbackErrorDetails,Qm=e.registerSuspenseInstanceRetry,i1=e.canHydrateFormStateMarker,iy=e.isFormStateMarkerMatching,r1=e.getNextHydratableSibling,s1=e.getNextHydratableSiblingAfterSingleton,o1=e.getFirstHydratableChild,a1=e.getFirstHydratableChildWithinContainer,l1=e.getFirstHydratableChildWithinActivityInstance,c1=e.getFirstHydratableChildWithinSuspenseInstance,ry=e.getFirstHydratableChildWithinSingleton,u1=e.canHydrateInstance,f1=e.canHydrateTextInstance,sy=e.canHydrateActivityInstance,h1=e.canHydrateSuspenseInstance,d1=e.hydrateInstance,jT=e.hydrateTextInstance,oy=e.hydrateActivityInstance,p1=e.hydrateSuspenseInstance,m1=e.getNextHydratableInstanceAfterActivityInstance,ay=e.getNextHydratableInstanceAfterSuspenseInstance,g1=e.commitHydratedInstance,v1=e.commitHydratedContainer,WT=e.commitHydratedActivityInstance,$T=e.commitHydratedSuspenseInstance,y1=e.finalizeHydratedChildren,Yd=e.flushHydrationEvents;e.clearActivityBoundary;var ly=e.clearSuspenseBoundary;e.clearActivityBoundaryFromContainer;var Jm=e.clearSuspenseBoundaryFromContainer,b1=e.hideDehydratedBoundary,_1=e.unhideDehydratedBoundary,wh=e.shouldDeleteUnhydratedTailInstances;e.diffHydratedPropsForDevWarnings,e.diffHydratedTextForDevWarnings,e.describeHydratableInstanceForDevWarnings;var x1=e.validateHydratableInstance,cy=e.validateHydratableTextInstance,Yo=e.supportsResources,eg=e.isHostHoistableType,Zd=e.getHoistableRoot,uy=e.getResource,fy=e.acquireResource,Fc=e.releaseResource,w1=e.hydrateHoistable,hy=e.mountHoistable,dy=e.unmountHoistable,tg=e.createHoistableInstance,S1=e.prepareToCommitHoistables,py=e.mayResourceSuspendCommit,my=e.preloadResource,E1=e.suspendResource,wr=e.supportsSingletons,ng=e.resolveSingletonInstance,dr=e.acquireSingletonInstance,Dr=e.releaseSingletonInstance,gy=e.isHostSingletonType,Xu=e.isSingletonScope,ig=[],Yu=-1,tl={},Vs=Math.clz32?Math.clz32:x,rg=Math.log,M1=Math.LN2,sg=256,Zu=262144,Sh=4194304,Kd=zs.unstable_scheduleCallback,og=zs.unstable_cancelCallback,T1=zs.unstable_shouldYield,vy=zs.unstable_requestPaint,cs=zs.unstable_now,ag=zs.unstable_ImmediatePriority,A1=zs.unstable_UserBlockingPriority,Qd=zs.unstable_NormalPriority,lg=zs.unstable_IdlePriority,yy=zs.log,C1=zs.unstable_setDisableYieldValue,Ku=null,Gs=null,Ji=typeof Object.is=="function"?Object.is:j,cg=typeof reportError=="function"?reportError:function(p){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var g=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof p=="object"&&p!==null&&typeof p.message=="string"?String(p.message):String(p),error:p});if(!window.dispatchEvent(g))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",p);return}console.error(p)},qT=Object.prototype.hasOwnProperty,ug,nl,Jd=!1,by=new WeakMap,Bl=[],il=0,ui=null,ep=0,Zo=[],vo=0,Ko=null,$r=1,wa="",Or=m(null),Vl=m(null),qr=m(null),tp=m(null),Sr=null,Di=null,Cn=!1,rl=null,xs=!1,fg=Error(r(519)),Qo=m(null),bi=null,Sa=null,R1=typeof AbortController<"u"?AbortController:function(){var p=[],g=this.signal={aborted:!1,addEventListener:function(M,D){p.push(D)}};this.abort=function(){g.aborted=!0,p.forEach(function(M){return M()})}},Lr=zs.unstable_scheduleCallback,XT=zs.unstable_NormalPriority,Oi={$$typeof:qo,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},np=null,si=null,us=!1,Jo=!1,hg=!1,Bc=0,Eh=null,_y=0,Gl=0,Er=null,ea=Ht.S;Ht.S=function(p,g){rf=cs(),typeof g=="object"&&g!==null&&typeof g.then=="function"&&gt(p,g),ea!==null&&ea(p,g)};var Vc=m(null),Mr=Error(r(460)),dg=Error(r(474)),ta=Error(r(542)),sl={then:function(){}},ws=null,Gc=null,Qu=0,Xr=rs(!0),xy=rs(!1),Yr=[],ol=0,Ju=0,yo=!1,pg=!1,ef=m(null),Hc=m(0),Hs=m(null),js=null,$i=m(0),Hl=0,ln=null,Gt=null,Jt=null,vn=!1,dn=!1,Nn=!1,fs=0,na=0,Ea=null,wy=0,bo={readContext:se,use:Zi,useCallback:Nt,useContext:Nt,useEffect:Nt,useImperativeHandle:Nt,useLayoutEffect:Nt,useInsertionEffect:Nt,useMemo:Nt,useReducer:Nt,useRef:Nt,useState:Nt,useDebugValue:Nt,useDeferredValue:Nt,useTransition:Nt,useSyncExternalStore:Nt,useId:Nt,useHostTransitionStatus:Nt,useFormState:Nt,useActionState:Nt,useOptimistic:Nt,useMemoCache:Nt,useCacheRefresh:Nt};bo.useEffectEvent=Nt;var ki={readContext:se,use:Zi,useCallback:function(p,g){return di().memoizedState=[p,g===void 0?null:g],p},useContext:se,useEffect:_c,useImperativeHandle:function(p,g,M){M=M!=null?M.concat([p]):null,ya(4194308,4,Ba.bind(null,g,p),M)},useLayoutEffect:function(p,g){return ya(4194308,4,p,g)},useInsertionEffect:function(p,g){ya(4,2,p,g)},useMemo:function(p,g){var M=di();g=g===void 0?null:g;var D=p();if(Nn){k(!0);try{p()}finally{k(!1)}}return M.memoizedState=[D,g],D},useReducer:function(p,g,M){var D=di();if(M!==void 0){var z=M(g);if(Nn){k(!0);try{M(g)}finally{k(!1)}}}else z=g;return D.memoizedState=D.baseState=z,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:p,lastRenderedState:z},D.queue=p,p=p.dispatch=as.bind(null,ln,p),[D.memoizedState,p]},useRef:function(p){var g=di();return p={current:p},g.memoizedState=p},useState:function(p){p=vc(p);var g=p.queue,M=_a.bind(null,ln,g);return g.dispatch=M,[p.memoizedState,M]},useDebugValue:Sc,useDeferredValue:function(p,g){var M=di();return fr(M,p,g)},useTransition:function(){var p=vc(!1);return p=Ou.bind(null,ln,p.queue,!0,!1),di().memoizedState=p,[!1,p]},useSyncExternalStore:function(p,g,M){var D=ln,z=di();if(Cn){if(M===void 0)throw Error(r(407));M=M()}else{if(M=g(),yn===null)throw Error(r(349));(Rn&127)!==0||Ad(D,g,M)}z.memoizedState=M;var H={value:M,getSnapshot:g};return z.queue=H,_c(Tu.bind(null,D,H,p),[p]),D.flags|=2048,os(9,{destroy:void 0},Jf.bind(null,D,H,M,g),null),M},useId:function(){var p=di(),g=yn.identifierPrefix;if(Cn){var M=wa,D=$r;M=(D&~(1<<32-Vs(D)-1)).toString(32)+M,g="_"+g+"R_"+M,M=fs++,0<M&&(g+="H"+M.toString(32)),g+="_"}else M=wy++,g="_"+g+"r_"+M.toString(32)+"_";return p.memoizedState=g},useHostTransitionStatus:eh,useFormState:yc,useActionState:yc,useOptimistic:function(p){var g=di();g.memoizedState=g.baseState=p;var M={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return g.queue=M,g=xm.bind(null,ln,!0,M),M.dispatch=g,[p,g]},useMemoCache:ji,useCacheRefresh:function(){return di().memoizedState=fo.bind(null,ln)},useEffectEvent:function(p){var g=di(),M={impl:p};return g.memoizedState=M,function(){if((Mn&2)!==0)throw Error(r(440));return M.impl.apply(void 0,arguments)}}},al={readContext:se,use:Zi,useCallback:Va,useContext:se,useEffect:Bo,useImperativeHandle:wc,useInsertionEffect:ba,useLayoutEffect:Rl,useMemo:Ga,useReducer:pi,useRef:Du,useState:function(){return pi(Hn)},useDebugValue:Sc,useDeferredValue:function(p,g){var M=on();return Rd(M,Gt.memoizedState,p,g)},useTransition:function(){var p=pi(Hn)[0],g=on().memoizedState;return[typeof p=="boolean"?p:$t(p),g]},useSyncExternalStore:va,useId:th,useHostTransitionStatus:eh,useFormState:za,useActionState:za,useOptimistic:function(p,g){var M=on();return zo(M,Gt,p,g)},useMemoCache:ji,useCacheRefresh:jr};al.useEffectEvent=Ai;var jc={readContext:se,use:Zi,useCallback:Va,useContext:se,useEffect:Bo,useImperativeHandle:wc,useInsertionEffect:ba,useLayoutEffect:Rl,useMemo:Ga,useReducer:Hr,useRef:Du,useState:function(){return Hr(Hn)},useDebugValue:Sc,useDeferredValue:function(p,g){var M=on();return Gt===null?fr(M,p,g):Rd(M,Gt.memoizedState,p,g)},useTransition:function(){var p=Hr(Hn)[0],g=on().memoizedState;return[typeof p=="boolean"?p:$t(p),g]},useSyncExternalStore:va,useId:th,useHostTransitionStatus:eh,useFormState:Fa,useActionState:Fa,useOptimistic:function(p,g){var M=on();return Gt!==null?zo(M,Gt,p,g):(M.baseState=p,[p,M.queue.dispatch])},useMemoCache:ji,useCacheRefresh:jr};jc.useEffectEvent=Ai;var ip={enqueueSetState:function(p,g,M){p=p._reactInternals;var D=Ci(),z=Is(D);z.payload=g,M!=null&&(z.callback=M),g=oo(p,z,D),g!==null&&(Ni(g,p,D),ko(g,p,D))},enqueueReplaceState:function(p,g,M){p=p._reactInternals;var D=Ci(),z=Is(D);z.tag=1,z.payload=g,M!=null&&(z.callback=M),g=oo(p,z,D),g!==null&&(Ni(g,p,D),ko(g,p,D))},enqueueForceUpdate:function(p,g){p=p._reactInternals;var M=Ci(),D=Is(M);D.tag=2,g!=null&&(D.callback=g),g=oo(p,D,M),g!==null&&(Ni(g,p,M),ko(g,p,M))}},Ss=Error(r(461)),Ei=!1,tf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null},qi=!1,Xi=!1,Mh=!1,Sy=typeof WeakSet=="function"?WeakSet:Set,er=null,zi=null,tr=!1,oi=null,_o=8192,Th={getCacheForType:function(p){var g=se(Oi),M=g.data.get(p);return M===void 0&&(M=p(),g.data.set(p,M)),M},cacheSignal:function(){return se(Oi).controller.signal}},ia=0,Ah=1,Ch=2,rp=3,Wc=4;if(typeof Symbol=="function"&&Symbol.for){var nf=Symbol.for;ia=nf("selector.component"),Ah=nf("selector.has_pseudo_class"),Ch=nf("selector.role"),rp=nf("selector.test_id"),Wc=nf("selector.text")}var xo=typeof WeakMap=="function"?WeakMap:Map,Mn=0,yn=null,Tn=null,Rn=0,ai=0,pr=null,Ma=!1,$c=!1,qc=!1,ll=0,Fi=0,jl=0,Xc=0,Rh=0,Es=0,Dh=0,sp=null,Ws=null,mg=!1,op=0,rf=0,Yc=1/0,ap=null,Wl=null,mr=0,$l=null,sf=null,cl=0,Oh=0,gg=null,Ey=null,jn=0,lp=null;return gn.attemptContinuousHydration=function(p){if(p.tag===13||p.tag===31){var g=Yi(p,67108864);g!==null&&Ni(g,p,67108864),Gd(p,67108864)}},gn.attemptHydrationAtCurrentPriority=function(p){if(p.tag===13||p.tag===31){var g=Ci();g=V(g);var M=Yi(p,g);M!==null&&Ni(M,p,g),Gd(p,g)}},gn.attemptSynchronousHydration=function(p){switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var g=w(p.pendingLanes);if(g!==0){for(p.pendingLanes|=2,p.entangledLanes|=2;g;){var M=1<<31-Vs(g);p.entanglements[1]|=M,g&=~M}ge(p),(Mn&6)===0&&(Yc=cs()+500,_e(0))}}break;case 31:case 13:g=Yi(p,2),g!==null&&Ni(g,p,2),Im(),Gd(p,2)}},gn.batchedUpdates=function(p,g){return p(g)},gn.createComponentSelector=function(p){return{$$typeof:ia,value:p}},gn.createContainer=function(p,g,M,D,z,H,ce,Pe,it,ht){return Ic(p,g,!1,null,M,D,H,null,ce,Pe,it,ht)},gn.createHasPseudoClassSelector=function(p){return{$$typeof:Ah,value:p}},gn.createHydrationContainer=function(p,g,M,D,z,H,ce,Pe,it,ht,bt,dt,Dt,nn){var nr;return p=Ic(M,D,!0,p,z,H,Pe,nn,it,ht,bt,dt),p.context=Bm(null),M=p.current,D=Ci(),D=V(D),z=Is(D),z.callback=(nr=g)!=null?nr:null,oo(M,z,D),g=D,p.current.lanes=g,R(p,g),ge(p),p},gn.createPortal=function(p,g,M){var D=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Vu,key:D==null?null:""+D,children:p,containerInfo:g,implementation:M}},gn.createRoleSelector=function(p){return{$$typeof:Ch,value:p}},gn.createTestNameSelector=function(p){return{$$typeof:rp,value:p}},gn.createTextSelector=function(p){return{$$typeof:Wc,value:p}},gn.defaultOnCaughtError=function(p){console.error(p)},gn.defaultOnRecoverableError=function(p){cg(p)},gn.defaultOnUncaughtError=function(p){cg(p)},gn.deferredUpdates=function(p){var g=Ht.T,M=Xo();try{return An(32),Ht.T=null,p()}finally{An(M),Ht.T=g}},gn.discreteUpdates=function(p,g,M,D,z){var H=Ht.T,ce=Xo();try{return An(2),Ht.T=null,p(g,M,D,z)}finally{An(ce),Ht.T=H,Mn===0&&(Yc=cs()+500)}},gn.findAllNodes=ks,gn.findBoundingRects=function(p,g){if(!xr)throw Error(r(363));g=ks(p,g),p=[];for(var M=0;M<g.length;M++)p.push(Xm(g[M]));for(g=p.length-1;0<g;g--){M=p[g];for(var D=M.x,z=D+M.width,H=M.y,ce=H+M.height,Pe=g-1;0<=Pe;Pe--)if(g!==Pe){var it=p[Pe],ht=it.x,bt=ht+it.width,dt=it.y,Dt=dt+it.height;if(D>=ht&&H>=dt&&z<=bt&&ce<=Dt){p.splice(g,1);break}else if(D!==ht||M.width!==it.width||Dt<H||dt>ce){if(!(H!==dt||M.height!==it.height||bt<D||ht>z)){ht>D&&(it.width+=ht-D,it.x=D),bt<z&&(it.width=z-ht),p.splice(g,1);break}}else{dt>H&&(it.height+=dt-H,it.y=H),Dt<ce&&(it.height=ce-dt),p.splice(g,1);break}}}return p},gn.findHostInstance=Vd,gn.findHostInstanceWithNoPortals=function(p){return p=a(p),p=p!==null?c(p):null,p===null?null:yh(p.stateNode)},gn.findHostInstanceWithWarning=function(p){return Vd(p)},gn.flushPassiveEffects=Ja,gn.flushSyncFromReconciler=function(p){var g=Mn;Mn|=1;var M=Ht.T,D=Xo();try{if(An(2),Ht.T=null,p)return p()}finally{An(D),Ht.T=M,Mn=g,(Mn&6)===0&&_e(0)}},gn.flushSyncWork=Im,gn.focusWithin=function(p,g){if(!xr)throw Error(r(363));for(p=Rc(p),g=fh(p,g),g=Array.from(g),p=0;p<g.length;){var M=g[p++],D=M.tag;if(!kc(M)){if((D===5||D===26||D===27)&&Fl(M.stateNode))return!0;for(M=M.child;M!==null;)g.push(M),M=M.sibling}}return!1},gn.getFindAllNodesFailureDescription=function(p,g){if(!xr)throw Error(r(363));var M=0,D=[];p=[Rc(p),0];for(var z=0;z<p.length;){var H=p[z++],ce=H.tag,Pe=p[z++],it=g[Pe];if((ce!==5&&ce!==26&&ce!==27||!kc(H))&&(Dc(H,it)&&(D.push(uh(it)),Pe++,Pe>M&&(M=Pe)),Pe<g.length))for(H=H.child;H!==null;)p.push(H,Pe),H=H.sibling}if(M<g.length){for(p=[];M<g.length;M++)p.push(uh(g[M]));return`findAllNodes was able to match part of the selector:
  `+(D.join(" > ")+`

No matching component was found for:
  `)+p.join(" > ")}return null},gn.getPublicRootInstance=function(p){if(p=p.current,!p.child)return null;switch(p.child.tag){case 27:case 5:return yh(p.child.stateNode);default:return p.child.stateNode}},gn.injectIntoDevTools=function(){var p={bundleType:0,version:Fv,rendererPackageName:Wd,currentDispatcherRef:Ht,reconcilerVersion:"19.2.0"};if(vh!==null&&(p.rendererConfig=vh),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")p=!1;else{var g=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(g.isDisabled||!g.supportsFiber)p=!0;else{try{Ku=g.inject(p),Gs=g}catch{}p=!!g.checkDCE}}return p},gn.isAlreadyRendering=function(){return(Mn&6)!==0},gn.observeVisibleRects=function(p,g,M,D){if(!xr)throw Error(r(363));p=ks(p,g);var z=Ym(p,M,D).disconnect;return{disconnect:function(){z()}}},gn.shouldError=function(){return null},gn.shouldSuspend=function(){return!1},gn.startHostTransition=function(p,g,M,D){if(p.tag!==5)throw Error(r(476));var z=Lu(p).queue;Ou(p,z,g,$u,M===null?i:function(){var H=Lu(p);return H.next===null&&(H=p.alternate.memoizedState),Ec(p,H.next.queue,{},Ci()),M(D)})},gn.updateContainer=function(p,g,M,D){var z=g.current,H=Ci();return kv(z,H,p,g,M,D),H},gn.updateContainerSync=function(p,g,M,D){return kv(g.current,2,p,g,M,D),2},gn},n.exports.default=n.exports,Object.defineProperty(n.exports,"__esModule",{value:!0})})(Vk)),Vk.exports}var Hk;function _fe(){return Hk||(Hk=1,Bk.exports=bfe()),Bk.exports}var xfe=_fe();const wfe=yfe(xfe);function Sfe(n){const e=wfe(n);return e.injectIntoDevTools(),e}const mG=0,F0={},Efe=/^three(?=[A-Z])/,bT=n=>`${n[0].toUpperCase()}${n.slice(1)}`;let Mfe=0;const Tfe=n=>typeof n=="function";function gG(n){if(Tfe(n)){const e=`${Mfe++}`;return F0[e]=n,e}else Object.assign(F0,n)}function vG(n,e){const t=bT(n),i=F0[t];if(n!=="primitive"&&!i)throw new Error(`R3F: ${t} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(n==="primitive"&&!e.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(e.args!==void 0&&!Array.isArray(e.args))throw new Error("R3F: The args prop must be an array!")}function Afe(n,e,t){var i;return n=bT(n)in F0?n:n.replace(Efe,""),vG(n,e),n==="primitive"&&(i=e.object)!=null&&i.__r3f&&delete e.object.__r3f,tM(e.object,t,n,e)}function Cfe(n){if(!n.isHidden){var e;n.props.attach&&(e=n.parent)!=null&&e.object?iM(n.parent,n):ca(n.object)&&(n.object.visible=!1),n.isHidden=!0,uv(n)}}function yG(n){if(n.isHidden){var e;n.props.attach&&(e=n.parent)!=null&&e.object?nM(n.parent,n):ca(n.object)&&n.props.visible!==!1&&(n.object.visible=!0),n.isHidden=!1,uv(n)}}function WL(n,e,t){const i=e.root.getState();if(!(!n.parent&&n.object!==i.scene)){if(!e.object){var r,s;const o=F0[bT(e.type)];e.object=(r=e.props.object)!=null?r:new o(...(s=e.props.args)!=null?s:[]),e.object.__r3f=e}if(Df(e.object,e.props),e.props.attach)nM(n,e);else if(ca(e.object)&&ca(n.object)){const o=n.object.children.indexOf(t?.object);if(t&&o!==-1){const a=n.object.children.indexOf(e.object);if(a!==-1){n.object.children.splice(a,1);const l=a<o?o-1:o;n.object.children.splice(l,0,e.object)}else e.object.parent=n.object,n.object.children.splice(o,0,e.object),e.object.dispatchEvent({type:"added"}),n.object.dispatchEvent({type:"childadded",child:e.object})}else n.object.add(e.object)}for(const o of e.children)WL(e,o);uv(e)}}function aR(n,e){e&&(e.parent=n,n.children.push(e),WL(n,e))}function jk(n,e,t){if(!e||!t)return;e.parent=n;const i=n.children.indexOf(t);i!==-1?n.children.splice(i,0,e):n.children.push(e),WL(n,e,t)}function bG(n){if(typeof n.dispose=="function"){const e=()=>{try{n.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT<"u"?e():vD.unstable_scheduleCallback(vD.unstable_IdlePriority,e)}}function bD(n,e,t){if(!e)return;e.parent=null;const i=n.children.indexOf(e);i!==-1&&n.children.splice(i,1),e.props.attach?iM(n,e):ca(e.object)&&ca(n.object)&&(n.object.remove(e.object),ufe(aG(e),e.object));const r=e.props.dispose!==null&&t!==!1;for(let s=e.children.length-1;s>=0;s--){const o=e.children[s];bD(e,o,r)}e.children.length=0,delete e.object.__r3f,r&&e.type!=="primitive"&&e.object.type!=="Scene"&&bG(e.object),t===void 0&&uv(e)}function Rfe(n,e){for(const t of[n,n.alternate])if(t!==null)if(typeof t.ref=="function"){t.refCleanup==null||t.refCleanup();const i=t.ref(e);typeof i=="function"&&(t.refCleanup=i)}else t.ref&&(t.ref.current=e)}const LS=[];function Dfe(){for(const[t]of LS){const i=t.parent;if(i){t.props.attach?iM(i,t):ca(t.object)&&ca(i.object)&&i.object.remove(t.object);for(const r of t.children)r.props.attach?iM(t,r):ca(r.object)&&ca(t.object)&&t.object.remove(r.object)}t.isHidden&&yG(t),t.object.__r3f&&delete t.object.__r3f,t.type!=="primitive"&&bG(t.object)}for(const[t,i,r]of LS){t.props=i;const s=t.parent;if(s){var n,e;const o=F0[bT(t.type)];t.object=(n=t.props.object)!=null?n:new o(...(e=t.props.args)!=null?e:[]),t.object.__r3f=t,Rfe(r,t.object),Df(t.object,t.props),t.props.attach?nM(s,t):ca(t.object)&&ca(s.object)&&s.object.add(t.object);for(const a of t.children)a.props.attach?nM(t,a):ca(a.object)&&ca(t.object)&&t.object.add(a.object);uv(t)}}LS.length=0}const lR=()=>{},Wk={};let eS=mG;const Ofe=0,Lfe=4,_D=Sfe({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:Afe,removeChild:bD,appendChild:aR,appendInitialChild:aR,insertBefore:jk,appendChildToContainer(n,e){const t=n.getState().scene.__r3f;!e||!t||aR(t,e)},removeChildFromContainer(n,e){const t=n.getState().scene.__r3f;!e||!t||bD(t,e)},insertInContainerBefore(n,e,t){const i=n.getState().scene.__r3f;!e||!t||!i||jk(i,e,t)},getRootHostContext:()=>Wk,getChildHostContext:()=>Wk,commitUpdate(n,e,t,i,r){var s,o,a;vG(e,i);let l=!1;if((n.type==="primitive"&&t.object!==i.object||((s=i.args)==null?void 0:s.length)!==((o=t.args)==null?void 0:o.length)||(a=i.args)!=null&&a.some((f,d)=>{var m;return f!==((m=t.args)==null?void 0:m[d])}))&&(l=!0),l)LS.push([n,{...i},r]);else{const f=ofe(n,i);Object.keys(f).length&&(Object.assign(n.props,f),Df(n.object,f))}(r.sibling===null||(r.flags&Lfe)===Ofe)&&Dfe()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:n=>n?.object,prepareForCommit:()=>null,preparePortalMount:n=>tM(n.getState().scene,n,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:Cfe,unhideInstance:yG,createTextInstance:lR,hideTextInstance:lR,unhideTextInstance:lR,scheduleTimeout:typeof setTimeout=="function"?setTimeout:void 0,cancelTimeout:typeof clearTimeout=="function"?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:$.createContext(null),setCurrentUpdatePriority(n){eS=n},getCurrentUpdatePriority(){return eS},resolveUpdatePriority(){var n;if(eS!==mG)return eS;switch(typeof window<"u"&&((n=window.event)==null?void 0:n.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return gfe;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return pfe;default:return mfe}},resetFormInstance(){},rendererPackageName:"@react-three/fiber",rendererVersion:vfe.version,applyViewTransitionName(n,e,t){},restoreViewTransitionName(n,e){},cancelViewTransitionName(n,e,t){},cancelRootViewTransitionName(n){},restoreRootViewTransitionName(n){},InstanceMeasurement:null,measureInstance:n=>null,wasInstanceInViewport:n=>!0,hasInstanceChanged:(n,e)=>!1,hasInstanceAffectedParent:(n,e)=>!1,suspendOnActiveViewTransition(n,e){},startGestureTransition:()=>null,startViewTransition:()=>null,stopViewTransition(n){},createViewTransitionInstance:n=>null,getCurrentGestureOffset(n){throw new Error("startGestureTransition is not yet supported in react-three-fiber.")},cloneMutableInstance(n,e){return n},cloneMutableTextInstance(n){return n},cloneRootViewTransitionContainer(n){throw new Error("Not implemented.")},removeRootViewTransitionClone(n,e){throw new Error("Not implemented.")},createFragmentInstance:n=>null,updateFragmentInstanceFiber(n,e){},commitNewChildToFragmentInstance(n,e){},deleteChildFromFragmentInstance(n,e){},measureClonedInstance:n=>null,maySuspendCommitOnUpdate:(n,e,t)=>!1,maySuspendCommitInSyncRender:(n,e)=>!1,startSuspendingCommit:()=>null,getSuspendedCommitReason:(n,e)=>null}),fm=new Map,$g={objects:"shallow",strict:!1};function Pfe(n,e){if(!e&&typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:t,height:i,top:r,left:s}=n.parentElement.getBoundingClientRect();return{width:t,height:i,top:r,left:s}}else if(!e&&typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0};return{width:0,height:0,top:0,left:0,...e}}function Ife(n){const e=fm.get(n),t=e?.fiber,i=e?.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,s=i||hfe(SD,qk),o=t||_D.createContainer(s,dfe,null,!1,null,"",r,r,r,null);e||fm.set(n,{fiber:o,store:s});let a,l,c=!1,f=null;return{async configure(d={}){let m;f=new Promise(F=>m=F);let{gl:v,size:b,scene:x,events:w,onCreated:_,shadows:A=!1,linear:T=!1,flat:E=!1,legacy:C=!1,orthographic:R=!1,frameloop:O="always",dpr:I=[1,2],performance:L,raycaster:N,camera:V,onPointerMissed:B}=d,k=s.getState(),j=k.gl;if(!k.gl){const F={canvas:n,powerPreference:"high-performance",antialias:!0,alpha:!0},X=typeof v=="function"?await v(F):v;Fk(X)?j=X:j=new tG({...F,...v}),k.set({gl:j})}let q=k.raycaster;q||k.set({raycaster:q=new BL});const{params:W,...G}=N||{};if(rr.equ(G,q,$g)||Df(q,{...G}),rr.equ(W,q.params,$g)||Df(q,{params:{...q.params,...W}}),!k.camera||k.camera===l&&!rr.equ(l,V,$g)){l=V;const F=V?.isCamera,X=F?V:R?new ym(0,0,0,0,.1,1e3):new Fr(75,0,.1,1e3);F||(X.position.z=5,V&&(Df(X,V),X.manual||("aspect"in V||"left"in V||"right"in V||"bottom"in V||"top"in V)&&(X.manual=!0,X.updateProjectionMatrix())),!k.camera&&!(V!=null&&V.rotation)&&X.lookAt(0,0,0)),k.set({camera:X}),q.camera=X}if(!k.scene){let F;x!=null&&x.isScene?(F=x,tM(F,s,"",{})):(F=new YM,tM(F,s,"",{}),x&&Df(F,x)),k.set({scene:F})}w&&!k.events.handlers&&k.set({events:w(s)});const K=Pfe(n,b);if(rr.equ(K,k.size,$g)||k.setSize(K.width,K.height,K.top,K.left),I&&k.viewport.dpr!==uG(I)&&k.setDpr(I),k.frameloop!==O&&k.setFrameloop(O),k.onPointerMissed||k.set({onPointerMissed:B}),L&&!rr.equ(L,k.performance,$g)&&k.set(F=>({performance:{...F.performance,...L}})),!k.xr){var te;const F=(le,oe)=>{const ue=s.getState();ue.frameloop!=="never"&&qk(le,!0,ue,oe)},X=()=>{const le=s.getState();le.gl.xr.enabled=le.gl.xr.isPresenting,le.gl.xr.setAnimationLoop(le.gl.xr.isPresenting?F:null),le.gl.xr.isPresenting||SD(le)},ee={connect(){const le=s.getState().gl;le.xr.addEventListener("sessionstart",X),le.xr.addEventListener("sessionend",X)},disconnect(){const le=s.getState().gl;le.xr.removeEventListener("sessionstart",X),le.xr.removeEventListener("sessionend",X)}};typeof((te=j.xr)==null?void 0:te.addEventListener)=="function"&&ee.connect(),k.set({xr:ee})}if(j.shadowMap){const F=j.shadowMap.enabled,X=j.shadowMap.type;if(j.shadowMap.enabled=!!A,rr.boo(A))j.shadowMap.type=Gb;else if(rr.str(A)){var ie;const ee={basic:a8,percentage:NM,soft:Gb,variance:sc};j.shadowMap.type=(ie=ee[A])!=null?ie:Gb}else rr.obj(A)&&Object.assign(j.shadowMap,A);(F!==j.shadowMap.enabled||X!==j.shadowMap.type)&&(j.shadowMap.needsUpdate=!0)}return Wn.enabled=!C,c||(j.outputColorSpace=T?gd:Qs,j.toneMapping=E?vu:eL),k.legacy!==C&&k.set(()=>({legacy:C})),k.linear!==T&&k.set(()=>({linear:T})),k.flat!==E&&k.set(()=>({flat:E})),v&&!rr.fun(v)&&!Fk(v)&&!rr.equ(v,j,$g)&&Df(j,v),a=_,c=!0,m(),this},render(d){return!c&&!f&&this.configure(),f.then(()=>{_D.updateContainer(ne.jsx(Nfe,{store:s,children:d,onCreated:a,rootElement:n}),o,null,()=>{})}),s},unmount(){_G(n)}}}function Nfe({store:n,children:e,onCreated:t,rootElement:i}){return ax(()=>{const r=n.getState();r.set(s=>({internal:{...s.internal,active:!0}})),t&&t(r),n.getState().events.connected||r.events.connect==null||r.events.connect(i)},[]),ne.jsx(dG.Provider,{value:n,children:e})}function _G(n,e){const t=fm.get(n),i=t?.fiber;if(i){const r=t?.store.getState();r&&(r.internal.active=!1),_D.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{try{var s,o,a,l;r.events.disconnect==null||r.events.disconnect(),(s=r.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=r.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=r.gl)!=null&&l.xr&&r.xr.disconnect(),ife(r.scene),fm.delete(n)}catch{}},500)})}}function Ufe(n,e){const t={callback:n};return e.add(t),()=>{e.delete(t)}}const xG=new Set,kfe=new Set,zfe=new Set,Ffe=n=>Ufe(n,xG);function cR(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function Kb(n,e){switch(n){case"before":return cR(xG,e);case"after":return cR(kfe,e);case"tail":return cR(zfe,e)}}let uR,fR;function xD(n,e,t){let i=e.clock.getDelta();e.frameloop==="never"&&typeof n=="number"&&(i=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),uR=e.internal.subscribers;for(let r=0;r<uR.length;r++)fR=uR[r],fR.ref.current(fR.store.getState(),i,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}let rM=!1,wD=!1,hR,$k,qg;function wG(n){$k=requestAnimationFrame(wG),rM=!0,hR=0,Kb("before",n),wD=!0;for(const t of fm.values()){var e;qg=t.store.getState(),qg.internal.active&&(qg.frameloop==="always"||qg.internal.frames>0)&&!((e=qg.gl.xr)!=null&&e.isPresenting)&&(hR+=xD(n,qg))}if(wD=!1,Kb("after",n),hR===0)return Kb("tail",n),rM=!1,cancelAnimationFrame($k)}function SD(n,e=1){var t;if(!n)return fm.forEach(i=>SD(i.store.getState(),e));(t=n.gl.xr)!=null&&t.isPresenting||!n.internal.active||n.frameloop==="never"||(e>1?n.internal.frames=Math.min(60,n.internal.frames+e):wD?n.internal.frames=2:n.internal.frames=1,rM||(rM=!0,requestAnimationFrame(wG)))}function qk(n,e=!0,t,i){if(e&&Kb("before",n),t)xD(n,t,i);else for(const r of fm.values())xD(n,r.store.getState());e&&Kb("after",n)}const dR={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function Bfe(n){const{handlePointer:e}=ffe(n);return{priority:1,enabled:!0,compute(t,i,r){i.pointer.set(t.offsetX/i.size.width*2-1,-(t.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(dR).reduce((t,i)=>({...t,[i]:e(i)}),{}),update:()=>{var t;const{events:i,internal:r}=n.getState();(t=r.lastEvent)!=null&&t.current&&i.handlers&&i.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{const{set:i,events:r}=n.getState();if(r.disconnect==null||r.disconnect(),i(s=>({events:{...s.events,connected:t}})),r.handlers)for(const s in r.handlers){const o=r.handlers[s],[a,l]=dR[s];t.addEventListener(a,o,{passive:l})}},disconnect:()=>{const{set:t,events:i}=n.getState();if(i.connected){if(i.handlers)for(const r in i.handlers){const s=i.handlers[r],[o]=dR[r];i.connected.removeEventListener(o,s)}t(r=>({events:{...r.events,connected:void 0}}))}}}}function Xk(n,e){let t;return(...i)=>{window.clearTimeout(t),t=window.setTimeout(()=>n(...i),e)}}function Vfe({debounce:n,scroll:e,polyfill:t,offsetSize:i}={debounce:0,scroll:!1,offsetSize:!1}){const r=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!r)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,o]=$.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),a=$.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),l=n?typeof n=="number"?n:n.scroll:null,c=n?typeof n=="number"?n:n.resize:null,f=$.useRef(!1);$.useEffect(()=>(f.current=!0,()=>{f.current=!1}));const[d,m,v]=$.useMemo(()=>{const _=()=>{if(!a.current.element)return;const{left:A,top:T,width:E,height:C,bottom:R,right:O,x:I,y:L}=a.current.element.getBoundingClientRect(),N={left:A,top:T,width:E,height:C,bottom:R,right:O,x:I,y:L};a.current.element instanceof HTMLElement&&i&&(N.height=a.current.element.offsetHeight,N.width=a.current.element.offsetWidth),Object.freeze(N),f.current&&!Wfe(a.current.lastBounds,N)&&o(a.current.lastBounds=N)};return[_,c?Xk(_,c):_,l?Xk(_,l):_]},[o,i,l,c]);function b(){a.current.scrollContainers&&(a.current.scrollContainers.forEach(_=>_.removeEventListener("scroll",v,!0)),a.current.scrollContainers=null),a.current.resizeObserver&&(a.current.resizeObserver.disconnect(),a.current.resizeObserver=null),a.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",a.current.orientationHandler))}function x(){a.current.element&&(a.current.resizeObserver=new r(v),a.current.resizeObserver.observe(a.current.element),e&&a.current.scrollContainers&&a.current.scrollContainers.forEach(_=>_.addEventListener("scroll",v,{capture:!0,passive:!0})),a.current.orientationHandler=()=>{v()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",a.current.orientationHandler))}const w=_=>{!_||_===a.current.element||(b(),a.current.element=_,a.current.scrollContainers=SG(_),x())};return Hfe(v,!!e),Gfe(m),$.useEffect(()=>{b(),x()},[e,v,m]),$.useEffect(()=>b,[]),[w,s,d]}function Gfe(n){$.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[n])}function Hfe(n,e){$.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>{window.removeEventListener("scroll",t,!0)}}},[n,e])}function SG(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:i,overflowY:r}=window.getComputedStyle(n);return[t,i,r].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...SG(n.parentElement)]}const jfe=["x","y","top","bottom","left","right","width","height"],Wfe=(n,e)=>jfe.every(t=>n[t]===e[t]);function $fe({ref:n,children:e,fallback:t,resize:i,style:r,gl:s,events:o=Bfe,eventSource:a,eventPrefix:l,shadows:c,linear:f,flat:d,legacy:m,orthographic:v,frameloop:b,dpr:x,performance:w,raycaster:_,camera:A,scene:T,onPointerMissed:E,onCreated:C,...R}){$.useMemo(()=>gG(nG),[]);const O=efe(),[I,L]=Vfe({scroll:!0,debounce:{scroll:50,resize:0},...i}),N=$.useRef(null),V=$.useRef(null);$.useImperativeHandle(n,()=>N.current);const B=cG(E),[k,j]=$.useState(!1),[q,W]=$.useState(!1);if(k)throw k;if(q)throw q;const G=$.useRef(null);ax(()=>{const te=N.current;if(L.width>0&&L.height>0&&te){G.current||(G.current=Ife(te));async function ie(){await G.current.configure({gl:s,scene:T,events:o,shadows:c,linear:f,flat:d,legacy:m,orthographic:v,frameloop:b,dpr:x,performance:w,raycaster:_,camera:A,size:L,onPointerMissed:(...F)=>B.current==null?void 0:B.current(...F),onCreated:F=>{F.events.connect==null||F.events.connect(a?Que(a)?a.current:a:V.current),l&&F.setEvents({compute:(X,ee)=>{const le=X[l+"X"],oe=X[l+"Y"];ee.pointer.set(le/ee.size.width*2-1,-(oe/ee.size.height)*2+1),ee.raycaster.setFromCamera(ee.pointer,ee.camera)}}),C?.(F)}}),G.current.render(ne.jsx(O,{children:ne.jsx(nfe,{set:W,children:ne.jsx($.Suspense,{fallback:ne.jsx(tfe,{set:j}),children:e??null})})}))}ie()}}),$.useEffect(()=>{const te=N.current;if(te)return()=>_G(te)},[]);const K=a?"none":"auto";return ne.jsx("div",{ref:V,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:K,...r},...R,children:ne.jsx("div",{ref:I,style:{width:"100%",height:"100%"},children:ne.jsx("canvas",{ref:N,style:{display:"block"},children:t})})})}function qfe(n){return ne.jsx(sG,{children:ne.jsx($fe,{...n})})}const ir={LEFT:1,RIGHT:2,MIDDLE:4},Qe=Object.freeze({NONE:0,ROTATE:1,TRUCK:2,SCREEN_PAN:4,OFFSET:8,DOLLY:16,ZOOM:32,TOUCH_ROTATE:64,TOUCH_TRUCK:128,TOUCH_SCREEN_PAN:256,TOUCH_OFFSET:512,TOUCH_DOLLY:1024,TOUCH_ZOOM:2048,TOUCH_DOLLY_TRUCK:4096,TOUCH_DOLLY_SCREEN_PAN:8192,TOUCH_DOLLY_OFFSET:16384,TOUCH_DOLLY_ROTATE:32768,TOUCH_ZOOM_TRUCK:65536,TOUCH_ZOOM_OFFSET:131072,TOUCH_ZOOM_SCREEN_PAN:262144,TOUCH_ZOOM_ROTATE:524288}),Xg={NONE:0,IN:1,OUT:-1};function Ep(n){return n.isPerspectiveCamera}function ed(n){return n.isOrthographicCamera}const Xh=Math.PI*2,Yk=Math.PI/2,EG=1e-5,Jy=Math.PI/180;function tc(n,e,t){return Math.max(e,Math.min(t,n))}function Li(n,e=EG){return Math.abs(n)<e}function fi(n,e,t=EG){return Li(n-e,t)}function Zk(n,e){return Math.round(n/e)*e}function eb(n){return isFinite(n)?n:n<0?-Number.MAX_VALUE:Number.MAX_VALUE}function tb(n){return Math.abs(n)<Number.MAX_VALUE?n:n*(1/0)}function tS(n,e,t,i,r=1/0,s){i=Math.max(1e-4,i);const o=2/i,a=o*s,l=1/(1+a+.48*a*a+.235*a*a*a);let c=n-e;const f=e,d=r*i;c=tc(c,-d,d),e=n-c;const m=(t.value+o*c)*s;t.value=(t.value-o*m)*l;let v=e+(c+m)*l;return f-n>0==v>f&&(v=f,t.value=(v-f)/s),v}function Kk(n,e,t,i,r=1/0,s,o){i=Math.max(1e-4,i);const a=2/i,l=a*s,c=1/(1+l+.48*l*l+.235*l*l*l);let f=e.x,d=e.y,m=e.z,v=n.x-f,b=n.y-d,x=n.z-m;const w=f,_=d,A=m,T=r*i,E=T*T,C=v*v+b*b+x*x;if(C>E){const q=Math.sqrt(C);v=v/q*T,b=b/q*T,x=x/q*T}f=n.x-v,d=n.y-b,m=n.z-x;const R=(t.x+a*v)*s,O=(t.y+a*b)*s,I=(t.z+a*x)*s;t.x=(t.x-a*R)*c,t.y=(t.y-a*O)*c,t.z=(t.z-a*I)*c,o.x=f+(v+R)*c,o.y=d+(b+O)*c,o.z=m+(x+I)*c;const L=w-n.x,N=_-n.y,V=A-n.z,B=o.x-w,k=o.y-_,j=o.z-A;return L*B+N*k+V*j>0&&(o.x=w,o.y=_,o.z=A,t.x=(o.x-w)/s,t.y=(o.y-_)/s,t.z=(o.z-A)/s),o}function pR(n,e){e.set(0,0),n.forEach(t=>{e.x+=t.clientX,e.y+=t.clientY}),e.x/=n.length,e.y/=n.length}function mR(n,e){return ed(n)?(console.warn(`${e} is not supported in OrthographicCamera`),!0):!1}let Xfe=class{constructor(){this._listeners={}}addEventListener(e,t){const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}removeAllEventListeners(e){if(!e){this._listeners={};return}Array.isArray(this._listeners[e])&&(this._listeners[e].length=0)}dispatchEvent(e){const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e)}}};var gR;const Yfe="3.1.0",nS=1/8,Zfe=/Mac/.test((gR=globalThis?.navigator)===null||gR===void 0?void 0:gR.platform);let en,Qk,iS,vR,oa,En,ii,Yg,nb,Jc,eu,Mp,Jk,ez,Ca,Zg,Kg,tz,yR,nz,bR,_R,rS,Zr=class ED extends Xfe{static install(e){en=e.THREE,Qk=Object.freeze(new en.Vector3(0,0,0)),iS=Object.freeze(new en.Vector3(0,1,0)),vR=Object.freeze(new en.Vector3(0,0,1)),oa=new en.Vector2,En=new en.Vector3,ii=new en.Vector3,Yg=new en.Vector3,nb=new en.Vector3,Jc=new en.Vector3,eu=new en.Vector3,Mp=new en.Vector3,Jk=new en.Vector3,ez=new en.Vector3,Ca=new en.Spherical,Zg=new en.Spherical,Kg=new en.Box3,tz=new en.Box3,yR=new en.Sphere,nz=new en.Quaternion,bR=new en.Quaternion,_R=new en.Matrix4,rS=new en.Raycaster}static get ACTION(){return Qe}set verticalDragToForward(e){console.warn("camera-controls: `verticalDragToForward` was removed. Use `mouseButtons.left = CameraControls.ACTION.SCREEN_PAN` instead.")}constructor(e,t){super(),this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.minDistance=Number.EPSILON,this.maxDistance=1/0,this.infinityDolly=!1,this.minZoom=.01,this.maxZoom=1/0,this.smoothTime=.25,this.draggingSmoothTime=.125,this.maxSpeed=1/0,this.azimuthRotateSpeed=1,this.polarRotateSpeed=1,this.dollySpeed=1,this.dollyDragInverted=!1,this.truckSpeed=2,this.dollyToCursor=!1,this.dragToOffset=!1,this.boundaryFriction=0,this.restThreshold=.01,this.colliderMeshes=[],this.cancel=()=>{},this._enabled=!0,this._state=Qe.NONE,this._viewport=null,this._changedDolly=0,this._changedZoom=0,this._hasRested=!0,this._boundaryEnclosesCamera=!1,this._needsUpdate=!0,this._updatedLastTime=!1,this._elementRect=new DOMRect,this._isDragging=!1,this._dragNeedsUpdate=!0,this._activePointers=[],this._lockedPointer=null,this._interactiveArea=new DOMRect(0,0,1,1),this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._isUserControllingOffset=!1,this._isUserControllingZoom=!1,this._lastDollyDirection=Xg.NONE,this._thetaVelocity={value:0},this._phiVelocity={value:0},this._radiusVelocity={value:0},this._targetVelocity=new en.Vector3,this._focalOffsetVelocity=new en.Vector3,this._zoomVelocity={value:0},this._truckInternal=(_,A,T,E)=>{let C,R;if(Ep(this._camera)){const O=En.copy(this._camera.position).sub(this._target),I=this._camera.getEffectiveFOV()*Jy,L=O.length()*Math.tan(I*.5);C=this.truckSpeed*_*L/this._elementRect.height,R=this.truckSpeed*A*L/this._elementRect.height}else if(ed(this._camera)){const O=this._camera;C=this.truckSpeed*_*(O.right-O.left)/O.zoom/this._elementRect.width,R=this.truckSpeed*A*(O.top-O.bottom)/O.zoom/this._elementRect.height}else return;E?(T?this.setFocalOffset(this._focalOffsetEnd.x+C,this._focalOffsetEnd.y,this._focalOffsetEnd.z,!0):this.truck(C,0,!0),this.forward(-R,!0)):T?this.setFocalOffset(this._focalOffsetEnd.x+C,this._focalOffsetEnd.y+R,this._focalOffsetEnd.z,!0):this.truck(C,R,!0)},this._rotateInternal=(_,A)=>{const T=Xh*this.azimuthRotateSpeed*_/this._elementRect.height,E=Xh*this.polarRotateSpeed*A/this._elementRect.height;this.rotate(T,E,!0)},this._dollyInternal=(_,A,T)=>{const E=Math.pow(.95,-_*this.dollySpeed),C=this._sphericalEnd.radius,R=this._sphericalEnd.radius*E,O=tc(R,this.minDistance,this.maxDistance),I=O-R;this.infinityDolly&&this.dollyToCursor?this._dollyToNoClamp(R,!0):this.infinityDolly&&!this.dollyToCursor?(this.dollyInFixed(I,!0),this._dollyToNoClamp(O,!0)):this._dollyToNoClamp(O,!0),this.dollyToCursor&&(this._changedDolly+=(this.infinityDolly?R:O)-C,this._dollyControlCoord.set(A,T)),this._lastDollyDirection=Math.sign(-_)},this._zoomInternal=(_,A,T)=>{const E=Math.pow(.95,_*this.dollySpeed),C=this._zoom,R=this._zoom*E;this.zoomTo(R,!0),this.dollyToCursor&&(this._changedZoom+=R-C,this._dollyControlCoord.set(A,T))},typeof en>"u"&&console.error("camera-controls: `THREE` is undefined. You must first run `CameraControls.install( { THREE: THREE } )`. Check the docs for further information."),this._camera=e,this._yAxisUpSpace=new en.Quaternion().setFromUnitVectors(this._camera.up,iS),this._yAxisUpSpaceInverse=this._yAxisUpSpace.clone().invert(),this._state=Qe.NONE,this._target=new en.Vector3,this._targetEnd=this._target.clone(),this._focalOffset=new en.Vector3,this._focalOffsetEnd=this._focalOffset.clone(),this._spherical=new en.Spherical().setFromVector3(En.copy(this._camera.position).applyQuaternion(this._yAxisUpSpace)),this._sphericalEnd=this._spherical.clone(),this._lastDistance=this._spherical.radius,this._zoom=this._camera.zoom,this._zoomEnd=this._zoom,this._lastZoom=this._zoom,this._nearPlaneCorners=[new en.Vector3,new en.Vector3,new en.Vector3,new en.Vector3],this._updateNearPlaneCorners(),this._boundary=new en.Box3(new en.Vector3(-1/0,-1/0,-1/0),new en.Vector3(1/0,1/0,1/0)),this._cameraUp0=this._camera.up.clone(),this._target0=this._target.clone(),this._position0=this._camera.position.clone(),this._zoom0=this._zoom,this._focalOffset0=this._focalOffset.clone(),this._dollyControlCoord=new en.Vector2,this.mouseButtons={left:Qe.ROTATE,middle:Qe.DOLLY,right:Qe.TRUCK,wheel:Ep(this._camera)?Qe.DOLLY:ed(this._camera)?Qe.ZOOM:Qe.NONE},this.touches={one:Qe.TOUCH_ROTATE,two:Ep(this._camera)?Qe.TOUCH_DOLLY_TRUCK:ed(this._camera)?Qe.TOUCH_ZOOM_TRUCK:Qe.NONE,three:Qe.TOUCH_TRUCK};const i=new en.Vector2,r=new en.Vector2,s=new en.Vector2,o=_=>{if(!this._enabled||!this._domElement)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const E=this._domElement.getBoundingClientRect(),C=_.clientX/E.width,R=_.clientY/E.height;if(C<this._interactiveArea.left||C>this._interactiveArea.right||R<this._interactiveArea.top||R>this._interactiveArea.bottom)return}const A=_.pointerType!=="mouse"?null:(_.buttons&ir.LEFT)===ir.LEFT?ir.LEFT:(_.buttons&ir.MIDDLE)===ir.MIDDLE?ir.MIDDLE:(_.buttons&ir.RIGHT)===ir.RIGHT?ir.RIGHT:null;if(A!==null){const E=this._findPointerByMouseButton(A);E&&this._disposePointer(E)}if((_.buttons&ir.LEFT)===ir.LEFT&&this._lockedPointer)return;const T={pointerId:_.pointerId,clientX:_.clientX,clientY:_.clientY,deltaX:0,deltaY:0,mouseButton:A};this._activePointers.push(T),this._domElement.ownerDocument.removeEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",l),this._domElement.ownerDocument.addEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",l),this._isDragging=!0,m(_)},a=_=>{_.cancelable&&_.preventDefault();const A=_.pointerId,T=this._lockedPointer||this._findPointerById(A);if(T){if(T.clientX=_.clientX,T.clientY=_.clientY,T.deltaX=_.movementX,T.deltaY=_.movementY,this._state=0,_.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else(!this._isDragging&&this._lockedPointer||this._isDragging&&(_.buttons&ir.LEFT)===ir.LEFT)&&(this._state=this._state|this.mouseButtons.left),this._isDragging&&(_.buttons&ir.MIDDLE)===ir.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),this._isDragging&&(_.buttons&ir.RIGHT)===ir.RIGHT&&(this._state=this._state|this.mouseButtons.right);v()}},l=_=>{const A=this._findPointerById(_.pointerId);if(!(A&&A===this._lockedPointer)){if(A&&this._disposePointer(A),_.pointerType==="touch")switch(this._activePointers.length){case 0:this._state=Qe.NONE;break;case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else this._state=Qe.NONE;b()}};let c=-1;const f=_=>{if(!this._domElement||!this._enabled||this.mouseButtons.wheel===Qe.NONE)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const R=this._domElement.getBoundingClientRect(),O=_.clientX/R.width,I=_.clientY/R.height;if(O<this._interactiveArea.left||O>this._interactiveArea.right||I<this._interactiveArea.top||I>this._interactiveArea.bottom)return}if(_.preventDefault(),this.dollyToCursor||this.mouseButtons.wheel===Qe.ROTATE||this.mouseButtons.wheel===Qe.TRUCK){const R=performance.now();c-R<1e3&&this._getClientRect(this._elementRect),c=R}const A=Zfe?-1:-3,T=_.deltaMode===1||_.ctrlKey?_.deltaY/A:_.deltaY/(A*10),E=this.dollyToCursor?(_.clientX-this._elementRect.x)/this._elementRect.width*2-1:0,C=this.dollyToCursor?(_.clientY-this._elementRect.y)/this._elementRect.height*-2+1:0;switch(this.mouseButtons.wheel){case Qe.ROTATE:{this._rotateInternal(_.deltaX,_.deltaY),this._isUserControllingRotate=!0;break}case Qe.TRUCK:{this._truckInternal(_.deltaX,_.deltaY,!1,!1),this._isUserControllingTruck=!0;break}case Qe.SCREEN_PAN:{this._truckInternal(_.deltaX,_.deltaY,!1,!0),this._isUserControllingTruck=!0;break}case Qe.OFFSET:{this._truckInternal(_.deltaX,_.deltaY,!0,!1),this._isUserControllingOffset=!0;break}case Qe.DOLLY:{this._dollyInternal(-T,E,C),this._isUserControllingDolly=!0;break}case Qe.ZOOM:{this._zoomInternal(-T,E,C),this._isUserControllingZoom=!0;break}}this.dispatchEvent({type:"control"})},d=_=>{if(!(!this._domElement||!this._enabled)){if(this.mouseButtons.right===ED.ACTION.NONE){const A=_ instanceof PointerEvent?_.pointerId:0,T=this._findPointerById(A);T&&this._disposePointer(T),this._domElement.ownerDocument.removeEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",l);return}_.preventDefault()}},m=_=>{if(!this._enabled)return;if(pR(this._activePointers,oa),this._getClientRect(this._elementRect),i.copy(oa),r.copy(oa),this._activePointers.length>=2){const T=oa.x-this._activePointers[1].clientX,E=oa.y-this._activePointers[1].clientY,C=Math.sqrt(T*T+E*E);s.set(0,C);const R=(this._activePointers[0].clientX+this._activePointers[1].clientX)*.5,O=(this._activePointers[0].clientY+this._activePointers[1].clientY)*.5;r.set(R,O)}if(this._state=0,!_)this._lockedPointer&&(this._state=this._state|this.mouseButtons.left);else if("pointerType"in _&&_.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else!this._lockedPointer&&(_.buttons&ir.LEFT)===ir.LEFT&&(this._state=this._state|this.mouseButtons.left),(_.buttons&ir.MIDDLE)===ir.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),(_.buttons&ir.RIGHT)===ir.RIGHT&&(this._state=this._state|this.mouseButtons.right);((this._state&Qe.ROTATE)===Qe.ROTATE||(this._state&Qe.TOUCH_ROTATE)===Qe.TOUCH_ROTATE||(this._state&Qe.TOUCH_DOLLY_ROTATE)===Qe.TOUCH_DOLLY_ROTATE||(this._state&Qe.TOUCH_ZOOM_ROTATE)===Qe.TOUCH_ZOOM_ROTATE)&&(this._sphericalEnd.theta=this._spherical.theta,this._sphericalEnd.phi=this._spherical.phi,this._thetaVelocity.value=0,this._phiVelocity.value=0),((this._state&Qe.TRUCK)===Qe.TRUCK||(this._state&Qe.SCREEN_PAN)===Qe.SCREEN_PAN||(this._state&Qe.TOUCH_TRUCK)===Qe.TOUCH_TRUCK||(this._state&Qe.TOUCH_SCREEN_PAN)===Qe.TOUCH_SCREEN_PAN||(this._state&Qe.TOUCH_DOLLY_TRUCK)===Qe.TOUCH_DOLLY_TRUCK||(this._state&Qe.TOUCH_DOLLY_SCREEN_PAN)===Qe.TOUCH_DOLLY_SCREEN_PAN||(this._state&Qe.TOUCH_ZOOM_TRUCK)===Qe.TOUCH_ZOOM_TRUCK||(this._state&Qe.TOUCH_ZOOM_SCREEN_PAN)===Qe.TOUCH_DOLLY_SCREEN_PAN)&&(this._targetEnd.copy(this._target),this._targetVelocity.set(0,0,0)),((this._state&Qe.DOLLY)===Qe.DOLLY||(this._state&Qe.TOUCH_DOLLY)===Qe.TOUCH_DOLLY||(this._state&Qe.TOUCH_DOLLY_TRUCK)===Qe.TOUCH_DOLLY_TRUCK||(this._state&Qe.TOUCH_DOLLY_SCREEN_PAN)===Qe.TOUCH_DOLLY_SCREEN_PAN||(this._state&Qe.TOUCH_DOLLY_OFFSET)===Qe.TOUCH_DOLLY_OFFSET||(this._state&Qe.TOUCH_DOLLY_ROTATE)===Qe.TOUCH_DOLLY_ROTATE)&&(this._sphericalEnd.radius=this._spherical.radius,this._radiusVelocity.value=0),((this._state&Qe.ZOOM)===Qe.ZOOM||(this._state&Qe.TOUCH_ZOOM)===Qe.TOUCH_ZOOM||(this._state&Qe.TOUCH_ZOOM_TRUCK)===Qe.TOUCH_ZOOM_TRUCK||(this._state&Qe.TOUCH_ZOOM_SCREEN_PAN)===Qe.TOUCH_ZOOM_SCREEN_PAN||(this._state&Qe.TOUCH_ZOOM_OFFSET)===Qe.TOUCH_ZOOM_OFFSET||(this._state&Qe.TOUCH_ZOOM_ROTATE)===Qe.TOUCH_ZOOM_ROTATE)&&(this._zoomEnd=this._zoom,this._zoomVelocity.value=0),((this._state&Qe.OFFSET)===Qe.OFFSET||(this._state&Qe.TOUCH_OFFSET)===Qe.TOUCH_OFFSET||(this._state&Qe.TOUCH_DOLLY_OFFSET)===Qe.TOUCH_DOLLY_OFFSET||(this._state&Qe.TOUCH_ZOOM_OFFSET)===Qe.TOUCH_ZOOM_OFFSET)&&(this._focalOffsetEnd.copy(this._focalOffset),this._focalOffsetVelocity.set(0,0,0)),this.dispatchEvent({type:"controlstart"})},v=()=>{if(!this._enabled||!this._dragNeedsUpdate)return;this._dragNeedsUpdate=!1,pR(this._activePointers,oa);const A=this._domElement&&this._domElement.ownerDocument.pointerLockElement===this._domElement?this._lockedPointer||this._activePointers[0]:null,T=A?-A.deltaX:r.x-oa.x,E=A?-A.deltaY:r.y-oa.y;if(r.copy(oa),((this._state&Qe.ROTATE)===Qe.ROTATE||(this._state&Qe.TOUCH_ROTATE)===Qe.TOUCH_ROTATE||(this._state&Qe.TOUCH_DOLLY_ROTATE)===Qe.TOUCH_DOLLY_ROTATE||(this._state&Qe.TOUCH_ZOOM_ROTATE)===Qe.TOUCH_ZOOM_ROTATE)&&(this._rotateInternal(T,E),this._isUserControllingRotate=!0),(this._state&Qe.DOLLY)===Qe.DOLLY||(this._state&Qe.ZOOM)===Qe.ZOOM){const C=this.dollyToCursor?(i.x-this._elementRect.x)/this._elementRect.width*2-1:0,R=this.dollyToCursor?(i.y-this._elementRect.y)/this._elementRect.height*-2+1:0,O=this.dollyDragInverted?-1:1;(this._state&Qe.DOLLY)===Qe.DOLLY?(this._dollyInternal(O*E*nS,C,R),this._isUserControllingDolly=!0):(this._zoomInternal(O*E*nS,C,R),this._isUserControllingZoom=!0)}if((this._state&Qe.TOUCH_DOLLY)===Qe.TOUCH_DOLLY||(this._state&Qe.TOUCH_ZOOM)===Qe.TOUCH_ZOOM||(this._state&Qe.TOUCH_DOLLY_TRUCK)===Qe.TOUCH_DOLLY_TRUCK||(this._state&Qe.TOUCH_ZOOM_TRUCK)===Qe.TOUCH_ZOOM_TRUCK||(this._state&Qe.TOUCH_DOLLY_SCREEN_PAN)===Qe.TOUCH_DOLLY_SCREEN_PAN||(this._state&Qe.TOUCH_ZOOM_SCREEN_PAN)===Qe.TOUCH_ZOOM_SCREEN_PAN||(this._state&Qe.TOUCH_DOLLY_OFFSET)===Qe.TOUCH_DOLLY_OFFSET||(this._state&Qe.TOUCH_ZOOM_OFFSET)===Qe.TOUCH_ZOOM_OFFSET||(this._state&Qe.TOUCH_DOLLY_ROTATE)===Qe.TOUCH_DOLLY_ROTATE||(this._state&Qe.TOUCH_ZOOM_ROTATE)===Qe.TOUCH_ZOOM_ROTATE){const C=oa.x-this._activePointers[1].clientX,R=oa.y-this._activePointers[1].clientY,O=Math.sqrt(C*C+R*R),I=s.y-O;s.set(0,O);const L=this.dollyToCursor?(r.x-this._elementRect.x)/this._elementRect.width*2-1:0,N=this.dollyToCursor?(r.y-this._elementRect.y)/this._elementRect.height*-2+1:0;(this._state&Qe.TOUCH_DOLLY)===Qe.TOUCH_DOLLY||(this._state&Qe.TOUCH_DOLLY_ROTATE)===Qe.TOUCH_DOLLY_ROTATE||(this._state&Qe.TOUCH_DOLLY_TRUCK)===Qe.TOUCH_DOLLY_TRUCK||(this._state&Qe.TOUCH_DOLLY_SCREEN_PAN)===Qe.TOUCH_DOLLY_SCREEN_PAN||(this._state&Qe.TOUCH_DOLLY_OFFSET)===Qe.TOUCH_DOLLY_OFFSET?(this._dollyInternal(I*nS,L,N),this._isUserControllingDolly=!0):(this._zoomInternal(I*nS,L,N),this._isUserControllingZoom=!0)}((this._state&Qe.TRUCK)===Qe.TRUCK||(this._state&Qe.TOUCH_TRUCK)===Qe.TOUCH_TRUCK||(this._state&Qe.TOUCH_DOLLY_TRUCK)===Qe.TOUCH_DOLLY_TRUCK||(this._state&Qe.TOUCH_ZOOM_TRUCK)===Qe.TOUCH_ZOOM_TRUCK)&&(this._truckInternal(T,E,!1,!1),this._isUserControllingTruck=!0),((this._state&Qe.SCREEN_PAN)===Qe.SCREEN_PAN||(this._state&Qe.TOUCH_SCREEN_PAN)===Qe.TOUCH_SCREEN_PAN||(this._state&Qe.TOUCH_DOLLY_SCREEN_PAN)===Qe.TOUCH_DOLLY_SCREEN_PAN||(this._state&Qe.TOUCH_ZOOM_SCREEN_PAN)===Qe.TOUCH_ZOOM_SCREEN_PAN)&&(this._truckInternal(T,E,!1,!0),this._isUserControllingTruck=!0),((this._state&Qe.OFFSET)===Qe.OFFSET||(this._state&Qe.TOUCH_OFFSET)===Qe.TOUCH_OFFSET||(this._state&Qe.TOUCH_DOLLY_OFFSET)===Qe.TOUCH_DOLLY_OFFSET||(this._state&Qe.TOUCH_ZOOM_OFFSET)===Qe.TOUCH_ZOOM_OFFSET)&&(this._truckInternal(T,E,!0,!1),this._isUserControllingOffset=!0),this.dispatchEvent({type:"control"})},b=()=>{pR(this._activePointers,oa),r.copy(oa),this._dragNeedsUpdate=!1,(this._activePointers.length===0||this._activePointers.length===1&&this._activePointers[0]===this._lockedPointer)&&(this._isDragging=!1),this._activePointers.length===0&&this._domElement&&(this._domElement.ownerDocument.removeEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",l),this.dispatchEvent({type:"controlend"}))};this.lockPointer=()=>{!this._enabled||!this._domElement||(this.cancel(),this._lockedPointer={pointerId:-1,clientX:0,clientY:0,deltaX:0,deltaY:0,mouseButton:null},this._activePointers.push(this._lockedPointer),this._domElement.ownerDocument.removeEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",l),this._domElement.requestPointerLock(),this._domElement.ownerDocument.addEventListener("pointerlockchange",x),this._domElement.ownerDocument.addEventListener("pointerlockerror",w),this._domElement.ownerDocument.addEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",l),m())},this.unlockPointer=()=>{var _,A,T;this._lockedPointer!==null&&(this._disposePointer(this._lockedPointer),this._lockedPointer=null),(_=this._domElement)===null||_===void 0||_.ownerDocument.exitPointerLock(),(A=this._domElement)===null||A===void 0||A.ownerDocument.removeEventListener("pointerlockchange",x),(T=this._domElement)===null||T===void 0||T.ownerDocument.removeEventListener("pointerlockerror",w),this.cancel()};const x=()=>{this._domElement&&this._domElement.ownerDocument.pointerLockElement===this._domElement||this.unlockPointer()},w=()=>{this.unlockPointer()};this._addAllEventListeners=_=>{this._domElement=_,this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none",this._domElement.addEventListener("pointerdown",o),this._domElement.addEventListener("pointercancel",l),this._domElement.addEventListener("wheel",f,{passive:!1}),this._domElement.addEventListener("contextmenu",d)},this._removeAllEventListeners=()=>{this._domElement&&(this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect="",this._domElement.removeEventListener("pointerdown",o),this._domElement.removeEventListener("pointercancel",l),this._domElement.removeEventListener("wheel",f,{passive:!1}),this._domElement.removeEventListener("contextmenu",d),this._domElement.ownerDocument.removeEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",l),this._domElement.ownerDocument.removeEventListener("pointerlockchange",x),this._domElement.ownerDocument.removeEventListener("pointerlockerror",w))},this.cancel=()=>{this._state!==Qe.NONE&&(this._state=Qe.NONE,this._activePointers.length=0,b())},t&&this.connect(t),this.update(0)}get camera(){return this._camera}set camera(e){this._camera=e,this.updateCameraUp(),this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._domElement&&(e?(this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none"):(this.cancel(),this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect=""))}get active(){return!this._hasRested}get currentAction(){return this._state}get distance(){return this._spherical.radius}set distance(e){this._spherical.radius===e&&this._sphericalEnd.radius===e||(this._spherical.radius=e,this._sphericalEnd.radius=e,this._needsUpdate=!0)}get azimuthAngle(){return this._spherical.theta}set azimuthAngle(e){this._spherical.theta===e&&this._sphericalEnd.theta===e||(this._spherical.theta=e,this._sphericalEnd.theta=e,this._needsUpdate=!0)}get polarAngle(){return this._spherical.phi}set polarAngle(e){this._spherical.phi===e&&this._sphericalEnd.phi===e||(this._spherical.phi=e,this._sphericalEnd.phi=e,this._needsUpdate=!0)}get boundaryEnclosesCamera(){return this._boundaryEnclosesCamera}set boundaryEnclosesCamera(e){this._boundaryEnclosesCamera=e,this._needsUpdate=!0}set interactiveArea(e){this._interactiveArea.width=tc(e.width,0,1),this._interactiveArea.height=tc(e.height,0,1),this._interactiveArea.x=tc(e.x,0,1-this._interactiveArea.width),this._interactiveArea.y=tc(e.y,0,1-this._interactiveArea.height)}addEventListener(e,t){super.addEventListener(e,t)}removeEventListener(e,t){super.removeEventListener(e,t)}rotate(e,t,i=!1){return this.rotateTo(this._sphericalEnd.theta+e,this._sphericalEnd.phi+t,i)}rotateAzimuthTo(e,t=!1){return this.rotateTo(e,this._sphericalEnd.phi,t)}rotatePolarTo(e,t=!1){return this.rotateTo(this._sphericalEnd.theta,e,t)}rotateTo(e,t,i=!1){this._isUserControllingRotate=!1;const r=tc(e,this.minAzimuthAngle,this.maxAzimuthAngle),s=tc(t,this.minPolarAngle,this.maxPolarAngle);this._sphericalEnd.theta=r,this._sphericalEnd.phi=s,this._sphericalEnd.makeSafe(),this._needsUpdate=!0,i||(this._spherical.theta=this._sphericalEnd.theta,this._spherical.phi=this._sphericalEnd.phi);const o=!i||fi(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&fi(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold);return this._createOnRestPromise(o)}dolly(e,t=!1){return this.dollyTo(this._sphericalEnd.radius-e,t)}dollyTo(e,t=!1){return this._isUserControllingDolly=!1,this._lastDollyDirection=Xg.NONE,this._changedDolly=0,this._dollyToNoClamp(tc(e,this.minDistance,this.maxDistance),t)}_dollyToNoClamp(e,t=!1){const i=this._sphericalEnd.radius;if(this.colliderMeshes.length>=1){const o=this._collisionTest(),a=fi(o,this._spherical.radius);if(!(i>e)&&a)return Promise.resolve();this._sphericalEnd.radius=Math.min(e,o)}else this._sphericalEnd.radius=e;this._needsUpdate=!0,t||(this._spherical.radius=this._sphericalEnd.radius);const s=!t||fi(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(s)}dollyInFixed(e,t=!1){this._targetEnd.add(this._getCameraDirection(nb).multiplyScalar(e)),t||this._target.copy(this._targetEnd);const i=!t||fi(this._target.x,this._targetEnd.x,this.restThreshold)&&fi(this._target.y,this._targetEnd.y,this.restThreshold)&&fi(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(i)}zoom(e,t=!1){return this.zoomTo(this._zoomEnd+e,t)}zoomTo(e,t=!1){this._isUserControllingZoom=!1,this._zoomEnd=tc(e,this.minZoom,this.maxZoom),this._needsUpdate=!0,t||(this._zoom=this._zoomEnd);const i=!t||fi(this._zoom,this._zoomEnd,this.restThreshold);return this._changedZoom=0,this._createOnRestPromise(i)}pan(e,t,i=!1){return console.warn("`pan` has been renamed to `truck`"),this.truck(e,t,i)}truck(e,t,i=!1){this._camera.updateMatrix(),Jc.setFromMatrixColumn(this._camera.matrix,0),eu.setFromMatrixColumn(this._camera.matrix,1),Jc.multiplyScalar(e),eu.multiplyScalar(-t);const r=En.copy(Jc).add(eu),s=ii.copy(this._targetEnd).add(r);return this.moveTo(s.x,s.y,s.z,i)}forward(e,t=!1){En.setFromMatrixColumn(this._camera.matrix,0),En.crossVectors(this._camera.up,En),En.multiplyScalar(e);const i=ii.copy(this._targetEnd).add(En);return this.moveTo(i.x,i.y,i.z,t)}elevate(e,t=!1){return En.copy(this._camera.up).multiplyScalar(e),this.moveTo(this._targetEnd.x+En.x,this._targetEnd.y+En.y,this._targetEnd.z+En.z,t)}moveTo(e,t,i,r=!1){this._isUserControllingTruck=!1;const s=En.set(e,t,i).sub(this._targetEnd);this._encloseToBoundary(this._targetEnd,s,this.boundaryFriction),this._needsUpdate=!0,r||this._target.copy(this._targetEnd);const o=!r||fi(this._target.x,this._targetEnd.x,this.restThreshold)&&fi(this._target.y,this._targetEnd.y,this.restThreshold)&&fi(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(o)}lookInDirectionOf(e,t,i,r=!1){const a=En.set(e,t,i).sub(this._targetEnd).normalize().multiplyScalar(-this._sphericalEnd.radius).add(this._targetEnd);return this.setPosition(a.x,a.y,a.z,r)}fitToBox(e,t,{cover:i=!1,paddingLeft:r=0,paddingRight:s=0,paddingBottom:o=0,paddingTop:a=0}={}){const l=[],c=e.isBox3?Kg.copy(e):Kg.setFromObject(e);c.isEmpty()&&(console.warn("camera-controls: fitTo() cannot be used with an empty box. Aborting"),Promise.resolve());const f=Zk(this._sphericalEnd.theta,Yk),d=Zk(this._sphericalEnd.phi,Yk);l.push(this.rotateTo(f,d,t));const m=En.setFromSpherical(this._sphericalEnd).normalize(),v=nz.setFromUnitVectors(m,vR),b=fi(Math.abs(m.y),1);b&&v.multiply(bR.setFromAxisAngle(iS,f)),v.multiply(this._yAxisUpSpaceInverse);const x=tz.makeEmpty();ii.copy(c.min).applyQuaternion(v),x.expandByPoint(ii),ii.copy(c.min).setX(c.max.x).applyQuaternion(v),x.expandByPoint(ii),ii.copy(c.min).setY(c.max.y).applyQuaternion(v),x.expandByPoint(ii),ii.copy(c.max).setZ(c.min.z).applyQuaternion(v),x.expandByPoint(ii),ii.copy(c.min).setZ(c.max.z).applyQuaternion(v),x.expandByPoint(ii),ii.copy(c.max).setY(c.min.y).applyQuaternion(v),x.expandByPoint(ii),ii.copy(c.max).setX(c.min.x).applyQuaternion(v),x.expandByPoint(ii),ii.copy(c.max).applyQuaternion(v),x.expandByPoint(ii),x.min.x-=r,x.min.y-=o,x.max.x+=s,x.max.y+=a,v.setFromUnitVectors(vR,m),b&&v.premultiply(bR.invert()),v.premultiply(this._yAxisUpSpace);const w=x.getSize(En),_=x.getCenter(ii).applyQuaternion(v);if(Ep(this._camera)){const A=this.getDistanceToFitBox(w.x,w.y,w.z,i);l.push(this.moveTo(_.x,_.y,_.z,t)),l.push(this.dollyTo(A,t)),l.push(this.setFocalOffset(0,0,0,t))}else if(ed(this._camera)){const A=this._camera,T=A.right-A.left,E=A.top-A.bottom,C=i?Math.max(T/w.x,E/w.y):Math.min(T/w.x,E/w.y);l.push(this.moveTo(_.x,_.y,_.z,t)),l.push(this.zoomTo(C,t)),l.push(this.setFocalOffset(0,0,0,t))}return Promise.all(l)}fitToSphere(e,t){const i=[],s="isObject3D"in e?ED.createBoundingSphere(e,yR):yR.copy(e);if(i.push(this.moveTo(s.center.x,s.center.y,s.center.z,t)),Ep(this._camera)){const o=this.getDistanceToFitSphere(s.radius);i.push(this.dollyTo(o,t))}else if(ed(this._camera)){const o=this._camera.right-this._camera.left,a=this._camera.top-this._camera.bottom,l=2*s.radius,c=Math.min(o/l,a/l);i.push(this.zoomTo(c,t))}return i.push(this.setFocalOffset(0,0,0,t)),Promise.all(i)}setLookAt(e,t,i,r,s,o,a=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=Xg.NONE,this._changedDolly=0;const l=ii.set(r,s,o),c=En.set(e,t,i);this._targetEnd.copy(l),this._sphericalEnd.setFromVector3(c.sub(l).applyQuaternion(this._yAxisUpSpace)),this._needsUpdate=!0,a||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const f=!a||fi(this._target.x,this._targetEnd.x,this.restThreshold)&&fi(this._target.y,this._targetEnd.y,this.restThreshold)&&fi(this._target.z,this._targetEnd.z,this.restThreshold)&&fi(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&fi(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&fi(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(f)}lerp(e,t,i,r=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=Xg.NONE,this._changedDolly=0;const s=En.set(...e.target);if("spherical"in e)Ca.set(...e.spherical);else{const d=ii.set(...e.position);Ca.setFromVector3(d.sub(s).applyQuaternion(this._yAxisUpSpace))}const o=Yg.set(...t.target);if("spherical"in t)Zg.set(...t.spherical);else{const d=ii.set(...t.position);Zg.setFromVector3(d.sub(o).applyQuaternion(this._yAxisUpSpace))}this._targetEnd.copy(s.lerp(o,i));const a=Zg.theta-Ca.theta,l=Zg.phi-Ca.phi,c=Zg.radius-Ca.radius;this._sphericalEnd.set(Ca.radius+c*i,Ca.phi+l*i,Ca.theta+a*i),this._needsUpdate=!0,r||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const f=!r||fi(this._target.x,this._targetEnd.x,this.restThreshold)&&fi(this._target.y,this._targetEnd.y,this.restThreshold)&&fi(this._target.z,this._targetEnd.z,this.restThreshold)&&fi(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&fi(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&fi(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(f)}lerpLookAt(e,t,i,r,s,o,a,l,c,f,d,m,v,b=!1){return this.lerp({position:[e,t,i],target:[r,s,o]},{position:[a,l,c],target:[f,d,m]},v,b)}setPosition(e,t,i,r=!1){return this.setLookAt(e,t,i,this._targetEnd.x,this._targetEnd.y,this._targetEnd.z,r)}setTarget(e,t,i,r=!1){const s=this.getPosition(En),o=this.setLookAt(s.x,s.y,s.z,e,t,i,r);return this._sphericalEnd.phi=tc(this._sphericalEnd.phi,this.minPolarAngle,this.maxPolarAngle),o}setFocalOffset(e,t,i,r=!1){this._isUserControllingOffset=!1,this._focalOffsetEnd.set(e,t,i),this._needsUpdate=!0,r||this._focalOffset.copy(this._focalOffsetEnd);const s=!r||fi(this._focalOffset.x,this._focalOffsetEnd.x,this.restThreshold)&&fi(this._focalOffset.y,this._focalOffsetEnd.y,this.restThreshold)&&fi(this._focalOffset.z,this._focalOffsetEnd.z,this.restThreshold);return this._createOnRestPromise(s)}setOrbitPoint(e,t,i){this._camera.updateMatrixWorld(),Jc.setFromMatrixColumn(this._camera.matrixWorldInverse,0),eu.setFromMatrixColumn(this._camera.matrixWorldInverse,1),Mp.setFromMatrixColumn(this._camera.matrixWorldInverse,2);const r=En.set(e,t,i),s=r.distanceTo(this._camera.position),o=r.sub(this._camera.position);Jc.multiplyScalar(o.x),eu.multiplyScalar(o.y),Mp.multiplyScalar(o.z),En.copy(Jc).add(eu).add(Mp),En.z=En.z+s,this.dollyTo(s,!1),this.setFocalOffset(-En.x,En.y,-En.z,!1),this.moveTo(e,t,i,!1)}setBoundary(e){if(!e){this._boundary.min.set(-1/0,-1/0,-1/0),this._boundary.max.set(1/0,1/0,1/0),this._needsUpdate=!0;return}this._boundary.copy(e),this._boundary.clampPoint(this._targetEnd,this._targetEnd),this._needsUpdate=!0}setViewport(e,t,i,r){if(e===null){this._viewport=null;return}this._viewport=this._viewport||new en.Vector4,typeof e=="number"?this._viewport.set(e,t,i,r):this._viewport.copy(e)}getDistanceToFitBox(e,t,i,r=!1){if(mR(this._camera,"getDistanceToFitBox"))return this._spherical.radius;const s=e/t,o=this._camera.getEffectiveFOV()*Jy,a=this._camera.aspect;return((r?s>a:s<a)?t:e/a)*.5/Math.tan(o*.5)+i*.5}getDistanceToFitSphere(e){if(mR(this._camera,"getDistanceToFitSphere"))return this._spherical.radius;const t=this._camera.getEffectiveFOV()*Jy,i=Math.atan(Math.tan(t*.5)*this._camera.aspect)*2,r=1<this._camera.aspect?t:i;return e/Math.sin(r*.5)}getTarget(e,t=!0){return(e&&e.isVector3?e:new en.Vector3).copy(t?this._targetEnd:this._target)}getPosition(e,t=!0){return(e&&e.isVector3?e:new en.Vector3).setFromSpherical(t?this._sphericalEnd:this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(t?this._targetEnd:this._target)}getSpherical(e,t=!0){return(e||new en.Spherical).copy(t?this._sphericalEnd:this._spherical)}getFocalOffset(e,t=!0){return(e&&e.isVector3?e:new en.Vector3).copy(t?this._focalOffsetEnd:this._focalOffset)}normalizeRotations(){return this._sphericalEnd.theta=(this._sphericalEnd.theta%Xh+Xh)%Xh,this._sphericalEnd.theta>Math.PI&&(this._sphericalEnd.theta-=Xh),this._spherical.theta+=Xh*Math.round((this._sphericalEnd.theta-this._spherical.theta)/Xh),this}stop(){this._focalOffset.copy(this._focalOffsetEnd),this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd),this._zoom=this._zoomEnd}reset(e=!1){if(!fi(this._camera.up.x,this._cameraUp0.x)||!fi(this._camera.up.y,this._cameraUp0.y)||!fi(this._camera.up.z,this._cameraUp0.z)){this._camera.up.copy(this._cameraUp0);const i=this.getPosition(En);this.updateCameraUp(),this.setPosition(i.x,i.y,i.z)}const t=[this.setLookAt(this._position0.x,this._position0.y,this._position0.z,this._target0.x,this._target0.y,this._target0.z,e),this.setFocalOffset(this._focalOffset0.x,this._focalOffset0.y,this._focalOffset0.z,e),this.zoomTo(this._zoom0,e)];return Promise.all(t)}saveState(){this._cameraUp0.copy(this._camera.up),this.getTarget(this._target0),this.getPosition(this._position0),this._zoom0=this._zoom,this._focalOffset0.copy(this._focalOffset)}updateCameraUp(){this._yAxisUpSpace.setFromUnitVectors(this._camera.up,iS),this._yAxisUpSpaceInverse.copy(this._yAxisUpSpace).invert()}applyCameraUp(){const e=En.subVectors(this._target,this._camera.position).normalize(),t=ii.crossVectors(e,this._camera.up);this._camera.up.crossVectors(t,e).normalize(),this._camera.updateMatrixWorld();const i=this.getPosition(En);this.updateCameraUp(),this.setPosition(i.x,i.y,i.z)}update(e){const t=this._sphericalEnd.theta-this._spherical.theta,i=this._sphericalEnd.phi-this._spherical.phi,r=this._sphericalEnd.radius-this._spherical.radius,s=Jk.subVectors(this._targetEnd,this._target),o=ez.subVectors(this._focalOffsetEnd,this._focalOffset),a=this._zoomEnd-this._zoom;if(Li(t))this._thetaVelocity.value=0,this._spherical.theta=this._sphericalEnd.theta;else{const d=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.theta=tS(this._spherical.theta,this._sphericalEnd.theta,this._thetaVelocity,d,1/0,e),this._needsUpdate=!0}if(Li(i))this._phiVelocity.value=0,this._spherical.phi=this._sphericalEnd.phi;else{const d=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.phi=tS(this._spherical.phi,this._sphericalEnd.phi,this._phiVelocity,d,1/0,e),this._needsUpdate=!0}if(Li(r))this._radiusVelocity.value=0,this._spherical.radius=this._sphericalEnd.radius;else{const d=this._isUserControllingDolly?this.draggingSmoothTime:this.smoothTime;this._spherical.radius=tS(this._spherical.radius,this._sphericalEnd.radius,this._radiusVelocity,d,this.maxSpeed,e),this._needsUpdate=!0}if(Li(s.x)&&Li(s.y)&&Li(s.z))this._targetVelocity.set(0,0,0),this._target.copy(this._targetEnd);else{const d=this._isUserControllingTruck?this.draggingSmoothTime:this.smoothTime;Kk(this._target,this._targetEnd,this._targetVelocity,d,this.maxSpeed,e,this._target),this._needsUpdate=!0}if(Li(o.x)&&Li(o.y)&&Li(o.z))this._focalOffsetVelocity.set(0,0,0),this._focalOffset.copy(this._focalOffsetEnd);else{const d=this._isUserControllingOffset?this.draggingSmoothTime:this.smoothTime;Kk(this._focalOffset,this._focalOffsetEnd,this._focalOffsetVelocity,d,this.maxSpeed,e,this._focalOffset),this._needsUpdate=!0}if(Li(a))this._zoomVelocity.value=0,this._zoom=this._zoomEnd;else{const d=this._isUserControllingZoom?this.draggingSmoothTime:this.smoothTime;this._zoom=tS(this._zoom,this._zoomEnd,this._zoomVelocity,d,1/0,e)}if(this.dollyToCursor){if(Ep(this._camera)&&this._changedDolly!==0){const d=this._spherical.radius-this._lastDistance,m=this._camera,v=this._getCameraDirection(nb),b=En.copy(v).cross(m.up).normalize();b.lengthSq()===0&&(b.x=1);const x=ii.crossVectors(b,v),w=this._sphericalEnd.radius*Math.tan(m.getEffectiveFOV()*Jy*.5),A=(this._sphericalEnd.radius-d-this._sphericalEnd.radius)/this._sphericalEnd.radius,T=Yg.copy(this._targetEnd).add(b.multiplyScalar(this._dollyControlCoord.x*w*m.aspect)).add(x.multiplyScalar(this._dollyControlCoord.y*w)),E=En.copy(this._targetEnd).lerp(T,A),C=this._lastDollyDirection===Xg.IN&&this._spherical.radius<=this.minDistance,R=this._lastDollyDirection===Xg.OUT&&this.maxDistance<=this._spherical.radius;if(this.infinityDolly&&(C||R)){this._sphericalEnd.radius-=d,this._spherical.radius-=d;const I=ii.copy(v).multiplyScalar(-d);E.add(I)}this._boundary.clampPoint(E,E);const O=ii.subVectors(E,this._targetEnd);this._targetEnd.copy(E),this._target.add(O),this._changedDolly-=d,Li(this._changedDolly)&&(this._changedDolly=0)}else if(ed(this._camera)&&this._changedZoom!==0){const d=this._zoom-this._lastZoom,m=this._camera,v=En.set(this._dollyControlCoord.x,this._dollyControlCoord.y,(m.near+m.far)/(m.near-m.far)).unproject(m),b=ii.set(0,0,-1).applyQuaternion(m.quaternion),x=Yg.copy(v).add(b.multiplyScalar(-v.dot(m.up))),_=-(this._zoom-d-this._zoom)/this._zoom,A=this._getCameraDirection(nb),T=this._targetEnd.dot(A),E=En.copy(this._targetEnd).lerp(x,_),C=E.dot(A),R=A.multiplyScalar(C-T);E.sub(R),this._boundary.clampPoint(E,E);const O=ii.subVectors(E,this._targetEnd);this._targetEnd.copy(E),this._target.add(O),this._changedZoom-=d,Li(this._changedZoom)&&(this._changedZoom=0)}}this._camera.zoom!==this._zoom&&(this._camera.zoom=this._zoom,this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0),this._dragNeedsUpdate=!0;const l=this._collisionTest();this._spherical.radius=Math.min(this._spherical.radius,l),this._spherical.makeSafe(),this._camera.position.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(this._target),this._camera.lookAt(this._target),(!Li(this._focalOffset.x)||!Li(this._focalOffset.y)||!Li(this._focalOffset.z))&&(Jc.setFromMatrixColumn(this._camera.matrix,0),eu.setFromMatrixColumn(this._camera.matrix,1),Mp.setFromMatrixColumn(this._camera.matrix,2),Jc.multiplyScalar(this._focalOffset.x),eu.multiplyScalar(-this._focalOffset.y),Mp.multiplyScalar(this._focalOffset.z),En.copy(Jc).add(eu).add(Mp),this._camera.position.add(En),this._camera.updateMatrixWorld()),this._boundaryEnclosesCamera&&this._encloseToBoundary(this._camera.position.copy(this._target),En.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse),1);const f=this._needsUpdate;return f&&!this._updatedLastTime?(this._hasRested=!1,this.dispatchEvent({type:"wake"}),this.dispatchEvent({type:"update"})):f?(this.dispatchEvent({type:"update"}),Li(t,this.restThreshold)&&Li(i,this.restThreshold)&&Li(r,this.restThreshold)&&Li(s.x,this.restThreshold)&&Li(s.y,this.restThreshold)&&Li(s.z,this.restThreshold)&&Li(o.x,this.restThreshold)&&Li(o.y,this.restThreshold)&&Li(o.z,this.restThreshold)&&Li(a,this.restThreshold)&&!this._hasRested&&(this._hasRested=!0,this.dispatchEvent({type:"rest"}))):!f&&this._updatedLastTime&&this.dispatchEvent({type:"sleep"}),this._lastDistance=this._spherical.radius,this._lastZoom=this._zoom,this._updatedLastTime=f,this._needsUpdate=!1,f}toJSON(){return JSON.stringify({enabled:this._enabled,minDistance:this.minDistance,maxDistance:eb(this.maxDistance),minZoom:this.minZoom,maxZoom:eb(this.maxZoom),minPolarAngle:this.minPolarAngle,maxPolarAngle:eb(this.maxPolarAngle),minAzimuthAngle:eb(this.minAzimuthAngle),maxAzimuthAngle:eb(this.maxAzimuthAngle),smoothTime:this.smoothTime,draggingSmoothTime:this.draggingSmoothTime,dollySpeed:this.dollySpeed,truckSpeed:this.truckSpeed,dollyToCursor:this.dollyToCursor,target:this._targetEnd.toArray(),position:En.setFromSpherical(this._sphericalEnd).add(this._targetEnd).toArray(),zoom:this._zoomEnd,focalOffset:this._focalOffsetEnd.toArray(),target0:this._target0.toArray(),position0:this._position0.toArray(),zoom0:this._zoom0,focalOffset0:this._focalOffset0.toArray()})}fromJSON(e,t=!1){const i=JSON.parse(e);this.enabled=i.enabled,this.minDistance=i.minDistance,this.maxDistance=tb(i.maxDistance),this.minZoom=i.minZoom,this.maxZoom=tb(i.maxZoom),this.minPolarAngle=i.minPolarAngle,this.maxPolarAngle=tb(i.maxPolarAngle),this.minAzimuthAngle=tb(i.minAzimuthAngle),this.maxAzimuthAngle=tb(i.maxAzimuthAngle),this.smoothTime=i.smoothTime,this.draggingSmoothTime=i.draggingSmoothTime,this.dollySpeed=i.dollySpeed,this.truckSpeed=i.truckSpeed,this.dollyToCursor=i.dollyToCursor,this._target0.fromArray(i.target0),this._position0.fromArray(i.position0),this._zoom0=i.zoom0,this._focalOffset0.fromArray(i.focalOffset0),this.moveTo(i.target[0],i.target[1],i.target[2],t),Ca.setFromVector3(En.fromArray(i.position).sub(this._targetEnd).applyQuaternion(this._yAxisUpSpace)),this.rotateTo(Ca.theta,Ca.phi,t),this.dollyTo(Ca.radius,t),this.zoomTo(i.zoom,t),this.setFocalOffset(i.focalOffset[0],i.focalOffset[1],i.focalOffset[2],t),this._needsUpdate=!0}connect(e){if(this._domElement){console.warn("camera-controls is already connected.");return}e.setAttribute("data-camera-controls-version",Yfe),this._addAllEventListeners(e),this._getClientRect(this._elementRect)}disconnect(){this.cancel(),this._removeAllEventListeners(),this._domElement&&(this._domElement.removeAttribute("data-camera-controls-version"),this._domElement=void 0)}dispose(){this.removeAllEventListeners(),this.disconnect()}_getTargetDirection(e){return e.setFromSpherical(this._spherical).divideScalar(this._spherical.radius).applyQuaternion(this._yAxisUpSpaceInverse)}_getCameraDirection(e){return this._getTargetDirection(e).negate()}_findPointerById(e){return this._activePointers.find(t=>t.pointerId===e)}_findPointerByMouseButton(e){return this._activePointers.find(t=>t.mouseButton===e)}_disposePointer(e){this._activePointers.splice(this._activePointers.indexOf(e),1)}_encloseToBoundary(e,t,i){const r=t.lengthSq();if(r===0)return e;const s=ii.copy(t).add(e),a=this._boundary.clampPoint(s,Yg).sub(s),l=a.lengthSq();if(l===0)return e.add(t);if(l===r)return e;if(i===0)return e.add(t).add(a);{const c=1+i*l/t.dot(a);return e.add(ii.copy(t).multiplyScalar(c)).add(a.multiplyScalar(1-i))}}_updateNearPlaneCorners(){if(Ep(this._camera)){const e=this._camera,t=e.near,i=e.getEffectiveFOV()*Jy,r=Math.tan(i*.5)*t,s=r*e.aspect;this._nearPlaneCorners[0].set(-s,-r,0),this._nearPlaneCorners[1].set(s,-r,0),this._nearPlaneCorners[2].set(s,r,0),this._nearPlaneCorners[3].set(-s,r,0)}else if(ed(this._camera)){const e=this._camera,t=1/e.zoom,i=e.left*t,r=e.right*t,s=e.top*t,o=e.bottom*t;this._nearPlaneCorners[0].set(i,s,0),this._nearPlaneCorners[1].set(r,s,0),this._nearPlaneCorners[2].set(r,o,0),this._nearPlaneCorners[3].set(i,o,0)}}_collisionTest(){let e=1/0;if(!(this.colliderMeshes.length>=1)||mR(this._camera,"_collisionTest"))return e;const i=this._getTargetDirection(nb);_R.lookAt(Qk,i,this._camera.up);for(let r=0;r<4;r++){const s=ii.copy(this._nearPlaneCorners[r]);s.applyMatrix4(_R);const o=Yg.addVectors(this._target,s);rS.set(o,i),rS.far=this._spherical.radius+1;const a=rS.intersectObjects(this.colliderMeshes);a.length!==0&&a[0].distance<e&&(e=a[0].distance)}return e}_getClientRect(e){if(!this._domElement)return;const t=this._domElement.getBoundingClientRect();return e.x=t.left,e.y=t.top,this._viewport?(e.x+=this._viewport.x,e.y+=t.height-this._viewport.w-this._viewport.y,e.width=this._viewport.z,e.height=this._viewport.w):(e.width=t.width,e.height=t.height),e}_createOnRestPromise(e){return e?Promise.resolve():(this._hasRested=!1,this.dispatchEvent({type:"transitionstart"}),new Promise(t=>{const i=()=>{this.removeEventListener("rest",i),t()};this.addEventListener("rest",i)}))}_addAllEventListeners(e){}_removeAllEventListeners(){}get dampingFactor(){return console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead."),0}set dampingFactor(e){console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead.")}get draggingDampingFactor(){return console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead."),0}set draggingDampingFactor(e){console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead.")}static createBoundingSphere(e,t=new en.Sphere){const i=t,r=i.center;Kg.makeEmpty(),e.traverseVisible(o=>{o.isMesh&&Kg.expandByObject(o)}),Kg.getCenter(r);let s=0;return e.traverseVisible(o=>{if(!o.isMesh)return;const a=o;if(!a.geometry)return;const l=a.geometry.clone();l.applyMatrix4(a.matrixWorld);const f=l.attributes.position;for(let d=0,m=f.count;d<m;d++)En.fromBufferAttribute(f,d),s=Math.max(s,r.distanceToSquared(En))}),i.radius=Math.sqrt(s),i}};var Qb;(function(n){n.HOLD_START="holdStart",n.HOLD_END="holdEnd",n.HOLDING="holding"})(Qb||(Qb={}));class Kfe{constructor(){this._listeners={}}addEventListener(e,t){const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}removeEventListener(e,t){const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e)}}}class Qfe extends Kfe{constructor(e){super(),this._enabled=!0,this._holding=!1,this._intervalId=-1,this._deltaTime=0,this._elapsedTime=0,this._lastTime=0,this._holdStart=t=>{if(!this._enabled||this._holding)return;this._deltaTime=0,this._elapsedTime=0,this._lastTime=performance.now(),this.dispatchEvent({type:Qb.HOLD_START,deltaTime:this._deltaTime,elapsedTime:this._elapsedTime,originalEvent:t}),this._holding=!0;const i=()=>{this._intervalId=this.holdIntervalDelay?window.setTimeout(i,this.holdIntervalDelay):window.requestAnimationFrame(i);const r=performance.now();this._deltaTime=r-this._lastTime,this._elapsedTime+=this._deltaTime,this._lastTime=performance.now(),this.dispatchEvent({type:Qb.HOLDING,deltaTime:this._deltaTime,elapsedTime:this._elapsedTime,originalEvent:t})};this._intervalId=this.holdIntervalDelay?window.setTimeout(i,this.holdIntervalDelay):window.requestAnimationFrame(i)},this._holdEnd=t=>{if(!this._enabled||!this._holding)return;const i=performance.now();this._deltaTime=i-this._lastTime,this._elapsedTime+=this._deltaTime,this._lastTime=performance.now(),this.dispatchEvent({type:Qb.HOLD_END,deltaTime:this._deltaTime,elapsedTime:this._elapsedTime,originalEvent:t}),window.clearTimeout(this._intervalId),window.cancelAnimationFrame(this._intervalId),this._holding=!1},this.holdIntervalDelay=e}get enabled(){return this._enabled}set enabled(e){this._enabled!==e&&(this._enabled=e,this._enabled||this._holdEnd())}get holding(){return this._holding}}class sS extends Qfe{constructor(e,t){if(typeof e!="string"){console.error("KeyboardKeyHold: the first argument has to be a KeyboardEvent.code string.");return}super(t),this._holdStart=this._holdStart.bind(this),this._holdEnd=this._holdEnd.bind(this);const i=s=>{Jfe(s)||s.code===e&&this._holdStart(s)},r=s=>{s.code===e&&this._holdEnd(s)};document.addEventListener("keydown",i),document.addEventListener("keyup",r),window.addEventListener("blur",this._holdEnd)}}function Jfe(n){const e=n.target;return e.tagName==="INPUT"||e.tagName==="SELECT"||e.tagName==="TEXTAREA"||e.isContentEditable}var oS={exports:{}},iz;function ehe(){if(iz)return oS.exports;iz=1;var n=typeof Reflect=="object"?Reflect:null,e=n&&typeof n.apply=="function"?n.apply:function(C,R,O){return Function.prototype.apply.call(C,R,O)},t;n&&typeof n.ownKeys=="function"?t=n.ownKeys:Object.getOwnPropertySymbols?t=function(C){return Object.getOwnPropertyNames(C).concat(Object.getOwnPropertySymbols(C))}:t=function(C){return Object.getOwnPropertyNames(C)};function i(E){console&&console.warn&&console.warn(E)}var r=Number.isNaN||function(C){return C!==C};function s(){s.init.call(this)}oS.exports=s,oS.exports.once=_,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var o=10;function a(E){if(typeof E!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof E)}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(E){if(typeof E!="number"||E<0||r(E))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+E+".");o=E}}),s.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(C){if(typeof C!="number"||C<0||r(C))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+C+".");return this._maxListeners=C,this};function l(E){return E._maxListeners===void 0?s.defaultMaxListeners:E._maxListeners}s.prototype.getMaxListeners=function(){return l(this)},s.prototype.emit=function(C){for(var R=[],O=1;O<arguments.length;O++)R.push(arguments[O]);var I=C==="error",L=this._events;if(L!==void 0)I=I&&L.error===void 0;else if(!I)return!1;if(I){var N;if(R.length>0&&(N=R[0]),N instanceof Error)throw N;var V=new Error("Unhandled error."+(N?" ("+N.message+")":""));throw V.context=N,V}var B=L[C];if(B===void 0)return!1;if(typeof B=="function")e(B,this,R);else for(var k=B.length,j=b(B,k),O=0;O<k;++O)e(j[O],this,R);return!0};function c(E,C,R,O){var I,L,N;if(a(R),L=E._events,L===void 0?(L=E._events=Object.create(null),E._eventsCount=0):(L.newListener!==void 0&&(E.emit("newListener",C,R.listener?R.listener:R),L=E._events),N=L[C]),N===void 0)N=L[C]=R,++E._eventsCount;else if(typeof N=="function"?N=L[C]=O?[R,N]:[N,R]:O?N.unshift(R):N.push(R),I=l(E),I>0&&N.length>I&&!N.warned){N.warned=!0;var V=new Error("Possible EventEmitter memory leak detected. "+N.length+" "+String(C)+" listeners added. Use emitter.setMaxListeners() to increase limit");V.name="MaxListenersExceededWarning",V.emitter=E,V.type=C,V.count=N.length,i(V)}return E}s.prototype.addListener=function(C,R){return c(this,C,R,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(C,R){return c(this,C,R,!0)};function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(E,C,R){var O={fired:!1,wrapFn:void 0,target:E,type:C,listener:R},I=f.bind(O);return I.listener=R,O.wrapFn=I,I}s.prototype.once=function(C,R){return a(R),this.on(C,d(this,C,R)),this},s.prototype.prependOnceListener=function(C,R){return a(R),this.prependListener(C,d(this,C,R)),this},s.prototype.removeListener=function(C,R){var O,I,L,N,V;if(a(R),I=this._events,I===void 0)return this;if(O=I[C],O===void 0)return this;if(O===R||O.listener===R)--this._eventsCount===0?this._events=Object.create(null):(delete I[C],I.removeListener&&this.emit("removeListener",C,O.listener||R));else if(typeof O!="function"){for(L=-1,N=O.length-1;N>=0;N--)if(O[N]===R||O[N].listener===R){V=O[N].listener,L=N;break}if(L<0)return this;L===0?O.shift():x(O,L),O.length===1&&(I[C]=O[0]),I.removeListener!==void 0&&this.emit("removeListener",C,V||R)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(C){var R,O,I;if(O=this._events,O===void 0)return this;if(O.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):O[C]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete O[C]),this;if(arguments.length===0){var L=Object.keys(O),N;for(I=0;I<L.length;++I)N=L[I],N!=="removeListener"&&this.removeAllListeners(N);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(R=O[C],typeof R=="function")this.removeListener(C,R);else if(R!==void 0)for(I=R.length-1;I>=0;I--)this.removeListener(C,R[I]);return this};function m(E,C,R){var O=E._events;if(O===void 0)return[];var I=O[C];return I===void 0?[]:typeof I=="function"?R?[I.listener||I]:[I]:R?w(I):b(I,I.length)}s.prototype.listeners=function(C){return m(this,C,!0)},s.prototype.rawListeners=function(C){return m(this,C,!1)},s.listenerCount=function(E,C){return typeof E.listenerCount=="function"?E.listenerCount(C):v.call(E,C)},s.prototype.listenerCount=v;function v(E){var C=this._events;if(C!==void 0){var R=C[E];if(typeof R=="function")return 1;if(R!==void 0)return R.length}return 0}s.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]};function b(E,C){for(var R=new Array(C),O=0;O<C;++O)R[O]=E[O];return R}function x(E,C){for(;C+1<E.length;C++)E[C]=E[C+1];E.pop()}function w(E){for(var C=new Array(E.length),R=0;R<C.length;++R)C[R]=E[R].listener||E[R];return C}function _(E,C){return new Promise(function(R,O){function I(N){E.removeListener(C,L),O(N)}function L(){typeof E.removeListener=="function"&&E.removeListener("error",I),R([].slice.call(arguments))}T(E,C,L,{once:!0}),C!=="error"&&A(E,I,{once:!0})})}function A(E,C,R){typeof E.on=="function"&&T(E,"error",C,R)}function T(E,C,R,O){if(typeof E.on=="function")O.once?E.once(C,R):E.on(C,R);else if(typeof E.addEventListener=="function")E.addEventListener(C,function I(L){O.once&&E.removeEventListener(C,I),R(L)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof E)}return oS.exports}var the=ehe();function nhe(){const n=arguments[0];for(let e=1,t=arguments.length;e<t;e++)if(arguments[e])for(const i in arguments[e])n[i]=arguments[e][i];return n}let es=nhe;typeof Object.assign=="function"&&(es=Object.assign);function El(n,e,t,i){const r=n._nodes.get(e);let s=null;return r&&(i==="mixed"?s=r.out&&r.out[t]||r.undirected&&r.undirected[t]:i==="directed"?s=r.out&&r.out[t]:s=r.undirected&&r.undirected[t]),s}function Cs(n){return typeof n=="object"&&n!==null}function MG(n){let e;for(e in n)return!1;return!0}function dl(n,e,t){Object.defineProperty(n,e,{enumerable:!1,configurable:!1,writable:!0,value:t})}function Ql(n,e,t){const i={enumerable:!0,configurable:!0};typeof t=="function"?i.get=t:(i.value=t,i.writable=!1),Object.defineProperty(n,e,i)}function rz(n){return!(!Cs(n)||n.attributes&&!Array.isArray(n.attributes))}function ihe(){let n=Math.floor(Math.random()*256)&255;return()=>n++}function kf(){const n=arguments;let e=null,t=-1;return{[Symbol.iterator](){return this},next(){let i=null;do{if(e===null){if(t++,t>=n.length)return{done:!0};e=n[t][Symbol.iterator]()}if(i=e.next(),i.done){e=null;continue}break}while(!0);return i}}}function fv(){return{[Symbol.iterator](){return this},next(){return{done:!0}}}}class $L extends Error{constructor(e){super(),this.name="GraphError",this.message=e}}class Ot extends $L{constructor(e){super(e),this.name="InvalidArgumentsGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,Ot.prototype.constructor)}}class wt extends $L{constructor(e){super(e),this.name="NotFoundGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,wt.prototype.constructor)}}class Yt extends $L{constructor(e){super(e),this.name="UsageGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,Yt.prototype.constructor)}}function TG(n,e){this.key=n,this.attributes=e,this.clear()}TG.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.undirectedLoops=0,this.directedLoops=0,this.in={},this.out={},this.undirected={}};function AG(n,e){this.key=n,this.attributes=e,this.clear()}AG.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedLoops=0,this.in={},this.out={}};function CG(n,e){this.key=n,this.attributes=e,this.clear()}CG.prototype.clear=function(){this.undirectedDegree=0,this.undirectedLoops=0,this.undirected={}};function hv(n,e,t,i,r){this.key=e,this.attributes=r,this.undirected=n,this.source=t,this.target=i}hv.prototype.attach=function(){let n="out",e="in";this.undirected&&(n=e="undirected");const t=this.source.key,i=this.target.key;this.source[n][i]=this,!(this.undirected&&t===i)&&(this.target[e][t]=this)};hv.prototype.attachMulti=function(){let n="out",e="in";const t=this.source.key,i=this.target.key;this.undirected&&(n=e="undirected");const r=this.source[n],s=r[i];if(typeof s>"u"){r[i]=this,this.undirected&&t===i||(this.target[e][t]=this);return}s.previous=this,this.next=s,r[i]=this,this.target[e][t]=this};hv.prototype.detach=function(){const n=this.source.key,e=this.target.key;let t="out",i="in";this.undirected&&(t=i="undirected"),delete this.source[t][e],delete this.target[i][n]};hv.prototype.detachMulti=function(){const n=this.source.key,e=this.target.key;let t="out",i="in";this.undirected&&(t=i="undirected"),this.previous===void 0?this.next===void 0?(delete this.source[t][e],delete this.target[i][n]):(this.next.previous=void 0,this.source[t][e]=this.next,this.target[i][n]=this.next):(this.previous.next=this.next,this.next!==void 0&&(this.next.previous=this.previous))};const RG=0,DG=1,rhe=2,OG=3;function Kf(n,e,t,i,r,s,o){let a,l,c,f;if(i=""+i,t===RG){if(a=n._nodes.get(i),!a)throw new wt(`Graph.${e}: could not find the "${i}" node in the graph.`);c=r,f=s}else if(t===OG){if(r=""+r,l=n._edges.get(r),!l)throw new wt(`Graph.${e}: could not find the "${r}" edge in the graph.`);const d=l.source.key,m=l.target.key;if(i===d)a=l.target;else if(i===m)a=l.source;else throw new wt(`Graph.${e}: the "${i}" node is not attached to the "${r}" edge (${d}, ${m}).`);c=s,f=o}else{if(l=n._edges.get(i),!l)throw new wt(`Graph.${e}: could not find the "${i}" edge in the graph.`);t===DG?a=l.source:a=l.target,c=r,f=s}return[a,c,f]}function she(n,e,t){n.prototype[e]=function(i,r,s){const[o,a]=Kf(this,e,t,i,r,s);return o.attributes[a]}}function ohe(n,e,t){n.prototype[e]=function(i,r){const[s]=Kf(this,e,t,i,r);return s.attributes}}function ahe(n,e,t){n.prototype[e]=function(i,r,s){const[o,a]=Kf(this,e,t,i,r,s);return o.attributes.hasOwnProperty(a)}}function lhe(n,e,t){n.prototype[e]=function(i,r,s,o){const[a,l,c]=Kf(this,e,t,i,r,s,o);return a.attributes[l]=c,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:l}),this}}function che(n,e,t){n.prototype[e]=function(i,r,s,o){const[a,l,c]=Kf(this,e,t,i,r,s,o);if(typeof c!="function")throw new Ot(`Graph.${e}: updater should be a function.`);const f=a.attributes,d=c(f[l]);return f[l]=d,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:l}),this}}function uhe(n,e,t){n.prototype[e]=function(i,r,s){const[o,a]=Kf(this,e,t,i,r,s);return delete o.attributes[a],this.emit("nodeAttributesUpdated",{key:o.key,type:"remove",attributes:o.attributes,name:a}),this}}function fhe(n,e,t){n.prototype[e]=function(i,r,s){const[o,a]=Kf(this,e,t,i,r,s);if(!Cs(a))throw new Ot(`Graph.${e}: provided attributes are not a plain object.`);return o.attributes=a,this.emit("nodeAttributesUpdated",{key:o.key,type:"replace",attributes:o.attributes}),this}}function hhe(n,e,t){n.prototype[e]=function(i,r,s){const[o,a]=Kf(this,e,t,i,r,s);if(!Cs(a))throw new Ot(`Graph.${e}: provided attributes are not a plain object.`);return es(o.attributes,a),this.emit("nodeAttributesUpdated",{key:o.key,type:"merge",attributes:o.attributes,data:a}),this}}function dhe(n,e,t){n.prototype[e]=function(i,r,s){const[o,a]=Kf(this,e,t,i,r,s);if(typeof a!="function")throw new Ot(`Graph.${e}: provided updater is not a function.`);return o.attributes=a(o.attributes),this.emit("nodeAttributesUpdated",{key:o.key,type:"update",attributes:o.attributes}),this}}const phe=[{name:n=>`get${n}Attribute`,attacher:she},{name:n=>`get${n}Attributes`,attacher:ohe},{name:n=>`has${n}Attribute`,attacher:ahe},{name:n=>`set${n}Attribute`,attacher:lhe},{name:n=>`update${n}Attribute`,attacher:che},{name:n=>`remove${n}Attribute`,attacher:uhe},{name:n=>`replace${n}Attributes`,attacher:fhe},{name:n=>`merge${n}Attributes`,attacher:hhe},{name:n=>`update${n}Attributes`,attacher:dhe}];function mhe(n){phe.forEach(function({name:e,attacher:t}){t(n,e("Node"),RG),t(n,e("Source"),DG),t(n,e("Target"),rhe),t(n,e("Opposite"),OG)})}function ghe(n,e,t){n.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new Yt(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Yt(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=El(this,o,a,t),!s)throw new wt(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(t!=="mixed")throw new Yt(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new wt(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return s.attributes[r]}}function vhe(n,e,t){n.prototype[e]=function(i){let r;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new Yt(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>1){if(this.multi)throw new Yt(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+i,o=""+arguments[1];if(r=El(this,s,o,t),!r)throw new wt(`Graph.${e}: could not find an edge for the given path ("${s}" - "${o}").`)}else{if(t!=="mixed")throw new Yt(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,r=this._edges.get(i),!r)throw new wt(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return r.attributes}}function yhe(n,e,t){n.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new Yt(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Yt(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=El(this,o,a,t),!s)throw new wt(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(t!=="mixed")throw new Yt(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new wt(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return s.attributes.hasOwnProperty(r)}}function bhe(n,e,t){n.prototype[e]=function(i,r,s){let o;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new Yt(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new Yt(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+i,l=""+r;if(r=arguments[2],s=arguments[3],o=El(this,a,l,t),!o)throw new wt(`Graph.${e}: could not find an edge for the given path ("${a}" - "${l}").`)}else{if(t!=="mixed")throw new Yt(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,o=this._edges.get(i),!o)throw new wt(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return o.attributes[r]=s,this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:r}),this}}function _he(n,e,t){n.prototype[e]=function(i,r,s){let o;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new Yt(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new Yt(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+i,l=""+r;if(r=arguments[2],s=arguments[3],o=El(this,a,l,t),!o)throw new wt(`Graph.${e}: could not find an edge for the given path ("${a}" - "${l}").`)}else{if(t!=="mixed")throw new Yt(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,o=this._edges.get(i),!o)throw new wt(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(typeof s!="function")throw new Ot(`Graph.${e}: updater should be a function.`);return o.attributes[r]=s(o.attributes[r]),this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:r}),this}}function xhe(n,e,t){n.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new Yt(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Yt(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=El(this,o,a,t),!s)throw new wt(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(t!=="mixed")throw new Yt(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new wt(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return delete s.attributes[r],this.emit("edgeAttributesUpdated",{key:s.key,type:"remove",attributes:s.attributes,name:r}),this}}function whe(n,e,t){n.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new Yt(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Yt(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=El(this,o,a,t),!s)throw new wt(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(t!=="mixed")throw new Yt(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new wt(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(!Cs(r))throw new Ot(`Graph.${e}: provided attributes are not a plain object.`);return s.attributes=r,this.emit("edgeAttributesUpdated",{key:s.key,type:"replace",attributes:s.attributes}),this}}function She(n,e,t){n.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new Yt(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Yt(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=El(this,o,a,t),!s)throw new wt(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(t!=="mixed")throw new Yt(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new wt(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(!Cs(r))throw new Ot(`Graph.${e}: provided attributes are not a plain object.`);return es(s.attributes,r),this.emit("edgeAttributesUpdated",{key:s.key,type:"merge",attributes:s.attributes,data:r}),this}}function Ehe(n,e,t){n.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new Yt(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Yt(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=El(this,o,a,t),!s)throw new wt(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(t!=="mixed")throw new Yt(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new wt(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(typeof r!="function")throw new Ot(`Graph.${e}: provided updater is not a function.`);return s.attributes=r(s.attributes),this.emit("edgeAttributesUpdated",{key:s.key,type:"update",attributes:s.attributes}),this}}const Mhe=[{name:n=>`get${n}Attribute`,attacher:ghe},{name:n=>`get${n}Attributes`,attacher:vhe},{name:n=>`has${n}Attribute`,attacher:yhe},{name:n=>`set${n}Attribute`,attacher:bhe},{name:n=>`update${n}Attribute`,attacher:_he},{name:n=>`remove${n}Attribute`,attacher:xhe},{name:n=>`replace${n}Attributes`,attacher:whe},{name:n=>`merge${n}Attributes`,attacher:She},{name:n=>`update${n}Attributes`,attacher:Ehe}];function The(n){Mhe.forEach(function({name:e,attacher:t}){t(n,e("Edge"),"mixed"),t(n,e("DirectedEdge"),"directed"),t(n,e("UndirectedEdge"),"undirected")})}const Ahe=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function Che(n,e,t,i){let r=!1;for(const s in e){if(s===i)continue;const o=e[s];if(r=t(o.key,o.attributes,o.source.key,o.target.key,o.source.attributes,o.target.attributes,o.undirected),n&&r)return o.key}}function Rhe(n,e,t,i){let r,s,o,a=!1;for(const l in e)if(l!==i){r=e[l];do{if(s=r.source,o=r.target,a=t(r.key,r.attributes,s.key,o.key,s.attributes,o.attributes,r.undirected),n&&a)return r.key;r=r.next}while(r!==void 0)}}function xR(n,e){const t=Object.keys(n),i=t.length;let r,s=0;return{[Symbol.iterator](){return this},next(){do if(r)r=r.next;else{if(s>=i)return{done:!0};const o=t[s++];if(o===e){r=void 0;continue}r=n[o]}while(!r);return{done:!1,value:{edge:r.key,attributes:r.attributes,source:r.source.key,target:r.target.key,sourceAttributes:r.source.attributes,targetAttributes:r.target.attributes,undirected:r.undirected}}}}}function Dhe(n,e,t,i){const r=e[t];if(!r)return;const s=r.source,o=r.target;if(i(r.key,r.attributes,s.key,o.key,s.attributes,o.attributes,r.undirected)&&n)return r.key}function Ohe(n,e,t,i){let r=e[t];if(!r)return;let s=!1;do{if(s=i(r.key,r.attributes,r.source.key,r.target.key,r.source.attributes,r.target.attributes,r.undirected),n&&s)return r.key;r=r.next}while(r!==void 0)}function wR(n,e){let t=n[e];if(t.next!==void 0)return{[Symbol.iterator](){return this},next(){if(!t)return{done:!0};const r={edge:t.key,attributes:t.attributes,source:t.source.key,target:t.target.key,sourceAttributes:t.source.attributes,targetAttributes:t.target.attributes,undirected:t.undirected};return t=t.next,{done:!1,value:r}}};let i=!1;return{[Symbol.iterator](){return this},next(){return i===!0?{done:!0}:(i=!0,{done:!1,value:{edge:t.key,attributes:t.attributes,source:t.source.key,target:t.target.key,sourceAttributes:t.source.attributes,targetAttributes:t.target.attributes,undirected:t.undirected}})}}}function Lhe(n,e){if(n.size===0)return[];if(e==="mixed"||e===n.type)return Array.from(n._edges.keys());const t=e==="undirected"?n.undirectedSize:n.directedSize,i=new Array(t),r=e==="undirected",s=n._edges.values();let o=0,a,l;for(;a=s.next(),a.done!==!0;)l=a.value,l.undirected===r&&(i[o++]=l.key);return i}function LG(n,e,t,i){if(e.size===0)return;const r=t!=="mixed"&&t!==e.type,s=t==="undirected";let o,a,l=!1;const c=e._edges.values();for(;o=c.next(),o.done!==!0;){if(a=o.value,r&&a.undirected!==s)continue;const{key:f,attributes:d,source:m,target:v}=a;if(l=i(f,d,m.key,v.key,m.attributes,v.attributes,a.undirected),n&&l)return f}}function Phe(n,e){if(n.size===0)return fv();const t=e!=="mixed"&&e!==n.type,i=e==="undirected",r=n._edges.values();return{[Symbol.iterator](){return this},next(){let s,o;for(;;){if(s=r.next(),s.done)return s;if(o=s.value,!(t&&o.undirected!==i))break}return{value:{edge:o.key,attributes:o.attributes,source:o.source.key,target:o.target.key,sourceAttributes:o.source.attributes,targetAttributes:o.target.attributes,undirected:o.undirected},done:!1}}}}function qL(n,e,t,i,r,s){const o=e?Rhe:Che;let a;if(t!=="undirected"&&(i!=="out"&&(a=o(n,r.in,s),n&&a)||i!=="in"&&(a=o(n,r.out,s,i?void 0:r.key),n&&a))||t!=="directed"&&(a=o(n,r.undirected,s),n&&a))return a}function Ihe(n,e,t,i){const r=[];return qL(!1,n,e,t,i,function(s){r.push(s)}),r}function Nhe(n,e,t){let i=fv();return n!=="undirected"&&(e!=="out"&&typeof t.in<"u"&&(i=kf(i,xR(t.in))),e!=="in"&&typeof t.out<"u"&&(i=kf(i,xR(t.out,e?void 0:t.key)))),n!=="directed"&&typeof t.undirected<"u"&&(i=kf(i,xR(t.undirected))),i}function XL(n,e,t,i,r,s,o){const a=t?Ohe:Dhe;let l;if(e!=="undirected"&&(typeof r.in<"u"&&i!=="out"&&(l=a(n,r.in,s,o),n&&l)||typeof r.out<"u"&&i!=="in"&&(i||r.key!==s)&&(l=a(n,r.out,s,o),n&&l))||e!=="directed"&&typeof r.undirected<"u"&&(l=a(n,r.undirected,s,o),n&&l))return l}function Uhe(n,e,t,i,r){const s=[];return XL(!1,n,e,t,i,r,function(o){s.push(o)}),s}function khe(n,e,t,i){let r=fv();return n!=="undirected"&&(typeof t.in<"u"&&e!=="out"&&i in t.in&&(r=kf(r,wR(t.in,i))),typeof t.out<"u"&&e!=="in"&&i in t.out&&(e||t.key!==i)&&(r=kf(r,wR(t.out,i)))),n!=="directed"&&typeof t.undirected<"u"&&i in t.undirected&&(r=kf(r,wR(t.undirected,i))),r}function zhe(n,e){const{name:t,type:i,direction:r}=e;n.prototype[t]=function(s,o){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return[];if(!arguments.length)return Lhe(this,i);if(arguments.length===1){s=""+s;const a=this._nodes.get(s);if(typeof a>"u")throw new wt(`Graph.${t}: could not find the "${s}" node in the graph.`);return Ihe(this.multi,i==="mixed"?this.type:i,r,a)}if(arguments.length===2){s=""+s,o=""+o;const a=this._nodes.get(s);if(!a)throw new wt(`Graph.${t}:  could not find the "${s}" source node in the graph.`);if(!this._nodes.has(o))throw new wt(`Graph.${t}:  could not find the "${o}" target node in the graph.`);return Uhe(i,this.multi,r,a,o)}throw new Ot(`Graph.${t}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function Fhe(n,e){const{name:t,type:i,direction:r}=e,s="forEach"+t[0].toUpperCase()+t.slice(1,-1);n.prototype[s]=function(c,f,d){if(!(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)){if(arguments.length===1)return d=c,LG(!1,this,i,d);if(arguments.length===2){c=""+c,d=f;const m=this._nodes.get(c);if(typeof m>"u")throw new wt(`Graph.${s}: could not find the "${c}" node in the graph.`);return qL(!1,this.multi,i==="mixed"?this.type:i,r,m,d)}if(arguments.length===3){c=""+c,f=""+f;const m=this._nodes.get(c);if(!m)throw new wt(`Graph.${s}:  could not find the "${c}" source node in the graph.`);if(!this._nodes.has(f))throw new wt(`Graph.${s}:  could not find the "${f}" target node in the graph.`);return XL(!1,i,this.multi,r,m,f,d)}throw new Ot(`Graph.${s}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)}};const o="map"+t[0].toUpperCase()+t.slice(1);n.prototype[o]=function(){const c=Array.prototype.slice.call(arguments),f=c.pop();let d;if(c.length===0){let m=0;i!=="directed"&&(m+=this.undirectedSize),i!=="undirected"&&(m+=this.directedSize),d=new Array(m);let v=0;c.push((b,x,w,_,A,T,E)=>{d[v++]=f(b,x,w,_,A,T,E)})}else d=[],c.push((m,v,b,x,w,_,A)=>{d.push(f(m,v,b,x,w,_,A))});return this[s].apply(this,c),d};const a="filter"+t[0].toUpperCase()+t.slice(1);n.prototype[a]=function(){const c=Array.prototype.slice.call(arguments),f=c.pop(),d=[];return c.push((m,v,b,x,w,_,A)=>{f(m,v,b,x,w,_,A)&&d.push(m)}),this[s].apply(this,c),d};const l="reduce"+t[0].toUpperCase()+t.slice(1);n.prototype[l]=function(){let c=Array.prototype.slice.call(arguments);if(c.length<2||c.length>4)throw new Ot(`Graph.${l}: invalid number of arguments (expecting 2, 3 or 4 and got ${c.length}).`);if(typeof c[c.length-1]=="function"&&typeof c[c.length-2]!="function")throw new Ot(`Graph.${l}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let f,d;c.length===2?(f=c[0],d=c[1],c=[]):c.length===3?(f=c[1],d=c[2],c=[c[0]]):c.length===4&&(f=c[2],d=c[3],c=[c[0],c[1]]);let m=d;return c.push((v,b,x,w,_,A,T)=>{m=f(m,v,b,x,w,_,A,T)}),this[s].apply(this,c),m}}function Bhe(n,e){const{name:t,type:i,direction:r}=e,s="find"+t[0].toUpperCase()+t.slice(1,-1);n.prototype[s]=function(l,c,f){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return!1;if(arguments.length===1)return f=l,LG(!0,this,i,f);if(arguments.length===2){l=""+l,f=c;const d=this._nodes.get(l);if(typeof d>"u")throw new wt(`Graph.${s}: could not find the "${l}" node in the graph.`);return qL(!0,this.multi,i==="mixed"?this.type:i,r,d,f)}if(arguments.length===3){l=""+l,c=""+c;const d=this._nodes.get(l);if(!d)throw new wt(`Graph.${s}:  could not find the "${l}" source node in the graph.`);if(!this._nodes.has(c))throw new wt(`Graph.${s}:  could not find the "${c}" target node in the graph.`);return XL(!0,i,this.multi,r,d,c,f)}throw new Ot(`Graph.${s}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)};const o="some"+t[0].toUpperCase()+t.slice(1,-1);n.prototype[o]=function(){const l=Array.prototype.slice.call(arguments),c=l.pop();return l.push((d,m,v,b,x,w,_)=>c(d,m,v,b,x,w,_)),!!this[s].apply(this,l)};const a="every"+t[0].toUpperCase()+t.slice(1,-1);n.prototype[a]=function(){const l=Array.prototype.slice.call(arguments),c=l.pop();return l.push((d,m,v,b,x,w,_)=>!c(d,m,v,b,x,w,_)),!this[s].apply(this,l)}}function Vhe(n,e){const{name:t,type:i,direction:r}=e,s=t.slice(0,-1)+"Entries";n.prototype[s]=function(o,a){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return fv();if(!arguments.length)return Phe(this,i);if(arguments.length===1){o=""+o;const l=this._nodes.get(o);if(!l)throw new wt(`Graph.${s}: could not find the "${o}" node in the graph.`);return Nhe(i,r,l)}if(arguments.length===2){o=""+o,a=""+a;const l=this._nodes.get(o);if(!l)throw new wt(`Graph.${s}:  could not find the "${o}" source node in the graph.`);if(!this._nodes.has(a))throw new wt(`Graph.${s}:  could not find the "${a}" target node in the graph.`);return khe(i,r,l,a)}throw new Ot(`Graph.${s}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function Ghe(n){Ahe.forEach(e=>{zhe(n,e),Fhe(n,e),Bhe(n,e),Vhe(n,e)})}const Hhe=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function _T(){this.A=null,this.B=null}_T.prototype.wrap=function(n){this.A===null?this.A=n:this.B===null&&(this.B=n)};_T.prototype.has=function(n){return this.A!==null&&n in this.A||this.B!==null&&n in this.B};function ib(n,e,t,i,r){for(const s in i){const o=i[s],a=o.source,l=o.target,c=a===t?l:a;if(e&&e.has(c.key))continue;const f=r(c.key,c.attributes);if(n&&f)return c.key}}function YL(n,e,t,i,r){if(e!=="mixed"){if(e==="undirected")return ib(n,null,i,i.undirected,r);if(typeof t=="string")return ib(n,null,i,i[t],r)}const s=new _T;let o;if(e!=="undirected"){if(t!=="out"){if(o=ib(n,null,i,i.in,r),n&&o)return o;s.wrap(i.in)}if(t!=="in"){if(o=ib(n,s,i,i.out,r),n&&o)return o;s.wrap(i.out)}}if(e!=="directed"&&(o=ib(n,s,i,i.undirected,r),n&&o))return o}function jhe(n,e,t){if(n!=="mixed"){if(n==="undirected")return Object.keys(t.undirected);if(typeof e=="string")return Object.keys(t[e])}const i=[];return YL(!1,n,e,t,function(r){i.push(r)}),i}function rb(n,e,t){const i=Object.keys(t),r=i.length;let s=0;return{[Symbol.iterator](){return this},next(){let o=null;do{if(s>=r)return n&&n.wrap(t),{done:!0};const a=t[i[s++]],l=a.source,c=a.target;if(o=l===e?c:l,n&&n.has(o.key)){o=null;continue}}while(o===null);return{done:!1,value:{neighbor:o.key,attributes:o.attributes}}}}}function Whe(n,e,t){if(n!=="mixed"){if(n==="undirected")return rb(null,t,t.undirected);if(typeof e=="string")return rb(null,t,t[e])}let i=fv();const r=new _T;return n!=="undirected"&&(e!=="out"&&(i=kf(i,rb(r,t,t.in))),e!=="in"&&(i=kf(i,rb(r,t,t.out)))),n!=="directed"&&(i=kf(i,rb(r,t,t.undirected))),i}function $he(n,e){const{name:t,type:i,direction:r}=e;n.prototype[t]=function(s){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return[];s=""+s;const o=this._nodes.get(s);if(typeof o>"u")throw new wt(`Graph.${t}: could not find the "${s}" node in the graph.`);return jhe(i==="mixed"?this.type:i,r,o)}}function qhe(n,e){const{name:t,type:i,direction:r}=e,s="forEach"+t[0].toUpperCase()+t.slice(1,-1);n.prototype[s]=function(c,f){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return;c=""+c;const d=this._nodes.get(c);if(typeof d>"u")throw new wt(`Graph.${s}: could not find the "${c}" node in the graph.`);YL(!1,i==="mixed"?this.type:i,r,d,f)};const o="map"+t[0].toUpperCase()+t.slice(1);n.prototype[o]=function(c,f){const d=[];return this[s](c,(m,v)=>{d.push(f(m,v))}),d};const a="filter"+t[0].toUpperCase()+t.slice(1);n.prototype[a]=function(c,f){const d=[];return this[s](c,(m,v)=>{f(m,v)&&d.push(m)}),d};const l="reduce"+t[0].toUpperCase()+t.slice(1);n.prototype[l]=function(c,f,d){if(arguments.length<3)throw new Ot(`Graph.${l}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let m=d;return this[s](c,(v,b)=>{m=f(m,v,b)}),m}}function Xhe(n,e){const{name:t,type:i,direction:r}=e,s=t[0].toUpperCase()+t.slice(1,-1),o="find"+s;n.prototype[o]=function(c,f){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return;c=""+c;const d=this._nodes.get(c);if(typeof d>"u")throw new wt(`Graph.${o}: could not find the "${c}" node in the graph.`);return YL(!0,i==="mixed"?this.type:i,r,d,f)};const a="some"+s;n.prototype[a]=function(c,f){return!!this[o](c,f)};const l="every"+s;n.prototype[l]=function(c,f){return!this[o](c,(m,v)=>!f(m,v))}}function Yhe(n,e){const{name:t,type:i,direction:r}=e,s=t.slice(0,-1)+"Entries";n.prototype[s]=function(o){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return fv();o=""+o;const a=this._nodes.get(o);if(typeof a>"u")throw new wt(`Graph.${s}: could not find the "${o}" node in the graph.`);return Whe(i==="mixed"?this.type:i,r,a)}}function Zhe(n){Hhe.forEach(e=>{$he(n,e),qhe(n,e),Xhe(n,e),Yhe(n,e)})}function aS(n,e,t,i,r){const s=i._nodes.values(),o=i.type;let a,l,c,f,d,m;for(;a=s.next(),a.done!==!0;){let v=!1;if(l=a.value,o!=="undirected"){f=l.out;for(c in f){d=f[c];do m=d.target,v=!0,r(l.key,m.key,l.attributes,m.attributes,d.key,d.attributes,d.undirected),d=d.next;while(d)}}if(o!=="directed"){f=l.undirected;for(c in f)if(!(e&&l.key>c)){d=f[c];do m=d.target,m.key!==c&&(m=d.source),v=!0,r(l.key,m.key,l.attributes,m.attributes,d.key,d.attributes,d.undirected),d=d.next;while(d)}}t&&!v&&r(l.key,null,l.attributes,null,null,null,null)}}function Khe(n,e){const t={key:n};return MG(e.attributes)||(t.attributes=es({},e.attributes)),t}function Qhe(n,e,t){const i={key:e,source:t.source.key,target:t.target.key};return MG(t.attributes)||(i.attributes=es({},t.attributes)),n==="mixed"&&t.undirected&&(i.undirected=!0),i}function Jhe(n){if(!Cs(n))throw new Ot('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in n))throw new Ot("Graph.import: serialized node is missing its key.");if("attributes"in n&&(!Cs(n.attributes)||n.attributes===null))throw new Ot("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function ede(n){if(!Cs(n))throw new Ot('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in n))throw new Ot("Graph.import: serialized edge is missing its source.");if(!("target"in n))throw new Ot("Graph.import: serialized edge is missing its target.");if("attributes"in n&&(!Cs(n.attributes)||n.attributes===null))throw new Ot("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in n&&typeof n.undirected!="boolean")throw new Ot("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}const tde=ihe(),nde=new Set(["directed","undirected","mixed"]),sz=new Set(["domain","_events","_eventsCount","_maxListeners"]),ide=[{name:n=>`${n}Edge`,generateKey:!0},{name:n=>`${n}DirectedEdge`,generateKey:!0,type:"directed"},{name:n=>`${n}UndirectedEdge`,generateKey:!0,type:"undirected"},{name:n=>`${n}EdgeWithKey`},{name:n=>`${n}DirectedEdgeWithKey`,type:"directed"},{name:n=>`${n}UndirectedEdgeWithKey`,type:"undirected"}],rde={allowSelfLoops:!0,multi:!1,type:"mixed"};function sde(n,e,t){if(t&&!Cs(t))throw new Ot(`Graph.addNode: invalid attributes. Expecting an object but got "${t}"`);if(e=""+e,t=t||{},n._nodes.has(e))throw new Yt(`Graph.addNode: the "${e}" node already exist in the graph.`);const i=new n.NodeDataClass(e,t);return n._nodes.set(e,i),n.emit("nodeAdded",{key:e,attributes:t}),i}function oz(n,e,t){const i=new n.NodeDataClass(e,t);return n._nodes.set(e,i),n.emit("nodeAdded",{key:e,attributes:t}),i}function PG(n,e,t,i,r,s,o,a){if(!i&&n.type==="undirected")throw new Yt(`Graph.${e}: you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead.`);if(i&&n.type==="directed")throw new Yt(`Graph.${e}: you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead.`);if(a&&!Cs(a))throw new Ot(`Graph.${e}: invalid attributes. Expecting an object but got "${a}"`);if(s=""+s,o=""+o,a=a||{},!n.allowSelfLoops&&s===o)throw new Yt(`Graph.${e}: source & target are the same ("${s}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);const l=n._nodes.get(s),c=n._nodes.get(o);if(!l)throw new wt(`Graph.${e}: source node "${s}" not found.`);if(!c)throw new wt(`Graph.${e}: target node "${o}" not found.`);const f={key:null,undirected:i,source:s,target:o,attributes:a};if(t)r=n._edgeKeyGenerator();else if(r=""+r,n._edges.has(r))throw new Yt(`Graph.${e}: the "${r}" edge already exists in the graph.`);if(!n.multi&&(i?typeof l.undirected[o]<"u":typeof l.out[o]<"u"))throw new Yt(`Graph.${e}: an edge linking "${s}" to "${o}" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option.`);const d=new hv(i,r,l,c,a);n._edges.set(r,d);const m=s===o;return i?(l.undirectedDegree++,c.undirectedDegree++,m&&(l.undirectedLoops++,n._undirectedSelfLoopCount++)):(l.outDegree++,c.inDegree++,m&&(l.directedLoops++,n._directedSelfLoopCount++)),n.multi?d.attachMulti():d.attach(),i?n._undirectedSize++:n._directedSize++,f.key=r,n.emit("edgeAdded",f),r}function ode(n,e,t,i,r,s,o,a,l){if(!i&&n.type==="undirected")throw new Yt(`Graph.${e}: you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead.`);if(i&&n.type==="directed")throw new Yt(`Graph.${e}: you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead.`);if(a){if(l){if(typeof a!="function")throw new Ot(`Graph.${e}: invalid updater function. Expecting a function but got "${a}"`)}else if(!Cs(a))throw new Ot(`Graph.${e}: invalid attributes. Expecting an object but got "${a}"`)}s=""+s,o=""+o;let c;if(l&&(c=a,a=void 0),!n.allowSelfLoops&&s===o)throw new Yt(`Graph.${e}: source & target are the same ("${s}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);let f=n._nodes.get(s),d=n._nodes.get(o),m,v;if(!t&&(m=n._edges.get(r),m)){if((m.source.key!==s||m.target.key!==o)&&(!i||m.source.key!==o||m.target.key!==s))throw new Yt(`Graph.${e}: inconsistency detected when attempting to merge the "${r}" edge with "${s}" source & "${o}" target vs. ("${m.source.key}", "${m.target.key}").`);v=m}if(!v&&!n.multi&&f&&(v=i?f.undirected[o]:f.out[o]),v){const A=[v.key,!1,!1,!1];if(l?!c:!a)return A;if(l){const T=v.attributes;v.attributes=c(T),n.emit("edgeAttributesUpdated",{type:"replace",key:v.key,attributes:v.attributes})}else es(v.attributes,a),n.emit("edgeAttributesUpdated",{type:"merge",key:v.key,attributes:v.attributes,data:a});return A}a=a||{},l&&c&&(a=c(a));const b={key:null,undirected:i,source:s,target:o,attributes:a};if(t)r=n._edgeKeyGenerator();else if(r=""+r,n._edges.has(r))throw new Yt(`Graph.${e}: the "${r}" edge already exists in the graph.`);let x=!1,w=!1;f||(f=oz(n,s,{}),x=!0,s===o&&(d=f,w=!0)),d||(d=oz(n,o,{}),w=!0),m=new hv(i,r,f,d,a),n._edges.set(r,m);const _=s===o;return i?(f.undirectedDegree++,d.undirectedDegree++,_&&(f.undirectedLoops++,n._undirectedSelfLoopCount++)):(f.outDegree++,d.inDegree++,_&&(f.directedLoops++,n._directedSelfLoopCount++)),n.multi?m.attachMulti():m.attach(),i?n._undirectedSize++:n._directedSize++,b.key=r,n.emit("edgeAdded",b),[r,!0,x,w]}function Qg(n,e){n._edges.delete(e.key);const{source:t,target:i,attributes:r}=e,s=e.undirected,o=t===i;s?(t.undirectedDegree--,i.undirectedDegree--,o&&(t.undirectedLoops--,n._undirectedSelfLoopCount--)):(t.outDegree--,i.inDegree--,o&&(t.directedLoops--,n._directedSelfLoopCount--)),n.multi?e.detachMulti():e.detach(),s?n._undirectedSize--:n._directedSize--,n.emit("edgeDropped",{key:e.key,attributes:r,source:t.key,target:i.key,undirected:s})}class wi extends the.EventEmitter{constructor(e){if(super(),e=es({},rde,e),typeof e.multi!="boolean")throw new Ot(`Graph.constructor: invalid 'multi' option. Expecting a boolean but got "${e.multi}".`);if(!nde.has(e.type))throw new Ot(`Graph.constructor: invalid 'type' option. Should be one of "mixed", "directed" or "undirected" but got "${e.type}".`);if(typeof e.allowSelfLoops!="boolean")throw new Ot(`Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got "${e.allowSelfLoops}".`);const t=e.type==="mixed"?TG:e.type==="directed"?AG:CG;dl(this,"NodeDataClass",t);const i="geid_"+tde()+"_";let r=0;const s=()=>{let o;do o=i+r++;while(this._edges.has(o));return o};dl(this,"_attributes",{}),dl(this,"_nodes",new Map),dl(this,"_edges",new Map),dl(this,"_directedSize",0),dl(this,"_undirectedSize",0),dl(this,"_directedSelfLoopCount",0),dl(this,"_undirectedSelfLoopCount",0),dl(this,"_edgeKeyGenerator",s),dl(this,"_options",e),sz.forEach(o=>dl(this,o,this[o])),Ql(this,"order",()=>this._nodes.size),Ql(this,"size",()=>this._edges.size),Ql(this,"directedSize",()=>this._directedSize),Ql(this,"undirectedSize",()=>this._undirectedSize),Ql(this,"selfLoopCount",()=>this._directedSelfLoopCount+this._undirectedSelfLoopCount),Ql(this,"directedSelfLoopCount",()=>this._directedSelfLoopCount),Ql(this,"undirectedSelfLoopCount",()=>this._undirectedSelfLoopCount),Ql(this,"multi",this._options.multi),Ql(this,"type",this._options.type),Ql(this,"allowSelfLoops",this._options.allowSelfLoops),Ql(this,"implementation",()=>"graphology")}_resetInstanceCounters(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0}hasNode(e){return this._nodes.has(""+e)}hasDirectedEdge(e,t){if(this.type==="undirected")return!1;if(arguments.length===1){const i=""+e,r=this._edges.get(i);return!!r&&!r.undirected}else if(arguments.length===2){e=""+e,t=""+t;const i=this._nodes.get(e);return i?i.out.hasOwnProperty(t):!1}throw new Ot(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasUndirectedEdge(e,t){if(this.type==="directed")return!1;if(arguments.length===1){const i=""+e,r=this._edges.get(i);return!!r&&r.undirected}else if(arguments.length===2){e=""+e,t=""+t;const i=this._nodes.get(e);return i?i.undirected.hasOwnProperty(t):!1}throw new Ot(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasEdge(e,t){if(arguments.length===1){const i=""+e;return this._edges.has(i)}else if(arguments.length===2){e=""+e,t=""+t;const i=this._nodes.get(e);return i?typeof i.out<"u"&&i.out.hasOwnProperty(t)||typeof i.undirected<"u"&&i.undirected.hasOwnProperty(t):!1}throw new Ot(`Graph.hasEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}directedEdge(e,t){if(this.type==="undirected")return;if(e=""+e,t=""+t,this.multi)throw new Yt("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");const i=this._nodes.get(e);if(!i)throw new wt(`Graph.directedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(t))throw new wt(`Graph.directedEdge: could not find the "${t}" target node in the graph.`);const r=i.out&&i.out[t]||void 0;if(r)return r.key}undirectedEdge(e,t){if(this.type==="directed")return;if(e=""+e,t=""+t,this.multi)throw new Yt("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");const i=this._nodes.get(e);if(!i)throw new wt(`Graph.undirectedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(t))throw new wt(`Graph.undirectedEdge: could not find the "${t}" target node in the graph.`);const r=i.undirected&&i.undirected[t]||void 0;if(r)return r.key}edge(e,t){if(this.multi)throw new Yt("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");e=""+e,t=""+t;const i=this._nodes.get(e);if(!i)throw new wt(`Graph.edge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(t))throw new wt(`Graph.edge: could not find the "${t}" target node in the graph.`);const r=i.out&&i.out[t]||i.undirected&&i.undirected[t]||void 0;if(r)return r.key}areDirectedNeighbors(e,t){e=""+e,t=""+t;const i=this._nodes.get(e);if(!i)throw new wt(`Graph.areDirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:t in i.in||t in i.out}areOutNeighbors(e,t){e=""+e,t=""+t;const i=this._nodes.get(e);if(!i)throw new wt(`Graph.areOutNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:t in i.out}areInNeighbors(e,t){e=""+e,t=""+t;const i=this._nodes.get(e);if(!i)throw new wt(`Graph.areInNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:t in i.in}areUndirectedNeighbors(e,t){e=""+e,t=""+t;const i=this._nodes.get(e);if(!i)throw new wt(`Graph.areUndirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="directed"?!1:t in i.undirected}areNeighbors(e,t){e=""+e,t=""+t;const i=this._nodes.get(e);if(!i)throw new wt(`Graph.areNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&(t in i.in||t in i.out)||this.type!=="directed"&&t in i.undirected}areInboundNeighbors(e,t){e=""+e,t=""+t;const i=this._nodes.get(e);if(!i)throw new wt(`Graph.areInboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&t in i.in||this.type!=="directed"&&t in i.undirected}areOutboundNeighbors(e,t){e=""+e,t=""+t;const i=this._nodes.get(e);if(!i)throw new wt(`Graph.areOutboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&t in i.out||this.type!=="directed"&&t in i.undirected}inDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new wt(`Graph.inDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.inDegree}outDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new wt(`Graph.outDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.outDegree}directedDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new wt(`Graph.directedDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.inDegree+t.outDegree}undirectedDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new wt(`Graph.undirectedDegree: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:t.undirectedDegree}inboundDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new wt(`Graph.inboundDegree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=t.undirectedDegree),this.type!=="undirected"&&(i+=t.inDegree),i}outboundDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new wt(`Graph.outboundDegree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=t.undirectedDegree),this.type!=="undirected"&&(i+=t.outDegree),i}degree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new wt(`Graph.degree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=t.undirectedDegree),this.type!=="undirected"&&(i+=t.inDegree+t.outDegree),i}inDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new wt(`Graph.inDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.inDegree-t.directedLoops}outDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new wt(`Graph.outDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.outDegree-t.directedLoops}directedDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new wt(`Graph.directedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.inDegree+t.outDegree-t.directedLoops*2}undirectedDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new wt(`Graph.undirectedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:t.undirectedDegree-t.undirectedLoops*2}inboundDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new wt(`Graph.inboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=t.undirectedDegree,r+=t.undirectedLoops*2),this.type!=="undirected"&&(i+=t.inDegree,r+=t.directedLoops),i-r}outboundDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new wt(`Graph.outboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=t.undirectedDegree,r+=t.undirectedLoops*2),this.type!=="undirected"&&(i+=t.outDegree,r+=t.directedLoops),i-r}degreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new wt(`Graph.degreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=t.undirectedDegree,r+=t.undirectedLoops*2),this.type!=="undirected"&&(i+=t.inDegree+t.outDegree,r+=t.directedLoops*2),i-r}source(e){e=""+e;const t=this._edges.get(e);if(!t)throw new wt(`Graph.source: could not find the "${e}" edge in the graph.`);return t.source.key}target(e){e=""+e;const t=this._edges.get(e);if(!t)throw new wt(`Graph.target: could not find the "${e}" edge in the graph.`);return t.target.key}extremities(e){e=""+e;const t=this._edges.get(e);if(!t)throw new wt(`Graph.extremities: could not find the "${e}" edge in the graph.`);return[t.source.key,t.target.key]}opposite(e,t){e=""+e,t=""+t;const i=this._edges.get(t);if(!i)throw new wt(`Graph.opposite: could not find the "${t}" edge in the graph.`);const r=i.source.key,s=i.target.key;if(e===r)return s;if(e===s)return r;throw new wt(`Graph.opposite: the "${e}" node is not attached to the "${t}" edge (${r}, ${s}).`)}hasExtremity(e,t){e=""+e,t=""+t;const i=this._edges.get(e);if(!i)throw new wt(`Graph.hasExtremity: could not find the "${e}" edge in the graph.`);return i.source.key===t||i.target.key===t}isUndirected(e){e=""+e;const t=this._edges.get(e);if(!t)throw new wt(`Graph.isUndirected: could not find the "${e}" edge in the graph.`);return t.undirected}isDirected(e){e=""+e;const t=this._edges.get(e);if(!t)throw new wt(`Graph.isDirected: could not find the "${e}" edge in the graph.`);return!t.undirected}isSelfLoop(e){e=""+e;const t=this._edges.get(e);if(!t)throw new wt(`Graph.isSelfLoop: could not find the "${e}" edge in the graph.`);return t.source===t.target}addNode(e,t){return sde(this,e,t).key}mergeNode(e,t){if(t&&!Cs(t))throw new Ot(`Graph.mergeNode: invalid attributes. Expecting an object but got "${t}"`);e=""+e,t=t||{};let i=this._nodes.get(e);return i?(t&&(es(i.attributes,t),this.emit("nodeAttributesUpdated",{type:"merge",key:e,attributes:i.attributes,data:t})),[e,!1]):(i=new this.NodeDataClass(e,t),this._nodes.set(e,i),this.emit("nodeAdded",{key:e,attributes:t}),[e,!0])}updateNode(e,t){if(t&&typeof t!="function")throw new Ot(`Graph.updateNode: invalid updater function. Expecting a function but got "${t}"`);e=""+e;let i=this._nodes.get(e);if(i){if(t){const s=i.attributes;i.attributes=t(s),this.emit("nodeAttributesUpdated",{type:"replace",key:e,attributes:i.attributes})}return[e,!1]}const r=t?t({}):{};return i=new this.NodeDataClass(e,r),this._nodes.set(e,i),this.emit("nodeAdded",{key:e,attributes:r}),[e,!0]}dropNode(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new wt(`Graph.dropNode: could not find the "${e}" node in the graph.`);let i;if(this.type!=="undirected"){for(const r in t.out){i=t.out[r];do Qg(this,i),i=i.next;while(i)}for(const r in t.in){i=t.in[r];do Qg(this,i),i=i.next;while(i)}}if(this.type!=="directed")for(const r in t.undirected){i=t.undirected[r];do Qg(this,i),i=i.next;while(i)}this._nodes.delete(e),this.emit("nodeDropped",{key:e,attributes:t.attributes})}dropEdge(e){let t;if(arguments.length>1){const i=""+arguments[0],r=""+arguments[1];if(t=El(this,i,r,this.type),!t)throw new wt(`Graph.dropEdge: could not find the "${i}" -> "${r}" edge in the graph.`)}else if(e=""+e,t=this._edges.get(e),!t)throw new wt(`Graph.dropEdge: could not find the "${e}" edge in the graph.`);return Qg(this,t),this}dropDirectedEdge(e,t){if(arguments.length<2)throw new Yt("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new Yt("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");e=""+e,t=""+t;const i=El(this,e,t,"directed");if(!i)throw new wt(`Graph.dropDirectedEdge: could not find a "${e}" -> "${t}" edge in the graph.`);return Qg(this,i),this}dropUndirectedEdge(e,t){if(arguments.length<2)throw new Yt("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new Yt("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");const i=El(this,e,t,"undirected");if(!i)throw new wt(`Graph.dropUndirectedEdge: could not find a "${e}" -> "${t}" edge in the graph.`);return Qg(this,i),this}clear(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")}clearEdges(){const e=this._nodes.values();let t;for(;t=e.next(),t.done!==!0;)t.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")}getAttribute(e){return this._attributes[e]}getAttributes(){return this._attributes}hasAttribute(e){return this._attributes.hasOwnProperty(e)}setAttribute(e,t){return this._attributes[e]=t,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}updateAttribute(e,t){if(typeof t!="function")throw new Ot("Graph.updateAttribute: updater should be a function.");const i=this._attributes[e];return this._attributes[e]=t(i),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}removeAttribute(e){return delete this._attributes[e],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:e}),this}replaceAttributes(e){if(!Cs(e))throw new Ot("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=e,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this}mergeAttributes(e){if(!Cs(e))throw new Ot("Graph.mergeAttributes: provided attributes are not a plain object.");return es(this._attributes,e),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:e}),this}updateAttributes(e){if(typeof e!="function")throw new Ot("Graph.updateAttributes: provided updater is not a function.");return this._attributes=e(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this}updateEachNodeAttributes(e,t){if(typeof e!="function")throw new Ot("Graph.updateEachNodeAttributes: expecting an updater function.");if(t&&!rz(t))throw new Ot("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const i=this._nodes.values();let r,s;for(;r=i.next(),r.done!==!0;)s=r.value,s.attributes=e(s.key,s.attributes);this.emit("eachNodeAttributesUpdated",{hints:t||null})}updateEachEdgeAttributes(e,t){if(typeof e!="function")throw new Ot("Graph.updateEachEdgeAttributes: expecting an updater function.");if(t&&!rz(t))throw new Ot("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const i=this._edges.values();let r,s,o,a;for(;r=i.next(),r.done!==!0;)s=r.value,o=s.source,a=s.target,s.attributes=e(s.key,s.attributes,o.key,a.key,o.attributes,a.attributes,s.undirected);this.emit("eachEdgeAttributesUpdated",{hints:t||null})}forEachAdjacencyEntry(e){if(typeof e!="function")throw new Ot("Graph.forEachAdjacencyEntry: expecting a callback.");aS(!1,!1,!1,this,e)}forEachAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new Ot("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");aS(!1,!1,!0,this,e)}forEachAssymetricAdjacencyEntry(e){if(typeof e!="function")throw new Ot("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");aS(!1,!0,!1,this,e)}forEachAssymetricAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new Ot("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");aS(!1,!0,!0,this,e)}nodes(){return Array.from(this._nodes.keys())}forEachNode(e){if(typeof e!="function")throw new Ot("Graph.forEachNode: expecting a callback.");const t=this._nodes.values();let i,r;for(;i=t.next(),i.done!==!0;)r=i.value,e(r.key,r.attributes)}findNode(e){if(typeof e!="function")throw new Ot("Graph.findNode: expecting a callback.");const t=this._nodes.values();let i,r;for(;i=t.next(),i.done!==!0;)if(r=i.value,e(r.key,r.attributes))return r.key}mapNodes(e){if(typeof e!="function")throw new Ot("Graph.mapNode: expecting a callback.");const t=this._nodes.values();let i,r;const s=new Array(this.order);let o=0;for(;i=t.next(),i.done!==!0;)r=i.value,s[o++]=e(r.key,r.attributes);return s}someNode(e){if(typeof e!="function")throw new Ot("Graph.someNode: expecting a callback.");const t=this._nodes.values();let i,r;for(;i=t.next(),i.done!==!0;)if(r=i.value,e(r.key,r.attributes))return!0;return!1}everyNode(e){if(typeof e!="function")throw new Ot("Graph.everyNode: expecting a callback.");const t=this._nodes.values();let i,r;for(;i=t.next(),i.done!==!0;)if(r=i.value,!e(r.key,r.attributes))return!1;return!0}filterNodes(e){if(typeof e!="function")throw new Ot("Graph.filterNodes: expecting a callback.");const t=this._nodes.values();let i,r;const s=[];for(;i=t.next(),i.done!==!0;)r=i.value,e(r.key,r.attributes)&&s.push(r.key);return s}reduceNodes(e,t){if(typeof e!="function")throw new Ot("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new Ot("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");let i=t;const r=this._nodes.values();let s,o;for(;s=r.next(),s.done!==!0;)o=s.value,i=e(i,o.key,o.attributes);return i}nodeEntries(){const e=this._nodes.values();return{[Symbol.iterator](){return this},next(){const t=e.next();if(t.done)return t;const i=t.value;return{value:{node:i.key,attributes:i.attributes},done:!1}}}}export(){const e=new Array(this._nodes.size);let t=0;this._nodes.forEach((r,s)=>{e[t++]=Khe(s,r)});const i=new Array(this._edges.size);return t=0,this._edges.forEach((r,s)=>{i[t++]=Qhe(this.type,s,r)}),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:e,edges:i}}import(e,t=!1){if(e instanceof wi)return e.forEachNode((l,c)=>{t?this.mergeNode(l,c):this.addNode(l,c)}),e.forEachEdge((l,c,f,d,m,v,b)=>{t?b?this.mergeUndirectedEdgeWithKey(l,f,d,c):this.mergeDirectedEdgeWithKey(l,f,d,c):b?this.addUndirectedEdgeWithKey(l,f,d,c):this.addDirectedEdgeWithKey(l,f,d,c)}),this;if(!Cs(e))throw new Ot("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(e.attributes){if(!Cs(e.attributes))throw new Ot("Graph.import: invalid attributes. Expecting a plain object.");t?this.mergeAttributes(e.attributes):this.replaceAttributes(e.attributes)}let i,r,s,o,a;if(e.nodes){if(s=e.nodes,!Array.isArray(s))throw new Ot("Graph.import: invalid nodes. Expecting an array.");for(i=0,r=s.length;i<r;i++){o=s[i],Jhe(o);const{key:l,attributes:c}=o;t?this.mergeNode(l,c):this.addNode(l,c)}}if(e.edges){let l=!1;if(this.type==="undirected"&&(l=!0),s=e.edges,!Array.isArray(s))throw new Ot("Graph.import: invalid edges. Expecting an array.");for(i=0,r=s.length;i<r;i++){a=s[i],ede(a);const{source:c,target:f,attributes:d,undirected:m=l}=a;let v;"key"in a?(v=t?m?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:m?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey,v.call(this,a.key,c,f,d)):(v=t?m?this.mergeUndirectedEdge:this.mergeDirectedEdge:m?this.addUndirectedEdge:this.addDirectedEdge,v.call(this,c,f,d))}}return this}nullCopy(e){const t=new wi(es({},this._options,e));return t.replaceAttributes(es({},this.getAttributes())),t}emptyCopy(e){const t=this.nullCopy(e);return this._nodes.forEach((i,r)=>{const s=es({},i.attributes);i=new t.NodeDataClass(r,s),t._nodes.set(r,i)}),t}copy(e){if(e=e||{},typeof e.type=="string"&&e.type!==this.type&&e.type!=="mixed")throw new Yt(`Graph.copy: cannot create an incompatible copy from "${this.type}" type to "${e.type}" because this would mean losing information about the current graph.`);if(typeof e.multi=="boolean"&&e.multi!==this.multi&&e.multi!==!0)throw new Yt("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if(typeof e.allowSelfLoops=="boolean"&&e.allowSelfLoops!==this.allowSelfLoops&&e.allowSelfLoops!==!0)throw new Yt("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");const t=this.emptyCopy(e),i=this._edges.values();let r,s;for(;r=i.next(),r.done!==!0;)s=r.value,PG(t,"copy",!1,s.undirected,s.key,s.source.key,s.target.key,es({},s.attributes));return t}toJSON(){return this.export()}toString(){return"[object Graph]"}inspect(){const e={};this._nodes.forEach((s,o)=>{e[o]=s.attributes});const t={},i={};this._edges.forEach((s,o)=>{const a=s.undirected?"--":"->";let l="",c=s.source.key,f=s.target.key,d;s.undirected&&c>f&&(d=c,c=f,f=d);const m=`(${c})${a}(${f})`;o.startsWith("geid_")?this.multi&&(typeof i[m]>"u"?i[m]=0:i[m]++,l+=`${i[m]}. `):l+=`[${o}]: `,l+=m,t[l]=s.attributes});const r={};for(const s in this)this.hasOwnProperty(s)&&!sz.has(s)&&typeof this[s]!="function"&&typeof s!="symbol"&&(r[s]=this[s]);return r.attributes=this._attributes,r.nodes=e,r.edges=t,dl(r,"constructor",this.constructor),r}}typeof Symbol<"u"&&(wi.prototype[Symbol.for("nodejs.util.inspect.custom")]=wi.prototype.inspect);ide.forEach(n=>{["add","merge","update"].forEach(e=>{const t=n.name(e),i=e==="add"?PG:ode;n.generateKey?wi.prototype[t]=function(r,s,o){return i(this,t,!0,(n.type||this.type)==="undirected",null,r,s,o,e==="update")}:wi.prototype[t]=function(r,s,o,a){return i(this,t,!1,(n.type||this.type)==="undirected",r,s,o,a,e==="update")}})});mhe(wi);The(wi);Ghe(wi);Zhe(wi);class IG extends wi{constructor(e){const t=es({type:"directed"},e);if("multi"in t&&t.multi!==!1)throw new Ot("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(t.type!=="directed")throw new Ot('DirectedGraph.from: inconsistent "'+t.type+'" type in given options!');super(t)}}class NG extends wi{constructor(e){const t=es({type:"undirected"},e);if("multi"in t&&t.multi!==!1)throw new Ot("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(t.type!=="undirected")throw new Ot('UndirectedGraph.from: inconsistent "'+t.type+'" type in given options!');super(t)}}class UG extends wi{constructor(e){const t=es({multi:!0},e);if("multi"in t&&t.multi!==!0)throw new Ot("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");super(t)}}class kG extends wi{constructor(e){const t=es({type:"directed",multi:!0},e);if("multi"in t&&t.multi!==!0)throw new Ot("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(t.type!=="directed")throw new Ot('MultiDirectedGraph.from: inconsistent "'+t.type+'" type in given options!');super(t)}}class zG extends wi{constructor(e){const t=es({type:"undirected",multi:!0},e);if("multi"in t&&t.multi!==!0)throw new Ot("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(t.type!=="undirected")throw new Ot('MultiUndirectedGraph.from: inconsistent "'+t.type+'" type in given options!');super(t)}}function dv(n){n.from=function(e,t){const i=es({},e.options,t),r=new n(i);return r.import(e),r}}dv(wi);dv(IG);dv(NG);dv(UG);dv(kG);dv(zG);wi.Graph=wi;wi.DirectedGraph=IG;wi.UndirectedGraph=NG;wi.MultiGraph=UG;wi.MultiDirectedGraph=kG;wi.MultiUndirectedGraph=zG;wi.InvalidArgumentsGraphError=Ot;wi.NotFoundGraphError=wt;wi.UsageGraphError=Yt;const ade=n=>n;function FG(n,e=ade){const t=eo.useSyncExternalStore(n.subscribe,eo.useCallback(()=>e(n.getState()),[n,e]),eo.useCallback(()=>e(n.getInitialState()),[n,e]));return eo.useDebugValue(t),t}const az=n=>{const e=iG(n),t=i=>FG(e,i);return Object.assign(t,e),t},lde=(n=>n?az(n):az),lz=n=>Symbol.iterator in n,cz=n=>"entries"in n,uz=(n,e)=>{const t=n instanceof Map?n:new Map(n.entries()),i=e instanceof Map?e:new Map(e.entries());if(t.size!==i.size)return!1;for(const[r,s]of t)if(!i.has(r)||!Object.is(s,i.get(r)))return!1;return!0},cde=(n,e)=>{const t=n[Symbol.iterator](),i=e[Symbol.iterator]();let r=t.next(),s=i.next();for(;!r.done&&!s.done;){if(!Object.is(r.value,s.value))return!1;r=t.next(),s=i.next()}return!!r.done&&!!s.done};function ude(n,e){return Object.is(n,e)?!0:typeof n!="object"||n===null||typeof e!="object"||e===null||Object.getPrototypeOf(n)!==Object.getPrototypeOf(e)?!1:lz(n)&&lz(e)?cz(n)&&cz(e)?uz(n,e):cde(n,e):uz({entries:()=>Object.entries(n)},{entries:()=>Object.entries(e)})}function fde(n){const e=eo.useRef(void 0);return t=>{const i=n(t);return ude(e.current,i)?e.current:e.current=i}}const Db=(n,e)=>{const t=n[0].index!==null,i=new Set(Object.keys(n[0].attributes)),r=new Set(Object.keys(n[0].morphAttributes)),s={},o={},a=n[0].morphTargetsRelative,l=new hn;let c=0;if(n.forEach((f,d)=>{let m=0;if(t!==(f.index!==null))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+d+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(let v in f.attributes){if(!i.has(v))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+d+'. All geometries must have compatible attributes; make sure "'+v+'" attribute exists among all geometries, or in none of them.'),null;s[v]===void 0&&(s[v]=[]),s[v].push(f.attributes[v]),m++}if(m!==i.size)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+d+". Make sure all geometries have the same number of attributes."),null;if(a!==f.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+d+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(let v in f.morphAttributes){if(!r.has(v))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+d+".  .morphAttributes must be consistent throughout all geometries."),null;o[v]===void 0&&(o[v]=[]),o[v].push(f.morphAttributes[v])}if(l.userData.mergedUserData=l.userData.mergedUserData||[],l.userData.mergedUserData.push(f.userData),e){let v;if(f.index)v=f.index.count;else if(f.attributes.position!==void 0)v=f.attributes.position.count;else return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+d+". The geometry must have either an index or a position attribute"),null;l.addGroup(c,v,d),c+=v}}),t){let f=0;const d=[];n.forEach(m=>{const v=m.index;for(let b=0;b<v.count;++b)d.push(v.getX(b)+f);f+=m.attributes.position.count}),l.setIndex(d)}for(let f in s){const d=fz(s[f]);if(!d)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+f+" attribute."),null;l.setAttribute(f,d)}for(let f in o){const d=o[f][0].length;if(d===0)break;l.morphAttributes=l.morphAttributes||{},l.morphAttributes[f]=[];for(let m=0;m<d;++m){const v=[];for(let x=0;x<o[f].length;++x)v.push(o[f][x][m]);const b=fz(v);if(!b)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+f+" morphAttribute."),null;l.morphAttributes[f].push(b)}}return l},fz=n=>{let e,t,i,r=0;if(n.forEach(s=>{if(e===void 0&&(e=s.array.constructor),e!==s.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(t===void 0&&(t=s.itemSize),t!==s.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(i===void 0&&(i=s.normalized),i!==s.normalized)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;r+=s.array.length}),e&&t){const s=new e(r);let o=0;return n.forEach(a=>{s.set(a.array,o),o+=a.array.length}),new li(s,t,i)}};function hde(n,e=Math.PI/3){const t=Math.cos(e),i=(1+1e-10)*100,r=[new de,new de,new de],s=new de,o=new de,a=new de,l=new de;function c(x){const w=~~(x.x*i),_=~~(x.y*i),A=~~(x.z*i);return`${w},${_},${A}`}const f=n.index?n.toNonIndexed():n,d=f.attributes.position,m={};for(let x=0,w=d.count/3;x<w;x++){const _=3*x,A=r[0].fromBufferAttribute(d,_+0),T=r[1].fromBufferAttribute(d,_+1),E=r[2].fromBufferAttribute(d,_+2);s.subVectors(E,T),o.subVectors(A,T);const C=new de().crossVectors(s,o).normalize();for(let R=0;R<3;R++){const O=r[R],I=c(O);I in m||(m[I]=[]),m[I].push(C)}}const v=new Float32Array(d.count*3),b=new li(v,3,!1);for(let x=0,w=d.count/3;x<w;x++){const _=3*x,A=r[0].fromBufferAttribute(d,_+0),T=r[1].fromBufferAttribute(d,_+1),E=r[2].fromBufferAttribute(d,_+2);s.subVectors(E,T),o.subVectors(A,T),a.crossVectors(s,o).normalize();for(let C=0;C<3;C++){const R=r[C],O=c(R),I=m[O];l.set(0,0,0);for(let L=0,N=I.length;L<N;L++){const V=I[L];a.dot(V)>t&&l.add(V)}l.normalize(),b.setXYZ(_+C,l.x,l.y,l.z)}}return f.setAttribute("normal",b),f}const SR=new mm,ER=new de,Jg=new de,Jl=new de,yf=new de,tu=new de,bf=new de,_f=new de,sb=new de,ob=new de,ab=new de,lS=new de,lb=new de,cb=new de,ub=new de;class hz{constructor(e,t,i){this.camera=e,this.scene=t,this.startPoint=new de,this.endPoint=new de,this.collection=[],this.deep=i||Number.MAX_VALUE}select(e,t){return this.startPoint=e||this.startPoint,this.endPoint=t||this.endPoint,this.collection=[],this.updateFrustum(this.startPoint,this.endPoint),this.searchChildInFrustum(SR,this.scene),this.collection}updateFrustum(e,t){if(e=e||this.startPoint,t=t||this.endPoint,e.x===t.x&&(t.x+=Number.EPSILON),e.y===t.y&&(t.y+=Number.EPSILON),this.camera.updateProjectionMatrix(),this.camera.updateMatrixWorld(),this.camera.isPerspectiveCamera){Jg.copy(e),Jg.x=Math.min(e.x,t.x),Jg.y=Math.max(e.y,t.y),t.x=Math.max(e.x,t.x),t.y=Math.min(e.y,t.y),Jl.setFromMatrixPosition(this.camera.matrixWorld),yf.copy(Jg),tu.set(t.x,Jg.y,0),bf.copy(t),_f.set(Jg.x,t.y,0),yf.unproject(this.camera),tu.unproject(this.camera),bf.unproject(this.camera),_f.unproject(this.camera),lb.copy(yf).sub(Jl),cb.copy(tu).sub(Jl),ub.copy(bf).sub(Jl),lb.normalize(),cb.normalize(),ub.normalize(),lb.multiplyScalar(this.deep),cb.multiplyScalar(this.deep),ub.multiplyScalar(this.deep),lb.add(Jl),cb.add(Jl),ub.add(Jl);var i=SR.planes;i[0].setFromCoplanarPoints(Jl,yf,tu),i[1].setFromCoplanarPoints(Jl,tu,bf),i[2].setFromCoplanarPoints(bf,_f,Jl),i[3].setFromCoplanarPoints(_f,yf,Jl),i[4].setFromCoplanarPoints(tu,bf,_f),i[5].setFromCoplanarPoints(ub,cb,lb),i[5].normal.multiplyScalar(-1)}else if(this.camera.isOrthographicCamera){const r=Math.min(e.x,t.x),s=Math.max(e.y,t.y),o=Math.max(e.x,t.x),a=Math.min(e.y,t.y);yf.set(r,s,-1),tu.set(o,s,-1),bf.set(o,a,-1),_f.set(r,a,-1),sb.set(r,s,1),ob.set(o,s,1),ab.set(o,a,1),lS.set(r,a,1),yf.unproject(this.camera),tu.unproject(this.camera),bf.unproject(this.camera),_f.unproject(this.camera),sb.unproject(this.camera),ob.unproject(this.camera),ab.unproject(this.camera),lS.unproject(this.camera);var i=SR.planes;i[0].setFromCoplanarPoints(yf,sb,ob),i[1].setFromCoplanarPoints(tu,ob,ab),i[2].setFromCoplanarPoints(ab,lS,_f),i[3].setFromCoplanarPoints(lS,sb,yf),i[4].setFromCoplanarPoints(tu,bf,_f),i[5].setFromCoplanarPoints(ab,ob,sb),i[5].normal.multiplyScalar(-1)}else console.error("THREE.SelectionBox: Unsupported camera type.")}searchChildInFrustum(e,t){if((t.isMesh||t.isLine||t.isPoints)&&t.material!==void 0&&(t.geometry.boundingSphere===null&&t.geometry.computeBoundingSphere(),ER.copy(t.geometry.boundingSphere.center),ER.applyMatrix4(t.matrixWorld),e.containsPoint(ER)&&this.collection.push(t)),t.children.length>0)for(let i=0;i<t.children.length;i++)this.searchChildInFrustum(e,t.children[i])}}var fb={},MR,dz;function Qf(){return dz||(dz=1,MR=function(e){return e!==null&&typeof e=="object"&&typeof e.addUndirectedEdgeWithKey=="function"&&typeof e.dropNode=="function"&&typeof e.multi=="boolean"}),MR}var pz;function dde(){if(pz)return fb;pz=1;var n=Qf();function e(s,o,a,l){var c=o+"Centrality";if(!n(a))throw new Error("graphology-centrality/"+c+": the given graph is not a valid graphology instance.");if(o!=="degree"&&a.type==="undirected")throw new Error("graphology-centrality/"+c+": cannot compute "+o+" centrality on an undirected graph.");l=l||{};var f=l.nodeCentralityAttribute||c,d=a.order-1,m=a[o].bind(a);if(s){a.updateEachNodeAttributes(function(b,x){return x[f]=m(b)/d,x},{attributes:[f]});return}var v={};return a.forEachNode(function(b){v[b]=m(b)/d}),v}var t=e.bind(null,!1,"degree"),i=e.bind(null,!1,"inDegree"),r=e.bind(null,!1,"outDegree");return t.assign=e.bind(null,!0,"degree"),i.assign=e.bind(null,!0,"inDegree"),r.assign=e.bind(null,!0,"outDegree"),fb.degreeCentrality=t,fb.inDegreeCentrality=i,fb.outDegreeCentrality=r,fb}var pde=dde();function PS(n,e){return n==null||e==null?NaN:n<e?-1:n>e?1:n>=e?0:NaN}function mde(n,e){return n==null||e==null?NaN:e<n?-1:e>n?1:e>=n?0:NaN}function ZL(n){let e,t,i;n.length!==2?(e=PS,t=(a,l)=>PS(n(a),l),i=(a,l)=>n(a)-l):(e=n===PS||n===mde?n:gde,t=n,i=n);function r(a,l,c=0,f=a.length){if(c<f){if(e(l,l)!==0)return f;do{const d=c+f>>>1;t(a[d],l)<0?c=d+1:f=d}while(c<f)}return c}function s(a,l,c=0,f=a.length){if(c<f){if(e(l,l)!==0)return f;do{const d=c+f>>>1;t(a[d],l)<=0?c=d+1:f=d}while(c<f)}return c}function o(a,l,c=0,f=a.length){const d=r(a,l,c,f-1);return d>c&&i(a[d-1],l)>-i(a[d],l)?d-1:d}return{left:r,center:o,right:s}}function gde(){return 0}function vde(n){return n===null?NaN:+n}const yde=ZL(PS),bde=yde.right;ZL(vde).center;class mz extends Map{constructor(e,t=wde){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),e!=null)for(const[i,r]of e)this.set(i,r)}get(e){return super.get(gz(this,e))}has(e){return super.has(gz(this,e))}set(e,t){return super.set(_de(this,e),t)}delete(e){return super.delete(xde(this,e))}}function gz({_intern:n,_key:e},t){const i=e(t);return n.has(i)?n.get(i):t}function _de({_intern:n,_key:e},t){const i=e(t);return n.has(i)?n.get(i):(n.set(i,t),t)}function xde({_intern:n,_key:e},t){const i=e(t);return n.has(i)&&(t=n.get(i),n.delete(i)),t}function wde(n){return n!==null&&typeof n=="object"?n.valueOf():n}const Sde=Math.sqrt(50),Ede=Math.sqrt(10),Mde=Math.sqrt(2);function sM(n,e,t){const i=(e-n)/Math.max(0,t),r=Math.floor(Math.log10(i)),s=i/Math.pow(10,r),o=s>=Sde?10:s>=Ede?5:s>=Mde?2:1;let a,l,c;return r<0?(c=Math.pow(10,-r)/o,a=Math.round(n*c),l=Math.round(e*c),a/c<n&&++a,l/c>e&&--l,c=-c):(c=Math.pow(10,r)*o,a=Math.round(n/c),l=Math.round(e/c),a*c<n&&++a,l*c>e&&--l),l<a&&.5<=t&&t<2?sM(n,e,t*2):[a,l,c]}function Tde(n,e,t){if(e=+e,n=+n,t=+t,!(t>0))return[];if(n===e)return[n];const i=e<n,[r,s,o]=i?sM(e,n,t):sM(n,e,t);if(!(s>=r))return[];const a=s-r+1,l=new Array(a);if(i)if(o<0)for(let c=0;c<a;++c)l[c]=(s-c)/-o;else for(let c=0;c<a;++c)l[c]=(s-c)*o;else if(o<0)for(let c=0;c<a;++c)l[c]=(r+c)/-o;else for(let c=0;c<a;++c)l[c]=(r+c)*o;return l}function MD(n,e,t){return e=+e,n=+n,t=+t,sM(n,e,t)[2]}function Ade(n,e,t){e=+e,n=+n,t=+t;const i=e<n,r=i?MD(e,n,t):MD(n,e,t);return(i?-1:1)*(r<0?1/-r:r)}function Cde(n,e){let t;if(e===void 0)for(const i of n)i!=null&&(t<i||t===void 0&&i>=i)&&(t=i);else{let i=-1;for(let r of n)(r=e(r,++i,n))!=null&&(t<r||t===void 0&&r>=r)&&(t=r)}return t}function Rde(n,e){let t,i=-1,r=-1;if(e===void 0)for(const s of n)++r,s!=null&&(t<s||t===void 0&&s>=s)&&(t=s,i=r);else for(let s of n)(s=e(s,++r,n))!=null&&(t<s||t===void 0&&s>=s)&&(t=s,i=r);return i}function Dde(n,e,t){n=+n,e=+e,t=(r=arguments.length)<2?(e=n,n=0,1):r<3?1:+t;for(var i=-1,r=Math.max(0,Math.ceil((e-n)/t))|0,s=new Array(r);++i<r;)s[i]=n+i*t;return s}function BG(n,e){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(e).domain(n);break}return this}const vz=Symbol("implicit");function VG(){var n=new mz,e=[],t=[],i=vz;function r(s){let o=n.get(s);if(o===void 0){if(i!==vz)return i;n.set(s,o=e.push(s)-1)}return t[o%t.length]}return r.domain=function(s){if(!arguments.length)return e.slice();e=[],n=new mz;for(const o of s)n.has(o)||n.set(o,e.push(o)-1);return r},r.range=function(s){return arguments.length?(t=Array.from(s),r):t.slice()},r.unknown=function(s){return arguments.length?(i=s,r):i},r.copy=function(){return VG(e,t).unknown(i)},BG.apply(r,arguments),r}function KL(n,e,t){n.prototype=e.prototype=t,t.constructor=n}function GG(n,e){var t=Object.create(n.prototype);for(var i in e)t[i]=e[i];return t}function lx(){}var L_=.7,oM=1/L_,S0="\\s*([+-]?\\d+)\\s*",P_="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",bu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ode=/^#([0-9a-f]{3,8})$/,Lde=new RegExp(`^rgb\\(${S0},${S0},${S0}\\)$`),Pde=new RegExp(`^rgb\\(${bu},${bu},${bu}\\)$`),Ide=new RegExp(`^rgba\\(${S0},${S0},${S0},${P_}\\)$`),Nde=new RegExp(`^rgba\\(${bu},${bu},${bu},${P_}\\)$`),Ude=new RegExp(`^hsl\\(${P_},${bu},${bu}\\)$`),kde=new RegExp(`^hsla\\(${P_},${bu},${bu},${P_}\\)$`),yz={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};KL(lx,I_,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:bz,formatHex:bz,formatHex8:zde,formatHsl:Fde,formatRgb:_z,toString:_z});function bz(){return this.rgb().formatHex()}function zde(){return this.rgb().formatHex8()}function Fde(){return HG(this).formatHsl()}function _z(){return this.rgb().formatRgb()}function I_(n){var e,t;return n=(n+"").trim().toLowerCase(),(e=Ode.exec(n))?(t=e[1].length,e=parseInt(e[1],16),t===6?xz(e):t===3?new ha(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?cS(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?cS(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Lde.exec(n))?new ha(e[1],e[2],e[3],1):(e=Pde.exec(n))?new ha(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Ide.exec(n))?cS(e[1],e[2],e[3],e[4]):(e=Nde.exec(n))?cS(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Ude.exec(n))?Ez(e[1],e[2]/100,e[3]/100,1):(e=kde.exec(n))?Ez(e[1],e[2]/100,e[3]/100,e[4]):yz.hasOwnProperty(n)?xz(yz[n]):n==="transparent"?new ha(NaN,NaN,NaN,0):null}function xz(n){return new ha(n>>16&255,n>>8&255,n&255,1)}function cS(n,e,t,i){return i<=0&&(n=e=t=NaN),new ha(n,e,t,i)}function Bde(n){return n instanceof lx||(n=I_(n)),n?(n=n.rgb(),new ha(n.r,n.g,n.b,n.opacity)):new ha}function TD(n,e,t,i){return arguments.length===1?Bde(n):new ha(n,e,t,i??1)}function ha(n,e,t,i){this.r=+n,this.g=+e,this.b=+t,this.opacity=+i}KL(ha,TD,GG(lx,{brighter(n){return n=n==null?oM:Math.pow(oM,n),new ha(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?L_:Math.pow(L_,n),new ha(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new ha(Jp(this.r),Jp(this.g),Jp(this.b),aM(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:wz,formatHex:wz,formatHex8:Vde,formatRgb:Sz,toString:Sz}));function wz(){return`#${$p(this.r)}${$p(this.g)}${$p(this.b)}`}function Vde(){return`#${$p(this.r)}${$p(this.g)}${$p(this.b)}${$p((isNaN(this.opacity)?1:this.opacity)*255)}`}function Sz(){const n=aM(this.opacity);return`${n===1?"rgb(":"rgba("}${Jp(this.r)}, ${Jp(this.g)}, ${Jp(this.b)}${n===1?")":`, ${n})`}`}function aM(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function Jp(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function $p(n){return n=Jp(n),(n<16?"0":"")+n.toString(16)}function Ez(n,e,t,i){return i<=0?n=e=t=NaN:t<=0||t>=1?n=e=NaN:e<=0&&(n=NaN),new lc(n,e,t,i)}function HG(n){if(n instanceof lc)return new lc(n.h,n.s,n.l,n.opacity);if(n instanceof lx||(n=I_(n)),!n)return new lc;if(n instanceof lc)return n;n=n.rgb();var e=n.r/255,t=n.g/255,i=n.b/255,r=Math.min(e,t,i),s=Math.max(e,t,i),o=NaN,a=s-r,l=(s+r)/2;return a?(e===s?o=(t-i)/a+(t<i)*6:t===s?o=(i-e)/a+2:o=(e-t)/a+4,a/=l<.5?s+r:2-s-r,o*=60):a=l>0&&l<1?0:o,new lc(o,a,l,n.opacity)}function Gde(n,e,t,i){return arguments.length===1?HG(n):new lc(n,e,t,i??1)}function lc(n,e,t,i){this.h=+n,this.s=+e,this.l=+t,this.opacity=+i}KL(lc,Gde,GG(lx,{brighter(n){return n=n==null?oM:Math.pow(oM,n),new lc(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?L_:Math.pow(L_,n),new lc(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,e=isNaN(n)||isNaN(this.s)?0:this.s,t=this.l,i=t+(t<.5?t:1-t)*e,r=2*t-i;return new ha(TR(n>=240?n-240:n+120,r,i),TR(n,r,i),TR(n<120?n+240:n-120,r,i),this.opacity)},clamp(){return new lc(Mz(this.h),uS(this.s),uS(this.l),aM(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=aM(this.opacity);return`${n===1?"hsl(":"hsla("}${Mz(this.h)}, ${uS(this.s)*100}%, ${uS(this.l)*100}%${n===1?")":`, ${n})`}`}}));function Mz(n){return n=(n||0)%360,n<0?n+360:n}function uS(n){return Math.max(0,Math.min(1,n||0))}function TR(n,e,t){return(n<60?e+(t-e)*n/60:n<180?t:n<240?e+(t-e)*(240-n)/60:e)*255}const QL=n=>()=>n;function Hde(n,e){return function(t){return n+t*e}}function jde(n,e,t){return n=Math.pow(n,t),e=Math.pow(e,t)-n,t=1/t,function(i){return Math.pow(n+i*e,t)}}function Wde(n){return(n=+n)==1?jG:function(e,t){return t-e?jde(e,t,n):QL(isNaN(e)?t:e)}}function jG(n,e){var t=e-n;return t?Hde(n,t):QL(isNaN(n)?e:n)}const Tz=(function n(e){var t=Wde(e);function i(r,s){var o=t((r=TD(r)).r,(s=TD(s)).r),a=t(r.g,s.g),l=t(r.b,s.b),c=jG(r.opacity,s.opacity);return function(f){return r.r=o(f),r.g=a(f),r.b=l(f),r.opacity=c(f),r+""}}return i.gamma=n,i})(1);function $de(n,e){e||(e=[]);var t=n?Math.min(e.length,n.length):0,i=e.slice(),r;return function(s){for(r=0;r<t;++r)i[r]=n[r]*(1-s)+e[r]*s;return i}}function qde(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function Xde(n,e){var t=e?e.length:0,i=n?Math.min(t,n.length):0,r=new Array(i),s=new Array(t),o;for(o=0;o<i;++o)r[o]=JL(n[o],e[o]);for(;o<t;++o)s[o]=e[o];return function(a){for(o=0;o<i;++o)s[o]=r[o](a);return s}}function Yde(n,e){var t=new Date;return n=+n,e=+e,function(i){return t.setTime(n*(1-i)+e*i),t}}function lM(n,e){return n=+n,e=+e,function(t){return n*(1-t)+e*t}}function Zde(n,e){var t={},i={},r;(n===null||typeof n!="object")&&(n={}),(e===null||typeof e!="object")&&(e={});for(r in e)r in n?t[r]=JL(n[r],e[r]):i[r]=e[r];return function(s){for(r in t)i[r]=t[r](s);return i}}var AD=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,AR=new RegExp(AD.source,"g");function Kde(n){return function(){return n}}function Qde(n){return function(e){return n(e)+""}}function Jde(n,e){var t=AD.lastIndex=AR.lastIndex=0,i,r,s,o=-1,a=[],l=[];for(n=n+"",e=e+"";(i=AD.exec(n))&&(r=AR.exec(e));)(s=r.index)>t&&(s=e.slice(t,s),a[o]?a[o]+=s:a[++o]=s),(i=i[0])===(r=r[0])?a[o]?a[o]+=r:a[++o]=r:(a[++o]=null,l.push({i:o,x:lM(i,r)})),t=AR.lastIndex;return t<e.length&&(s=e.slice(t),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?Qde(l[0].x):Kde(e):(e=l.length,function(c){for(var f=0,d;f<e;++f)a[(d=l[f]).i]=d.x(c);return a.join("")})}function JL(n,e){var t=typeof e,i;return e==null||t==="boolean"?QL(e):(t==="number"?lM:t==="string"?(i=I_(e))?(e=i,Tz):Jde:e instanceof I_?Tz:e instanceof Date?Yde:qde(e)?$de:Array.isArray(e)?Xde:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Zde:lM)(n,e)}function epe(n,e){return n=+n,e=+e,function(t){return Math.round(n*(1-t)+e*t)}}function tpe(n){return function(){return n}}function npe(n){return+n}var Az=[0,1];function m0(n){return n}function CD(n,e){return(e-=n=+n)?function(t){return(t-n)/e}:tpe(isNaN(e)?NaN:.5)}function ipe(n,e){var t;return n>e&&(t=n,n=e,e=t),function(i){return Math.max(n,Math.min(e,i))}}function rpe(n,e,t){var i=n[0],r=n[1],s=e[0],o=e[1];return r<i?(i=CD(r,i),s=t(o,s)):(i=CD(i,r),s=t(s,o)),function(a){return s(i(a))}}function spe(n,e,t){var i=Math.min(n.length,e.length)-1,r=new Array(i),s=new Array(i),o=-1;for(n[i]<n[0]&&(n=n.slice().reverse(),e=e.slice().reverse());++o<i;)r[o]=CD(n[o],n[o+1]),s[o]=t(e[o],e[o+1]);return function(a){var l=bde(n,a,1,i)-1;return s[l](r[l](a))}}function ope(n,e){return e.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown())}function ape(){var n=Az,e=Az,t=JL,i,r,s,o=m0,a,l,c;function f(){var m=Math.min(n.length,e.length);return o!==m0&&(o=ipe(n[0],n[m-1])),a=m>2?spe:rpe,l=c=null,d}function d(m){return m==null||isNaN(m=+m)?s:(l||(l=a(n.map(i),e,t)))(i(o(m)))}return d.invert=function(m){return o(r((c||(c=a(e,n.map(i),lM)))(m)))},d.domain=function(m){return arguments.length?(n=Array.from(m,npe),f()):n.slice()},d.range=function(m){return arguments.length?(e=Array.from(m),f()):e.slice()},d.rangeRound=function(m){return e=Array.from(m),t=epe,f()},d.clamp=function(m){return arguments.length?(o=m?!0:m0,f()):o!==m0},d.interpolate=function(m){return arguments.length?(t=m,f()):t},d.unknown=function(m){return arguments.length?(s=m,d):s},function(m,v){return i=m,r=v,f()}}function lpe(){return ape()(m0,m0)}function cpe(n){return Math.abs(n=Math.round(n))>=1e21?n.toLocaleString("en").replace(/,/g,""):n.toString(10)}function cM(n,e){if(!isFinite(n)||n===0)return null;var t=(n=e?n.toExponential(e-1):n.toExponential()).indexOf("e"),i=n.slice(0,t);return[i.length>1?i[0]+i.slice(2):i,+n.slice(t+1)]}function B0(n){return n=cM(Math.abs(n)),n?n[1]:NaN}function upe(n,e){return function(t,i){for(var r=t.length,s=[],o=0,a=n[0],l=0;r>0&&a>0&&(l+a+1>i&&(a=Math.max(1,i-l)),s.push(t.substring(r-=a,r+a)),!((l+=a+1)>i));)a=n[o=(o+1)%n.length];return s.reverse().join(e)}}function fpe(n){return function(e){return e.replace(/[0-9]/g,function(t){return n[+t]})}}var hpe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function uM(n){if(!(e=hpe.exec(n)))throw new Error("invalid format: "+n);var e;return new eP({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}uM.prototype=eP.prototype;function eP(n){this.fill=n.fill===void 0?" ":n.fill+"",this.align=n.align===void 0?">":n.align+"",this.sign=n.sign===void 0?"-":n.sign+"",this.symbol=n.symbol===void 0?"":n.symbol+"",this.zero=!!n.zero,this.width=n.width===void 0?void 0:+n.width,this.comma=!!n.comma,this.precision=n.precision===void 0?void 0:+n.precision,this.trim=!!n.trim,this.type=n.type===void 0?"":n.type+""}eP.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function dpe(n){e:for(var e=n.length,t=1,i=-1,r;t<e;++t)switch(n[t]){case".":i=r=t;break;case"0":i===0&&(i=t),r=t;break;default:if(!+n[t])break e;i>0&&(i=0);break}return i>0?n.slice(0,i)+n.slice(r+1):n}var fM;function ppe(n,e){var t=cM(n,e);if(!t)return fM=void 0,n.toPrecision(e);var i=t[0],r=t[1],s=r-(fM=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,o=i.length;return s===o?i:s>o?i+new Array(s-o+1).join("0"):s>0?i.slice(0,s)+"."+i.slice(s):"0."+new Array(1-s).join("0")+cM(n,Math.max(0,e+s-1))[0]}function Cz(n,e){var t=cM(n,e);if(!t)return n+"";var i=t[0],r=t[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}const Rz={"%":(n,e)=>(n*100).toFixed(e),b:n=>Math.round(n).toString(2),c:n=>n+"",d:cpe,e:(n,e)=>n.toExponential(e),f:(n,e)=>n.toFixed(e),g:(n,e)=>n.toPrecision(e),o:n=>Math.round(n).toString(8),p:(n,e)=>Cz(n*100,e),r:Cz,s:ppe,X:n=>Math.round(n).toString(16).toUpperCase(),x:n=>Math.round(n).toString(16)};function Dz(n){return n}var Oz=Array.prototype.map,Lz=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function mpe(n){var e=n.grouping===void 0||n.thousands===void 0?Dz:upe(Oz.call(n.grouping,Number),n.thousands+""),t=n.currency===void 0?"":n.currency[0]+"",i=n.currency===void 0?"":n.currency[1]+"",r=n.decimal===void 0?".":n.decimal+"",s=n.numerals===void 0?Dz:fpe(Oz.call(n.numerals,String)),o=n.percent===void 0?"%":n.percent+"",a=n.minus===void 0?"":n.minus+"",l=n.nan===void 0?"NaN":n.nan+"";function c(d,m){d=uM(d);var v=d.fill,b=d.align,x=d.sign,w=d.symbol,_=d.zero,A=d.width,T=d.comma,E=d.precision,C=d.trim,R=d.type;R==="n"?(T=!0,R="g"):Rz[R]||(E===void 0&&(E=12),C=!0,R="g"),(_||v==="0"&&b==="=")&&(_=!0,v="0",b="=");var O=(m&&m.prefix!==void 0?m.prefix:"")+(w==="$"?t:w==="#"&&/[boxX]/.test(R)?"0"+R.toLowerCase():""),I=(w==="$"?i:/[%p]/.test(R)?o:"")+(m&&m.suffix!==void 0?m.suffix:""),L=Rz[R],N=/[defgprs%]/.test(R);E=E===void 0?6:/[gprs]/.test(R)?Math.max(1,Math.min(21,E)):Math.max(0,Math.min(20,E));function V(B){var k=O,j=I,q,W,G;if(R==="c")j=L(B)+j,B="";else{B=+B;var K=B<0||1/B<0;if(B=isNaN(B)?l:L(Math.abs(B),E),C&&(B=dpe(B)),K&&+B==0&&x!=="+"&&(K=!1),k=(K?x==="("?x:a:x==="-"||x==="("?"":x)+k,j=(R==="s"&&!isNaN(B)&&fM!==void 0?Lz[8+fM/3]:"")+j+(K&&x==="("?")":""),N){for(q=-1,W=B.length;++q<W;)if(G=B.charCodeAt(q),48>G||G>57){j=(G===46?r+B.slice(q+1):B.slice(q))+j,B=B.slice(0,q);break}}}T&&!_&&(B=e(B,1/0));var te=k.length+B.length+j.length,ie=te<A?new Array(A-te+1).join(v):"";switch(T&&_&&(B=e(ie+B,ie.length?A-j.length:1/0),ie=""),b){case"<":B=k+B+j+ie;break;case"=":B=k+ie+B+j;break;case"^":B=ie.slice(0,te=ie.length>>1)+k+B+j+ie.slice(te);break;default:B=ie+k+B+j;break}return s(B)}return V.toString=function(){return d+""},V}function f(d,m){var v=Math.max(-8,Math.min(8,Math.floor(B0(m)/3)))*3,b=Math.pow(10,-v),x=c((d=uM(d),d.type="f",d),{suffix:Lz[8+v/3]});return function(w){return x(b*w)}}return{format:c,formatPrefix:f}}var fS,WG,$G;gpe({thousands:",",grouping:[3],currency:["$",""]});function gpe(n){return fS=mpe(n),WG=fS.format,$G=fS.formatPrefix,fS}function vpe(n){return Math.max(0,-B0(Math.abs(n)))}function ype(n,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(B0(e)/3)))*3-B0(Math.abs(n)))}function bpe(n,e){return n=Math.abs(n),e=Math.abs(e)-n,Math.max(0,B0(e)-B0(n))+1}function _pe(n,e,t,i){var r=Ade(n,e,t),s;switch(i=uM(i??",f"),i.type){case"s":{var o=Math.max(Math.abs(n),Math.abs(e));return i.precision==null&&!isNaN(s=ype(r,o))&&(i.precision=s),$G(i,o)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(s=bpe(r,Math.max(Math.abs(n),Math.abs(e))))&&(i.precision=s-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(s=vpe(r))&&(i.precision=s-(i.type==="%")*2);break}}return WG(i)}function xpe(n){var e=n.domain;return n.ticks=function(t){var i=e();return Tde(i[0],i[i.length-1],t??10)},n.tickFormat=function(t,i){var r=e();return _pe(r[0],r[r.length-1],t??10,i)},n.nice=function(t){t==null&&(t=10);var i=e(),r=0,s=i.length-1,o=i[r],a=i[s],l,c,f=10;for(a<o&&(c=o,o=a,a=c,c=r,r=s,s=c);f-- >0;){if(c=MD(o,a,t),c===l)return i[r]=o,i[s]=a,e(i);if(c>0)o=Math.floor(o/c)*c,a=Math.ceil(a/c)*c;else if(c<0)o=Math.ceil(o*c)/c,a=Math.floor(a*c)/c;else break;l=c}return n},n}function xT(){var n=lpe();return n.copy=function(){return ope(n,xT())},BG.apply(n,arguments),xpe(n)}var CR,Pz;function tP(){if(Pz)return CR;Pz=1;function n(t){return!t||typeof t!="object"||typeof t=="function"||Array.isArray(t)||t instanceof Set||t instanceof Map||t instanceof RegExp||t instanceof Date}function e(t,i){t=t||{};var r={};for(var s in i){var o=t[s],a=i[s];if(!n(a)){r[s]=e(o,a);continue}o===void 0?r[s]=a:r[s]=o}return r}return CR=e,CR}var hS={},RR={},Iz;function qG(){return Iz||(Iz=1,(function(n){var e=Math.pow(2,8)-1,t=Math.pow(2,16)-1,i=Math.pow(2,32)-1,r=Math.pow(2,7)-1,s=Math.pow(2,15)-1,o=Math.pow(2,31)-1;n.getPointerArray=function(l){var c=l-1;if(c<=e)return Uint8Array;if(c<=t)return Uint16Array;if(c<=i)return Uint32Array;throw new Error("mnemonist: Pointer Array of size > 4294967295 is not supported.")},n.getSignedPointerArray=function(l){var c=l-1;return c<=r?Int8Array:c<=s?Int16Array:c<=o?Int32Array:Float64Array},n.getNumberType=function(l){return l===(l|0)?Math.sign(l)===-1?l<=127&&l>=-128?Int8Array:l<=32767&&l>=-32768?Int16Array:Int32Array:l<=255?Uint8Array:l<=65535?Uint16Array:Uint32Array:Float64Array};var a={Uint8Array:1,Int8Array:2,Uint16Array:3,Int16Array:4,Uint32Array:5,Int32Array:6,Float32Array:7,Float64Array:8};n.getMinimalRepresentation=function(l,c){var f=null,d=0,m,v,b,x,w;for(x=0,w=l.length;x<w;x++)b=c?c(l[x]):l[x],v=n.getNumberType(b),m=a[v.name],m>d&&(d=m,f=v);return f},n.isTypedArray=function(l){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView(l)},n.concat=function(){var l=0,c,f,d;for(c=0,d=arguments.length;c<d;c++)l+=arguments[c].length;var m=new arguments[0].constructor(l);for(c=0,f=0;c<d;c++)m.set(arguments[c],f),f+=arguments[c].length;return m},n.indices=function(l){for(var c=n.getPointerArray(l),f=new c(l),d=0;d<l;d++)f[d]=d;return f}})(RR)),RR}var hb={},Nz;function wT(){if(Nz)return hb;Nz=1;function n(i){return typeof i!="number"||isNaN(i)?1:i}function e(i,r){var s={},o=function(c){return typeof c>"u"?r:c};typeof r=="function"&&(o=r);var a=function(c){return o(c[i])},l=function(){return o(void 0)};return typeof i=="string"?(s.fromAttributes=a,s.fromGraph=function(c,f){return a(c.getNodeAttributes(f))},s.fromEntry=function(c,f){return a(f)}):typeof i=="function"?(s.fromAttributes=function(){throw new Error("graphology-utils/getters/createNodeValueGetter: irrelevant usage.")},s.fromGraph=function(c,f){return o(i(f,c.getNodeAttributes(f)))},s.fromEntry=function(c,f){return o(i(c,f))}):(s.fromAttributes=l,s.fromGraph=l,s.fromEntry=l),s}function t(i,r){var s={},o=function(c){return typeof c>"u"?r:c};typeof r=="function"&&(o=r);var a=function(c){return o(c[i])},l=function(){return o(void 0)};return typeof i=="string"?(s.fromAttributes=a,s.fromGraph=function(c,f){return a(c.getEdgeAttributes(f))},s.fromEntry=function(c,f){return a(f)},s.fromPartialEntry=s.fromEntry,s.fromMinimalEntry=s.fromEntry):typeof i=="function"?(s.fromAttributes=function(){throw new Error("graphology-utils/getters/createEdgeValueGetter: irrelevant usage.")},s.fromGraph=function(c,f){var d=c.extremities(f);return o(i(f,c.getEdgeAttributes(f),d[0],d[1],c.getNodeAttributes(d[0]),c.getNodeAttributes(d[1]),c.isUndirected(f)))},s.fromEntry=function(c,f,d,m,v,b,x){return o(i(c,f,d,m,v,b,x))},s.fromPartialEntry=function(c,f,d,m){return o(i(c,f,d,m))},s.fromMinimalEntry=function(c,f){return o(i(c,f))}):(s.fromAttributes=l,s.fromGraph=l,s.fromEntry=l,s.fromMinimalEntry=l),s}return hb.createNodeValueGetter=e,hb.createEdgeValueGetter=t,hb.createEdgeWeightGetter=function(i){return t(i,n)},hb}var Uz;function wpe(){if(Uz)return hS;Uz=1;var n=qG(),e=wT().createEdgeWeightGetter;function t(s,o){return s==="outbound"||s==="inbound"?o.directedSize+o.undirectedSize*2:s==="in"||s==="out"||s==="directed"?o.directedSize:o.undirectedSize*2}function i(s,o){o=o||"outbound";var a=s[o+"Neighbors"].bind(s),l=t(o,s),c=n.getPointerArray(l),f=n.getPointerArray(s.order);this.graph=s,this.neighborhood=new f(l),this.starts=new c(s.order+1),this.nodes=s.nodes();var d={},m,v,b,x,w,_,A=0;for(m=0,v=s.order;m<v;m++)d[this.nodes[m]]=m;for(m=0,v=s.order;m<v;m++)for(w=this.nodes[m],_=a(w),this.starts[m]=A,b=0,x=_.length;b<x;b++)this.neighborhood[A++]=d[_[b]];this.starts[m]=l}i.prototype.bounds=function(s){return[this.starts[s],this.starts[s+1]]},i.prototype.project=function(){var s=this,o={};return s.nodes.forEach(function(a,l){o[a]=Array.from(s.neighborhood.slice(s.starts[l],s.starts[l+1])).map(function(c){return s.nodes[c]})}),o},i.prototype.collect=function(s){var o,a,l={};for(o=0,a=s.length;o<a;o++)l[this.nodes[o]]=s[o];return l},i.prototype.assign=function(s,o){var a=0;this.graph.updateEachNodeAttributes(function(l,c){return c[s]=o[a++],c},{attributes:[s]})},hS.NeighborhoodIndex=i;function r(s,o,a){a=a||"outbound";var l=s[a+"Edges"].bind(s),c=t(a,s),f=n.getPointerArray(c),d=n.getPointerArray(s.order),m=e(o).fromMinimalEntry;this.graph=s,this.neighborhood=new d(c),this.weights=new Float64Array(c),this.outDegrees=new Float64Array(s.order),this.starts=new f(s.order+1),this.nodes=s.nodes();var v={},b,x,w,_,A,T,E,C,R,O=0;for(b=0,x=s.order;b<x;b++)v[this.nodes[b]]=b;for(b=0,x=s.order;b<x;b++)for(A=this.nodes[b],E=l(A),this.starts[b]=O,w=0,_=E.length;w<_;w++)C=E[w],T=s.opposite(A,C),R=m(C,s.getEdgeAttributes(C)),this.neighborhood[O]=v[T],this.weights[O++]=R,this.outDegrees[b]+=R;this.starts[b]=c}return r.prototype.bounds=i.prototype.bounds,r.prototype.project=i.prototype.project,r.prototype.collect=i.prototype.collect,r.prototype.assign=i.prototype.assign,hS.WeightedNeighborhoodIndex=r,hS}var DR,kz;function Spe(){if(kz)return DR;kz=1;var n=Qf(),e=tP(),t=wpe().WeightedNeighborhoodIndex,i={nodePagerankAttribute:"pagerank",getEdgeWeight:"weight",alpha:.85,maxIterations:100,tolerance:1e-6};function r(o,a,l){if(!n(a))throw new Error("graphology-metrics/centrality/pagerank: the given graph is not a valid graphology instance.");l=e(l,i);var c=l.alpha,f=l.maxIterations,d=l.tolerance,m=l.nodePagerankAttribute,v=a.order,b=1/v,x=new t(a,l.getEdgeWeight),w,_,A,T,E=new Float64Array(a.order),C=new Float64Array(x.weights.length),R=[];for(w=0;w<v;w++)for(E[w]=b,A=x.starts[w+1],T=x.outDegrees[w],T===0&&R.push(w),_=x.starts[w];_<A;_++)C[_]=x.weights[_]/T;for(var O=0,I=0,L,N,V,B=!1;O<f;){for(V=E,E=new Float64Array(a.order),L=0,w=0,A=R.length;w<A;w++)L+=V[R[w]];for(L*=c,w=0;w<v;w++){for(A=x.starts[w+1],_=x.starts[w];_<A;_++)N=x.neighborhood[_],E[N]+=c*V[w]*C[_];E[w]+=L*b+(1-c)*b}for(I=0,w=0;w<v;w++)I+=Math.abs(E[w]-V[w]);if(I<v*d){B=!0;break}O++}if(!B)throw Error("graphology-metrics/centrality/pagerank: failed to converge.");if(o){x.assign(m,E);return}return x.collect(E)}var s=r.bind(null,!1);return s.assign=r.bind(null,!0),DR=s,DR}var Epe=Spe();const Mpe=ro(Epe);var ec={},Tp={},OR,zz;function Tpe(){if(zz)return OR;zz=1;function n(e){if(typeof e!="function")throw new Error("obliterator/iterator: expecting a function!");this.next=e}return typeof Symbol<"u"&&(n.prototype[Symbol.iterator]=function(){return this}),n.of=function(){var e=arguments,t=e.length,i=0;return new n(function(){return i>=t?{done:!0}:{done:!1,value:e[i++]}})},n.empty=function(){var e=new n(function(){return{done:!0}});return e},n.fromSequence=function(e){var t=0,i=e.length;return new n(function(){return t>=i?{done:!0}:{done:!1,value:e[t++]}})},n.is=function(e){return e instanceof n?!0:typeof e=="object"&&e!==null&&typeof e.next=="function"},OR=n,OR}var dS={},Fz;function Ape(){return Fz||(Fz=1,dS.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u",dS.SYMBOL_SUPPORT=typeof Symbol<"u"),dS}var LR,Bz;function nP(){if(Bz)return LR;Bz=1;var n=Ape(),e=n.ARRAY_BUFFER_SUPPORT,t=n.SYMBOL_SUPPORT;return LR=function(r,s){var o,a,l,c,f;if(!r)throw new Error("obliterator/forEach: invalid iterable.");if(typeof s!="function")throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(r)||e&&ArrayBuffer.isView(r)||typeof r=="string"||r.toString()==="[object Arguments]"){for(l=0,c=r.length;l<c;l++)s(r[l],l);return}if(typeof r.forEach=="function"){r.forEach(s);return}if(t&&Symbol.iterator in r&&typeof r.next!="function"&&(r=r[Symbol.iterator]()),typeof r.next=="function"){for(o=r,l=0;f=o.next(),f.done!==!0;)s(f.value,l),l++;return}for(a in r)r.hasOwnProperty(a)&&s(r[a],a)},LR}var PR,Vz;function Cpe(){if(Vz)return PR;Vz=1;var n=Tpe(),e=nP();function t(){this.clear()}return t.prototype.clear=function(){this.items=[],this.offset=0,this.size=0},t.prototype.enqueue=function(i){return this.items.push(i),++this.size},t.prototype.dequeue=function(){if(this.size){var i=this.items[this.offset];return++this.offset*2>=this.items.length&&(this.items=this.items.slice(this.offset),this.offset=0),this.size--,i}},t.prototype.peek=function(){if(this.size)return this.items[this.offset]},t.prototype.forEach=function(i,r){r=arguments.length>1?r:this;for(var s=this.offset,o=0,a=this.items.length;s<a;s++,o++)i.call(r,this.items[s],o,this)},t.prototype.toArray=function(){return this.items.slice(this.offset)},t.prototype.values=function(){var i=this.items,r=this.offset;return new n(function(){if(r>=i.length)return{done:!0};var s=i[r];return r++,{value:s,done:!1}})},t.prototype.entries=function(){var i=this.items,r=this.offset,s=0;return new n(function(){if(r>=i.length)return{done:!0};var o=i[r];return r++,{value:[s++,o],done:!1}})},typeof Symbol<"u"&&(t.prototype[Symbol.iterator]=t.prototype.values),t.prototype.toString=function(){return this.toArray().join(",")},t.prototype.toJSON=function(){return this.toArray()},t.prototype.inspect=function(){var i=this.toArray();return Object.defineProperty(i,"constructor",{value:t,enumerable:!1}),i},typeof Symbol<"u"&&(t.prototype[Symbol.for("nodejs.util.inspect.custom")]=t.prototype.inspect),t.from=function(i){var r=new t;return e(i,function(s){r.enqueue(s)}),r},t.of=function(){return t.from(arguments)},PR=t,PR}var IR,Gz;function Rpe(){return Gz||(Gz=1,IR=function(e,t){var i=t.length;if(i!==0){var r=e.length;e.length+=i;for(var s=0;s<i;s++)e[r+s]=t[s]}}),IR}var Hz;function Dpe(){if(Hz)return Tp;Hz=1;var n=Qf(),e=Cpe(),t=Rpe();function i(c,f,d){if(!n(c))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<3)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 3.");if(!c.hasNode(f))throw new Error('graphology-shortest-path: the "'+f+'" source node does not exist in the given graph.');if(!c.hasNode(d))throw new Error('graphology-shortest-path: the "'+d+'" target node does not exist in the given graph.');if(f=""+f,d=""+d,f===d)return[f];var m=c.inboundNeighbors.bind(c),v=c.outboundNeighbors.bind(c),b={},x={};b[f]=null,x[d]=null;var w=[f],_=[d],A,T,E,C,R,O,I,L,N=!1;e:for(;w.length&&_.length;)if(w.length<=_.length){for(A=w,w=[],R=0,I=A.length;R<I;R++)for(T=A[R],E=v(T),O=0,L=E.length;O<L;O++)if(C=E[O],C in b||(w.push(C),b[C]=T),C in x){N=!0;break e}}else for(A=_,_=[],R=0,I=A.length;R<I;R++)for(T=A[R],E=m(T),O=0,L=E.length;O<L;O++)if(C=E[O],C in x||(_.push(C),x[C]=T),C in b){N=!0;break e}if(!N)return null;for(var V=[];C;)V.unshift(C),C=b[C];for(C=x[V[V.length-1]];C;)V.push(C),C=x[C];return V.length?V:null}function r(c,f){if(!n(c))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<2)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 2.");if(!c.hasNode(f))throw new Error('graphology-shortest-path: the "'+f+'" source node does not exist in the given graph.');f=""+f;var d={},m={},v,b,x,w,_,A;for(d[f]=!0,m[f]=[f];Object.keys(d).length;){v=d,d={};for(x in v)for(b=c.outboundNeighbors(x),_=0,A=b.length;_<A;_++)w=b[_],m[w]||(m[w]=m[x].concat(w),d[w]=!0)}return m}function s(c,f,d){if(!n(f))throw new Error("graphology-shortest-path: invalid graphology instance.");if(!f.hasNode(d))throw new Error('graphology-shortest-path: the "'+d+'" source node does not exist in the given graph.');d=""+d;var m=new Set,v={},b=0;v[d]=0;for(var x=[d],w,_,A;x.length!==0;){var T=[];for(w=0,_=x.length;w<_;w++)A=x[w],!m.has(A)&&(m.add(A),t(T,f[c](A)),v[A]=b);b++,x=T}return v}var o=s.bind(null,"outboundNeighbors"),a=s.bind(null,"neighbors");function l(c,f){f=""+f;var d=[],m={},v={},b=c.nodes(),x,w,_,A,T,E,C,R,O;for(E=0,R=b.length;E<R;E++)A=b[E],m[A]=[],v[A]=0;var I={};v[f]=1,I[f]=0;for(var L=e.of(f);L.size;)for(A=L.dequeue(),d.push(A),x=I[A],w=v[A],_=c.outboundNeighbors(A),C=0,O=_.length;C<O;C++)T=_[C],T in I||(L.enqueue(T),I[T]=x+1),I[T]===x+1&&(v[T]+=w,m[T].push(A));return[d,m,v]}return Tp.bidirectional=i,Tp.singleSource=r,Tp.singleSourceLength=o,Tp.undirectedSingleSourceLength=a,Tp.brandes=l,Tp}var NR={},jz;function Ope(){if(jz)return NR;jz=1;var n=function(){return!0};return NR.edgePathFromNodePath=function(e,t){var i=t.length,r,s,o,a;if(i<2)return s=t[0],a=e.multi?e.findEdge(s,s,n):e.edge(s,s),a?[a]:[];i--;var l=new Array(i);for(r=0;r<i;r++){if(s=t[r],o=t[r+1],a=e.multi?e.findOutboundEdge(s,o,n):e.edge(s,o),a===void 0)throw new Error("graphology-shortest-path: given path is impossible in given graph.");l[r]=a}return l},NR}var db={},e0={},Wz;function Lpe(){if(Wz)return e0;Wz=1;var n=function(r,s){return r<s?-1:r>s?1:0},e=function(r,s){return r<s?1:r>s?-1:0};function t(r){return function(s,o){return r(o,s)}}function i(r){return r===2?function(s,o){return s[0]<o[0]?-1:s[0]>o[0]?1:s[1]<o[1]?-1:s[1]>o[1]?1:0}:function(s,o){for(var a=0;a<r;){if(s[a]<o[a])return-1;if(s[a]>o[a])return 1;a++}return 0}}return e0.DEFAULT_COMPARATOR=n,e0.DEFAULT_REVERSE_COMPARATOR=e,e0.reverseComparator=t,e0.createTupleComparator=i,e0}var t0={},$z;function Ppe(){if($z)return t0;$z=1;var n=nP(),e=qG();function t(o){return Array.isArray(o)||e.isTypedArray(o)}function i(o){if(typeof o.length=="number")return o.length;if(typeof o.size=="number")return o.size}function r(o){var a=i(o),l=typeof a=="number"?new Array(a):[],c=0;return n(o,function(f){l[c++]=f}),l}function s(o){var a=i(o),l=typeof a=="number"?e.getPointerArray(a):Array,c=typeof a=="number"?new Array(a):[],f=typeof a=="number"?new l(a):[],d=0;return n(o,function(m){c[d]=m,f[d]=d++}),[c,f]}return t0.isArrayLike=t,t0.guessLength=i,t0.toArray=r,t0.toArrayWithIndices=s,t0}var UR,qz;function XG(){if(qz)return UR;qz=1;var n=nP(),e=Lpe(),t=Ppe(),i=e.DEFAULT_COMPARATOR,r=e.reverseComparator;function s(_,A,T,E){for(var C=A[E],R,O;E>T;){if(R=E-1>>1,O=A[R],_(C,O)<0){A[E]=O,E=R;continue}break}A[E]=C}function o(_,A,T){for(var E=A.length,C=T,R=A[T],O=2*T+1,I;O<E;)I=O+1,I<E&&_(A[O],A[I])>=0&&(O=I),A[T]=A[O],T=O,O=2*T+1;A[T]=R,s(_,A,C,T)}function a(_,A,T){A.push(T),s(_,A,0,A.length-1)}function l(_,A){var T=A.pop();if(A.length!==0){var E=A[0];return A[0]=T,o(_,A,0),E}return T}function c(_,A,T){if(A.length===0)throw new Error("mnemonist/heap.replace: cannot pop an empty heap.");var E=A[0];return A[0]=T,o(_,A,0),E}function f(_,A,T){var E;return A.length!==0&&_(A[0],T)<0&&(E=A[0],A[0]=T,T=E,o(_,A,0)),T}function d(_,A){for(var T=A.length,E=T>>1,C=E;--C>=0;)o(_,A,C)}function m(_,A){for(var T=A.length,E=0,C=new Array(T);E<T;)C[E++]=l(_,A);return C}function v(_,A,T){arguments.length===2&&(T=A,A=_,_=i);var E=r(_),C,R,O,I=1/0,L;if(A===1){if(t.isArrayLike(T)){for(C=0,R=T.length;C<R;C++)O=T[C],(I===1/0||_(O,I)<0)&&(I=O);return L=new T.constructor(1),L[0]=I,L}return n(T,function(V){(I===1/0||_(V,I)<0)&&(I=V)}),[I]}if(t.isArrayLike(T)){if(A>=T.length)return T.slice().sort(_);for(L=T.slice(0,A),d(E,L),C=A,R=T.length;C<R;C++)E(T[C],L[0])>0&&c(E,L,T[C]);return L.sort(_)}var N=t.guessLength(T);return N!==null&&N<A&&(A=N),L=new Array(A),C=0,n(T,function(V){C<A?L[C]=V:(C===A&&d(E,L),E(V,L[0])>0&&c(E,L,V)),C++}),L.length>C&&(L.length=C),L.sort(_)}function b(_,A,T){arguments.length===2&&(T=A,A=_,_=i);var E=r(_),C,R,O,I=-1/0,L;if(A===1){if(t.isArrayLike(T)){for(C=0,R=T.length;C<R;C++)O=T[C],(I===-1/0||_(O,I)>0)&&(I=O);return L=new T.constructor(1),L[0]=I,L}return n(T,function(V){(I===-1/0||_(V,I)>0)&&(I=V)}),[I]}if(t.isArrayLike(T)){if(A>=T.length)return T.slice().sort(E);for(L=T.slice(0,A),d(_,L),C=A,R=T.length;C<R;C++)_(T[C],L[0])>0&&c(_,L,T[C]);return L.sort(E)}var N=t.guessLength(T);return N!==null&&N<A&&(A=N),L=new Array(A),C=0,n(T,function(V){C<A?L[C]=V:(C===A&&d(_,L),_(V,L[0])>0&&c(_,L,V)),C++}),L.length>C&&(L.length=C),L.sort(E)}function x(_){if(this.clear(),this.comparator=_||i,typeof this.comparator!="function")throw new Error("mnemonist/Heap.constructor: given comparator should be a function.")}x.prototype.clear=function(){this.items=[],this.size=0},x.prototype.push=function(_){return a(this.comparator,this.items,_),++this.size},x.prototype.peek=function(){return this.items[0]},x.prototype.pop=function(){return this.size!==0&&this.size--,l(this.comparator,this.items)},x.prototype.replace=function(_){return c(this.comparator,this.items,_)},x.prototype.pushpop=function(_){return f(this.comparator,this.items,_)},x.prototype.consume=function(){return this.size=0,m(this.comparator,this.items)},x.prototype.toArray=function(){return m(this.comparator,this.items.slice())},x.prototype.inspect=function(){var _=this.toArray();return Object.defineProperty(_,"constructor",{value:x,enumerable:!1}),_},typeof Symbol<"u"&&(x.prototype[Symbol.for("nodejs.util.inspect.custom")]=x.prototype.inspect);function w(_){if(this.clear(),this.comparator=_||i,typeof this.comparator!="function")throw new Error("mnemonist/MaxHeap.constructor: given comparator should be a function.");this.comparator=r(this.comparator)}return w.prototype=x.prototype,x.from=function(_,A){var T=new x(A),E;return t.isArrayLike(_)?E=_.slice():E=t.toArray(_),d(T.comparator,E),T.items=E,T.size=E.length,T},w.from=function(_,A){var T=new w(A),E;return t.isArrayLike(_)?E=_.slice():E=t.toArray(_),d(T.comparator,E),T.items=E,T.size=E.length,T},x.siftUp=o,x.siftDown=s,x.push=a,x.pop=l,x.replace=c,x.pushpop=f,x.heapify=d,x.consume=m,x.nsmallest=v,x.nlargest=b,x.MinHeap=x,x.MaxHeap=w,UR=x,UR}var Xz;function Ipe(){if(Xz)return db;Xz=1;var n=Qf(),e=wT().createEdgeWeightGetter,t=XG(),i="weight";function r(d,m){return d[0]>m[0]?1:d[0]<m[0]?-1:d[1]>m[1]?1:d[1]<m[1]?-1:d[2]>m[2]?1:d[2]<m[2]?-1:0}function s(d,m){return d[0]>m[0]?1:d[0]<m[0]?-1:d[1]>m[1]?1:d[1]<m[1]?-1:d[2]>m[2]?1:d[2]<m[2]?-1:d[3]>m[3]?1:d[3]<m[3]?-1:0}function o(d,m,v,b){if(m=""+m,v=""+v,!n(d))throw new Error("graphology-shortest-path/dijkstra: invalid graphology instance.");if(m&&!d.hasNode(m))throw new Error('graphology-shortest-path/dijkstra: the "'+m+'" source node does not exist in the given graph.');if(v&&!d.hasNode(v))throw new Error('graphology-shortest-path/dijkstra: the "'+v+'" target node does not exist in the given graph.');if(b=e(b||i).fromMinimalEntry,m===v)return[0,[m]];var x=[{},{}],w=[{},{}],_=[new t(r),new t(r)],A=[{},{}];w[0][m]=[m],w[1][v]=[v],A[0][m]=0,A[1][v]=0;var T=[],E=1/0,C=0,R=1,O,I,L,N,V,B,k,j,q;for(_[0].push([0,C++,m]),_[1].push([0,C++,v]);_[0].size&&_[1].size;)if(R=1-R,O=_[R].pop(),N=O[0],V=O[2],!(V in x[R])){if(x[R][V]=N,V in x[1-R])return[E,T];for(I=R===1?d.inboundEdges(V):d.outboundEdges(V),j=0,q=I.length;j<q;j++){if(k=I[j],B=d.opposite(V,k),L=x[R][V]+b(k,d.getEdgeAttributes(k)),B in x[R]&&L<x[R][B])throw Error("graphology-shortest-path/dijkstra: contradictory paths found. Do some of your edges have a negative weight?");(!(B in A[R])||L<A[R][B])&&(A[R][B]=L,_[R].push([L,C++,B]),w[R][B]=w[R][V].concat(B),B in A[0]&&B in A[1]&&(N=A[0][B]+A[1][B],(T.length===0||E>N)&&(E=N,T=w[0][B].concat(w[1][B].slice(0,-1).reverse()))))}}return[1/0,null]}function a(d,m,v,b,x,w){if(!n(d))throw new Error("graphology-shortest-path/dijkstra: invalid graphology instance.");v=e(v||i).fromMinimalEntry;var _={},A={},T=new t(r),E=0,C,R,O,I,L,N,V,B,k,j,q;for(B=0,j=m.length;B<j;B++)I=m[B],A[I]=0,T.push([0,E++,I]),w&&(w[I]=[I]);for(;T.size;)if(R=T.pop(),V=R[0],I=R[2],!(I in _)){if(_[I]=V,I===x)break;for(C=d.outboundEdges(I),k=0,q=C.length;k<q;k++){if(N=C[k],L=d.opposite(I,N),O=v(N,d.getEdgeAttributes(N))+_[I],L in _&&O<_[L])throw Error("graphology-shortest-path/dijkstra: contradictory paths found. Do some of your edges have a negative weight?");(!(L in A)||O<A[L])&&(A[L]=O,T.push([O,E++,L]),w&&(w[L]=w[I].concat(L)))}}return _}function l(d,m,v){var b={};return a(d,[m],v,0,null,b),b}function c(d,m,v,b){return o(d,m,v,b)[1]}function f(d,m,v){m=""+m,v=e(v||i).fromMinimalEntry;var b=[],x={},w={},_=d.nodes(),A,T,E,C,R,O,I,L,N,V;for(N=0,V=_.length;N<V;N++)O=_[N],x[O]=[],w[O]=0;var B={};w[m]=1;var k={};k[m]=0;var j=0,q=new t(s);for(q.push([0,j++,m,m]);q.size;)if(T=q.pop(),C=T[0],E=T[2],O=T[3],!(O in B))for(w[O]+=w[E],b.push(O),B[O]=C,A=d.outboundEdges(O),N=0,V=A.length;N<V;N++)L=A[N],I=d.opposite(O,L),R=C+v(L,d.getEdgeAttributes(L)),!(I in B)&&(!(I in k)||R<k[I])?(k[I]=R,q.push([R,j++,O,I]),w[I]=0,x[I]=[O]):R===k[I]&&(w[I]+=w[O],x[I].push(O));return[b,x,w]}return db.bidirectional=c,db.singleSource=l,db.brandes=f,db}var kR={},Yz;function Npe(){if(Yz)return kR;Yz=1;var n=Qf(),e=wT().createEdgeWeightGetter,t=XG(),i="weight";function r(o,a){return o[0]>a[0]?1:o[0]<a[0]?-1:o[1]>a[1]?1:o[1]<a[1]?-1:0}function s(o,a,l,c,f,d){if(!n(o))throw new Error("graphology-shortest-path/astar: invalid graphology instance.");if(a&&!o.hasNode(a))throw new Error('graphology-shortest-path/astar: the "'+a+'" source node does not exist in the given graph.');if(l&&!o.hasNode(l))throw new Error('graphology-shortest-path/astar: the "'+l+'" target node does not exist in the given graph.');if(c=e(c||i).fromMinimalEntry,a===l)return[a];f=f||function(){return 0},d=d||{};var m=0,v=new t(r);v.push([0,m++,a,0,null]);var b={},x={},w,_,A,T,E,C,R,O,I,L,N,V;function B(k,j,q,W){if(V=_===q?W:q,L=c(k,j),L!==null){if(N=T+L,b.hasOwnProperty(V)){if(A=b[V],O=A[0],I=A[1],O<=N)return}else I=f(V,l);d.cutoff&&N+I>d.cutoff||(b[V]=[N,I],v.push([N+I,m++,V,N,_]))}}for(;v.size!==0;){if(w=v.pop(),_=w[2],T=w[3],E=w[4],_===l){for(C=[_],R=E;R!==null;)C.push(R),R=x[R];return C.reverse(),C}x.hasOwnProperty(_)&&(x[_]===null||(O=b[_][0],O<T))||(x[_]=E,o.forEachOutboundEdge(_,B))}return null}return kR.bidirectional=s,kR}var Zz;function Upe(){if(Zz)return ec;Zz=1;var n=Dpe(),e=Ope();return ec.unweighted=n,ec.dijkstra=Ipe(),ec.astar=Npe(),ec.bidirectional=n.bidirectional,ec.singleSource=n.singleSource,ec.singleSourceLength=n.singleSourceLength,ec.undirectedSingleSourceLength=n.undirectedSingleSourceLength,ec.brandes=n.brandes,ec.edgePathFromNodePath=e.edgePathFromNodePath,ec}Upe();var iP=ux(),fn=n=>cx(n,iP),rP=ux();fn.write=n=>cx(n,rP);var ST=ux();fn.onStart=n=>cx(n,ST);var sP=ux();fn.onFrame=n=>cx(n,sP);var oP=ux();fn.onFinish=n=>cx(n,oP);var E0=[];fn.setTimeout=(n,e)=>{const t=fn.now()+e,i=()=>{const s=E0.findIndex(o=>o.cancel==i);~s&&E0.splice(s,1),cd-=~s?1:0},r={time:t,handler:n,cancel:i};return E0.splice(YG(t),0,r),cd+=1,ZG(),r};var YG=n=>~(~E0.findIndex(e=>e.time>n)||~E0.length);fn.cancel=n=>{ST.delete(n),sP.delete(n),oP.delete(n),iP.delete(n),rP.delete(n)};fn.sync=n=>{RD=!0,fn.batchedUpdates(n),RD=!1};fn.throttle=n=>{let e;function t(){try{n(...e)}finally{e=null}}function i(...r){e=r,fn.onStart(t)}return i.handler=n,i.cancel=()=>{ST.delete(t),e=null},i};var aP=typeof window<"u"?window.requestAnimationFrame:(()=>{});fn.use=n=>aP=n;fn.now=typeof performance<"u"?()=>performance.now():Date.now;fn.batchedUpdates=n=>n();fn.catch=console.error;fn.frameLoop="always";fn.advance=()=>{fn.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):QG()};var ld=-1,cd=0,RD=!1;function cx(n,e){RD?(e.delete(n),n(0)):(e.add(n),ZG())}function ZG(){ld<0&&(ld=0,fn.frameLoop!=="demand"&&aP(KG))}function kpe(){ld=-1}function KG(){~ld&&(aP(KG),fn.batchedUpdates(QG))}function QG(){const n=ld;ld=fn.now();const e=YG(ld);if(e&&(JG(E0.splice(0,e),t=>t.handler()),cd-=e),!cd){kpe();return}ST.flush(),iP.flush(n?Math.min(64,ld-n):16.667),sP.flush(),rP.flush(),oP.flush()}function ux(){let n=new Set,e=n;return{add(t){cd+=e==n&&!n.has(t)?1:0,n.add(t)},delete(t){return cd-=e==n&&n.has(t)?1:0,n.delete(t)},flush(t){e.size&&(n=new Set,cd-=e.size,JG(e,i=>i(t)&&n.add(i)),cd+=n.size,e=n)}}}function JG(n,e){n.forEach(t=>{try{e(t)}catch(i){fn.catch(i)}})}var zpe=Object.defineProperty,Fpe=(n,e)=>{for(var t in e)zpe(n,t,{get:e[t],enumerable:!0})},mc={};Fpe(mc,{assign:()=>Vpe,colors:()=>fd,createStringInterpolator:()=>cP,skipAnimation:()=>tH,to:()=>eH,willAdvance:()=>uP});function DD(){}var Bpe=(n,e,t)=>Object.defineProperty(n,e,{value:t,writable:!0,configurable:!0}),Mt={arr:Array.isArray,obj:n=>!!n&&n.constructor.name==="Object",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",und:n=>n===void 0};function wf(n,e){if(Mt.arr(n)){if(!Mt.arr(e)||n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}return n===e}var hi=(n,e)=>n.forEach(e);function qf(n,e,t){if(Mt.arr(n)){for(let i=0;i<n.length;i++)e.call(t,n[i],`${i}`);return}for(const i in n)n.hasOwnProperty(i)&&e.call(t,n[i],i)}var xl=n=>Mt.und(n)?[]:Mt.arr(n)?n:[n];function Jb(n,e){if(n.size){const t=Array.from(n);n.clear(),hi(t,e)}}var Ob=(n,...e)=>Jb(n,t=>t(...e)),lP=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),cP,eH,fd=null,tH=!1,uP=DD,Vpe=n=>{n.to&&(eH=n.to),n.now&&(fn.now=n.now),n.colors!==void 0&&(fd=n.colors),n.skipAnimation!=null&&(tH=n.skipAnimation),n.createStringInterpolator&&(cP=n.createStringInterpolator),n.requestAnimationFrame&&fn.use(n.requestAnimationFrame),n.batchedUpdates&&(fn.batchedUpdates=n.batchedUpdates),n.willAdvance&&(uP=n.willAdvance),n.frameLoop&&(fn.frameLoop=n.frameLoop)},e_=new Set,yl=[],zR=[],hM=0,ET={get idle(){return!e_.size&&!yl.length},start(n){hM>n.priority?(e_.add(n),fn.onStart(Gpe)):(nH(n),fn(OD))},advance:OD,sort(n){if(hM)fn.onFrame(()=>ET.sort(n));else{const e=yl.indexOf(n);~e&&(yl.splice(e,1),iH(n))}},clear(){yl=[],e_.clear()}};function Gpe(){e_.forEach(nH),e_.clear(),fn(OD)}function nH(n){yl.includes(n)||iH(n)}function iH(n){yl.splice(Hpe(yl,e=>e.priority>n.priority),0,n)}function OD(n){const e=zR;for(let t=0;t<yl.length;t++){const i=yl[t];hM=i.priority,i.idle||(uP(i),i.advance(n),i.idle||e.push(i))}return hM=0,zR=yl,zR.length=0,yl=e,yl.length>0}function Hpe(n,e){const t=n.findIndex(e);return t<0?n.length:t}var jpe={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},uc="[-+]?\\d*\\.?\\d+",dM=uc+"%";function MT(...n){return"\\(\\s*("+n.join(")\\s*,\\s*(")+")\\s*\\)"}var Wpe=new RegExp("rgb"+MT(uc,uc,uc)),$pe=new RegExp("rgba"+MT(uc,uc,uc,uc)),qpe=new RegExp("hsl"+MT(uc,dM,dM)),Xpe=new RegExp("hsla"+MT(uc,dM,dM,uc)),Ype=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Zpe=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Kpe=/^#([0-9a-fA-F]{6})$/,Qpe=/^#([0-9a-fA-F]{8})$/;function Jpe(n){let e;return typeof n=="number"?n>>>0===n&&n>=0&&n<=4294967295?n:null:(e=Kpe.exec(n))?parseInt(e[1]+"ff",16)>>>0:fd&&fd[n]!==void 0?fd[n]:(e=Wpe.exec(n))?(n0(e[1])<<24|n0(e[2])<<16|n0(e[3])<<8|255)>>>0:(e=$pe.exec(n))?(n0(e[1])<<24|n0(e[2])<<16|n0(e[3])<<8|Jz(e[4]))>>>0:(e=Ype.exec(n))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=Qpe.exec(n))?parseInt(e[1],16)>>>0:(e=Zpe.exec(n))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=qpe.exec(n))?(Kz(Qz(e[1]),pS(e[2]),pS(e[3]))|255)>>>0:(e=Xpe.exec(n))?(Kz(Qz(e[1]),pS(e[2]),pS(e[3]))|Jz(e[4]))>>>0:null}function FR(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function Kz(n,e,t){const i=t<.5?t*(1+e):t+e-t*e,r=2*t-i,s=FR(r,i,n+1/3),o=FR(r,i,n),a=FR(r,i,n-1/3);return Math.round(s*255)<<24|Math.round(o*255)<<16|Math.round(a*255)<<8}function n0(n){const e=parseInt(n,10);return e<0?0:e>255?255:e}function Qz(n){return(parseFloat(n)%360+360)%360/360}function Jz(n){const e=parseFloat(n);return e<0?0:e>1?255:Math.round(e*255)}function pS(n){const e=parseFloat(n);return e<0?0:e>100?1:e/100}function e5(n){let e=Jpe(n);if(e===null)return n;e=e||0;const t=(e&4278190080)>>>24,i=(e&16711680)>>>16,r=(e&65280)>>>8,s=(e&255)/255;return`rgba(${t}, ${i}, ${r}, ${s})`}var N_=(n,e,t)=>{if(Mt.fun(n))return n;if(Mt.arr(n))return N_({range:n,output:e,extrapolate:t});if(Mt.str(n.output[0]))return cP(n);const i=n,r=i.output,s=i.range||[0,1],o=i.extrapolateLeft||i.extrapolate||"extend",a=i.extrapolateRight||i.extrapolate||"extend",l=i.easing||(c=>c);return c=>{const f=tme(c,s);return eme(c,s[f],s[f+1],r[f],r[f+1],l,o,a,i.map)}};function eme(n,e,t,i,r,s,o,a,l){let c=l?l(n):n;if(c<e){if(o==="identity")return c;o==="clamp"&&(c=e)}if(c>t){if(a==="identity")return c;a==="clamp"&&(c=t)}return i===r?i:e===t?n<=e?i:r:(e===-1/0?c=-c:t===1/0?c=c-e:c=(c-e)/(t-e),c=s(c),i===-1/0?c=-c:r===1/0?c=c+i:c=c*(r-i)+i,c)}function tme(n,e){for(var t=1;t<e.length-1&&!(e[t]>=n);++t);return t-1}var nme={linear:n=>n},U_=Symbol.for("FluidValue.get"),V0=Symbol.for("FluidValue.observers"),au=n=>!!(n&&n[U_]),ml=n=>n&&n[U_]?n[U_]():n,t5=n=>n[V0]||null;function ime(n,e){n.eventObserved?n.eventObserved(e):n(e)}function pM(n,e){const t=n[V0];t&&t.forEach(i=>{ime(i,e)})}var rme=class{constructor(n){if(!n&&!(n=this.get))throw Error("Unknown getter");sme(this,n)}},sme=(n,e)=>rH(n,U_,e);function fx(n,e){if(n[U_]){let t=n[V0];t||rH(n,V0,t=new Set),t.has(e)||(t.add(e),n.observerAdded&&n.observerAdded(t.size,e))}return e}function mM(n,e){const t=n[V0];if(t&&t.has(e)){const i=t.size-1;i?t.delete(e):n[V0]=null,n.observerRemoved&&n.observerRemoved(i,e)}}var rH=(n,e,t)=>Object.defineProperty(n,e,{value:t,writable:!0,configurable:!0}),IS=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,ome=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,n5=new RegExp(`(${IS.source})(%|[a-z]+)`,"i"),ame=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,TT=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,sH=n=>{const[e,t]=lme(n);if(!e||lP())return n;const i=window.getComputedStyle(document.documentElement).getPropertyValue(e);if(i)return i.trim();if(t&&t.startsWith("--")){const r=window.getComputedStyle(document.documentElement).getPropertyValue(t);return r||n}else{if(t&&TT.test(t))return sH(t);if(t)return t}return n},lme=n=>{const e=TT.exec(n);if(!e)return[,];const[,t,i]=e;return[t,i]},BR,cme=(n,e,t,i,r)=>`rgba(${Math.round(e)}, ${Math.round(t)}, ${Math.round(i)}, ${r})`,oH=n=>{BR||(BR=fd?new RegExp(`(${Object.keys(fd).join("|")})(?!\\w)`,"g"):/^\b$/);const e=n.output.map(s=>ml(s).replace(TT,sH).replace(ome,e5).replace(BR,e5)),t=e.map(s=>s.match(IS).map(Number)),r=t[0].map((s,o)=>t.map(a=>{if(!(o in a))throw Error('The arity of each "output" value must be equal');return a[o]})).map(s=>N_({...n,output:s}));return s=>{const o=!n5.test(e[0])&&e.find(l=>n5.test(l))?.replace(IS,"");let a=0;return e[0].replace(IS,()=>`${r[a++](s)}${o||""}`).replace(ame,cme)}},fP="react-spring: ",aH=n=>{const e=n;let t=!1;if(typeof e!="function")throw new TypeError(`${fP}once requires a function parameter`);return(...i)=>{t||(e(...i),t=!0)}},ume=aH(console.warn);function fme(){ume(`${fP}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var hme=aH(console.warn);function dme(){hme(`${fP}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function AT(n){return Mt.str(n)&&(n[0]=="#"||/\d/.test(n)||!lP()&&TT.test(n)||n in(fd||{}))}var hP=lP()?$.useEffect:$.useLayoutEffect,pme=()=>{const n=$.useRef(!1);return hP(()=>(n.current=!0,()=>{n.current=!1}),[]),n};function lH(){const n=$.useState()[1],e=pme();return()=>{e.current&&n(Math.random())}}var cH=n=>$.useEffect(n,mme),mme=[];function i5(n){const e=$.useRef(void 0);return $.useEffect(()=>{e.current=n}),e.current}var k_=Symbol.for("Animated:node"),gme=n=>!!n&&n[k_]===n,su=n=>n&&n[k_],dP=(n,e)=>Bpe(n,k_,e),CT=n=>n&&n[k_]&&n[k_].getPayload(),uH=class{constructor(){dP(this,this)}getPayload(){return this.payload||[]}},RT=class fH extends uH{constructor(e){super(),this._value=e,this.done=!0,this.durationProgress=0,Mt.num(this._value)&&(this.lastPosition=this._value)}static create(e){return new fH(e)}getPayload(){return[this]}getValue(){return this._value}setValue(e,t){return Mt.num(e)&&(this.lastPosition=e,t&&(e=Math.round(e/t)*t,this.done&&(this.lastPosition=e))),this._value===e?!1:(this._value=e,!0)}reset(){const{done:e}=this;this.done=!1,Mt.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,e&&(this.lastVelocity=null),this.v0=null)}},gM=class hH extends RT{constructor(e){super(0),this._string=null,this._toString=N_({output:[e,e]})}static create(e){return new hH(e)}getValue(){const e=this._string;return e??(this._string=this._toString(this._value))}setValue(e){if(Mt.str(e)){if(e==this._string)return!1;this._string=e,this._value=1}else if(super.setValue(e))this._string=null;else return!1;return!0}reset(e){e&&(this._toString=N_({output:[this.getValue(),e]})),this._value=0,super.reset()}},vM={dependencies:null},pP=class extends uH{constructor(n){super(),this.source=n,this.setValue(n)}getValue(n){const e={};return qf(this.source,(t,i)=>{gme(t)?e[i]=t.getValue(n):au(t)?e[i]=ml(t):n||(e[i]=t)}),e}setValue(n){this.source=n,this.payload=this._makePayload(n)}reset(){this.payload&&hi(this.payload,n=>n.reset())}_makePayload(n){if(n){const e=new Set;return qf(n,this._addToPayload,e),Array.from(e)}}_addToPayload(n){vM.dependencies&&au(n)&&vM.dependencies.add(n);const e=CT(n);e&&hi(e,t=>this.add(t))}},vme=class dH extends pP{constructor(e){super(e)}static create(e){return new dH(e)}getValue(){return this.source.map(e=>e.getValue())}setValue(e){const t=this.getPayload();return e.length==t.length?t.map((i,r)=>i.setValue(e[r])).some(Boolean):(super.setValue(e.map(yme)),!0)}};function yme(n){return(AT(n)?gM:RT).create(n)}function LD(n){const e=su(n);return e?e.constructor:Mt.arr(n)?vme:AT(n)?gM:RT}var r5=(n,e)=>{const t=!Mt.fun(n)||n.prototype&&n.prototype.isReactComponent;return $.forwardRef((i,r)=>{const s=$.useRef(null),o=t&&$.useCallback(b=>{s.current=xme(r,b)},[r]),[a,l]=_me(i,e),c=lH(),f=()=>{const b=s.current;if(t&&!b)return;(b?e.applyAnimatedValues(b,a.getValue(!0)):!1)===!1&&c()},d=new bme(f,l),m=$.useRef(void 0);hP(()=>(m.current=d,hi(l,b=>fx(b,d)),()=>{m.current&&(hi(m.current.deps,b=>mM(b,m.current)),fn.cancel(m.current.update))})),$.useEffect(f,[]),cH(()=>()=>{const b=m.current;hi(b.deps,x=>mM(x,b))});const v=e.getComponentProps(a.getValue());return $.createElement(n,{...v,ref:o})})},bme=class{constructor(n,e){this.update=n,this.deps=e}eventObserved(n){n.type=="change"&&fn.write(this.update)}};function _me(n,e){const t=new Set;return vM.dependencies=t,n.style&&(n={...n,style:e.createAnimatedStyle(n.style)}),n=new pP(n),vM.dependencies=null,[n,t]}function xme(n,e){return n&&(Mt.fun(n)?n(e):n.current=e),e}var s5=Symbol.for("AnimatedComponent"),wme=(n,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:t=r=>new pP(r),getComponentProps:i=r=>r}={})=>{const r={applyAnimatedValues:e,createAnimatedStyle:t,getComponentProps:i},s=o=>{const a=o5(o)||"Anonymous";return Mt.str(o)?o=s[o]||(s[o]=r5(o,r)):o=o[s5]||(o[s5]=r5(o,r)),o.displayName=`Animated(${a})`,o};return qf(n,(o,a)=>{Mt.arr(n)&&(a=o5(o)),s[a]=s(o)}),{animated:s}},o5=n=>Mt.str(n)?n:n&&Mt.str(n.displayName)?n.displayName:Mt.fun(n)&&n.name||null;function Fp(n,...e){return Mt.fun(n)?n(...e):n}var t_=(n,e)=>n===!0||!!(e&&n&&(Mt.fun(n)?n(e):xl(n).includes(e))),pH=(n,e)=>Mt.obj(n)?e&&n[e]:n,mH=(n,e)=>n.default===!0?n[e]:n.default?n.default[e]:void 0,Sme=n=>n,mP=(n,e=Sme)=>{let t=Eme;n.default&&n.default!==!0&&(n=n.default,t=Object.keys(n));const i={};for(const r of t){const s=e(n[r],r);Mt.und(s)||(i[r]=s)}return i},Eme=["config","onProps","onStart","onChange","onPause","onResume","onRest"],Mme={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function Tme(n){const e={};let t=0;if(qf(n,(i,r)=>{Mme[r]||(e[r]=i,t++)}),t)return e}function gH(n){const e=Tme(n);if(e){const t={to:e};return qf(n,(i,r)=>r in e||(t[r]=i)),t}return{...n}}function z_(n){return n=ml(n),Mt.arr(n)?n.map(z_):AT(n)?mc.createStringInterpolator({range:[0,1],output:[n,n]})(1):n}function Ame(n){for(const e in n)return!0;return!1}function PD(n){return Mt.fun(n)||Mt.arr(n)&&Mt.obj(n[0])}function Cme(n,e){n.ref?.delete(n),e?.delete(n)}function Rme(n,e){e&&n.ref!==e&&(n.ref?.delete(n),e.add(n),n.ref=e)}var Dme={default:{tension:170,friction:26}},ID={...Dme.default,mass:1,damping:1,easing:nme.linear,clamp:!1},Ome=class{constructor(){this.velocity=0,Object.assign(this,ID)}};function Lme(n,e,t){t&&(t={...t},a5(t,e),e={...t,...e}),a5(n,e),Object.assign(n,e);for(const o in ID)n[o]==null&&(n[o]=ID[o]);let{frequency:i,damping:r}=n;const{mass:s}=n;return Mt.und(i)||(i<.01&&(i=.01),r<0&&(r=0),n.tension=Math.pow(2*Math.PI/i,2)*s,n.friction=4*Math.PI*r*s/i),n}function a5(n,e){if(!Mt.und(e.decay))n.duration=void 0;else{const t=!Mt.und(e.tension)||!Mt.und(e.friction);(t||!Mt.und(e.frequency)||!Mt.und(e.damping)||!Mt.und(e.mass))&&(n.duration=void 0,n.decay=void 0),t&&(n.frequency=void 0)}}var l5=[],Pme=class{constructor(){this.changed=!1,this.values=l5,this.toValues=null,this.fromValues=l5,this.config=new Ome,this.immediate=!1}};function vH(n,{key:e,props:t,defaultProps:i,state:r,actions:s}){return new Promise((o,a)=>{let l,c,f=t_(t.cancel??i?.cancel,e);if(f)v();else{Mt.und(t.pause)||(r.paused=t_(t.pause,e));let b=i?.pause;b!==!0&&(b=r.paused||t_(b,e)),l=Fp(t.delay||0,e),b?(r.resumeQueue.add(m),s.pause()):(s.resume(),m())}function d(){r.resumeQueue.add(m),r.timeouts.delete(c),c.cancel(),l=c.time-fn.now()}function m(){l>0&&!mc.skipAnimation?(r.delayed=!0,c=fn.setTimeout(v,l),r.pauseQueue.add(d),r.timeouts.add(c)):v()}function v(){r.delayed&&(r.delayed=!1),r.pauseQueue.delete(d),r.timeouts.delete(c),n<=(r.cancelId||0)&&(f=!0);try{s.start({...t,callId:n,cancel:f},o)}catch(b){a(b)}}})}var gP=(n,e)=>e.length==1?e[0]:e.some(t=>t.cancelled)?M0(n.get()):e.every(t=>t.noop)?yH(n.get()):ac(n.get(),e.every(t=>t.finished)),yH=n=>({value:n,noop:!0,finished:!0,cancelled:!1}),ac=(n,e,t=!1)=>({value:n,finished:e,cancelled:t}),M0=n=>({value:n,cancelled:!0,finished:!1});function bH(n,e,t,i){const{callId:r,parentId:s,onRest:o}=e,{asyncTo:a,promise:l}=t;return!s&&n===a&&!e.reset?l:t.promise=(async()=>{t.asyncId=r,t.asyncTo=n;const c=mP(e,(w,_)=>_==="onRest"?void 0:w);let f,d;const m=new Promise((w,_)=>(f=w,d=_)),v=w=>{const _=r<=(t.cancelId||0)&&M0(i)||r!==t.asyncId&&ac(i,!1);if(_)throw w.result=_,d(w),w},b=(w,_)=>{const A=new c5,T=new u5;return(async()=>{if(mc.skipAnimation)throw F_(t),T.result=ac(i,!1),d(T),T;v(A);const E=Mt.obj(w)?{...w}:{..._,to:w};E.parentId=r,qf(c,(R,O)=>{Mt.und(E[O])&&(E[O]=R)});const C=await i.start(E);return v(A),t.paused&&await new Promise(R=>{t.resumeQueue.add(R)}),C})()};let x;if(mc.skipAnimation)return F_(t),ac(i,!1);try{let w;Mt.arr(n)?w=(async _=>{for(const A of _)await b(A)})(n):w=Promise.resolve(n(b,i.stop.bind(i))),await Promise.all([w.then(f),m]),x=ac(i.get(),!0,!1)}catch(w){if(w instanceof c5)x=w.result;else if(w instanceof u5)x=w.result;else throw w}finally{r==t.asyncId&&(t.asyncId=s,t.asyncTo=s?a:void 0,t.promise=s?l:void 0)}return Mt.fun(o)&&fn.batchedUpdates(()=>{o(x,i,i.item)}),x})()}function F_(n,e){Jb(n.timeouts,t=>t.cancel()),n.pauseQueue.clear(),n.resumeQueue.clear(),n.asyncId=n.asyncTo=n.promise=void 0,e&&(n.cancelId=e)}var c5=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},u5=class extends Error{constructor(){super("SkipAnimationSignal")}},ND=n=>n instanceof vP,Ime=1,vP=class extends rme{constructor(){super(...arguments),this.id=Ime++,this._priority=0}get priority(){return this._priority}set priority(n){this._priority!=n&&(this._priority=n,this._onPriorityChange(n))}get(){const n=su(this);return n&&n.getValue()}to(...n){return mc.to(this,n)}interpolate(...n){return fme(),mc.to(this,n)}toJSON(){return this.get()}observerAdded(n){n==1&&this._attach()}observerRemoved(n){n==0&&this._detach()}_attach(){}_detach(){}_onChange(n,e=!1){pM(this,{type:"change",parent:this,value:n,idle:e})}_onPriorityChange(n){this.idle||ET.sort(this),pM(this,{type:"priority",parent:this,priority:n})}},hm=Symbol.for("SpringPhase"),_H=1,UD=2,kD=4,VR=n=>(n[hm]&_H)>0,Yh=n=>(n[hm]&UD)>0,pb=n=>(n[hm]&kD)>0,f5=(n,e)=>e?n[hm]|=UD|_H:n[hm]&=~UD,h5=(n,e)=>e?n[hm]|=kD:n[hm]&=~kD,Nme=class extends vP{constructor(n,e){if(super(),this.animation=new Pme,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!Mt.und(n)||!Mt.und(e)){const t=Mt.obj(n)?{...n}:{...e,from:n};Mt.und(t.default)&&(t.default=!0),this.start(t)}}get idle(){return!(Yh(this)||this._state.asyncTo)||pb(this)}get goal(){return ml(this.animation.to)}get velocity(){const n=su(this);return n instanceof RT?n.lastVelocity||0:n.getPayload().map(e=>e.lastVelocity||0)}get hasAnimated(){return VR(this)}get isAnimating(){return Yh(this)}get isPaused(){return pb(this)}get isDelayed(){return this._state.delayed}advance(n){let e=!0,t=!1;const i=this.animation;let{toValues:r}=i;const{config:s}=i,o=CT(i.to);!o&&au(i.to)&&(r=xl(ml(i.to))),i.values.forEach((c,f)=>{if(c.done)return;const d=c.constructor==gM?1:o?o[f].lastPosition:r[f];let m=i.immediate,v=d;if(!m){if(v=c.lastPosition,s.tension<=0){c.done=!0;return}let b=c.elapsedTime+=n;const x=i.fromValues[f],w=c.v0!=null?c.v0:c.v0=Mt.arr(s.velocity)?s.velocity[f]:s.velocity;let _;const A=s.precision||(x==d?.005:Math.min(1,Math.abs(d-x)*.001));if(Mt.und(s.duration))if(s.decay){const T=s.decay===!0?.998:s.decay,E=Math.exp(-(1-T)*b);v=x+w/(1-T)*(1-E),m=Math.abs(c.lastPosition-v)<=A,_=w*E}else{_=c.lastVelocity==null?w:c.lastVelocity;const T=s.restVelocity||A/10,E=s.clamp?0:s.bounce,C=!Mt.und(E),R=x==d?c.v0>0:x<d;let O,I=!1;const L=1,N=Math.ceil(n/L);for(let V=0;V<N&&(O=Math.abs(_)>T,!(!O&&(m=Math.abs(d-v)<=A,m)));++V){C&&(I=v==d||v>d==R,I&&(_=-_*E,v=d));const B=-s.tension*1e-6*(v-d),k=-s.friction*.001*_,j=(B+k)/s.mass;_=_+j*L,v=v+_*L}}else{let T=1;s.duration>0&&(this._memoizedDuration!==s.duration&&(this._memoizedDuration=s.duration,c.durationProgress>0&&(c.elapsedTime=s.duration*c.durationProgress,b=c.elapsedTime+=n)),T=(s.progress||0)+b/this._memoizedDuration,T=T>1?1:T<0?0:T,c.durationProgress=T),v=x+s.easing(T)*(d-x),_=(v-c.lastPosition)/n,m=T==1}c.lastVelocity=_,Number.isNaN(v)&&(console.warn("Got NaN while animating:",this),m=!0)}o&&!o[f].done&&(m=!1),m?c.done=!0:e=!1,c.setValue(v,s.round)&&(t=!0)});const a=su(this),l=a.getValue();if(e){const c=ml(i.to);(l!==c||t)&&!s.decay?(a.setValue(c),this._onChange(c)):t&&s.decay&&this._onChange(l),this._stop()}else t&&this._onChange(l)}set(n){return fn.batchedUpdates(()=>{this._stop(),this._focus(n),this._set(n)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(Yh(this)){const{to:n,config:e}=this.animation;fn.batchedUpdates(()=>{this._onStart(),e.decay||this._set(n,!1),this._stop()})}return this}update(n){return(this.queue||(this.queue=[])).push(n),this}start(n,e){let t;return Mt.und(n)?(t=this.queue||[],this.queue=[]):t=[Mt.obj(n)?n:{...e,to:n}],Promise.all(t.map(i=>this._update(i))).then(i=>gP(this,i))}stop(n){const{to:e}=this.animation;return this._focus(this.get()),F_(this._state,n&&this._lastCallId),fn.batchedUpdates(()=>this._stop(e,n)),this}reset(){this._update({reset:!0})}eventObserved(n){n.type=="change"?this._start():n.type=="priority"&&(this.priority=n.priority+1)}_prepareNode(n){const e=this.key||"";let{to:t,from:i}=n;t=Mt.obj(t)?t[e]:t,(t==null||PD(t))&&(t=void 0),i=Mt.obj(i)?i[e]:i,i==null&&(i=void 0);const r={to:t,from:i};return VR(this)||(n.reverse&&([t,i]=[i,t]),i=ml(i),Mt.und(i)?su(this)||this._set(t):this._set(i)),r}_update({...n},e){const{key:t,defaultProps:i}=this;n.default&&Object.assign(i,mP(n,(o,a)=>/^on/.test(a)?pH(o,t):o)),p5(this,n,"onProps"),gb(this,"onProps",n,this);const r=this._prepareNode(n);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const s=this._state;return vH(++this._lastCallId,{key:t,props:n,defaultProps:i,state:s,actions:{pause:()=>{pb(this)||(h5(this,!0),Ob(s.pauseQueue),gb(this,"onPause",ac(this,mb(this,this.animation.to)),this))},resume:()=>{pb(this)&&(h5(this,!1),Yh(this)&&this._resume(),Ob(s.resumeQueue),gb(this,"onResume",ac(this,mb(this,this.animation.to)),this))},start:this._merge.bind(this,r)}}).then(o=>{if(n.loop&&o.finished&&!(e&&o.noop)){const a=xH(n);if(a)return this._update(a,!0)}return o})}_merge(n,e,t){if(e.cancel)return this.stop(!0),t(M0(this));const i=!Mt.und(n.to),r=!Mt.und(n.from);if(i||r)if(e.callId>this._lastToId)this._lastToId=e.callId;else return t(M0(this));const{key:s,defaultProps:o,animation:a}=this,{to:l,from:c}=a;let{to:f=l,from:d=c}=n;r&&!i&&(!e.default||Mt.und(f))&&(f=d),e.reverse&&([f,d]=[d,f]);const m=!wf(d,c);m&&(a.from=d),d=ml(d);const v=!wf(f,l);v&&this._focus(f);const b=PD(e.to),{config:x}=a,{decay:w,velocity:_}=x;(i||r)&&(x.velocity=0),e.config&&!b&&Lme(x,Fp(e.config,s),e.config!==o.config?Fp(o.config,s):void 0);let A=su(this);if(!A||Mt.und(f))return t(ac(this,!0));const T=Mt.und(e.reset)?r&&!e.default:!Mt.und(d)&&t_(e.reset,s),E=T?d:this.get(),C=z_(f),R=Mt.num(C)||Mt.arr(C)||AT(C),O=!b&&(!R||t_(o.immediate||e.immediate,s));if(v){const V=LD(f);if(V!==A.constructor)if(O)A=this._set(C);else throw Error(`Cannot animate between ${A.constructor.name} and ${V.name}, as the "to" prop suggests`)}const I=A.constructor;let L=au(f),N=!1;if(!L){const V=T||!VR(this)&&m;(v||V)&&(N=wf(z_(E),C),L=!N),(!wf(a.immediate,O)&&!O||!wf(x.decay,w)||!wf(x.velocity,_))&&(L=!0)}if(N&&Yh(this)&&(a.changed&&!T?L=!0:L||this._stop(l)),!b&&((L||au(l))&&(a.values=A.getPayload(),a.toValues=au(f)?null:I==gM?[1]:xl(C)),a.immediate!=O&&(a.immediate=O,!O&&!T&&this._set(l)),L)){const{onRest:V}=a;hi(kme,k=>p5(this,e,k));const B=ac(this,mb(this,l));Ob(this._pendingCalls,B),this._pendingCalls.add(t),a.changed&&fn.batchedUpdates(()=>{a.changed=!T,V?.(B,this),T?Fp(o.onRest,B):a.onStart?.(B,this)})}T&&this._set(E),b?t(bH(e.to,e,this._state,this)):L?this._start():Yh(this)&&!v?this._pendingCalls.add(t):t(yH(E))}_focus(n){const e=this.animation;n!==e.to&&(t5(this)&&this._detach(),e.to=n,t5(this)&&this._attach())}_attach(){let n=0;const{to:e}=this.animation;au(e)&&(fx(e,this),ND(e)&&(n=e.priority+1)),this.priority=n}_detach(){const{to:n}=this.animation;au(n)&&mM(n,this)}_set(n,e=!0){const t=ml(n);if(!Mt.und(t)){const i=su(this);if(!i||!wf(t,i.getValue())){const r=LD(t);!i||i.constructor!=r?dP(this,r.create(t)):i.setValue(t),i&&fn.batchedUpdates(()=>{this._onChange(t,e)})}}return su(this)}_onStart(){const n=this.animation;n.changed||(n.changed=!0,gb(this,"onStart",ac(this,mb(this,n.to)),this))}_onChange(n,e){e||(this._onStart(),Fp(this.animation.onChange,n,this)),Fp(this.defaultProps.onChange,n,this),super._onChange(n,e)}_start(){const n=this.animation;su(this).reset(ml(n.to)),n.immediate||(n.fromValues=n.values.map(e=>e.lastPosition)),Yh(this)||(f5(this,!0),pb(this)||this._resume())}_resume(){mc.skipAnimation?this.finish():ET.start(this)}_stop(n,e){if(Yh(this)){f5(this,!1);const t=this.animation;hi(t.values,r=>{r.done=!0}),t.toValues&&(t.onChange=t.onPause=t.onResume=void 0),pM(this,{type:"idle",parent:this});const i=e?M0(this.get()):ac(this.get(),mb(this,n??t.to));Ob(this._pendingCalls,i),t.changed&&(t.changed=!1,gb(this,"onRest",i,this))}}};function mb(n,e){const t=z_(e),i=z_(n.get());return wf(i,t)}function xH(n,e=n.loop,t=n.to){const i=Fp(e);if(i){const r=i!==!0&&gH(i),s=(r||n).reverse,o=!r||r.reset;return B_({...n,loop:e,default:!1,pause:void 0,to:!s||PD(t)?t:void 0,from:o?n.from:void 0,reset:o,...r})}}function B_(n){const{to:e,from:t}=n=gH(n),i=new Set;return Mt.obj(e)&&d5(e,i),Mt.obj(t)&&d5(t,i),n.keys=i.size?Array.from(i):null,n}function Ume(n){const e=B_(n);return Mt.und(e.default)&&(e.default=mP(e)),e}function d5(n,e){qf(n,(t,i)=>t!=null&&e.add(i))}var kme=["onStart","onRest","onChange","onPause","onResume"];function p5(n,e,t){n.animation[t]=e[t]!==mH(e,t)?pH(e[t],n.key):void 0}function gb(n,e,...t){n.animation[e]?.(...t),n.defaultProps[e]?.(...t)}var zme=["onStart","onChange","onRest"],Fme=1,Bme=class{constructor(e,t){this.id=Fme++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),t&&(this._flush=t),e&&this.start({default:!0,...e})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(e=>e.idle&&!e.isDelayed&&!e.isPaused)}get item(){return this._item}set item(e){this._item=e}get(){const e={};return this.each((t,i)=>e[i]=t.get()),e}set(e){for(const t in e){const i=e[t];Mt.und(i)||this.springs[t].set(i)}}update(e){return e&&this.queue.push(B_(e)),this}start(e){let{queue:t}=this;return e?t=xl(e).map(B_):this.queue=[],this._flush?this._flush(this,t):(TH(this,t),zD(this,t))}stop(e,t){if(e!==!!e&&(t=e),t){const i=this.springs;hi(xl(t),r=>i[r].stop(!!e))}else F_(this._state,this._lastAsyncId),this.each(i=>i.stop(!!e));return this}pause(e){if(Mt.und(e))this.start({pause:!0});else{const t=this.springs;hi(xl(e),i=>t[i].pause())}return this}resume(e){if(Mt.und(e))this.start({pause:!1});else{const t=this.springs;hi(xl(e),i=>t[i].resume())}return this}each(e){qf(this.springs,e)}_onFrame(){const{onStart:e,onChange:t,onRest:i}=this._events,r=this._active.size>0,s=this._changed.size>0;(r&&!this._started||s&&!this._started)&&(this._started=!0,Jb(e,([l,c])=>{c.value=this.get(),l(c,this,this._item)}));const o=!r&&this._started,a=s||o&&i.size?this.get():null;s&&t.size&&Jb(t,([l,c])=>{c.value=a,l(c,this,this._item)}),o&&(this._started=!1,Jb(i,([l,c])=>{c.value=a,l(c,this,this._item)}))}eventObserved(e){if(e.type=="change")this._changed.add(e.parent),e.idle||this._active.add(e.parent);else if(e.type=="idle")this._active.delete(e.parent);else return;fn.onFrame(this._onFrame)}};function zD(n,e){return Promise.all(e.map(t=>wH(n,t))).then(t=>gP(n,t))}async function wH(n,e,t){const{keys:i,to:r,from:s,loop:o,onRest:a,onResolve:l}=e,c=Mt.obj(e.default)&&e.default;o&&(e.loop=!1),r===!1&&(e.to=null),s===!1&&(e.from=null);const f=Mt.arr(r)||Mt.fun(r)?r:void 0;f?(e.to=void 0,e.onRest=void 0,c&&(c.onRest=void 0)):hi(zme,x=>{const w=e[x];if(Mt.fun(w)){const _=n._events[x];e[x]=({finished:A,cancelled:T})=>{const E=_.get(w);E?(A||(E.finished=!1),T&&(E.cancelled=!0)):_.set(w,{value:null,finished:A||!1,cancelled:T||!1})},c&&(c[x]=e[x])}});const d=n._state;e.pause===!d.paused?(d.paused=e.pause,Ob(e.pause?d.pauseQueue:d.resumeQueue)):d.paused&&(e.pause=!0);const m=(i||Object.keys(n.springs)).map(x=>n.springs[x].start(e)),v=e.cancel===!0||mH(e,"cancel")===!0;(f||v&&d.asyncId)&&m.push(vH(++n._lastAsyncId,{props:e,state:d,actions:{pause:DD,resume:DD,start(x,w){v?(F_(d,n._lastAsyncId),w(M0(n))):(x.onRest=a,w(bH(f,x,d,n)))}}})),d.paused&&await new Promise(x=>{d.resumeQueue.add(x)});const b=gP(n,await Promise.all(m));if(o&&b.finished&&!(t&&b.noop)){const x=xH(e,o,r);if(x)return TH(n,[x]),wH(n,x,!0)}return l&&fn.batchedUpdates(()=>l(b,n,n.item)),b}function m5(n,e){const t={...n.springs};return e&&hi(xl(e),i=>{Mt.und(i.keys)&&(i=B_(i)),Mt.obj(i.to)||(i={...i,to:void 0}),MH(t,i,r=>EH(r))}),SH(n,t),t}function SH(n,e){qf(e,(t,i)=>{n.springs[i]||(n.springs[i]=t,fx(t,n))})}function EH(n,e){const t=new Nme;return t.key=n,e&&fx(t,e),t}function MH(n,e,t){e.keys&&hi(e.keys,i=>{(n[i]||(n[i]=t(i)))._prepareNode(e)})}function TH(n,e){hi(e,t=>{MH(n.springs,t,i=>EH(i,n))})}var Vme=$.createContext({pause:!1,immediate:!1}),Gme=()=>{const n=[],e=function(i){dme();const r=[];return hi(n,(s,o)=>{if(Mt.und(i))r.push(s.start());else{const a=t(i,s,o);a&&r.push(s.start(a))}}),r};e.current=n,e.add=function(i){n.includes(i)||n.push(i)},e.delete=function(i){const r=n.indexOf(i);~r&&n.splice(r,1)},e.pause=function(){return hi(n,i=>i.pause(...arguments)),this},e.resume=function(){return hi(n,i=>i.resume(...arguments)),this},e.set=function(i){hi(n,(r,s)=>{const o=Mt.fun(i)?i(s,r):i;o&&r.set(o)})},e.start=function(i){const r=[];return hi(n,(s,o)=>{if(Mt.und(i))r.push(s.start());else{const a=this._getProps(i,s,o);a&&r.push(s.start(a))}}),r},e.stop=function(){return hi(n,i=>i.stop(...arguments)),this},e.update=function(i){return hi(n,(r,s)=>r.update(this._getProps(i,r,s))),this};const t=function(i,r,s){return Mt.fun(i)?i(s,r):i};return e._getProps=t,e};function Hme(n,e,t){const i=Mt.fun(e)&&e;i&&!t&&(t=[]);const r=$.useMemo(()=>i||arguments.length==3?Gme():void 0,[]),s=$.useRef(0),o=lH(),a=$.useMemo(()=>({ctrls:[],queue:[],flush(_,A){const T=m5(_,A);return s.current>0&&!a.queue.length&&!Object.keys(T).some(C=>!_.springs[C])?zD(_,A):new Promise(C=>{SH(_,T),a.queue.push(()=>{C(zD(_,A))}),o()})}}),[]),l=$.useRef([...a.ctrls]),c=$.useRef([]),f=i5(n)||0;$.useMemo(()=>{hi(l.current.slice(n,f),_=>{Cme(_,r),_.stop(!0)}),l.current.length=n,d(f,n)},[n]),$.useMemo(()=>{d(0,Math.min(f,n))},t);function d(_,A){for(let T=_;T<A;T++){const E=l.current[T]||(l.current[T]=new Bme(null,a.flush)),C=i?i(T,E):e[T];C&&(c.current[T]=Ume(C))}}const m=l.current.map((_,A)=>m5(_,c.current[A])),v=$.useContext(Vme),b=i5(v),x=v!==b&&Ame(v);hP(()=>{s.current++,a.ctrls=l.current;const{queue:_}=a;_.length&&(a.queue=[],hi(_,A=>A())),hi(l.current,(A,T)=>{r?.add(A),x&&A.start({default:v});const E=c.current[T];E&&(Rme(A,E.ref),A.ref?A.queue.push(E):A.start(E))})}),cH(()=>()=>{hi(a.ctrls,_=>_.stop(!0))});const w=m.map(_=>({..._}));return r?[w,r]:w}function da(n,e){const t=Mt.fun(n),[[i],r]=Hme(1,t?n:[n],t?e||[]:e);return t||arguments.length==2?[i,r]:i}var jme=class extends vP{constructor(n,e){super(),this.source=n,this.idle=!0,this._active=new Set,this.calc=N_(...e);const t=this._get(),i=LD(t);dP(this,i.create(t))}advance(n){const e=this._get(),t=this.get();wf(e,t)||(su(this).setValue(e),this._onChange(e,this.idle)),!this.idle&&g5(this._active)&&GR(this)}_get(){const n=Mt.arr(this.source)?this.source.map(ml):xl(ml(this.source));return this.calc(...n)}_start(){this.idle&&!g5(this._active)&&(this.idle=!1,hi(CT(this),n=>{n.done=!1}),mc.skipAnimation?(fn.batchedUpdates(()=>this.advance()),GR(this)):ET.start(this))}_attach(){let n=1;hi(xl(this.source),e=>{au(e)&&fx(e,this),ND(e)&&(e.idle||this._active.add(e),n=Math.max(n,e.priority+1))}),this.priority=n,this._start()}_detach(){hi(xl(this.source),n=>{au(n)&&mM(n,this)}),this._active.clear(),GR(this)}eventObserved(n){n.type=="change"?n.idle?this.advance():(this._active.add(n.parent),this._start()):n.type=="idle"?this._active.delete(n.parent):n.type=="priority"&&(this.priority=xl(this.source).reduce((e,t)=>Math.max(e,(ND(t)?t.priority:0)+1),0))}};function Wme(n){return n.idle!==!1}function g5(n){return!n.size||Array.from(n).every(Wme)}function GR(n){n.idle||(n.idle=!0,hi(CT(n),e=>{e.done=!0}),pM(n,{type:"idle",parent:n}))}mc.assign({createStringInterpolator:oH,to:(n,e)=>new jme(n,e)});var $me=["primitive"].concat(Object.keys(nG).filter(n=>/^[A-Z]/.test(n)).map(n=>n[0].toLowerCase()+n.slice(1)));mc.assign({createStringInterpolator:oH,colors:jpe,frameLoop:"demand"});Ffe(()=>{fn.advance()});var qme=wme($me,{applyAnimatedValues:Df}),ar=qme.animated;const hx=new de,yP=new de,Xme=new de,v5=new ut;function Yme(n,e,t){const i=hx.setFromMatrixPosition(n.matrixWorld);i.project(e);const r=t.width/2,s=t.height/2;return[i.x*r+r,-(i.y*s)+s]}function Zme(n,e){const t=hx.setFromMatrixPosition(n.matrixWorld),i=yP.setFromMatrixPosition(e.matrixWorld),r=t.sub(i),s=e.getWorldDirection(Xme);return r.angleTo(s)>Math.PI/2}function Kme(n,e,t,i){const r=hx.setFromMatrixPosition(n.matrixWorld),s=r.clone();s.project(e),v5.set(s.x,s.y),t.setFromCamera(v5,e);const o=t.intersectObjects(i,!0);if(o.length){const a=o[0].distance;return r.distanceTo(t.ray.origin)<a}return!0}function Qme(n,e){if(e instanceof ym)return e.zoom;if(e instanceof Fr){const t=hx.setFromMatrixPosition(n.matrixWorld),i=yP.setFromMatrixPosition(e.matrixWorld),r=e.fov*Math.PI/180,s=t.distanceTo(i);return 1/(2*Math.tan(r/2)*s)}else return 1}function Jme(n,e,t){if(e instanceof Fr||e instanceof ym){const i=hx.setFromMatrixPosition(n.matrixWorld),r=yP.setFromMatrixPosition(e.matrixWorld),s=i.distanceTo(r),o=(t[1]-t[0])/(e.far-e.near),a=t[1]-o*e.far;return Math.round(o*s+a)}}const FD=n=>Math.abs(n)<1e-10?0:n;function AH(n,e,t=""){let i="matrix3d(";for(let r=0;r!==16;r++)i+=FD(e[r]*n.elements[r])+(r!==15?",":")");return t+i}const ege=(n=>e=>AH(e,n))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),tge=(n=>(e,t)=>AH(e,n(t),"translate(-50%,-50%)"))(n=>[1/n,1/n,1/n,1,-1/n,-1/n,-1/n,-1,1/n,1/n,1/n,1,1,1,1,1]);function nge(n){return n&&typeof n=="object"&&"current"in n}const bP=$.forwardRef(({children:n,eps:e=.001,style:t,className:i,prepend:r,center:s,fullscreen:o,portal:a,distanceFactor:l,sprite:c=!1,transform:f=!1,occlude:d,onOcclude:m,castShadow:v,receiveShadow:b,material:x,geometry:w,zIndexRange:_=[16777271,0],calculatePosition:A=Yme,as:T="div",wrapperClass:E,pointerEvents:C="auto",...R},O)=>{const{gl:I,camera:L,scene:N,size:V,raycaster:B,events:k,viewport:j}=Br(),[q]=$.useState(()=>document.createElement(T)),W=$.useRef(null),G=$.useRef(null),K=$.useRef(0),te=$.useRef([0,0]),ie=$.useRef(null),F=$.useRef(null),X=a?.current||k.connected||I.domElement.parentNode,ee=$.useRef(null),le=$.useRef(!1),oe=$.useMemo(()=>d&&d!=="blending"||Array.isArray(d)&&d.length&&nge(d[0]),[d]);$.useLayoutEffect(()=>{const Ee=I.domElement;d&&d==="blending"?(Ee.style.zIndex=`${Math.floor(_[0]/2)}`,Ee.style.position="absolute",Ee.style.pointerEvents="none"):(Ee.style.zIndex=null,Ee.style.position=null,Ee.style.pointerEvents=null)},[d]),$.useLayoutEffect(()=>{if(G.current){const Ee=W.current=j4.createRoot(q);if(N.updateMatrixWorld(),f)q.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const Ce=A(G.current,L,V);q.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${Ce[0]}px,${Ce[1]}px,0);transform-origin:0 0;`}return X&&(r?X.prepend(q):X.appendChild(q)),()=>{X&&X.removeChild(q),Ee.unmount()}}},[X,f]),$.useLayoutEffect(()=>{E&&(q.className=E)},[E]);const ue=$.useMemo(()=>f?{position:"absolute",top:0,left:0,width:V.width,height:V.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:s?"translate3d(-50%,-50%,0)":"none",...o&&{top:-V.height/2,left:-V.width/2,width:V.width,height:V.height},...t},[t,s,o,V,f]),he=$.useMemo(()=>({position:"absolute",pointerEvents:C}),[C]);$.useLayoutEffect(()=>{if(le.current=!1,f){var Ee;(Ee=W.current)==null||Ee.render($.createElement("div",{ref:ie,style:ue},$.createElement("div",{ref:F,style:he},$.createElement("div",{ref:O,className:i,style:t,children:n}))))}else{var Ce;(Ce=W.current)==null||Ce.render($.createElement("div",{ref:O,style:ue,className:i,children:n}))}});const be=$.useRef(!0);yT(Ee=>{if(G.current){L.updateMatrixWorld(),G.current.updateWorldMatrix(!0,!1);const Ce=f?te.current:A(G.current,L,V);if(f||Math.abs(K.current-L.zoom)>e||Math.abs(te.current[0]-Ce[0])>e||Math.abs(te.current[1]-Ce[1])>e){const we=Zme(G.current,L);let ae=!1;oe&&(Array.isArray(d)?ae=d.map(Ie=>Ie.current):d!=="blending"&&(ae=[N]));const ve=be.current;if(ae){const Ie=Kme(G.current,L,B,ae);be.current=Ie&&!we}else be.current=!we;ve!==be.current&&(m?m(!be.current):q.style.display=be.current?"block":"none");const xe=Math.floor(_[0]/2),me=d?oe?[_[0],xe]:[xe-1,0]:_;if(q.style.zIndex=`${Jme(G.current,L,me)}`,f){const[Ie,Ne]=[V.width/2,V.height/2],ke=L.projectionMatrix.elements[5]*Ne,{isOrthographicCamera:Fe,top:Ae,left:tt,bottom:se,right:Z}=L,ye=ege(L.matrixWorldInverse),Y=Fe?`scale(${ke})translate(${FD(-(Z+tt)/2)}px,${FD((Ae+se)/2)}px)`:`translateZ(${ke}px)`;let J=G.current.matrixWorld;c&&(J=L.matrixWorldInverse.clone().transpose().copyPosition(J).scale(G.current.scale),J.elements[3]=J.elements[7]=J.elements[11]=0,J.elements[15]=1),q.style.width=V.width+"px",q.style.height=V.height+"px",q.style.perspective=Fe?"":`${ke}px`,ie.current&&F.current&&(ie.current.style.transform=`${Y}${ye}translate(${Ie}px,${Ne}px)`,F.current.style.transform=tge(J,1/((l||10)/400)))}else{const Ie=l===void 0?1:Qme(G.current,L)*l;q.style.transform=`translate3d(${Ce[0]}px,${Ce[1]}px,0) scale(${Ie})`}te.current=Ce,K.current=L.zoom}}if(!oe&&ee.current&&!le.current)if(f){if(ie.current){const Ce=ie.current.children[0];if(Ce!=null&&Ce.clientWidth&&Ce!=null&&Ce.clientHeight){const{isOrthographicCamera:we}=L;if(we||w)R.scale&&(Array.isArray(R.scale)?R.scale instanceof de?ee.current.scale.copy(R.scale.clone().divideScalar(1)):ee.current.scale.set(1/R.scale[0],1/R.scale[1],1/R.scale[2]):ee.current.scale.setScalar(1/R.scale));else{const ae=(l||10)/400,ve=Ce.clientWidth*ae,xe=Ce.clientHeight*ae;ee.current.scale.set(ve,xe,1)}le.current=!0}}}else{const Ce=q.children[0];if(Ce!=null&&Ce.clientWidth&&Ce!=null&&Ce.clientHeight){const we=1/j.factor,ae=Ce.clientWidth*we,ve=Ce.clientHeight*we;ee.current.scale.set(ae,ve,1),le.current=!0}ee.current.lookAt(Ee.camera.position)}});const Te=$.useMemo(()=>({vertexShader:f?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom"
            is false.
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;

            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[f]);return $.createElement("group",pd({},R,{ref:G}),d&&!oe&&$.createElement("mesh",{castShadow:v,receiveShadow:b,ref:ee},w||$.createElement("planeGeometry",null),x||$.createElement("shaderMaterial",{side:yr,vertexShader:Te.vertexShader,fragmentShader:Te.fragmentShader})))});function em(n,e="pointer",t="auto",i=document.body){$.useEffect(()=>{if(n)return i.style.cursor=e,()=>{i.style.cursor=t}},[n])}function ige(n,e,t){return Math.max(e,Math.min(n,t))}const Gi={toVector(n,e){return n===void 0&&(n=e),Array.isArray(n)?n:[n,n]},add(n,e){return[n[0]+e[0],n[1]+e[1]]},sub(n,e){return[n[0]-e[0],n[1]-e[1]]},addTo(n,e){n[0]+=e[0],n[1]+=e[1]},subTo(n,e){n[0]-=e[0],n[1]-=e[1]}};function y5(n,e,t){return e===0||Math.abs(e)===1/0?Math.pow(n,t*5):n*e*t/(e+t*n)}function b5(n,e,t,i=.15){return i===0?ige(n,e,t):n<e?-y5(e-n,t-e,i)+e:n>t?+y5(n-t,t-e,i)+t:n}function rge(n,[e,t],[i,r]){const[[s,o],[a,l]]=n;return[b5(e,s,o,i),b5(t,a,l,r)]}function sge(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function oge(n){var e=sge(n,"string");return typeof e=="symbol"?e:String(e)}function zr(n,e,t){return e=oge(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function _5(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function lr(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?_5(Object(t),!0).forEach(function(i){zr(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):_5(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}const CH={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function x5(n){return n?n[0].toUpperCase()+n.slice(1):""}const age=["enter","leave"];function lge(n=!1,e){return n&&!age.includes(e)}function cge(n,e="",t=!1){const i=CH[n],r=i&&i[e]||e;return"on"+x5(n)+x5(r)+(lge(t,r)?"Capture":"")}const uge=["gotpointercapture","lostpointercapture"];function fge(n){let e=n.substring(2).toLowerCase();const t=!!~e.indexOf("passive");t&&(e=e.replace("passive",""));const i=uge.includes(e)?"capturecapture":"capture",r=!!~e.indexOf(i);return r&&(e=e.replace("capture","")),{device:e,capture:r,passive:t}}function hge(n,e=""){const t=CH[n],i=t&&t[e]||e;return n+i}function DT(n){return"touches"in n}function RH(n){return DT(n)?"touch":"pointerType"in n?n.pointerType:"mouse"}function dge(n){return Array.from(n.touches).filter(e=>{var t,i;return e.target===n.currentTarget||((t=n.currentTarget)===null||t===void 0||(i=t.contains)===null||i===void 0?void 0:i.call(t,e.target))})}function pge(n){return n.type==="touchend"||n.type==="touchcancel"?n.changedTouches:n.targetTouches}function DH(n){return DT(n)?pge(n)[0]:n}function BD(n,e){try{const t=e.clientX-n.clientX,i=e.clientY-n.clientY,r=(e.clientX+n.clientX)/2,s=(e.clientY+n.clientY)/2,o=Math.hypot(t,i);return{angle:-(Math.atan2(t,i)*180)/Math.PI,distance:o,origin:[r,s]}}catch{}return null}function mge(n){return dge(n).map(e=>e.identifier)}function w5(n,e){const[t,i]=Array.from(n.touches).filter(r=>e.includes(r.identifier));return BD(t,i)}function HR(n){const e=DH(n);return DT(n)?e.identifier:e.pointerId}function G0(n){const e=DH(n);return[e.clientX,e.clientY]}const S5=40,E5=800;function OH(n){let{deltaX:e,deltaY:t,deltaMode:i}=n;return i===1?(e*=S5,t*=S5):i===2&&(e*=E5,t*=E5),[e,t]}function gge(n){var e,t;const{scrollX:i,scrollY:r,scrollLeft:s,scrollTop:o}=n.currentTarget;return[(e=i??s)!==null&&e!==void 0?e:0,(t=r??o)!==null&&t!==void 0?t:0]}function vge(n){const e={};if("buttons"in n&&(e.buttons=n.buttons),"shiftKey"in n){const{shiftKey:t,altKey:i,metaKey:r,ctrlKey:s}=n;Object.assign(e,{shiftKey:t,altKey:i,metaKey:r,ctrlKey:s})}return e}function yM(n,...e){return typeof n=="function"?n(...e):n}function yge(){}function bge(...n){return n.length===0?yge:n.length===1?n[0]:function(){let e;for(const t of n)e=t.apply(this,arguments)||e;return e}}function M5(n,e){return Object.assign({},e,n||{})}const _ge=32;class LH{constructor(e,t,i){this.ctrl=e,this.args=t,this.key=i,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:t,ingKey:i,args:r}=this;t[i]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=r,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const t=this.state,i=this.config;t._active||(this.reset(),this.computeInitial(),t._active=!0,t.target=e.target,t.currentTarget=e.currentTarget,t.lastOffset=i.from?yM(i.from,t):t.offset,t.offset=t.lastOffset,t.startTime=t.timeStamp=e.timeStamp)}computeValues(e){const t=this.state;t._values=e,t.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:t,config:i,shared:r}=this;t.args=this.args;let s=0;if(e&&(t.event=e,i.preventDefault&&e.cancelable&&t.event.preventDefault(),t.type=e.type,r.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,r.locked=!!document.pointerLockElement,Object.assign(r,vge(e)),r.down=r.pressed=r.buttons%2===1||r.touches>0,s=e.timeStamp-t.timeStamp,t.timeStamp=e.timeStamp,t.elapsedTime=t.timeStamp-t.startTime),t._active){const R=t._delta.map(Math.abs);Gi.addTo(t._distance,R)}this.axisIntent&&this.axisIntent(e);const[o,a]=t._movement,[l,c]=i.threshold,{_step:f,values:d}=t;if(i.hasCustomTransform?(f[0]===!1&&(f[0]=Math.abs(o)>=l&&d[0]),f[1]===!1&&(f[1]=Math.abs(a)>=c&&d[1])):(f[0]===!1&&(f[0]=Math.abs(o)>=l&&Math.sign(o)*l),f[1]===!1&&(f[1]=Math.abs(a)>=c&&Math.sign(a)*c)),t.intentional=f[0]!==!1||f[1]!==!1,!t.intentional)return;const m=[0,0];if(i.hasCustomTransform){const[R,O]=d;m[0]=f[0]!==!1?R-f[0]:0,m[1]=f[1]!==!1?O-f[1]:0}else m[0]=f[0]!==!1?o-f[0]:0,m[1]=f[1]!==!1?a-f[1]:0;this.restrictToAxis&&!t._blocked&&this.restrictToAxis(m);const v=t.offset,b=t._active&&!t._blocked||t.active;b&&(t.first=t._active&&!t.active,t.last=!t._active&&t.active,t.active=r[this.ingKey]=t._active,e&&(t.first&&("bounds"in i&&(t._bounds=yM(i.bounds,t)),this.setup&&this.setup()),t.movement=m,this.computeOffset()));const[x,w]=t.offset,[[_,A],[T,E]]=t._bounds;t.overflow=[x<_?-1:x>A?1:0,w<T?-1:w>E?1:0],t._movementBound[0]=t.overflow[0]?t._movementBound[0]===!1?t._movement[0]:t._movementBound[0]:!1,t._movementBound[1]=t.overflow[1]?t._movementBound[1]===!1?t._movement[1]:t._movementBound[1]:!1;const C=t._active?i.rubberband||[0,0]:[0,0];if(t.offset=rge(t._bounds,t.offset,C),t.delta=Gi.sub(t.offset,v),this.computeMovement(),b&&(!t.last||s>_ge)){t.delta=Gi.sub(t.offset,v);const R=t.delta.map(Math.abs);Gi.addTo(t.distance,R),t.direction=t.delta.map(Math.sign),t._direction=t._delta.map(Math.sign),!t.first&&s>0&&(t.velocity=[R[0]/s,R[1]/s],t.timeDelta=s)}}emit(){const e=this.state,t=this.shared,i=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!i.triggerAllEvents)return;const r=this.handler(lr(lr(lr({},t),e),{},{[this.aliasKey]:e.values}));r!==void 0&&(e.memo=r)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function xge([n,e],t){const i=Math.abs(n),r=Math.abs(e);if(i>r&&i>t)return"x";if(r>i&&r>t)return"y"}class dx extends LH{constructor(...e){super(...e),zr(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=Gi.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=Gi.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const t=this.state,i=this.config;if(!t.axis&&e){const r=typeof i.axisThreshold=="object"?i.axisThreshold[RH(e)]:i.axisThreshold;t.axis=xge(t._movement,r)}t._blocked=(i.lockDirection||!!i.axis)&&!t.axis||!!i.axis&&i.axis!==t.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0;break}}}const wge=n=>n,T5=.15,PH={enabled(n=!0){return n},eventOptions(n,e,t){return lr(lr({},t.shared.eventOptions),n)},preventDefault(n=!1){return n},triggerAllEvents(n=!1){return n},rubberband(n=0){switch(n){case!0:return[T5,T5];case!1:return[0,0];default:return Gi.toVector(n)}},from(n){if(typeof n=="function")return n;if(n!=null)return Gi.toVector(n)},transform(n,e,t){const i=n||t.shared.transform;return this.hasCustomTransform=!!i,i||wge},threshold(n){return Gi.toVector(n,0)}},Sge=0,bm=lr(lr({},PH),{},{axis(n,e,{axis:t}){if(this.lockDirection=t==="lock",!this.lockDirection)return t},axisThreshold(n=Sge){return n},bounds(n={}){if(typeof n=="function")return s=>bm.bounds(n(s));if("current"in n)return()=>n.current;if(typeof HTMLElement=="function"&&n instanceof HTMLElement)return n;const{left:e=-1/0,right:t=1/0,top:i=-1/0,bottom:r=1/0}=n;return[[e,t],[i,r]]}}),A5={ArrowRight:(n,e=1)=>[n*e,0],ArrowLeft:(n,e=1)=>[-1*n*e,0],ArrowUp:(n,e=1)=>[0,-1*n*e],ArrowDown:(n,e=1)=>[0,n*e]};class Ege extends dx{constructor(...e){super(...e),zr(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const t=e._bounds.getBoundingClientRect(),i=e.currentTarget.getBoundingClientRect(),r={left:t.left-i.left+e.offset[0],right:t.right-i.right+e.offset[0],top:t.top-i.top+e.offset[1],bottom:t.bottom-i.bottom+e.offset[1]};e._bounds=bm.bounds(r)}}cancel(){const e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){const t=this.config,i=this.state;if(e.buttons!=null&&(Array.isArray(t.pointerButtons)?!t.pointerButtons.includes(e.buttons):t.pointerButtons!==-1&&t.pointerButtons!==e.buttons))return;const r=this.ctrl.setEventIds(e);t.pointerCapture&&e.target.setPointerCapture(e.pointerId),!(r&&r.size>1&&i._pointerActive)&&(this.start(e),this.setupPointer(e),i._pointerId=HR(e),i._pointerActive=!0,this.computeValues(G0(e)),this.computeInitial(),t.preventScrollAxis&&RH(e)!=="mouse"?(i._active=!1,this.setupScrollPrevention(e)):t.delay>0?(this.setupDelayTrigger(e),t.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){const t=this.state;t._active=!0,t._preventScroll=!0,t._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const t=this.state,i=this.config;if(!t._pointerActive)return;const r=HR(e);if(t._pointerId!==void 0&&r!==t._pointerId)return;const s=G0(e);if(document.pointerLockElement===e.target?t._delta=[e.movementX,e.movementY]:(t._delta=Gi.sub(s,t._values),this.computeValues(s)),Gi.addTo(t._movement,t._delta),this.compute(e),t._delayed&&t.intentional){this.timeoutStore.remove("dragDelay"),t.active=!1,this.startPointerDrag(e);return}if(i.preventScrollAxis&&!t._preventScroll)if(t.axis)if(t.axis===i.preventScrollAxis||i.preventScrollAxis==="xy"){t._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(e);return}else return;this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch{}const t=this.state,i=this.config;if(!t._active||!t._pointerActive)return;const r=HR(e);if(t._pointerId!==void 0&&r!==t._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[s,o]=t._distance;if(t.tap=s<=i.tapsThreshold&&o<=i.tapsThreshold,t.tap&&i.filterTaps)t._force=!0;else{const[a,l]=t._delta,[c,f]=t._movement,[d,m]=i.swipe.velocity,[v,b]=i.swipe.distance,x=i.swipe.duration;if(t.elapsedTime<x){const w=Math.abs(a/t.timeDelta),_=Math.abs(l/t.timeDelta);w>d&&Math.abs(c)>v&&(t.swipe[0]=Math.sign(a)),_>m&&Math.abs(f)>b&&(t.swipe[1]=Math.sign(l))}}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){const t=this.config,i=t.device;t.pointerLock&&e.currentTarget.requestPointerLock(),t.pointerCapture||(this.eventStore.add(this.sharedConfig.window,i,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,Mge(e);const t=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",t),this.eventStore.add(this.sharedConfig.window,"touch","cancel",t),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(e)},this.config.delay)}keyDown(e){const t=A5[e.key];if(t){const i=this.state,r=e.shiftKey?10:e.altKey?.1:1;this.start(e),i._delta=t(this.config.keyboardDisplacement,r),i._keyboardActive=!0,Gi.addTo(i._movement,i._delta),this.compute(e),this.emit()}}keyUp(e){e.key in A5&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const t=this.config.device;e(t,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(t,"change",this.pointerMove.bind(this)),e(t,"end",this.pointerUp.bind(this)),e(t,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function Mge(n){"persist"in n&&typeof n.persist=="function"&&n.persist()}const px=typeof window<"u"&&window.document&&window.document.createElement;function IH(){return px&&"ontouchstart"in window}function Tge(){return IH()||px&&window.navigator.maxTouchPoints>1}function Age(){return px&&"onpointerdown"in window}function Cge(){return px&&"exitPointerLock"in window.document}function Rge(){try{return"constructor"in GestureEvent}catch{return!1}}const gl={isBrowser:px,gesture:Rge(),touch:IH(),touchscreen:Tge(),pointer:Age(),pointerLock:Cge()},Dge=250,Oge=180,Lge=.5,Pge=50,Ige=250,Nge=10,C5={mouse:0,touch:0,pen:8},Uge=lr(lr({},bm),{},{device(n,e,{pointer:{touch:t=!1,lock:i=!1,mouse:r=!1}={}}){return this.pointerLock=i&&gl.pointerLock,gl.touch&&t?"touch":this.pointerLock?"mouse":gl.pointer&&!r?"pointer":gl.touch?"touch":"mouse"},preventScrollAxis(n,e,{preventScroll:t}){if(this.preventScrollDelay=typeof t=="number"?t:t||t===void 0&&n?Dge:void 0,!(!gl.touchscreen||t===!1))return n||(t!==void 0?"y":void 0)},pointerCapture(n,e,{pointer:{capture:t=!0,buttons:i=1,keys:r=!0}={}}){return this.pointerButtons=i,this.keys=r,!this.pointerLock&&this.device==="pointer"&&t},threshold(n,e,{filterTaps:t=!1,tapsThreshold:i=3,axis:r=void 0}){const s=Gi.toVector(n,t?i:r?1:0);return this.filterTaps=t,this.tapsThreshold=i,s},swipe({velocity:n=Lge,distance:e=Pge,duration:t=Ige}={}){return{velocity:this.transform(Gi.toVector(n)),distance:this.transform(Gi.toVector(e)),duration:t}},delay(n=0){switch(n){case!0:return Oge;case!1:return 0;default:return n}},axisThreshold(n){return n?lr(lr({},C5),n):C5},keyboardDisplacement(n=Nge){return n}});function NH(n){const[e,t]=n.overflow,[i,r]=n._delta,[s,o]=n._direction;(e<0&&i>0&&s<0||e>0&&i<0&&s>0)&&(n._movement[0]=n._movementBound[0]),(t<0&&r>0&&o<0||t>0&&r<0&&o>0)&&(n._movement[1]=n._movementBound[1])}const kge=30,zge=100;class Fge extends LH{constructor(...e){super(...e),zr(this,"ingKey","pinching"),zr(this,"aliasKey","da")}init(){this.state.offset=[1,0],this.state.lastOffset=[1,0],this.state._pointerEvents=new Map}reset(){super.reset();const e=this.state;e._touchIds=[],e.canceled=!1,e.cancel=this.cancel.bind(this),e.turns=0}computeOffset(){const{type:e,movement:t,lastOffset:i}=this.state;e==="wheel"?this.state.offset=Gi.add(t,i):this.state.offset=[(1+t[0])*i[0],t[1]+i[1]]}computeMovement(){const{offset:e,lastOffset:t}=this.state;this.state.movement=[e[0]/t[0],e[1]-t[1]]}axisIntent(){const e=this.state,[t,i]=e._movement;if(!e.axis){const r=Math.abs(t)*kge-Math.abs(i);r<0?e.axis="angle":r>0&&(e.axis="scale")}}restrictToAxis(e){this.config.lockDirection&&(this.state.axis==="scale"?e[1]=0:this.state.axis==="angle"&&(e[0]=0))}cancel(){const e=this.state;e.canceled||setTimeout(()=>{e.canceled=!0,e._active=!1,this.compute(),this.emit()},0)}touchStart(e){this.ctrl.setEventIds(e);const t=this.state,i=this.ctrl.touchIds;if(t._active&&t._touchIds.every(s=>i.has(s))||i.size<2)return;this.start(e),t._touchIds=Array.from(i).slice(0,2);const r=w5(e,t._touchIds);r&&this.pinchStart(e,r)}pointerStart(e){if(e.buttons!=null&&e.buttons%2!==1)return;this.ctrl.setEventIds(e),e.target.setPointerCapture(e.pointerId);const t=this.state,i=t._pointerEvents,r=this.ctrl.pointerIds;if(t._active&&Array.from(i.keys()).every(o=>r.has(o))||(i.size<2&&i.set(e.pointerId,e),t._pointerEvents.size<2))return;this.start(e);const s=BD(...Array.from(i.values()));s&&this.pinchStart(e,s)}pinchStart(e,t){const i=this.state;i.origin=t.origin,this.computeValues([t.distance,t.angle]),this.computeInitial(),this.compute(e),this.emit()}touchMove(e){if(!this.state._active)return;const t=w5(e,this.state._touchIds);t&&this.pinchMove(e,t)}pointerMove(e){const t=this.state._pointerEvents;if(t.has(e.pointerId)&&t.set(e.pointerId,e),!this.state._active)return;const i=BD(...Array.from(t.values()));i&&this.pinchMove(e,i)}pinchMove(e,t){const i=this.state,r=i._values[1],s=t.angle-r;let o=0;Math.abs(s)>270&&(o+=Math.sign(s)),this.computeValues([t.distance,t.angle-360*o]),i.origin=t.origin,i.turns=o,i._movement=[i._values[0]/i._initial[0]-1,i._values[1]-i._initial[1]],this.compute(e),this.emit()}touchEnd(e){this.ctrl.setEventIds(e),this.state._active&&this.state._touchIds.some(t=>!this.ctrl.touchIds.has(t))&&(this.state._active=!1,this.compute(e),this.emit())}pointerEnd(e){const t=this.state;this.ctrl.setEventIds(e);try{e.target.releasePointerCapture(e.pointerId)}catch{}t._pointerEvents.has(e.pointerId)&&t._pointerEvents.delete(e.pointerId),t._active&&t._pointerEvents.size<2&&(t._active=!1,this.compute(e),this.emit())}gestureStart(e){e.cancelable&&e.preventDefault();const t=this.state;t._active||(this.start(e),this.computeValues([e.scale,e.rotation]),t.origin=[e.clientX,e.clientY],this.compute(e),this.emit())}gestureMove(e){if(e.cancelable&&e.preventDefault(),!this.state._active)return;const t=this.state;this.computeValues([e.scale,e.rotation]),t.origin=[e.clientX,e.clientY];const i=t._movement;t._movement=[e.scale-1,e.rotation],t._delta=Gi.sub(t._movement,i),this.compute(e),this.emit()}gestureEnd(e){this.state._active&&(this.state._active=!1,this.compute(e),this.emit())}wheel(e){const t=this.config.modifierKey;t&&(Array.isArray(t)?!t.find(i=>e[i]):!e[t])||(this.state._active?this.wheelChange(e):this.wheelStart(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this)))}wheelStart(e){this.start(e),this.wheelChange(e)}wheelChange(e){"uv"in e||e.cancelable&&e.preventDefault();const i=this.state;i._delta=[-OH(e)[1]/zge*i.offset[0],0],Gi.addTo(i._movement,i._delta),NH(i),this.state.origin=[e.clientX,e.clientY],this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){const t=this.config.device;t&&(e(t,"start",this[t+"Start"].bind(this)),e(t,"change",this[t+"Move"].bind(this)),e(t,"end",this[t+"End"].bind(this)),e(t,"cancel",this[t+"End"].bind(this)),e("lostPointerCapture","",this[t+"End"].bind(this))),this.config.pinchOnWheel&&e("wheel","",this.wheel.bind(this),{passive:!1})}}const Bge=lr(lr({},PH),{},{device(n,e,{shared:t,pointer:{touch:i=!1}={}}){if(t.target&&!gl.touch&&gl.gesture)return"gesture";if(gl.touch&&i)return"touch";if(gl.touchscreen){if(gl.pointer)return"pointer";if(gl.touch)return"touch"}},bounds(n,e,{scaleBounds:t={},angleBounds:i={}}){const r=o=>{const a=M5(yM(t,o),{min:-1/0,max:1/0});return[a.min,a.max]},s=o=>{const a=M5(yM(i,o),{min:-1/0,max:1/0});return[a.min,a.max]};return typeof t!="function"&&typeof i!="function"?[r(),s()]:o=>[r(o),s(o)]},threshold(n,e,t){return this.lockDirection=t.axis==="lock",Gi.toVector(n,this.lockDirection?[.1,3]:0)},modifierKey(n){return n===void 0?"ctrlKey":n},pinchOnWheel(n=!0){return n}});class Vge extends dx{constructor(...e){super(...e),zr(this,"ingKey","moving")}move(e){this.config.mouseOnly&&e.pointerType!=="mouse"||(this.state._active?this.moveChange(e):this.moveStart(e),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(e){this.start(e),this.computeValues(G0(e)),this.compute(e),this.computeInitial(),this.emit()}moveChange(e){if(!this.state._active)return;const t=G0(e),i=this.state;i._delta=Gi.sub(t,i._values),Gi.addTo(i._movement,i._delta),this.computeValues(t),this.compute(e),this.emit()}moveEnd(e){this.state._active&&(this.state._active=!1,this.compute(e),this.emit())}bind(e){e("pointer","change",this.move.bind(this)),e("pointer","leave",this.moveEnd.bind(this))}}const Gge=lr(lr({},bm),{},{mouseOnly:(n=!0)=>n});class Hge extends dx{constructor(...e){super(...e),zr(this,"ingKey","scrolling")}scroll(e){this.state._active||this.start(e),this.scrollChange(e),this.timeoutStore.add("scrollEnd",this.scrollEnd.bind(this))}scrollChange(e){e.cancelable&&e.preventDefault();const t=this.state,i=gge(e);t._delta=Gi.sub(i,t._values),Gi.addTo(t._movement,t._delta),this.computeValues(i),this.compute(e),this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){e("scroll","",this.scroll.bind(this))}}const jge=bm;class Wge extends dx{constructor(...e){super(...e),zr(this,"ingKey","wheeling")}wheel(e){this.state._active||this.start(e),this.wheelChange(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(e){const t=this.state;t._delta=OH(e),Gi.addTo(t._movement,t._delta),NH(t),this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){e("wheel","",this.wheel.bind(this))}}const $ge=bm;class qge extends dx{constructor(...e){super(...e),zr(this,"ingKey","hovering")}enter(e){this.config.mouseOnly&&e.pointerType!=="mouse"||(this.start(e),this.computeValues(G0(e)),this.compute(e),this.emit())}leave(e){if(this.config.mouseOnly&&e.pointerType!=="mouse")return;const t=this.state;if(!t._active)return;t._active=!1;const i=G0(e);t._movement=t._delta=Gi.sub(i,t._values),this.computeValues(i),this.compute(e),t.delta=t.movement,this.emit()}bind(e){e("pointer","enter",this.enter.bind(this)),e("pointer","leave",this.leave.bind(this))}}const Xge=lr(lr({},bm),{},{mouseOnly:(n=!0)=>n}),_P=new Map,VD=new Map;function Yge(n){_P.set(n.key,n.engine),VD.set(n.key,n.resolver)}const Zge={key:"drag",engine:Ege,resolver:Uge},Kge={key:"hover",engine:qge,resolver:Xge},Qge={key:"move",engine:Vge,resolver:Gge},Jge={key:"pinch",engine:Fge,resolver:Bge},e0e={key:"scroll",engine:Hge,resolver:jge},t0e={key:"wheel",engine:Wge,resolver:$ge};function n0e(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function i0e(n,e){if(n==null)return{};var t=n0e(n,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}const r0e={target(n){if(n)return()=>"current"in n?n.current:n},enabled(n=!0){return n},window(n=gl.isBrowser?window:void 0){return n},eventOptions({passive:n=!0,capture:e=!1}={}){return{passive:n,capture:e}},transform(n){return n}},s0e=["target","eventOptions","window","enabled","transform"];function NS(n={},e){const t={};for(const[i,r]of Object.entries(e))switch(typeof r){case"function":t[i]=r.call(t,n[i],i,n);break;case"object":t[i]=NS(n[i],r);break;case"boolean":r&&(t[i]=n[i]);break}return t}function o0e(n,e,t={}){const i=n,{target:r,eventOptions:s,window:o,enabled:a,transform:l}=i,c=i0e(i,s0e);if(t.shared=NS({target:r,eventOptions:s,window:o,enabled:a,transform:l},r0e),e){const f=VD.get(e);t[e]=NS(lr({shared:t.shared},c),f)}else for(const f in c){const d=VD.get(f);d&&(t[f]=NS(lr({shared:t.shared},c[f]),d))}return t}class UH{constructor(e,t){zr(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=t}add(e,t,i,r,s){const o=this._listeners,a=hge(t,i),l=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},c=lr(lr({},l),s);e.addEventListener(a,r,c);const f=()=>{e.removeEventListener(a,r,c),o.delete(f)};return o.add(f),f}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}}class a0e{constructor(){zr(this,"_timeouts",new Map)}add(e,t,i=140,...r){this.remove(e),this._timeouts.set(e,window.setTimeout(t,i,...r))}remove(e){const t=this._timeouts.get(e);t&&window.clearTimeout(t)}clean(){this._timeouts.forEach(e=>{window.clearTimeout(e)}),this._timeouts.clear()}}class l0e{constructor(e){zr(this,"gestures",new Set),zr(this,"_targetEventStore",new UH(this)),zr(this,"gestureEventStores",{}),zr(this,"gestureTimeoutStores",{}),zr(this,"handlers",{}),zr(this,"config",{}),zr(this,"pointerIds",new Set),zr(this,"touchIds",new Set),zr(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),c0e(this,e)}setEventIds(e){if(DT(e))return this.touchIds=new Set(mge(e)),this.touchIds;if("pointerId"in e)return e.type==="pointerup"||e.type==="pointercancel"?this.pointerIds.delete(e.pointerId):e.type==="pointerdown"&&this.pointerIds.add(e.pointerId),this.pointerIds}applyHandlers(e,t){this.handlers=e,this.nativeHandlers=t}applyConfig(e,t){this.config=o0e(e,t,this.config)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const t=this.config.shared,i={};let r;if(!(t.target&&(r=t.target(),!r))){if(t.enabled){for(const o of this.gestures){const a=this.config[o],l=R5(i,a.eventOptions,!!r);if(a.enabled){const c=_P.get(o);new c(this,e,o).bind(l)}}const s=R5(i,t.eventOptions,!!r);for(const o in this.nativeHandlers)s(o,"",a=>this.nativeHandlers[o](lr(lr({},this.state.shared),{},{event:a,args:e})),void 0,!0)}for(const s in i)i[s]=bge(...i[s]);if(!r)return i;for(const s in i){const{device:o,capture:a,passive:l}=fge(s);this._targetEventStore.add(r,o,"",i[s],{capture:a,passive:l})}}}}function i0(n,e){n.gestures.add(e),n.gestureEventStores[e]=new UH(n,e),n.gestureTimeoutStores[e]=new a0e}function c0e(n,e){e.drag&&i0(n,"drag"),e.wheel&&i0(n,"wheel"),e.scroll&&i0(n,"scroll"),e.move&&i0(n,"move"),e.pinch&&i0(n,"pinch"),e.hover&&i0(n,"hover")}const R5=(n,e,t)=>(i,r,s,o={},a=!1)=>{var l,c;const f=(l=o.capture)!==null&&l!==void 0?l:e.capture,d=(c=o.passive)!==null&&c!==void 0?c:e.passive;let m=a?i:cge(i,r,f);t&&d&&(m+="Passive"),n[m]=n[m]||[],n[m].push(s)},u0e=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function f0e(n){const e={},t={},i=new Set;for(let r in n)u0e.test(r)?(i.add(RegExp.lastMatch),t[r]=n[r]):e[r]=n[r];return[t,e,i]}function r0(n,e,t,i,r,s){if(!n.has(t)||!_P.has(i))return;const o=t+"Start",a=t+"End",l=c=>{let f;return c.first&&o in e&&e[o](c),t in e&&(f=e[t](c)),c.last&&a in e&&e[a](c),f};r[i]=l,s[i]=s[i]||{}}function h0e(n,e){const[t,i,r]=f0e(n),s={};return r0(r,t,"onDrag","drag",s,e),r0(r,t,"onWheel","wheel",s,e),r0(r,t,"onScroll","scroll",s,e),r0(r,t,"onPinch","pinch",s,e),r0(r,t,"onMove","move",s,e),r0(r,t,"onHover","hover",s,e),{handlers:s,config:e,nativeHandlers:i}}function d0e(n,e={},t,i){const r=eo.useMemo(()=>new l0e(n),[]);if(r.applyHandlers(n,i),r.applyConfig(e,t),eo.useEffect(r.effect.bind(r)),eo.useEffect(()=>r.clean.bind(r),[]),e.target===void 0)return r.bind.bind(r)}function p0e(n){return n.forEach(Yge),function(t,i){const{handlers:r,nativeHandlers:s,config:o}=h0e(t,i||{});return d0e(r,o,void 0,s)}}function m0e(n,e){return p0e([Zge,Jge,e0e,t0e,Qge,Kge])(n,e||{})}const kH=$.forwardRef(function({children:e,follow:t=!0,lockX:i=!1,lockY:r=!1,lockZ:s=!1,...o},a){const l=$.useRef(null),c=$.useRef(null),f=new Os;return yT(({camera:d})=>{if(!t||!c.current)return;const m=l.current.rotation.clone();c.current.updateMatrix(),c.current.updateWorldMatrix(!1,!1),c.current.getWorldQuaternion(f),d.getWorldQuaternion(l.current.quaternion).premultiply(f.invert()),i&&(l.current.rotation.x=m.x),r&&(l.current.rotation.y=m.y),s&&(l.current.rotation.z=m.z)}),$.useImperativeHandle(a,()=>c.current,[]),$.createElement("group",pd({ref:c},o),$.createElement("group",{ref:l},e))});function g0e(){var n=Object.create(null);function e(r,s){var o=r.id,a=r.name,l=r.dependencies;l===void 0&&(l=[]);var c=r.init;c===void 0&&(c=function(){});var f=r.getTransferables;if(f===void 0&&(f=null),!n[o])try{l=l.map(function(m){return m&&m.isWorkerModule&&(e(m,function(v){if(v instanceof Error)throw v}),m=n[m.id].value),m}),c=i("<"+a+">.init",c),f&&(f=i("<"+a+">.getTransferables",f));var d=null;typeof c=="function"?d=c.apply(void 0,l):console.error("worker module init function failed to rehydrate"),n[o]={id:o,value:d,getTransferables:f},s(d)}catch(m){m&&m.noLog||console.error(m),s(m)}}function t(r,s){var o,a=r.id,l=r.args;(!n[a]||typeof n[a].value!="function")&&s(new Error("Worker module "+a+": not found or its 'init' did not return a function"));try{var c=(o=n[a]).value.apply(o,l);c&&typeof c.then=="function"?c.then(f,function(d){return s(d instanceof Error?d:new Error(""+d))}):f(c)}catch(d){s(d)}function f(d){try{var m=n[a].getTransferables&&n[a].getTransferables(d);(!m||!Array.isArray(m)||!m.length)&&(m=void 0),s(d,m)}catch(v){console.error(v),s(v)}}}function i(r,s){var o=void 0;self.troikaDefine=function(l){return o=l};var a=URL.createObjectURL(new Blob(["/** "+r.replace(/\*/g,"")+` **/

troikaDefine(
`+s+`
)`],{type:"application/javascript"}));try{importScripts(a)}catch(l){console.error(l)}return URL.revokeObjectURL(a),delete self.troikaDefine,o}self.addEventListener("message",function(r){var s=r.data,o=s.messageId,a=s.action,l=s.data;try{a==="registerModule"&&e(l,function(c){c instanceof Error?postMessage({messageId:o,success:!1,error:c.message}):postMessage({messageId:o,success:!0,result:{isCallable:typeof c=="function"}})}),a==="callModule"&&t(l,function(c,f){c instanceof Error?postMessage({messageId:o,success:!1,error:c.message}):postMessage({messageId:o,success:!0,result:c},f||void 0)})}catch(c){postMessage({messageId:o,success:!1,error:c.stack})}})}function v0e(n){var e=function(){for(var t=[],i=arguments.length;i--;)t[i]=arguments[i];return e._getInitResult().then(function(r){if(typeof r=="function")return r.apply(void 0,t);throw new Error("Worker module function was called but `init` did not return a callable function")})};return e._getInitResult=function(){var t=n.dependencies,i=n.init;t=Array.isArray(t)?t.map(function(s){return s&&(s=s.onMainThread||s,s._getInitResult&&(s=s._getInitResult())),s}):[];var r=Promise.all(t).then(function(s){return i.apply(null,s)});return e._getInitResult=function(){return r},r},e}var zH=function(){var n=!1;if(typeof window<"u"&&typeof window.document<"u")try{var e=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));e.terminate(),n=!0}catch(t){console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+t.message+"]")}return zH=function(){return n},n},y0e=0,b0e=0,jR=!1,n_=Object.create(null),i_=Object.create(null),GD=Object.create(null);function pv(n){if((!n||typeof n.init!="function")&&!jR)throw new Error("requires `options.init` function");var e=n.dependencies,t=n.init,i=n.getTransferables,r=n.workerId,s=v0e(n);r==null&&(r="#default");var o="workerModule"+ ++y0e,a=n.name||o,l=null;e=e&&e.map(function(f){return typeof f=="function"&&!f.workerModuleData&&(jR=!0,f=pv({workerId:r,name:"<"+a+"> function dependency: "+f.name,init:`function(){return (
`+US(f)+`
)}`}),jR=!1),f&&f.workerModuleData&&(f=f.workerModuleData),f});function c(){for(var f=[],d=arguments.length;d--;)f[d]=arguments[d];if(!zH())return s.apply(void 0,f);if(!l){l=D5(r,"registerModule",c.workerModuleData);var m=function(){l=null,i_[r].delete(m)};(i_[r]||(i_[r]=new Set)).add(m)}return l.then(function(v){var b=v.isCallable;if(b)return D5(r,"callModule",{id:o,args:f});throw new Error("Worker module function was called but `init` did not return a callable function")})}return c.workerModuleData={isWorkerModule:!0,id:o,name:a,dependencies:e,init:US(t),getTransferables:i&&US(i)},c.onMainThread=s,c}function _0e(n){i_[n]&&i_[n].forEach(function(e){e()}),n_[n]&&(n_[n].terminate(),delete n_[n])}function US(n){var e=n.toString();return!/^function/.test(e)&&/^\w+\s*\(/.test(e)&&(e="function "+e),e}function x0e(n){var e=n_[n];if(!e){var t=US(g0e);e=n_[n]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+n.replace(/\*/g,"")+` **/

;(`+t+")()"],{type:"application/javascript"}))),e.onmessage=function(i){var r=i.data,s=r.messageId,o=GD[s];if(!o)throw new Error("WorkerModule response with empty or unknown messageId");delete GD[s],o(r)}}return e}function D5(n,e,t){return new Promise(function(i,r){var s=++b0e;GD[s]=function(o){o.success?i(o.result):r(new Error("Error in worker "+e+" call: "+o.error))},x0e(n).postMessage({messageId:s,action:e,data:t})})}function FH(){var n=(function(e){function t(te,ie,F,X,ee,le,oe,ue){var he=1-oe;ue.x=he*he*te+2*he*oe*F+oe*oe*ee,ue.y=he*he*ie+2*he*oe*X+oe*oe*le}function i(te,ie,F,X,ee,le,oe,ue,he,be){var Te=1-he;be.x=Te*Te*Te*te+3*Te*Te*he*F+3*Te*he*he*ee+he*he*he*oe,be.y=Te*Te*Te*ie+3*Te*Te*he*X+3*Te*he*he*le+he*he*he*ue}function r(te,ie){for(var F=/([MLQCZ])([^MLQCZ]*)/g,X,ee,le,oe,ue;X=F.exec(te);){var he=X[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(be){return parseFloat(be)});switch(X[1]){case"M":oe=ee=he[0],ue=le=he[1];break;case"L":(he[0]!==oe||he[1]!==ue)&&ie("L",oe,ue,oe=he[0],ue=he[1]);break;case"Q":{ie("Q",oe,ue,oe=he[2],ue=he[3],he[0],he[1]);break}case"C":{ie("C",oe,ue,oe=he[4],ue=he[5],he[0],he[1],he[2],he[3]);break}case"Z":(oe!==ee||ue!==le)&&ie("L",oe,ue,ee,le);break}}}function s(te,ie,F){F===void 0&&(F=16);var X={x:0,y:0};r(te,function(ee,le,oe,ue,he,be,Te,Ee,Ce){switch(ee){case"L":ie(le,oe,ue,he);break;case"Q":{for(var we=le,ae=oe,ve=1;ve<F;ve++)t(le,oe,be,Te,ue,he,ve/(F-1),X),ie(we,ae,X.x,X.y),we=X.x,ae=X.y;break}case"C":{for(var xe=le,me=oe,Ie=1;Ie<F;Ie++)i(le,oe,be,Te,Ee,Ce,ue,he,Ie/(F-1),X),ie(xe,me,X.x,X.y),xe=X.x,me=X.y;break}}})}var o="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",a="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",l=new WeakMap,c={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function f(te,ie){var F=te.getContext?te.getContext("webgl",c):te,X=l.get(F);if(!X){let xe=function(Ae){var tt=le[Ae];if(!tt&&(tt=le[Ae]=F.getExtension(Ae),!tt))throw new Error(Ae+" not supported");return tt},me=function(Ae,tt){var se=F.createShader(tt);return F.shaderSource(se,Ae),F.compileShader(se),se},Ie=function(Ae,tt,se,Z){if(!oe[Ae]){var ye={},Y={},J=F.createProgram();F.attachShader(J,me(tt,F.VERTEX_SHADER)),F.attachShader(J,me(se,F.FRAGMENT_SHADER)),F.linkProgram(J),oe[Ae]={program:J,transaction:function(ge){F.useProgram(J),ge({setUniform:function(Se,Ue){for(var Me=[],Le=arguments.length-2;Le-- >0;)Me[Le]=arguments[Le+2];var He=Y[Ue]||(Y[Ue]=F.getUniformLocation(J,Ue));F["uniform"+Se].apply(F,[He].concat(Me))},setAttribute:function(Se,Ue,Me,Le,He){var nt=ye[Se];nt||(nt=ye[Se]={buf:F.createBuffer(),loc:F.getAttribLocation(J,Se),data:null}),F.bindBuffer(F.ARRAY_BUFFER,nt.buf),F.vertexAttribPointer(nt.loc,Ue,F.FLOAT,!1,0,0),F.enableVertexAttribArray(nt.loc),ee?F.vertexAttribDivisor(nt.loc,Le):xe("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(nt.loc,Le),He!==nt.data&&(F.bufferData(F.ARRAY_BUFFER,He,Me),nt.data=He)}})}}}oe[Ae].transaction(Z)},Ne=function(Ae,tt){he++;try{F.activeTexture(F.TEXTURE0+he);var se=ue[Ae];se||(se=ue[Ae]=F.createTexture(),F.bindTexture(F.TEXTURE_2D,se),F.texParameteri(F.TEXTURE_2D,F.TEXTURE_MIN_FILTER,F.NEAREST),F.texParameteri(F.TEXTURE_2D,F.TEXTURE_MAG_FILTER,F.NEAREST)),F.bindTexture(F.TEXTURE_2D,se),tt(se,he)}finally{he--}},ke=function(Ae,tt,se){var Z=F.createFramebuffer();be.push(Z),F.bindFramebuffer(F.FRAMEBUFFER,Z),F.activeTexture(F.TEXTURE0+tt),F.bindTexture(F.TEXTURE_2D,Ae),F.framebufferTexture2D(F.FRAMEBUFFER,F.COLOR_ATTACHMENT0,F.TEXTURE_2D,Ae,0);try{se(Z)}finally{F.deleteFramebuffer(Z),F.bindFramebuffer(F.FRAMEBUFFER,be[--be.length-1]||null)}},Fe=function(){le={},oe={},ue={},he=-1,be.length=0};var Te=xe,Ee=me,Ce=Ie,we=Ne,ae=ke,ve=Fe,ee=typeof WebGL2RenderingContext<"u"&&F instanceof WebGL2RenderingContext,le={},oe={},ue={},he=-1,be=[];F.canvas.addEventListener("webglcontextlost",function(Ae){Fe(),Ae.preventDefault()},!1),l.set(F,X={gl:F,isWebGL2:ee,getExtension:xe,withProgram:Ie,withTexture:Ne,withTextureFramebuffer:ke,handleContextLoss:Fe})}ie(X)}function d(te,ie,F,X,ee,le,oe,ue){oe===void 0&&(oe=15),ue===void 0&&(ue=null),f(te,function(he){var be=he.gl,Te=he.withProgram,Ee=he.withTexture;Ee("copy",function(Ce,we){be.texImage2D(be.TEXTURE_2D,0,be.RGBA,ee,le,0,be.RGBA,be.UNSIGNED_BYTE,ie),Te("copy",o,a,function(ae){var ve=ae.setUniform,xe=ae.setAttribute;xe("aUV",2,be.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),ve("1i","image",we),be.bindFramebuffer(be.FRAMEBUFFER,ue||null),be.disable(be.BLEND),be.colorMask(oe&8,oe&4,oe&2,oe&1),be.viewport(F,X,ee,le),be.scissor(F,X,ee,le),be.drawArrays(be.TRIANGLES,0,3)})})})}function m(te,ie,F){var X=te.width,ee=te.height;f(te,function(le){var oe=le.gl,ue=new Uint8Array(X*ee*4);oe.readPixels(0,0,X,ee,oe.RGBA,oe.UNSIGNED_BYTE,ue),te.width=ie,te.height=F,d(oe,ue,0,0,X,ee)})}var v=Object.freeze({__proto__:null,withWebGLContext:f,renderImageData:d,resizeWebGLCanvasWithoutClearing:m});function b(te,ie,F,X,ee,le){le===void 0&&(le=1);var oe=new Uint8Array(te*ie),ue=X[2]-X[0],he=X[3]-X[1],be=[];s(F,function(xe,me,Ie,Ne){be.push({x1:xe,y1:me,x2:Ie,y2:Ne,minX:Math.min(xe,Ie),minY:Math.min(me,Ne),maxX:Math.max(xe,Ie),maxY:Math.max(me,Ne)})}),be.sort(function(xe,me){return xe.maxX-me.maxX});for(var Te=0;Te<te;Te++)for(var Ee=0;Ee<ie;Ee++){var Ce=ae(X[0]+ue*(Te+.5)/te,X[1]+he*(Ee+.5)/ie),we=Math.pow(1-Math.abs(Ce)/ee,le)/2;Ce<0&&(we=1-we),we=Math.max(0,Math.min(255,Math.round(we*255))),oe[Ee*te+Te]=we}return oe;function ae(xe,me){for(var Ie=1/0,Ne=1/0,ke=be.length;ke--;){var Fe=be[ke];if(Fe.maxX+Ne<=xe)break;if(xe+Ne>Fe.minX&&me-Ne<Fe.maxY&&me+Ne>Fe.minY){var Ae=_(xe,me,Fe.x1,Fe.y1,Fe.x2,Fe.y2);Ae<Ie&&(Ie=Ae,Ne=Math.sqrt(Ie))}}return ve(xe,me)&&(Ne=-Ne),Ne}function ve(xe,me){for(var Ie=0,Ne=be.length;Ne--;){var ke=be[Ne];if(ke.maxX<=xe)break;var Fe=ke.y1>me!=ke.y2>me&&xe<(ke.x2-ke.x1)*(me-ke.y1)/(ke.y2-ke.y1)+ke.x1;Fe&&(Ie+=ke.y1<ke.y2?1:-1)}return Ie!==0}}function x(te,ie,F,X,ee,le,oe,ue,he,be){le===void 0&&(le=1),ue===void 0&&(ue=0),he===void 0&&(he=0),be===void 0&&(be=0),w(te,ie,F,X,ee,le,oe,null,ue,he,be)}function w(te,ie,F,X,ee,le,oe,ue,he,be,Te){le===void 0&&(le=1),he===void 0&&(he=0),be===void 0&&(be=0),Te===void 0&&(Te=0);for(var Ee=b(te,ie,F,X,ee,le),Ce=new Uint8Array(Ee.length*4),we=0;we<Ee.length;we++)Ce[we*4+Te]=Ee[we];d(oe,Ce,he,be,te,ie,1<<3-Te,ue)}function _(te,ie,F,X,ee,le){var oe=ee-F,ue=le-X,he=oe*oe+ue*ue,be=he?Math.max(0,Math.min(1,((te-F)*oe+(ie-X)*ue)/he)):0,Te=te-(F+be*oe),Ee=ie-(X+be*ue);return Te*Te+Ee*Ee}var A=Object.freeze({__proto__:null,generate:b,generateIntoCanvas:x,generateIntoFramebuffer:w}),T="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",E="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",C="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",R=new Float32Array([0,0,2,0,0,2]),O=null,I=!1,L={},N=new WeakMap;function V(te){if(!I&&!q(te))throw new Error("WebGL generation not supported")}function B(te,ie,F,X,ee,le,oe){if(le===void 0&&(le=1),oe===void 0&&(oe=null),!oe&&(oe=O,!oe)){var ue=typeof OffscreenCanvas=="function"?new OffscreenCanvas(1,1):typeof document<"u"?document.createElement("canvas"):null;if(!ue)throw new Error("OffscreenCanvas or DOM canvas not supported");oe=O=ue.getContext("webgl",{depth:!1})}V(oe);var he=new Uint8Array(te*ie*4);f(oe,function(Ce){var we=Ce.gl,ae=Ce.withTexture,ve=Ce.withTextureFramebuffer;ae("readable",function(xe,me){we.texImage2D(we.TEXTURE_2D,0,we.RGBA,te,ie,0,we.RGBA,we.UNSIGNED_BYTE,null),ve(xe,me,function(Ie){j(te,ie,F,X,ee,le,we,Ie,0,0,0),we.readPixels(0,0,te,ie,we.RGBA,we.UNSIGNED_BYTE,he)})})});for(var be=new Uint8Array(te*ie),Te=0,Ee=0;Te<he.length;Te+=4)be[Ee++]=he[Te];return be}function k(te,ie,F,X,ee,le,oe,ue,he,be){le===void 0&&(le=1),ue===void 0&&(ue=0),he===void 0&&(he=0),be===void 0&&(be=0),j(te,ie,F,X,ee,le,oe,null,ue,he,be)}function j(te,ie,F,X,ee,le,oe,ue,he,be,Te){le===void 0&&(le=1),he===void 0&&(he=0),be===void 0&&(be=0),Te===void 0&&(Te=0),V(oe);var Ee=[];s(F,function(Ce,we,ae,ve){Ee.push(Ce,we,ae,ve)}),Ee=new Float32Array(Ee),f(oe,function(Ce){var we=Ce.gl,ae=Ce.isWebGL2,ve=Ce.getExtension,xe=Ce.withProgram,me=Ce.withTexture,Ie=Ce.withTextureFramebuffer,Ne=Ce.handleContextLoss;if(me("rawDistances",function(ke,Fe){(te!==ke._lastWidth||ie!==ke._lastHeight)&&we.texImage2D(we.TEXTURE_2D,0,we.RGBA,ke._lastWidth=te,ke._lastHeight=ie,0,we.RGBA,we.UNSIGNED_BYTE,null),xe("main",T,E,function(Ae){var tt=Ae.setAttribute,se=Ae.setUniform,Z=!ae&&ve("ANGLE_instanced_arrays"),ye=!ae&&ve("EXT_blend_minmax");tt("aUV",2,we.STATIC_DRAW,0,R),tt("aLineSegment",4,we.DYNAMIC_DRAW,1,Ee),se.apply(void 0,["4f","uGlyphBounds"].concat(X)),se("1f","uMaxDistance",ee),se("1f","uExponent",le),Ie(ke,Fe,function(Y){we.enable(we.BLEND),we.colorMask(!0,!0,!0,!0),we.viewport(0,0,te,ie),we.scissor(0,0,te,ie),we.blendFunc(we.ONE,we.ONE),we.blendEquationSeparate(we.FUNC_ADD,ae?we.MAX:ye.MAX_EXT),we.clear(we.COLOR_BUFFER_BIT),ae?we.drawArraysInstanced(we.TRIANGLES,0,3,Ee.length/4):Z.drawArraysInstancedANGLE(we.TRIANGLES,0,3,Ee.length/4)})}),xe("post",o,C,function(Ae){Ae.setAttribute("aUV",2,we.STATIC_DRAW,0,R),Ae.setUniform("1i","tex",Fe),we.bindFramebuffer(we.FRAMEBUFFER,ue),we.disable(we.BLEND),we.colorMask(Te===0,Te===1,Te===2,Te===3),we.viewport(he,be,te,ie),we.scissor(he,be,te,ie),we.drawArrays(we.TRIANGLES,0,3)})}),we.isContextLost())throw Ne(),new Error("webgl context lost")})}function q(te){var ie=!te||te===O?L:te.canvas||te,F=N.get(ie);if(F===void 0){I=!0;var X=null;try{var ee=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],le=B(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,te);F=le&&ee.length===le.length&&le.every(function(oe,ue){return oe===ee[ue]}),F||(X="bad trial run results",console.info(ee,le))}catch(oe){F=!1,X=oe.message}X&&console.warn("WebGL SDF generation not supported:",X),I=!1,N.set(ie,F)}return F}var W=Object.freeze({__proto__:null,generate:B,generateIntoCanvas:k,generateIntoFramebuffer:j,isSupported:q});function G(te,ie,F,X,ee,le){ee===void 0&&(ee=Math.max(X[2]-X[0],X[3]-X[1])/2),le===void 0&&(le=1);try{return B.apply(W,arguments)}catch(oe){return console.info("WebGL SDF generation failed, falling back to JS",oe),b.apply(A,arguments)}}function K(te,ie,F,X,ee,le,oe,ue,he,be){ee===void 0&&(ee=Math.max(X[2]-X[0],X[3]-X[1])/2),le===void 0&&(le=1),ue===void 0&&(ue=0),he===void 0&&(he=0),be===void 0&&(be=0);try{return k.apply(W,arguments)}catch(Te){return console.info("WebGL SDF generation failed, falling back to JS",Te),x.apply(A,arguments)}}return e.forEachPathCommand=r,e.generate=G,e.generateIntoCanvas=K,e.javascript=A,e.pathToLineSegments=s,e.webgl=W,e.webglUtils=v,Object.defineProperty(e,"__esModule",{value:!0}),e})({});return n}function w0e(){var n=(function(e){var t={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},i={},r={};i.L=1,r[1]="L",Object.keys(t).forEach(function(Ne,ke){i[Ne]=1<<ke+1,r[i[Ne]]=Ne}),Object.freeze(i);var s=i.LRI|i.RLI|i.FSI,o=i.L|i.R|i.AL,a=i.B|i.S|i.WS|i.ON|i.FSI|i.LRI|i.RLI|i.PDI,l=i.BN|i.RLE|i.LRE|i.RLO|i.LRO|i.PDF,c=i.S|i.WS|i.B|s|i.PDI|l,f=null;function d(){if(!f){f=new Map;var Ne=function(Fe){if(t.hasOwnProperty(Fe)){var Ae=0;t[Fe].split(",").forEach(function(tt){var se=tt.split("+"),Z=se[0],ye=se[1];Z=parseInt(Z,36),ye=ye?parseInt(ye,36):0,f.set(Ae+=Z,i[Fe]);for(var Y=0;Y<ye;Y++)f.set(++Ae,i[Fe])})}};for(var ke in t)Ne(ke)}}function m(Ne){return d(),f.get(Ne.codePointAt(0))||i.L}function v(Ne){return r[m(Ne)]}var b={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function x(Ne,ke){var Fe=36,Ae=0,tt=new Map,se=ke&&new Map,Z;return Ne.split(",").forEach(function ye(Y){if(Y.indexOf("+")!==-1)for(var J=+Y;J--;)ye(Z);else{Z=Y;var re=Y.split(">"),ge=re[0],_e=re[1];ge=String.fromCodePoint(Ae+=parseInt(ge,Fe)),_e=String.fromCodePoint(Ae+=parseInt(_e,Fe)),tt.set(ge,_e),ke&&se.set(_e,ge)}}),{map:tt,reverseMap:se}}var w,_,A;function T(){if(!w){var Ne=x(b.pairs,!0),ke=Ne.map,Fe=Ne.reverseMap;w=ke,_=Fe,A=x(b.canonical,!1).map}}function E(Ne){return T(),w.get(Ne)||null}function C(Ne){return T(),_.get(Ne)||null}function R(Ne){return T(),A.get(Ne)||null}var O=i.L,I=i.R,L=i.EN,N=i.ES,V=i.ET,B=i.AN,k=i.CS,j=i.B,q=i.S,W=i.ON,G=i.BN,K=i.NSM,te=i.AL,ie=i.LRO,F=i.RLO,X=i.LRE,ee=i.RLE,le=i.PDF,oe=i.LRI,ue=i.RLI,he=i.FSI,be=i.PDI;function Te(Ne,ke){for(var Fe=125,Ae=new Uint32Array(Ne.length),tt=0;tt<Ne.length;tt++)Ae[tt]=m(Ne[tt]);var se=new Map;function Z(jr,fo){var as=Ae[jr];Ae[jr]=fo,se.set(as,se.get(as)-1),as&a&&se.set(a,se.get(a)-1),se.set(fo,(se.get(fo)||0)+1),fo&a&&se.set(a,(se.get(a)||0)+1)}for(var ye=new Uint8Array(Ne.length),Y=new Map,J=[],re=null,ge=0;ge<Ne.length;ge++)re||J.push(re={start:ge,end:Ne.length-1,level:ke==="rtl"?1:ke==="ltr"?0:eh(ge,!1)}),Ae[ge]&j&&(re.end=ge,re=null);for(var _e=ee|X|F|ie|s|be|le|j,Se=function(jr){return jr+(jr&1?1:2)},Ue=function(jr){return jr+(jr&1?2:1)},Me=0;Me<J.length;Me++){re=J[Me];var Le=[{_level:re.level,_override:0,_isolate:0}],He=void 0,nt=0,Je=0,gt=0;se.clear();for(var Re=re.start;Re<=re.end;Re++){var $e=Ae[Re];if(He=Le[Le.length-1],se.set($e,(se.get($e)||0)+1),$e&a&&se.set(a,(se.get(a)||0)+1),$e&_e)if($e&(ee|X)){ye[Re]=He._level;var at=($e===ee?Ue:Se)(He._level);at<=Fe&&!nt&&!Je?Le.push({_level:at,_override:0,_isolate:0}):nt||Je++}else if($e&(F|ie)){ye[Re]=He._level;var _t=($e===F?Ue:Se)(He._level);_t<=Fe&&!nt&&!Je?Le.push({_level:_t,_override:$e&F?I:O,_isolate:0}):nt||Je++}else if($e&s){$e&he&&($e=eh(Re+1,!0)===1?ue:oe),ye[Re]=He._level,He._override&&Z(Re,He._override);var st=($e===ue?Ue:Se)(He._level);st<=Fe&&nt===0&&Je===0?(gt++,Le.push({_level:st,_override:0,_isolate:1,_isolInitIndex:Re})):nt++}else if($e&be){if(nt>0)nt--;else if(gt>0){for(Je=0;!Le[Le.length-1]._isolate;)Le.pop();var qe=Le[Le.length-1]._isolInitIndex;qe!=null&&(Y.set(qe,Re),Y.set(Re,qe)),Le.pop(),gt--}He=Le[Le.length-1],ye[Re]=He._level,He._override&&Z(Re,He._override)}else $e&le?(nt===0&&(Je>0?Je--:!He._isolate&&Le.length>1&&(Le.pop(),He=Le[Le.length-1])),ye[Re]=He._level):$e&j&&(ye[Re]=re.level);else ye[Re]=He._level,He._override&&$e!==G&&Z(Re,He._override)}for(var vt=[],Rt=null,Tt=re.start;Tt<=re.end;Tt++){var Bt=Ae[Tt];if(!(Bt&l)){var $n=ye[Tt],qn=Bt&s,ri=Bt===be;Rt&&$n===Rt._level?(Rt._end=Tt,Rt._endsWithIsolInit=qn):vt.push(Rt={_start:Tt,_end:Tt,_level:$n,_startsWithPDI:ri,_endsWithIsolInit:qn})}}for(var Si=[],rs=0;rs<vt.length;rs++){var _r=vt[rs];if(!_r._startsWithPDI||_r._startsWithPDI&&!Y.has(_r._start)){for(var Ar=[Rt=_r],Gr=void 0;Rt&&Rt._endsWithIsolInit&&(Gr=Y.get(Rt._end))!=null;)for(var Yi=rs+1;Yi<vt.length;Yi++)if(vt[Yi]._start===Gr){Ar.push(Rt=vt[Yi]);break}for(var ei=[],Zn=0;Zn<Ar.length;Zn++)for(var Hi=Ar[Zn],Ps=Hi._start;Ps<=Hi._end;Ps++)ei.push(Ps);for(var Is=ye[ei[0]],oo=re.level,ko=ei[0]-1;ko>=0;ko--)if(!(Ae[ko]&l)){oo=ye[ko];break}var Na=ei[ei.length-1],ao=ye[Na],pe=re.level;if(!(Ae[Na]&s)){for(var Be=Na+1;Be<=re.end;Be++)if(!(Ae[Be]&l)){pe=ye[Be];break}}Si.push({_seqIndices:ei,_sosType:Math.max(oo,Is)%2?I:O,_eosType:Math.max(pe,ao)%2?I:O})}}for(var Ye=0;Ye<Si.length;Ye++){var Ke=Si[Ye],De=Ke._seqIndices,lt=Ke._sosType,xt=Ke._eosType,Ct=ye[De[0]]&1?I:O;if(se.get(K))for(var Et=0;Et<De.length;Et++){var Pt=De[Et];if(Ae[Pt]&K){for(var It=lt,Ut=Et-1;Ut>=0;Ut--)if(!(Ae[De[Ut]]&l)){It=Ae[De[Ut]];break}Z(Pt,It&(s|be)?W:It)}}if(se.get(L))for(var Nt=0;Nt<De.length;Nt++){var In=De[Nt];if(Ae[In]&L)for(var kn=Nt-1;kn>=-1;kn--){var zn=kn===-1?lt:Ae[De[kn]];if(zn&o){zn===te&&Z(In,B);break}}}if(se.get(te))for(var sn=0;sn<De.length;sn++){var Lt=De[sn];Ae[Lt]&te&&Z(Lt,I)}if(se.get(N)||se.get(k))for(var Fn=1;Fn<De.length-1;Fn++){var mn=De[Fn];if(Ae[mn]&(N|k)){for(var gi=0,di=0,on=Fn-1;on>=0&&(gi=Ae[De[on]],!!(gi&l));on--);for(var Ns=Fn+1;Ns<De.length&&(di=Ae[De[Ns]],!!(di&l));Ns++);gi===di&&(Ae[mn]===N?gi===L:gi&(L|B))&&Z(mn,gi)}}if(se.get(L))for(var $t=0;$t<De.length;$t++){var Zi=De[$t];if(Ae[Zi]&L){for(var ji=$t-1;ji>=0&&Ae[De[ji]]&(V|l);ji--)Z(De[ji],L);for($t++;$t<De.length&&Ae[De[$t]]&(V|l|L);$t++)Ae[De[$t]]!==L&&Z(De[$t],L)}}if(se.get(V)||se.get(N)||se.get(k))for(var Hn=0;Hn<De.length;Hn++){var pi=De[Hn];if(Ae[pi]&(V|N|k)){Z(pi,W);for(var lo=Hn-1;lo>=0&&Ae[De[lo]]&l;lo--)Z(De[lo],W);for(var Hr=Hn+1;Hr<De.length&&Ae[De[Hr]]&l;Hr++)Z(De[Hr],W)}}if(se.get(L))for(var va=0,Ad=lt;va<De.length;va++){var Jf=De[va],Tu=Ae[Jf];Tu&L?Ad===O&&Z(Jf,O):Tu&o&&(Ad=Tu)}if(se.get(a)){var Ua=I|L|B,Cd=Ua|O,vc=[];{for(var zo=[],ss=0;ss<De.length;ss++)if(Ae[De[ss]]&a){var ka=Ne[De[ss]],Au=void 0;if(E(ka)!==null)if(zo.length<63)zo.push({char:ka,seqIndex:ss});else break;else if((Au=C(ka))!==null)for(var co=zo.length-1;co>=0;co--){var Fo=zo[co].char;if(Fo===Au||Fo===C(R(ka))||E(R(Fo))===ka){vc.push([zo[co].seqIndex,ss]),zo.length=co;break}}}vc.sort(function(jr,fo){return jr[0]-fo[0]})}for(var Cu=0;Cu<vc.length;Cu++){for(var Ru=vc[Cu],yc=Ru[0],za=Ru[1],uo=!1,gs=0,Fa=yc+1;Fa<za;Fa++){var os=De[Fa];if(Ae[os]&Cd){uo=!0;var Du=Ae[os]&Ua?I:O;if(Du===Ct){gs=Du;break}}}if(uo&&!gs){gs=lt;for(var ya=yc-1;ya>=0;ya--){var bc=De[ya];if(Ae[bc]&Cd){var _c=Ae[bc]&Ua?I:O;_c!==Ct?gs=_c:gs=Ct;break}}}if(gs){if(Ae[De[yc]]=Ae[De[za]]=gs,gs!==Ct){for(var Bo=yc+1;Bo<De.length;Bo++)if(!(Ae[De[Bo]]&l)){m(Ne[De[Bo]])&K&&(Ae[De[Bo]]=gs);break}}if(gs!==Ct){for(var xc=za+1;xc<De.length;xc++)if(!(Ae[De[xc]]&l)){m(Ne[De[xc]])&K&&(Ae[De[xc]]=gs);break}}}}for(var Ai=0;Ai<De.length;Ai++)if(Ae[De[Ai]]&a){for(var ba=Ai,Rl=Ai,Ba=lt,wc=Ai-1;wc>=0;wc--)if(Ae[De[wc]]&l)ba=wc;else{Ba=Ae[De[wc]]&Ua?I:O;break}for(var Sc=xt,Va=Ai+1;Va<De.length;Va++)if(Ae[De[Va]]&(a|l))Rl=Va;else{Sc=Ae[De[Va]]&Ua?I:O;break}for(var Ga=ba;Ga<=Rl;Ga++)Ae[De[Ga]]=Ba===Sc?Ba:Ct;Ai=Rl}}}for(var fr=re.start;fr<=re.end;fr++){var Rd=ye[fr],Ou=Ae[fr];if(Rd&1?Ou&(O|L|B)&&ye[fr]++:Ou&I?ye[fr]++:Ou&(B|L)&&(ye[fr]+=2),Ou&l&&(ye[fr]=fr===0?re.level:ye[fr-1]),fr===re.end||m(Ne[fr])&(q|j))for(var Lu=fr;Lu>=0&&m(Ne[Lu])&c;Lu--)ye[Lu]=re.level}}return{levels:ye,paragraphs:J};function eh(jr,fo){for(var as=jr;as<Ne.length;as++){var _a=Ae[as];if(_a&(I|te))return 1;if(_a&(j|O)||fo&&_a===be)return 0;if(_a&s){var Ec=th(as);as=Ec===-1?Ne.length:Ec}}return 0}function th(jr){for(var fo=1,as=jr+1;as<Ne.length;as++){var _a=Ae[as];if(_a&j)break;if(_a&be){if(--fo===0)return as}else _a&s&&fo++}return-1}}var Ee="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",Ce;function we(){if(!Ce){var Ne=x(Ee,!0),ke=Ne.map,Fe=Ne.reverseMap;Fe.forEach(function(Ae,tt){ke.set(tt,Ae)}),Ce=ke}}function ae(Ne){return we(),Ce.get(Ne)||null}function ve(Ne,ke,Fe,Ae){var tt=Ne.length;Fe=Math.max(0,Fe==null?0:+Fe),Ae=Math.min(tt-1,Ae==null?tt-1:+Ae);for(var se=new Map,Z=Fe;Z<=Ae;Z++)if(ke[Z]&1){var ye=ae(Ne[Z]);ye!==null&&se.set(Z,ye)}return se}function xe(Ne,ke,Fe,Ae){var tt=Ne.length;Fe=Math.max(0,Fe==null?0:+Fe),Ae=Math.min(tt-1,Ae==null?tt-1:+Ae);var se=[];return ke.paragraphs.forEach(function(Z){var ye=Math.max(Fe,Z.start),Y=Math.min(Ae,Z.end);if(ye<Y){for(var J=ke.levels.slice(ye,Y+1),re=Y;re>=ye&&m(Ne[re])&c;re--)J[re]=Z.level;for(var ge=Z.level,_e=1/0,Se=0;Se<J.length;Se++){var Ue=J[Se];Ue>ge&&(ge=Ue),Ue<_e&&(_e=Ue|1)}for(var Me=ge;Me>=_e;Me--)for(var Le=0;Le<J.length;Le++)if(J[Le]>=Me){for(var He=Le;Le+1<J.length&&J[Le+1]>=Me;)Le++;Le>He&&se.push([He+ye,Le+ye])}}}),se}function me(Ne,ke,Fe,Ae){var tt=Ie(Ne,ke,Fe,Ae),se=[].concat(Ne);return tt.forEach(function(Z,ye){se[ye]=(ke.levels[Z]&1?ae(Ne[Z]):null)||Ne[Z]}),se.join("")}function Ie(Ne,ke,Fe,Ae){for(var tt=xe(Ne,ke,Fe,Ae),se=[],Z=0;Z<Ne.length;Z++)se[Z]=Z;return tt.forEach(function(ye){for(var Y=ye[0],J=ye[1],re=se.slice(Y,J+1),ge=re.length;ge--;)se[J-ge]=re[ge]}),se}return e.closingToOpeningBracket=C,e.getBidiCharType=m,e.getBidiCharTypeName=v,e.getCanonicalBracket=R,e.getEmbeddingLevels=Te,e.getMirroredCharacter=ae,e.getMirroredCharactersMap=ve,e.getReorderSegments=xe,e.getReorderedIndices=Ie,e.getReorderedString=me,e.openingToClosingBracket=E,Object.defineProperty(e,"__esModule",{value:!0}),e})({});return n}const BH=/\bvoid\s+main\s*\(\s*\)\s*{/g;function HD(n){const e=/^[ \t]*#include +<([\w\d./]+)>/gm;function t(i,r){let s=bn[r];return s?HD(s):i}return n.replace(e,t)}const Ts=[];for(let n=0;n<256;n++)Ts[n]=(n<16?"0":"")+n.toString(16);function S0e(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Ts[n&255]+Ts[n>>8&255]+Ts[n>>16&255]+Ts[n>>24&255]+"-"+Ts[e&255]+Ts[e>>8&255]+"-"+Ts[e>>16&15|64]+Ts[e>>24&255]+"-"+Ts[t&63|128]+Ts[t>>8&255]+"-"+Ts[t>>16&255]+Ts[t>>24&255]+Ts[i&255]+Ts[i>>8&255]+Ts[i>>16&255]+Ts[i>>24&255]).toUpperCase()}const Ap=Object.assign||function(){let n=arguments[0];for(let e=1,t=arguments.length;e<t;e++){let i=arguments[e];if(i)for(let r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])}return n},E0e=Date.now(),O5=new WeakMap,L5=new Map;let M0e=1e10;function jD(n,e){const t=R0e(e);let i=O5.get(n);if(i||O5.set(n,i=Object.create(null)),i[t])return new i[t];const r=`_onBeforeCompile${t}`,s=function(c,f){n.onBeforeCompile.call(this,c,f);const d=this.customProgramCacheKey()+"|"+c.vertexShader+"|"+c.fragmentShader;let m=L5[d];if(!m){const v=T0e(this,c,e,t);m=L5[d]=v}c.vertexShader=m.vertexShader,c.fragmentShader=m.fragmentShader,Ap(c.uniforms,this.uniforms),e.timeUniform&&(c.uniforms[e.timeUniform]={get value(){return Date.now()-E0e}}),this[r]&&this[r](c)},o=function(){return a(e.chained?n:n.clone())},a=function(c){const f=Object.create(c,l);return Object.defineProperty(f,"baseMaterial",{value:n}),Object.defineProperty(f,"id",{value:M0e++}),f.uuid=S0e(),f.uniforms=Ap({},c.uniforms,e.uniforms),f.defines=Ap({},c.defines,e.defines),f.defines[`TROIKA_DERIVED_MATERIAL_${t}`]="",f.extensions=Ap({},c.extensions,e.extensions),f._listeners=void 0,f},l={constructor:{value:o},isDerivedMaterial:{value:!0},type:{get:()=>n.type,set:c=>{n.type=c}},isDerivedFrom:{writable:!0,configurable:!0,value:function(c){const f=this.baseMaterial;return c===f||f.isDerivedMaterial&&f.isDerivedFrom(c)||!1}},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return n.customProgramCacheKey()+"|"+t}},onBeforeCompile:{get(){return s},set(c){this[r]=c}},copy:{writable:!0,configurable:!0,value:function(c){return n.copy.call(this,c),!n.isShaderMaterial&&!n.isDerivedMaterial&&(Ap(this.extensions,c.extensions),Ap(this.defines,c.defines),Ap(this.uniforms,gL.clone(c.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const c=new n.constructor;return a(c).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let c=this._depthMaterial;return c||(c=this._depthMaterial=jD(n.isDerivedMaterial?n.getDepthMaterial():new pT({depthPacking:uL}),e),c.defines.IS_DEPTH_MATERIAL="",c.uniforms=this.uniforms),c}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let c=this._distanceMaterial;return c||(c=this._distanceMaterial=jD(n.isDerivedMaterial?n.getDistanceMaterial():new mT,e),c.defines.IS_DISTANCE_MATERIAL="",c.uniforms=this.uniforms),c}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:c,_distanceMaterial:f}=this;c&&c.dispose(),f&&f.dispose(),n.dispose.call(this)}}};return i[t]=o,new o}function T0e(n,{vertexShader:e,fragmentShader:t},i,r){let{vertexDefs:s,vertexMainIntro:o,vertexMainOutro:a,vertexTransform:l,fragmentDefs:c,fragmentMainIntro:f,fragmentMainOutro:d,fragmentColorTransform:m,customRewriter:v,timeUniform:b}=i;if(s=s||"",o=o||"",a=a||"",c=c||"",f=f||"",d=d||"",(l||v)&&(e=HD(e)),(m||v)&&(t=t.replace(/^[ \t]*#include <((?:tonemapping|encodings|colorspace|fog|premultiplied_alpha|dithering)_fragment)>/gm,`
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`),t=HD(t)),v){let x=v({vertexShader:e,fragmentShader:t});e=x.vertexShader,t=x.fragmentShader}if(m){let x=[];t=t.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,w=>(x.push(w),"")),d=`${m}
${x.join(`
`)}
${d}`}if(b){const x=`
uniform float ${b};
`;s=x+s,c=x+c}return l&&(e=`vec3 troika_position_${r};
vec3 troika_normal_${r};
vec2 troika_uv_${r};
${e}
`,s=`${s}
void troikaVertexTransform${r}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${l}
}
`,o=`
troika_position_${r} = vec3(position);
troika_normal_${r} = vec3(normal);
troika_uv_${r} = vec2(uv);
troikaVertexTransform${r}(troika_position_${r}, troika_normal_${r}, troika_uv_${r});
${o}
`,e=e.replace(/\b(position|normal|uv)\b/g,(x,w,_,A)=>/\battribute\s+vec[23]\s+$/.test(A.substr(0,_))?w:`troika_${w}_${r}`),n.map&&n.map.channel>0||(e=e.replace(/\bMAP_UV\b/g,`troika_uv_${r}`))),e=P5(e,r,s,o,a),t=P5(t,r,c,f,d),{vertexShader:e,fragmentShader:t}}function P5(n,e,t,i,r){return(i||r||t)&&(n=n.replace(BH,`
${t}
void troikaOrigMain${e}() {`),n+=`
void main() {
  ${i}
  troikaOrigMain${e}();
  ${r}
}`),n}function A0e(n,e){return n==="uniforms"?void 0:typeof e=="function"?e.toString():e}let C0e=0;const I5=new Map;function R0e(n){const e=JSON.stringify(n,A0e);let t=I5.get(e);return t==null&&I5.set(e,t=++C0e),t}function D0e(){return typeof window>"u"&&(self.window=self),(function(n){var e={parse:function(r){var s=e._bin,o=new Uint8Array(r);if(s.readASCII(o,0,4)=="ttcf"){var a=4;s.readUshort(o,a),a+=2,s.readUshort(o,a),a+=2;var l=s.readUint(o,a);a+=4;for(var c=[],f=0;f<l;f++){var d=s.readUint(o,a);a+=4,c.push(e._readFont(o,d))}return c}return[e._readFont(o,0)]},_readFont:function(r,s){var o=e._bin,a=s;o.readFixed(r,s),s+=4;var l=o.readUshort(r,s);s+=2,o.readUshort(r,s),s+=2,o.readUshort(r,s),s+=2,o.readUshort(r,s),s+=2;for(var c=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GDEF","GPOS","GSUB","SVG "],f={_data:r,_offset:a},d={},m=0;m<l;m++){var v=o.readASCII(r,s,4);s+=4,o.readUint(r,s),s+=4;var b=o.readUint(r,s);s+=4;var x=o.readUint(r,s);s+=4,d[v]={offset:b,length:x}}for(m=0;m<c.length;m++){var w=c[m];d[w]&&(f[w.trim()]=e[w.trim()].parse(r,d[w].offset,d[w].length,f))}return f},_tabOffset:function(r,s,o){for(var a=e._bin,l=a.readUshort(r,o+4),c=o+12,f=0;f<l;f++){var d=a.readASCII(r,c,4);c+=4,a.readUint(r,c),c+=4;var m=a.readUint(r,c);if(c+=4,a.readUint(r,c),c+=4,d==s)return m}return 0}};e._bin={readFixed:function(r,s){return(r[s]<<8|r[s+1])+(r[s+2]<<8|r[s+3])/65540},readF2dot14:function(r,s){return e._bin.readShort(r,s)/16384},readInt:function(r,s){return e._bin._view(r).getInt32(s)},readInt8:function(r,s){return e._bin._view(r).getInt8(s)},readShort:function(r,s){return e._bin._view(r).getInt16(s)},readUshort:function(r,s){return e._bin._view(r).getUint16(s)},readUshorts:function(r,s,o){for(var a=[],l=0;l<o;l++)a.push(e._bin.readUshort(r,s+2*l));return a},readUint:function(r,s){return e._bin._view(r).getUint32(s)},readUint64:function(r,s){return 4294967296*e._bin.readUint(r,s)+e._bin.readUint(r,s+4)},readASCII:function(r,s,o){for(var a="",l=0;l<o;l++)a+=String.fromCharCode(r[s+l]);return a},readUnicode:function(r,s,o){for(var a="",l=0;l<o;l++){var c=r[s++]<<8|r[s++];a+=String.fromCharCode(c)}return a},_tdec:typeof window<"u"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(r,s,o){var a=e._bin._tdec;return a&&s==0&&o==r.length?a.decode(r):e._bin.readASCII(r,s,o)},readBytes:function(r,s,o){for(var a=[],l=0;l<o;l++)a.push(r[s+l]);return a},readASCIIArray:function(r,s,o){for(var a=[],l=0;l<o;l++)a.push(String.fromCharCode(r[s+l]));return a},_view:function(r){return r._dataView||(r._dataView=r.buffer?new DataView(r.buffer,r.byteOffset,r.byteLength):new DataView(new Uint8Array(r).buffer))}},e._lctf={},e._lctf.parse=function(r,s,o,a,l){var c=e._bin,f={},d=s;c.readFixed(r,s),s+=4;var m=c.readUshort(r,s);s+=2;var v=c.readUshort(r,s);s+=2;var b=c.readUshort(r,s);return s+=2,f.scriptList=e._lctf.readScriptList(r,d+m),f.featureList=e._lctf.readFeatureList(r,d+v),f.lookupList=e._lctf.readLookupList(r,d+b,l),f},e._lctf.readLookupList=function(r,s,o){var a=e._bin,l=s,c=[],f=a.readUshort(r,s);s+=2;for(var d=0;d<f;d++){var m=a.readUshort(r,s);s+=2;var v=e._lctf.readLookupTable(r,l+m,o);c.push(v)}return c},e._lctf.readLookupTable=function(r,s,o){var a=e._bin,l=s,c={tabs:[]};c.ltype=a.readUshort(r,s),s+=2,c.flag=a.readUshort(r,s),s+=2;var f=a.readUshort(r,s);s+=2;for(var d=c.ltype,m=0;m<f;m++){var v=a.readUshort(r,s);s+=2;var b=o(r,d,l+v,c);c.tabs.push(b)}return c},e._lctf.numOfOnes=function(r){for(var s=0,o=0;o<32;o++)(r>>>o&1)!=0&&s++;return s},e._lctf.readClassDef=function(r,s){var o=e._bin,a=[],l=o.readUshort(r,s);if(s+=2,l==1){var c=o.readUshort(r,s);s+=2;var f=o.readUshort(r,s);s+=2;for(var d=0;d<f;d++)a.push(c+d),a.push(c+d),a.push(o.readUshort(r,s)),s+=2}if(l==2){var m=o.readUshort(r,s);for(s+=2,d=0;d<m;d++)a.push(o.readUshort(r,s)),s+=2,a.push(o.readUshort(r,s)),s+=2,a.push(o.readUshort(r,s)),s+=2}return a},e._lctf.getInterval=function(r,s){for(var o=0;o<r.length;o+=3){var a=r[o],l=r[o+1];if(r[o+2],a<=s&&s<=l)return o}return-1},e._lctf.readCoverage=function(r,s){var o=e._bin,a={};a.fmt=o.readUshort(r,s),s+=2;var l=o.readUshort(r,s);return s+=2,a.fmt==1&&(a.tab=o.readUshorts(r,s,l)),a.fmt==2&&(a.tab=o.readUshorts(r,s,3*l)),a},e._lctf.coverageIndex=function(r,s){var o=r.tab;if(r.fmt==1)return o.indexOf(s);if(r.fmt==2){var a=e._lctf.getInterval(o,s);if(a!=-1)return o[a+2]+(s-o[a])}return-1},e._lctf.readFeatureList=function(r,s){var o=e._bin,a=s,l=[],c=o.readUshort(r,s);s+=2;for(var f=0;f<c;f++){var d=o.readASCII(r,s,4);s+=4;var m=o.readUshort(r,s);s+=2;var v=e._lctf.readFeatureTable(r,a+m);v.tag=d.trim(),l.push(v)}return l},e._lctf.readFeatureTable=function(r,s){var o=e._bin,a=s,l={},c=o.readUshort(r,s);s+=2,c>0&&(l.featureParams=a+c);var f=o.readUshort(r,s);s+=2,l.tab=[];for(var d=0;d<f;d++)l.tab.push(o.readUshort(r,s+2*d));return l},e._lctf.readScriptList=function(r,s){var o=e._bin,a=s,l={},c=o.readUshort(r,s);s+=2;for(var f=0;f<c;f++){var d=o.readASCII(r,s,4);s+=4;var m=o.readUshort(r,s);s+=2,l[d.trim()]=e._lctf.readScriptTable(r,a+m)}return l},e._lctf.readScriptTable=function(r,s){var o=e._bin,a=s,l={},c=o.readUshort(r,s);s+=2,c>0&&(l.default=e._lctf.readLangSysTable(r,a+c));var f=o.readUshort(r,s);s+=2;for(var d=0;d<f;d++){var m=o.readASCII(r,s,4);s+=4;var v=o.readUshort(r,s);s+=2,l[m.trim()]=e._lctf.readLangSysTable(r,a+v)}return l},e._lctf.readLangSysTable=function(r,s){var o=e._bin,a={};o.readUshort(r,s),s+=2,a.reqFeature=o.readUshort(r,s),s+=2;var l=o.readUshort(r,s);return s+=2,a.features=o.readUshorts(r,s,l),a},e.CFF={},e.CFF.parse=function(r,s,o){var a=e._bin;(r=new Uint8Array(r.buffer,s,o))[s=0],r[++s],r[++s],r[++s],s++;var l=[];s=e.CFF.readIndex(r,s,l);for(var c=[],f=0;f<l.length-1;f++)c.push(a.readASCII(r,s+l[f],l[f+1]-l[f]));s+=l[l.length-1];var d=[];s=e.CFF.readIndex(r,s,d);var m=[];for(f=0;f<d.length-1;f++)m.push(e.CFF.readDict(r,s+d[f],s+d[f+1]));s+=d[d.length-1];var v=m[0],b=[];s=e.CFF.readIndex(r,s,b);var x=[];for(f=0;f<b.length-1;f++)x.push(a.readASCII(r,s+b[f],b[f+1]-b[f]));if(s+=b[b.length-1],e.CFF.readSubrs(r,s,v),v.CharStrings){s=v.CharStrings,b=[],s=e.CFF.readIndex(r,s,b);var w=[];for(f=0;f<b.length-1;f++)w.push(a.readBytes(r,s+b[f],b[f+1]-b[f]));v.CharStrings=w}if(v.ROS){s=v.FDArray;var _=[];for(s=e.CFF.readIndex(r,s,_),v.FDArray=[],f=0;f<_.length-1;f++){var A=e.CFF.readDict(r,s+_[f],s+_[f+1]);e.CFF._readFDict(r,A,x),v.FDArray.push(A)}s+=_[_.length-1],s=v.FDSelect,v.FDSelect=[];var T=r[s];if(s++,T!=3)throw T;var E=a.readUshort(r,s);for(s+=2,f=0;f<E+1;f++)v.FDSelect.push(a.readUshort(r,s),r[s+2]),s+=3}return v.Encoding&&(v.Encoding=e.CFF.readEncoding(r,v.Encoding,v.CharStrings.length)),v.charset&&(v.charset=e.CFF.readCharset(r,v.charset,v.CharStrings.length)),e.CFF._readFDict(r,v,x),v},e.CFF._readFDict=function(r,s,o){var a;for(var l in s.Private&&(a=s.Private[1],s.Private=e.CFF.readDict(r,a,a+s.Private[0]),s.Private.Subrs&&e.CFF.readSubrs(r,a+s.Private.Subrs,s.Private)),s)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(l)!=-1&&(s[l]=o[s[l]-426+35])},e.CFF.readSubrs=function(r,s,o){var a=e._bin,l=[];s=e.CFF.readIndex(r,s,l);var c,f=l.length;c=f<1240?107:f<33900?1131:32768,o.Bias=c,o.Subrs=[];for(var d=0;d<l.length-1;d++)o.Subrs.push(a.readBytes(r,s+l[d],l[d+1]-l[d]))},e.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],e.CFF.glyphByUnicode=function(r,s){for(var o=0;o<r.charset.length;o++)if(r.charset[o]==s)return o;return-1},e.CFF.glyphBySE=function(r,s){return s<0||s>255?-1:e.CFF.glyphByUnicode(r,e.CFF.tableSE[s])},e.CFF.readEncoding=function(r,s,o){e._bin;var a=[".notdef"],l=r[s];if(s++,l!=0)throw"error: unknown encoding format: "+l;var c=r[s];s++;for(var f=0;f<c;f++)a.push(r[s+f]);return a},e.CFF.readCharset=function(r,s,o){var a=e._bin,l=[".notdef"],c=r[s];if(s++,c==0)for(var f=0;f<o;f++){var d=a.readUshort(r,s);s+=2,l.push(d)}else{if(c!=1&&c!=2)throw"error: format: "+c;for(;l.length<o;){d=a.readUshort(r,s),s+=2;var m=0;for(c==1?(m=r[s],s++):(m=a.readUshort(r,s),s+=2),f=0;f<=m;f++)l.push(d),d++}}return l},e.CFF.readIndex=function(r,s,o){var a=e._bin,l=a.readUshort(r,s)+1,c=r[s+=2];if(s++,c==1)for(var f=0;f<l;f++)o.push(r[s+f]);else if(c==2)for(f=0;f<l;f++)o.push(a.readUshort(r,s+2*f));else if(c==3)for(f=0;f<l;f++)o.push(16777215&a.readUint(r,s+3*f-1));else if(l!=1)throw"unsupported offset size: "+c+", count: "+l;return(s+=l*c)-1},e.CFF.getCharString=function(r,s,o){var a=e._bin,l=r[s],c=r[s+1];r[s+2],r[s+3],r[s+4];var f=1,d=null,m=null;l<=20&&(d=l,f=1),l==12&&(d=100*l+c,f=2),21<=l&&l<=27&&(d=l,f=1),l==28&&(m=a.readShort(r,s+1),f=3),29<=l&&l<=31&&(d=l,f=1),32<=l&&l<=246&&(m=l-139,f=1),247<=l&&l<=250&&(m=256*(l-247)+c+108,f=2),251<=l&&l<=254&&(m=256*-(l-251)-c-108,f=2),l==255&&(m=a.readInt(r,s+1)/65535,f=5),o.val=m??"o"+d,o.size=f},e.CFF.readCharString=function(r,s,o){for(var a=s+o,l=e._bin,c=[];s<a;){var f=r[s],d=r[s+1];r[s+2],r[s+3],r[s+4];var m=1,v=null,b=null;f<=20&&(v=f,m=1),f==12&&(v=100*f+d,m=2),f!=19&&f!=20||(v=f,m=2),21<=f&&f<=27&&(v=f,m=1),f==28&&(b=l.readShort(r,s+1),m=3),29<=f&&f<=31&&(v=f,m=1),32<=f&&f<=246&&(b=f-139,m=1),247<=f&&f<=250&&(b=256*(f-247)+d+108,m=2),251<=f&&f<=254&&(b=256*-(f-251)-d-108,m=2),f==255&&(b=l.readInt(r,s+1)/65535,m=5),c.push(b??"o"+v),s+=m}return c},e.CFF.readDict=function(r,s,o){for(var a=e._bin,l={},c=[];s<o;){var f=r[s],d=r[s+1];r[s+2],r[s+3],r[s+4];var m=1,v=null,b=null;if(f==28&&(b=a.readShort(r,s+1),m=3),f==29&&(b=a.readInt(r,s+1),m=5),32<=f&&f<=246&&(b=f-139,m=1),247<=f&&f<=250&&(b=256*(f-247)+d+108,m=2),251<=f&&f<=254&&(b=256*-(f-251)-d-108,m=2),f==255)throw b=a.readInt(r,s+1)/65535,m=5,"unknown number";if(f==30){var x=[];for(m=1;;){var w=r[s+m];m++;var _=w>>4,A=15&w;if(_!=15&&x.push(_),A!=15&&x.push(A),A==15)break}for(var T="",E=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],C=0;C<x.length;C++)T+=E[x[C]];b=parseFloat(T)}f<=21&&(v=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][f],m=1,f==12&&(v=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][d],m=2)),v!=null?(l[v]=c.length==1?c[0]:c,c=[]):c.push(b),s+=m}return l},e.cmap={},e.cmap.parse=function(r,s,o){r=new Uint8Array(r.buffer,s,o),s=0;var a=e._bin,l={};a.readUshort(r,s),s+=2;var c=a.readUshort(r,s);s+=2;var f=[];l.tables=[];for(var d=0;d<c;d++){var m=a.readUshort(r,s);s+=2;var v=a.readUshort(r,s);s+=2;var b=a.readUint(r,s);s+=4;var x="p"+m+"e"+v,w=f.indexOf(b);if(w==-1){var _;w=l.tables.length,f.push(b);var A=a.readUshort(r,b);A==0?_=e.cmap.parse0(r,b):A==4?_=e.cmap.parse4(r,b):A==6?_=e.cmap.parse6(r,b):A==12?_=e.cmap.parse12(r,b):console.debug("unknown format: "+A,m,v,b),l.tables.push(_)}if(l[x]!=null)throw"multiple tables for one platform+encoding";l[x]=w}return l},e.cmap.parse0=function(r,s){var o=e._bin,a={};a.format=o.readUshort(r,s),s+=2;var l=o.readUshort(r,s);s+=2,o.readUshort(r,s),s+=2,a.map=[];for(var c=0;c<l-6;c++)a.map.push(r[s+c]);return a},e.cmap.parse4=function(r,s){var o=e._bin,a=s,l={};l.format=o.readUshort(r,s),s+=2;var c=o.readUshort(r,s);s+=2,o.readUshort(r,s),s+=2;var f=o.readUshort(r,s);s+=2;var d=f/2;l.searchRange=o.readUshort(r,s),s+=2,l.entrySelector=o.readUshort(r,s),s+=2,l.rangeShift=o.readUshort(r,s),s+=2,l.endCount=o.readUshorts(r,s,d),s+=2*d,s+=2,l.startCount=o.readUshorts(r,s,d),s+=2*d,l.idDelta=[];for(var m=0;m<d;m++)l.idDelta.push(o.readShort(r,s)),s+=2;for(l.idRangeOffset=o.readUshorts(r,s,d),s+=2*d,l.glyphIdArray=[];s<a+c;)l.glyphIdArray.push(o.readUshort(r,s)),s+=2;return l},e.cmap.parse6=function(r,s){var o=e._bin,a={};a.format=o.readUshort(r,s),s+=2,o.readUshort(r,s),s+=2,o.readUshort(r,s),s+=2,a.firstCode=o.readUshort(r,s),s+=2;var l=o.readUshort(r,s);s+=2,a.glyphIdArray=[];for(var c=0;c<l;c++)a.glyphIdArray.push(o.readUshort(r,s)),s+=2;return a},e.cmap.parse12=function(r,s){var o=e._bin,a={};a.format=o.readUshort(r,s),s+=2,s+=2,o.readUint(r,s),s+=4,o.readUint(r,s),s+=4;var l=o.readUint(r,s);s+=4,a.groups=[];for(var c=0;c<l;c++){var f=s+12*c,d=o.readUint(r,f+0),m=o.readUint(r,f+4),v=o.readUint(r,f+8);a.groups.push([d,m,v])}return a},e.glyf={},e.glyf.parse=function(r,s,o,a){for(var l=[],c=0;c<a.maxp.numGlyphs;c++)l.push(null);return l},e.glyf._parseGlyf=function(r,s){var o=e._bin,a=r._data,l=e._tabOffset(a,"glyf",r._offset)+r.loca[s];if(r.loca[s]==r.loca[s+1])return null;var c={};if(c.noc=o.readShort(a,l),l+=2,c.xMin=o.readShort(a,l),l+=2,c.yMin=o.readShort(a,l),l+=2,c.xMax=o.readShort(a,l),l+=2,c.yMax=o.readShort(a,l),l+=2,c.xMin>=c.xMax||c.yMin>=c.yMax)return null;if(c.noc>0){c.endPts=[];for(var f=0;f<c.noc;f++)c.endPts.push(o.readUshort(a,l)),l+=2;var d=o.readUshort(a,l);if(l+=2,a.length-l<d)return null;c.instructions=o.readBytes(a,l,d),l+=d;var m=c.endPts[c.noc-1]+1;for(c.flags=[],f=0;f<m;f++){var v=a[l];if(l++,c.flags.push(v),(8&v)!=0){var b=a[l];l++;for(var x=0;x<b;x++)c.flags.push(v),f++}}for(c.xs=[],f=0;f<m;f++){var w=(2&c.flags[f])!=0,_=(16&c.flags[f])!=0;w?(c.xs.push(_?a[l]:-a[l]),l++):_?c.xs.push(0):(c.xs.push(o.readShort(a,l)),l+=2)}for(c.ys=[],f=0;f<m;f++)w=(4&c.flags[f])!=0,_=(32&c.flags[f])!=0,w?(c.ys.push(_?a[l]:-a[l]),l++):_?c.ys.push(0):(c.ys.push(o.readShort(a,l)),l+=2);var A=0,T=0;for(f=0;f<m;f++)A+=c.xs[f],T+=c.ys[f],c.xs[f]=A,c.ys[f]=T}else{var E;c.parts=[];do{E=o.readUshort(a,l),l+=2;var C={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(c.parts.push(C),C.glyphIndex=o.readUshort(a,l),l+=2,1&E){var R=o.readShort(a,l);l+=2;var O=o.readShort(a,l);l+=2}else R=o.readInt8(a,l),l++,O=o.readInt8(a,l),l++;2&E?(C.m.tx=R,C.m.ty=O):(C.p1=R,C.p2=O),8&E?(C.m.a=C.m.d=o.readF2dot14(a,l),l+=2):64&E?(C.m.a=o.readF2dot14(a,l),l+=2,C.m.d=o.readF2dot14(a,l),l+=2):128&E&&(C.m.a=o.readF2dot14(a,l),l+=2,C.m.b=o.readF2dot14(a,l),l+=2,C.m.c=o.readF2dot14(a,l),l+=2,C.m.d=o.readF2dot14(a,l),l+=2)}while(32&E);if(256&E){var I=o.readUshort(a,l);for(l+=2,c.instr=[],f=0;f<I;f++)c.instr.push(a[l]),l++}}return c},e.GDEF={},e.GDEF.parse=function(r,s,o,a){var l=s;s+=4;var c=e._bin.readUshort(r,s);return{glyphClassDef:c===0?null:e._lctf.readClassDef(r,l+c)}},e.GPOS={},e.GPOS.parse=function(r,s,o,a){return e._lctf.parse(r,s,o,a,e.GPOS.subt)},e.GPOS.subt=function(r,s,o,a){var l=e._bin,c=o,f={};if(f.fmt=l.readUshort(r,o),o+=2,s==1||s==2||s==3||s==7||s==8&&f.fmt<=2){var d=l.readUshort(r,o);o+=2,f.coverage=e._lctf.readCoverage(r,d+c)}if(s==1&&f.fmt==1){var m=l.readUshort(r,o);o+=2,m!=0&&(f.pos=e.GPOS.readValueRecord(r,o,m))}else if(s==2&&f.fmt>=1&&f.fmt<=2){m=l.readUshort(r,o),o+=2;var v=l.readUshort(r,o);o+=2;var b=e._lctf.numOfOnes(m),x=e._lctf.numOfOnes(v);if(f.fmt==1){f.pairsets=[];var w=l.readUshort(r,o);o+=2;for(var _=0;_<w;_++){var A=c+l.readUshort(r,o);o+=2;var T=l.readUshort(r,A);A+=2;for(var E=[],C=0;C<T;C++){var R=l.readUshort(r,A);A+=2,m!=0&&(B=e.GPOS.readValueRecord(r,A,m),A+=2*b),v!=0&&(k=e.GPOS.readValueRecord(r,A,v),A+=2*x),E.push({gid2:R,val1:B,val2:k})}f.pairsets.push(E)}}if(f.fmt==2){var O=l.readUshort(r,o);o+=2;var I=l.readUshort(r,o);o+=2;var L=l.readUshort(r,o);o+=2;var N=l.readUshort(r,o);for(o+=2,f.classDef1=e._lctf.readClassDef(r,c+O),f.classDef2=e._lctf.readClassDef(r,c+I),f.matrix=[],_=0;_<L;_++){var V=[];for(C=0;C<N;C++){var B=null,k=null;m!=0&&(B=e.GPOS.readValueRecord(r,o,m),o+=2*b),v!=0&&(k=e.GPOS.readValueRecord(r,o,v),o+=2*x),V.push({val1:B,val2:k})}f.matrix.push(V)}}}else if(s==4&&f.fmt==1)f.markCoverage=e._lctf.readCoverage(r,l.readUshort(r,o)+c),f.baseCoverage=e._lctf.readCoverage(r,l.readUshort(r,o+2)+c),f.markClassCount=l.readUshort(r,o+4),f.markArray=e.GPOS.readMarkArray(r,l.readUshort(r,o+6)+c),f.baseArray=e.GPOS.readBaseArray(r,l.readUshort(r,o+8)+c,f.markClassCount);else if(s==6&&f.fmt==1)f.mark1Coverage=e._lctf.readCoverage(r,l.readUshort(r,o)+c),f.mark2Coverage=e._lctf.readCoverage(r,l.readUshort(r,o+2)+c),f.markClassCount=l.readUshort(r,o+4),f.mark1Array=e.GPOS.readMarkArray(r,l.readUshort(r,o+6)+c),f.mark2Array=e.GPOS.readBaseArray(r,l.readUshort(r,o+8)+c,f.markClassCount);else{if(s==9&&f.fmt==1){var j=l.readUshort(r,o);o+=2;var q=l.readUint(r,o);if(o+=4,a.ltype==9)a.ltype=j;else if(a.ltype!=j)throw"invalid extension substitution";return e.GPOS.subt(r,a.ltype,c+q)}console.debug("unsupported GPOS table LookupType",s,"format",f.fmt)}return f},e.GPOS.readValueRecord=function(r,s,o){var a=e._bin,l=[];return l.push(1&o?a.readShort(r,s):0),s+=1&o?2:0,l.push(2&o?a.readShort(r,s):0),s+=2&o?2:0,l.push(4&o?a.readShort(r,s):0),s+=4&o?2:0,l.push(8&o?a.readShort(r,s):0),s+=8&o?2:0,l},e.GPOS.readBaseArray=function(r,s,o){var a=e._bin,l=[],c=s,f=a.readUshort(r,s);s+=2;for(var d=0;d<f;d++){for(var m=[],v=0;v<o;v++)m.push(e.GPOS.readAnchorRecord(r,c+a.readUshort(r,s))),s+=2;l.push(m)}return l},e.GPOS.readMarkArray=function(r,s){var o=e._bin,a=[],l=s,c=o.readUshort(r,s);s+=2;for(var f=0;f<c;f++){var d=e.GPOS.readAnchorRecord(r,o.readUshort(r,s+2)+l);d.markClass=o.readUshort(r,s),a.push(d),s+=4}return a},e.GPOS.readAnchorRecord=function(r,s){var o=e._bin,a={};return a.fmt=o.readUshort(r,s),a.x=o.readShort(r,s+2),a.y=o.readShort(r,s+4),a},e.GSUB={},e.GSUB.parse=function(r,s,o,a){return e._lctf.parse(r,s,o,a,e.GSUB.subt)},e.GSUB.subt=function(r,s,o,a){var l=e._bin,c=o,f={};if(f.fmt=l.readUshort(r,o),o+=2,s!=1&&s!=2&&s!=4&&s!=5&&s!=6)return null;if(s==1||s==2||s==4||s==5&&f.fmt<=2||s==6&&f.fmt<=2){var d=l.readUshort(r,o);o+=2,f.coverage=e._lctf.readCoverage(r,c+d)}if(s==1&&f.fmt>=1&&f.fmt<=2){if(f.fmt==1)f.delta=l.readShort(r,o),o+=2;else if(f.fmt==2){var m=l.readUshort(r,o);o+=2,f.newg=l.readUshorts(r,o,m),o+=2*f.newg.length}}else if(s==2&&f.fmt==1){m=l.readUshort(r,o),o+=2,f.seqs=[];for(var v=0;v<m;v++){var b=l.readUshort(r,o)+c;o+=2;var x=l.readUshort(r,b);f.seqs.push(l.readUshorts(r,b+2,x))}}else if(s==4)for(f.vals=[],m=l.readUshort(r,o),o+=2,v=0;v<m;v++){var w=l.readUshort(r,o);o+=2,f.vals.push(e.GSUB.readLigatureSet(r,c+w))}else if(s==5&&f.fmt==2){if(f.fmt==2){var _=l.readUshort(r,o);o+=2,f.cDef=e._lctf.readClassDef(r,c+_),f.scset=[];var A=l.readUshort(r,o);for(o+=2,v=0;v<A;v++){var T=l.readUshort(r,o);o+=2,f.scset.push(T==0?null:e.GSUB.readSubClassSet(r,c+T))}}}else if(s==6&&f.fmt==3){if(f.fmt==3){for(v=0;v<3;v++){m=l.readUshort(r,o),o+=2;for(var E=[],C=0;C<m;C++)E.push(e._lctf.readCoverage(r,c+l.readUshort(r,o+2*C)));o+=2*m,v==0&&(f.backCvg=E),v==1&&(f.inptCvg=E),v==2&&(f.ahedCvg=E)}m=l.readUshort(r,o),o+=2,f.lookupRec=e.GSUB.readSubstLookupRecords(r,o,m)}}else{if(s==7&&f.fmt==1){var R=l.readUshort(r,o);o+=2;var O=l.readUint(r,o);if(o+=4,a.ltype==9)a.ltype=R;else if(a.ltype!=R)throw"invalid extension substitution";return e.GSUB.subt(r,a.ltype,c+O)}console.debug("unsupported GSUB table LookupType",s,"format",f.fmt)}return f},e.GSUB.readSubClassSet=function(r,s){var o=e._bin.readUshort,a=s,l=[],c=o(r,s);s+=2;for(var f=0;f<c;f++){var d=o(r,s);s+=2,l.push(e.GSUB.readSubClassRule(r,a+d))}return l},e.GSUB.readSubClassRule=function(r,s){var o=e._bin.readUshort,a={},l=o(r,s),c=o(r,s+=2);s+=2,a.input=[];for(var f=0;f<l-1;f++)a.input.push(o(r,s)),s+=2;return a.substLookupRecords=e.GSUB.readSubstLookupRecords(r,s,c),a},e.GSUB.readSubstLookupRecords=function(r,s,o){for(var a=e._bin.readUshort,l=[],c=0;c<o;c++)l.push(a(r,s),a(r,s+2)),s+=4;return l},e.GSUB.readChainSubClassSet=function(r,s){var o=e._bin,a=s,l=[],c=o.readUshort(r,s);s+=2;for(var f=0;f<c;f++){var d=o.readUshort(r,s);s+=2,l.push(e.GSUB.readChainSubClassRule(r,a+d))}return l},e.GSUB.readChainSubClassRule=function(r,s){for(var o=e._bin,a={},l=["backtrack","input","lookahead"],c=0;c<l.length;c++){var f=o.readUshort(r,s);s+=2,c==1&&f--,a[l[c]]=o.readUshorts(r,s,f),s+=2*a[l[c]].length}return f=o.readUshort(r,s),s+=2,a.subst=o.readUshorts(r,s,2*f),s+=2*a.subst.length,a},e.GSUB.readLigatureSet=function(r,s){var o=e._bin,a=s,l=[],c=o.readUshort(r,s);s+=2;for(var f=0;f<c;f++){var d=o.readUshort(r,s);s+=2,l.push(e.GSUB.readLigature(r,a+d))}return l},e.GSUB.readLigature=function(r,s){var o=e._bin,a={chain:[]};a.nglyph=o.readUshort(r,s),s+=2;var l=o.readUshort(r,s);s+=2;for(var c=0;c<l-1;c++)a.chain.push(o.readUshort(r,s)),s+=2;return a},e.head={},e.head.parse=function(r,s,o){var a=e._bin,l={};return a.readFixed(r,s),s+=4,l.fontRevision=a.readFixed(r,s),s+=4,a.readUint(r,s),s+=4,a.readUint(r,s),s+=4,l.flags=a.readUshort(r,s),s+=2,l.unitsPerEm=a.readUshort(r,s),s+=2,l.created=a.readUint64(r,s),s+=8,l.modified=a.readUint64(r,s),s+=8,l.xMin=a.readShort(r,s),s+=2,l.yMin=a.readShort(r,s),s+=2,l.xMax=a.readShort(r,s),s+=2,l.yMax=a.readShort(r,s),s+=2,l.macStyle=a.readUshort(r,s),s+=2,l.lowestRecPPEM=a.readUshort(r,s),s+=2,l.fontDirectionHint=a.readShort(r,s),s+=2,l.indexToLocFormat=a.readShort(r,s),s+=2,l.glyphDataFormat=a.readShort(r,s),s+=2,l},e.hhea={},e.hhea.parse=function(r,s,o){var a=e._bin,l={};return a.readFixed(r,s),s+=4,l.ascender=a.readShort(r,s),s+=2,l.descender=a.readShort(r,s),s+=2,l.lineGap=a.readShort(r,s),s+=2,l.advanceWidthMax=a.readUshort(r,s),s+=2,l.minLeftSideBearing=a.readShort(r,s),s+=2,l.minRightSideBearing=a.readShort(r,s),s+=2,l.xMaxExtent=a.readShort(r,s),s+=2,l.caretSlopeRise=a.readShort(r,s),s+=2,l.caretSlopeRun=a.readShort(r,s),s+=2,l.caretOffset=a.readShort(r,s),s+=2,s+=8,l.metricDataFormat=a.readShort(r,s),s+=2,l.numberOfHMetrics=a.readUshort(r,s),s+=2,l},e.hmtx={},e.hmtx.parse=function(r,s,o,a){for(var l=e._bin,c={aWidth:[],lsBearing:[]},f=0,d=0,m=0;m<a.maxp.numGlyphs;m++)m<a.hhea.numberOfHMetrics&&(f=l.readUshort(r,s),s+=2,d=l.readShort(r,s),s+=2),c.aWidth.push(f),c.lsBearing.push(d);return c},e.kern={},e.kern.parse=function(r,s,o,a){var l=e._bin,c=l.readUshort(r,s);if(s+=2,c==1)return e.kern.parseV1(r,s-2,o,a);var f=l.readUshort(r,s);s+=2;for(var d={glyph1:[],rval:[]},m=0;m<f;m++){s+=2,o=l.readUshort(r,s),s+=2;var v=l.readUshort(r,s);s+=2;var b=v>>>8;if((b&=15)!=0)throw"unknown kern table format: "+b;s=e.kern.readFormat0(r,s,d)}return d},e.kern.parseV1=function(r,s,o,a){var l=e._bin;l.readFixed(r,s),s+=4;var c=l.readUint(r,s);s+=4;for(var f={glyph1:[],rval:[]},d=0;d<c;d++){l.readUint(r,s),s+=4;var m=l.readUshort(r,s);s+=2,l.readUshort(r,s),s+=2;var v=m>>>8;if((v&=15)!=0)throw"unknown kern table format: "+v;s=e.kern.readFormat0(r,s,f)}return f},e.kern.readFormat0=function(r,s,o){var a=e._bin,l=-1,c=a.readUshort(r,s);s+=2,a.readUshort(r,s),s+=2,a.readUshort(r,s),s+=2,a.readUshort(r,s),s+=2;for(var f=0;f<c;f++){var d=a.readUshort(r,s);s+=2;var m=a.readUshort(r,s);s+=2;var v=a.readShort(r,s);s+=2,d!=l&&(o.glyph1.push(d),o.rval.push({glyph2:[],vals:[]}));var b=o.rval[o.rval.length-1];b.glyph2.push(m),b.vals.push(v),l=d}return s},e.loca={},e.loca.parse=function(r,s,o,a){var l=e._bin,c=[],f=a.head.indexToLocFormat,d=a.maxp.numGlyphs+1;if(f==0)for(var m=0;m<d;m++)c.push(l.readUshort(r,s+(m<<1))<<1);if(f==1)for(m=0;m<d;m++)c.push(l.readUint(r,s+(m<<2)));return c},e.maxp={},e.maxp.parse=function(r,s,o){var a=e._bin,l={},c=a.readUint(r,s);return s+=4,l.numGlyphs=a.readUshort(r,s),s+=2,c==65536&&(l.maxPoints=a.readUshort(r,s),s+=2,l.maxContours=a.readUshort(r,s),s+=2,l.maxCompositePoints=a.readUshort(r,s),s+=2,l.maxCompositeContours=a.readUshort(r,s),s+=2,l.maxZones=a.readUshort(r,s),s+=2,l.maxTwilightPoints=a.readUshort(r,s),s+=2,l.maxStorage=a.readUshort(r,s),s+=2,l.maxFunctionDefs=a.readUshort(r,s),s+=2,l.maxInstructionDefs=a.readUshort(r,s),s+=2,l.maxStackElements=a.readUshort(r,s),s+=2,l.maxSizeOfInstructions=a.readUshort(r,s),s+=2,l.maxComponentElements=a.readUshort(r,s),s+=2,l.maxComponentDepth=a.readUshort(r,s),s+=2),l},e.name={},e.name.parse=function(r,s,o){var a=e._bin,l={};a.readUshort(r,s),s+=2;var c=a.readUshort(r,s);s+=2,a.readUshort(r,s);for(var f,d=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],m=s+=2,v=0;v<c;v++){var b=a.readUshort(r,s);s+=2;var x=a.readUshort(r,s);s+=2;var w=a.readUshort(r,s);s+=2;var _=a.readUshort(r,s);s+=2;var A=a.readUshort(r,s);s+=2;var T=a.readUshort(r,s);s+=2;var E,C=d[_],R=m+12*c+T;if(b==0)E=a.readUnicode(r,R,A/2);else if(b==3&&x==0)E=a.readUnicode(r,R,A/2);else if(x==0)E=a.readASCII(r,R,A);else if(x==1)E=a.readUnicode(r,R,A/2);else if(x==3)E=a.readUnicode(r,R,A/2);else{if(b!=1)throw"unknown encoding "+x+", platformID: "+b;E=a.readASCII(r,R,A),console.debug("reading unknown MAC encoding "+x+" as ASCII")}var O="p"+b+","+w.toString(16);l[O]==null&&(l[O]={}),l[O][C!==void 0?C:_]=E,l[O]._lang=w}for(var I in l)if(l[I].postScriptName!=null&&l[I]._lang==1033)return l[I];for(var I in l)if(l[I].postScriptName!=null&&l[I]._lang==0)return l[I];for(var I in l)if(l[I].postScriptName!=null&&l[I]._lang==3084)return l[I];for(var I in l)if(l[I].postScriptName!=null)return l[I];for(var I in l){f=I;break}return console.debug("returning name table with languageID "+l[f]._lang),l[f]},e["OS/2"]={},e["OS/2"].parse=function(r,s,o){var a=e._bin.readUshort(r,s);s+=2;var l={};if(a==0)e["OS/2"].version0(r,s,l);else if(a==1)e["OS/2"].version1(r,s,l);else if(a==2||a==3||a==4)e["OS/2"].version2(r,s,l);else{if(a!=5)throw"unknown OS/2 table version: "+a;e["OS/2"].version5(r,s,l)}return l},e["OS/2"].version0=function(r,s,o){var a=e._bin;return o.xAvgCharWidth=a.readShort(r,s),s+=2,o.usWeightClass=a.readUshort(r,s),s+=2,o.usWidthClass=a.readUshort(r,s),s+=2,o.fsType=a.readUshort(r,s),s+=2,o.ySubscriptXSize=a.readShort(r,s),s+=2,o.ySubscriptYSize=a.readShort(r,s),s+=2,o.ySubscriptXOffset=a.readShort(r,s),s+=2,o.ySubscriptYOffset=a.readShort(r,s),s+=2,o.ySuperscriptXSize=a.readShort(r,s),s+=2,o.ySuperscriptYSize=a.readShort(r,s),s+=2,o.ySuperscriptXOffset=a.readShort(r,s),s+=2,o.ySuperscriptYOffset=a.readShort(r,s),s+=2,o.yStrikeoutSize=a.readShort(r,s),s+=2,o.yStrikeoutPosition=a.readShort(r,s),s+=2,o.sFamilyClass=a.readShort(r,s),s+=2,o.panose=a.readBytes(r,s,10),s+=10,o.ulUnicodeRange1=a.readUint(r,s),s+=4,o.ulUnicodeRange2=a.readUint(r,s),s+=4,o.ulUnicodeRange3=a.readUint(r,s),s+=4,o.ulUnicodeRange4=a.readUint(r,s),s+=4,o.achVendID=[a.readInt8(r,s),a.readInt8(r,s+1),a.readInt8(r,s+2),a.readInt8(r,s+3)],s+=4,o.fsSelection=a.readUshort(r,s),s+=2,o.usFirstCharIndex=a.readUshort(r,s),s+=2,o.usLastCharIndex=a.readUshort(r,s),s+=2,o.sTypoAscender=a.readShort(r,s),s+=2,o.sTypoDescender=a.readShort(r,s),s+=2,o.sTypoLineGap=a.readShort(r,s),s+=2,o.usWinAscent=a.readUshort(r,s),s+=2,o.usWinDescent=a.readUshort(r,s),s+=2},e["OS/2"].version1=function(r,s,o){var a=e._bin;return s=e["OS/2"].version0(r,s,o),o.ulCodePageRange1=a.readUint(r,s),s+=4,o.ulCodePageRange2=a.readUint(r,s),s+=4},e["OS/2"].version2=function(r,s,o){var a=e._bin;return s=e["OS/2"].version1(r,s,o),o.sxHeight=a.readShort(r,s),s+=2,o.sCapHeight=a.readShort(r,s),s+=2,o.usDefault=a.readUshort(r,s),s+=2,o.usBreak=a.readUshort(r,s),s+=2,o.usMaxContext=a.readUshort(r,s),s+=2},e["OS/2"].version5=function(r,s,o){var a=e._bin;return s=e["OS/2"].version2(r,s,o),o.usLowerOpticalPointSize=a.readUshort(r,s),s+=2,o.usUpperOpticalPointSize=a.readUshort(r,s),s+=2},e.post={},e.post.parse=function(r,s,o){var a=e._bin,l={};return l.version=a.readFixed(r,s),s+=4,l.italicAngle=a.readFixed(r,s),s+=4,l.underlinePosition=a.readShort(r,s),s+=2,l.underlineThickness=a.readShort(r,s),s+=2,l},e==null&&(e={}),e.U==null&&(e.U={}),e.U.codeToGlyph=function(r,s){var o=r.cmap,a=-1;if(o.p0e4!=null?a=o.p0e4:o.p3e1!=null?a=o.p3e1:o.p1e0!=null?a=o.p1e0:o.p0e3!=null&&(a=o.p0e3),a==-1)throw"no familiar platform and encoding!";var l=o.tables[a];if(l.format==0)return s>=l.map.length?0:l.map[s];if(l.format==4){for(var c=-1,f=0;f<l.endCount.length;f++)if(s<=l.endCount[f]){c=f;break}return c==-1||l.startCount[c]>s?0:65535&(l.idRangeOffset[c]!=0?l.glyphIdArray[s-l.startCount[c]+(l.idRangeOffset[c]>>1)-(l.idRangeOffset.length-c)]:s+l.idDelta[c])}if(l.format==12){if(s>l.groups[l.groups.length-1][1])return 0;for(f=0;f<l.groups.length;f++){var d=l.groups[f];if(d[0]<=s&&s<=d[1])return d[2]+(s-d[0])}return 0}throw"unknown cmap table format "+l.format},e.U.glyphToPath=function(r,s){var o={cmds:[],crds:[]};if(r.SVG&&r.SVG.entries[s]){var a=r.SVG.entries[s];return a==null?o:(typeof a=="string"&&(a=e.SVG.toPath(a),r.SVG.entries[s]=a),a)}if(r.CFF){var l={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:r.CFF.Private?r.CFF.Private.defaultWidthX:0,open:!1},c=r.CFF,f=r.CFF.Private;if(c.ROS){for(var d=0;c.FDSelect[d+2]<=s;)d+=2;f=c.FDArray[c.FDSelect[d+1]].Private}e.U._drawCFF(r.CFF.CharStrings[s],l,c,f,o)}else r.glyf&&e.U._drawGlyf(s,r,o);return o},e.U._drawGlyf=function(r,s,o){var a=s.glyf[r];a==null&&(a=s.glyf[r]=e.glyf._parseGlyf(s,r)),a!=null&&(a.noc>-1?e.U._simpleGlyph(a,o):e.U._compoGlyph(a,s,o))},e.U._simpleGlyph=function(r,s){for(var o=0;o<r.noc;o++){for(var a=o==0?0:r.endPts[o-1]+1,l=r.endPts[o],c=a;c<=l;c++){var f=c==a?l:c-1,d=c==l?a:c+1,m=1&r.flags[c],v=1&r.flags[f],b=1&r.flags[d],x=r.xs[c],w=r.ys[c];if(c==a)if(m){if(!v){e.U.P.moveTo(s,x,w);continue}e.U.P.moveTo(s,r.xs[f],r.ys[f])}else v?e.U.P.moveTo(s,r.xs[f],r.ys[f]):e.U.P.moveTo(s,(r.xs[f]+x)/2,(r.ys[f]+w)/2);m?v&&e.U.P.lineTo(s,x,w):b?e.U.P.qcurveTo(s,x,w,r.xs[d],r.ys[d]):e.U.P.qcurveTo(s,x,w,(x+r.xs[d])/2,(w+r.ys[d])/2)}e.U.P.closePath(s)}},e.U._compoGlyph=function(r,s,o){for(var a=0;a<r.parts.length;a++){var l={cmds:[],crds:[]},c=r.parts[a];e.U._drawGlyf(c.glyphIndex,s,l);for(var f=c.m,d=0;d<l.crds.length;d+=2){var m=l.crds[d],v=l.crds[d+1];o.crds.push(m*f.a+v*f.b+f.tx),o.crds.push(m*f.c+v*f.d+f.ty)}for(d=0;d<l.cmds.length;d++)o.cmds.push(l.cmds[d])}},e.U._getGlyphClass=function(r,s){var o=e._lctf.getInterval(s,r);return o==-1?0:s[o+2]},e.U._applySubs=function(r,s,o,a){for(var l=r.length-s-1,c=0;c<o.tabs.length;c++)if(o.tabs[c]!=null){var f,d=o.tabs[c];if(!d.coverage||(f=e._lctf.coverageIndex(d.coverage,r[s]))!=-1){if(o.ltype==1)r[s],d.fmt==1?r[s]=r[s]+d.delta:r[s]=d.newg[f];else if(o.ltype==4)for(var m=d.vals[f],v=0;v<m.length;v++){var b=m[v],x=b.chain.length;if(!(x>l)){for(var w=!0,_=0,A=0;A<x;A++){for(;r[s+_+(1+A)]==-1;)_++;b.chain[A]!=r[s+_+(1+A)]&&(w=!1)}if(w){for(r[s]=b.nglyph,A=0;A<x+_;A++)r[s+A+1]=-1;break}}}else if(o.ltype==5&&d.fmt==2)for(var T=e._lctf.getInterval(d.cDef,r[s]),E=d.cDef[T+2],C=d.scset[E],R=0;R<C.length;R++){var O=C[R],I=O.input;if(!(I.length>l)){for(w=!0,A=0;A<I.length;A++){var L=e._lctf.getInterval(d.cDef,r[s+1+A]);if(T==-1&&d.cDef[L+2]!=I[A]){w=!1;break}}if(w){var N=O.substLookupRecords;for(v=0;v<N.length;v+=2)N[v],N[v+1]}}}else if(o.ltype==6&&d.fmt==3){if(!e.U._glsCovered(r,d.backCvg,s-d.backCvg.length)||!e.U._glsCovered(r,d.inptCvg,s)||!e.U._glsCovered(r,d.ahedCvg,s+d.inptCvg.length))continue;var V=d.lookupRec;for(R=0;R<V.length;R+=2){T=V[R];var B=a[V[R+1]];e.U._applySubs(r,s+T,B,a)}}}}},e.U._glsCovered=function(r,s,o){for(var a=0;a<s.length;a++)if(e._lctf.coverageIndex(s[a],r[o+a])==-1)return!1;return!0},e.U.glyphsToPath=function(r,s,o){for(var a={cmds:[],crds:[]},l=0,c=0;c<s.length;c++){var f=s[c];if(f!=-1){for(var d=c<s.length-1&&s[c+1]!=-1?s[c+1]:0,m=e.U.glyphToPath(r,f),v=0;v<m.crds.length;v+=2)a.crds.push(m.crds[v]+l),a.crds.push(m.crds[v+1]);for(o&&a.cmds.push(o),v=0;v<m.cmds.length;v++)a.cmds.push(m.cmds[v]);o&&a.cmds.push("X"),l+=r.hmtx.aWidth[f],c<s.length-1&&(l+=e.U.getPairAdjustment(r,f,d))}}return a},e.U.P={},e.U.P.moveTo=function(r,s,o){r.cmds.push("M"),r.crds.push(s,o)},e.U.P.lineTo=function(r,s,o){r.cmds.push("L"),r.crds.push(s,o)},e.U.P.curveTo=function(r,s,o,a,l,c,f){r.cmds.push("C"),r.crds.push(s,o,a,l,c,f)},e.U.P.qcurveTo=function(r,s,o,a,l){r.cmds.push("Q"),r.crds.push(s,o,a,l)},e.U.P.closePath=function(r){r.cmds.push("Z")},e.U._drawCFF=function(r,s,o,a,l){for(var c=s.stack,f=s.nStems,d=s.haveWidth,m=s.width,v=s.open,b=0,x=s.x,w=s.y,_=0,A=0,T=0,E=0,C=0,R=0,O=0,I=0,L=0,N=0,V={val:0,size:0};b<r.length;){e.CFF.getCharString(r,b,V);var B=V.val;if(b+=V.size,B=="o1"||B=="o18")c.length%2!=0&&!d&&(m=c.shift()+a.nominalWidthX),f+=c.length>>1,c.length=0,d=!0;else if(B=="o3"||B=="o23")c.length%2!=0&&!d&&(m=c.shift()+a.nominalWidthX),f+=c.length>>1,c.length=0,d=!0;else if(B=="o4")c.length>1&&!d&&(m=c.shift()+a.nominalWidthX,d=!0),v&&e.U.P.closePath(l),w+=c.pop(),e.U.P.moveTo(l,x,w),v=!0;else if(B=="o5")for(;c.length>0;)x+=c.shift(),w+=c.shift(),e.U.P.lineTo(l,x,w);else if(B=="o6"||B=="o7")for(var k=c.length,j=B=="o6",q=0;q<k;q++){var W=c.shift();j?x+=W:w+=W,j=!j,e.U.P.lineTo(l,x,w)}else if(B=="o8"||B=="o24"){k=c.length;for(var G=0;G+6<=k;)_=x+c.shift(),A=w+c.shift(),T=_+c.shift(),E=A+c.shift(),x=T+c.shift(),w=E+c.shift(),e.U.P.curveTo(l,_,A,T,E,x,w),G+=6;B=="o24"&&(x+=c.shift(),w+=c.shift(),e.U.P.lineTo(l,x,w))}else{if(B=="o11")break;if(B=="o1234"||B=="o1235"||B=="o1236"||B=="o1237")B=="o1234"&&(A=w,T=(_=x+c.shift())+c.shift(),N=E=A+c.shift(),R=E,I=w,x=(O=(C=(L=T+c.shift())+c.shift())+c.shift())+c.shift(),e.U.P.curveTo(l,_,A,T,E,L,N),e.U.P.curveTo(l,C,R,O,I,x,w)),B=="o1235"&&(_=x+c.shift(),A=w+c.shift(),T=_+c.shift(),E=A+c.shift(),L=T+c.shift(),N=E+c.shift(),C=L+c.shift(),R=N+c.shift(),O=C+c.shift(),I=R+c.shift(),x=O+c.shift(),w=I+c.shift(),c.shift(),e.U.P.curveTo(l,_,A,T,E,L,N),e.U.P.curveTo(l,C,R,O,I,x,w)),B=="o1236"&&(_=x+c.shift(),A=w+c.shift(),T=_+c.shift(),N=E=A+c.shift(),R=E,O=(C=(L=T+c.shift())+c.shift())+c.shift(),I=R+c.shift(),x=O+c.shift(),e.U.P.curveTo(l,_,A,T,E,L,N),e.U.P.curveTo(l,C,R,O,I,x,w)),B=="o1237"&&(_=x+c.shift(),A=w+c.shift(),T=_+c.shift(),E=A+c.shift(),L=T+c.shift(),N=E+c.shift(),C=L+c.shift(),R=N+c.shift(),O=C+c.shift(),I=R+c.shift(),Math.abs(O-x)>Math.abs(I-w)?x=O+c.shift():w=I+c.shift(),e.U.P.curveTo(l,_,A,T,E,L,N),e.U.P.curveTo(l,C,R,O,I,x,w));else if(B=="o14"){if(c.length>0&&!d&&(m=c.shift()+o.nominalWidthX,d=!0),c.length==4){var K=c.shift(),te=c.shift(),ie=c.shift(),F=c.shift(),X=e.CFF.glyphBySE(o,ie),ee=e.CFF.glyphBySE(o,F);e.U._drawCFF(o.CharStrings[X],s,o,a,l),s.x=K,s.y=te,e.U._drawCFF(o.CharStrings[ee],s,o,a,l)}v&&(e.U.P.closePath(l),v=!1)}else if(B=="o19"||B=="o20")c.length%2!=0&&!d&&(m=c.shift()+a.nominalWidthX),f+=c.length>>1,c.length=0,d=!0,b+=f+7>>3;else if(B=="o21")c.length>2&&!d&&(m=c.shift()+a.nominalWidthX,d=!0),w+=c.pop(),x+=c.pop(),v&&e.U.P.closePath(l),e.U.P.moveTo(l,x,w),v=!0;else if(B=="o22")c.length>1&&!d&&(m=c.shift()+a.nominalWidthX,d=!0),x+=c.pop(),v&&e.U.P.closePath(l),e.U.P.moveTo(l,x,w),v=!0;else if(B=="o25"){for(;c.length>6;)x+=c.shift(),w+=c.shift(),e.U.P.lineTo(l,x,w);_=x+c.shift(),A=w+c.shift(),T=_+c.shift(),E=A+c.shift(),x=T+c.shift(),w=E+c.shift(),e.U.P.curveTo(l,_,A,T,E,x,w)}else if(B=="o26")for(c.length%2&&(x+=c.shift());c.length>0;)_=x,A=w+c.shift(),x=T=_+c.shift(),w=(E=A+c.shift())+c.shift(),e.U.P.curveTo(l,_,A,T,E,x,w);else if(B=="o27")for(c.length%2&&(w+=c.shift());c.length>0;)A=w,T=(_=x+c.shift())+c.shift(),E=A+c.shift(),x=T+c.shift(),w=E,e.U.P.curveTo(l,_,A,T,E,x,w);else if(B=="o10"||B=="o29"){var le=B=="o10"?a:o;if(c.length==0)console.debug("error: empty stack");else{var oe=c.pop(),ue=le.Subrs[oe+le.Bias];s.x=x,s.y=w,s.nStems=f,s.haveWidth=d,s.width=m,s.open=v,e.U._drawCFF(ue,s,o,a,l),x=s.x,w=s.y,f=s.nStems,d=s.haveWidth,m=s.width,v=s.open}}else if(B=="o30"||B=="o31"){var he=c.length,be=(G=0,B=="o31");for(G+=he-(k=-3&he);G<k;)be?(A=w,T=(_=x+c.shift())+c.shift(),w=(E=A+c.shift())+c.shift(),k-G==5?(x=T+c.shift(),G++):x=T,be=!1):(_=x,A=w+c.shift(),T=_+c.shift(),E=A+c.shift(),x=T+c.shift(),k-G==5?(w=E+c.shift(),G++):w=E,be=!0),e.U.P.curveTo(l,_,A,T,E,x,w),G+=4}else{if((B+"").charAt(0)=="o")throw console.debug("Unknown operation: "+B,r),B;c.push(B)}}}s.x=x,s.y=w,s.nStems=f,s.haveWidth=d,s.width=m,s.open=v};var t=e,i={Typr:t};return n.Typr=t,n.default=i,Object.defineProperty(n,"__esModule",{value:!0}),n})({}).Typr}function O0e(){return(function(n){var e=Uint8Array,t=Uint16Array,i=Uint32Array,r=new e([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),s=new e([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),o=new e([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),a=function(B,k){for(var j=new t(31),q=0;q<31;++q)j[q]=k+=1<<B[q-1];var W=new i(j[30]);for(q=1;q<30;++q)for(var G=j[q];G<j[q+1];++G)W[G]=G-j[q]<<5|q;return[j,W]},l=a(r,2),c=l[0],f=l[1];c[28]=258,f[258]=28;for(var d=a(s,0)[0],m=new t(32768),v=0;v<32768;++v){var b=(43690&v)>>>1|(21845&v)<<1;b=(61680&(b=(52428&b)>>>2|(13107&b)<<2))>>>4|(3855&b)<<4,m[v]=((65280&b)>>>8|(255&b)<<8)>>>1}var x=function(B,k,j){for(var q=B.length,W=0,G=new t(k);W<q;++W)++G[B[W]-1];var K,te=new t(k);for(W=0;W<k;++W)te[W]=te[W-1]+G[W-1]<<1;{K=new t(1<<k);var ie=15-k;for(W=0;W<q;++W)if(B[W])for(var F=W<<4|B[W],X=k-B[W],ee=te[B[W]-1]++<<X,le=ee|(1<<X)-1;ee<=le;++ee)K[m[ee]>>>ie]=F}return K},w=new e(288);for(v=0;v<144;++v)w[v]=8;for(v=144;v<256;++v)w[v]=9;for(v=256;v<280;++v)w[v]=7;for(v=280;v<288;++v)w[v]=8;var _=new e(32);for(v=0;v<32;++v)_[v]=5;var A=x(w,9),T=x(_,5),E=function(B){for(var k=B[0],j=1;j<B.length;++j)B[j]>k&&(k=B[j]);return k},C=function(B,k,j){var q=k/8|0;return(B[q]|B[q+1]<<8)>>(7&k)&j},R=function(B,k){var j=k/8|0;return(B[j]|B[j+1]<<8|B[j+2]<<16)>>(7&k)},O=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],I=function(B,k,j){var q=new Error(k||O[B]);if(q.code=B,Error.captureStackTrace&&Error.captureStackTrace(q,I),!j)throw q;return q},L=function(B,k,j){var q=B.length;if(!q||j&&!j.l&&q<5)return k||new e(0);var W=!k||j,G=!j||j.i;j||(j={}),k||(k=new e(3*q));var K,te=function(He){var nt=k.length;if(He>nt){var Je=new e(Math.max(2*nt,He));Je.set(k),k=Je}},ie=j.f||0,F=j.p||0,X=j.b||0,ee=j.l,le=j.d,oe=j.m,ue=j.n,he=8*q;do{if(!ee){j.f=ie=C(B,F,1);var be=C(B,F+1,3);if(F+=3,!be){var Te=B[(Fe=((K=F)/8|0)+(7&K&&1)+4)-4]|B[Fe-3]<<8,Ee=Fe+Te;if(Ee>q){G&&I(0);break}W&&te(X+Te),k.set(B.subarray(Fe,Ee),X),j.b=X+=Te,j.p=F=8*Ee;continue}if(be==1)ee=A,le=T,oe=9,ue=5;else if(be==2){var Ce=C(B,F,31)+257,we=C(B,F+10,15)+4,ae=Ce+C(B,F+5,31)+1;F+=14;for(var ve=new e(ae),xe=new e(19),me=0;me<we;++me)xe[o[me]]=C(B,F+3*me,7);F+=3*we;var Ie=E(xe),Ne=(1<<Ie)-1,ke=x(xe,Ie);for(me=0;me<ae;){var Fe,Ae=ke[C(B,F,Ne)];if(F+=15&Ae,(Fe=Ae>>>4)<16)ve[me++]=Fe;else{var tt=0,se=0;for(Fe==16?(se=3+C(B,F,3),F+=2,tt=ve[me-1]):Fe==17?(se=3+C(B,F,7),F+=3):Fe==18&&(se=11+C(B,F,127),F+=7);se--;)ve[me++]=tt}}var Z=ve.subarray(0,Ce),ye=ve.subarray(Ce);oe=E(Z),ue=E(ye),ee=x(Z,oe),le=x(ye,ue)}else I(1);if(F>he){G&&I(0);break}}W&&te(X+131072);for(var Y=(1<<oe)-1,J=(1<<ue)-1,re=F;;re=F){var ge=(tt=ee[R(B,F)&Y])>>>4;if((F+=15&tt)>he){G&&I(0);break}if(tt||I(2),ge<256)k[X++]=ge;else{if(ge==256){re=F,ee=null;break}var _e=ge-254;if(ge>264){var Se=r[me=ge-257];_e=C(B,F,(1<<Se)-1)+c[me],F+=Se}var Ue=le[R(B,F)&J],Me=Ue>>>4;if(Ue||I(3),F+=15&Ue,ye=d[Me],Me>3&&(Se=s[Me],ye+=R(B,F)&(1<<Se)-1,F+=Se),F>he){G&&I(0);break}W&&te(X+131072);for(var Le=X+_e;X<Le;X+=4)k[X]=k[X-ye],k[X+1]=k[X+1-ye],k[X+2]=k[X+2-ye],k[X+3]=k[X+3-ye];X=Le}}j.l=ee,j.p=re,j.b=X,ee&&(ie=1,j.m=oe,j.d=le,j.n=ue)}while(!ie);return X==k.length?k:(function(He,nt,Je){(Je==null||Je>He.length)&&(Je=He.length);var gt=new(He instanceof t?t:He instanceof i?i:e)(Je-nt);return gt.set(He.subarray(nt,Je)),gt})(k,0,X)},N=new e(0),V=typeof TextDecoder<"u"&&new TextDecoder;try{V.decode(N,{stream:!0})}catch{}return n.convert_streams=function(B){var k=new DataView(B),j=0;function q(){var Ce=k.getUint16(j);return j+=2,Ce}function W(){var Ce=k.getUint32(j);return j+=4,Ce}function G(Ce){Te.setUint16(Ee,Ce),Ee+=2}function K(Ce){Te.setUint32(Ee,Ce),Ee+=4}for(var te={signature:W(),flavor:W(),length:W(),numTables:q(),reserved:q(),totalSfntSize:W(),majorVersion:q(),minorVersion:q(),metaOffset:W(),metaLength:W(),metaOrigLength:W(),privOffset:W(),privLength:W()},ie=0;Math.pow(2,ie)<=te.numTables;)ie++;ie--;for(var F=16*Math.pow(2,ie),X=16*te.numTables-F,ee=12,le=[],oe=0;oe<te.numTables;oe++)le.push({tag:W(),offset:W(),compLength:W(),origLength:W(),origChecksum:W()}),ee+=16;var ue,he=new Uint8Array(12+16*le.length+le.reduce((function(Ce,we){return Ce+we.origLength+4}),0)),be=he.buffer,Te=new DataView(be),Ee=0;return K(te.flavor),G(te.numTables),G(F),G(ie),G(X),le.forEach((function(Ce){K(Ce.tag),K(Ce.origChecksum),K(ee),K(Ce.origLength),Ce.outOffset=ee,(ee+=Ce.origLength)%4!=0&&(ee+=4-ee%4)})),le.forEach((function(Ce){var we,ae=B.slice(Ce.offset,Ce.offset+Ce.compLength);if(Ce.compLength!=Ce.origLength){var ve=new Uint8Array(Ce.origLength);we=new Uint8Array(ae,2),L(we,ve)}else ve=new Uint8Array(ae);he.set(ve,Ce.outOffset);var xe=0;(ee=Ce.outOffset+Ce.origLength)%4!=0&&(xe=4-ee%4),he.set(new Uint8Array(xe).buffer,Ce.outOffset+Ce.origLength),ue=ee+xe})),be.slice(0,ue)},Object.defineProperty(n,"__esModule",{value:!0}),n})({}).convert_streams}function L0e(n,e){const t={M:2,L:2,Q:4,C:6,Z:0},i={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},r=1,s=2,o=4,a=8,l=16,c=32;let f;function d(O){if(!f){const I={R:s,L:r,D:o,C:l,U:c,T:a};f=new Map;for(let L in i){let N=0;i[L].split(",").forEach(V=>{let[B,k]=V.split("+");B=parseInt(B,36),k=k?parseInt(k,36):0,f.set(N+=B,I[L]);for(let j=k;j--;)f.set(++N,I[L])})}}return f.get(O)||c}const m=1,v=2,b=3,x=4,w=[null,"isol","init","fina","medi"];function _(O){const I=new Uint8Array(O.length);let L=c,N=m,V=-1;for(let B=0;B<O.length;B++){const k=O.codePointAt(B);let j=d(k)|0,q=m;j&a||(L&(r|o|l)?j&(s|o|l)?(q=b,(N===m||N===b)&&I[V]++):j&(r|c)&&(N===v||N===x)&&I[V]--:L&(s|c)&&(N===v||N===x)&&I[V]--,N=I[B]=q,L=j,V=B,k>65535&&B++)}return I}function A(O,I){const L=[];for(let V=0;V<I.length;V++){const B=I.codePointAt(V);B>65535&&V++,L.push(n.U.codeToGlyph(O,B))}const N=O.GSUB;if(N){const{lookupList:V,featureList:B}=N;let k;const j=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws|ccmp)$/,q=[];B.forEach(W=>{if(j.test(W.tag))for(let G=0;G<W.tab.length;G++){if(q[W.tab[G]])continue;q[W.tab[G]]=!0;const K=V[W.tab[G]],te=/^(isol|init|fina|medi)$/.test(W.tag);te&&!k&&(k=_(I));for(let ie=0;ie<L.length;ie++)(!k||!te||w[k[ie]]===W.tag)&&n.U._applySubs(L,ie,K,V)}})}return L}function T(O,I){const L=new Int16Array(I.length*3);let N=0;for(;N<I.length;N++){const j=I[N];if(j===-1)continue;L[N*3+2]=O.hmtx.aWidth[j];const q=O.GPOS;if(q){const W=q.lookupList;for(let G=0;G<W.length;G++){const K=W[G];for(let te=0;te<K.tabs.length;te++){const ie=K.tabs[te];if(K.ltype===1){if(n._lctf.coverageIndex(ie.coverage,j)!==-1&&ie.pos){k(ie.pos,N);break}}else if(K.ltype===2){let F=null,X=V();if(X!==-1){const ee=n._lctf.coverageIndex(ie.coverage,I[X]);if(ee!==-1){if(ie.fmt===1){const le=ie.pairsets[ee];for(let oe=0;oe<le.length;oe++)le[oe].gid2===j&&(F=le[oe])}else if(ie.fmt===2){const le=n.U._getGlyphClass(I[X],ie.classDef1),oe=n.U._getGlyphClass(j,ie.classDef2);F=ie.matrix[le][oe]}if(F){F.val1&&k(F.val1,X),F.val2&&k(F.val2,N);break}}}}else if(K.ltype===4){const F=n._lctf.coverageIndex(ie.markCoverage,j);if(F!==-1){const X=V(B),ee=X===-1?-1:n._lctf.coverageIndex(ie.baseCoverage,I[X]);if(ee!==-1){const le=ie.markArray[F],oe=ie.baseArray[ee][le.markClass];L[N*3]=oe.x-le.x+L[X*3]-L[X*3+2],L[N*3+1]=oe.y-le.y+L[X*3+1];break}}}else if(K.ltype===6){const F=n._lctf.coverageIndex(ie.mark1Coverage,j);if(F!==-1){const X=V();if(X!==-1){const ee=I[X];if(E(O,ee)===3){const le=n._lctf.coverageIndex(ie.mark2Coverage,ee);if(le!==-1){const oe=ie.mark1Array[F],ue=ie.mark2Array[le][oe.markClass];L[N*3]=ue.x-oe.x+L[X*3]-L[X*3+2],L[N*3+1]=ue.y-oe.y+L[X*3+1];break}}}}}}}}else if(O.kern&&!O.cff){const W=V();if(W!==-1){const G=O.kern.glyph1.indexOf(I[W]);if(G!==-1){const K=O.kern.rval[G].glyph2.indexOf(j);K!==-1&&(L[W*3+2]+=O.kern.rval[G].vals[K])}}}}return L;function V(j){for(let q=N-1;q>=0;q--)if(I[q]!==-1&&(!j||j(I[q])))return q;return-1}function B(j){return E(O,j)===1}function k(j,q){for(let W=0;W<3;W++)L[q*3+W]+=j[W]||0}}function E(O,I){const L=O.GDEF&&O.GDEF.glyphClassDef;return L?n.U._getGlyphClass(I,L):0}function C(...O){for(let I=0;I<O.length;I++)if(typeof O[I]=="number")return O[I]}function R(O){const I=Object.create(null),L=O["OS/2"],N=O.hhea,V=O.head.unitsPerEm,B=C(L&&L.sTypoAscender,N&&N.ascender,V),k={unitsPerEm:V,ascender:B,descender:C(L&&L.sTypoDescender,N&&N.descender,0),capHeight:C(L&&L.sCapHeight,B),xHeight:C(L&&L.sxHeight,B),lineGap:C(L&&L.sTypoLineGap,N&&N.lineGap),supportsCodePoint(j){return n.U.codeToGlyph(O,j)>0},forEachGlyph(j,q,W,G){let K=0;const te=1/k.unitsPerEm*q,ie=A(O,j);let F=0;const X=T(O,ie);return ie.forEach((ee,le)=>{if(ee!==-1){let oe=I[ee];if(!oe){const{cmds:ue,crds:he}=n.U.glyphToPath(O,ee);let be="",Te=0;for(let ve=0,xe=ue.length;ve<xe;ve++){const me=t[ue[ve]];be+=ue[ve];for(let Ie=1;Ie<=me;Ie++)be+=(Ie>1?",":"")+he[Te++]}let Ee,Ce,we,ae;if(he.length){Ee=Ce=1/0,we=ae=-1/0;for(let ve=0,xe=he.length;ve<xe;ve+=2){let me=he[ve],Ie=he[ve+1];me<Ee&&(Ee=me),Ie<Ce&&(Ce=Ie),me>we&&(we=me),Ie>ae&&(ae=Ie)}}else Ee=we=Ce=ae=0;oe=I[ee]={index:ee,advanceWidth:O.hmtx.aWidth[ee],xMin:Ee,yMin:Ce,xMax:we,yMax:ae,path:be}}G.call(null,oe,K+X[le*3]*te,X[le*3+1]*te,F),K+=X[le*3+2]*te,W&&(K+=W*q)}F+=j.codePointAt(F)>65535?2:1}),K}};return k}return function(I){const L=new Uint8Array(I,0,4),N=n._bin.readASCII(L,0,4);if(N==="wOFF")I=e(I);else if(N==="wOF2")throw new Error("woff2 fonts not supported");return R(n.parse(I)[0])}}const P0e=pv({name:"Typr Font Parser",dependencies:[D0e,O0e,L0e],init(n,e,t){const i=n(),r=e();return t(i,r)}});function I0e(){return(function(n){var e=function(){this.buckets=new Map};e.prototype.add=function(T){var E=T>>5;this.buckets.set(E,(this.buckets.get(E)||0)|1<<(31&T))},e.prototype.has=function(T){var E=this.buckets.get(T>>5);return E!==void 0&&(E&1<<(31&T))!=0},e.prototype.serialize=function(){var T=[];return this.buckets.forEach((function(E,C){T.push((+C).toString(36)+":"+E.toString(36))})),T.join(",")},e.prototype.deserialize=function(T){var E=this;this.buckets.clear(),T.split(",").forEach((function(C){var R=C.split(":");E.buckets.set(parseInt(R[0],36),parseInt(R[1],36))}))};var t=Math.pow(2,8),i=t-1,r=~i;function s(T){var E=(function(R){return R&r})(T).toString(16),C=(function(R){return(R&r)+t-1})(T).toString(16);return"codepoint-index/plane"+(T>>16)+"/"+E+"-"+C+".json"}function o(T,E){var C=T&i,R=E.codePointAt(C/6|0);return((R=(R||48)-48)&1<<C%6)!=0}function a(T,E){var C;(C=T,C.replace(/U\+/gi,"").replace(/^,+|,+$/g,"").split(/,+/).map((function(R){return R.split("-").map((function(O){return parseInt(O.trim(),16)}))}))).forEach((function(R){var O=R[0],I=R[1];I===void 0&&(I=O),E(O,I)}))}function l(T,E){a(T,(function(C,R){for(var O=C;O<=R;O++)E(O)}))}var c={},f={},d=new WeakMap,m="https://cdn.jsdelivr.net/gh/lojjic/unicode-font-resolver@v1.0.1/packages/data";function v(T){var E=d.get(T);return E||(E=new e,l(T.ranges,(function(C){return E.add(C)})),d.set(T,E)),E}var b,x=new Map;function w(T,E,C){return T[E]?E:T[C]?C:(function(R){for(var O in R)return O})(T)}function _(T,E){var C=E;if(!T.includes(C)){C=1/0;for(var R=0;R<T.length;R++)Math.abs(T[R]-E)<Math.abs(C-E)&&(C=T[R])}return C}function A(T){return b||(b=new Set,l("9-D,20,85,A0,1680,2000-200A,2028-202F,205F,3000",(function(E){b.add(E)}))),b.has(T)}return n.CodePointSet=e,n.clearCache=function(){c={},f={}},n.getFontsForString=function(T,E){E===void 0&&(E={});var C,R=E.lang;R===void 0&&(R=new RegExp("\\p{Script=Hangul}","u").test(C=T)?"ko":new RegExp("\\p{Script=Hiragana}|\\p{Script=Katakana}","u").test(C)?"ja":"en");var O=E.category;O===void 0&&(O="sans-serif");var I=E.style;I===void 0&&(I="normal");var L=E.weight;L===void 0&&(L=400);var N=(E.dataUrl||m).replace(/\/$/g,""),V=new Map,B=new Uint8Array(T.length),k={},j={},q=new Array(T.length),W=new Map,G=!1;function K(F){var X=x.get(F);return X||(X=fetch(N+"/"+F).then((function(ee){if(!ee.ok)throw new Error(ee.statusText);return ee.json().then((function(le){if(!Array.isArray(le)||le[0]!==1)throw new Error("Incorrect schema version; need 1, got "+le[0]);return le[1]}))})).catch((function(ee){if(N!==m)return G||(console.error('unicode-font-resolver: Failed loading from dataUrl "'+N+'", trying default CDN. '+ee.message),G=!0),N=m,x.delete(F),K(F);throw ee})),x.set(F,X)),X}for(var te=function(F){var X=T.codePointAt(F),ee=s(X);q[F]=ee,c[ee]||W.has(ee)||W.set(ee,K(ee).then((function(le){c[ee]=le}))),X>65535&&(F++,ie=F)},ie=0;ie<T.length;ie++)te(ie);return Promise.all(W.values()).then((function(){W.clear();for(var F=function(ee){var le=T.codePointAt(ee),oe=null,ue=c[q[ee]],he=void 0;for(var be in ue){var Te=j[be];if(Te===void 0&&(Te=j[be]=new RegExp(be).test(R||"en")),Te){for(var Ee in he=be,ue[be])if(o(le,ue[be][Ee])){oe=Ee;break}break}}if(!oe){e:for(var Ce in ue)if(Ce!==he){for(var we in ue[Ce])if(o(le,ue[Ce][we])){oe=we;break e}}}oe||(console.debug("No font coverage for U+"+le.toString(16)),oe="latin"),q[ee]=oe,f[oe]||W.has(oe)||W.set(oe,K("font-meta/"+oe+".json").then((function(ae){f[oe]=ae}))),le>65535&&(ee++,X=ee)},X=0;X<T.length;X++)F(X);return Promise.all(W.values())})).then((function(){for(var F,X=null,ee=0;ee<T.length;ee++){var le=T.codePointAt(ee);if(X&&(A(le)||v(X).has(le)))B[ee]=B[ee-1];else{X=f[q[ee]];var oe=k[X.id];if(!oe){var ue=X.typeforms,he=w(ue,O,"sans-serif"),be=w(ue[he],I,"normal"),Te=_((F=ue[he])===null||F===void 0?void 0:F[be],L);oe=k[X.id]=N+"/font-files/"+X.id+"/"+he+"."+be+"."+Te+".woff"}var Ee=V.get(oe);Ee==null&&(Ee=V.size,V.set(oe,Ee)),B[ee]=Ee}le>65535&&(ee++,B[ee]=B[ee-1])}return{fontUrls:Array.from(V.keys()),chars:B}}))},Object.defineProperty(n,"__esModule",{value:!0}),n})({})}function N0e(n,e){const t=Object.create(null),i=Object.create(null);function r(o,a){const l=c=>{console.error(`Failure loading font ${o}`,c)};try{const c=new XMLHttpRequest;c.open("get",o,!0),c.responseType="arraybuffer",c.onload=function(){if(c.status>=400)l(new Error(c.statusText));else if(c.status>0)try{const f=n(c.response);f.src=o,a(f)}catch(f){l(f)}},c.onerror=l,c.send()}catch(c){l(c)}}function s(o,a){let l=t[o];l?a(l):i[o]?i[o].push(a):(i[o]=[a],r(o,c=>{c.src=o,t[o]=c,i[o].forEach(f=>f(c)),delete i[o]}))}return function(o,a,{lang:l,fonts:c=[],style:f="normal",weight:d="normal",unicodeFontsURL:m}={}){const v=new Uint8Array(o.length),b=[];o.length||A();const x=new Map,w=[];if(f!=="italic"&&(f="normal"),typeof d!="number"&&(d=d==="bold"?700:400),c&&!Array.isArray(c)&&(c=[c]),c=c.slice().filter(E=>!E.lang||E.lang.test(l)).reverse(),c.length){let O=0;(function I(L=0){for(let N=L,V=o.length;N<V;N++){const B=o.codePointAt(N);if(O===1&&b[v[N-1]].supportsCodePoint(B)||N>0&&/\s/.test(o[N]))v[N]=v[N-1],O===2&&(w[w.length-1][1]=N);else for(let k=v[N],j=c.length;k<=j;k++)if(k===j){const q=O===2?w[w.length-1]:w[w.length]=[N,N];q[1]=N,O=2}else{v[N]=k;const{src:q,unicodeRange:W}=c[k];if(!W||T(B,W)){const G=t[q];if(!G){s(q,()=>{I(N)});return}if(G.supportsCodePoint(B)){let K=x.get(G);typeof K!="number"&&(K=b.length,b.push(G),x.set(G,K)),v[N]=K,O=1;break}}}B>65535&&N+1<V&&(v[N+1]=v[N],N++,O===2&&(w[w.length-1][1]=N))}_()})()}else w.push([0,o.length-1]),_();function _(){if(w.length){const E=w.map(C=>o.substring(C[0],C[1]+1)).join(`
`);e.getFontsForString(E,{lang:l||void 0,style:f,weight:d,dataUrl:m}).then(({fontUrls:C,chars:R})=>{const O=b.length;let I=0;w.forEach(N=>{for(let V=0,B=N[1]-N[0];V<=B;V++)v[N[0]+V]=R[I++]+O;I++});let L=0;C.forEach((N,V)=>{s(N,B=>{b[V+O]=B,++L===C.length&&A()})})})}else A()}function A(){a({chars:v,fonts:b})}function T(E,C){for(let R=0;R<C.length;R++){const[O,I=O]=C[R];if(O<=E&&E<=I)return!0}return!1}}}const U0e=pv({name:"FontResolver",dependencies:[N0e,P0e,I0e],init(n,e,t){return n(e,t())}});function k0e(n,e){const i=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,r="[^\\S\\u00A0]",s=new RegExp(`${r}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function o({text:b,lang:x,fonts:w,style:_,weight:A,preResolvedFonts:T,unicodeFontsURL:E},C){const R=({chars:O,fonts:I})=>{let L,N;const V=[];for(let B=0;B<O.length;B++)O[B]!==N?(N=O[B],V.push(L={start:B,end:B,fontObj:I[O[B]]})):L.end=B;C(V)};T?R(T):n(b,R,{lang:x,fonts:w,style:_,weight:A,unicodeFontsURL:E})}function a({text:b="",font:x,lang:w,sdfGlyphSize:_=64,fontSize:A=400,fontWeight:T=1,fontStyle:E="normal",letterSpacing:C=0,lineHeight:R="normal",maxWidth:O=1/0,direction:I,textAlign:L="left",textIndent:N=0,whiteSpace:V="normal",overflowWrap:B="normal",anchorX:k=0,anchorY:j=0,metricsOnly:q=!1,unicodeFontsURL:W,preResolvedFonts:G=null,includeCaretPositions:K=!1,chunkedBoundsSize:te=8192,colorRanges:ie=null},F){const X=d(),ee={fontLoad:0,typesetting:0};b.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),b=b.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),A=+A,C=+C,O=+O,R=R||"normal",N=+N,o({text:b,lang:w,style:E,weight:T,fonts:typeof x=="string"?[{src:x}]:x,unicodeFontsURL:W,preResolvedFonts:G},le=>{ee.fontLoad=d()-X;const oe=isFinite(O);let ue=null,he=null,be=null,Te=null,Ee=null,Ce=null,we=null,ae=null,ve=0,xe=0,me=V!=="nowrap";const Ie=new Map,Ne=d();let ke=N,Fe=0,Ae=new m;const tt=[Ae];le.forEach(J=>{const{fontObj:re}=J,{ascender:ge,descender:_e,unitsPerEm:Se,lineGap:Ue,capHeight:Me,xHeight:Le}=re;let He=Ie.get(re);if(!He){const $e=A/Se,at=R==="normal"?(ge-_e+Ue)*$e:R*A,_t=(at-(ge-_e)*$e)/2,st=Math.min(at,(ge-_e)*$e),qe=(ge+_e)/2*$e+st/2;He={index:Ie.size,src:re.src,fontObj:re,fontSizeMult:$e,unitsPerEm:Se,ascender:ge*$e,descender:_e*$e,capHeight:Me*$e,xHeight:Le*$e,lineHeight:at,baseline:-_t-ge*$e,caretTop:qe,caretBottom:qe-st},Ie.set(re,He)}const{fontSizeMult:nt}=He,Je=b.slice(J.start,J.end+1);let gt,Re;re.forEachGlyph(Je,A,C,($e,at,_t,st)=>{at+=Fe,st+=J.start,gt=at,Re=$e;const qe=b.charAt(st),vt=$e.advanceWidth*nt,Rt=Ae.count;let Tt;if("isEmpty"in $e||($e.isWhitespace=!!qe&&new RegExp(r).test(qe),$e.canBreakAfter=!!qe&&s.test(qe),$e.isEmpty=$e.xMin===$e.xMax||$e.yMin===$e.yMax||i.test(qe)),!$e.isWhitespace&&!$e.isEmpty&&xe++,me&&oe&&!$e.isWhitespace&&at+vt+ke>O&&Rt){if(Ae.glyphAt(Rt-1).glyphObj.canBreakAfter)Tt=new m,ke=-at;else for(let $n=Rt;$n--;)if($n===0&&B==="break-word"){Tt=new m,ke=-at;break}else if(Ae.glyphAt($n).glyphObj.canBreakAfter){Tt=Ae.splitAt($n+1);const qn=Tt.glyphAt(0).x;ke-=qn;for(let ri=Tt.count;ri--;)Tt.glyphAt(ri).x-=qn;break}Tt&&(Ae.isSoftWrapped=!0,Ae=Tt,tt.push(Ae),ve=O)}let Bt=Ae.glyphAt(Ae.count);Bt.glyphObj=$e,Bt.x=at+ke,Bt.y=_t,Bt.width=vt,Bt.charIndex=st,Bt.fontData=He,qe===`
`&&(Ae=new m,tt.push(Ae),ke=-(at+vt+C*A)+N)}),Fe=gt+Re.advanceWidth*nt+C*A});let se=0;tt.forEach(J=>{let re=!0;for(let ge=J.count;ge--;){const _e=J.glyphAt(ge);re&&!_e.glyphObj.isWhitespace&&(J.width=_e.x+_e.width,J.width>ve&&(ve=J.width),re=!1);let{lineHeight:Se,capHeight:Ue,xHeight:Me,baseline:Le}=_e.fontData;Se>J.lineHeight&&(J.lineHeight=Se);const He=Le-J.baseline;He<0&&(J.baseline+=He,J.cap+=He,J.ex+=He),J.cap=Math.max(J.cap,J.baseline+Ue),J.ex=Math.max(J.ex,J.baseline+Me)}J.baseline-=se,J.cap-=se,J.ex-=se,se+=J.lineHeight});let Z=0,ye=0;if(k&&(typeof k=="number"?Z=-k:typeof k=="string"&&(Z=-ve*(k==="left"?0:k==="center"?.5:k==="right"?1:c(k)))),j&&(typeof j=="number"?ye=-j:typeof j=="string"&&(ye=j==="top"?0:j==="top-baseline"?-tt[0].baseline:j==="top-cap"?-tt[0].cap:j==="top-ex"?-tt[0].ex:j==="middle"?se/2:j==="bottom"?se:j==="bottom-baseline"?-tt[tt.length-1].baseline:c(j)*se)),!q){const J=e.getEmbeddingLevels(b,I);ue=new Uint16Array(xe),he=new Uint8Array(xe),be=new Float32Array(xe*2),Te={},we=[1/0,1/0,-1/0,-1/0],ae=[],K&&(Ce=new Float32Array(b.length*4)),ie&&(Ee=new Uint8Array(xe*3));let re=0,ge=-1,_e=-1,Se,Ue;if(tt.forEach((Me,Le)=>{let{count:He,width:nt}=Me;if(He>0){let Je=0;for(let st=He;st--&&Me.glyphAt(st).glyphObj.isWhitespace;)Je++;let gt=0,Re=0;if(L==="center")gt=(ve-nt)/2;else if(L==="right")gt=ve-nt;else if(L==="justify"&&Me.isSoftWrapped){let st=0;for(let qe=He-Je;qe--;)Me.glyphAt(qe).glyphObj.isWhitespace&&st++;Re=(ve-nt)/st}if(Re||gt){let st=0;for(let qe=0;qe<He;qe++){let vt=Me.glyphAt(qe);const Rt=vt.glyphObj;vt.x+=gt+st,Re!==0&&Rt.isWhitespace&&qe<He-Je&&(st+=Re,vt.width+=Re)}}const $e=e.getReorderSegments(b,J,Me.glyphAt(0).charIndex,Me.glyphAt(Me.count-1).charIndex);for(let st=0;st<$e.length;st++){const[qe,vt]=$e[st];let Rt=1/0,Tt=-1/0;for(let Bt=0;Bt<He;Bt++)if(Me.glyphAt(Bt).charIndex>=qe){let $n=Bt,qn=Bt;for(;qn<He;qn++){let ri=Me.glyphAt(qn);if(ri.charIndex>vt)break;qn<He-Je&&(Rt=Math.min(Rt,ri.x),Tt=Math.max(Tt,ri.x+ri.width))}for(let ri=$n;ri<qn;ri++){const Si=Me.glyphAt(ri);Si.x=Tt-(Si.x+Si.width-Rt)}break}}let at;const _t=st=>at=st;for(let st=0;st<He;st++){const qe=Me.glyphAt(st);at=qe.glyphObj;const vt=at.index,Rt=J.levels[qe.charIndex]&1;if(Rt){const Tt=e.getMirroredCharacter(b[qe.charIndex]);Tt&&qe.fontData.fontObj.forEachGlyph(Tt,0,0,_t)}if(K){const{charIndex:Tt,fontData:Bt}=qe,$n=qe.x+Z,qn=qe.x+qe.width+Z;Ce[Tt*4]=Rt?qn:$n,Ce[Tt*4+1]=Rt?$n:qn,Ce[Tt*4+2]=Me.baseline+Bt.caretBottom+ye,Ce[Tt*4+3]=Me.baseline+Bt.caretTop+ye;const ri=Tt-ge;ri>1&&f(Ce,ge,ri),ge=Tt}if(ie){const{charIndex:Tt}=qe;for(;Tt>_e;)_e++,ie.hasOwnProperty(_e)&&(Ue=ie[_e])}if(!at.isWhitespace&&!at.isEmpty){const Tt=re++,{fontSizeMult:Bt,src:$n,index:qn}=qe.fontData,ri=Te[$n]||(Te[$n]={});ri[vt]||(ri[vt]={path:at.path,pathBounds:[at.xMin,at.yMin,at.xMax,at.yMax]});const Si=qe.x+Z,rs=qe.y+Me.baseline+ye;be[Tt*2]=Si,be[Tt*2+1]=rs;const _r=Si+at.xMin*Bt,Ar=rs+at.yMin*Bt,Gr=Si+at.xMax*Bt,Yi=rs+at.yMax*Bt;_r<we[0]&&(we[0]=_r),Ar<we[1]&&(we[1]=Ar),Gr>we[2]&&(we[2]=Gr),Yi>we[3]&&(we[3]=Yi),Tt%te===0&&(Se={start:Tt,end:Tt,rect:[1/0,1/0,-1/0,-1/0]},ae.push(Se)),Se.end++;const ei=Se.rect;if(_r<ei[0]&&(ei[0]=_r),Ar<ei[1]&&(ei[1]=Ar),Gr>ei[2]&&(ei[2]=Gr),Yi>ei[3]&&(ei[3]=Yi),ue[Tt]=vt,he[Tt]=qn,ie){const Zn=Tt*3;Ee[Zn]=Ue>>16&255,Ee[Zn+1]=Ue>>8&255,Ee[Zn+2]=Ue&255}}}}}),Ce){const Me=b.length-ge;Me>1&&f(Ce,ge,Me)}}const Y=[];Ie.forEach(({index:J,src:re,unitsPerEm:ge,ascender:_e,descender:Se,lineHeight:Ue,capHeight:Me,xHeight:Le})=>{Y[J]={src:re,unitsPerEm:ge,ascender:_e,descender:Se,lineHeight:Ue,capHeight:Me,xHeight:Le}}),ee.typesetting=d()-Ne,F({glyphIds:ue,glyphFontIndices:he,glyphPositions:be,glyphData:Te,fontData:Y,caretPositions:Ce,glyphColors:Ee,chunkedBounds:ae,fontSize:A,topBaseline:ye+tt[0].baseline,blockBounds:[Z,ye-se,Z+ve,ye],visibleBounds:we,timings:ee})})}function l(b,x){a({...b,metricsOnly:!0},w=>{const[_,A,T,E]=w.blockBounds;x({width:T-_,height:E-A})})}function c(b){let x=b.match(/^([\d.]+)%$/),w=x?parseFloat(x[1]):NaN;return isNaN(w)?0:w/100}function f(b,x,w){const _=b[x*4],A=b[x*4+1],T=b[x*4+2],E=b[x*4+3],C=(A-_)/w;for(let R=0;R<w;R++){const O=(x+R)*4;b[O]=_+C*R,b[O+1]=_+C*(R+1),b[O+2]=T,b[O+3]=E}}function d(){return(self.performance||Date).now()}function m(){this.data=[]}const v=["glyphObj","x","y","width","charIndex","fontData"];return m.prototype={width:0,lineHeight:0,baseline:0,cap:0,ex:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/v.length)},glyphAt(b){let x=m.flyweight;return x.data=this.data,x.index=b,x},splitAt(b){let x=new m;return x.data=this.data.splice(b*v.length),x}},m.flyweight=v.reduce((b,x,w,_)=>(Object.defineProperty(b,x,{get(){return this.data[this.index*v.length+w]},set(A){this.data[this.index*v.length+w]=A}}),b),{data:null,index:0}),{typeset:a,measure:l}}const tm=()=>(self.performance||Date).now(),OT=FH();let N5;function z0e(n,e,t,i,r,s,o,a,l,c,f=!0){return f?B0e(n,e,t,i,r,s,o,a,l,c).then(null,d=>(N5||(console.warn("WebGL SDF generation failed, falling back to JS",d),N5=!0),k5(n,e,t,i,r,s,o,a,l,c))):k5(n,e,t,i,r,s,o,a,l,c)}const kS=[],F0e=5;let WD=0;function VH(){const n=tm();for(;kS.length&&tm()-n<F0e;)kS.shift()();WD=kS.length?setTimeout(VH,0):0}const B0e=(...n)=>new Promise((e,t)=>{kS.push(()=>{const i=tm();try{OT.webgl.generateIntoCanvas(...n),e({timing:tm()-i})}catch(r){t(r)}}),WD||(WD=setTimeout(VH,0))}),V0e=4,G0e=2e3,U5={};let H0e=0;function k5(n,e,t,i,r,s,o,a,l,c){const f="TroikaTextSDFGenerator_JS_"+H0e++%V0e;let d=U5[f];return d||(d=U5[f]={workerModule:pv({name:f,workerId:f,dependencies:[FH,tm],init(m,v){const b=m().javascript.generate;return function(...x){const w=v();return{textureData:b(...x),timing:v()-w}}},getTransferables(m){return[m.textureData.buffer]}}),requests:0,idleTimer:null}),d.requests++,clearTimeout(d.idleTimer),d.workerModule(n,e,t,i,r,s).then(({textureData:m,timing:v})=>{const b=tm(),x=new Uint8Array(m.length*4);for(let w=0;w<m.length;w++)x[w*4+c]=m[w];return OT.webglUtils.renderImageData(o,x,a,l,n,e,1<<3-c),v+=tm()-b,--d.requests===0&&(d.idleTimer=setTimeout(()=>{_0e(f)},G0e)),{timing:v}})}function j0e(n){n._warm||(OT.webgl.isSupported(n),n._warm=!0)}const W0e=OT.webglUtils.resizeWebGLCanvasWithoutClearing,Lb={unicodeFontsURL:null,sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},$0e=new yt;function s0(){return(self.performance||Date).now()}const z5=Object.create(null);function GH(n,e){n=Y0e({},n);const t=s0(),i=[];if(n.font&&i.push({label:"user",src:Z0e(n.font)}),n.font=i,n.text=""+n.text,n.sdfGlyphSize=n.sdfGlyphSize||Lb.sdfGlyphSize,n.unicodeFontsURL=n.unicodeFontsURL||Lb.unicodeFontsURL,n.colorRanges!=null){let m={};for(let v in n.colorRanges)if(n.colorRanges.hasOwnProperty(v)){let b=n.colorRanges[v];typeof b!="number"&&(b=$0e.set(b).getHex()),m[v]=b}n.colorRanges=m}Object.freeze(n);const{textureWidth:r,sdfExponent:s}=Lb,{sdfGlyphSize:o}=n,a=r/o*4;let l=z5[o];if(!l){const m=document.createElement("canvas");m.width=r,m.height=o*256/a,l=z5[o]={glyphCount:0,sdfGlyphSize:o,sdfCanvas:m,sdfTexture:new ur(m,void 0,void 0,void 0,br,br),contextLost:!1,glyphsByFont:new Map},l.sdfTexture.generateMipmaps=!1,q0e(l)}const{sdfTexture:c,sdfCanvas:f}=l;WH(n).then(m=>{const{glyphIds:v,glyphFontIndices:b,fontData:x,glyphPositions:w,fontSize:_,timings:A}=m,T=[],E=new Float32Array(v.length*4);let C=0,R=0;const O=s0(),I=x.map(k=>{let j=l.glyphsByFont.get(k.src);return j||l.glyphsByFont.set(k.src,j=new Map),j});v.forEach((k,j)=>{const q=b[j],{src:W,unitsPerEm:G}=x[q];let K=I[q].get(k);if(!K){const{path:ee,pathBounds:le}=m.glyphData[W][k],oe=Math.max(le[2]-le[0],le[3]-le[1])/o*(Lb.sdfMargin*o+.5),ue=l.glyphCount++,he=[le[0]-oe,le[1]-oe,le[2]+oe,le[3]+oe];I[q].set(k,K={path:ee,atlasIndex:ue,sdfViewBox:he}),T.push(K)}const{sdfViewBox:te}=K,ie=w[R++],F=w[R++],X=_/G;E[C++]=ie+te[0]*X,E[C++]=F+te[1]*X,E[C++]=ie+te[2]*X,E[C++]=F+te[3]*X,v[j]=K.atlasIndex}),A.quads=(A.quads||0)+(s0()-O);const L=s0();A.sdf={};const N=f.height,V=Math.ceil(l.glyphCount/a),B=Math.pow(2,Math.ceil(Math.log2(V*o)));B>N&&(console.info(`Increasing SDF texture size ${N}->${B}`),W0e(f,r,B),c.dispose()),Promise.all(T.map(k=>HH(k,l,n.gpuAccelerateSDF).then(({timing:j})=>{A.sdf[k.atlasIndex]=j}))).then(()=>{T.length&&!l.contextLost&&(jH(l),c.needsUpdate=!0),A.sdfTotal=s0()-L,A.total=s0()-t,e(Object.freeze({parameters:n,sdfTexture:c,sdfGlyphSize:o,sdfExponent:s,glyphBounds:E,glyphAtlasIndices:v,glyphColors:m.glyphColors,caretPositions:m.caretPositions,chunkedBounds:m.chunkedBounds,ascender:m.ascender,descender:m.descender,lineHeight:m.lineHeight,capHeight:m.capHeight,xHeight:m.xHeight,topBaseline:m.topBaseline,blockBounds:m.blockBounds,visibleBounds:m.visibleBounds,timings:m.timings}))})}),Promise.resolve().then(()=>{l.contextLost||j0e(f)})}function HH({path:n,atlasIndex:e,sdfViewBox:t},{sdfGlyphSize:i,sdfCanvas:r,contextLost:s},o){if(s)return Promise.resolve({timing:-1});const{textureWidth:a,sdfExponent:l}=Lb,c=Math.max(t[2]-t[0],t[3]-t[1]),f=Math.floor(e/4),d=f%(a/i)*i,m=Math.floor(f/(a/i))*i,v=e%4;return z0e(i,i,n,t,c,l,r,d,m,v,o)}function q0e(n){const e=n.sdfCanvas;e.addEventListener("webglcontextlost",t=>{console.log("Context Lost",t),t.preventDefault(),n.contextLost=!0}),e.addEventListener("webglcontextrestored",t=>{console.log("Context Restored",t),n.contextLost=!1;const i=[];n.glyphsByFont.forEach(r=>{r.forEach(s=>{i.push(HH(s,n,!0))})}),Promise.all(i).then(()=>{jH(n),n.sdfTexture.needsUpdate=!0})})}function X0e({font:n,characters:e,sdfGlyphSize:t},i){let r=Array.isArray(e)?e.join(`
`):""+e;GH({font:n,sdfGlyphSize:t,text:r},i)}function Y0e(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}let mS;function Z0e(n){return mS||(mS=typeof document>"u"?{}:document.createElement("a")),mS.href=n,mS.href}function jH(n){if(typeof createImageBitmap!="function"){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:e,sdfTexture:t}=n,{width:i,height:r}=e,s=n.sdfCanvas.getContext("webgl");let o=t.image.data;(!o||o.length!==i*r*4)&&(o=new Uint8Array(i*r*4),t.image={width:i,height:r,data:o},t.flipY=!1,t.isDataTexture=!0),s.readPixels(0,0,i,r,s.RGBA,s.UNSIGNED_BYTE,o)}}const K0e=pv({name:"Typesetter",dependencies:[k0e,U0e,w0e],init(n,e,t){return n(e,t())}}),WH=pv({name:"Typesetter",dependencies:[K0e],init(n){return function(e){return new Promise(t=>{n.typeset(e,t)})}},getTransferables(n){const e=[];for(let t in n)n[t]&&n[t].buffer&&e.push(n[t].buffer);return e}});WH.onMainThread;const F5={};function Q0e(n){let e=F5[n];return e||(e=F5[n]=new Zf(1,1,n,n).translate(.5,.5,0)),e}const J0e="aTroikaGlyphBounds",B5="aTroikaGlyphIndex",eve="aTroikaGlyphColor";class tve extends IL{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new ts,this.boundingBox=new Vr}computeBoundingSphere(){}computeBoundingBox(){}set detail(e){if(e!==this._detail){this._detail=e,(typeof e!="number"||e<1)&&(e=1);let t=Q0e(e);["position","normal","uv"].forEach(i=>{this.attributes[i]=t.attributes[i].clone()}),this.setIndex(t.getIndex().clone())}}get detail(){return this._detail}set curveRadius(e){e!==this._curveRadius&&(this._curveRadius=e,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(e,t,i,r,s){this.updateAttributeData(J0e,e,4),this.updateAttributeData(B5,t,1),this.updateAttributeData(eve,s,3),this._blockBounds=i,this._chunkedBounds=r,this.instanceCount=t.length,this._updateBounds()}_updateBounds(){const e=this._blockBounds;if(e){const{curveRadius:t,boundingBox:i}=this;if(t){const{PI:r,floor:s,min:o,max:a,sin:l,cos:c}=Math,f=r/2,d=r*2,m=Math.abs(t),v=e[0]/m,b=e[2]/m,x=s((v+f)/d)!==s((b+f)/d)?-m:o(l(v)*m,l(b)*m),w=s((v-f)/d)!==s((b-f)/d)?m:a(l(v)*m,l(b)*m),_=s((v+r)/d)!==s((b+r)/d)?m*2:a(m-c(v)*m,m-c(b)*m);i.min.set(x,e[1],t<0?-_:0),i.max.set(w,e[3],t<0?0:_)}else i.min.set(e[0],e[1],0),i.max.set(e[2],e[3],0);i.getBoundingSphere(this.boundingSphere)}}applyClipRect(e){let t=this.getAttribute(B5).count,i=this._chunkedBounds;if(i)for(let r=i.length;r--;){t=i[r].end;let s=i[r].rect;if(s[1]<e.w&&s[3]>e.y&&s[0]<e.z&&s[2]>e.x)break}this.instanceCount=t}updateAttributeData(e,t,i){const r=this.getAttribute(e);t?r&&r.array.length===t.length?(r.array.set(t),r.needsUpdate=!0):(this.setAttribute(e,new cm(t,i)),delete this._maxInstanceCount,this.dispose()):r&&this.deleteAttribute(e)}}const nve=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaEdgeOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,ive=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaEdgeOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaEdgeOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,rve=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaEdgeOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,sve=`
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaEdgeOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`;function ove(n){const e=jD(n,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new ut},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new Gn(0,0,0,0)},uTroikaClipRect:{value:new Gn(0,0,0,0)},uTroikaEdgeOffset:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new ut},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new yt},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new un},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:nve,vertexTransform:ive,fragmentDefs:rve,fragmentColorTransform:sve,customRewriter({vertexShader:t,fragmentShader:i}){let r=/\buniform\s+vec3\s+diffuse\b/;return r.test(i)&&(i=i.replace(r,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),r.test(t)||(t=t.replace(BH,`uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`))),{vertexShader:t,fragmentShader:i}}});return e.transparent=!0,e.forceSinglePass=!0,Object.defineProperties(e,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),e}const xP=new Yf({color:16777215,side:yr,transparent:!0}),V5=8421504,G5=new Kt,gS=new de,WR=new de,vb=[],ave=new de,$R="+x+y";function H5(n){return Array.isArray(n)?n[0]:n}let $H=()=>{const n=new Pi(new Zf(1,1),xP);return $H=()=>n,n},qH=()=>{const n=new Pi(new Zf(1,1,32,1),xP);return qH=()=>n,n};const lve={type:"syncstart"},cve={type:"synccomplete"},XH=["font","fontSize","fontStyle","fontWeight","lang","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],uve=XH.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");let YH=class extends Pi{constructor(){const e=new tve;super(e,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.unicodeFontsURL=null,this.fontSize=.1,this.fontWeight="normal",this.fontStyle="normal",this.lang=null,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=V5,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=$R,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(e){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(e):(this._isSyncing=!0,this.dispatchEvent(lve),GH({text:this.text,font:this.font,lang:this.lang,fontSize:this.fontSize||.1,fontWeight:this.fontWeight||"normal",fontStyle:this.fontStyle||"normal",letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF,unicodeFontsURL:this.unicodeFontsURL},t=>{this._isSyncing=!1,this._textRenderInfo=t,this.geometry.updateGlyphs(t.glyphBounds,t.glyphAtlasIndices,t.blockBounds,t.chunkedBounds,t.glyphColors);const i=this._queuedSyncs;i&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{i.forEach(r=>r&&r())})),this.dispatchEvent(cve),e&&e()})))}onBeforeRender(e,t,i,r,s,o){this.sync(),s.isTroikaTextMaterial&&this._prepareForRender(s)}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}createDerivedMaterial(e){return ove(e)}get material(){let e=this._derivedMaterial;const t=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=xP.clone());if((!e||!e.isDerivedFrom(t))&&(e=this._derivedMaterial=this.createDerivedMaterial(t),t.addEventListener("dispose",function i(){t.removeEventListener("dispose",i),e.dispose()})),this.hasOutline()){let i=e._outlineMtl;return i||(i=e._outlineMtl=Object.create(e,{id:{value:e.id+.1}}),i.isTextOutlineMaterial=!0,i.depthWrite=!1,i.map=null,e.addEventListener("dispose",function r(){e.removeEventListener("dispose",r),i.dispose()})),[i,e]}else return e}set material(e){e&&e.isTroikaTextMaterial?(this._derivedMaterial=e,this._baseMaterial=e.baseMaterial):this._baseMaterial=e}hasOutline(){return!!(this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY)}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(e){this.geometry.detail=e}get curveRadius(){return this.geometry.curveRadius}set curveRadius(e){this.geometry.curveRadius=e}get customDepthMaterial(){return H5(this.material).getDepthMaterial()}set customDepthMaterial(e){}get customDistanceMaterial(){return H5(this.material).getDistanceMaterial()}set customDistanceMaterial(e){}_prepareForRender(e){const t=e.isTextOutlineMaterial,i=e.uniforms,r=this.textRenderInfo;if(r){const{sdfTexture:a,blockBounds:l}=r;i.uTroikaSDFTexture.value=a,i.uTroikaSDFTextureSize.value.set(a.image.width,a.image.height),i.uTroikaSDFGlyphSize.value=r.sdfGlyphSize,i.uTroikaSDFExponent.value=r.sdfExponent,i.uTroikaTotalBounds.value.fromArray(l),i.uTroikaUseGlyphColors.value=!t&&!!r.glyphColors;let c=0,f=0,d=0,m,v,b,x=0,w=0;if(t){let{outlineWidth:A,outlineOffsetX:T,outlineOffsetY:E,outlineBlur:C,outlineOpacity:R}=this;c=this._parsePercent(A)||0,f=Math.max(0,this._parsePercent(C)||0),m=R,x=this._parsePercent(T)||0,w=this._parsePercent(E)||0}else d=Math.max(0,this._parsePercent(this.strokeWidth)||0),d&&(b=this.strokeColor,i.uTroikaStrokeColor.value.set(b??V5),v=this.strokeOpacity,v==null&&(v=1)),m=this.fillOpacity;i.uTroikaEdgeOffset.value=c,i.uTroikaPositionOffset.value.set(x,w),i.uTroikaBlurRadius.value=f,i.uTroikaStrokeWidth.value=d,i.uTroikaStrokeOpacity.value=v,i.uTroikaFillOpacity.value=m??1,i.uTroikaCurveRadius.value=this.curveRadius||0;let _=this.clipRect;if(_&&Array.isArray(_)&&_.length===4)i.uTroikaClipRect.value.fromArray(_);else{const A=(this.fontSize||.1)*100;i.uTroikaClipRect.value.set(l[0]-A,l[1]-A,l[2]+A,l[3]+A)}this.geometry.applyClipRect(i.uTroikaClipRect.value)}i.uTroikaSDFDebug.value=!!this.debugSDF,e.polygonOffset=!!this.depthOffset,e.polygonOffsetFactor=e.polygonOffsetUnits=this.depthOffset||0;const s=t?this.outlineColor||0:this.color;if(s==null)delete e.color;else{const a=e.hasOwnProperty("color")?e.color:e.color=new yt;(s!==a._input||typeof s=="object")&&a.set(a._input=s)}let o=this.orientation||$R;if(o!==e._orientation){let a=i.uTroikaOrient.value;o=o.replace(/[^-+xyz]/g,"");let l=o!==$R&&o.match(/^([-+])([xyz])([-+])([xyz])$/);if(l){let[,c,f,d,m]=l;gS.set(0,0,0)[f]=c==="-"?1:-1,WR.set(0,0,0)[m]=d==="-"?-1:1,G5.lookAt(ave,gS.cross(WR),WR),a.setFromMatrix4(G5)}else a.identity();e._orientation=o}}_parsePercent(e){if(typeof e=="string"){let t=e.match(/^(-?[\d.]+)%$/),i=t?parseFloat(t[1]):NaN;e=(isNaN(i)?0:i/100)*this.fontSize}return e}localPositionToTextCoords(e,t=new ut){t.copy(e);const i=this.curveRadius;return i&&(t.x=Math.atan2(e.x,Math.abs(i)-Math.abs(e.z))*Math.abs(i)),t}worldPositionToTextCoords(e,t=new ut){return gS.copy(e),this.localPositionToTextCoords(this.worldToLocal(gS),t)}raycast(e,t){const{textRenderInfo:i,curveRadius:r}=this;if(i){const s=i.blockBounds,o=r?qH():$H(),a=o.geometry,{position:l,uv:c}=a.attributes;for(let f=0;f<c.count;f++){let d=s[0]+c.getX(f)*(s[2]-s[0]);const m=s[1]+c.getY(f)*(s[3]-s[1]);let v=0;r&&(v=r-Math.cos(d/r)*r,d=Math.sin(d/r)*r),l.setXYZ(f,d,m,v)}a.boundingSphere=this.geometry.boundingSphere,a.boundingBox=this.geometry.boundingBox,o.matrixWorld=this.matrixWorld,o.material.side=this.material.side,vb.length=0,o.raycast(e,vb);for(let f=0;f<vb.length;f++)vb[f].object=this,t.push(vb[f])}}copy(e){const t=this.geometry;return super.copy(e),this.geometry=t,uve.forEach(i=>{this[i]=e[i]}),this}clone(){return new this.constructor().copy(this)}};XH.forEach(n=>{const e="_private_"+n;Object.defineProperty(YH.prototype,n,{get(){return this[e]},set(t){t!==this[e]&&(this[e]=t,this._needsSync=!0)}})});new Vr;new yt;const fve=$.forwardRef(({sdfGlyphSize:n=64,anchorX:e="center",anchorY:t="middle",font:i,fontSize:r=1,children:s,characters:o,onSync:a,...l},c)=>{const f=Br(({invalidate:b})=>b),[d]=$.useState(()=>new YH),[m,v]=$.useMemo(()=>{const b=[];let x="";return $.Children.forEach(s,w=>{typeof w=="string"||typeof w=="number"?x+=w:b.push(w)}),[b,x]},[s]);return $ue(()=>new Promise(b=>X0e({font:i,characters:o},b)),["troika-text",i,o]),$.useLayoutEffect(()=>{d.sync(()=>{f(),a&&a(d)})}),$.useEffect(()=>()=>d.dispose(),[d]),$.createElement("primitive",pd({object:d,ref:c,font:i,text:v,anchorX:e,anchorY:t,fontSize:r,sdfGlyphSize:n},l),m)}),iu=1e-5;function hve(n,e,t){const i=new ud,r=t-iu;return i.absarc(iu,iu,iu,-Math.PI/2,-Math.PI,!0),i.absarc(iu,e-r*2,iu,Math.PI,Math.PI/2,!0),i.absarc(n-r*2,e-r*2,iu,Math.PI/2,0,!0),i.absarc(n-r*2,iu,iu,0,-Math.PI/2,!0),i}const j5=$.forwardRef(function({args:[e=1,t=1,i=1]=[],radius:r=.05,steps:s=1,smoothness:o=4,bevelSegments:a=4,creaseAngle:l=.4,children:c,...f},d){return $.createElement("mesh",pd({ref:d},f),$.createElement(dve,{args:[e,t,i],radius:r,steps:s,smoothness:o,bevelSegments:a,creaseAngle:l}),c)}),dve=$.forwardRef(function({args:[e=1,t=1,i=1]=[],radius:r=.05,steps:s=1,smoothness:o=4,bevelSegments:a=4,creaseAngle:l=.4,...c},f){const d=$.useMemo(()=>hve(e,t,r),[e,t,r]),m=$.useMemo(()=>({depth:i-r*2,bevelEnabled:!0,bevelSegments:a*2,steps:s,bevelSize:r-iu,bevelThickness:r,curveSegments:o}),[i,r,o,a,s]),v=$.useRef(null);return $.useLayoutEffect(()=>{v.current&&(v.current.center(),hde(v.current,l))},[d,m,l]),$.useImperativeHandle(f,()=>v.current),$.createElement("extrudeGeometry",pd({ref:v,args:[d,m]},c))});var yb={exports:{}},W5;function pve(){if(W5)return yb.exports;W5=1;const n={ellipse:"",chars:[" ","-"],max:140,truncate:!0};function e(i,r,s,o){if(i.length<=r)return i;if(r<2)return i.slice(0,r-s.length)+s;const a=r-s.length,l=Math.floor(a/2);let c=l,f=i.length-l;for(let d=0;d<l;d++){const m=i.charAt(d),v=i.length-d,b=i.charAt(v);o.indexOf(m)!==-1&&(c=d),o.indexOf(b)!==-1&&(f=v)}return i.slice(0,c)+s+i.slice(f)}function t(i,r,s,o,a){if(i.length<=r)return i;const l=r-s.length;let c=l,f=!1;for(let d=0;d<=l;d++){const m=i.charAt(d);o.indexOf(m)!==-1&&(c=d,f=!0)}return!a&&!f?"":i.slice(0,c)+s}return yb.exports=(i,r,s)=>{if(typeof i!="string"||i.length===0||r===0)return"";s=s||{};for(var o in n)(s[o]===null||typeof s[o]>"u")&&(s[o]=n[o]);return s.max=r||s.max,s.truncate==="middle"?e(i,s.max,s.ellipse,s.chars):t(i,s.max,s.ellipse,s.chars,s.truncate)},yb.exports.ellipsizeMiddle=e,yb.exports.ellipsize=t,yb.exports}var mve=pve();const gve=ro(mve);var qR,$5;function vve(){if($5)return qR;$5=1;var n=tP(),e=Qf(),t={dimensions:["x","y"],center:.5,scale:1};function i(s,o,a){if(!e(o))throw new Error("graphology-layout/random: the given graph is not a valid graphology instance.");a=n(a,t);var l=a.dimensions;if(!Array.isArray(l)||l.length!==2)throw new Error("graphology-layout/random: given dimensions are invalid.");var c=a.center,f=a.scale,d=Math.PI*2,m=(c-.5)*f,v=o.order,b=l[0],x=l[1];function w(T,E){return E[b]=f*Math.cos(T*d/v)+m,E[x]=f*Math.sin(T*d/v)+m,E}var _=0;if(!s){var A={};return o.forEachNode(function(T){A[T]=w(_++,{})}),A}o.updateEachNodeAttributes(function(T,E){return w(_++,E),E},{attributes:l})}var r=i.bind(null,!1);return r.assign=i.bind(null,!0),qR=r,qR}var yve=vve();const bve=ro(yve);var XR,q5;function _ve(){if(q5)return XR;q5=1;var n=tP(),e=Qf(),t={dimensions:["x","y"],center:.5,rng:Math.random,scale:1};function i(s,o,a){if(!e(o))throw new Error("graphology-layout/random: the given graph is not a valid graphology instance.");a=n(a,t);var l=a.dimensions;if(!Array.isArray(l)||l.length<1)throw new Error("graphology-layout/random: given dimensions are invalid.");var c=l.length,f=a.center,d=a.rng,m=a.scale,v=(f-.5)*m;function b(w){for(var _=0;_<c;_++)w[l[_]]=d()*m+v;return w}if(!s){var x={};return o.forEachNode(function(w){x[w]=b({})}),x}o.updateEachNodeAttributes(function(w,_){return b(_),_},{attributes:l})}var r=i.bind(null,!1);return r.assign=i.bind(null,!0),XR=r,XR}var xve=_ve();const wve=ro(xve);var YR,X5;function Sve(){if(X5)return YR;X5=1;var n=0,e=1,t=2,i=3,r=4,s=5,o=6,a=7,l=8,c=9,f=0,d=1,m=2,v=0,b=1,x=2,w=3,_=4,A=5,T=6,E=7,C=8,R=3,O=10,I=3,L=9,N=10;return YR=function(B,k,j){var q,W,G,K,te,ie,F,X,ee,le,oe=k.length,ue=j.length,he=B.adjustSizes,be=B.barnesHutTheta*B.barnesHutTheta,Te,Ee,Ce,we,ae,ve,xe,me=[];for(G=0;G<oe;G+=O)k[G+r]=k[G+t],k[G+s]=k[G+i],k[G+t]=0,k[G+i]=0;if(B.outboundAttractionDistribution){for(Te=0,G=0;G<oe;G+=O)Te+=k[G+o];Te/=oe/O}if(B.barnesHutOptimize){var Ie=1/0,Ne=-1/0,ke=1/0,Fe=-1/0,Ae,tt,se;for(G=0;G<oe;G+=O)Ie=Math.min(Ie,k[G+n]),Ne=Math.max(Ne,k[G+n]),ke=Math.min(ke,k[G+e]),Fe=Math.max(Fe,k[G+e]);var Z=Ne-Ie,ye=Fe-ke;for(Z>ye?(ke-=(Z-ye)/2,Fe=ke+Z):(Ie-=(ye-Z)/2,Ne=Ie+ye),me[0+v]=-1,me[0+b]=(Ie+Ne)/2,me[0+x]=(ke+Fe)/2,me[0+w]=Math.max(Ne-Ie,Fe-ke),me[0+_]=-1,me[0+A]=-1,me[0+T]=0,me[0+E]=0,me[0+C]=0,q=1,G=0;G<oe;G+=O)for(W=0,se=R;;)if(me[W+A]>=0){k[G+n]<me[W+b]?k[G+e]<me[W+x]?Ae=me[W+A]:Ae=me[W+A]+L:k[G+e]<me[W+x]?Ae=me[W+A]+L*2:Ae=me[W+A]+L*3,me[W+E]=(me[W+E]*me[W+T]+k[G+n]*k[G+o])/(me[W+T]+k[G+o]),me[W+C]=(me[W+C]*me[W+T]+k[G+e]*k[G+o])/(me[W+T]+k[G+o]),me[W+T]+=k[G+o],W=Ae;continue}else if(me[W+v]<0){me[W+v]=G;break}else{if(me[W+A]=q*L,X=me[W+w]/2,ee=me[W+A],me[ee+v]=-1,me[ee+b]=me[W+b]-X,me[ee+x]=me[W+x]-X,me[ee+w]=X,me[ee+_]=ee+L,me[ee+A]=-1,me[ee+T]=0,me[ee+E]=0,me[ee+C]=0,ee+=L,me[ee+v]=-1,me[ee+b]=me[W+b]-X,me[ee+x]=me[W+x]+X,me[ee+w]=X,me[ee+_]=ee+L,me[ee+A]=-1,me[ee+T]=0,me[ee+E]=0,me[ee+C]=0,ee+=L,me[ee+v]=-1,me[ee+b]=me[W+b]+X,me[ee+x]=me[W+x]-X,me[ee+w]=X,me[ee+_]=ee+L,me[ee+A]=-1,me[ee+T]=0,me[ee+E]=0,me[ee+C]=0,ee+=L,me[ee+v]=-1,me[ee+b]=me[W+b]+X,me[ee+x]=me[W+x]+X,me[ee+w]=X,me[ee+_]=me[W+_],me[ee+A]=-1,me[ee+T]=0,me[ee+E]=0,me[ee+C]=0,q+=4,k[me[W+v]+n]<me[W+b]?k[me[W+v]+e]<me[W+x]?Ae=me[W+A]:Ae=me[W+A]+L:k[me[W+v]+e]<me[W+x]?Ae=me[W+A]+L*2:Ae=me[W+A]+L*3,me[W+T]=k[me[W+v]+o],me[W+E]=k[me[W+v]+n],me[W+C]=k[me[W+v]+e],me[Ae+v]=me[W+v],me[W+v]=-1,k[G+n]<me[W+b]?k[G+e]<me[W+x]?tt=me[W+A]:tt=me[W+A]+L:k[G+e]<me[W+x]?tt=me[W+A]+L*2:tt=me[W+A]+L*3,Ae===tt)if(se--){W=Ae;continue}else{se=R;break}me[tt+v]=G;break}}if(B.barnesHutOptimize)for(Ee=B.scalingRatio,G=0;G<oe;G+=O)for(W=0;;)if(me[W+A]>=0)if(ve=Math.pow(k[G+n]-me[W+E],2)+Math.pow(k[G+e]-me[W+C],2),le=me[W+w],4*le*le/ve<be){if(Ce=k[G+n]-me[W+E],we=k[G+e]-me[W+C],he===!0?ve>0?(xe=Ee*k[G+o]*me[W+T]/ve,k[G+t]+=Ce*xe,k[G+i]+=we*xe):ve<0&&(xe=-Ee*k[G+o]*me[W+T]/Math.sqrt(ve),k[G+t]+=Ce*xe,k[G+i]+=we*xe):ve>0&&(xe=Ee*k[G+o]*me[W+T]/ve,k[G+t]+=Ce*xe,k[G+i]+=we*xe),W=me[W+_],W<0)break;continue}else{W=me[W+A];continue}else{if(ie=me[W+v],ie>=0&&ie!==G&&(Ce=k[G+n]-k[ie+n],we=k[G+e]-k[ie+e],ve=Ce*Ce+we*we,he===!0?ve>0?(xe=Ee*k[G+o]*k[ie+o]/ve,k[G+t]+=Ce*xe,k[G+i]+=we*xe):ve<0&&(xe=-Ee*k[G+o]*k[ie+o]/Math.sqrt(ve),k[G+t]+=Ce*xe,k[G+i]+=we*xe):ve>0&&(xe=Ee*k[G+o]*k[ie+o]/ve,k[G+t]+=Ce*xe,k[G+i]+=we*xe)),W=me[W+_],W<0)break;continue}else for(Ee=B.scalingRatio,K=0;K<oe;K+=O)for(te=0;te<K;te+=O)Ce=k[K+n]-k[te+n],we=k[K+e]-k[te+e],he===!0?(ve=Math.sqrt(Ce*Ce+we*we)-k[K+l]-k[te+l],ve>0?(xe=Ee*k[K+o]*k[te+o]/ve/ve,k[K+t]+=Ce*xe,k[K+i]+=we*xe,k[te+t]-=Ce*xe,k[te+i]-=we*xe):ve<0&&(xe=100*Ee*k[K+o]*k[te+o],k[K+t]+=Ce*xe,k[K+i]+=we*xe,k[te+t]-=Ce*xe,k[te+i]-=we*xe)):(ve=Math.sqrt(Ce*Ce+we*we),ve>0&&(xe=Ee*k[K+o]*k[te+o]/ve/ve,k[K+t]+=Ce*xe,k[K+i]+=we*xe,k[te+t]-=Ce*xe,k[te+i]-=we*xe));for(ee=B.gravity/B.scalingRatio,Ee=B.scalingRatio,G=0;G<oe;G+=O)xe=0,Ce=k[G+n],we=k[G+e],ve=Math.sqrt(Math.pow(Ce,2)+Math.pow(we,2)),B.strongGravityMode?ve>0&&(xe=Ee*k[G+o]*ee):ve>0&&(xe=Ee*k[G+o]*ee/ve),k[G+t]-=Ce*xe,k[G+i]-=we*xe;for(Ee=1*(B.outboundAttractionDistribution?Te:1),F=0;F<ue;F+=I)K=j[F+f],te=j[F+d],X=j[F+m],ae=Math.pow(X,B.edgeWeightInfluence),Ce=k[K+n]-k[te+n],we=k[K+e]-k[te+e],he===!0?(ve=Math.sqrt(Ce*Ce+we*we)-k[K+l]-k[te+l],B.linLogMode?B.outboundAttractionDistribution?ve>0&&(xe=-Ee*ae*Math.log(1+ve)/ve/k[K+o]):ve>0&&(xe=-Ee*ae*Math.log(1+ve)/ve):B.outboundAttractionDistribution?ve>0&&(xe=-Ee*ae/k[K+o]):ve>0&&(xe=-Ee*ae)):(ve=Math.sqrt(Math.pow(Ce,2)+Math.pow(we,2)),B.linLogMode?B.outboundAttractionDistribution?ve>0&&(xe=-Ee*ae*Math.log(1+ve)/ve/k[K+o]):ve>0&&(xe=-Ee*ae*Math.log(1+ve)/ve):B.outboundAttractionDistribution?(ve=1,xe=-Ee*ae/k[K+o]):(ve=1,xe=-Ee*ae)),ve>0&&(k[K+t]+=Ce*xe,k[K+i]+=we*xe,k[te+t]-=Ce*xe,k[te+i]-=we*xe);var Y,J,re,ge,_e,Se;if(he===!0)for(G=0;G<oe;G+=O)k[G+c]!==1&&(Y=Math.sqrt(Math.pow(k[G+t],2)+Math.pow(k[G+i],2)),Y>N&&(k[G+t]=k[G+t]*N/Y,k[G+i]=k[G+i]*N/Y),J=k[G+o]*Math.sqrt((k[G+r]-k[G+t])*(k[G+r]-k[G+t])+(k[G+s]-k[G+i])*(k[G+s]-k[G+i])),re=Math.sqrt((k[G+r]+k[G+t])*(k[G+r]+k[G+t])+(k[G+s]+k[G+i])*(k[G+s]+k[G+i]))/2,ge=.1*Math.log(1+re)/(1+Math.sqrt(J)),_e=k[G+n]+k[G+t]*(ge/B.slowDown),k[G+n]=_e,Se=k[G+e]+k[G+i]*(ge/B.slowDown),k[G+e]=Se);else for(G=0;G<oe;G+=O)k[G+c]!==1&&(J=k[G+o]*Math.sqrt((k[G+r]-k[G+t])*(k[G+r]-k[G+t])+(k[G+s]-k[G+i])*(k[G+s]-k[G+i])),re=Math.sqrt((k[G+r]+k[G+t])*(k[G+r]+k[G+t])+(k[G+s]+k[G+i])*(k[G+s]+k[G+i]))/2,ge=k[G+a]*Math.log(1+re)/(1+Math.sqrt(J)),k[G+a]=Math.min(1,Math.sqrt(ge*(Math.pow(k[G+t],2)+Math.pow(k[G+i],2))/(1+Math.sqrt(J)))),_e=k[G+n]+k[G+t]*(ge/B.slowDown),k[G+n]=_e,Se=k[G+e]+k[G+i]*(ge/B.slowDown),k[G+e]=Se);return{}},YR}var xf={},Y5;function Eve(){if(Y5)return xf;Y5=1;var n=10,e=3;return xf.assign=function(t){t=t||{};var i=Array.prototype.slice.call(arguments).slice(1),r,s,o;for(r=0,o=i.length;r<o;r++)if(i[r])for(s in i[r])t[s]=i[r][s];return t},xf.validateSettings=function(t){return"linLogMode"in t&&typeof t.linLogMode!="boolean"?{message:"the `linLogMode` setting should be a boolean."}:"outboundAttractionDistribution"in t&&typeof t.outboundAttractionDistribution!="boolean"?{message:"the `outboundAttractionDistribution` setting should be a boolean."}:"adjustSizes"in t&&typeof t.adjustSizes!="boolean"?{message:"the `adjustSizes` setting should be a boolean."}:"edgeWeightInfluence"in t&&typeof t.edgeWeightInfluence!="number"?{message:"the `edgeWeightInfluence` setting should be a number."}:"scalingRatio"in t&&!(typeof t.scalingRatio=="number"&&t.scalingRatio>=0)?{message:"the `scalingRatio` setting should be a number >= 0."}:"strongGravityMode"in t&&typeof t.strongGravityMode!="boolean"?{message:"the `strongGravityMode` setting should be a boolean."}:"gravity"in t&&!(typeof t.gravity=="number"&&t.gravity>=0)?{message:"the `gravity` setting should be a number >= 0."}:"slowDown"in t&&!(typeof t.slowDown=="number"||t.slowDown>=0)?{message:"the `slowDown` setting should be a number >= 0."}:"barnesHutOptimize"in t&&typeof t.barnesHutOptimize!="boolean"?{message:"the `barnesHutOptimize` setting should be a boolean."}:"barnesHutTheta"in t&&!(typeof t.barnesHutTheta=="number"&&t.barnesHutTheta>=0)?{message:"the `barnesHutTheta` setting should be a number >= 0."}:null},xf.graphToByteArrays=function(t,i){var r=t.order,s=t.size,o={},a,l=new Float32Array(r*n),c=new Float32Array(s*e);return a=0,t.forEachNode(function(f,d){o[f]=a,l[a]=d.x,l[a+1]=d.y,l[a+2]=0,l[a+3]=0,l[a+4]=0,l[a+5]=0,l[a+6]=1,l[a+7]=1,l[a+8]=d.size||1,l[a+9]=d.fixed?1:0,a+=n}),a=0,t.forEachEdge(function(f,d,m,v,b,x,w){var _=o[m],A=o[v],T=i(f,d,m,v,b,x,w);l[_+6]+=T,l[A+6]+=T,c[a]=_,c[a+1]=A,c[a+2]=T,a+=e}),{nodes:l,edges:c}},xf.assignLayoutChanges=function(t,i,r){var s=0;t.updateEachNodeAttributes(function(o,a){return a.x=i[s],a.y=i[s+1],s+=n,r?r(o,a):a})},xf.readGraphPositions=function(t,i){var r=0;t.forEachNode(function(s,o){i[r]=o.x,i[r+1]=o.y,r+=n})},xf.collectLayoutChanges=function(t,i,r){for(var s=t.nodes(),o={},a=0,l=0,c=i.length;a<c;a+=n){if(r){var f=Object.assign({},t.getNodeAttributes(s[l]));f.x=i[a],f.y=i[a+1],f=r(s[l],f),o[s[l]]={x:f.x,y:f.y}}else o[s[l]]={x:i[a],y:i[a+1]};l++}return o},xf.createWorker=function(i){var r=window.URL||window.webkitURL,s=i.toString(),o=r.createObjectURL(new Blob(["("+s+").call(this);"],{type:"text/javascript"})),a=new Worker(o);return r.revokeObjectURL(o),a},xf}var ZR,Z5;function Mve(){return Z5||(Z5=1,ZR={linLogMode:!1,outboundAttractionDistribution:!1,adjustSizes:!1,edgeWeightInfluence:1,scalingRatio:1,strongGravityMode:!1,gravity:1,slowDown:1,barnesHutOptimize:!1,barnesHutTheta:.5}),ZR}var KR,K5;function Tve(){if(K5)return KR;K5=1;var n=Qf(),e=wT().createEdgeWeightGetter,t=Sve(),i=Eve(),r=Mve();function s(l,c,f){if(!n(c))throw new Error("graphology-layout-forceatlas2: the given graph is not a valid graphology instance.");typeof f=="number"&&(f={iterations:f});var d=f.iterations;if(typeof d!="number")throw new Error("graphology-layout-forceatlas2: invalid number of iterations.");if(d<=0)throw new Error("graphology-layout-forceatlas2: you should provide a positive number of iterations.");var m=e("getEdgeWeight"in f?f.getEdgeWeight:"weight").fromEntry,v=typeof f.outputReducer=="function"?f.outputReducer:null,b=i.assign({},r,f.settings),x=i.validateSettings(b);if(x)throw new Error("graphology-layout-forceatlas2: "+x.message);var w=i.graphToByteArrays(c,m),_;for(_=0;_<d;_++)t(b,w.nodes,w.edges);if(l){i.assignLayoutChanges(c,w.nodes,v);return}return i.collectLayoutChanges(c,w.nodes)}function o(l){var c=typeof l=="number"?l:l.order;return{barnesHutOptimize:c>2e3,strongGravityMode:!0,gravity:.05,scalingRatio:10,slowDown:1+Math.log(c)}}var a=s.bind(null,!1);return a.assign=s.bind(null,!0),a.inferSettings=o,KR=a,KR}var Ave=Tve();const Cve=ro(Ave);function Rve(n,e,t){var i,r=1;n==null&&(n=0),e==null&&(e=0),t==null&&(t=0);function s(){var o,a=i.length,l,c=0,f=0,d=0;for(o=0;o<a;++o)l=i[o],c+=l.x||0,f+=l.y||0,d+=l.z||0;for(c=(c/a-n)*r,f=(f/a-e)*r,d=(d/a-t)*r,o=0;o<a;++o)l=i[o],c&&(l.x-=c),f&&(l.y-=f),d&&(l.z-=d)}return s.initialize=function(o){i=o},s.x=function(o){return arguments.length?(n=+o,s):n},s.y=function(o){return arguments.length?(e=+o,s):e},s.z=function(o){return arguments.length?(t=+o,s):t},s.strength=function(o){return arguments.length?(r=+o,s):r},s}function Dve(n){const e=+this._x.call(null,n);return ZH(this.cover(e),e,n)}function ZH(n,e,t){if(isNaN(e))return n;var i,r=n._root,s={data:t},o=n._x0,a=n._x1,l,c,f,d,m;if(!r)return n._root=s,n;for(;r.length;)if((f=e>=(l=(o+a)/2))?o=l:a=l,i=r,!(r=r[d=+f]))return i[d]=s,n;if(c=+n._x.call(null,r.data),e===c)return s.next=r,i?i[d]=s:n._root=s,n;do i=i?i[d]=new Array(2):n._root=new Array(2),(f=e>=(l=(o+a)/2))?o=l:a=l;while((d=+f)==(m=+(c>=l)));return i[m]=r,i[d]=s,n}function Ove(n){Array.isArray(n)||(n=Array.from(n));const e=n.length,t=new Float64Array(e);let i=1/0,r=-1/0;for(let s=0,o;s<e;++s)isNaN(o=+this._x.call(null,n[s]))||(t[s]=o,o<i&&(i=o),o>r&&(r=o));if(i>r)return this;this.cover(i).cover(r);for(let s=0;s<e;++s)ZH(this,t[s],n[s]);return this}function Lve(n){if(isNaN(n=+n))return this;var e=this._x0,t=this._x1;if(isNaN(e))t=(e=Math.floor(n))+1;else{for(var i=t-e||1,r=this._root,s,o;e>n||n>=t;)switch(o=+(n<e),s=new Array(2),s[o]=r,r=s,i*=2,o){case 0:t=e+i;break;case 1:e=t-i;break}this._root&&this._root.length&&(this._root=r)}return this._x0=e,this._x1=t,this}function Pve(){var n=[];return this.visit(function(e){if(!e.length)do n.push(e.data);while(e=e.next)}),n}function Ive(n){return arguments.length?this.cover(+n[0][0]).cover(+n[1][0]):isNaN(this._x0)?void 0:[[this._x0],[this._x1]]}function zf(n,e,t){this.node=n,this.x0=e,this.x1=t}function Nve(n,e){var t,i=this._x0,r,s,o=this._x1,a=[],l=this._root,c,f;for(l&&a.push(new zf(l,i,o)),e==null?e=1/0:(i=n-e,o=n+e);c=a.pop();)if(!(!(l=c.node)||(r=c.x0)>o||(s=c.x1)<i))if(l.length){var d=(r+s)/2;a.push(new zf(l[1],d,s),new zf(l[0],r,d)),(f=+(n>=d))&&(c=a[a.length-1],a[a.length-1]=a[a.length-1-f],a[a.length-1-f]=c)}else{var m=Math.abs(n-+this._x.call(null,l.data));m<e&&(e=m,i=n-m,o=n+m,t=l.data)}return t}function Uve(n){if(isNaN(l=+this._x.call(null,n)))return this;var e,t=this._root,i,r,s,o=this._x0,a=this._x1,l,c,f,d,m;if(!t)return this;if(t.length)for(;;){if((f=l>=(c=(o+a)/2))?o=c:a=c,e=t,!(t=t[d=+f]))return this;if(!t.length)break;e[d+1&1]&&(i=e,m=d)}for(;t.data!==n;)if(r=t,!(t=t.next))return this;return(s=t.next)&&delete t.next,r?(s?r.next=s:delete r.next,this):e?(s?e[d]=s:delete e[d],(t=e[0]||e[1])&&t===(e[1]||e[0])&&!t.length&&(i?i[m]=t:this._root=t),this):(this._root=s,this)}function kve(n){for(var e=0,t=n.length;e<t;++e)this.remove(n[e]);return this}function zve(){return this._root}function Fve(){var n=0;return this.visit(function(e){if(!e.length)do++n;while(e=e.next)}),n}function Bve(n){var e=[],t,i=this._root,r,s,o;for(i&&e.push(new zf(i,this._x0,this._x1));t=e.pop();)if(!n(i=t.node,s=t.x0,o=t.x1)&&i.length){var a=(s+o)/2;(r=i[1])&&e.push(new zf(r,a,o)),(r=i[0])&&e.push(new zf(r,s,a))}return this}function Vve(n){var e=[],t=[],i;for(this._root&&e.push(new zf(this._root,this._x0,this._x1));i=e.pop();){var r=i.node;if(r.length){var s,o=i.x0,a=i.x1,l=(o+a)/2;(s=r[0])&&e.push(new zf(s,o,l)),(s=r[1])&&e.push(new zf(s,l,a))}t.push(i)}for(;i=t.pop();)n(i.node,i.x0,i.x1);return this}function Gve(n){return n[0]}function Hve(n){return arguments.length?(this._x=n,this):this._x}function wP(n,e){var t=new SP(e??Gve,NaN,NaN);return n==null?t:t.addAll(n)}function SP(n,e,t){this._x=n,this._x0=e,this._x1=t,this._root=void 0}function Q5(n){for(var e={data:n.data},t=e;n=n.next;)t=t.next={data:n.data};return e}var ga=wP.prototype=SP.prototype;ga.copy=function(){var n=new SP(this._x,this._x0,this._x1),e=this._root,t,i;if(!e)return n;if(!e.length)return n._root=Q5(e),n;for(t=[{source:e,target:n._root=new Array(2)}];e=t.pop();)for(var r=0;r<2;++r)(i=e.source[r])&&(i.length?t.push({source:i,target:e.target[r]=new Array(2)}):e.target[r]=Q5(i));return n};ga.add=Dve;ga.addAll=Ove;ga.cover=Lve;ga.data=Pve;ga.extent=Ive;ga.find=Nve;ga.remove=Uve;ga.removeAll=kve;ga.root=zve;ga.size=Fve;ga.visit=Bve;ga.visitAfter=Vve;ga.x=Hve;function jve(n){const e=+this._x.call(null,n),t=+this._y.call(null,n);return KH(this.cover(e,t),e,t,n)}function KH(n,e,t,i){if(isNaN(e)||isNaN(t))return n;var r,s=n._root,o={data:i},a=n._x0,l=n._y0,c=n._x1,f=n._y1,d,m,v,b,x,w,_,A;if(!s)return n._root=o,n;for(;s.length;)if((x=e>=(d=(a+c)/2))?a=d:c=d,(w=t>=(m=(l+f)/2))?l=m:f=m,r=s,!(s=s[_=w<<1|x]))return r[_]=o,n;if(v=+n._x.call(null,s.data),b=+n._y.call(null,s.data),e===v&&t===b)return o.next=s,r?r[_]=o:n._root=o,n;do r=r?r[_]=new Array(4):n._root=new Array(4),(x=e>=(d=(a+c)/2))?a=d:c=d,(w=t>=(m=(l+f)/2))?l=m:f=m;while((_=w<<1|x)===(A=(b>=m)<<1|v>=d));return r[A]=s,r[_]=o,n}function Wve(n){var e,t,i=n.length,r,s,o=new Array(i),a=new Array(i),l=1/0,c=1/0,f=-1/0,d=-1/0;for(t=0;t<i;++t)isNaN(r=+this._x.call(null,e=n[t]))||isNaN(s=+this._y.call(null,e))||(o[t]=r,a[t]=s,r<l&&(l=r),r>f&&(f=r),s<c&&(c=s),s>d&&(d=s));if(l>f||c>d)return this;for(this.cover(l,c).cover(f,d),t=0;t<i;++t)KH(this,o[t],a[t],n[t]);return this}function $ve(n,e){if(isNaN(n=+n)||isNaN(e=+e))return this;var t=this._x0,i=this._y0,r=this._x1,s=this._y1;if(isNaN(t))r=(t=Math.floor(n))+1,s=(i=Math.floor(e))+1;else{for(var o=r-t||1,a=this._root,l,c;t>n||n>=r||i>e||e>=s;)switch(c=(e<i)<<1|n<t,l=new Array(4),l[c]=a,a=l,o*=2,c){case 0:r=t+o,s=i+o;break;case 1:t=r-o,s=i+o;break;case 2:r=t+o,i=s-o;break;case 3:t=r-o,i=s-o;break}this._root&&this._root.length&&(this._root=a)}return this._x0=t,this._y0=i,this._x1=r,this._y1=s,this}function qve(){var n=[];return this.visit(function(e){if(!e.length)do n.push(e.data);while(e=e.next)}),n}function Xve(n){return arguments.length?this.cover(+n[0][0],+n[0][1]).cover(+n[1][0],+n[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Ro(n,e,t,i,r){this.node=n,this.x0=e,this.y0=t,this.x1=i,this.y1=r}function Yve(n,e,t){var i,r=this._x0,s=this._y0,o,a,l,c,f=this._x1,d=this._y1,m=[],v=this._root,b,x;for(v&&m.push(new Ro(v,r,s,f,d)),t==null?t=1/0:(r=n-t,s=e-t,f=n+t,d=e+t,t*=t);b=m.pop();)if(!(!(v=b.node)||(o=b.x0)>f||(a=b.y0)>d||(l=b.x1)<r||(c=b.y1)<s))if(v.length){var w=(o+l)/2,_=(a+c)/2;m.push(new Ro(v[3],w,_,l,c),new Ro(v[2],o,_,w,c),new Ro(v[1],w,a,l,_),new Ro(v[0],o,a,w,_)),(x=(e>=_)<<1|n>=w)&&(b=m[m.length-1],m[m.length-1]=m[m.length-1-x],m[m.length-1-x]=b)}else{var A=n-+this._x.call(null,v.data),T=e-+this._y.call(null,v.data),E=A*A+T*T;if(E<t){var C=Math.sqrt(t=E);r=n-C,s=e-C,f=n+C,d=e+C,i=v.data}}return i}function Zve(n){if(isNaN(f=+this._x.call(null,n))||isNaN(d=+this._y.call(null,n)))return this;var e,t=this._root,i,r,s,o=this._x0,a=this._y0,l=this._x1,c=this._y1,f,d,m,v,b,x,w,_;if(!t)return this;if(t.length)for(;;){if((b=f>=(m=(o+l)/2))?o=m:l=m,(x=d>=(v=(a+c)/2))?a=v:c=v,e=t,!(t=t[w=x<<1|b]))return this;if(!t.length)break;(e[w+1&3]||e[w+2&3]||e[w+3&3])&&(i=e,_=w)}for(;t.data!==n;)if(r=t,!(t=t.next))return this;return(s=t.next)&&delete t.next,r?(s?r.next=s:delete r.next,this):e?(s?e[w]=s:delete e[w],(t=e[0]||e[1]||e[2]||e[3])&&t===(e[3]||e[2]||e[1]||e[0])&&!t.length&&(i?i[_]=t:this._root=t),this):(this._root=s,this)}function Kve(n){for(var e=0,t=n.length;e<t;++e)this.remove(n[e]);return this}function Qve(){return this._root}function Jve(){var n=0;return this.visit(function(e){if(!e.length)do++n;while(e=e.next)}),n}function eye(n){var e=[],t,i=this._root,r,s,o,a,l;for(i&&e.push(new Ro(i,this._x0,this._y0,this._x1,this._y1));t=e.pop();)if(!n(i=t.node,s=t.x0,o=t.y0,a=t.x1,l=t.y1)&&i.length){var c=(s+a)/2,f=(o+l)/2;(r=i[3])&&e.push(new Ro(r,c,f,a,l)),(r=i[2])&&e.push(new Ro(r,s,f,c,l)),(r=i[1])&&e.push(new Ro(r,c,o,a,f)),(r=i[0])&&e.push(new Ro(r,s,o,c,f))}return this}function tye(n){var e=[],t=[],i;for(this._root&&e.push(new Ro(this._root,this._x0,this._y0,this._x1,this._y1));i=e.pop();){var r=i.node;if(r.length){var s,o=i.x0,a=i.y0,l=i.x1,c=i.y1,f=(o+l)/2,d=(a+c)/2;(s=r[0])&&e.push(new Ro(s,o,a,f,d)),(s=r[1])&&e.push(new Ro(s,f,a,l,d)),(s=r[2])&&e.push(new Ro(s,o,d,f,c)),(s=r[3])&&e.push(new Ro(s,f,d,l,c))}t.push(i)}for(;i=t.pop();)n(i.node,i.x0,i.y0,i.x1,i.y1);return this}function nye(n){return n[0]}function iye(n){return arguments.length?(this._x=n,this):this._x}function rye(n){return n[1]}function sye(n){return arguments.length?(this._y=n,this):this._y}function EP(n,e,t){var i=new MP(e??nye,t??rye,NaN,NaN,NaN,NaN);return n==null?i:i.addAll(n)}function MP(n,e,t,i,r,s){this._x=n,this._y=e,this._x0=t,this._y0=i,this._x1=r,this._y1=s,this._root=void 0}function J5(n){for(var e={data:n.data},t=e;n=n.next;)t=t.next={data:n.data};return e}var Uo=EP.prototype=MP.prototype;Uo.copy=function(){var n=new MP(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,t,i;if(!e)return n;if(!e.length)return n._root=J5(e),n;for(t=[{source:e,target:n._root=new Array(4)}];e=t.pop();)for(var r=0;r<4;++r)(i=e.source[r])&&(i.length?t.push({source:i,target:e.target[r]=new Array(4)}):e.target[r]=J5(i));return n};Uo.add=jve;Uo.addAll=Wve;Uo.cover=$ve;Uo.data=qve;Uo.extent=Xve;Uo.find=Yve;Uo.remove=Zve;Uo.removeAll=Kve;Uo.root=Qve;Uo.size=Jve;Uo.visit=eye;Uo.visitAfter=tye;Uo.x=iye;Uo.y=sye;function oye(n){const e=+this._x.call(null,n),t=+this._y.call(null,n),i=+this._z.call(null,n);return QH(this.cover(e,t,i),e,t,i,n)}function QH(n,e,t,i,r){if(isNaN(e)||isNaN(t)||isNaN(i))return n;var s,o=n._root,a={data:r},l=n._x0,c=n._y0,f=n._z0,d=n._x1,m=n._y1,v=n._z1,b,x,w,_,A,T,E,C,R,O,I;if(!o)return n._root=a,n;for(;o.length;)if((E=e>=(b=(l+d)/2))?l=b:d=b,(C=t>=(x=(c+m)/2))?c=x:m=x,(R=i>=(w=(f+v)/2))?f=w:v=w,s=o,!(o=o[O=R<<2|C<<1|E]))return s[O]=a,n;if(_=+n._x.call(null,o.data),A=+n._y.call(null,o.data),T=+n._z.call(null,o.data),e===_&&t===A&&i===T)return a.next=o,s?s[O]=a:n._root=a,n;do s=s?s[O]=new Array(8):n._root=new Array(8),(E=e>=(b=(l+d)/2))?l=b:d=b,(C=t>=(x=(c+m)/2))?c=x:m=x,(R=i>=(w=(f+v)/2))?f=w:v=w;while((O=R<<2|C<<1|E)===(I=(T>=w)<<2|(A>=x)<<1|_>=b));return s[I]=o,s[O]=a,n}function aye(n){Array.isArray(n)||(n=Array.from(n));const e=n.length,t=new Float64Array(e),i=new Float64Array(e),r=new Float64Array(e);let s=1/0,o=1/0,a=1/0,l=-1/0,c=-1/0,f=-1/0;for(let d=0,m,v,b,x;d<e;++d)isNaN(v=+this._x.call(null,m=n[d]))||isNaN(b=+this._y.call(null,m))||isNaN(x=+this._z.call(null,m))||(t[d]=v,i[d]=b,r[d]=x,v<s&&(s=v),v>l&&(l=v),b<o&&(o=b),b>c&&(c=b),x<a&&(a=x),x>f&&(f=x));if(s>l||o>c||a>f)return this;this.cover(s,o,a).cover(l,c,f);for(let d=0;d<e;++d)QH(this,t[d],i[d],r[d],n[d]);return this}function lye(n,e,t){if(isNaN(n=+n)||isNaN(e=+e)||isNaN(t=+t))return this;var i=this._x0,r=this._y0,s=this._z0,o=this._x1,a=this._y1,l=this._z1;if(isNaN(i))o=(i=Math.floor(n))+1,a=(r=Math.floor(e))+1,l=(s=Math.floor(t))+1;else{for(var c=o-i||1,f=this._root,d,m;i>n||n>=o||r>e||e>=a||s>t||t>=l;)switch(m=(t<s)<<2|(e<r)<<1|n<i,d=new Array(8),d[m]=f,f=d,c*=2,m){case 0:o=i+c,a=r+c,l=s+c;break;case 1:i=o-c,a=r+c,l=s+c;break;case 2:o=i+c,r=a-c,l=s+c;break;case 3:i=o-c,r=a-c,l=s+c;break;case 4:o=i+c,a=r+c,s=l-c;break;case 5:i=o-c,a=r+c,s=l-c;break;case 6:o=i+c,r=a-c,s=l-c;break;case 7:i=o-c,r=a-c,s=l-c;break}this._root&&this._root.length&&(this._root=f)}return this._x0=i,this._y0=r,this._z0=s,this._x1=o,this._y1=a,this._z1=l,this}function cye(){var n=[];return this.visit(function(e){if(!e.length)do n.push(e.data);while(e=e.next)}),n}function uye(n){return arguments.length?this.cover(+n[0][0],+n[0][1],+n[0][2]).cover(+n[1][0],+n[1][1],+n[1][2]):isNaN(this._x0)?void 0:[[this._x0,this._y0,this._z0],[this._x1,this._y1,this._z1]]}function Mi(n,e,t,i,r,s,o){this.node=n,this.x0=e,this.y0=t,this.z0=i,this.x1=r,this.y1=s,this.z1=o}function fye(n,e,t,i){var r,s=this._x0,o=this._y0,a=this._z0,l,c,f,d,m,v,b=this._x1,x=this._y1,w=this._z1,_=[],A=this._root,T,E;for(A&&_.push(new Mi(A,s,o,a,b,x,w)),i==null?i=1/0:(s=n-i,o=e-i,a=t-i,b=n+i,x=e+i,w=t+i,i*=i);T=_.pop();)if(!(!(A=T.node)||(l=T.x0)>b||(c=T.y0)>x||(f=T.z0)>w||(d=T.x1)<s||(m=T.y1)<o||(v=T.z1)<a))if(A.length){var C=(l+d)/2,R=(c+m)/2,O=(f+v)/2;_.push(new Mi(A[7],C,R,O,d,m,v),new Mi(A[6],l,R,O,C,m,v),new Mi(A[5],C,c,O,d,R,v),new Mi(A[4],l,c,O,C,R,v),new Mi(A[3],C,R,f,d,m,O),new Mi(A[2],l,R,f,C,m,O),new Mi(A[1],C,c,f,d,R,O),new Mi(A[0],l,c,f,C,R,O)),(E=(t>=O)<<2|(e>=R)<<1|n>=C)&&(T=_[_.length-1],_[_.length-1]=_[_.length-1-E],_[_.length-1-E]=T)}else{var I=n-+this._x.call(null,A.data),L=e-+this._y.call(null,A.data),N=t-+this._z.call(null,A.data),V=I*I+L*L+N*N;if(V<i){var B=Math.sqrt(i=V);s=n-B,o=e-B,a=t-B,b=n+B,x=e+B,w=t+B,r=A.data}}return r}const hye=(n,e,t,i,r,s)=>Math.sqrt((n-i)**2+(e-r)**2+(t-s)**2);function dye(n,e,t,i){const r=[],s=n-i,o=e-i,a=t-i,l=n+i,c=e+i,f=t+i;return this.visit((d,m,v,b,x,w,_)=>{if(!d.length)do{const A=d.data;hye(n,e,t,this._x(A),this._y(A),this._z(A))<=i&&r.push(A)}while(d=d.next);return m>l||v>c||b>f||x<s||w<o||_<a}),r}function pye(n){if(isNaN(m=+this._x.call(null,n))||isNaN(v=+this._y.call(null,n))||isNaN(b=+this._z.call(null,n)))return this;var e,t=this._root,i,r,s,o=this._x0,a=this._y0,l=this._z0,c=this._x1,f=this._y1,d=this._z1,m,v,b,x,w,_,A,T,E,C,R;if(!t)return this;if(t.length)for(;;){if((A=m>=(x=(o+c)/2))?o=x:c=x,(T=v>=(w=(a+f)/2))?a=w:f=w,(E=b>=(_=(l+d)/2))?l=_:d=_,e=t,!(t=t[C=E<<2|T<<1|A]))return this;if(!t.length)break;(e[C+1&7]||e[C+2&7]||e[C+3&7]||e[C+4&7]||e[C+5&7]||e[C+6&7]||e[C+7&7])&&(i=e,R=C)}for(;t.data!==n;)if(r=t,!(t=t.next))return this;return(s=t.next)&&delete t.next,r?(s?r.next=s:delete r.next,this):e?(s?e[C]=s:delete e[C],(t=e[0]||e[1]||e[2]||e[3]||e[4]||e[5]||e[6]||e[7])&&t===(e[7]||e[6]||e[5]||e[4]||e[3]||e[2]||e[1]||e[0])&&!t.length&&(i?i[R]=t:this._root=t),this):(this._root=s,this)}function mye(n){for(var e=0,t=n.length;e<t;++e)this.remove(n[e]);return this}function gye(){return this._root}function vye(){var n=0;return this.visit(function(e){if(!e.length)do++n;while(e=e.next)}),n}function yye(n){var e=[],t,i=this._root,r,s,o,a,l,c,f;for(i&&e.push(new Mi(i,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));t=e.pop();)if(!n(i=t.node,s=t.x0,o=t.y0,a=t.z0,l=t.x1,c=t.y1,f=t.z1)&&i.length){var d=(s+l)/2,m=(o+c)/2,v=(a+f)/2;(r=i[7])&&e.push(new Mi(r,d,m,v,l,c,f)),(r=i[6])&&e.push(new Mi(r,s,m,v,d,c,f)),(r=i[5])&&e.push(new Mi(r,d,o,v,l,m,f)),(r=i[4])&&e.push(new Mi(r,s,o,v,d,m,f)),(r=i[3])&&e.push(new Mi(r,d,m,a,l,c,v)),(r=i[2])&&e.push(new Mi(r,s,m,a,d,c,v)),(r=i[1])&&e.push(new Mi(r,d,o,a,l,m,v)),(r=i[0])&&e.push(new Mi(r,s,o,a,d,m,v))}return this}function bye(n){var e=[],t=[],i;for(this._root&&e.push(new Mi(this._root,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));i=e.pop();){var r=i.node;if(r.length){var s,o=i.x0,a=i.y0,l=i.z0,c=i.x1,f=i.y1,d=i.z1,m=(o+c)/2,v=(a+f)/2,b=(l+d)/2;(s=r[0])&&e.push(new Mi(s,o,a,l,m,v,b)),(s=r[1])&&e.push(new Mi(s,m,a,l,c,v,b)),(s=r[2])&&e.push(new Mi(s,o,v,l,m,f,b)),(s=r[3])&&e.push(new Mi(s,m,v,l,c,f,b)),(s=r[4])&&e.push(new Mi(s,o,a,b,m,v,d)),(s=r[5])&&e.push(new Mi(s,m,a,b,c,v,d)),(s=r[6])&&e.push(new Mi(s,o,v,b,m,f,d)),(s=r[7])&&e.push(new Mi(s,m,v,b,c,f,d))}t.push(i)}for(;i=t.pop();)n(i.node,i.x0,i.y0,i.z0,i.x1,i.y1,i.z1);return this}function _ye(n){return n[0]}function xye(n){return arguments.length?(this._x=n,this):this._x}function wye(n){return n[1]}function Sye(n){return arguments.length?(this._y=n,this):this._y}function Eye(n){return n[2]}function Mye(n){return arguments.length?(this._z=n,this):this._z}function TP(n,e,t,i){var r=new AP(e??_ye,t??wye,i??Eye,NaN,NaN,NaN,NaN,NaN,NaN);return n==null?r:r.addAll(n)}function AP(n,e,t,i,r,s,o,a,l){this._x=n,this._y=e,this._z=t,this._x0=i,this._y0=r,this._z0=s,this._x1=o,this._y1=a,this._z1=l,this._root=void 0}function e4(n){for(var e={data:n.data},t=e;n=n.next;)t=t.next={data:n.data};return e}var Ls=TP.prototype=AP.prototype;Ls.copy=function(){var n=new AP(this._x,this._y,this._z,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1),e=this._root,t,i;if(!e)return n;if(!e.length)return n._root=e4(e),n;for(t=[{source:e,target:n._root=new Array(8)}];e=t.pop();)for(var r=0;r<8;++r)(i=e.source[r])&&(i.length?t.push({source:i,target:e.target[r]=new Array(8)}):e.target[r]=e4(i));return n};Ls.add=oye;Ls.addAll=aye;Ls.cover=lye;Ls.data=cye;Ls.extent=uye;Ls.find=fye;Ls.findAllWithinRadius=dye;Ls.remove=pye;Ls.removeAll=mye;Ls.root=gye;Ls.size=vye;Ls.visit=yye;Ls.visitAfter=bye;Ls.x=xye;Ls.y=Sye;Ls.z=Mye;function cr(n){return function(){return n}}function vl(n){return(n()-.5)*1e-6}function QR(n){return n.x+n.vx}function t4(n){return n.y+n.vy}function Tye(n){return n.z+n.vz}function JH(n){var e,t,i,r,s=1,o=1;typeof n!="function"&&(n=cr(n==null?1:+n));function a(){for(var f,d=e.length,m,v,b,x,w,_,A,T=0;T<o;++T)for(m=(t===1?wP(e,QR):t===2?EP(e,QR,t4):t===3?TP(e,QR,t4,Tye):null).visitAfter(l),f=0;f<d;++f)v=e[f],_=i[v.index],A=_*_,b=v.x+v.vx,t>1&&(x=v.y+v.vy),t>2&&(w=v.z+v.vz),m.visit(E);function E(C,R,O,I,L,N,V){var B=[R,O,I,L,N,V],k=B[0],j=B[1],q=B[2],W=B[t],G=B[t+1],K=B[t+2],te=C.data,ie=C.r,F=_+ie;if(te){if(te.index>v.index){var X=b-te.x-te.vx,ee=t>1?x-te.y-te.vy:0,le=t>2?w-te.z-te.vz:0,oe=X*X+ee*ee+le*le;oe<F*F&&(X===0&&(X=vl(r),oe+=X*X),t>1&&ee===0&&(ee=vl(r),oe+=ee*ee),t>2&&le===0&&(le=vl(r),oe+=le*le),oe=(F-(oe=Math.sqrt(oe)))/oe*s,v.vx+=(X*=oe)*(F=(ie*=ie)/(A+ie)),t>1&&(v.vy+=(ee*=oe)*F),t>2&&(v.vz+=(le*=oe)*F),te.vx-=X*(F=1-F),t>1&&(te.vy-=ee*F),t>2&&(te.vz-=le*F))}return}return k>b+F||W<b-F||t>1&&(j>x+F||G<x-F)||t>2&&(q>w+F||K<w-F)}}function l(f){if(f.data)return f.r=i[f.data.index];for(var d=f.r=0;d<Math.pow(2,t);++d)f[d]&&f[d].r>f.r&&(f.r=f[d].r)}function c(){if(e){var f,d=e.length,m;for(i=new Array(d),f=0;f<d;++f)m=e[f],i[m.index]=+n(m,f,e)}}return a.initialize=function(f,...d){e=f,r=d.find(m=>typeof m=="function")||Math.random,t=d.find(m=>[1,2,3].includes(m))||2,c()},a.iterations=function(f){return arguments.length?(o=+f,a):o},a.strength=function(f){return arguments.length?(s=+f,a):s},a.radius=function(f){return arguments.length?(n=typeof f=="function"?f:cr(+f),c(),a):n},a}function Aye(n){return n.index}function n4(n,e){var t=n.get(e);if(!t)throw new Error("node not found: "+e);return t}function e9(n){var e=Aye,t=m,i,r=cr(30),s,o,a,l,c,f,d=1;n==null&&(n=[]);function m(_){return 1/Math.min(l[_.source.index],l[_.target.index])}function v(_){for(var A=0,T=n.length;A<d;++A)for(var E=0,C,R,O,I=0,L=0,N=0,V,B;E<T;++E)C=n[E],R=C.source,O=C.target,I=O.x+O.vx-R.x-R.vx||vl(f),a>1&&(L=O.y+O.vy-R.y-R.vy||vl(f)),a>2&&(N=O.z+O.vz-R.z-R.vz||vl(f)),V=Math.sqrt(I*I+L*L+N*N),V=(V-s[E])/V*_*i[E],I*=V,L*=V,N*=V,O.vx-=I*(B=c[E]),a>1&&(O.vy-=L*B),a>2&&(O.vz-=N*B),R.vx+=I*(B=1-B),a>1&&(R.vy+=L*B),a>2&&(R.vz+=N*B)}function b(){if(o){var _,A=o.length,T=n.length,E=new Map(o.map((R,O)=>[e(R,O,o),R])),C;for(_=0,l=new Array(A);_<T;++_)C=n[_],C.index=_,typeof C.source!="object"&&(C.source=n4(E,C.source)),typeof C.target!="object"&&(C.target=n4(E,C.target)),l[C.source.index]=(l[C.source.index]||0)+1,l[C.target.index]=(l[C.target.index]||0)+1;for(_=0,c=new Array(T);_<T;++_)C=n[_],c[_]=l[C.source.index]/(l[C.source.index]+l[C.target.index]);i=new Array(T),x(),s=new Array(T),w()}}function x(){if(o)for(var _=0,A=n.length;_<A;++_)i[_]=+t(n[_],_,n)}function w(){if(o)for(var _=0,A=n.length;_<A;++_)s[_]=+r(n[_],_,n)}return v.initialize=function(_,...A){o=_,f=A.find(T=>typeof T=="function")||Math.random,a=A.find(T=>[1,2,3].includes(T))||2,b()},v.links=function(_){return arguments.length?(n=_,b(),v):n},v.id=function(_){return arguments.length?(e=_,v):e},v.iterations=function(_){return arguments.length?(d=+_,v):d},v.strength=function(_){return arguments.length?(t=typeof _=="function"?_:cr(+_),x(),v):t},v.distance=function(_){return arguments.length?(r=typeof _=="function"?_:cr(+_),w(),v):r},v}var Cye={value:()=>{}};function t9(){for(var n=0,e=arguments.length,t={},i;n<e;++n){if(!(i=arguments[n]+"")||i in t||/[\s.]/.test(i))throw new Error("illegal type: "+i);t[i]=[]}return new zS(t)}function zS(n){this._=n}function Rye(n,e){return n.trim().split(/^|\s+/).map(function(t){var i="",r=t.indexOf(".");if(r>=0&&(i=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:i}})}zS.prototype=t9.prototype={constructor:zS,on:function(n,e){var t=this._,i=Rye(n+"",t),r,s=-1,o=i.length;if(arguments.length<2){for(;++s<o;)if((r=(n=i[s]).type)&&(r=Dye(t[r],n.name)))return r;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<o;)if(r=(n=i[s]).type)t[r]=i4(t[r],n.name,e);else if(e==null)for(r in t)t[r]=i4(t[r],n.name,null);return this},copy:function(){var n={},e=this._;for(var t in e)n[t]=e[t].slice();return new zS(n)},call:function(n,e){if((r=arguments.length-2)>0)for(var t=new Array(r),i=0,r,s;i<r;++i)t[i]=arguments[i+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(s=this._[n],i=0,r=s.length;i<r;++i)s[i].value.apply(e,t)},apply:function(n,e,t){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var i=this._[n],r=0,s=i.length;r<s;++r)i[r].value.apply(e,t)}};function Dye(n,e){for(var t=0,i=n.length,r;t<i;++t)if((r=n[t]).name===e)return r.value}function i4(n,e,t){for(var i=0,r=n.length;i<r;++i)if(n[i].name===e){n[i]=Cye,n=n.slice(0,i).concat(n.slice(i+1));break}return t!=null&&n.push({name:e,value:t}),n}var H0=0,Pb=0,bb=0,n9=1e3,bM,Ib,_M=0,dm=0,LT=0,V_=typeof performance=="object"&&performance.now?performance:Date,i9=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function r9(){return dm||(i9(Oye),dm=V_.now()+LT)}function Oye(){dm=0}function $D(){this._call=this._time=this._next=null}$D.prototype=s9.prototype={constructor:$D,restart:function(n,e,t){if(typeof n!="function")throw new TypeError("callback is not a function");t=(t==null?r9():+t)+(e==null?0:+e),!this._next&&Ib!==this&&(Ib?Ib._next=this:bM=this,Ib=this),this._call=n,this._time=t,qD()},stop:function(){this._call&&(this._call=null,this._time=1/0,qD())}};function s9(n,e,t){var i=new $D;return i.restart(n,e,t),i}function Lye(){r9(),++H0;for(var n=bM,e;n;)(e=dm-n._time)>=0&&n._call.call(void 0,e),n=n._next;--H0}function r4(){dm=(_M=V_.now())+LT,H0=Pb=0;try{Lye()}finally{H0=0,Iye(),dm=0}}function Pye(){var n=V_.now(),e=n-_M;e>n9&&(LT-=e,_M=n)}function Iye(){for(var n,e=bM,t,i=1/0;e;)e._call?(i>e._time&&(i=e._time),n=e,e=e._next):(t=e._next,e._next=null,e=n?n._next=t:bM=t);Ib=n,qD(i)}function qD(n){if(!H0){Pb&&(Pb=clearTimeout(Pb));var e=n-dm;e>24?(n<1/0&&(Pb=setTimeout(r4,n-V_.now()-LT)),bb&&(bb=clearInterval(bb))):(bb||(_M=V_.now(),bb=setInterval(Pye,n9)),H0=1,i9(r4))}}const Nye=1664525,Uye=1013904223,s4=4294967296;function kye(){let n=1;return()=>(n=(Nye*n+Uye)%s4)/s4}var o4=3;function JR(n){return n.x}function a4(n){return n.y}function zye(n){return n.z}var Fye=10,Bye=Math.PI*(3-Math.sqrt(5)),Vye=Math.PI*20/(9+Math.sqrt(221));function o9(n,e){e=e||2;var t=Math.min(o4,Math.max(1,Math.round(e))),i,r=1,s=.001,o=1-Math.pow(s,1/300),a=0,l=.6,c=new Map,f=s9(v),d=t9("tick","end"),m=kye();n==null&&(n=[]);function v(){b(),d.call("tick",i),r<s&&(f.stop(),d.call("end",i))}function b(_){var A,T=n.length,E;_===void 0&&(_=1);for(var C=0;C<_;++C)for(r+=(a-r)*o,c.forEach(function(R){R(r)}),A=0;A<T;++A)E=n[A],E.fx==null?E.x+=E.vx*=l:(E.x=E.fx,E.vx=0),t>1&&(E.fy==null?E.y+=E.vy*=l:(E.y=E.fy,E.vy=0)),t>2&&(E.fz==null?E.z+=E.vz*=l:(E.z=E.fz,E.vz=0));return i}function x(){for(var _=0,A=n.length,T;_<A;++_){if(T=n[_],T.index=_,T.fx!=null&&(T.x=T.fx),T.fy!=null&&(T.y=T.fy),T.fz!=null&&(T.z=T.fz),isNaN(T.x)||t>1&&isNaN(T.y)||t>2&&isNaN(T.z)){var E=Fye*(t>2?Math.cbrt(.5+_):t>1?Math.sqrt(.5+_):_),C=_*Bye,R=_*Vye;t===1?T.x=E:t===2?(T.x=E*Math.cos(C),T.y=E*Math.sin(C)):(T.x=E*Math.sin(C)*Math.cos(R),T.y=E*Math.cos(C),T.z=E*Math.sin(C)*Math.sin(R))}(isNaN(T.vx)||t>1&&isNaN(T.vy)||t>2&&isNaN(T.vz))&&(T.vx=0,t>1&&(T.vy=0),t>2&&(T.vz=0))}}function w(_){return _.initialize&&_.initialize(n,m,t),_}return x(),i={tick:b,restart:function(){return f.restart(v),i},stop:function(){return f.stop(),i},numDimensions:function(_){return arguments.length?(t=Math.min(o4,Math.max(1,Math.round(_))),c.forEach(w),i):t},nodes:function(_){return arguments.length?(n=_,x(),c.forEach(w),i):n},alpha:function(_){return arguments.length?(r=+_,i):r},alphaMin:function(_){return arguments.length?(s=+_,i):s},alphaDecay:function(_){return arguments.length?(o=+_,i):+o},alphaTarget:function(_){return arguments.length?(a=+_,i):a},velocityDecay:function(_){return arguments.length?(l=1-_,i):1-l},randomSource:function(_){return arguments.length?(m=_,c.forEach(w),i):m},force:function(_,A){return arguments.length>1?(A==null?c.delete(_):c.set(_,w(A)),i):c.get(_)},find:function(){var _=Array.prototype.slice.call(arguments),A=_.shift()||0,T=(t>1?_.shift():null)||0,E=(t>2?_.shift():null)||0,C=_.shift()||1/0,R=0,O=n.length,I,L,N,V,B,k;for(C*=C,R=0;R<O;++R)B=n[R],I=A-B.x,L=T-(B.y||0),N=E-(B.z||0),V=I*I+L*L+N*N,V<C&&(k=B,C=V);return k},on:function(_,A){return arguments.length>1?(d.on(_,A),i):d.on(_)}}}function a9(){var n,e,t,i,r,s=cr(-30),o,a=1,l=1/0,c=.81;function f(b){var x,w=n.length,_=(e===1?wP(n,JR):e===2?EP(n,JR,a4):e===3?TP(n,JR,a4,zye):null).visitAfter(m);for(r=b,x=0;x<w;++x)t=n[x],_.visit(v)}function d(){if(n){var b,x=n.length,w;for(o=new Array(x),b=0;b<x;++b)w=n[b],o[w.index]=+s(w,b,n)}}function m(b){var x=0,w,_,A=0,T,E,C,R,O=b.length;if(O){for(T=E=C=R=0;R<O;++R)(w=b[R])&&(_=Math.abs(w.value))&&(x+=w.value,A+=_,T+=_*(w.x||0),E+=_*(w.y||0),C+=_*(w.z||0));x*=Math.sqrt(4/O),b.x=T/A,e>1&&(b.y=E/A),e>2&&(b.z=C/A)}else{w=b,w.x=w.data.x,e>1&&(w.y=w.data.y),e>2&&(w.z=w.data.z);do x+=o[w.data.index];while(w=w.next)}b.value=x}function v(b,x,w,_,A){if(!b.value)return!0;var T=[w,_,A][e-1],E=b.x-t.x,C=e>1?b.y-t.y:0,R=e>2?b.z-t.z:0,O=T-x,I=E*E+C*C+R*R;if(O*O/c<I)return I<l&&(E===0&&(E=vl(i),I+=E*E),e>1&&C===0&&(C=vl(i),I+=C*C),e>2&&R===0&&(R=vl(i),I+=R*R),I<a&&(I=Math.sqrt(a*I)),t.vx+=E*b.value*r/I,e>1&&(t.vy+=C*b.value*r/I),e>2&&(t.vz+=R*b.value*r/I)),!0;if(b.length||I>=l)return;(b.data!==t||b.next)&&(E===0&&(E=vl(i),I+=E*E),e>1&&C===0&&(C=vl(i),I+=C*C),e>2&&R===0&&(R=vl(i),I+=R*R),I<a&&(I=Math.sqrt(a*I)));do b.data!==t&&(O=o[b.data.index]*r/I,t.vx+=E*O,e>1&&(t.vy+=C*O),e>2&&(t.vz+=R*O));while(b=b.next)}return f.initialize=function(b,...x){n=b,i=x.find(w=>typeof w=="function")||Math.random,e=x.find(w=>[1,2,3].includes(w))||2,d()},f.strength=function(b){return arguments.length?(s=typeof b=="function"?b:cr(+b),d(),f):s},f.distanceMin=function(b){return arguments.length?(a=b*b,f):Math.sqrt(a)},f.distanceMax=function(b){return arguments.length?(l=b*b,f):Math.sqrt(l)},f.theta=function(b){return arguments.length?(c=b*b,f):Math.sqrt(c)},f}function Gye(n,e,t,i){var r,s,o=cr(.1),a,l;typeof n!="function"&&(n=cr(+n)),e==null&&(e=0),t==null&&(t=0),i==null&&(i=0);function c(d){for(var m=0,v=r.length;m<v;++m){var b=r[m],x=b.x-e||1e-6,w=(b.y||0)-t||1e-6,_=(b.z||0)-i||1e-6,A=Math.sqrt(x*x+w*w+_*_),T=(l[m]-A)*a[m]*d/A;b.vx+=x*T,s>1&&(b.vy+=w*T),s>2&&(b.vz+=_*T)}}function f(){if(r){var d,m=r.length;for(a=new Array(m),l=new Array(m),d=0;d<m;++d)l[d]=+n(r[d],d,r),a[d]=isNaN(l[d])?0:+o(r[d],d,r)}}return c.initialize=function(d,...m){r=d,s=m.find(v=>[1,2,3].includes(v))||2,f()},c.strength=function(d){return arguments.length?(o=typeof d=="function"?d:cr(+d),f(),c):o},c.radius=function(d){return arguments.length?(n=typeof d=="function"?d:cr(+d),f(),c):n},c.x=function(d){return arguments.length?(e=+d,c):e},c.y=function(d){return arguments.length?(t=+d,c):t},c.z=function(d){return arguments.length?(i=+d,c):i},c}function XD(n){var e=cr(.1),t,i,r;typeof n!="function"&&(n=cr(n==null?0:+n));function s(a){for(var l=0,c=t.length,f;l<c;++l)f=t[l],f.vx+=(r[l]-f.x)*i[l]*a}function o(){if(t){var a,l=t.length;for(i=new Array(l),r=new Array(l),a=0;a<l;++a)i[a]=isNaN(r[a]=+n(t[a],a,t))?0:+e(t[a],a,t)}}return s.initialize=function(a){t=a,o()},s.strength=function(a){return arguments.length?(e=typeof a=="function"?a:cr(+a),o(),s):e},s.x=function(a){return arguments.length?(n=typeof a=="function"?a:cr(+a),o(),s):n},s}function YD(n){var e=cr(.1),t,i,r;typeof n!="function"&&(n=cr(n==null?0:+n));function s(a){for(var l=0,c=t.length,f;l<c;++l)f=t[l],f.vy+=(r[l]-f.y)*i[l]*a}function o(){if(t){var a,l=t.length;for(i=new Array(l),r=new Array(l),a=0;a<l;++a)i[a]=isNaN(r[a]=+n(t[a],a,t))?0:+e(t[a],a,t)}}return s.initialize=function(a){t=a,o()},s.strength=function(a){return arguments.length?(e=typeof a=="function"?a:cr(+a),o(),s):e},s.y=function(a){return arguments.length?(n=typeof a=="function"?a:cr(+a),o(),s):n},s}function Hye(n){var e=cr(.1),t,i,r;typeof n!="function"&&(n=cr(n==null?0:+n));function s(a){for(var l=0,c=t.length,f;l<c;++l)f=t[l],f.vz+=(r[l]-f.z)*i[l]*a}function o(){if(t){var a,l=t.length;for(i=new Array(l),r=new Array(l),a=0;a<l;++a)i[a]=isNaN(r[a]=+n(t[a],a,t))?0:+e(t[a],a,t)}}return s.initialize=function(a){t=a,o()},s.strength=function(a){return arguments.length?(e=typeof a=="function"?a:cr(+a),o(),s):e},s.z=function(a){return arguments.length?(n=typeof a=="function"?a:cr(+a),o(),s):n},s}function jye(n){var e=0,t=n.children,i=t&&t.length;if(!i)e=1;else for(;--i>=0;)e+=t[i].value;n.value=e}function Wye(){return this.eachAfter(jye)}function $ye(n,e){let t=-1;for(const i of this)n.call(e,i,++t,this);return this}function qye(n,e){for(var t=this,i=[t],r,s,o=-1;t=i.pop();)if(n.call(e,t,++o,this),r=t.children)for(s=r.length-1;s>=0;--s)i.push(r[s]);return this}function Xye(n,e){for(var t=this,i=[t],r=[],s,o,a,l=-1;t=i.pop();)if(r.push(t),s=t.children)for(o=0,a=s.length;o<a;++o)i.push(s[o]);for(;t=r.pop();)n.call(e,t,++l,this);return this}function Yye(n,e){let t=-1;for(const i of this)if(n.call(e,i,++t,this))return i}function Zye(n){return this.eachAfter(function(e){for(var t=+n(e.data)||0,i=e.children,r=i&&i.length;--r>=0;)t+=i[r].value;e.value=t})}function Kye(n){return this.eachBefore(function(e){e.children&&e.children.sort(n)})}function Qye(n){for(var e=this,t=Jye(e,n),i=[e];e!==t;)e=e.parent,i.push(e);for(var r=i.length;n!==t;)i.splice(r,0,n),n=n.parent;return i}function Jye(n,e){if(n===e)return n;var t=n.ancestors(),i=e.ancestors(),r=null;for(n=t.pop(),e=i.pop();n===e;)r=n,n=t.pop(),e=i.pop();return r}function ebe(){for(var n=this,e=[n];n=n.parent;)e.push(n);return e}function tbe(){return Array.from(this)}function nbe(){var n=[];return this.eachBefore(function(e){e.children||n.push(e)}),n}function ibe(){var n=this,e=[];return n.each(function(t){t!==n&&e.push({source:t.parent,target:t})}),e}function*rbe(){var n=this,e,t=[n],i,r,s;do for(e=t.reverse(),t=[];n=e.pop();)if(yield n,i=n.children)for(r=0,s=i.length;r<s;++r)t.push(i[r]);while(t.length)}function PT(n,e){n instanceof Map?(n=[void 0,n],e===void 0&&(e=abe)):e===void 0&&(e=obe);for(var t=new j0(n),i,r=[t],s,o,a,l;i=r.pop();)if((o=e(i.data))&&(l=(o=Array.from(o)).length))for(i.children=o,a=l-1;a>=0;--a)r.push(s=o[a]=new j0(o[a])),s.parent=i,s.depth=i.depth+1;return t.eachBefore(l9)}function sbe(){return PT(this).eachBefore(lbe)}function obe(n){return n.children}function abe(n){return Array.isArray(n)?n[1]:null}function lbe(n){n.data.value!==void 0&&(n.value=n.data.value),n.data=n.data.data}function l9(n){var e=0;do n.height=e;while((n=n.parent)&&n.height<++e)}function j0(n){this.data=n,this.depth=this.height=0,this.parent=null}j0.prototype=PT.prototype={constructor:j0,count:Wye,each:$ye,eachAfter:Xye,eachBefore:qye,find:Yye,sum:Zye,sort:Kye,path:Qye,ancestors:ebe,descendants:tbe,leaves:nbe,links:ibe,copy:sbe,[Symbol.iterator]:rbe};function e3(n){return n==null?null:c9(n)}function c9(n){if(typeof n!="function")throw new Error;return n}function _b(){return 0}function xb(n){return function(){return n}}function cbe(n){n.x0=Math.round(n.x0),n.y0=Math.round(n.y0),n.x1=Math.round(n.x1),n.y1=Math.round(n.y1)}function ube(n,e,t,i,r){for(var s=n.children,o,a=-1,l=s.length,c=n.value&&(i-e)/n.value;++a<l;)o=s[a],o.y0=t,o.y1=r,o.x0=e,o.x1=e+=o.value*c}var fbe={depth:-1},l4={},t3={};function hbe(n){return n.id}function dbe(n){return n.parentId}function pbe(){var n=hbe,e=dbe,t;function i(r){var s=Array.from(r),o=n,a=e,l,c,f,d,m,v,b,x,w=new Map;if(t!=null){const _=s.map((E,C)=>mbe(t(E,C,r))),A=_.map(c4),T=new Set(_).add("");for(const E of A)T.has(E)||(T.add(E),_.push(E),A.push(c4(E)),s.push(t3));o=(E,C)=>_[C],a=(E,C)=>A[C]}for(f=0,l=s.length;f<l;++f)c=s[f],v=s[f]=new j0(c),(b=o(c,f,r))!=null&&(b+="")&&(x=v.id=b,w.set(x,w.has(x)?l4:v)),(b=a(c,f,r))!=null&&(b+="")&&(v.parent=b);for(f=0;f<l;++f)if(v=s[f],b=v.parent){if(m=w.get(b),!m)throw new Error("missing: "+b);if(m===l4)throw new Error("ambiguous: "+b);m.children?m.children.push(v):m.children=[v],v.parent=m}else{if(d)throw new Error("multiple roots");d=v}if(!d)throw new Error("no root");if(t!=null){for(;d.data===t3&&d.children.length===1;)d=d.children[0],--l;for(let _=s.length-1;_>=0&&(v=s[_],v.data===t3);--_)v.data=null}if(d.parent=fbe,d.eachBefore(function(_){_.depth=_.parent.depth+1,--l}).eachBefore(l9),d.parent=null,l>0)throw new Error("cycle");return d}return i.id=function(r){return arguments.length?(n=e3(r),i):n},i.parentId=function(r){return arguments.length?(e=e3(r),i):e},i.path=function(r){return arguments.length?(t=e3(r),i):t},i}function mbe(n){n=`${n}`;let e=n.length;return ZD(n,e-1)&&!ZD(n,e-2)&&(n=n.slice(0,-1)),n[0]==="/"?n:`/${n}`}function c4(n){let e=n.length;if(e<2)return"";for(;--e>1&&!ZD(n,e););return n.slice(0,e)}function ZD(n,e){if(n[e]==="/"){let t=0;for(;e>0&&n[--e]==="\\";)++t;if((t&1)===0)return!0}return!1}function gbe(n,e){return n.parent===e.parent?1:2}function n3(n){var e=n.children;return e?e[0]:n.t}function i3(n){var e=n.children;return e?e[e.length-1]:n.t}function vbe(n,e,t){var i=t/(e.i-n.i);e.c-=i,e.s+=t,n.c+=i,e.z+=t,e.m+=t}function ybe(n){for(var e=0,t=0,i=n.children,r=i.length,s;--r>=0;)s=i[r],s.z+=e,s.m+=e,e+=s.s+(t+=s.c)}function bbe(n,e,t){return n.a.parent===e.parent?n.a:t}function FS(n,e){this._=n,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}FS.prototype=Object.create(j0.prototype);function _be(n){for(var e=new FS(n,0),t,i=[e],r,s,o,a;t=i.pop();)if(s=t._.children)for(t.children=new Array(a=s.length),o=a-1;o>=0;--o)i.push(r=t.children[o]=new FS(s[o],o)),r.parent=t;return(e.parent=new FS(null,0)).children=[e],e}function xbe(){var n=gbe,e=1,t=1,i=null;function r(c){var f=_be(c);if(f.eachAfter(s),f.parent.m=-f.z,f.eachBefore(o),i)c.eachBefore(l);else{var d=c,m=c,v=c;c.eachBefore(function(A){A.x<d.x&&(d=A),A.x>m.x&&(m=A),A.depth>v.depth&&(v=A)});var b=d===m?1:n(d,m)/2,x=b-d.x,w=e/(m.x+b+x),_=t/(v.depth||1);c.eachBefore(function(A){A.x=(A.x+x)*w,A.y=A.depth*_})}return c}function s(c){var f=c.children,d=c.parent.children,m=c.i?d[c.i-1]:null;if(f){ybe(c);var v=(f[0].z+f[f.length-1].z)/2;m?(c.z=m.z+n(c._,m._),c.m=c.z-v):c.z=v}else m&&(c.z=m.z+n(c._,m._));c.parent.A=a(c,m,c.parent.A||d[0])}function o(c){c._.x=c.z+c.parent.m,c.m+=c.parent.m}function a(c,f,d){if(f){for(var m=c,v=c,b=f,x=m.parent.children[0],w=m.m,_=v.m,A=b.m,T=x.m,E;b=i3(b),m=n3(m),b&&m;)x=n3(x),v=i3(v),v.a=c,E=b.z+A-m.z-w+n(b._,m._),E>0&&(vbe(bbe(b,c,d),c,E),w+=E,_+=E),A+=b.m,w+=m.m,T+=x.m,_+=v.m;b&&!i3(v)&&(v.t=b,v.m+=A-_),m&&!n3(x)&&(x.t=m,x.m+=w-T,d=c)}return d}function l(c){c.x*=e,c.y=c.depth*t}return r.separation=function(c){return arguments.length?(n=c,r):n},r.size=function(c){return arguments.length?(i=!1,e=+c[0],t=+c[1],r):i?null:[e,t]},r.nodeSize=function(c){return arguments.length?(i=!0,e=+c[0],t=+c[1],r):i?[e,t]:null},r}function wbe(n,e,t,i,r){for(var s=n.children,o,a=-1,l=s.length,c=n.value&&(r-t)/n.value;++a<l;)o=s[a],o.x0=e,o.x1=i,o.y0=t,o.y1=t+=o.value*c}var Sbe=(1+Math.sqrt(5))/2;function Ebe(n,e,t,i,r,s){for(var o=[],a=e.children,l,c,f=0,d=0,m=a.length,v,b,x=e.value,w,_,A,T,E,C,R;f<m;){v=r-t,b=s-i;do w=a[d++].value;while(!w&&d<m);for(_=A=w,C=Math.max(b/v,v/b)/(x*n),R=w*w*C,E=Math.max(A/R,R/_);d<m;++d){if(w+=c=a[d].value,c<_&&(_=c),c>A&&(A=c),R=w*w*C,T=Math.max(A/R,R/_),T>E){w-=c;break}E=T}o.push(l={value:w,dice:v<b,children:a.slice(f,d)}),l.dice?ube(l,t,i,r,x?i+=b*w/x:s):wbe(l,t,i,x?t+=v*w/x:r,s),x-=w,f=d}return o}const Mbe=(function n(e){function t(i,r,s,o,a){Ebe(e,i,r,s,o,a)}return t.ratio=function(i){return n((i=+i)>1?i:1)},t})(Sbe);function Tbe(){var n=Mbe,e=!1,t=1,i=1,r=[0],s=_b,o=_b,a=_b,l=_b,c=_b;function f(m){return m.x0=m.y0=0,m.x1=t,m.y1=i,m.eachBefore(d),r=[0],e&&m.eachBefore(cbe),m}function d(m){var v=r[m.depth],b=m.x0+v,x=m.y0+v,w=m.x1-v,_=m.y1-v;w<b&&(b=w=(b+w)/2),_<x&&(x=_=(x+_)/2),m.x0=b,m.y0=x,m.x1=w,m.y1=_,m.children&&(v=r[m.depth+1]=s(m)/2,b+=c(m)-v,x+=o(m)-v,w-=a(m)-v,_-=l(m)-v,w<b&&(b=w=(b+w)/2),_<x&&(x=_=(x+_)/2),n(m,b,x,w,_))}return f.round=function(m){return arguments.length?(e=!!m,f):e},f.size=function(m){return arguments.length?(t=+m[0],i=+m[1],f):[t,i]},f.tile=function(m){return arguments.length?(n=c9(m),f):n},f.padding=function(m){return arguments.length?f.paddingInner(m).paddingOuter(m):f.paddingInner()},f.paddingInner=function(m){return arguments.length?(s=typeof m=="function"?m:xb(+m),f):s},f.paddingOuter=function(m){return arguments.length?f.paddingTop(m).paddingRight(m).paddingBottom(m).paddingLeft(m):f.paddingTop()},f.paddingTop=function(m){return arguments.length?(o=typeof m=="function"?m:xb(+m),f):o},f.paddingRight=function(m){return arguments.length?(a=typeof m=="function"?m:xb(+m),f):a},f.paddingBottom=function(m){return arguments.length?(l=typeof m=="function"?m:xb(+m),f):l},f.paddingLeft=function(m){return arguments.length?(c=typeof m=="function"?m:xb(+m),f):c},f}var r3,u4;function Abe(){if(u4)return r3;u4=1;var n=0,e=1,t=2,i=3;function r(o,a){return o+""+a}function s(){return .01*(.5-Math.random())}return r3=function(a,l){var c=a.margin,f=a.ratio,d=a.expansion,m=a.gridSize,v=a.speed,b,x,w,_,A,T,E=!0,C=l.length,R=C/i|0,O=new Float32Array(R),I=new Float32Array(R),L=1/0,N=1/0,V=-1/0,B=-1/0;for(b=0;b<C;b+=i)w=l[b+n],_=l[b+e],T=l[b+t]*f+c,L=Math.min(L,w-T),V=Math.max(V,w+T),N=Math.min(N,_-T),B=Math.max(B,_+T);var k=V-L,j=B-N,q=(L+V)/2,W=(N+B)/2;L=q-d*k/2,V=q+d*k/2,N=W-d*j/2,B=W+d*j/2;var G=new Array(m*m),K=G.length,te;for(te=0;te<K;te++)G[te]=[];var ie,F,X,ee,le,oe,ue,he,be,Te;for(b=0;b<C;b+=i)for(w=l[b+n],_=l[b+e],T=l[b+t]*f+c,ie=w-T,F=w+T,X=_-T,ee=_+T,le=Math.floor(m*(ie-L)/(V-L)),oe=Math.floor(m*(F-L)/(V-L)),ue=Math.floor(m*(X-N)/(B-N)),he=Math.floor(m*(ee-N)/(B-N)),be=le;be<=oe;be++)for(Te=ue;Te<=he;Te++)G[be*m+Te].push(b);var Ee,Ce=new Set,we,ae,ve,xe,me,Ie,Ne,ke,Fe,Ae,tt,se,Z;for(te=0;te<K;te++)for(Ee=G[te],b=0,A=Ee.length;b<A;b++)for(we=Ee[b],ve=l[we+n],me=l[we+e],Ne=l[we+t],x=b+1;x<A;x++)ae=Ee[x],Fe=r(we,ae),!(K>1&&Ce.has(Fe))&&(K>1&&Ce.add(Fe),xe=l[ae+n],Ie=l[ae+e],ke=l[ae+t],Ae=xe-ve,tt=Ie-me,se=Math.sqrt(Ae*Ae+tt*tt),Z=se<Ne*f+c+(ke*f+c),Z&&(E=!1,ae=ae/i|0,se>0?(O[ae]+=Ae/se*(1+Ne),I[ae]+=tt/se*(1+Ne)):(O[ae]+=k*s(),I[ae]+=j*s())));for(b=0,x=0;b<C;b+=i,x++)l[b+n]+=O[x]*.1*v,l[b+e]+=I[x]*.1*v;return{converged:E}},r3}var Cp={},f4;function Cbe(){if(f4)return Cp;f4=1;var n=3;return Cp.validateSettings=function(e){return"gridSize"in e&&typeof e.gridSize!="number"||e.gridSize<=0?{message:"the `gridSize` setting should be a positive number."}:"margin"in e&&typeof e.margin!="number"||e.margin<0?{message:"the `margin` setting should be 0 or a positive number."}:"expansion"in e&&typeof e.expansion!="number"||e.expansion<=0?{message:"the `expansion` setting should be a positive number."}:"ratio"in e&&typeof e.ratio!="number"||e.ratio<=0?{message:"the `ratio` setting should be a positive number."}:"speed"in e&&typeof e.speed!="number"||e.speed<=0?{message:"the `speed` setting should be a positive number."}:null},Cp.graphToByteArray=function(e,t){var i=e.order,r=new Float32Array(i*n),s=0;return e.forEachNode(function(o,a){typeof t=="function"&&(a=t(o,a)),r[s]=a.x,r[s+1]=a.y,r[s+2]=a.size||1,s+=n}),r},Cp.assignLayoutChanges=function(e,t,i){var r=0;e.forEachNode(function(s){var o={x:t[r],y:t[r+1]};typeof i=="function"&&(o=i(s,o)),e.mergeNodeAttributes(s,o),r+=n})},Cp.collectLayoutChanges=function(e,t,i){var r={},s=0;return e.forEachNode(function(o){var a={x:t[s],y:t[s+1]};typeof i=="function"&&(a=i(o,a)),r[o]=a,s+=n}),r},Cp.createWorker=function(t){var i=window.URL||window.webkitURL,r=t.toString(),s=i.createObjectURL(new Blob(["("+r+").call(this);"],{type:"text/javascript"})),o=new Worker(s);return i.revokeObjectURL(s),o},Cp}var s3,h4;function Rbe(){return h4||(h4=1,s3={gridSize:20,margin:5,expansion:1.1,ratio:1,speed:3}),s3}var o3,d4;function Dbe(){if(d4)return o3;d4=1;var n=Qf(),e=Abe(),t=Cbe(),i=Rbe(),r=500;function s(a,l,c){if(!n(l))throw new Error("graphology-layout-noverlap: the given graph is not a valid graphology instance.");typeof c=="number"?c={maxIterations:c}:c=c||{};var f=c.maxIterations||r;if(typeof f!="number"||f<=0)throw new Error("graphology-layout-force: you should provide a positive number of maximum iterations.");var d=Object.assign({},i,c.settings),m=t.validateSettings(d);if(m)throw new Error("graphology-layout-noverlap: "+m.message);var v=t.graphToByteArray(l,c.inputReducer),b=!1,x;for(x=0;x<f&&!b;x++)b=e(d,v).converged;if(a){t.assignLayoutChanges(l,v,c.outputReducer);return}return t.collectLayoutChanges(l,v,c.outputReducer)}var o=s.bind(null,!1);return o.assign=s.bind(null,!0),o3=o,o3}var Obe=Dbe();const Lbe=ro(Obe);(function(){try{if(typeof document<"u"){var n=document.createElement("style");n.appendChild(document.createTextNode(`._canvas_670zp_1 {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
}
._container_x9hyx_1 {
  border-radius: 50%;
  z-index: 9;
  position: relative;
  height: 175px;
  width: 175px;
  border: solid 5px var(--radial-menu-border);
  overflow: hidden;
  background: var(--radial-menu-background);
}

  ._container_x9hyx_1:before {
    content: ' ';
    background: var(--radial-menu-border);
    border-radius: 50%;
    height: 25px;
    width: 25px;
    position: absolute;
    z-index: 9;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
  }
._container_155l7_1 {
  transform-origin: bottom right;
  overflow: hidden;
  position: absolute;
  border: solid 1px var(--radial-menu-border);
}

  ._container_155l7_1._disabled_155l7_7 {
    opacity: 0.6;
  }

  ._container_155l7_1._disabled_155l7_7 ._contentContainer_155l7_10 {
      cursor: not-allowed;
    }

  ._container_155l7_1:not(._disabled_155l7_7) ._contentContainer_155l7_10 {
      cursor: pointer;
    }

  ._container_155l7_1:not(._disabled_155l7_7) ._contentContainer_155l7_10:hover {
        color: var(--radial-menu-active-color);
        background: var(--radial-menu-active-background);
      }

  ._container_155l7_1 ._contentContainer_155l7_10 {
    width: 200%;
    height: 200%;
    transform-origin: 50% 50%;
    border-radius: 50%;
    outline: none;
    transition: background 150ms ease-in-out;
    color: var(--radial-menu-color);
  }

  ._container_155l7_1 ._contentContainer_155l7_10 ._contentInner_155l7_35 {
      position: absolute;
      width: 100%;
      text-align: center;
    }

  ._container_155l7_1 ._contentContainer_155l7_10 ._contentInner_155l7_35 ._content_155l7_10 {
        display: inline-block;
      }

  ._container_155l7_1 svg {
    margin: 0 auto;
    fill: var(--radial-menu-active-color);
    height: 25px;
    width: 25px;
    display: block;
  }`)),document.head.appendChild(n)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();const pa={mass:10,tension:1e3,friction:300,precision:.1};function u9(n,e,t){const i=e.getLength(),r=n==="end"?i:i/2,s=n==="end"?t/2:0,o=(r-s)/i,a=e.getPointAt(o),l=e.getTangentAt(o);return[a,l]}function f9(n){return[n+6,2+n/1.5]}function G_(n){let e=Number.POSITIVE_INFINITY,t=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY,s=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY;for(const a of n)e=Math.min(e,a.position.x),t=Math.max(t,a.position.x),i=Math.min(i,a.position.y),r=Math.max(r,a.position.y),s=Math.min(s,a.position.z),o=Math.max(o,a.position.z);return{height:r-i,width:t-e,minX:e,maxX:t,minY:i,maxY:r,minZ:s,maxZ:o,x:(t+e)/2,y:(r+i)/2,z:(o+s)/2}}function Pbe(n,e){return e?n.reduce((t,i)=>{const r=i.data[e];return r&&t.set(r,[...t.get(r)||[],i]),t},new Map):new Map}function Ibe({nodes:n,clusterAttribute:e}){const t=new Map;if(e){const i=Pbe(n,e);for(const[r,s]of i){const o=G_(s);t.set(r,{label:r,nodes:s,position:o})}}return t}const Nbe=()=>{const n=new Ed(0,0,0),e=n.attributes.position.count,t=new Float32Array(e*3);for(let i=0;i<e;i++)t[i*3]=1,t[i*3+1]=1,t[i*3+2]=1;return n.setAttribute("color",new kt(t,3)),n},BS=(n,e)=>{const t=n.attributes.position.count,i=new Float32Array(t*3);for(let r=0;r<t;r++)i[r*3]=e.r,i[r*3+1]=e.g,i[r*3+2]=e.b;n.setAttribute("color",new kt(i,3))},p4=(n,e,t,i=[3,1])=>{const[r,s]=i,o=r+s,a=n.getLength(),l=Math.max(3,Math.floor(a/o)),c=[];for(let f=0;f<l;f++){const d=f/l,m=d+r/o/l;if(m>d&&d<1){const v=[],b=Math.max(3,Math.floor(8*(m-d)));for(let x=0;x<=b;x++){const w=d+(m-d)*(x/b);w<=1&&v.push(n.getPointAt(w))}if(v.length>=2){const x=new rT(v),w=new yd(x,Math.max(2,v.length-1),e,5,!1);BS(w,t),c.push(w)}}}return c.length>0?Db(c):new hn};function Ube({graph:n,attribute:e,defaultSize:t}){const i=new Map;return e?n.forEachNode((r,s)=>{const o=s.data?.[e];isNaN(o)&&console.warn(`Attribute ${o} is not a number for node ${s.id}`),i.set(r,o||0)}):console.warn("Attribute sizing configured but no attribute provided"),{getSizeForNode:r=>!e||!i?t:i.get(r)}}function kbe({graph:n}){const e=pde.degreeCentrality(n);return{ranks:e,getSizeForNode:t=>e[t]*20}}function zbe({graph:n}){const e=Mpe(n);return{ranks:e,getSizeForNode:t=>e[t]*80}}const Fbe={pagerank:zbe,centrality:kbe,attribute:Ube,none:({defaultSize:n})=>({getSizeForNode:e=>n})};function Bbe({type:n,...e}){const t=Fbe[n]?.(e);if(!t&&n!=="default")throw new Error(`Unknown sizing strategy: ${n}`);const{graph:i,minSize:r,maxSize:s}=e,o=new Map;let a,l;if(i.forEachNode((c,f)=>{let d;n==="default"?d=f.size||e.defaultSize:d=t.getSizeForNode(c),(a===void 0||d<a)&&(a=d),(l===void 0||d>l)&&(l=d),o.set(c,d)}),n!=="none"){const c=xT().domain([a,l]).rangeRound([r,s]);for(const[f,d]of o)o.set(f,c(d))}return o}function h9({nodePosition:n,labelType:e,camera:t}){return(i,r)=>{const s=e==="all"||e==="nodes"&&i==="node"||e==="edges"&&i==="edge";if(!s&&t&&n&&t?.position?.z/t?.zoom-n?.z>6e3)return!1;if(s)return!0;if(e==="auto"&&i==="node"){if(r>7)return!0;if(t&&n&&t.position.z/t.zoom-n.z<3e3)return!0}return!1}}function d9(n,e){switch(e){case"above":return n;case"below":return-n;default:return 0}}const CP=typeof window>"u";function Vbe(n,e,t){n.clear();const i=new Set;for(const r of e)try{i.has(r.id)||(n.addNode(r.id,r),i.add(r.id))}catch(s){console.error(`[Graph] Error adding node '${r.id}`,s)}for(const r of t)if(!(!i.has(r.source)||!i.has(r.target)))try{n.addEdge(r.source,r.target,r)}catch(s){console.error(`[Graph] Error adding edge '${r.source} -> ${r.target}`,s)}return n}function Gbe({graph:n,layout:e,sizingType:t,labelType:i,sizingAttribute:r,defaultNodeSize:s,minNodeSize:o,maxNodeSize:a,clusterAttribute:l}){const c=[],f=[],d=new Map,m=Bbe({graph:n,type:t,attribute:r,minSize:o,maxSize:a,defaultSize:s});n.nodes().length;const v=h9({labelType:i});return n.forEachNode((b,x)=>{const w=e.getNodePosition(b),{data:_,fill:A,icon:T,label:E,size:C,...R}=x,O=m.get(x.id),I=v("node",O),N=(n.inboundNeighbors(x.id)||[]).map(B=>n.getNodeAttributes(B)),V={...x,size:O,labelVisible:I,label:E,icon:T,fill:A,cluster:l?_[l]:void 0,parents:N,data:{...R,..._??{}},position:{...w,x:w.x||0,y:w.y||0,z:w.z||1}};d.set(x.id,V),c.push(V)}),n.forEachEdge((b,x)=>{const w=d.get(x.source),_=d.get(x.target);if(w&&_){const{data:A,id:T,label:E,size:C,...R}=x,O=v("edge",C);f.push({...x,id:T,label:E,labelVisible:O,size:C,data:{...R,id:T,...A||{}}})}}),{nodes:c,edges:f}}const a3=.7;function p9(n,e,t=0){const i=new de(n.x,n.y||0,n.z||0),r=new de(e.x,e.y||0,e.z||0),s=new de().addVectors(i,r).divideScalar(2);return s.setLength(s.length()+t)}function Hbe(n,e,t=-1){const i=n.clone(),r=e.clone(),s=new de().subVectors(r,i),o=s.length(),a=s.clone().normalize(),l=new de().subVectors(r,i).divideScalar(2),c=Math.abs(a.x)%1,f=new de(-a.y,a.x-c*a.z,c*a.y).normalize(),d=new de().add(i).add(l).add(f.multiplyScalar(o/4).multiplyScalar(t));return[n,d,e]}function H_(n,e,t,i,r,s){const o=m4(n,t,e),a=m4(t,n,i);return r?new sT(...Hbe(o,a,s)):new ML(o,a)}function m9(n){const e=W0(n),t=n.size,i=Math.PI/2,r=e.clone().add(new de(t*Math.cos(i),t*1.3*Math.sin(i),0)),s=10,o=[];for(let l=0;l<s;l++){const c=l/s*2*Math.PI;o.push(r.clone().add(new de(t*Math.cos(c),t*Math.sin(c),0)))}return new rT(o,!0)}function W0(n){return new de(n.position.x,n.position.y,n.position.z||0)}function m4(n,e,t){const i=n.distanceTo(e);return n.clone().add(e.clone().sub(n).multiplyScalar(t/i))}function g4(n,e){return{...n,position:{...n.position,x:n.position.x+e.x,y:n.position.y+e.y,z:n.position.z+e.z}}}function jbe({edge:n,edges:e,curved:t}){let i=t,r;const s=e.filter(o=>o.target===n.target&&o.source===n.source).map(o=>o.id);if(s.length>1){i=!0;const o=s.indexOf(n.id),a=o===0?1:1+o*.8,l=o%2===0?1:-1,c=a3*a;r=l*c}return n.data?.isAggregated&&e.length>1?{curved:!0,curveOffset:s.indexOf(n.id)===0?a3:-a3}:{curved:i,curveOffset:r}}function Wbe(n,e,t){const i=e.x-n.x,r=e.y-n.y,s=Math.atan2(r,i),o=t==="above"?i>=0?s+Math.PI/2:s-Math.PI/2:i>=0?s-Math.PI/2:s+Math.PI/2,a=7,l=Math.cos(o)*a,c=Math.sin(o)*a;return{x:l,y:c,z:0}}const g9=({actives:n=[],selections:e=[],collapsedNodeIds:t=[],theme:i})=>lde(r=>({theme:{...i,edge:{...i?.edge,label:{...i?.edge?.label,fontSize:i?.edge?.label?.fontSize??6}}},edges:[],nodes:[],collapsedNodeIds:t,clusters:new Map,panning:!1,draggingIds:[],actives:n,hoveredEdgeIds:[],edgeContextMenus:new Set,edgeMeshes:[],selections:e,hoveredNodeId:null,drags:{},graph:new wi({multi:!0}),setTheme:s=>r(o=>({...o,theme:s})),setClusters:s=>r(o=>({...o,clusters:s})),setEdgeContextMenus:s=>r(o=>({...o,edgeContextMenus:s})),setEdgeMeshes:s=>r(o=>({...o,edgeMeshes:s})),setPanning:s=>r(o=>({...o,panning:s})),setDrags:s=>r(o=>({...o,drags:s})),addDraggingId:s=>r(o=>({...o,draggingIds:[...o.draggingIds,s]})),removeDraggingId:s=>r(o=>({...o,draggingIds:o.draggingIds.filter(a=>a!==s)})),setActives:s=>r(o=>({...o,actives:s})),setSelections:s=>r(o=>({...o,selections:s})),setHoveredNodeId:s=>r(o=>({...o,hoveredNodeId:s})),setHoveredEdgeIds:s=>r(o=>({...o,hoveredEdgeIds:s})),setNodes:s=>r(o=>({...o,nodes:s,centerPosition:G_(s)})),setEdges:s=>r(o=>({...o,edges:s})),setNodePosition:(s,o)=>r(a=>{const l=a.nodes.find(v=>v.id===s),c=W0(l),d=new de(o.x,o.y,o.z).sub(c),m=[...a.nodes];if(a.selections?.includes(s))a.selections?.forEach(v=>{const b=a.nodes.find(x=>x.id===v);if(b){const x=a.nodes.indexOf(b);m[x]=g4(b,d)}});else{const v=a.nodes.indexOf(l);m[v]=g4(l,d)}return{...a,drags:{...a.drags,[s]:l},nodes:m}}),setCollapsedNodeIds:(s=[])=>r(o=>({...o,collapsedNodeIds:s})),setClusterPosition:(s,o)=>r(a=>{const l=new Map(a.clusters),c=l.get(s);if(c){const f=c.position,d=new de(o.x-f.x,o.y-f.y,o.z-(f.z??0)),m=[...a.nodes],v={...a.drags};m.forEach((w,_)=>{w.cluster===s&&(m[_]={...w,position:{...w.position,x:w.position.x+d.x,y:w.position.y+d.y,z:w.position.z+(d.z??0)}},v[w.id]=w)});const b=m.filter(w=>w.cluster===s),x=G_(b);return l.set(s,{...c,position:x}),{...a,drags:{...v,[s]:c},clusters:l,nodes:m}}return a})})),v9=g9({}),y9=CP?null:$.createContext(v9),$be=({children:n,store:e=v9})=>CP?n:eo.createElement(y9.Provider,{value:e},n),St=n=>{const e=$.useContext(y9);return FG(e,fde(n))},b9=$.createContext({controls:null,resetControls:()=>{},zoomIn:()=>{},zoomOut:()=>{},dollyIn:()=>{},dollyOut:()=>{},panLeft:()=>{},panRight:()=>{},panUp:()=>{},panDown:()=>{},freeze:()=>{},unFreeze:()=>{}}),IT=()=>{const n=$.useContext(b9);if(n===void 0)throw new Error("`useCameraControls` hook must be used within a `ControlsProvider` component");return n};Zr.install({THREE:{MOUSE:r8,Vector2:ut,Vector3:de,Vector4:Gn,Quaternion:Os,Matrix4:Kt,Spherical:qV,Box3:Vr,Sphere:ts,Raycaster:BL,MathUtils:{DEG2RAD:ZE?.DEG2RAD,clamp:ZE?.clamp}}});gG({ThreeCameraControls:Zr});const qbe=$.forwardRef(({mode:n="rotate",children:e,animated:t,disabled:i,minDistance:r=1e3,maxDistance:s=5e4,minZoom:o=1,maxZoom:a=100},l)=>{const c=$.useRef(null),f=Br(q=>q.camera),d=Br(q=>q.gl),m=n==="orbit",v=St(q=>q.setPanning),b=St(q=>q.draggingIds.length>0),x=$.useRef(0),[w,_]=$.useState(!1);yT((q,W)=>{c.current?.enabled&&c.current?.update(W),m&&(c.current.azimuthAngle+=20*W*ZE.DEG2RAD)},-1),$.useEffect(()=>()=>c.current?.dispose(),[]);const A=$.useCallback(()=>{c.current?.zoom(f.zoom/2,t)},[t,f.zoom]),T=$.useCallback(()=>{c.current?.zoom(-f.zoom/2,t)},[t,f.zoom]),E=$.useCallback(q=>{c.current?.dolly(q,t)},[t]),C=$.useCallback(q=>{c.current?.dolly(q,t)},[t]),R=$.useCallback(q=>{m||c.current?.truck(-.03*q.deltaTime,0,t)},[t,m]),O=$.useCallback(q=>{m||c.current?.truck(.03*q.deltaTime,0,t)},[t,m]),I=$.useCallback(q=>{m||c.current?.truck(0,.03*q.deltaTime,t)},[t,m]),L=$.useCallback(q=>{m||c.current?.truck(0,-.03*q.deltaTime,t)},[t,m]),N=$.useCallback(q=>{q.code==="Space"&&(n==="rotate"?c.current.mouseButtons.left=Zr.ACTION.TRUCK:c.current.mouseButtons.left=Zr.ACTION.ROTATE)},[n]),V=$.useCallback(q=>{q.code==="Space"&&(n==="rotate"?c.current.mouseButtons.left=Zr.ACTION.ROTATE:c.current.mouseButtons.left=Zr.ACTION.TRUCK)},[n]),[B,k]=$.useState(null);$.useEffect(()=>{CP||k({leftKey:new sS("ArrowLeft",100),rightKey:new sS("ArrowRight",100),upKey:new sS("ArrowUp",100),downKey:new sS("ArrowDown",100)})},[]),$.useEffect(()=>(!i&&B&&(B.leftKey.addEventListener("holding",O),B.rightKey.addEventListener("holding",R),B.upKey.addEventListener("holding",I),B.downKey.addEventListener("holding",L),window.addEventListener("keydown",N),window.addEventListener("keyup",V)),()=>{B&&(B.leftKey.removeEventListener("holding",O),B.rightKey.removeEventListener("holding",R),B.upKey.removeEventListener("holding",I),B.downKey.removeEventListener("holding",L),window.removeEventListener("keydown",N),window.removeEventListener("keyup",V))}),[i,N,V,L,O,R,I,B]),$.useEffect(()=>{const q=n==="orthographic";i?(c.current.mouseButtons.left=Zr.ACTION.NONE,c.current.mouseButtons.middle=Zr.ACTION.NONE,c.current.mouseButtons.wheel=Zr.ACTION.NONE):(c.current.mouseButtons.left=Zr.ACTION.TRUCK,c.current.mouseButtons.middle=Zr.ACTION.TRUCK,c.current.mouseButtons.wheel=q?Zr.ACTION.ZOOM:Zr.ACTION.DOLLY),q&&c.current&&(c.current.maxZoom=a,c.current.minZoom=o)},[i,n,o,a]),$.useEffect(()=>{const q=()=>v(!0),W=()=>v(!1),G=c.current;return G&&(G.addEventListener("control",q),G.addEventListener("controlend",W)),()=>{G&&(G.removeEventListener("control",q),G.removeEventListener("controlend",W))}},[c,v]),$.useEffect(()=>{b?(c.current.mouseButtons.left=Zr.ACTION.NONE,c.current.touches.one=Zr.ACTION.NONE):n==="rotate"?(c.current.mouseButtons.left=Zr.ACTION.ROTATE,c.current.touches.one=Zr.ACTION.TOUCH_ROTATE):(c.current.touches.one=Zr.ACTION.TOUCH_TRUCK,c.current.mouseButtons.left=Zr.ACTION.TRUCK)},[b,n]);const j=$.useMemo(()=>({controls:c.current,zoomIn:()=>A(),zoomOut:()=>T(),dollyIn:(q=1e3)=>E(q),dollyOut:(q=-1e3)=>C(q),panLeft:(q=100)=>O({deltaTime:q}),panRight:(q=100)=>R({deltaTime:q}),panDown:(q=100)=>L({deltaTime:q}),panUp:(q=100)=>I({deltaTime:q}),resetControls:q=>c.current?.normalizeRotations().reset(q),freeze:()=>{c.current.truckSpeed&&(x.current=c.current.truckSpeed),c.current.truckSpeed=0},unFreeze:()=>c.current.truckSpeed=x.current}),[A,T,O,R,L,I,c.current]);return $.useImperativeHandle(l,()=>j),ne.jsxs(b9.Provider,{value:j,children:[ne.jsx("threeCameraControls",{ref:q=>{c.current=q,w||_(!0)},args:[f,d.domElement],smoothTime:.1,minDistance:r,dollyToCursor:!0,maxDistance:s}),e]})});function _9(n,e){const t=e.position.z;n<t?n-=t:n+=t;const i=e.fov/e.zoom*Math.PI/180;return 2*Math.tan(i/2)*Math.abs(n)}function Xbe(n,e){return _9(n,e)*e.aspect}function v4(n,e){const t=Xbe(1,n),i=_9(1,n),r={x0:n?.position?.x-t/2,x1:n?.position?.x+t/2,y0:n?.position?.y-i/2,y1:n?.position?.y+i/2};return e?.x>r.x0&&e?.x<r.x1&&e?.y>r.y0&&e?.y<r.y1}function y4(n,e){return e.reduce((t,i)=>Math.abs(i-n%Math.PI)<Math.abs(t-n%Math.PI)?i:t)}function Ybe(n,e){const t=y4(n,[0,Math.PI]),i=y4(e,[Math.PI/2,3*Math.PI/2]);return{horizontalRotation:t-n%Math.PI,verticalRotation:i-e%Math.PI}}function x9({nodeId:n,nodes:e,edges:t,currentHiddenNodes:i,currentHiddenEdges:r}){const s=[],o=[],a=i.map(v=>v.id),l=r.map(v=>v.id),c=t.filter(v=>v.source===n),f=c.map(v=>v.target);o.push(...c);for(const v of f){const b=t.filter(w=>w.target===v&&w.source!==n);let x=!1;if((b.length===0||b.length>0&&!a.includes(v)&&b.map(_=>_.id).every(_=>l.includes(_)))&&(x=!0),x){const w=e.find(A=>A.id===v);w&&s.push(w);const _=x9({nodeId:v,nodes:e,edges:t,currentHiddenEdges:o,currentHiddenNodes:s});o.push(..._.hiddenEdges),s.push(..._.hiddenNodes)}}const d=Object.values(o.reduce((v,b)=>({...v,[b.id]:b}),{})),m=Object.values(s.reduce((v,b)=>({...v,[b.id]:b}),{}));return{hiddenEdges:d,hiddenNodes:m}}const Zbe=({collapsedIds:n,nodes:e,edges:t})=>{const i=[],r=[];for(const c of n){const{hiddenEdges:f,hiddenNodes:d}=x9({nodeId:c,nodes:e,edges:t,currentHiddenEdges:r,currentHiddenNodes:i});i.push(...d),r.push(...f)}const s=i.map(c=>c.id),o=r.map(c=>c.id),a=e.filter(c=>!s.includes(c.id)),l=t.filter(c=>!o.includes(c.id));return{visibleNodes:a,visibleEdges:l}},vS=50,Kbe=({animated:n,disabled:e,layoutType:t})=>{const i=St(x=>x.nodes),[r,s]=$.useState(!1),o=Br(x=>x.invalidate),{controls:a}=IT(),l=Br(x=>x.camera),c=$.useRef(!1),f=$.useCallback(async(x,w)=>{const _=w?.animated!==void 0?w?.animated:!0,A=w?.centerOnlyIfNodesNotInView!==void 0?w?.centerOnlyIfNodesNotInView:!1;if(!c.current||!A||A&&x?.some(T=>!v4(l,T.position))){const{x:T,y:E,z:C}=G_(x);await a.normalizeRotations().setTarget(T,E,C,_),r||s(!0),o()}},[o,a,i]),d=$.useCallback(async(x,w={animated:!0,fitOnlyIfNodesNotInView:!1})=>{const{fitOnlyIfNodesNotInView:_}=w;if(!_||_&&x?.some(A=>!v4(l,A.position))){const{minX:A,maxX:T,minY:E,maxY:C,minZ:R,maxZ:O}=G_(x);if(!t.includes("3d")){const{horizontalRotation:I,verticalRotation:L}=Ybe(a?.azimuthAngle,a?.polarAngle);a?.rotate(I,L,!0)}await a?.zoomTo(1,w?.animated),await a?.fitToBox(new Vr(new de(A,E,R),new de(T,C,O)),w?.animated,{cover:!1,paddingLeft:vS,paddingRight:vS,paddingBottom:vS,paddingTop:vS})}},[l,a,t]),m=$.useCallback(x=>{let w=null;return x?.length&&(w=x.reduce((_,A)=>{const T=i.find(E=>E.id===A);if(T)_.push(T);else throw new Error(`Attempted to center ${A} but it was not found in the nodes`);return _},[])),w},[i]),v=$.useCallback((x,w)=>{const _=m(x);f(_||i,{animated:n,centerOnlyIfNodesNotInView:w?.centerOnlyIfNodesNotInView})},[n,f,m,i]),b=$.useCallback(async(x,w)=>{const _=m(x);await d(_||i,{animated:n,...w})},[n,d,m,i]);return $.useLayoutEffect(()=>{async function x(){a&&i?.length&&(c.current||(await f(i,{animated:!1}),await d(i,{animated:!1}),c.current=!0))}x()},[a,f,i,n,l,d]),{centerNodes:f,centerNodesById:v,fitNodesInViewById:b,isCentered:r}},Qbe=({animated:n,color:e="#D8E6EA",length:t,opacity:i=.5,position:r,rotation:s,size:o=1,onActive:a,onContextMenu:l})=>{const c=$.useMemo(()=>new yt(e),[e]),f=$.useRef(null),d=St(w=>w.draggingIds.length>0),m=St(w=>w.centerPosition),[{pos:v,arrowOpacity:b}]=da(()=>({from:{pos:m?[m.x,m.y,m.z]:[0,0,0],arrowOpacity:0},to:{pos:[r.x,r.y,r.z],arrowOpacity:i},config:{...pa,duration:n&&!d?void 0:0}}),[n,d,i,r]),x=$.useCallback(()=>{const w=new de(0,1,0);f.current?.quaternion.setFromUnitVectors(w,s)},[s,f]);return $.useEffect(()=>x(),[x]),ne.jsxs(ar.mesh,{position:v,ref:f,scale:[1,1,1],onPointerOver:()=>a(!0),onPointerOut:()=>a(!1),onPointerDown:w=>{w.nativeEvent.buttons===2&&w.stopPropagation()},onContextMenu:w=>{w.nativeEvent.preventDefault(),w.stopPropagation(),l()},children:[ne.jsx("cylinderGeometry",{args:[0,o,t,20,1,!0],attach:"geometry"}),ne.jsx(ar.meshBasicMaterial,{attach:"material",color:c,depthTest:!1,opacity:b,transparent:!0,side:yr,fog:!0})]})},w9=({draggable:n,set:e,position:t,bounds:i,onDragStart:r,onDragEnd:s})=>{const o=Br(w=>w.camera),a=Br(w=>w.raycaster),l=Br(w=>w.size),c=Br(w=>w.gl),{mouse2D:f,mouse3D:d,offset:m,normal:v,plane:b}=$.useMemo(()=>({mouse2D:new ut,mouse3D:new de,offset:new de,normal:new de,plane:new Tf}),[]),x=$.useMemo(()=>c.domElement.getBoundingClientRect(),[c.domElement,l]);return m0e({onDragStart:({event:w})=>{const{eventObject:_,point:A}=w;m.setFromMatrixPosition(_.matrixWorld).sub(A),d.copy(A),r()},onDrag:({xy:w,buttons:_,cancel:A})=>{if(_!==1){A();return}const T=(w[0]-(x?.left??0))/l.width*2-1,E=-((w[1]-(x?.top??0))/l.height)*2+1;f.set(T,E),a.setFromCamera(f,o),o.getWorldDirection(v).negate(),b.setFromNormalAndCoplanarPoint(v,d),a.ray.intersectPlane(b,d);const C=new de(t.x,t.y,t.z).copy(d).add(m);if(i){const R=new de((i.minX+i.maxX)/2,(i.minY+i.maxY)/2,(i.minZ+i.maxZ)/2),O=(i.maxX-i.minX)/2,I=C.clone().sub(R);I.length()>O&&(I.normalize().multiplyScalar(O),C.copy(R).add(I))}return e(C)},onDragEnd:s},{drag:{enabled:n,threshold:10}})},RP=({sensitivity:n=7,interval:e=50,timeout:t=0,disabled:i,onPointerOver:r,onPointerOut:s})=>{const o=$.useRef(!1),a=$.useRef(null),l=$.useRef(0),c=$.useRef({x:null,y:null,px:null,py:null}),f=$.useCallback(w=>{c.current.x=w.clientX,c.current.y=w.clientY},[]),d=$.useCallback(w=>{a.current=clearTimeout(a.current);const{px:_,x:A,py:T,y:E}=c.current;Math.abs(_-A)+Math.abs(T-E)<n?(l.current=1,r(w)):(c.current.px=A,c.current.py=E,a.current=setTimeout(()=>d(w),e))},[e,r,n]),m=$.useCallback(()=>{clearTimeout(a.current),typeof window<"u"&&document.removeEventListener("mousemove",f,!1)},[f]),v=$.useCallback(w=>{i||(o.current=!0,m(),l.current!==1&&(c.current.px=w.pointer.x,c.current.py=w.pointer.y,typeof window<"u"&&document.addEventListener("mousemove",f,!1),a.current=setTimeout(()=>d(w),t)))},[m,d,i,f,t]),b=$.useCallback(w=>{a.current=clearTimeout(a.current),l.current=0,s(w)},[s]),x=$.useCallback(w=>{o.current=!1,m(),l.current===1&&(a.current=setTimeout(()=>b(w),t))},[m,b,t]);return{pointerOver:v,pointerOut:x}},Jbe=({outerRadius:n,innerRadius:e,padding:t,normalizedFill:i,normalizedStroke:r,opacity:s,animated:o,theme:a})=>{const{opacity:l}=da({from:{opacity:0},to:{opacity:s},config:{...pa,duration:o?void 0:0}});return ne.jsxs(ne.Fragment,{children:[ne.jsxs("mesh",{children:[ne.jsx("ringGeometry",{attach:"geometry",args:[n,0,128]}),ne.jsx(ar.meshBasicMaterial,{attach:"material",color:i,transparent:!0,depthTest:!1,opacity:a.cluster?.fill?l:0,side:yr,fog:!0})]}),ne.jsxs("mesh",{children:[ne.jsx("ringGeometry",{attach:"geometry",args:[n,e+t,128]}),ne.jsx(ar.meshBasicMaterial,{attach:"material",color:r,transparent:!0,depthTest:!1,opacity:l,side:yr,fog:!0})]})]})},$0=({text:n,fontSize:e=7,fontUrl:t,color:i="#2A6475",opacity:r=1,stroke:s,backgroundColor:o,backgroundOpacity:a=1,padding:l=1,strokeColor:c,strokeWidth:f=0,radius:d=.1,active:m,ellipsis:v=75,rotation:b})=>{const x=v&&!m?gve(n,v):n,w=$.useMemo(()=>new yt(i),[i]),_=$.useMemo(()=>s?new yt(s):void 0,[s]),A=$.useMemo(()=>o?new yt(o):null,[o]),T=$.useMemo(()=>c?new yt(c):null,[c]),E=Math.min(d*e,3),R=x.length*e*.6+l*2,O=e*1.2+l*2,I={width:R,height:O},L=m?2:1;return ne.jsxs(kH,{position:[0,0,L],renderOrder:1,children:[f>0&&T&&A&&ne.jsx("mesh",{position:[0,0,10],children:ne.jsx(j5,{args:[I.width+f,I.height+f,.1],radius:E,smoothness:8,"material-color":T,"material-transparent":!0,"material-opacity":a})}),A&&ne.jsx("mesh",{position:[0,0,10],children:ne.jsx(j5,{args:[I.width,I.height,.1],radius:E,smoothness:8,"material-color":A,"material-transparent":!0,"material-opacity":a})}),ne.jsx(fve,{position:[0,0,11],font:t,fontSize:e,color:w,fillOpacity:r,textAlign:"center",outlineWidth:s?1:0,outlineColor:_,depthOffset:0,maxWidth:100,overflowWrap:"break-word",rotation:b,children:x})]})},e_e=({animated:n,position:e,padding:t=40,labelFontUrl:i,disabled:r,radius:s=2,nodes:o,label:a,onClick:l,onPointerOver:c,onPointerOut:f,draggable:d=!1,onDragged:m,onRender:v})=>{const b=St(oe=>oe.theme),x=Math.max(e.width,e.height)/2,w=x-s+t,[_,A]=$.useState(!1),T=St(oe=>oe.centerPosition),E=St(oe=>oe.nodes),C=IT(),R=St(oe=>oe.draggingIds),O=R.includes(a),I=R.length>0,L=St(oe=>oe.actives?.some(ue=>o.some(he=>he.id===ue))),N=St(oe=>oe.hoveredNodeId),V=St(oe=>oe.selections?.some(ue=>o.some(he=>he.id===ue))),k=St(oe=>oe.selections?.length>0)?V||_||L?b.cluster?.selectedOpacity:b.cluster?.inactiveOpacity:b.cluster?.opacity,j=$.useMemo(()=>{const oe=[0,-w,2],ue=b.cluster?.label?.offset;return ue?[oe[0]-ue[0],oe[1]-ue[1],oe[2]-ue[2]]:oe},[w,b.cluster?.label?.offset]),{circlePosition:q}=da({from:{circlePosition:[T.x,T.y,-1]},to:{circlePosition:e?[e.x,e.y,-1]:[0,0,-1]},config:{...pa,duration:n&&!I?void 0:0}}),W=$.useMemo(()=>new yt(b.cluster?.stroke),[b.cluster?.stroke]),G=$.useMemo(()=>new yt(b.cluster?.fill),[b.cluster?.fill]),K=St(oe=>oe.addDraggingId),te=St(oe=>oe.removeDraggingId),ie=St(oe=>oe.setClusterPosition),F=w9({draggable:d&&!N,position:{x:e.x,y:e.y,z:-1},set:oe=>ie(a,oe),onDragStart:()=>{K(a),A(!0)},onDragEnd:()=>{te(a),A(!1);const oe=E.filter(ue=>ue.cluster===a);m?.({nodes:oe,label:a})}});em(_&&!I&&l!==void 0,"pointer"),em(_&&d&&!O&&l===void 0,"grab"),em(O,"grabbing");const{pointerOver:X,pointerOut:ee}=RP({disabled:r,onPointerOver:oe=>{A(!0),C.freeze(),c?.({nodes:o,label:a},oe)},onPointerOut:oe=>{A(!1),C.unFreeze(),f?.({nodes:o,label:a},oe)}});return $.useMemo(()=>b.cluster&&ne.jsx(ar.group,{userData:{id:a,type:"cluster"},position:q,onPointerOver:X,onPointerOut:ee,onClick:oe=>{!r&&!O&&l?.({nodes:o,label:a},oe)},...F(),children:v?v({label:{position:j,text:a,opacity:k,fontUrl:i},opacity:k,outerRadius:w,innerRadius:x,padding:t,theme:b}):ne.jsxs(ne.Fragment,{children:[ne.jsx(Jbe,{outerRadius:w,innerRadius:x,padding:t,normalizedFill:G,normalizedStroke:W,opacity:k,animated:n,theme:b}),b.cluster?.label&&ne.jsx(ar.group,{position:j,children:ne.jsx($0,{text:a,opacity:k,fontUrl:i,stroke:b.cluster.label.stroke,active:!1,color:b.cluster?.label.color,fontSize:b.cluster?.label.fontSize??12})})]})}),[b,q,X,ee,w,G,x,t,W,j,a,k,i,r,l,o,F,O,v,n])},t_e=({id:n,curve:e,opacity:t=1,size:i=1,color:r="#000",animated:s,onPointerOver:o,onPointerOut:a,onClick:l,onContextMenu:c})=>{const{scale:f,loopOpacity:d}=da({from:{scale:[1e-5,1e-5,1e-5],loopOpacity:0},to:{scale:[i,i,i],loopOpacity:t},config:{...pa,duration:s?void 0:0}}),m=$.useMemo(()=>new yt(r),[r]);return ne.jsxs(ar.mesh,{userData:{id:n,type:"edge"},renderOrder:-1,onPointerOver:o,onPointerOut:a,onClick:l,onPointerDown:v=>{v.nativeEvent.buttons===2&&(v.nativeEvent.preventDefault(),v.stopPropagation(),c())},scale:f,children:[ne.jsx("tubeGeometry",{attach:"geometry",args:[e,128,i/2,8,!0]}),ne.jsx(ar.meshBasicMaterial,{attach:"material",opacity:d,fog:!0,transparent:!0,depthTest:!1,color:m})]})},n_e=`
  varying vec2 vUv;
  void main() {
    vUv = uv;
    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
  }
`,i_e=`
  uniform vec3 color;
  uniform float opacity;
  uniform float dashSize;
  uniform float gapSize;
  uniform float lineLength;
  varying vec2 vUv;

  void main() {
    float totalSize = dashSize + gapSize;
    float position = mod(vUv.x * lineLength, totalSize);

    if (position > dashSize) {
      discard;
    }

    gl_FragColor = vec4(color, opacity);
  }
`,r_e=({curveOffset:n,animated:e,color:t="#000",curve:i,curved:r=!1,dashed:s=!1,dashArray:o=[3,1],id:a,opacity:l=1,size:c=1,renderOrder:f=-1,onContextMenu:d,onClick:m,onPointerOver:v,onPointerOut:b})=>{const x=$.useRef(null),w=St(R=>R.draggingIds.length>0),_=$.useMemo(()=>new yt(t),[t]),A=St(R=>R.centerPosition),T=$.useRef(!1),E=$.useMemo(()=>{if(!s)return null;const[R,O]=o;return new Al({uniforms:{color:{value:_},opacity:{value:l},dashSize:{value:R},gapSize:{value:O},lineLength:{value:i.getLength()}},vertexShader:n_e,fragmentShader:i_e,transparent:!0,depthTest:!1})},[s,_,l,i,o]),{lineOpacity:C}=da({from:{lineOpacity:0},to:{lineOpacity:l},config:{...pa,duration:e?void 0:0}});return da(()=>{const R=i.getPoint(0),O=i.getPoint(1);return{from:{fromVertices:T.current?[O?.x,O?.y,O?.z||0]:[A?.x,A?.y,A?.z||0],toVertices:[R?.x,R?.y,R?.z||0]},to:{fromVertices:[R?.x,R?.y,R?.z||0],toVertices:[O?.x,O?.y,O?.z||0]},onChange:I=>{const{fromVertices:L,toVertices:N}=I.value,V=new de(...L),B=new de(...N),k=H_(V,0,B,0,r,n);if(x.current){const j=s?c*.4:c/2;x.current.copy(new yd(k,20,j,5,!1))}},config:{...pa,duration:e&&!w?void 0:0}}},[e,w,i,c,s,r,n]),$.useEffect(()=>{T.current=!0},[]),ne.jsxs("mesh",{userData:{id:a,type:"edge"},renderOrder:f,onPointerOver:v,onPointerOut:b,onClick:m,onPointerDown:R=>{R.nativeEvent.buttons===2&&R.stopPropagation()},onContextMenu:R=>{R.nativeEvent.preventDefault(),R.stopPropagation(),d()},children:[ne.jsx("tubeGeometry",{attach:"geometry",ref:x}),s?ne.jsx("primitive",{attach:"material",object:E}):ne.jsx(ar.meshBasicMaterial,{attach:"material",opacity:C,fog:!0,transparent:!0,color:_})]})},b4=3,s_e=({animated:n,arrowPlacement:e="end",contextMenu:t,disabled:i,labelPlacement:r="inline",id:s,interpolation:o,labelFontUrl:a,onContextMenu:l,onClick:c,onPointerOver:f,onPointerOut:d,subLabelPlacement:m="below"})=>{const v=St(Z=>Z.theme),b=St(Z=>Z.draggingIds.length>0),[x,w]=$.useState(!1),[_,A]=$.useState(!1),T=St(Z=>Z.edges),E=T.find(Z=>Z.id===s),{target:C,source:R,label:O,subLabel:I,labelVisible:L=!1,size:N=1,fill:V,dashed:B=!1,dashArray:k=[3,1]}=E,j=E.subLabelPlacement||m,q=St(Z=>Z.nodes.find(ye=>ye.id===R)),W=St(Z=>Z.nodes.find(ye=>ye.id===C)),G=q.id===W.id,K=(N+v.edge.label.fontSize)/2,[te,ie]=$.useMemo(()=>f9(N),[N]),F=E.interpolation||o,X=E.arrowPlacement||e,{curveOffset:ee,curved:le}=$.useMemo(()=>jbe({edge:E,edges:T,curved:F==="curved"}),[E,T,F]),[oe,ue,he]=$.useMemo(()=>{const Z=W0(q),ye=q.size,Y=W0(W),J=W.size;let re=H_(Z,ye,Y,J,le,ee);const[ge,_e]=u9(X,re,te);return X==="end"&&(re=H_(Z,ye,ge,0,le,ee)),[re,ge,_e]},[q,W,le,ee,X,te]),be=$.useMemo(()=>{let Z=p9(q.position,W.position,d9(K,r));if(le){const ye=new de().subVectors(Z,oe.getPoint(.5));switch(r){case"above":ye.y=ye.y-b4;break;case"below":ye.y=ye.y+b4;break}Z=Z.sub(ye)}return Z},[q.position,W.position,K,r,le,oe]),Te=St(Z=>Z.centerPosition),Ee=St(Z=>Z.selections?.includes(s)),Ce=St(Z=>Z.selections?.length),we=St(Z=>Z.actives?.includes(s)),ae=x||we||Ee,ve=Ce?Ee||we?v.edge.selectedOpacity:v.edge.inactiveOpacity:v.edge.opacity,xe=$.useMemo(()=>Wbe(q.position,W.position,j),[q.position,W.position,j]),[{labelPosition:me}]=da(()=>({from:{labelPosition:Te?[Te.x,Te.y,Te.z]:[0,0,0]},to:{labelPosition:[be.x,be.y,be.z]},config:{...pa,duration:n&&!b?void 0:0}}),[be,n,b]),Ie=$.useMemo(()=>new Io(0,0,r==="natural"?0:Math.atan((W.position.y-q.position.y)/(W.position.x-q.position.x))),[W.position.x,W.position.y,q.position.x,q.position.y,r]);em(x&&!b&&c!==void 0,"pointer");const{pointerOver:Ne,pointerOut:ke}=RP({disabled:i,onPointerOver:Z=>{w(!0),f?.(E,Z)},onPointerOut:Z=>{w(!1),d?.(E,Z)}}),Fe=$.useMemo(()=>m9(q),[q]),Ae=$.useMemo(()=>{if(X==="none")return null;let Z,ye;return G&&Fe?X==="mid"?(Z=Fe.getPointAt(.25),ye=Fe.getTangentAt(.25)):(Z=Fe.getPointAt(.58),ye=Fe.getTangentAt(.58)):(Z=ue,ye=he),ne.jsx(Qbe,{animated:n,color:ae?v.arrow.activeFill:V||v.arrow.fill,length:te,opacity:ve,position:Z,rotation:ye,size:ie,onActive:w,onContextMenu:()=>{i||(A(!0),l?.(E))}})},[V,n,te,X,ue,he,ie,i,E,ae,l,ve,v.arrow.activeFill,v.arrow.fill,G,Fe]),tt=$.useMemo(()=>L&&O&&ne.jsxs(ar.group,{position:me,onContextMenu:()=>{i||(A(!0),l?.(E))},onPointerOver:Ne,onPointerOut:ke,children:[ne.jsx($0,{text:O,ellipsis:15,fontUrl:a,stroke:v.edge.label.stroke,color:ae?v.edge.label.activeColor:v.edge.label.color,opacity:ve,fontSize:v.edge.label.fontSize,rotation:Ie,active:ae}),I&&ne.jsx("group",{position:[xe.x,xe.y,0],children:ne.jsx($0,{text:I,ellipsis:15,fontUrl:a,stroke:v.edge.subLabel?.stroke||v.edge.label.stroke,active:ae,color:ae?v.edge.subLabel?.activeColor||v.edge.label.activeColor:v.edge.subLabel?.color||v.edge.label.color,opacity:ve,fontSize:v.edge.subLabel?.fontSize||v.edge.label.fontSize*.8,rotation:Ie})})]}),[i,E,ae,O,I,a,me,xe,Ie,L,l,ke,Ne,ve,v.edge.label.activeColor,v.edge.label.color,v.edge.label.fontSize,v.edge.label.stroke,v.edge.subLabel?.stroke,v.edge.subLabel?.activeColor,v.edge.subLabel?.color,v.edge.subLabel?.fontSize]),se=$.useMemo(()=>_&&t&&ne.jsx(bP,{prepend:!0,center:!0,position:be,children:t({data:E,onClose:()=>A(!1)})}),[_,t,be,E]);return ne.jsxs("group",{position:[0,0,ae?1:0],children:[G&&Fe?ne.jsx(t_e,{id:s,curve:Fe,size:N,animated:n,color:ae?v.edge.activeFill:V||v.edge.fill,opacity:ve,onClick:Z=>{i||c?.(E,Z)},onContextMenu:()=>{i||(A(!0),l?.(E))},onPointerOver:Ne,onPointerOut:ke}):ne.jsx(r_e,{curveOffset:ee,animated:n,color:ae?v.edge.activeFill:V||v.edge.fill,curve:oe,curved:le,dashed:B,dashArray:k,id:s,opacity:ve,size:N,renderOrder:ae?0:-1,onClick:Z=>{i||c?.(E,Z)},onPointerOver:Ne,onPointerOut:ke,onContextMenu:()=>{i||(A(!0),l?.(E))}}),Ae,tt,se]})},o_e=({animated:n,color:e,contextMenu:t,edge:i,labelFontUrl:r,labelPlacement:s="inline",opacity:o,active:a})=>{const l=St(V=>V.theme),{target:c,source:f,label:d,labelVisible:m=!1,size:v=1}=i,b=St(V=>V.nodes),[x,w]=$.useMemo(()=>[b.find(V=>V.id===f),b.find(V=>V.id===c)],[b,f,c]),_=St(V=>V.draggingIds.length>0),A=$.useMemo(()=>(v+l.edge.label.fontSize)/2,[v,l.edge.label.fontSize]),T=$.useMemo(()=>p9(x.position,w.position,d9(A,s)),[x.position,w.position,A,s]),E=St(V=>V.edgeContextMenus),C=St(V=>V.setEdgeContextMenus),[{labelPosition:R}]=da(()=>({from:{labelPosition:[0,0,0]},to:{labelPosition:[T.x,T.y,T.z]},config:{...pa,duration:n&&!_?void 0:0}}),[T,n,_]),O=$.useCallback(V=>{const B=new Set(E);B.delete(V),C(B)},[E,C]),I=$.useMemo(()=>new Io(0,0,s==="natural"?0:Math.atan((w.position.y-x.position.y)/(w.position.x-x.position.x))),[w.position.x,w.position.y,x.position.x,x.position.y,s]),L=$.useMemo(()=>({prepend:!0,center:!0,position:T}),[T]),N=$.useMemo(()=>({text:d,ellipsis:15,fontUrl:r,stroke:l.edge.label.stroke,color:e,opacity:o,fontSize:l.edge.label.fontSize,rotation:I,active:a}),[d,r,l.edge.label.stroke,e,o,l.edge.label.fontSize,I,a]);return ne.jsxs("group",{children:[m&&d&&ne.jsx(ar.group,{position:R,children:ne.jsx($0,{...N})}),t&&E.has(i.id)&&ne.jsx(bP,{...L,children:t({data:i,onClose:()=>O(i.id)})})]})};function a_e(n,e){const t=$.useRef(n),i=$.useRef(null);$.useEffect(()=>{t.current=n;const o=n.getAttribute("position");i.current=new Float32Array(o.array.length)},[n]);const r=$.useCallback(()=>{const o=t.current.getAttribute("position");return{from:new Float32Array(o.array.length),to:o.array}},[]),s=$.useCallback(o=>{const a=i.current;a.set(o);const l=new li(a,3,!1);t.current.setAttribute("position",l),l.needsUpdate=!0},[]);da(()=>{if(!e)return null;const o=r();return{from:{positions:o.from},to:{positions:o.to},onChange:a=>{s(a.value.positions)},config:{...pa,duration:e?void 0:0}}},[e,r,s])}function l_e(n,e,t){const[{activeOpacity:i,inactiveOpacity:r}]=da(()=>({from:{activeOpacity:0,inactiveOpacity:0},to:{activeOpacity:e?t.edge.selectedOpacity:t.edge.opacity,inactiveOpacity:e?t.edge.inactiveOpacity:t.edge.opacity},config:{...pa,duration:n?void 0:0}}),[n,e,t]);return{activeOpacity:i,inactiveOpacity:r}}function c_e(n,e,t){const i=$.useRef(n);$.useEffect(()=>{i.current=n},[n]);const r=St(m=>m.edgeContextMenus),s=St($.useCallback(m=>m.setEdgeContextMenus,[])),o=St($.useCallback(m=>m.setHoveredEdgeIds,[])),a=$.useRef(!1),l=$.useCallback(()=>{a.current=!0},[]),c=$.useRef(!1),f=$.useCallback(()=>{c.current=!0},[]),d=$.useCallback((m,v)=>{const{onClick:b,onContextMenu:x,onPointerOver:w,onPointerOut:_}=i.current;if(b&&a.current&&!t){a.current=!1;for(const T of v)b(T)}if((e||x)&&c.current&&!t){c.current=!1;const T=new Set(r);let E=!1;for(const C of v)r.has(C.id)||(T.add(C.id),E=!0,x?.(C));E&&s(T)}const A=v.length>0?v.map(T=>T.id):[];o(A),w&&v.filter(E=>!m.includes(E)).forEach(E=>{w(E)}),_&&m.filter(E=>!v.includes(E)).forEach(E=>{_(E)})},[e,t,r,s,o]);return{handleClick:l,handleContextMenu:f,handleIntersections:d}}const _4=Nbe();function u_e(n,e){const t=$.useRef(null),i=St(l=>l.theme);St(l=>{t.current=l});const r=$.useRef(new Map),s=$.useRef(null),o=$.useCallback(l=>{const c=[],f=r.current,{nodes:d}=t.current,m=new Map(d.map(v=>[v.id,v]));return n!=="none"&&!s.current&&(s.current=new lv(0,1,1,20,1,!0)),l.forEach(v=>{const{target:b,source:x,size:w=1}=v,_=m.get(x),A=m.get(b);if(!_||!A)return;const T=`${_.position.x},${_.position.y},${A.position.x},${A.position.y},${w}`,E=_.id===A.id,R=(v.interpolation||e)==="curved",O=v.arrowPlacement||n;if(f.has(T)){c.push(f.get(T));return}const I=W0(_),L=_.size,N=W0(A),V=A.size;let B;E?B=m9(_):B=H_(I,L,N,V,R);const k=v.dashed,j=k?w*.4:w/2;let q;if(k?q=p4(B,j,new yt(v.fill??i.edge.fill),v.dashArray):q=new yd(B,20,j,5,!1),O==="none"){if(!k){const le=new yt(v.fill??i.edge.fill);BS(q,le)}c.push(q),f.set(T,q);return}const[W,G]=f9(w),K=s.current.clone();K.scale(G,W,G);let te,ie;E?O==="mid"?(te=B.getPointAt(.25),ie=B.getTangentAt(.25)):(te=B.getPointAt(.58),ie=B.getTangentAt(.58)):[te,ie]=u9(O,B,W);const F=new Os;if(F.setFromUnitVectors(new de(0,1,0),ie),K.applyQuaternion(F),K.translate(te.x,te.y,te.z),O&&O==="end"&&!E){const le=H_(I,L,te,0,R);k?q=p4(le,j,new yt(v.fill??i.edge.fill),v.dashArray):q=new yd(le,20,j,5,!1)}const X=new yt(v.fill??i.edge.fill);k||BS(q,X),BS(K,X);const ee=Db([q,K]);ee.userData={...ee.userData,type:"edge"},c.push(ee),f.set(T,ee)}),c},[n,e,i.edge.fill]),a=$.useCallback((l,c)=>{const f=o(l),d=o(c);return Db([d.length?Db(d):_4,f.length?Db(f):_4],!0)},[o]);return{getGeometries:o,getGeometry:a}}const f_e=({interpolation:n="linear",arrowPlacement:e="end",labelPlacement:t="inline",animated:i,contextMenu:r,disabled:s,edges:o,labelFontUrl:a,onClick:l,onContextMenu:c,onPointerOut:f,onPointerOver:d})=>{const m=St(F=>F.theme),{getGeometries:v,getGeometry:b}=u_e(e,n),x=St(F=>F.draggingIds),w=St(F=>F.edgeMeshes),_=St(F=>F.setEdgeMeshes),A=St(F=>F.actives||[]),T=St(F=>F.selections||[]),E=St(F=>F.hoveredEdgeIds||[]),[C,R,O,I]=$.useMemo(()=>{const F=[],X=[],ee=[],le=[];return o.forEach(oe=>{if(x.includes(oe.source)||x.includes(oe.target)){T.includes(oe.id)||A.includes(oe.id)||E.includes(oe.id)?ee.push(oe):le.push(oe);return}T.includes(oe.id)||A.includes(oe.id)||E.includes(oe.id)?F.push(oe):X.push(oe)}),[F,X,ee,le]},[o,A,T,x,E]),L=!!T.length,N=$.useMemo(()=>b(C,R),[b,C,R]),{activeOpacity:V,inactiveOpacity:B}=l_e(i,L,m);a_e(N,i),$.useEffect(()=>{if(x.length===0){const X=v(o).map(ee=>new Pi(ee));_(X)}},[v,_,o,x.length]);const k=$.useRef(new Pi),j=$.useRef(new Pi),q=$.useCallback(F=>{if(!F.camera)return[];const X=F.intersectObjects(w);return X.length?X.map(ee=>o[w.indexOf(ee.object)]):[]},[w,o]),{handleClick:W,handleContextMenu:G,handleIntersections:K}=c_e({onClick:l,onContextMenu:c,onPointerOut:f,onPointerOver:d},r,s),te=$.useRef([]),ie=$.useRef([]);return yT(F=>{if(k.current.geometry=N,s)return;const X=te.current;if((x.length||x.length===0&&X!==null)&&(j.current.geometry=b(O,I)),te.current=x,x.length)return;const ee=ie.current,le=q(F.raycaster);K(ee,le),le.join()!==ee.join()&&(j.current.geometry=b(le,[])),ie.current=le}),ne.jsxs("group",{onClick:W,onContextMenu:G,children:[ne.jsxs("mesh",{ref:k,children:[ne.jsx(ar.meshBasicMaterial,{attach:"material-0",depthTest:!1,fog:!0,opacity:B,side:yr,transparent:!0,vertexColors:!0}),ne.jsx(ar.meshBasicMaterial,{attach:"material-1",color:m.edge.activeFill,depthTest:!1,fog:!0,opacity:V,side:yr,transparent:!0})]}),ne.jsxs("mesh",{ref:j,children:[ne.jsx(ar.meshBasicMaterial,{attach:"material-0",color:m.edge.fill,depthTest:!1,fog:!0,opacity:B,side:yr,transparent:!0}),ne.jsx(ar.meshBasicMaterial,{attach:"material-1",color:m.edge.activeFill,depthTest:!1,fog:!0,opacity:V,side:yr,transparent:!0})]}),o.map(F=>{const X=T.includes(F.id),ee=A.includes(F.id),le=E.includes(F.id);return ne.jsx(o_e,{animated:i,contextMenu:r,color:X||ee||le?m.edge.label.activeColor:m.edge.label.color,disabled:s,edge:F,labelFontUrl:a,labelPlacement:t,active:X||ee||le},F.id)})]})},h_e=({image:n,id:e,size:t,opacity:i=1,animated:r})=>{const s=$.useMemo(()=>new PV().load(n),[n]),{scale:o,spriteOpacity:a}=da({from:{scale:[1e-5,1e-5,1e-5],spriteOpacity:0},to:{scale:[t,t,t],spriteOpacity:i},config:{...pa,duration:r?void 0:0}});return ne.jsx(ar.sprite,{userData:{id:e,type:"node"},scale:o,children:ne.jsx(ar.spriteMaterial,{attach:"material",opacity:a,fog:!0,depthTest:!1,transparent:!0,side:yr,children:ne.jsx("primitive",{attach:"map",object:s,minFilter:br})})})},d_e=({color:n="#D8E6EA",size:e=1,opacity:t=.5,animated:i,strokeWidth:r=5,innerRadius:s=4,segments:o=25})=>{const a=$.useMemo(()=>new yt(n),[n]),{ringSize:l,ringOpacity:c}=da({from:{ringOpacity:0,ringSize:[1e-5,1e-5,1e-5]},to:{ringOpacity:t,ringSize:[e/2,e/2,1]},config:{...pa,duration:i?void 0:0}}),f=r/10,d=s+f;return ne.jsx(kH,{position:[0,0,1],children:ne.jsxs(ar.mesh,{scale:l,raycast:t>0?void 0:()=>[],children:[ne.jsx("ringGeometry",{attach:"geometry",args:[s,d,o]}),ne.jsx(ar.meshBasicMaterial,{attach:"material",color:a,transparent:!0,depthTest:!1,opacity:c,side:yr,fog:!0})]})})},p_e=({color:n,id:e,size:t,selected:i,opacity:r=1,animated:s})=>{const{scale:o,nodeOpacity:a}=da({from:{scale:[1e-5,1e-5,1e-5],nodeOpacity:0},to:{scale:[t,t,t],nodeOpacity:r},config:{...pa,duration:s?void 0:0}}),l=$.useMemo(()=>new yt(n),[n]),c=St(f=>f.theme);return ne.jsxs(ne.Fragment,{children:[ne.jsxs(ar.mesh,{userData:{id:e,type:"node"},scale:o,children:[ne.jsx("sphereGeometry",{attach:"geometry",args:[1,25,25]}),ne.jsx(ar.meshPhongMaterial,{attach:"material",side:yr,transparent:!0,fog:!0,opacity:a,color:l,emissive:l,emissiveIntensity:.7})]}),ne.jsx(d_e,{opacity:i?.5:0,size:t,animated:s,color:i?c.ring.activeFill:c.ring.fill})]})},m_e=({animated:n,disabled:e,id:t,draggable:i=!1,labelFontUrl:r,contextMenu:s,onClick:o,onDoubleClick:a,onPointerOver:l,onDragged:c,onPointerOut:f,onContextMenu:d,renderNode:m,constrainDragging:v})=>{const b=IT(),x=St(Ae=>Ae.theme),w=St(Ae=>Ae.nodes.find(tt=>tt.id===t)),_=St(Ae=>Ae.edges),A=St(Ae=>Ae.draggingIds),T=St(Ae=>Ae.collapsedNodeIds),E=St(Ae=>Ae.addDraggingId),C=St(Ae=>Ae.removeDraggingId),R=St(Ae=>Ae.setHoveredNodeId),O=St(Ae=>Ae.setNodePosition),I=St(Ae=>Ae.setCollapsedNodeIds),L=St(Ae=>Ae.collapsedNodeIds.includes(t)),N=St(Ae=>Ae.actives?.includes(t)),V=St(Ae=>Ae.selections?.includes(t)),B=St(Ae=>Ae.selections?.length>0),k=St(Ae=>Ae.centerPosition),j=St(Ae=>Ae.clusters.get(w.cluster)),q=A.includes(t),W=A.length>0,{position:G,label:K,subLabel:te,size:ie=7,labelVisible:F=!0}=w,X=$.useRef(null),[ee,le]=$.useState(!1),[oe,ue]=$.useState(!1),he=ee||V||N,be=B?he?x.node.selectedOpacity:x.node.inactiveOpacity:x.node.opacity,Te=$.useMemo(()=>_.filter(tt=>tt.source===t).length>0||L,[_,t,L]),Ee=$.useCallback(()=>{Te&&I(L?T.filter(Ae=>Ae!==t):[...T,t])},[Te,T,t,L,I]),[{nodePosition:Ce,labelPosition:we}]=da(()=>({from:{nodePosition:k?[k.x,k.y,0]:[0,0,0],labelPosition:[0,-(ie+7),2]},to:{nodePosition:G?[G.x,G.y,he?G.z+1:G.z]:[0,0,0],labelPosition:[0,-(ie+7),2]},config:{...pa,duration:n&&!W?void 0:0}}),[q,G,n,ie,he]),ae=w9({draggable:i,position:G,bounds:v?j?.position:void 0,set:Ae=>O(t,Ae),onDragStart:()=>{E(t),le(!0)},onDragEnd:()=>{C(t),c?.(w)}});em(ee&&!W&&o!==void 0,"pointer"),em(ee&&i&&!q&&o===void 0,"grab"),em(q,"grabbing");const ve=he||q,xe=ve?x.node.activeFill:w.fill||x.node.fill,{pointerOver:me,pointerOut:Ie}=RP({disabled:e||q,onPointerOver:Ae=>{b.freeze(),le(!0),l?.(w,Ae),R(t)},onPointerOut:Ae=>{b.unFreeze(),le(!1),f?.(w,Ae),R(null)}}),Ne=$.useMemo(()=>m?m({id:t,color:xe,size:ie,active:ve,opacity:be,animated:n,selected:V,node:w}):ne.jsx(ne.Fragment,{children:w.icon?ne.jsx(h_e,{id:t,image:w.icon||"",size:ie+8,opacity:be,animated:n,color:xe,node:w,active:ve,selected:V}):ne.jsx(p_e,{id:t,size:ie,opacity:be,animated:n,color:xe,node:w,active:ve,selected:V})}),[m,t,xe,ie,ve,be,n,V,w]),ke=$.useMemo(()=>F&&(F||V||ee)&&K&&ne.jsxs(ar.group,{position:we,children:[ne.jsx($0,{text:K,fontUrl:r,opacity:be,stroke:x.node.label.stroke,backgroundColor:x.node.label.backgroundColor,backgroundOpacity:x.node.label.backgroundOpacity,padding:x.node.label.padding,strokeColor:x.node.label.strokeColor,strokeWidth:x.node.label.strokeWidth,radius:x.node.label.radius,active:V||ee||q||N,color:V||ee||q||N?x.node.label.activeColor:x.node.label.color}),te&&ne.jsx("group",{position:[0,-(ie-3),0],children:ne.jsx($0,{text:te,fontUrl:r,fontSize:5,opacity:be,stroke:x.node.subLabel?.stroke,active:V||ee||q||N,color:V||ee||q||N?x.node.subLabel?.activeColor:x.node.subLabel?.color})})]}),[ee,N,q,V,K,r,we,F,ie,be,te,x.node.label.activeColor,x.node.label.color,x.node.label.stroke,x.node.label.backgroundColor,x.node.label.backgroundOpacity,x.node.label.padding,x.node.label.strokeColor,x.node.label.strokeWidth,x.node.label.radius,x.node.subLabel?.activeColor,x.node.subLabel?.color,x.node.subLabel?.stroke]),Fe=$.useMemo(()=>oe&&s&&ne.jsx(bP,{prepend:!0,center:!0,children:s({data:w,canCollapse:Te,isCollapsed:L,onCollapse:Ee,onClose:()=>ue(!1)})}),[oe,s,w,Te,L,Ee]);return ne.jsxs(ar.group,{renderOrder:1,userData:{id:t,type:"node"},ref:X,position:Ce,onPointerOver:me,onPointerOut:Ie,onClick:Ae=>{!e&&!q&&o?.(w,{canCollapse:Te,isCollapsed:L},Ae)},onDoubleClick:Ae=>{!e&&!q&&a?.(w,Ae)},onContextMenu:()=>{e||(ue(!0),d?.(w,{canCollapse:Te,isCollapsed:L,onCollapse:Ee}))},...ae(),children:[Ne,Fe,ke]})};function g_e(n){return new Promise((e,t)=>{let i;function r(){i?e(i):(i=n.step(),r())}r()})}function _m(n){const e=[],t=[];return n.forEachNode((i,r)=>{e.push({...r,id:i,radius:r.size||1})}),n.forEachEdge((i,r)=>{t.push({...r,id:i})}),{nodes:e,edges:t}}function v_e({graph:n,radius:e,drags:t,getNodePosition:i}){const r=bve(n,{scale:e}),{nodes:s,edges:o}=_m(n);return{step(){return!0},getNodePosition(a){if(i){const l=i(a,{graph:n,drags:t,nodes:s,edges:o});if(l)return l}return t?.[a]?.position?t?.[a]?.position:r?.[a]}}}function y_e({graph:n,radius:e=40,drags:t,getNodePosition:i,concentricSpacing:r=100}){const{nodes:s,edges:o}=_m(n),a={},l=b=>{const x=2*Math.PI*(e+b*r);return Math.floor(x/40)},c=new Map,f=[];for(const b of s){const w=n.getNodeAttribute(b.id,"data")?.level;typeof w=="number"&&w>=0?(c.has(w)||c.set(w,[]),c.get(w).push(b.id)):f.push({id:b.id,metric:n.degree(b.id)})}f.sort((b,x)=>x.metric-b.metric);for(const[b,x]of c.entries()){const w=x.length,_=e+b*r;for(let A=0;A<w;A++){const T=2*Math.PI*A/w;a[x[A]]={x:_*Math.cos(T),y:_*Math.sin(T)}}}const d=new Set(c.keys());let m=0,v=0;for(;v<f.length;){for(;d.has(m);)m++;const b=l(m),x=e+m*r;for(let w=0;w<b&&v<f.length;w++){const _=2*Math.PI*w/b;a[f[v].id]={x:x*Math.cos(_),y:x*Math.sin(_)},v++}m++}return{step(){return!0},getNodePosition(b){if(i){const x=i(b,{graph:n,drags:t,nodes:s,edges:o});if(x)return x}return t?.[b]?.position?t[b].position:a[b]}}}function b_e({graph:n,drags:e,getNodePosition:t}){const{nodes:i,edges:r}=_m(n);return{step(){return!0},getNodePosition(s){return t(s,{graph:n,drags:e,nodes:i,edges:r})}}}function S9(n,e=[]){const t=e.length;for(const i of n){const r=e.indexOf(i);if(r>-1){const s=[...e.slice(r),i].map(o=>o.data.id);throw new Error(`Invalid Graph: Circular node path detected: ${s.join(" -> ")}.`)}t>i.depth&&(i.depth=t,S9(i.out,[...e,i]))}}function E9(n,e){let t=!1;const i=n.reduce((o,a)=>({...o,[a.id]:{data:a,out:[],depth:-1,ins:[]}}),{});try{for(const o of e){const a=o.source,l=o.target;if(!i.hasOwnProperty(a))throw new Error(`Missing source Node ${a}`);if(!i.hasOwnProperty(l))throw new Error(`Missing target Node ${l}`);const c=i[a],f=i[l];f.ins.push(c),c.out.push(f)}S9(Object.values(i))}catch{t=!0}const r=Object.keys(i).map(o=>i[o].depth),s=Math.max(...r);return{invalid:t,depths:i,maxDepth:s||1}}function __e({graph:n,drags:e,iterations:t,...i}){wve.assign(n);const r=Cve(n,{iterations:t,settings:i});return{step(){return!0},getNodePosition(s){return e?.[s]?.position||r?.[s]}}}function x_e(){const n=G=>()=>G;let t=G=>G.index,i=[],r=[],s,o,a=[100,100],l=n(1),c=n(-1),f=n(100),d=n(.1);const m={};let v=.1,b=.001,x=[],w=[0,0],_,A=G=>G.cluster,T="treemap",E=!0,C=.1;function R(G){if(!E)return R;T==="force"&&(_.tick(),k());for(let K=0,te=i.length,ie,F=G*C;K<te;++K)ie=i[K],ie.vx+=(m[A(ie)].x-ie.x)*F,ie.vy+=(m[A(ie)].y-ie.y)*F}function O(){i&&(T==="treemap"?j():W())}R.initialize=function(G){i=G,O()};function I(G){const K=A(G.source),te=A(G.target);return K<=te?K+"~"+te:te+"~"+K}function L(G){let K=new Map,te={};return G.forEach(function(ie){K.has(A(ie))||K.set(A(ie),{count:0,sumforceNodeSize:0})}),G.forEach(function(ie){te=K.get(A(ie)),te.count=te.count+1,te.sumforceNodeSize=te.sumforceNodeSize+Math.PI*(l(ie)*l(ie))*1.3,K.set(A(ie),te)}),K}function N(G){const K=new Map,te=[];return G.forEach(function(ie){let F=I(ie),X;K.has(F)?X=K.get(F):X=0,X+=1,K.set(F,X)}),K.forEach(function(ie,F){let X,ee;X=F.split("~")[0],ee=F.split("~")[1],X!==void 0&&ee!==void 0&&te.push({source:X,target:ee,count:ie})}),te}function V(){const G=[],K=[],te=new Map;let ie,F,X,ee,le;ee=L(i),le=N(r);for(ie of ee.keys())X=ee.get(ie),G.push({id:ie,size:X.count,r:Math.sqrt(X.sumforceNodeSize/Math.PI)}),te.set(ie,F);return le.forEach(function(oe){const ue=te.get(oe.source),he=te.get(oe.target);ue!==void 0&&he!==void 0&&K.push({source:ue,target:he,count:oe.count})}),{nodes:G,links:K}}function B(){const G=[];let K,te,ie;ie=L(R.nodes());for(K of ie.keys())te=ie.get(K),G.push({id:K,size:te.count});return{id:"clustersTree",children:G}}function k(){return m.none={x:0,y:0},x.forEach(function(G){T==="treemap"?m[G.data.id]={x:G.x0+(G.x1-G.x0)/2-w[0],y:G.y0+(G.y1-G.y0)/2-w[1]}:m[G.id]={x:G.x-w[0],y:G.y-w[1]}}),m}function j(){const G=Tbe().size(R.size());o=PT(B()).sum(K=>K.radius).sort(function(K,te){return te.height-K.height||te.value-K.value}),x=G(o).leaves(),k()}function q(){let G=0;i.length!==0&&r.forEach(function(K){let te,ie;if(i){if(te=K.source,ie=K.target,typeof K.source!="object"&&(te=i.find(F=>F.id===K.source)),typeof K.target!="object"&&(ie=i.find(F=>F.id===K.target)),te===void 0||ie===void 0)throw Error("Error setting links, couldnt find nodes for a link (see it on the console)");K.source=te,K.target=ie,K.index=G++}})}function W(){let G;!i||!i.length||(q(),G=V(),s.size>0&&G.nodes.forEach(K=>{K.fx=s.get(K.id)?.position?.x,K.fy=s.get(K.id)?.position?.y}),_=o9(G.nodes).force("x",XD(a[0]/2).strength(.1)).force("y",YD(a[1]/2).strength(.1)).force("collide",JH(K=>K.r).iterations(4)).force("charge",a9().strength(c)).force("links",e9(G.nodes.length?G.links:[]).distance(f).strength(d)),x=_.nodes(),k())}return R.template=function(G){return arguments.length?(T=G,O(),R):T},R.groupBy=function(G){return arguments.length?typeof G=="string"?(A=function(K){return K[G]},R):(A=G,R):A},R.enableGrouping=function(G){return arguments.length?(E=G,R):E},R.strength=function(G){return arguments.length?(C=G,R):C},R.getLinkStrength=function(G){return E?A(G.source)===A(G.target)?typeof v=="function"?v(G):v:typeof b=="function"?b(G):b:typeof v=="function"?v(G):v},R.id=function(G){return arguments.length?(t=G,R):t},R.size=function(G){return arguments.length?(a=G,R):a},R.linkStrengthInterCluster=function(G){return arguments.length?(b=G,R):b},R.linkStrengthIntraCluster=function(G){return arguments.length?(v=G,R):v},R.nodes=function(G){return arguments.length?(i=G,R):i},R.links=function(G){return arguments.length?(G===null?r=[]:r=G,O(),R):r},R.template=function(G){return arguments.length?(T=G,O(),R):T},R.forceNodeSize=function(G){return arguments.length?(l=typeof G=="function"?G:n(+G),O(),R):l},R.nodeSize=R.forceNodeSize,R.forceCharge=function(G){return arguments.length?(c=typeof G=="function"?G:n(+G),O(),R):c},R.forceLinkDistance=function(G){return arguments.length?(f=typeof G=="function"?G:n(+G),O(),R):f},R.forceLinkStrength=function(G){return arguments.length?(d=typeof G=="function"?G:n(+G),O(),R):d},R.offset=function(G){return arguments.length?(w=typeof G=="function"?G:n(+G),R):w},R.getFocis=k,R.setClusters=function(G){return s=G,R},R}const x4=["radialin","radialout"];function w_e({nodes:n,edges:e,mode:t="lr",nodeLevelRatio:i=2}){const{depths:r,maxDepth:s,invalid:o}=E9(n,e);if(o)return null;const a=x4.includes(t)?1:5,l=n.length/s*i*a;if(t){const c=(v,b)=>x=>v?(r[x.id].depth-s/2)*l*(b?-1:1):void 0,f=c(["lr","rl"].includes(t),t==="rl"),d=c(["td","bu"].includes(t),t==="td"),m=c(["zin","zout"].includes(t),t==="zout");n.forEach(v=>{v.fx=f(v),v.fy=d(v),v.fz=m(v)})}return x4.includes(t)?Gye(c=>{const f=r[c.id];return(t==="radialin"?s-f.depth:f.depth)*l}).strength(1):null}function Zh({graph:n,nodeLevelRatio:e=2,mode:t=null,dimensions:i=2,nodeStrength:r=-250,linkDistance:s=50,clusterStrength:o=.5,linkStrengthInterCluster:a=.01,linkStrengthIntraCluster:l=.5,forceLinkDistance:c=100,forceLinkStrength:f=.1,clusterType:d="force",forceCharge:m=-700,getNodePosition:v,drags:b,clusters:x,clusterAttribute:w,forceLayout:_}){const{nodes:A,edges:T}=_m(n),C=i===2&&T.length>25?r*2:r;let R,O;_==="forceDirected2d"?(R=XD(),O=YD()):(R=XD(600).strength(.05),O=YD(600).strength(.05));const I=o9().force("center",Rve(0,0)).force("link",e9()).force("charge",a9().strength(C)).force("x",R).force("y",O).force("z",Hye()).force("collide",JH(B=>B.radius+10)).force("dagRadial",w_e({nodes:A,edges:T,mode:t,nodeLevelRatio:e})).stop();let L;if(w){let B=m;if(A?.length){const k=Math.ceil(A.length/200);B=m*k}L=x_e().setClusters(x).strength(o).template(d).groupBy(k=>k.data[w]).links(T).size([100,100]).linkStrengthInterCluster(a).linkStrengthIntraCluster(l).forceLinkDistance(c).forceLinkStrength(f).forceCharge(B).forceNodeSize(k=>k.radius)}let N=I.numDimensions(i).nodes(A);if(L&&(N=N.force("group",L)),s){let B=N.force("link");B&&(B.id(k=>k.id).links(T).distance(s),L&&(B=B.strength(L?.getLinkStrength??.1)))}const V=new Map(A.map(B=>[B.id,B]));return{step(){for(;I.alpha()>.01;)I.tick();return!0},getNodePosition(B){if(v){const k=v(B,{graph:n,drags:b,nodes:A,edges:T});if(k)return k}return b?.[B]?.position?b?.[B]?.position:V.get(B)}}}const S_e={td:{x:"x",y:"y",factor:-1},lr:{x:"y",y:"x",factor:1}};function w4({graph:n,drags:e,mode:t="td",nodeSeparation:i=1,nodeSize:r=[50,50],getNodePosition:s}){const{nodes:o,edges:a}=_m(n),{depths:l}=E9(o,a),c=Object.keys(l).map(x=>l[x]),f=pbe().id(x=>x.data.id).parentId(x=>x.ins?.[0]?.data?.id)(c),m=xbe().separation(()=>i).nodeSize(r)(PT(f)).descendants(),v=S_e[t],b=new Map(o.map(x=>{const{x:w,y:_}=m.find(A=>A.data.id===x.id);return[x.id,{...x,[v.x]:w*v.factor,[v.y]:_*v.factor,z:0}]}));return{step(){return!0},getNodePosition(x){if(s){const w=s(x,{graph:n,drags:e,nodes:o,edges:a});if(w)return w}return e?.[x]?.position?e?.[x]?.position:b.get(x)}}}function S4(n,e,t){const i=Math.acos(1-2*(n+.5)/e),r=Math.PI*(1+Math.sqrt(5))*(n+.5),s=t*Math.sin(i)*Math.cos(r),o=t*Math.sin(i)*Math.sin(r),a=t*Math.cos(i);return new de(s,o,a)}function E_e({graph:n,radius:e=40,drags:t,getNodePosition:i,concentricSpacing:r=100}){const{nodes:s,edges:o}=_m(n),a={},l=b=>{const x=2*Math.PI*(e+b*r);return Math.floor(x/40)},c=new Map,f=[];for(const b of s){const w=n.getNodeAttribute(b.id,"data")?.level;typeof w=="number"&&w>=0?(c.has(w)||c.set(w,[]),c.get(w).push(b.id)):f.push({id:b.id,metric:n.degree(b.id)})}f.sort((b,x)=>x.metric-b.metric);for(const[b,x]of c.entries()){const w=x.length,_=e+b*r;for(const[A,T]of x.entries()){const E=S4(A,w,_);a[T]={x:E.x,y:E.y,z:E.z}}}const d=new Set(c.keys());let m=0,v=0;for(;v<f.length;){for(;d.has(m);)m++;const b=l(m),x=e+m*r;for(let w=0;w<b&&v<f.length;w++){const _=S4(w,b,x);a[f[v].id]={x:_.x,y:_.y,z:_.z},v++}m++}return{step(){return!0},getNodePosition(b){if(i){const x=i(b,{graph:n,drags:t,nodes:s,edges:o});if(x)return x}return t?.[b]?.position?t[b].position:a[b]}}}function M_e({graph:n,margin:e,drags:t,getNodePosition:i,ratio:r,gridSize:s,maxIterations:o}){const{nodes:a,edges:l}=_m(n),c=Lbe(n,{maxIterations:o,inputReducer:(f,d)=>({...d,x:d.x||0,y:d.y||0}),settings:{ratio:r,margin:e,gridSize:s}});return{step(){return!0},getNodePosition(f){if(i){const d=i(f,{graph:n,drags:t,nodes:a,edges:l});if(d)return d}return t?.[f]?.position?t?.[f]?.position:c?.[f]}}}const T_e=["forceDirected2d","treeTd2d","treeLr2d","radialOut2d","treeTd3d","treeLr3d","radialOut3d","forceDirected3d"];function A_e({type:n,...e}){if(T_e.includes(n)){const{nodeStrength:t,linkDistance:i,nodeLevelRatio:r}=e;if(n==="forceDirected2d")return Zh({...e,dimensions:2,nodeLevelRatio:r||2,nodeStrength:t||-250,linkDistance:i,forceLayout:n});if(n==="treeTd2d")return Zh({...e,mode:"td",dimensions:2,nodeLevelRatio:r||5,nodeStrength:t||-250,linkDistance:i||50,forceLayout:n});if(n==="treeLr2d")return Zh({...e,mode:"lr",dimensions:2,nodeLevelRatio:r||5,nodeStrength:t||-250,linkDistance:i||50,forceLayout:n});if(n==="radialOut2d")return Zh({...e,mode:"radialout",dimensions:2,nodeLevelRatio:r||5,nodeStrength:t||-500,linkDistance:i||100,forceLayout:n});if(n==="treeTd3d")return Zh({...e,mode:"td",dimensions:3,nodeLevelRatio:r||2,nodeStrength:t||-500,linkDistance:i||50});if(n==="treeLr3d")return Zh({...e,mode:"lr",dimensions:3,nodeLevelRatio:r||2,nodeStrength:t||-500,linkDistance:i||50,forceLayout:n});if(n==="radialOut3d")return Zh({...e,mode:"radialout",dimensions:3,nodeLevelRatio:r||2,nodeStrength:t||-500,linkDistance:i||100,forceLayout:n});if(n==="forceDirected3d")return Zh({...e,dimensions:3,nodeLevelRatio:r||2,nodeStrength:t||-250,linkDistance:i,forceLayout:n})}else if(n==="circular2d"){const{radius:t}=e;return v_e({...e,radius:t||300})}else{if(n==="concentric2d")return y_e(e);if(n==="concentric3d")return E_e(e);if(n==="hierarchicalTd")return w4({...e,mode:"td"});if(n==="hierarchicalLr")return w4({...e,mode:"lr"});if(n==="nooverlap"){const{graph:t,maxIterations:i,ratio:r,margin:s,gridSize:o,...a}=e;return M_e({graph:t,margin:s||10,maxIterations:i||50,ratio:r||10,gridSize:o||20,...a})}else if(n==="forceatlas2"){const{graph:t,iterations:i,gravity:r,scalingRatio:s,...o}=e;return __e({type:"forceatlas2",graph:t,...o,scalingRatio:s||100,gravity:r||10,iterations:i||50})}else if(n==="custom")return b_e({...e})}throw new Error(`Layout ${n} not found.`)}const C_e=({layoutType:n,sizingType:e,labelType:t,sizingAttribute:i,clusterAttribute:r,selections:s,nodes:o,edges:a,actives:l,collapsedNodeIds:c,defaultNodeSize:f,maxNodeSize:d,minNodeSize:m,layoutOverrides:v,constrainDragging:b})=>{const x=St(F=>F.graph),w=St(F=>F.clusters),_=St(F=>F.nodes),A=St(F=>F.setClusters),T=St(F=>F.collapsedNodeIds),E=St(F=>F.setEdges),C=St(F=>F.nodes),R=St(F=>F.setNodes),O=St(F=>F.setSelections),I=St(F=>F.setActives),L=St(F=>F.drags),N=St(F=>F.setDrags),V=St(F=>F.setCollapsedNodeIds),B=$.useRef(!1),k=$.useRef(null),j=Br(F=>F.camera),q=$.useRef(L),W=$.useRef([]);$.useEffect(()=>{if(!r)return;const F=_.map(ee=>ee.id),X=o.find(ee=>!F.includes(ee.id));if(X){const ee=X.data[r],le=w.get(ee),oe={...q.current};le?.nodes?.forEach(ue=>oe[ue.id]=void 0),q.current=oe,N(oe)}},[_,o,r,w,N]);const{visibleEdges:G,visibleNodes:K}=$.useMemo(()=>Zbe({collapsedIds:T,nodes:o,edges:a}),[T,o,a]),te=$.useCallback(F=>{const X={...q.current};F.forEach(ee=>X[ee.id]=ee),q.current=X,N(X)},[N]),ie=$.useCallback(async F=>{k.current=F||A_e({...v,type:n,graph:x,drags:q.current,clusters:W?.current,clusterAttribute:r}),await g_e(k.current);const X=Gbe({graph:x,layout:k.current,sizingType:e,labelType:t,sizingAttribute:i,maxNodeSize:d,minNodeSize:m,defaultNodeSize:f,clusterAttribute:r}),ee=Ibe({nodes:X.nodes,clusterAttribute:r});b&&ee.forEach(le=>{W.current.get(le.label)?.nodes.length===le.nodes.length&&(le.position=W.current?.get(le.label)?.position??le.position)}),E(X.edges),R(X.nodes),A(ee),r&&te(X.nodes)},[v,n,r,e,t,i,d,m,f,E,R,A]);return $.useEffect(()=>{q.current=L},[L,r,ie]),$.useEffect(()=>{W.current=w},[w]),$.useEffect(()=>{const F=C.map(ee=>({...ee,labelVisible:h9({nodeCount:C?.length,labelType:t,camera:j,nodePosition:ee?.position})("node",ee?.size)}));F.some((ee,le)=>ee.labelVisible!==C[le].labelVisible)&&R(F)},[j,j.zoom,j.position.z,R,C,t]),$.useEffect(()=>{B.current&&O(s)},[s,O]),$.useEffect(()=>{B.current&&I(l)},[l,I]),$.useEffect(()=>{async function F(){B.current=!1,Vbe(x,K,G),await ie(),requestAnimationFrame(()=>B.current=!0)}F()},[K,G]),$.useEffect(()=>{B.current&&V(c)},[c,V]),$.useEffect(()=>{B.current&&(q.current={},N({}),ie())},[n,ie,N]),$.useEffect(()=>{B.current&&ie(k.current)},[e,i,t,ie]),{updateLayout:ie}},R_e=n=>n.reduceEdges((e,t,i,r,s)=>{const o=`${r}-${s}`,a={id:t,source:r,target:s,...i},l=e.get(o);return l?l.push(a):e.set(o,[a]),e},new Map),D_e=(n,e)=>{if(!n||n.size===0)return[];const t=R_e(n),i=[],r=e==="all"||e==="edges";for(const[s,o]of t){const[a,l]=s.split("-"),c=o[0];if(!a||!l||!c)continue;const f=c.size||1,d=f+o.length*f*.5,m=o.length>1,v=m?`${o.length} edges`:c.label,b={...c,source:a,target:l,label:v,labelVisible:r,size:d,data:{...c.data||{},originalEdges:o,count:o.length,isAggregated:m,originalSize:f}};i.push(b)}return i},O_e=$.forwardRef(({onNodeClick:n,onNodeDoubleClick:e,onNodeContextMenu:t,onEdgeContextMenu:i,onEdgeClick:r,onEdgePointerOver:s,onEdgePointerOut:o,onNodePointerOver:a,onNodePointerOut:l,onClusterClick:c,onNodeDragged:f,onClusterDragged:d,onClusterPointerOver:m,onClusterPointerOut:v,contextMenu:b,animated:x,disabled:w,draggable:_,constrainDragging:A=!1,edgeLabelPosition:T,edgeArrowPosition:E,edgeInterpolation:C="linear",labelFontUrl:R,renderNode:O,onRenderCluster:I,aggregateEdges:L,...N},V)=>{const{layoutType:B,clusterAttribute:k,labelType:j}=N,q=Br(we=>we.gl),W=Br(we=>we.scene),G=Br(we=>we.camera),{updateLayout:K}=C_e({...N,constrainDragging:A});if(k&&!(B==="forceDirected2d"||B==="forceDirected3d"))throw new Error("Clustering is only supported for the force directed layouts.");const te=St(we=>we.graph),ie=St(we=>we.nodes),F=St(we=>we.edges),X=St(we=>we.setEdges),ee=St(we=>[...we.clusters.values()]),le=$.useMemo(()=>L?D_e(te,j):F,[F,L,te,j]);$.useEffect(()=>{L&&F.length!==le.length&&X(le)},[le,F.length,X,L]);const{centerNodesById:oe,fitNodesInViewById:ue,isCentered:he}=Kbe({animated:x,disabled:w,layoutType:B});$.useImperativeHandle(V,()=>({centerGraph:oe,fitNodesInView:ue,graph:te,renderScene:()=>q.render(W,G)}),[oe,ue,te,q,W,G]);const be=$.useCallback(we=>{f?.(we),k&&K()},[k,f,K]),Te=$.useMemo(()=>ie.map(we=>ne.jsx(m_e,{id:we?.id,labelFontUrl:R,draggable:_,constrainDragging:A,disabled:w,animated:x,contextMenu:b,renderNode:O,onClick:n,onDoubleClick:e,onContextMenu:t,onPointerOver:a,onPointerOut:l,onDragged:be},we?.id)),[A,x,b,w,_,R,ie,n,t,e,be,l,a,O]),Ee=$.useMemo(()=>x?le.map(we=>ne.jsx(s_e,{id:we.id,disabled:w,animated:x,labelFontUrl:R,labelPlacement:T,arrowPlacement:E,interpolation:C,contextMenu:b,onClick:r,onContextMenu:i,onPointerOver:s,onPointerOut:o},we.id)):ne.jsx(f_e,{edges:le,disabled:w,animated:x,labelFontUrl:R,labelPlacement:T,arrowPlacement:E,interpolation:C,contextMenu:b,onClick:r,onContextMenu:i,onPointerOver:s,onPointerOut:o}),[x,b,w,E,C,T,le,R,r,i,o,s]),Ce=$.useMemo(()=>ee.map(we=>ne.jsx(e_e,{animated:x,disabled:w,draggable:_,labelFontUrl:R,onClick:c,onPointerOver:m,onPointerOut:v,onDragged:d,onRender:I,...we},we.label)),[x,ee,w,_,R,c,v,m,d,I]);return he&&ne.jsxs($.Fragment,{children:[Ee,Te,Ce]})});function yS(n,e,t){const{offsetX:i,offsetY:r}=n,{width:s,height:o}=t;e.set(i/s*2-1,-(r/o)*2+1)}function L_e(n){const e=document.createElement("div");return e.style.pointerEvents="none",e.style.border=n.lasso.border,e.style.backgroundColor=n.lasso.background,e.style.position="fixed",e}const P_e=({children:n,type:e="none",onLasso:t,onLassoEnd:i,disabled:r})=>{const s=St(V=>V.theme),o=Br(V=>V.camera),a=Br(V=>V.gl),l=Br(V=>V.setEvents),c=Br(V=>V.size),f=Br(V=>V.get),d=Br(V=>V.scene),m=IT(),v=St(V=>V.actives),b=St(V=>V.setActives),x=St(V=>V.edges),w=St(V=>V.edgeMeshes),_=$.useRef(null),A=$.useRef(null),T=$.useRef(L_e(s)),E=$.useRef(null),C=$.useRef(!1),R=$.useRef(f().events.enabled),O=$.useRef(m.controls?.enabled),I=$.useCallback(V=>{if(C.current){const[B,k,j]=E.current;j.x=Math.max(B.x,V.clientX),j.y=Math.max(B.y,V.clientY),k.x=Math.min(B.x,V.clientX),k.y=Math.min(B.y,V.clientY),T.current.style.left=`${k.x}px`,T.current.style.top=`${k.y}px`,T.current.style.width=`${j.x-k.x}px`,T.current.style.height=`${j.y-k.y}px`,yS(V,_.current.endPoint,c),yS(V,A.current.endPoint,c);const q=[],W=A.current.select().sort(K=>K.uuid).filter(K=>K.geometry?.userData?.type===e||e==="all").map(K=>x[w.indexOf(K)].id);q.push(...W);const G=_.current.select().sort(K=>K.uuid).filter(K=>K.isMesh&&K.userData?.id&&(K.userData?.type===e||e==="all")).map(K=>K.userData.id);q.push(...G),requestAnimationFrame(()=>{b(q),t?.(q)}),document.addEventListener("pointermove",I,{passive:!0,capture:!0,once:!0})}},[c,x,w,e,b,t]),L=$.useCallback(()=>{C.current&&(l({enabled:R.current}),C.current=!1,T.current.parentElement?.removeChild(T.current),m.controls.enabled=O.current,i?.(v),document.removeEventListener("pointermove",I),document.removeEventListener("pointerup",L))},[l,m.controls,i,v,I]),N=$.useCallback(V=>{if(V.shiftKey){R.current=f().events.enabled,O.current=m.controls?.enabled,_.current=new hz(o,d);const B=new YM;w.length&&B.add(...w),A.current=new hz(o,B),E.current=[new ut,new ut,new ut];const[k]=E.current;m.controls.enabled=!1,l({enabled:!1}),C.current=!0,a.domElement.parentElement?.appendChild(T.current),T.current.style.left=`${V.clientX}px`,T.current.style.top=`${V.clientY}px`,T.current.style.width="0px",T.current.style.height="0px",k.x=V.clientX,k.y=V.clientY,yS(V,_.current.startPoint,c),yS(V,A.current.startPoint,c),document.addEventListener("pointermove",I,{passive:!0,capture:!0,once:!0}),document.addEventListener("pointerup",L,{passive:!0})}},[o,m.controls,w,f,a.domElement.parentElement,I,L,d,l,c]);return $.useEffect(()=>{if(!(r||e==="none"))return typeof window<"u"&&(document.addEventListener("pointerdown",N,{passive:!0}),document.addEventListener("pointermove",I,{passive:!0}),document.addEventListener("pointerup",L,{passive:!0})),()=>{typeof window<"u"&&(document.removeEventListener("pointerdown",N),document.removeEventListener("pointermove",I),document.removeEventListener("pointerup",L))}},[e,r,N,I,L]),ne.jsx("group",{children:n})},I_e={canvas:{background:"#fff"},node:{fill:"#7CA0AB",activeFill:"#1DE9AC",opacity:1,selectedOpacity:1,inactiveOpacity:.2,label:{color:"#2A6475",stroke:"#fff",activeColor:"#1DE9AC"},subLabel:{color:"#ddd",stroke:"transparent",activeColor:"#1DE9AC"}},lasso:{border:"1px solid #55aaff",background:"rgba(75, 160, 255, 0.1)"},ring:{fill:"#D8E6EA",activeFill:"#1DE9AC"},edge:{fill:"#D8E6EA",activeFill:"#1DE9AC",opacity:1,selectedOpacity:1,inactiveOpacity:.1,label:{stroke:"#fff",color:"#2A6475",activeColor:"#1DE9AC",fontSize:6},subLabel:{color:"#ddd",stroke:"transparent",activeColor:"#1DE9AC"}},arrow:{fill:"#D8E6EA",activeFill:"#1DE9AC"},cluster:{stroke:"#D8E6EA",opacity:1,selectedOpacity:1,inactiveOpacity:.1,label:{stroke:"#fff",color:"#2A6475"}}},N_e="_canvas_670zp_1",U_e={canvas:N_e},k_e={alpha:!0,antialias:!0},z_e={position:[0,0,1e3],near:5,far:5e4,fov:10},F_e=$.forwardRef(({cameraMode:n="pan",layoutType:e="forceDirected2d",sizingType:t="default",labelType:i="auto",theme:r=I_e,animated:s=!0,defaultNodeSize:o=7,minNodeSize:a=5,maxNodeSize:l=15,lassoType:c="none",glOptions:f={},edges:d,children:m,nodes:v,minDistance:b,maxDistance:x,minZoom:w,maxZoom:_,onCanvasClick:A,disabled:T,onLasso:E,onLassoEnd:C,aggregateEdges:R,...O},I)=>{const L=$.useRef(null),N=$.useRef(null),V=$.useRef(null);$.useImperativeHandle(I,()=>({centerGraph:(K,te)=>L.current?.centerGraph(K,te),fitNodesInView:(K,te)=>L.current?.fitNodesInView(K,te),zoomIn:()=>{const K=N.current?.controls;if(!K)return;const te=K.distance,ie=K.camera.zoom,F=ie+ie/2,X=te/F;(!b||X>=b)&&N.current?.zoomIn()},zoomOut:()=>{const K=N.current?.controls;if(!K)return;const te=K.distance,ie=K.camera.zoom,F=ie-ie/2,X=te/F;(!x||X<=x)&&N.current?.zoomOut()},dollyIn:K=>N.current?.dollyIn(K),dollyOut:K=>N.current?.dollyOut(K),panLeft:()=>N.current?.panLeft(),panRight:()=>N.current?.panRight(),panDown:()=>N.current?.panDown(),panUp:()=>N.current?.panUp(),resetControls:K=>N.current?.resetControls(K),getControls:()=>N.current?.controls,getGraph:()=>L.current?.graph,exportCanvas:()=>(L.current.renderScene(),V.current.toDataURL()),freeze:()=>N.current?.freeze(),unFreeze:()=>N.current?.unFreeze()}));const{selections:B,actives:k,collapsedNodeIds:j}=O,q=d.length+v.length>400?!1:s,W=$.useMemo(()=>({...f,...k_e}),[f]),G=$.useRef(g9({selections:B,actives:k,theme:r,collapsedNodeIds:j})).current;return $.useEffect(()=>{G.getState().setTheme(r)},[r,G]),ne.jsx("div",{className:U_e.canvas,children:ne.jsx(qfe,{orthographic:n==="orthographic",legacy:!0,linear:!0,ref:V,flat:!0,gl:W,camera:z_e,onPointerMissed:A,children:ne.jsxs($be,{store:G,children:[r.canvas?.background&&ne.jsx("color",{attach:"background",args:[r.canvas.background]}),ne.jsx("ambientLight",{intensity:1}),m,r.canvas?.fog&&ne.jsx("fog",{attach:"fog",args:[r.canvas.fog,4e3,9e3]}),ne.jsx(qbe,{mode:n,ref:N,disabled:T,minDistance:b,maxDistance:x,minZoom:w,maxZoom:_,animated:s,children:ne.jsx(P_e,{disabled:T,type:c,onLasso:E,onLassoEnd:C,children:ne.jsx($.Suspense,{children:ne.jsx(O_e,{ref:L,disabled:T,animated:q,edges:d,nodes:v,layoutType:e,sizingType:t,labelType:i,defaultNodeSize:o,minNodeSize:a,maxNodeSize:l,aggregateEdges:R,...O})})})})]})})})});function B_e({graphData:n,selectedType:e,filters:t,onTypeSelect:i}){const{nodes:r,edges:s}=$.useMemo(()=>{if(!n)return{nodes:[],edges:[]};if(!e){const x={};Object.entries(n.categories).forEach(([C,R])=>{x[R]||(x[R]={count:0,types:[]}),x[R].count++,x[R].types.push(C)});const w=Object.entries(x).sort((C,R)=>R[1].count-C[1].count).slice(0,8),_=new Set,A=[];w.forEach(([C,R])=>{const O=R.types.slice(0,5);O.forEach(I=>_.add(I)),n.edges.forEach(I=>{O.includes(I.source)&&O.includes(I.target)&&A.push(I)})});const T=Array.from(_).map(C=>({id:C,label:C,fill:E4(n.categories[C]||"unknown"),size:12})),E=A.map((C,R)=>({id:`${C.source}-${C.target}-${R}`,source:C.source,target:C.target,label:C.relationship,fill:M4(C.relationship)}));return{nodes:T,edges:E}}const a=new Set([e]),l=[],c=n.edges.filter(x=>{if(x.source!==e)return!1;const w=x.relationship.toLowerCase();return w==="contains"&&t.contains||w==="extends"&&t.extends||w==="generic"&&t.generic});c.forEach(x=>{a.add(x.target),l.push(x)});const f=c.map(x=>x.target);n.edges.filter(x=>{if(!f.includes(x.source))return!1;const w=x.relationship.toLowerCase();return w==="contains"&&t.contains||w==="extends"&&t.extends||w==="generic"&&t.generic}).slice(0,20).forEach(x=>{a.add(x.target),l.push(x)}),n.edges.filter(x=>{if(x.target!==e)return!1;const w=x.relationship.toLowerCase();return w==="contains"&&t.contains||w==="extends"&&t.extends||w==="generic"&&t.generic}).slice(0,10).forEach(x=>{a.add(x.source),l.push(x)});const v=Array.from(a).map(x=>{let w=10,_=E4(n.categories[x]||"unknown");return x===e?(w=25,_="#0176d3"):f.includes(x)&&(w=15),{id:x,label:x,fill:_,size:w}}),b=l.map((x,w)=>({id:`${x.source}-${x.target}-${w}`,source:x.source,target:x.target,label:x.relationship,fill:M4(x.relationship)}));return{nodes:v,edges:b}},[n,e,t]),o=a=>{a&&a.id&&i(a.id)};return ne.jsxs("div",{className:"graph-container",children:[ne.jsx("h3",{children:"Dependency Graph"}),ne.jsx("p",{className:"graph-note",children:e?`Multi-level dependency tree for: ${e}`:"Overview of type relationships - click any type to explore its dependency tree"}),ne.jsx("div",{style:{width:"100%",height:"700px",border:"1px solid #ddd",borderRadius:"8px",background:"#fafafa",position:"relative",overflow:"hidden"},children:ne.jsx(F_e,{nodes:r,edges:s,layoutType:"forceDirected2d",edgeArrowPosition:"end",onNodeClick:o,draggable:!0,readonly:!1,labelType:"all"})}),e&&ne.jsxs("div",{className:"info-box",style:{marginTop:"1rem"},children:[ne.jsx("strong",{children:"Tip:"})," The graph shows multiple levels of dependencies. The selected type (larger blue node) is at the center, with its direct dependencies and their dependencies radiating outward. Nodes pointing to the selected type depend on it."]})]})}function E4(n){return{common:"#0176d3",objects:"#2e844a",permissions:"#7b1fa2",flows:"#e65100",apex:"#d32f2f",lwc:"#00838f",ai:"#6a1b9a",ai_ml:"#6a1b9a",datacloud:"#00695c",data_cloud:"#00695c",settings:"#5c6bc0",automation:"#f57c00",reports:"#c62828",messaging:"#00acc1"}[n]||"#546e7a"}function M4(n){return{Contains:"#1565c0",Extends:"#7b1fa2",Generic:"#e65100"}[n]||"#546e7a"}function V_e({graphData:n,selectedType:e,searchQuery:t,onTypeSelect:i}){const[r,s]=$.useState(0),o=$.useMemo(()=>{if(!n||!t||t.trim().length===0)return[];const l=t.toLowerCase();return n.nodes.filter(c=>c.toLowerCase().includes(l))},[n,t]),a=$.useMemo(()=>{if(!n||!e)return null;const l=n.edges.filter(m=>m.source===e),c=n.edges.filter(m=>m.target===e),f=n.categories[e]||"unknown",d={Contains:l.filter(m=>m.relationship==="Contains"),Extends:l.filter(m=>m.relationship==="Extends"),Generic:l.filter(m=>m.relationship==="Generic")};return{category:f,dependencies:l,dependents:c,depsByRelationship:d}},[n,e]);return t&&t.trim().length>0?ne.jsxs("div",{className:"type-details",children:[ne.jsx("h2",{children:"Search Results"}),ne.jsxs("p",{children:["Found ",o.length,' types matching "',ne.jsx("strong",{children:t}),'"']}),o.length>50&&ne.jsx("p",{children:ne.jsx("em",{children:"Showing first 50 results"})}),ne.jsx("div",{className:"type-list",children:o.slice(0,50).map(l=>ne.jsxs("div",{className:"type-list-item",onClick:()=>i(l),children:[ne.jsx("span",{className:"type-name",children:l}),ne.jsx("span",{className:"relationship-badge contains",children:n.categories[l]||"unknown"})]},l))})]}):e?ne.jsxs("div",{className:"type-details",children:[ne.jsx("h2",{children:e}),ne.jsxs(vte,{selectedIndex:r,onSelect:s,children:[ne.jsxs(J3,{children:[ne.jsx(uE,{children:"Details"}),ne.jsx(uE,{children:"JSON Schema"})]}),ne.jsx(cE,{children:ne.jsxs("div",{className:"tab-content",children:[ne.jsxs("div",{className:"info-box",children:[ne.jsx("strong",{children:"Category:"})," ",a.category,ne.jsx("br",{}),ne.jsx("strong",{children:"Dependencies:"})," ",a.dependencies.length,ne.jsx("br",{}),ne.jsx("strong",{children:"Used by:"})," ",a.dependents.length," types"]}),Object.entries(a.depsByRelationship).filter(([l,c])=>c.length>0).map(([l,c])=>ne.jsxs("div",{children:[ne.jsxs("h3",{children:[l," Dependencies (",c.length,")"]}),ne.jsx("ul",{className:"dependency-list",children:c.map(f=>ne.jsxs("li",{className:"dependency-item",onClick:()=>i(f.target),children:[f.target,ne.jsx("span",{className:`relationship-badge ${f.relationship.toLowerCase()}`,children:f.relationship})]},f.target))})]},l)),a.dependents.length>0&&ne.jsxs("div",{children:[ne.jsxs("h3",{children:["Used By (",a.dependents.length,")"]}),ne.jsxs("ul",{className:"dependency-list",children:[a.dependents.slice(0,20).map(l=>ne.jsxs("li",{className:"dependency-item",onClick:()=>i(l.source),children:[l.source,ne.jsx("span",{className:`relationship-badge ${l.relationship.toLowerCase()}`,children:l.relationship})]},l.source)),a.dependents.length>20&&ne.jsx("li",{style:{padding:"0.5rem",color:"var(--text-secondary)"},children:ne.jsxs("em",{children:["... and ",a.dependents.length-20," more"]})})]})]})]})}),ne.jsx(cE,{children:ne.jsx("div",{className:"tab-content",children:ne.jsxs("div",{className:"info-box",children:[ne.jsx("h3",{children:"JSON Schema"}),ne.jsxs("p",{children:["JSON Schema generation for this type is currently in development. Once available, the schema will be displayed here showing the structure, field types, and validation rules for ",ne.jsx("strong",{children:e}),"."]}),ne.jsxs("p",{style:{marginTop:"1rem",fontSize:"0.9rem",color:"#706e6b"},children:["See the"," ",ne.jsx("a",{href:"https://github.com/composable-delivery/busbar-sf-types#json-schemas",target:"_blank",rel:"noopener noreferrer",children:"README"})," ","for information about enabling JSON Schema support."]})]})})})]})]}):ne.jsxs("div",{className:"type-details",children:[ne.jsx("h2",{children:"Welcome to Salesforce Types Explorer"}),ne.jsx("p",{children:"Select a type from the search results, graph, or browse by category to explore dependencies."}),ne.jsxs("div",{className:"info-box",children:[ne.jsx("h3",{children:"About"}),ne.jsx("p",{children:"This interactive tool visualizes the dependency graph of Salesforce metadata types. The graph shows:"}),ne.jsxs("ul",{children:[ne.jsxs("li",{children:[ne.jsx("strong",{children:"Contains:"})," Type A has a field of Type B"]}),ne.jsxs("li",{children:[ne.jsx("strong",{children:"Extends:"})," Type A extends/inherits from Type B"]}),ne.jsxs("li",{children:[ne.jsx("strong",{children:"Generic:"})," Type A is a generic instantiation of Type B"]})]})]})]})}function Kh(n){return function(){return n}}const T4=Math.abs,Zs=Math.atan2,Rp=Math.cos,G_e=Math.max,l3=Math.min,nu=Math.sin,g0=Math.sqrt,la=1e-12,j_=Math.PI,xM=j_/2,H_e=2*j_;function j_e(n){return n>1?0:n<-1?j_:Math.acos(n)}function A4(n){return n>=1?xM:n<=-1?-xM:Math.asin(n)}const KD=Math.PI,QD=2*KD,Up=1e-6,W_e=QD-Up;function M9(n){this._+=n[0];for(let e=1,t=n.length;e<t;++e)this._+=arguments[e]+n[e]}function $_e(n){let e=Math.floor(n);if(!(e>=0))throw new Error(`invalid digits: ${n}`);if(e>15)return M9;const t=10**e;return function(i){this._+=i[0];for(let r=1,s=i.length;r<s;++r)this._+=Math.round(arguments[r]*t)/t+i[r]}}class q_e{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?M9:$_e(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,i,r){this._append`Q${+e},${+t},${this._x1=+i},${this._y1=+r}`}bezierCurveTo(e,t,i,r,s,o){this._append`C${+e},${+t},${+i},${+r},${this._x1=+s},${this._y1=+o}`}arcTo(e,t,i,r,s){if(e=+e,t=+t,i=+i,r=+r,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,l=i-e,c=r-t,f=o-e,d=a-t,m=f*f+d*d;if(this._x1===null)this._append`M${this._x1=e},${this._y1=t}`;else if(m>Up)if(!(Math.abs(d*l-c*f)>Up)||!s)this._append`L${this._x1=e},${this._y1=t}`;else{let v=i-o,b=r-a,x=l*l+c*c,w=v*v+b*b,_=Math.sqrt(x),A=Math.sqrt(m),T=s*Math.tan((KD-Math.acos((x+m-w)/(2*_*A)))/2),E=T/A,C=T/_;Math.abs(E-1)>Up&&this._append`L${e+E*f},${t+E*d}`,this._append`A${s},${s},0,0,${+(d*v>f*b)},${this._x1=e+C*l},${this._y1=t+C*c}`}}arc(e,t,i,r,s,o){if(e=+e,t=+t,i=+i,o=!!o,i<0)throw new Error(`negative radius: ${i}`);let a=i*Math.cos(r),l=i*Math.sin(r),c=e+a,f=t+l,d=1^o,m=o?r-s:s-r;this._x1===null?this._append`M${c},${f}`:(Math.abs(this._x1-c)>Up||Math.abs(this._y1-f)>Up)&&this._append`L${c},${f}`,i&&(m<0&&(m=m%QD+QD),m>W_e?this._append`A${i},${i},0,1,${d},${e-a},${t-l}A${i},${i},0,1,${d},${this._x1=c},${this._y1=f}`:m>Up&&this._append`A${i},${i},0,${+(m>=KD)},${d},${this._x1=e+i*Math.cos(s)},${this._y1=t+i*Math.sin(s)}`)}rect(e,t,i,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${i=+i}v${+r}h${-i}Z`}toString(){return this._}}function X_e(n){let e=3;return n.digits=function(t){if(!arguments.length)return e;if(t==null)e=null;else{const i=Math.floor(t);if(!(i>=0))throw new RangeError(`invalid digits: ${t}`);e=i}return n},()=>new q_e(e)}function Y_e(n){return n.innerRadius}function Z_e(n){return n.outerRadius}function K_e(n){return n.startAngle}function Q_e(n){return n.endAngle}function J_e(n){return n&&n.padAngle}function exe(n,e,t,i,r,s,o,a){var l=t-n,c=i-e,f=o-r,d=a-s,m=d*l-f*c;if(!(m*m<la))return m=(f*(e-s)-d*(n-r))/m,[n+m*l,e+m*c]}function bS(n,e,t,i,r,s,o){var a=n-t,l=e-i,c=(o?s:-s)/g0(a*a+l*l),f=c*l,d=-c*a,m=n+f,v=e+d,b=t+f,x=i+d,w=(m+b)/2,_=(v+x)/2,A=b-m,T=x-v,E=A*A+T*T,C=r-s,R=m*x-b*v,O=(T<0?-1:1)*g0(G_e(0,C*C*E-R*R)),I=(R*T-A*O)/E,L=(-R*A-T*O)/E,N=(R*T+A*O)/E,V=(-R*A+T*O)/E,B=I-w,k=L-_,j=N-w,q=V-_;return B*B+k*k>j*j+q*q&&(I=N,L=V),{cx:I,cy:L,x01:-f,y01:-d,x11:I*(r/C-1),y11:L*(r/C-1)}}function C4(){var n=Y_e,e=Z_e,t=Kh(0),i=null,r=K_e,s=Q_e,o=J_e,a=null,l=X_e(c);function c(){var f,d,m=+n.apply(this,arguments),v=+e.apply(this,arguments),b=r.apply(this,arguments)-xM,x=s.apply(this,arguments)-xM,w=T4(x-b),_=x>b;if(a||(a=f=l()),v<m&&(d=v,v=m,m=d),!(v>la))a.moveTo(0,0);else if(w>H_e-la)a.moveTo(v*Rp(b),v*nu(b)),a.arc(0,0,v,b,x,!_),m>la&&(a.moveTo(m*Rp(x),m*nu(x)),a.arc(0,0,m,x,b,_));else{var A=b,T=x,E=b,C=x,R=w,O=w,I=o.apply(this,arguments)/2,L=I>la&&(i?+i.apply(this,arguments):g0(m*m+v*v)),N=l3(T4(v-m)/2,+t.apply(this,arguments)),V=N,B=N,k,j;if(L>la){var q=A4(L/m*nu(I)),W=A4(L/v*nu(I));(R-=q*2)>la?(q*=_?1:-1,E+=q,C-=q):(R=0,E=C=(b+x)/2),(O-=W*2)>la?(W*=_?1:-1,A+=W,T-=W):(O=0,A=T=(b+x)/2)}var G=v*Rp(A),K=v*nu(A),te=m*Rp(C),ie=m*nu(C);if(N>la){var F=v*Rp(T),X=v*nu(T),ee=m*Rp(E),le=m*nu(E),oe;if(w<j_)if(oe=exe(G,K,ee,le,F,X,te,ie)){var ue=G-oe[0],he=K-oe[1],be=F-oe[0],Te=X-oe[1],Ee=1/nu(j_e((ue*be+he*Te)/(g0(ue*ue+he*he)*g0(be*be+Te*Te)))/2),Ce=g0(oe[0]*oe[0]+oe[1]*oe[1]);V=l3(N,(m-Ce)/(Ee-1)),B=l3(N,(v-Ce)/(Ee+1))}else V=B=0}O>la?B>la?(k=bS(ee,le,G,K,v,B,_),j=bS(F,X,te,ie,v,B,_),a.moveTo(k.cx+k.x01,k.cy+k.y01),B<N?a.arc(k.cx,k.cy,B,Zs(k.y01,k.x01),Zs(j.y01,j.x01),!_):(a.arc(k.cx,k.cy,B,Zs(k.y01,k.x01),Zs(k.y11,k.x11),!_),a.arc(0,0,v,Zs(k.cy+k.y11,k.cx+k.x11),Zs(j.cy+j.y11,j.cx+j.x11),!_),a.arc(j.cx,j.cy,B,Zs(j.y11,j.x11),Zs(j.y01,j.x01),!_))):(a.moveTo(G,K),a.arc(0,0,v,A,T,!_)):a.moveTo(G,K),!(m>la)||!(R>la)?a.lineTo(te,ie):V>la?(k=bS(te,ie,F,X,m,-V,_),j=bS(G,K,ee,le,m,-V,_),a.lineTo(k.cx+k.x01,k.cy+k.y01),V<N?a.arc(k.cx,k.cy,V,Zs(k.y01,k.x01),Zs(j.y01,j.x01),!_):(a.arc(k.cx,k.cy,V,Zs(k.y01,k.x01),Zs(k.y11,k.x11),!_),a.arc(0,0,m,Zs(k.cy+k.y11,k.cx+k.x11),Zs(j.cy+j.y11,j.cx+j.x11),_),a.arc(j.cx,j.cy,V,Zs(j.y11,j.x11),Zs(j.y01,j.x01),!_))):a.arc(0,0,m,C,E,_)}if(a.closePath(),f)return a=null,f+""||null}return c.centroid=function(){var f=(+n.apply(this,arguments)+ +e.apply(this,arguments))/2,d=(+r.apply(this,arguments)+ +s.apply(this,arguments))/2-j_/2;return[Rp(d)*f,nu(d)*f]},c.innerRadius=function(f){return arguments.length?(n=typeof f=="function"?f:Kh(+f),c):n},c.outerRadius=function(f){return arguments.length?(e=typeof f=="function"?f:Kh(+f),c):e},c.cornerRadius=function(f){return arguments.length?(t=typeof f=="function"?f:Kh(+f),c):t},c.padRadius=function(f){return arguments.length?(i=f==null?null:typeof f=="function"?f:Kh(+f),c):i},c.startAngle=function(f){return arguments.length?(r=typeof f=="function"?f:Kh(+f),c):r},c.endAngle=function(f){return arguments.length?(s=typeof f=="function"?f:Kh(+f),c):s},c.padAngle=function(f){return arguments.length?(o=typeof f=="function"?f:Kh(+f),c):o},c.context=function(f){return arguments.length?(a=f??null,c):a},c}function DP(n,e){return Array.isArray(e)?[n.a*e[0]+n.c*e[1]+n.e,n.b*e[0]+n.d*e[1]+n.f]:{x:n.a*e.x+n.c*e.y+n.e,y:n.b*e.x+n.d*e.y+n.f}}function txe(n,e){return e.map(t=>DP(n,t))}function T9(n){const{a:e,b:t,c:i,d:r,e:s,f:o}=n,a=e*r-t*i;return{a:r/a,b:t/-a,c:i/-a,d:e/a,e:(r*s-i*o)/-a,f:(t*s-e*o)/a}}function c3(n){return typeof n>"u"}function W_(n,e=0){return{a:1,c:0,e:n,b:0,d:1,f:e}}function NT(...n){n=Array.isArray(n[0])?n[0]:n;const e=(t,i)=>({a:t.a*i.a+t.c*i.b,c:t.a*i.c+t.c*i.d,e:t.a*i.e+t.c*i.f+t.e,b:t.b*i.a+t.d*i.b,d:t.b*i.c+t.d*i.d,f:t.b*i.e+t.d*i.f+t.f});switch(n.length){case 0:throw new Error("no matrices provided");case 1:return n[0];case 2:return e(n[0],n[1]);default:{const[t,i,...r]=n,s=e(t,i);return NT(s,...r)}}}function nxe(n,e=void 0,t=void 0,i=void 0){c3(e)&&(e=n);const r={a:n,c:0,e:0,b:0,d:e,f:0};return c3(t)||c3(i)?r:NT([W_(t,i),r,W_(-t,-i)])}function A9(n,e=1e10){return{a:Math.round(n.a*e)/e,b:Math.round(n.b*e)/e,c:Math.round(n.c*e)/e,d:Math.round(n.d*e)/e,e:Math.round(n.e*e)/e,f:Math.round(n.f*e)/e}}var wb={exports:{}},R4;function ixe(){if(R4)return wb.exports;R4=1;const n={ellipse:"",chars:[" ","-"],max:140,truncate:!0};function e(i,r,s,o){if(i.length<=r)return i;if(r<2)return i.slice(0,r-s.length)+s;const a=r-s.length,l=Math.floor(a/2);let c=l,f=i.length-l;for(let d=0;d<l;d++){const m=i.charAt(d),v=i.length-d,b=i.charAt(v);o.indexOf(m)!==-1&&(c=d),o.indexOf(b)!==-1&&(f=v)}return i.slice(0,c)+s+i.slice(f)}function t(i,r,s,o,a){if(i.length<=r)return i;const l=r-s.length;let c=l,f=!1;for(let d=0;d<=l;d++){const m=i.charAt(d);o.indexOf(m)!==-1&&(c=d,f=!0)}return!a&&!f?"":i.slice(0,c)+s}return wb.exports=(i,r,s)=>{if(typeof i!="string"||i.length===0||r===0)return"";s=s||{};for(var o in n)(s[o]===null||typeof s[o]>"u")&&(s[o]=n[o]);return s.max=r||s.max,s.truncate==="middle"?e(i,s.max,s.ellipse,s.chars):t(i,s.max,s.ellipse,s.chars,s.truncate)},wb.exports.ellipsizeMiddle=e,wb.exports.ellipsize=t,wb.exports}ixe();var u3={exports:{}},D4;function rxe(){return D4||(D4=1,(function(n){var e=(function(t){var i=1e7,r=7,s=9007199254740992,o=b(s),a="0123456789abcdefghijklmnopqrstuvwxyz",l=typeof BigInt=="function";function c(Y,J,re,ge){return typeof Y>"u"?c[0]:typeof J<"u"?+J==10&&!re?Z(Y):Ie(Y,J,re,ge):Z(Y)}function f(Y,J){this.value=Y,this.sign=J,this.isSmall=!1}f.prototype=Object.create(c.prototype);function d(Y){this.value=Y,this.sign=Y<0,this.isSmall=!0}d.prototype=Object.create(c.prototype);function m(Y){this.value=Y}m.prototype=Object.create(c.prototype);function v(Y){return-s<Y&&Y<s}function b(Y){return Y<1e7?[Y]:Y<1e14?[Y%1e7,Math.floor(Y/1e7)]:[Y%1e7,Math.floor(Y/1e7)%1e7,Math.floor(Y/1e14)]}function x(Y){w(Y);var J=Y.length;if(J<4&&ie(Y,o)<0)switch(J){case 0:return 0;case 1:return Y[0];case 2:return Y[0]+Y[1]*i;default:return Y[0]+(Y[1]+Y[2]*i)*i}return Y}function w(Y){for(var J=Y.length;Y[--J]===0;);Y.length=J+1}function _(Y){for(var J=new Array(Y),re=-1;++re<Y;)J[re]=0;return J}function A(Y){return Y>0?Math.floor(Y):Math.ceil(Y)}function T(Y,J){var re=Y.length,ge=J.length,_e=new Array(re),Se=0,Ue=i,Me,Le;for(Le=0;Le<ge;Le++)Me=Y[Le]+J[Le]+Se,Se=Me>=Ue?1:0,_e[Le]=Me-Se*Ue;for(;Le<re;)Me=Y[Le]+Se,Se=Me===Ue?1:0,_e[Le++]=Me-Se*Ue;return Se>0&&_e.push(Se),_e}function E(Y,J){return Y.length>=J.length?T(Y,J):T(J,Y)}function C(Y,J){var re=Y.length,ge=new Array(re),_e=i,Se,Ue;for(Ue=0;Ue<re;Ue++)Se=Y[Ue]-_e+J,J=Math.floor(Se/_e),ge[Ue]=Se-J*_e,J+=1;for(;J>0;)ge[Ue++]=J%_e,J=Math.floor(J/_e);return ge}f.prototype.add=function(Y){var J=Z(Y);if(this.sign!==J.sign)return this.subtract(J.negate());var re=this.value,ge=J.value;return J.isSmall?new f(C(re,Math.abs(ge)),this.sign):new f(E(re,ge),this.sign)},f.prototype.plus=f.prototype.add,d.prototype.add=function(Y){var J=Z(Y),re=this.value;if(re<0!==J.sign)return this.subtract(J.negate());var ge=J.value;if(J.isSmall){if(v(re+ge))return new d(re+ge);ge=b(Math.abs(ge))}return new f(C(ge,Math.abs(re)),re<0)},d.prototype.plus=d.prototype.add,m.prototype.add=function(Y){return new m(this.value+Z(Y).value)},m.prototype.plus=m.prototype.add;function R(Y,J){var re=Y.length,ge=J.length,_e=new Array(re),Se=0,Ue=i,Me,Le;for(Me=0;Me<ge;Me++)Le=Y[Me]-Se-J[Me],Le<0?(Le+=Ue,Se=1):Se=0,_e[Me]=Le;for(Me=ge;Me<re;Me++){if(Le=Y[Me]-Se,Le<0)Le+=Ue;else{_e[Me++]=Le;break}_e[Me]=Le}for(;Me<re;Me++)_e[Me]=Y[Me];return w(_e),_e}function O(Y,J,re){var ge;return ie(Y,J)>=0?ge=R(Y,J):(ge=R(J,Y),re=!re),ge=x(ge),typeof ge=="number"?(re&&(ge=-ge),new d(ge)):new f(ge,re)}function I(Y,J,re){var ge=Y.length,_e=new Array(ge),Se=-J,Ue=i,Me,Le;for(Me=0;Me<ge;Me++)Le=Y[Me]+Se,Se=Math.floor(Le/Ue),Le%=Ue,_e[Me]=Le<0?Le+Ue:Le;return _e=x(_e),typeof _e=="number"?(re&&(_e=-_e),new d(_e)):new f(_e,re)}f.prototype.subtract=function(Y){var J=Z(Y);if(this.sign!==J.sign)return this.add(J.negate());var re=this.value,ge=J.value;return J.isSmall?I(re,Math.abs(ge),this.sign):O(re,ge,this.sign)},f.prototype.minus=f.prototype.subtract,d.prototype.subtract=function(Y){var J=Z(Y),re=this.value;if(re<0!==J.sign)return this.add(J.negate());var ge=J.value;return J.isSmall?new d(re-ge):I(ge,Math.abs(re),re>=0)},d.prototype.minus=d.prototype.subtract,m.prototype.subtract=function(Y){return new m(this.value-Z(Y).value)},m.prototype.minus=m.prototype.subtract,f.prototype.negate=function(){return new f(this.value,!this.sign)},d.prototype.negate=function(){var Y=this.sign,J=new d(-this.value);return J.sign=!Y,J},m.prototype.negate=function(){return new m(-this.value)},f.prototype.abs=function(){return new f(this.value,!1)},d.prototype.abs=function(){return new d(Math.abs(this.value))},m.prototype.abs=function(){return new m(this.value>=0?this.value:-this.value)};function L(Y,J){var re=Y.length,ge=J.length,_e=re+ge,Se=_(_e),Ue=i,Me,Le,He,nt,Je;for(He=0;He<re;++He){nt=Y[He];for(var gt=0;gt<ge;++gt)Je=J[gt],Me=nt*Je+Se[He+gt],Le=Math.floor(Me/Ue),Se[He+gt]=Me-Le*Ue,Se[He+gt+1]+=Le}return w(Se),Se}function N(Y,J){var re=Y.length,ge=new Array(re),_e=i,Se=0,Ue,Me;for(Me=0;Me<re;Me++)Ue=Y[Me]*J+Se,Se=Math.floor(Ue/_e),ge[Me]=Ue-Se*_e;for(;Se>0;)ge[Me++]=Se%_e,Se=Math.floor(Se/_e);return ge}function V(Y,J){for(var re=[];J-- >0;)re.push(0);return re.concat(Y)}function B(Y,J){var re=Math.max(Y.length,J.length);if(re<=30)return L(Y,J);re=Math.ceil(re/2);var ge=Y.slice(re),_e=Y.slice(0,re),Se=J.slice(re),Ue=J.slice(0,re),Me=B(_e,Ue),Le=B(ge,Se),He=B(E(_e,ge),E(Ue,Se)),nt=E(E(Me,V(R(R(He,Me),Le),re)),V(Le,2*re));return w(nt),nt}function k(Y,J){return-.012*Y-.012*J+15e-6*Y*J>0}f.prototype.multiply=function(Y){var J=Z(Y),re=this.value,ge=J.value,_e=this.sign!==J.sign,Se;if(J.isSmall){if(ge===0)return c[0];if(ge===1)return this;if(ge===-1)return this.negate();if(Se=Math.abs(ge),Se<i)return new f(N(re,Se),_e);ge=b(Se)}return k(re.length,ge.length)?new f(B(re,ge),_e):new f(L(re,ge),_e)},f.prototype.times=f.prototype.multiply;function j(Y,J,re){return Y<i?new f(N(J,Y),re):new f(L(J,b(Y)),re)}d.prototype._multiplyBySmall=function(Y){return v(Y.value*this.value)?new d(Y.value*this.value):j(Math.abs(Y.value),b(Math.abs(this.value)),this.sign!==Y.sign)},f.prototype._multiplyBySmall=function(Y){return Y.value===0?c[0]:Y.value===1?this:Y.value===-1?this.negate():j(Math.abs(Y.value),this.value,this.sign!==Y.sign)},d.prototype.multiply=function(Y){return Z(Y)._multiplyBySmall(this)},d.prototype.times=d.prototype.multiply,m.prototype.multiply=function(Y){return new m(this.value*Z(Y).value)},m.prototype.times=m.prototype.multiply;function q(Y){var J=Y.length,re=_(J+J),ge=i,_e,Se,Ue,Me,Le;for(Ue=0;Ue<J;Ue++){Me=Y[Ue],Se=0-Me*Me;for(var He=Ue;He<J;He++)Le=Y[He],_e=2*(Me*Le)+re[Ue+He]+Se,Se=Math.floor(_e/ge),re[Ue+He]=_e-Se*ge;re[Ue+J]=Se}return w(re),re}f.prototype.square=function(){return new f(q(this.value),!1)},d.prototype.square=function(){var Y=this.value*this.value;return v(Y)?new d(Y):new f(q(b(Math.abs(this.value))),!1)},m.prototype.square=function(Y){return new m(this.value*this.value)};function W(Y,J){var re=Y.length,ge=J.length,_e=i,Se=_(J.length),Ue=J[ge-1],Me=Math.ceil(_e/(2*Ue)),Le=N(Y,Me),He=N(J,Me),nt,Je,gt,Re,$e,at,_t;for(Le.length<=re&&Le.push(0),He.push(0),Ue=He[ge-1],Je=re-ge;Je>=0;Je--){for(nt=_e-1,Le[Je+ge]!==Ue&&(nt=Math.floor((Le[Je+ge]*_e+Le[Je+ge-1])/Ue)),gt=0,Re=0,at=He.length,$e=0;$e<at;$e++)gt+=nt*He[$e],_t=Math.floor(gt/_e),Re+=Le[Je+$e]-(gt-_t*_e),gt=_t,Re<0?(Le[Je+$e]=Re+_e,Re=-1):(Le[Je+$e]=Re,Re=0);for(;Re!==0;){for(nt-=1,gt=0,$e=0;$e<at;$e++)gt+=Le[Je+$e]-_e+He[$e],gt<0?(Le[Je+$e]=gt+_e,gt=0):(Le[Je+$e]=gt,gt=1);Re+=gt}Se[Je]=nt}return Le=K(Le,Me)[0],[x(Se),x(Le)]}function G(Y,J){for(var re=Y.length,ge=J.length,_e=[],Se=[],Ue=i,Me,Le,He,nt,Je;re;){if(Se.unshift(Y[--re]),w(Se),ie(Se,J)<0){_e.push(0);continue}Le=Se.length,He=Se[Le-1]*Ue+Se[Le-2],nt=J[ge-1]*Ue+J[ge-2],Le>ge&&(He=(He+1)*Ue),Me=Math.ceil(He/nt);do{if(Je=N(J,Me),ie(Je,Se)<=0)break;Me--}while(Me);_e.push(Me),Se=R(Se,Je)}return _e.reverse(),[x(_e),x(Se)]}function K(Y,J){var re=Y.length,ge=_(re),_e=i,Se,Ue,Me,Le;for(Me=0,Se=re-1;Se>=0;--Se)Le=Me*_e+Y[Se],Ue=A(Le/J),Me=Le-Ue*J,ge[Se]=Ue|0;return[ge,Me|0]}function te(Y,J){var re,ge=Z(J);if(l)return[new m(Y.value/ge.value),new m(Y.value%ge.value)];var _e=Y.value,Se=ge.value,Ue;if(Se===0)throw new Error("Cannot divide by zero");if(Y.isSmall)return ge.isSmall?[new d(A(_e/Se)),new d(_e%Se)]:[c[0],Y];if(ge.isSmall){if(Se===1)return[Y,c[0]];if(Se==-1)return[Y.negate(),c[0]];var Me=Math.abs(Se);if(Me<i){re=K(_e,Me),Ue=x(re[0]);var Le=re[1];return Y.sign&&(Le=-Le),typeof Ue=="number"?(Y.sign!==ge.sign&&(Ue=-Ue),[new d(Ue),new d(Le)]):[new f(Ue,Y.sign!==ge.sign),new d(Le)]}Se=b(Me)}var He=ie(_e,Se);if(He===-1)return[c[0],Y];if(He===0)return[c[Y.sign===ge.sign?1:-1],c[0]];_e.length+Se.length<=200?re=W(_e,Se):re=G(_e,Se),Ue=re[0];var nt=Y.sign!==ge.sign,Je=re[1],gt=Y.sign;return typeof Ue=="number"?(nt&&(Ue=-Ue),Ue=new d(Ue)):Ue=new f(Ue,nt),typeof Je=="number"?(gt&&(Je=-Je),Je=new d(Je)):Je=new f(Je,gt),[Ue,Je]}f.prototype.divmod=function(Y){var J=te(this,Y);return{quotient:J[0],remainder:J[1]}},m.prototype.divmod=d.prototype.divmod=f.prototype.divmod,f.prototype.divide=function(Y){return te(this,Y)[0]},m.prototype.over=m.prototype.divide=function(Y){return new m(this.value/Z(Y).value)},d.prototype.over=d.prototype.divide=f.prototype.over=f.prototype.divide,f.prototype.mod=function(Y){return te(this,Y)[1]},m.prototype.mod=m.prototype.remainder=function(Y){return new m(this.value%Z(Y).value)},d.prototype.remainder=d.prototype.mod=f.prototype.remainder=f.prototype.mod,f.prototype.pow=function(Y){var J=Z(Y),re=this.value,ge=J.value,_e,Se,Ue;if(ge===0)return c[1];if(re===0)return c[0];if(re===1)return c[1];if(re===-1)return J.isEven()?c[1]:c[-1];if(J.sign)return c[0];if(!J.isSmall)throw new Error("The exponent "+J.toString()+" is too large.");if(this.isSmall&&v(_e=Math.pow(re,ge)))return new d(A(_e));for(Se=this,Ue=c[1];ge&!0&&(Ue=Ue.times(Se),--ge),ge!==0;)ge/=2,Se=Se.square();return Ue},d.prototype.pow=f.prototype.pow,m.prototype.pow=function(Y){var J=Z(Y),re=this.value,ge=J.value,_e=BigInt(0),Se=BigInt(1),Ue=BigInt(2);if(ge===_e)return c[1];if(re===_e)return c[0];if(re===Se)return c[1];if(re===BigInt(-1))return J.isEven()?c[1]:c[-1];if(J.isNegative())return new m(_e);for(var Me=this,Le=c[1];(ge&Se)===Se&&(Le=Le.times(Me),--ge),ge!==_e;)ge/=Ue,Me=Me.square();return Le},f.prototype.modPow=function(Y,J){if(Y=Z(Y),J=Z(J),J.isZero())throw new Error("Cannot take modPow with modulus 0");var re=c[1],ge=this.mod(J);for(Y.isNegative()&&(Y=Y.multiply(c[-1]),ge=ge.modInv(J));Y.isPositive();){if(ge.isZero())return c[0];Y.isOdd()&&(re=re.multiply(ge).mod(J)),Y=Y.divide(2),ge=ge.square().mod(J)}return re},m.prototype.modPow=d.prototype.modPow=f.prototype.modPow;function ie(Y,J){if(Y.length!==J.length)return Y.length>J.length?1:-1;for(var re=Y.length-1;re>=0;re--)if(Y[re]!==J[re])return Y[re]>J[re]?1:-1;return 0}f.prototype.compareAbs=function(Y){var J=Z(Y),re=this.value,ge=J.value;return J.isSmall?1:ie(re,ge)},d.prototype.compareAbs=function(Y){var J=Z(Y),re=Math.abs(this.value),ge=J.value;return J.isSmall?(ge=Math.abs(ge),re===ge?0:re>ge?1:-1):-1},m.prototype.compareAbs=function(Y){var J=this.value,re=Z(Y).value;return J=J>=0?J:-J,re=re>=0?re:-re,J===re?0:J>re?1:-1},f.prototype.compare=function(Y){if(Y===1/0)return-1;if(Y===-1/0)return 1;var J=Z(Y),re=this.value,ge=J.value;return this.sign!==J.sign?J.sign?1:-1:J.isSmall?this.sign?-1:1:ie(re,ge)*(this.sign?-1:1)},f.prototype.compareTo=f.prototype.compare,d.prototype.compare=function(Y){if(Y===1/0)return-1;if(Y===-1/0)return 1;var J=Z(Y),re=this.value,ge=J.value;return J.isSmall?re==ge?0:re>ge?1:-1:re<0!==J.sign?re<0?-1:1:re<0?1:-1},d.prototype.compareTo=d.prototype.compare,m.prototype.compare=function(Y){if(Y===1/0)return-1;if(Y===-1/0)return 1;var J=this.value,re=Z(Y).value;return J===re?0:J>re?1:-1},m.prototype.compareTo=m.prototype.compare,f.prototype.equals=function(Y){return this.compare(Y)===0},m.prototype.eq=m.prototype.equals=d.prototype.eq=d.prototype.equals=f.prototype.eq=f.prototype.equals,f.prototype.notEquals=function(Y){return this.compare(Y)!==0},m.prototype.neq=m.prototype.notEquals=d.prototype.neq=d.prototype.notEquals=f.prototype.neq=f.prototype.notEquals,f.prototype.greater=function(Y){return this.compare(Y)>0},m.prototype.gt=m.prototype.greater=d.prototype.gt=d.prototype.greater=f.prototype.gt=f.prototype.greater,f.prototype.lesser=function(Y){return this.compare(Y)<0},m.prototype.lt=m.prototype.lesser=d.prototype.lt=d.prototype.lesser=f.prototype.lt=f.prototype.lesser,f.prototype.greaterOrEquals=function(Y){return this.compare(Y)>=0},m.prototype.geq=m.prototype.greaterOrEquals=d.prototype.geq=d.prototype.greaterOrEquals=f.prototype.geq=f.prototype.greaterOrEquals,f.prototype.lesserOrEquals=function(Y){return this.compare(Y)<=0},m.prototype.leq=m.prototype.lesserOrEquals=d.prototype.leq=d.prototype.lesserOrEquals=f.prototype.leq=f.prototype.lesserOrEquals,f.prototype.isEven=function(){return(this.value[0]&1)===0},d.prototype.isEven=function(){return(this.value&1)===0},m.prototype.isEven=function(){return(this.value&BigInt(1))===BigInt(0)},f.prototype.isOdd=function(){return(this.value[0]&1)===1},d.prototype.isOdd=function(){return(this.value&1)===1},m.prototype.isOdd=function(){return(this.value&BigInt(1))===BigInt(1)},f.prototype.isPositive=function(){return!this.sign},d.prototype.isPositive=function(){return this.value>0},m.prototype.isPositive=d.prototype.isPositive,f.prototype.isNegative=function(){return this.sign},d.prototype.isNegative=function(){return this.value<0},m.prototype.isNegative=d.prototype.isNegative,f.prototype.isUnit=function(){return!1},d.prototype.isUnit=function(){return Math.abs(this.value)===1},m.prototype.isUnit=function(){return this.abs().value===BigInt(1)},f.prototype.isZero=function(){return!1},d.prototype.isZero=function(){return this.value===0},m.prototype.isZero=function(){return this.value===BigInt(0)},f.prototype.isDivisibleBy=function(Y){var J=Z(Y);return J.isZero()?!1:J.isUnit()?!0:J.compareAbs(2)===0?this.isEven():this.mod(J).isZero()},m.prototype.isDivisibleBy=d.prototype.isDivisibleBy=f.prototype.isDivisibleBy;function F(Y){var J=Y.abs();if(J.isUnit())return!1;if(J.equals(2)||J.equals(3)||J.equals(5))return!0;if(J.isEven()||J.isDivisibleBy(3)||J.isDivisibleBy(5))return!1;if(J.lesser(49))return!0}function X(Y,J){for(var re=Y.prev(),ge=re,_e=0,Se,Ue,Me;ge.isEven();)ge=ge.divide(2),_e++;e:for(Ue=0;Ue<J.length;Ue++)if(!Y.lesser(J[Ue])&&(Me=e(J[Ue]).modPow(ge,Y),!(Me.isUnit()||Me.equals(re)))){for(Se=_e-1;Se!=0;Se--){if(Me=Me.square().mod(Y),Me.isUnit())return!1;if(Me.equals(re))continue e}return!1}return!0}f.prototype.isPrime=function(Y){var J=F(this);if(J!==t)return J;var re=this.abs(),ge=re.bitLength();if(ge<=64)return X(re,[2,3,5,7,11,13,17,19,23,29,31,37]);for(var _e=Math.log(2)*ge.toJSNumber(),Se=Math.ceil(Y===!0?2*Math.pow(_e,2):_e),Ue=[],Me=0;Me<Se;Me++)Ue.push(e(Me+2));return X(re,Ue)},m.prototype.isPrime=d.prototype.isPrime=f.prototype.isPrime,f.prototype.isProbablePrime=function(Y,J){var re=F(this);if(re!==t)return re;for(var ge=this.abs(),_e=Y===t?5:Y,Se=[],Ue=0;Ue<_e;Ue++)Se.push(e.randBetween(2,ge.minus(2),J));return X(ge,Se)},m.prototype.isProbablePrime=d.prototype.isProbablePrime=f.prototype.isProbablePrime,f.prototype.modInv=function(Y){for(var J=e.zero,re=e.one,ge=Z(Y),_e=this.abs(),Se,Ue,Me;!_e.isZero();)Se=ge.divide(_e),Ue=J,Me=ge,J=re,ge=_e,re=Ue.subtract(Se.multiply(re)),_e=Me.subtract(Se.multiply(_e));if(!ge.isUnit())throw new Error(this.toString()+" and "+Y.toString()+" are not co-prime");return J.compare(0)===-1&&(J=J.add(Y)),this.isNegative()?J.negate():J},m.prototype.modInv=d.prototype.modInv=f.prototype.modInv,f.prototype.next=function(){var Y=this.value;return this.sign?I(Y,1,this.sign):new f(C(Y,1),this.sign)},d.prototype.next=function(){var Y=this.value;return Y+1<s?new d(Y+1):new f(o,!1)},m.prototype.next=function(){return new m(this.value+BigInt(1))},f.prototype.prev=function(){var Y=this.value;return this.sign?new f(C(Y,1),!0):I(Y,1,this.sign)},d.prototype.prev=function(){var Y=this.value;return Y-1>-s?new d(Y-1):new f(o,!0)},m.prototype.prev=function(){return new m(this.value-BigInt(1))};for(var ee=[1];2*ee[ee.length-1]<=i;)ee.push(2*ee[ee.length-1]);var le=ee.length,oe=ee[le-1];function ue(Y){return Math.abs(Y)<=i}f.prototype.shiftLeft=function(Y){var J=Z(Y).toJSNumber();if(!ue(J))throw new Error(String(J)+" is too large for shifting.");if(J<0)return this.shiftRight(-J);var re=this;if(re.isZero())return re;for(;J>=le;)re=re.multiply(oe),J-=le-1;return re.multiply(ee[J])},m.prototype.shiftLeft=d.prototype.shiftLeft=f.prototype.shiftLeft,f.prototype.shiftRight=function(Y){var J,re=Z(Y).toJSNumber();if(!ue(re))throw new Error(String(re)+" is too large for shifting.");if(re<0)return this.shiftLeft(-re);for(var ge=this;re>=le;){if(ge.isZero()||ge.isNegative()&&ge.isUnit())return ge;J=te(ge,oe),ge=J[1].isNegative()?J[0].prev():J[0],re-=le-1}return J=te(ge,ee[re]),J[1].isNegative()?J[0].prev():J[0]},m.prototype.shiftRight=d.prototype.shiftRight=f.prototype.shiftRight;function he(Y,J,re){J=Z(J);for(var ge=Y.isNegative(),_e=J.isNegative(),Se=ge?Y.not():Y,Ue=_e?J.not():J,Me=0,Le=0,He=null,nt=null,Je=[];!Se.isZero()||!Ue.isZero();)He=te(Se,oe),Me=He[1].toJSNumber(),ge&&(Me=oe-1-Me),nt=te(Ue,oe),Le=nt[1].toJSNumber(),_e&&(Le=oe-1-Le),Se=He[0],Ue=nt[0],Je.push(re(Me,Le));for(var gt=re(ge?1:0,_e?1:0)!==0?e(-1):e(0),Re=Je.length-1;Re>=0;Re-=1)gt=gt.multiply(oe).add(e(Je[Re]));return gt}f.prototype.not=function(){return this.negate().prev()},m.prototype.not=d.prototype.not=f.prototype.not,f.prototype.and=function(Y){return he(this,Y,function(J,re){return J&re})},m.prototype.and=d.prototype.and=f.prototype.and,f.prototype.or=function(Y){return he(this,Y,function(J,re){return J|re})},m.prototype.or=d.prototype.or=f.prototype.or,f.prototype.xor=function(Y){return he(this,Y,function(J,re){return J^re})},m.prototype.xor=d.prototype.xor=f.prototype.xor;var be=1<<30,Te=(i&-i)*(i&-i)|be;function Ee(Y){var J=Y.value,re=typeof J=="number"?J|be:typeof J=="bigint"?J|BigInt(be):J[0]+J[1]*i|Te;return re&-re}function Ce(Y,J){if(J.compareTo(Y)<=0){var re=Ce(Y,J.square(J)),ge=re.p,_e=re.e,Se=ge.multiply(J);return Se.compareTo(Y)<=0?{p:Se,e:_e*2+1}:{p:ge,e:_e*2}}return{p:e(1),e:0}}f.prototype.bitLength=function(){var Y=this;return Y.compareTo(e(0))<0&&(Y=Y.negate().subtract(e(1))),Y.compareTo(e(0))===0?e(0):e(Ce(Y,e(2)).e).add(e(1))},m.prototype.bitLength=d.prototype.bitLength=f.prototype.bitLength;function we(Y,J){return Y=Z(Y),J=Z(J),Y.greater(J)?Y:J}function ae(Y,J){return Y=Z(Y),J=Z(J),Y.lesser(J)?Y:J}function ve(Y,J){if(Y=Z(Y).abs(),J=Z(J).abs(),Y.equals(J))return Y;if(Y.isZero())return J;if(J.isZero())return Y;for(var re=c[1],ge,_e;Y.isEven()&&J.isEven();)ge=ae(Ee(Y),Ee(J)),Y=Y.divide(ge),J=J.divide(ge),re=re.multiply(ge);for(;Y.isEven();)Y=Y.divide(Ee(Y));do{for(;J.isEven();)J=J.divide(Ee(J));Y.greater(J)&&(_e=J,J=Y,Y=_e),J=J.subtract(Y)}while(!J.isZero());return re.isUnit()?Y:Y.multiply(re)}function xe(Y,J){return Y=Z(Y).abs(),J=Z(J).abs(),Y.divide(ve(Y,J)).multiply(J)}function me(Y,J,re){Y=Z(Y),J=Z(J);var ge=re||Math.random,_e=ae(Y,J),Se=we(Y,J),Ue=Se.subtract(_e).add(1);if(Ue.isSmall)return _e.add(Math.floor(ge()*Ue));for(var Me=Fe(Ue,i).value,Le=[],He=!0,nt=0;nt<Me.length;nt++){var Je=He?Me[nt]+(nt+1<Me.length?Me[nt+1]/i:0):i,gt=A(ge()*Je);Le.push(gt),gt<Me[nt]&&(He=!1)}return _e.add(c.fromArray(Le,i,!1))}var Ie=function(Y,J,re,ge){re=re||a,Y=String(Y),ge||(Y=Y.toLowerCase(),re=re.toLowerCase());var _e=Y.length,Se,Ue=Math.abs(J),Me={};for(Se=0;Se<re.length;Se++)Me[re[Se]]=Se;for(Se=0;Se<_e;Se++){var Le=Y[Se];if(Le!=="-"&&Le in Me&&Me[Le]>=Ue){if(Le==="1"&&Ue===1)continue;throw new Error(Le+" is not a valid digit in base "+J+".")}}J=Z(J);var He=[],nt=Y[0]==="-";for(Se=nt?1:0;Se<Y.length;Se++){var Le=Y[Se];if(Le in Me)He.push(Z(Me[Le]));else if(Le==="<"){var Je=Se;do Se++;while(Y[Se]!==">"&&Se<Y.length);He.push(Z(Y.slice(Je+1,Se)))}else throw new Error(Le+" is not a valid character")}return Ne(He,J,nt)};function Ne(Y,J,re){var ge=c[0],_e=c[1],Se;for(Se=Y.length-1;Se>=0;Se--)ge=ge.add(Y[Se].times(_e)),_e=_e.times(J);return re?ge.negate():ge}function ke(Y,J){return J=J||a,Y<J.length?J[Y]:"<"+Y+">"}function Fe(Y,J){if(J=e(J),J.isZero()){if(Y.isZero())return{value:[0],isNegative:!1};throw new Error("Cannot convert nonzero numbers to base 0.")}if(J.equals(-1)){if(Y.isZero())return{value:[0],isNegative:!1};if(Y.isNegative())return{value:[].concat.apply([],Array.apply(null,Array(-Y.toJSNumber())).map(Array.prototype.valueOf,[1,0])),isNegative:!1};var re=Array.apply(null,Array(Y.toJSNumber()-1)).map(Array.prototype.valueOf,[0,1]);return re.unshift([1]),{value:[].concat.apply([],re),isNegative:!1}}var ge=!1;if(Y.isNegative()&&J.isPositive()&&(ge=!0,Y=Y.abs()),J.isUnit())return Y.isZero()?{value:[0],isNegative:!1}:{value:Array.apply(null,Array(Y.toJSNumber())).map(Number.prototype.valueOf,1),isNegative:ge};for(var _e=[],Se=Y,Ue;Se.isNegative()||Se.compareAbs(J)>=0;){Ue=Se.divmod(J),Se=Ue.quotient;var Me=Ue.remainder;Me.isNegative()&&(Me=J.minus(Me).abs(),Se=Se.next()),_e.push(Me.toJSNumber())}return _e.push(Se.toJSNumber()),{value:_e.reverse(),isNegative:ge}}function Ae(Y,J,re){var ge=Fe(Y,J);return(ge.isNegative?"-":"")+ge.value.map(function(_e){return ke(_e,re)}).join("")}f.prototype.toArray=function(Y){return Fe(this,Y)},d.prototype.toArray=function(Y){return Fe(this,Y)},m.prototype.toArray=function(Y){return Fe(this,Y)},f.prototype.toString=function(Y,J){if(Y===t&&(Y=10),Y!==10||J)return Ae(this,Y,J);for(var re=this.value,ge=re.length,_e=String(re[--ge]),Se="0000000",Ue;--ge>=0;)Ue=String(re[ge]),_e+=Se.slice(Ue.length)+Ue;var Me=this.sign?"-":"";return Me+_e},d.prototype.toString=function(Y,J){return Y===t&&(Y=10),Y!=10||J?Ae(this,Y,J):String(this.value)},m.prototype.toString=d.prototype.toString,m.prototype.toJSON=f.prototype.toJSON=d.prototype.toJSON=function(){return this.toString()},f.prototype.valueOf=function(){return parseInt(this.toString(),10)},f.prototype.toJSNumber=f.prototype.valueOf,d.prototype.valueOf=function(){return this.value},d.prototype.toJSNumber=d.prototype.valueOf,m.prototype.valueOf=m.prototype.toJSNumber=function(){return parseInt(this.toString(),10)};function tt(Y){if(v(+Y)){var J=+Y;if(J===A(J))return l?new m(BigInt(J)):new d(J);throw new Error("Invalid integer: "+Y)}var re=Y[0]==="-";re&&(Y=Y.slice(1));var ge=Y.split(/e/i);if(ge.length>2)throw new Error("Invalid integer: "+ge.join("e"));if(ge.length===2){var _e=ge[1];if(_e[0]==="+"&&(_e=_e.slice(1)),_e=+_e,_e!==A(_e)||!v(_e))throw new Error("Invalid integer: "+_e+" is not a valid exponent.");var Se=ge[0],Ue=Se.indexOf(".");if(Ue>=0&&(_e-=Se.length-Ue-1,Se=Se.slice(0,Ue)+Se.slice(Ue+1)),_e<0)throw new Error("Cannot include negative exponent part for integers");Se+=new Array(_e+1).join("0"),Y=Se}var Me=/^([0-9][0-9]*)$/.test(Y);if(!Me)throw new Error("Invalid integer: "+Y);if(l)return new m(BigInt(re?"-"+Y:Y));for(var Le=[],He=Y.length,nt=r,Je=He-nt;He>0;)Le.push(+Y.slice(Je,He)),Je-=nt,Je<0&&(Je=0),He-=nt;return w(Le),new f(Le,re)}function se(Y){if(l)return new m(BigInt(Y));if(v(Y)){if(Y!==A(Y))throw new Error(Y+" is not an integer.");return new d(Y)}return tt(Y.toString())}function Z(Y){return typeof Y=="number"?se(Y):typeof Y=="string"?tt(Y):typeof Y=="bigint"?new m(Y):Y}for(var ye=0;ye<1e3;ye++)c[ye]=Z(ye),ye>0&&(c[-ye]=Z(-ye));return c.one=c[1],c.zero=c[0],c.minusOne=c[-1],c.max=we,c.min=ae,c.gcd=ve,c.lcm=xe,c.isInstance=function(Y){return Y instanceof f||Y instanceof d||Y instanceof m},c.randBetween=me,c.fromArray=function(Y,J,re){return Ne(Y.map(Z),Z(J||10),re)},c})();n.hasOwnProperty("exports")&&(n.exports=e)})(u3)),u3.exports}rxe();const C9=Math.sqrt(1.05*.05)-.05,sxe=/^(?:[0-9a-f]{3}){1,2}$/i,O4={black:"#000000",white:"#ffffff",threshold:C9};function oxe(n,e=2){return(new Array(e).join("0")+n).slice(-e)}function JD(n){if(n.slice(0,1)==="#"&&(n=n.slice(1)),!sxe.test(n))throw new Error(`Invalid HEX color: "${n}"`);return n.length===3&&(n=n[0]+n[0]+n[1]+n[1]+n[2]+n[2]),[parseInt(n.slice(0,2),16),parseInt(n.slice(2,4),16),parseInt(n.slice(4,6),16)]}function axe(n){return{r:n[0],g:n[1],b:n[2]}}function eO(n){if(!n)throw new Error("Invalid color value");return Array.isArray(n)?n:typeof n=="string"?JD(n):[n.r,n.g,n.b]}function lxe(n){let e,t;const i=[];for(e=0;e<n.length;e++)t=n[e]/255,i[e]=t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4);return .2126*i[0]+.7152*i[1]+.0722*i[2]}function tO(n,e,t){const i=e===!0?O4:Object.assign({},O4,e);return lxe(n)>i.threshold?t?JD(i.black):i.black:t?JD(i.white):i.white}function L4(n,e=!1){return n=eO(n),e?tO(n,e):"#"+n.map(t=>oxe((255-t).toString(16))).join("")}(function(n){function e(i,r){i=eO(i);const s=r?tO(i,r,!0):i.map(o=>255-o);return axe(s)}n.asRGB=e;function t(i,r){return i=eO(i),r?tO(i,r,!0):i.map(s=>255-s)}n.asRgbArray=t,n.defaultThreshold=C9,n.asRgbObject=e})(L4||(L4={}));var cxe={value:function(){}};function R9(){for(var n=0,e=arguments.length,t={},i;n<e;++n){if(!(i=arguments[n]+"")||i in t||/[\s.]/.test(i))throw new Error("illegal type: "+i);t[i]=[]}return new VS(t)}function VS(n){this._=n}function uxe(n,e){return n.trim().split(/^|\s+/).map(function(t){var i="",r=t.indexOf(".");if(r>=0&&(i=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:i}})}VS.prototype=R9.prototype={constructor:VS,on:function(n,e){var t=this._,i=uxe(n+"",t),r,s=-1,o=i.length;if(arguments.length<2){for(;++s<o;)if((r=(n=i[s]).type)&&(r=fxe(t[r],n.name)))return r;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<o;)if(r=(n=i[s]).type)t[r]=P4(t[r],n.name,e);else if(e==null)for(r in t)t[r]=P4(t[r],n.name,null);return this},copy:function(){var n={},e=this._;for(var t in e)n[t]=e[t].slice();return new VS(n)},call:function(n,e){if((r=arguments.length-2)>0)for(var t=new Array(r),i=0,r,s;i<r;++i)t[i]=arguments[i+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(s=this._[n],i=0,r=s.length;i<r;++i)s[i].value.apply(e,t)},apply:function(n,e,t){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var i=this._[n],r=0,s=i.length;r<s;++r)i[r].value.apply(e,t)}};function fxe(n,e){for(var t=0,i=n.length,r;t<i;++t)if((r=n[t]).name===e)return r.value}function P4(n,e,t){for(var i=0,r=n.length;i<r;++i)if(n[i].name===e){n[i]=cxe,n=n.slice(0,i).concat(n.slice(i+1));break}return t!=null&&n.push({name:e,value:t}),n}const hxe=Object.freeze(Object.defineProperty({__proto__:null,dispatch:R9},Symbol.toStringTag,{value:"Module"})),dxe=wM(hxe);var f3,I4;function pxe(){if(I4)return f3;I4=1;const n=dxe.dispatch,e=Math.PI/180,t={archimedean:b,rectangular:x},i=64,r=2048;f3=function(){var T=[256,256],E=s,C=o,R=l,O=a,I=a,L=c,N=b,V=[],B=1/0,k=n("word","end"),j=null,q=Math.random,W=()=>(~~(q()*6)-3)*30,G={},K=_;G.canvas=function(F){return arguments.length?(K=A(F),G):K},G.start=function(){var F=te(K()),X=w((T[0]>>5)*T[1]),ee=null,le=V.length,oe=-1,ue=[],he=V.map(function(Te,Ee){return Te.text=E.call(this,Te,Ee),Te.font=C.call(this,Te,Ee),Te.style=O.call(this,Te,Ee),Te.weight=I.call(this,Te,Ee),Te.rotate=W.call(this,Te,Ee),Te.size=~~R.call(this,Te,Ee),Te.padding=L.call(this,Te,Ee),Te}).sort(function(Te,Ee){return Ee.size-Te.size});return j&&clearInterval(j),j=setInterval(be,0),be(),G;function be(){for(var Te=Date.now();Date.now()-Te<B&&++oe<le&&j;){var Ee=he[oe];Ee.x=T[0]*(q()+.5)>>1,Ee.y=T[1]*(q()+.5)>>1,f(F,Ee,he,oe),Ee.hasText&&ie(X,Ee,ee)&&(ue.push(Ee),k.call("word",G,Ee),ee?m(ee,Ee):ee=[{x:Ee.x+Ee.x0,y:Ee.y+Ee.y0},{x:Ee.x+Ee.x1,y:Ee.y+Ee.y1}],Ee.x-=T[0]>>1,Ee.y-=T[1]>>1)}oe>=le&&(G.stop(),k.call("end",G,ue,ee))}},G.stop=function(){j&&(clearInterval(j),j=null);for(const F of V)delete F.sprite;return G};function te(F){const X=F.getContext("2d",{willReadFrequently:!0});F.width=F.height=1;const ee=Math.sqrt(X.getImageData(0,0,1,1).data.length>>2);return F.width=(i<<5)/ee,F.height=r/ee,X.fillStyle=X.strokeStyle="red",{context:X,ratio:ee}}function ie(F,X,ee){T[0],T[1];for(var le=X.x,oe=X.y,ue=Math.sqrt(T[0]*T[0]+T[1]*T[1]),he=N(T),be=q()<.5?1:-1,Te=-be,Ee,Ce,we;(Ee=he(Te+=be))&&(Ce=~~Ee[0],we=~~Ee[1],!(Math.min(Math.abs(Ce),Math.abs(we))>=ue));)if(X.x=le+Ce,X.y=oe+we,!(X.x+X.x0<0||X.y+X.y0<0||X.x+X.x1>T[0]||X.y+X.y1>T[1])&&(!ee||v(X,ee))&&!d(X,F,T[0])){for(var ae=X.sprite,ve=X.width>>5,xe=T[0]>>5,me=X.x-(ve<<4),Ie=me&127,Ne=32-Ie,ke=X.y1-X.y0,Fe=(X.y+X.y0)*xe+(me>>5),Ae,tt=0;tt<ke;tt++){Ae=0;for(var se=0;se<=ve;se++)F[Fe+se]|=Ae<<Ne|(se<ve?(Ae=ae[tt*ve+se])>>>Ie:0);Fe+=xe}return!0}return!1}return G.timeInterval=function(F){return arguments.length?(B=F??1/0,G):B},G.words=function(F){return arguments.length?(V=F,G):V},G.size=function(F){return arguments.length?(T=[+F[0],+F[1]],G):T},G.font=function(F){return arguments.length?(C=A(F),G):C},G.fontStyle=function(F){return arguments.length?(O=A(F),G):O},G.fontWeight=function(F){return arguments.length?(I=A(F),G):I},G.rotate=function(F){return arguments.length?(W=A(F),G):W},G.text=function(F){return arguments.length?(E=A(F),G):E},G.spiral=function(F){return arguments.length?(N=t[F]||F,G):N},G.fontSize=function(F){return arguments.length?(R=A(F),G):R},G.padding=function(F){return arguments.length?(L=A(F),G):L},G.random=function(F){return arguments.length?(q=F,G):q},G.on=function(){var F=k.on.apply(k,arguments);return F===k?G:F},G};function s(T){return T.text}function o(){return"serif"}function a(){return"normal"}function l(T){return Math.sqrt(T.value)}function c(){return 1}function f(T,E,C,R){if(!E.sprite){var O=T.context,I=T.ratio;O.clearRect(0,0,(i<<5)/I,r/I);var L=0,N=0,V=0,B=C.length;for(--R;++R<B;){E=C[R],O.save(),O.font=E.style+" "+E.weight+" "+~~((E.size+1)/I)+"px "+E.font;const Ee=O.measureText(E.text),Ce=-Math.floor(Ee.width/2);let we=(Ee.width+1)*I,ae=E.size<<1;if(E.rotate){var k=Math.sin(E.rotate*e),j=Math.cos(E.rotate*e),q=we*j,W=we*k,G=ae*j,K=ae*k;we=Math.max(Math.abs(q+K),Math.abs(q-K))+31>>5<<5,ae=~~Math.max(Math.abs(W+G),Math.abs(W-G))}else we=we+31>>5<<5;if(ae>V&&(V=ae),L+we>=i<<5&&(L=0,N+=V,V=0),N+ae>=r)break;O.translate((L+(we>>1))/I,(N+(ae>>1))/I),E.rotate&&O.rotate(E.rotate*e),O.fillText(E.text,Ce,0),E.padding&&(O.lineWidth=2*E.padding,O.strokeText(E.text,Ce,0)),O.restore(),E.width=we,E.height=ae,E.xoff=L,E.yoff=N,E.x1=we>>1,E.y1=ae>>1,E.x0=-E.x1,E.y0=-E.y1,E.hasText=!0,L+=we}for(var te=O.getImageData(0,0,(i<<5)/I,r/I).data,ie=[];--R>=0;)if(E=C[R],!!E.hasText){for(var F=E.width,X=F>>5,ee=E.y1-E.y0,le=0;le<ee*X;le++)ie[le]=0;if(L=E.xoff,L==null)return;N=E.yoff;for(var oe=0,ue=-1,he=0;he<ee;he++){for(var le=0;le<F;le++){var be=X*he+(le>>5),Te=te[(N+he)*(i<<5)+(L+le)<<2]?1<<31-le%32:0;ie[be]|=Te,oe|=Te}oe?ue=he:(E.y0++,ee--,he--,N++)}E.y1=E.y0+ue,E.sprite=ie.slice(0,(E.y1-E.y0)*X)}}}function d(T,E,C){C>>=5;for(var R=T.sprite,O=T.width>>5,I=T.x-(O<<4),L=I&127,N=32-L,V=T.y1-T.y0,B=(T.y+T.y0)*C+(I>>5),k,j=0;j<V;j++){k=0;for(var q=0;q<=O;q++)if((k<<N|(q<O?(k=R[j*O+q])>>>L:0))&E[B+q])return!0;B+=C}return!1}function m(T,E){var C=T[0],R=T[1];E.x+E.x0<C.x&&(C.x=E.x+E.x0),E.y+E.y0<C.y&&(C.y=E.y+E.y0),E.x+E.x1>R.x&&(R.x=E.x+E.x1),E.y+E.y1>R.y&&(R.y=E.y+E.y1)}function v(T,E){return T.x+T.x1>E[0].x&&T.x+T.x0<E[1].x&&T.y+T.y1>E[0].y&&T.y+T.y0<E[1].y}function b(T){var E=T[0]/T[1];return function(C){return[E*(C*=.1)*Math.cos(C),C*Math.sin(C)]}}function x(T){var E=4,C=E*T[0]/T[1],R=0,O=0;return function(I){var L=I<0?-1:1;switch(Math.sqrt(1+4*L*I)-L&3){case 0:R+=C;break;case 1:O+=E;break;case 2:R-=C;break;default:O-=E;break}return[R,O]}}function w(T){for(var E=[],C=-1;++C<T;)E[C]=0;return E}function _(){return document.createElement("canvas")}function A(T){return typeof T=="function"?T:function(){return T}}return f3}pxe();(function(){try{if(typeof document<"u"){var n=document.createElement("style");n.appendChild(document.createTextNode(`._clickable_lp842_1 {
  cursor: pointer;
}

._clickable_lp842_1:hover text {
  text-decoration: underline;
}
._clickable_lp842_1 {
  cursor: pointer;
}

._clickable_lp842_1:hover text {
  text-decoration: underline;
}
._handle_bk7m7_1 {
  fill: var(--color-handle-fill);
  stroke: var(--color-handle-stroke);
}

._dragging_bk7m7_6 {
  fill: var(--color-handle-drag-fill);
}

._dot_bk7m7_10 {
  fill: var(--color-handle-dots);
}

._line_bk7m7_14 {
  stroke: var(--color-handle-line);
}
._slice_1knu8_1 {
  fill: var(--color-primary);
}

._unsliced_1knu8_5 {
  fill: var(--color-background);
  opacity: 0.5;
  pointer-events: none;
}
._container_1u3dt_1 {
  /** Old mappings - to be removed in next major */
  --color-background: rgb(51, 51, 51);
  --color-on-background: #fff;

  --color-tooltip: rgba(0, 5, 11, 0.9);
  --color-on-tooltip: #fff;

  --color-handle-fill: #2c343a;
  --color-handle-stroke: #67c2e4;
  --color-handle-drag-fill: transparent;
  --color-handle-dots: #67c2e4;
  --color-handle-line: #67c2e4;

  /** New mappings */
  --tooltip-background: var(--color-tooltip);
  --tooltip-color: var(--color-on-tooltip);
  --tooltip-border-radius: 5px;
  --tooltip-spacing: 5px;

  --chart-background: var(--color-background);
  --chart-color: var(--color-on-background);

  --chart-handle-fill: var(--color-handle-fill);
  --chart-handle-stroke: var(--color-handle-stroke);
  --chart-handle-drag-fill: var(--color-handle-drag-fill);
  --chart-handle-dots: var(--color-handle-dots);
  --chart-handle-line: var(--color-handle-line);

  ._svg_1u3dt_30 {
    &:focus {
      outline: none;
    }

    &:focus-visible {
      outline: auto;
    }
  }
}
._container_19vag_1 {
  display: flex;
  overflow: auto;

  &._horizontal_19vag_5 {
    align-items: center;
    flex-direction: row;
  }

  &._vertical_19vag_10 {
    flex-direction: column;
  }
}
._symbol_f5unn_1 {
  width: 15px;
  height: 3px;
}
._entry_1493o_1 {
  display: flex;
  color: var(--color-on-primary);
  padding: 8px;
  will-change: transparency;
  transition: opacity 150ms ease-in;

  &._vertical_1493o_8 {
    flex-direction: row;
    align-items: center;

    &:first-child {
      padding-top: 0;
    }

    &:last-child {
      padding-bottom: 0;
    }

    ._label_1493o_20 {
      margin-left: 8px;
    }

    svg {
      display: block;
      margin: 0 auto;
    }
  }

  &._horizontal_1493o_30 {
    align-items: center;
    flex-direction: row;

    &:first-child {
      padding-left: 0;
    }

    &:last-child {
      padding-right: 0;
    }

    ._label_1493o_20 {
      margin-left: 8px;
    }
  }

  ._label_1493o_20 {
    font-size: 12px;
  }

  svg {
    width: 15px;
    height: 15px;
  }
}
._container_1gnp9_1 {
  display: flex;
  height: 100%;

  &._vertical_1gnp9_5 {
    flex-direction: column;
    max-width: 55px;

    ._start_1gnp9_9,
    ._end_1gnp9_10 {
      text-align: center;
      padding: 5px 0;
      width: 100%;
    }

    ._gradient_1gnp9_16 {
      width: 25px;
      margin: 0 auto;
    }
  }

  &._horizontal_1gnp9_22 {
    flex-direction: row-reverse;

    ._start_1gnp9_9,
    ._end_1gnp9_10 {
      max-width: 20%;
    }

    ._start_1gnp9_9 {
      text-align: right;
      padding-left: 5px;
    }

    ._end_1gnp9_10 {
      text-align: left;
      padding-right: 5px;
    }
  }

  ._gradient_1gnp9_16 {
    flex: 1;
    width: 100%;
    border-radius: 2px;
  }

  ._start_1gnp9_9,
  ._end_1gnp9_10 {
    color: var(--color-on-primary);
    font-size: 12px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }
}
._gridLine_5yx3q_1 {
  shape-rendering: crispEdges;
  pointer-events: none;
}
._gridStripe_xcrvl_1 {
  pointer-events: none;
}
._markLine_1sfls_1 {
  pointer-events: none;
  stroke-dasharray: 4, 4;
  stroke-linecap: round;
}
._label_uiu20_1 {
  font-size: 16px;
  margin-bottom: 3px;
  color: var(--color-on-tooltip);
}

._value_uiu20_7 {
  font-size: 13px;
  color: var(--color-on-tooltip);
  opacity: 0.7;
}

._subValue_uiu20_13 {
  display: block;
  text-align: left;
  padding: 3px 5px;

  ._subValueColor_uiu20_18 {
    width: 5px;
    height: 15px;
    margin-right: 8px;
    display: inline-block;
  }

  ._subValueName_uiu20_25 {
    margin-right: 5px;
  }
}
._base_b22et_1 {
  white-space: nowrap;
  text-align: center;
  will-change: transform, opacity;
  background-color: var(--tooltip-background);
  color: var(--tooltip-color);
  padding: var(--tooltip-spacing);
  border-radius: var(--tooltip-border-radius);

  ._disablePointer_b22et_10 {
    cursor: not-allowed;
  }
}
._inactive_jp2yc_1 {
  opacity: 0.2;
}

._hidden_jp2yc_5 {
  opacity: 0;
}
._scatterPlot_gc5eo_1 {
  overflow: visible;
}
._point_u68jv_1 {
  stroke: rgba(255, 255, 255, 0.5);
  stroke-width: 1px;
}
._areaChart_yyojn_1 {
  overflow: visible;
}
._barChart_sfjii_1 {
  overflow: visible;

  &._stackedNormalized_sfjii_4,
  &._stacked_sfjii_4,
  &._marimekko_sfjii_6 {
    .bar {
      stroke: var(--color-background);
      stroke-width: 0.2;
    }
  }
}
._marker_agib4_1 {
  fill: var(--color-primary);
  cursor: pointer;
}
._label_qd893_1 {
  font-size: 12px;
  user-select: none;
  pointer-events: none;
}
._link_1oi50_1 {
  fill: none;
  transition: stroke-opacity 100ms ease-in-out, stroke 100ms ease-in-out;
  mix-blend-mode: initial;
}

._tooltip_1oi50_7 {
  text-align: center;
  pointer-events: none;

  ._tooltipLabel_1oi50_11 {
    font-size: 16px;
    margin-bottom: 3px;
    color: rgba(255, 255, 255, 1);
    text-align: center;
  }

  ._tooltipValue_1oi50_18 {
    font-size: 13px;
    color: rgba(255, 255, 255, 0.7);
    text-align: center;
  }
}
._node_oqk6h_1 {
  transition: opacity 100ms ease-in-out, fill-opacity 100ms ease-in-out;
}

._tooltip_oqk6h_5 {
  text-align: center;
  padding: 0 8px;
  pointer-events: none;

  ._tooltipLabel_oqk6h_10 {
    font-size: 16px;
    margin-bottom: 3px;
    color: rgba(255, 255, 255, 1);
    text-align: center;
  }

  ._tooltipValue_oqk6h_17 {
    font-size: 13px;
    color: rgba(255, 255, 255, 0.7);
    text-align: center;
  }
}
._inactive_kwc4n_1 {
  opacity: 0.4;
  transition: opacity 200ms ease-in-out;
}

._hidden_kwc4n_6 {
  opacity: 0;
}
._valueLabel_1eyd5_1 {
  font-size: 14px;
  font-weight: 400;
  fill: var(--color-on-background);
  opacity: 0.6;
}
._valueLabel_1h164_1 {
  font-size: 18px;
  font-weight: 400;
  fill: var(--color-on-background);
}
._stackedValueLabel_1w6zx_1 {
  font-size: 18px;
  font-weight: 400;
  fill: var(--color-on-background);
}
._stackedDescriptionLabel_1h95t_1 {
  font-size: 12px;
  font-weight: 400;
  fill: var(--color-on-background);
}
._cell_r3f8c_1 {
  transition: stroke 150ms ease-in-out;
}
._item_18e6r_1 {
  margin-bottom: 5px;
  align-items: center;
  display: grid;
  grid-column-gap: 5px;
  grid-row-gap: 3px;

  &._labelStart_18e6r_8 {
    &._valueEnd_18e6r_9 {
      grid-template-columns: 2fr 2fr 1fr;
      grid-template-areas: 'label bar value-label';
    }
  }

  &._labelBottom_18e6r_15 {
    &._valueEnd_18e6r_9 {
      grid-template-columns: 1fr 50px;
      grid-template-areas:
        'bar value-label'
        'label label';
    }
  }

  &._labelNone_18e6r_24 {
    ._label_18e6r_8 {
      display: none;
    }

    &._valueEnd_18e6r_9 {
      grid-template-columns: 1fr 50px;
      grid-template-areas: 'bar value-label';
    }
  }

  &._labelEnd_18e6r_35 {
    &._valueStart_18e6r_36 {
      grid-template-columns: 50px 1fr 1fr;
      grid-template-areas: 'value-label bar label';
    }
  }

  &._labelTop_18e6r_42 {
    &._valueStart_18e6r_36 {
      grid-template-columns: 50px 1fr;
      grid-template-areas:
        'label label'
        'value-label bar';
    }

    &._valueEnd_18e6r_9 {
      grid-template-columns: 1fr 50px;
      grid-template-areas:
        'label label'
        'bar value-label';
    }

    &._valueBottom_18e6r_57 {
      grid-template-columns: 1fr;
      grid-template-areas:
        'label'
        'bar'
        'value-label';
    }

    &._valueNone_18e6r_65 {
      grid-template-columns: 1fr;
      grid-template-areas:
        'label'
        'bar';

      ._valueLabel_18e6r_71 {
        display: none;
      }
    }
  }

  &._clickable_18e6r_77 {
    cursor: pointer;
  }

  ._label_18e6r_8,
  ._valueLabel_18e6r_71 {
    cursor: inherit;
  }

  ._label_18e6r_8 {
    grid-area: label;
  }

  ._valueLabel_18e6r_71 {
    grid-area: value-label;
    line-height: 10px;
    text-overflow: ellipsis;
    overflow-x: hidden;
  }

  ._outerBar_18e6r_97 {
    grid-area: bar;
    width: 100%;
    height: 10px;
    display: flex;
    align-items: center;
  }

  ._bar_18e6r_105 {
    height: 5px;
  }
}
._container_13giw_1 {
  display: flex;
  flex-direction: row;
  justify-content: space-between;
  align-items: center;

  > div {
    flex: 1;
  }
}
._wordLabel_uwka2_1 {
  user-select: none;
}

._clickable_uwka2_5 {
  cursor: pointer;
}`)),document.head.appendChild(n)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();new jO.Scale({k:1e3,M:1e6,B:1e9});new jO.Scale({M:1,B:1e3,T:1e6});const mxe=()=>{if(typeof window>"u")return"en";if(navigator.languages&&navigator.languages.length)return navigator.languages[0];if(navigator.userLanguage||navigator.language||navigator.browserLanguage)return"en"},gxe=mxe(),vxe={year:"numeric",month:"numeric",day:"numeric",hour12:!0,formatMatcher:"best fit"};function fc(n){return n!==void 0?n instanceof Date?n.toLocaleDateString(gxe,vxe):typeof n=="number"?n.toLocaleString():n:"No value"}function D9(n){if(Array.isArray(n))return n?.map(t=>D9(t)).join(", ");{const t=n?.key||n?.x,i=n?.data||n?.y;return`${t}: ${fc(i)}`}}const yxe=(n,e=!1)=>{const t=n.domain(),i=n(t[0]),r=n.step(),[,s]=n.range();return o=>{let a=Math.min((o-i)/r,t.length-.01);a<0&&Math.abs(a)>t.length-1&&(a=Math.floor(Math.abs(a))*-1);let l=e?Math.round(a)%t.length:Math.floor(a)%t.length;return s===0&&(l=l*-1),t[Math.max(0,Math.min(l,t.length-1))]}},bxe=({pos:n,scale:e,data:t,attr:i="x",roundDown:r=!1})=>{const s=e.invert(n),o=ZL(b=>i==="i"?b[i]+1:b[i]).right,a=o(t,s),l=Math.max(0,a-1),c=t[l];if(r)return c;const f=Math.min(t.length-1,a),d=t[f];let m=c[i],v=d[i];return m=s-m,v=v-s,m<v?c:d},_xe=({pos:n,scale:e,data:t,roundClosest:i=!1})=>{const r=e.domain();let s;e.mariemkoInvert?s=e.mariemkoInvert(n):s=yxe(e,i)(n);const o=r.indexOf(s);return t[o]},xxe=n=>{let e=n.target.ownerSVGElement;if(e)for(;e.ownerSVGElement;)e=e.ownerSVGElement;return e},wxe=({target:n,clientX:e,clientY:t})=>{const i=n.getBoundingClientRect();return{x:e-(i?.left||0)-n.clientLeft,y:t-(i?.top||0)-n.clientTop}},Sxe=(n,e)=>{const t=xxe(n);if(!t)return null;const{top:i,left:r}=t.getBoundingClientRect(),s=n.clientX-r,o=n.clientY-i;return DP(T9(e),{x:s,y:o})},Exe=(n,e,t)=>txe(t,[{x:0,y:0},{x:e,y:n}]),Mxe=(n,e,t)=>{const[i,r]=Exe(n,e,t);return r.x<e||r.y<n||i.x>0||i.y>0},Txe=(n,e)=>n.scaleFactorMin&&n.d*e<=n.scaleFactorMin,Axe=(n,e)=>n.scaleFactorMax&&n.d*e>=n.scaleFactorMax,Cxe=(n,e)=>{const t=Txe(n,e)&&e<1,i=Axe(n,e)&&e>1;return t||i};function sd(n){const e=n?"":"none";["-webkit-touch-callout","-webkit-user-select","-khtml-user-select","-moz-user-select","-ms-user-select","user-select"].forEach(t=>document.body.style[t]=e)}const Rxe=$.createContext({}),{Provider:V1e,Consumer:G1e}=Rxe,Dxe=class extends $.Component{constructor(){super(...arguments),this.prevXPosition=0,this.prevYPosition=0,this.started=!1,this.deltaX=0,this.deltaY=0,this.childRef=$.createRef(),this.onMouseDown=e=>{this.props.disabled||e.which!==3&&(!this.props.globalPanning&&e.target&&!e.target.classList.contains("pan-container")||(e.preventDefault(),e.stopPropagation(),sd(!1),this.started=!1,window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("mouseup",this.onMouseUp)))},this.onMouseMove=e=>{e.preventDefault(),e.stopPropagation(),this.deltaX=this.deltaX+e.movementX,this.deltaY=this.deltaY+e.movementY,this.checkThreshold()?(this.props.cursor&&(document.body.style.cursor=this.props.cursor),this.deltaX=0,this.deltaY=0,this.started=!0,this.onPanStart(e,"mouse")):this.pan(e.movementX,e.movementY,e,"mouse")},this.onMouseUp=e=>{e.preventDefault(),e.stopPropagation(),this.disposeHandlers(),sd(!0),this.started?this.onPanEnd(e,"mouse"):this.props.onPanCancel({nativeEvent:e,source:"mouse"})},this.onTouchStart=e=>{this.props.disabled||e.touches.length===1&&(e.preventDefault(),e.stopPropagation(),sd(!1),this.started=!1,this.prevXPosition=e.touches[0].clientX,this.prevYPosition=e.touches[0].clientY,window.addEventListener("touchmove",this.onTouchMove),window.addEventListener("touchend",this.onTouchEnd))},this.onTouchMove=e=>{e.preventDefault(),e.stopPropagation();const t=e.touches[0].clientX,i=e.touches[0].clientY,r=t-this.prevXPosition,s=i-this.prevYPosition;this.deltaX=this.deltaX+r,this.deltaY=this.deltaY+s,this.checkThreshold()?(this.deltaX=0,this.deltaY=0,this.started=!0,this.onPanStart(e,"touch")):this.pan(r,s,e,"touch")||(this.prevXPosition=t,this.prevYPosition=i)},this.onTouchEnd=e=>{e.preventDefault(),e.stopPropagation(),this.disposeHandlers(),sd(!0),this.started?this.onPanEnd(e,"touch"):this.props.onPanCancel({nativeEvent:e,source:"touch"})}}componentDidMount(){this.childRef.current&&(this.childRef.current.addEventListener("mousedown",this.onMouseDown,{passive:!1}),this.childRef.current.addEventListener("touchstart",this.onTouchStart,{passive:!1}))}componentWillUnmount(){this.disposeHandlers(),this.childRef.current&&(this.childRef.current.removeEventListener("mousedown",this.onMouseDown),this.childRef.current.removeEventListener("touchstart",this.onTouchStart))}disposeHandlers(){window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd),document.body.style.cursor="inherit",sd(!0)}checkThreshold(){const{threshold:e}=this.props;return!this.started&&(Math.abs(this.deltaX)>e||Math.abs(this.deltaY)>e)}onPanStart(e,t){this.props.onPanStart({nativeEvent:e,source:t})}onPanMove(e,t,i,r){this.props.onPanMove({source:i,nativeEvent:r,x:e,y:t})}onPanEnd(e,t){const{onPanEnd:i}=this.props;i({nativeEvent:e,source:t})}pan(e,t,i,r){const{scale:s,constrain:o,width:a,height:l,matrix:c}=this.props,f=A9(NT(c,W_(e/s,t/s)),100),d=o&&Mxe(l,a,f);return d||this.onPanMove(f.e,f.f,r,i),d}render(){return ne.jsx("g",{ref:this.childRef,children:this.props.children})}};Dxe.defaultProps={x:0,y:0,disabled:!1,scale:1,threshold:10,globalPanning:!0,onPanStart:()=>{},onPanMove:()=>{},onPanEnd:()=>{},onPanCancel:()=>{}};const Oxe=(n,e)=>({x:(n.x+e.x)/2,y:(n.y+e.y)/2}),Lxe=(n,e)=>Math.sqrt(Math.pow(e.y-n.y,2)+Math.pow(e.x-n.x,2));function N4(n,e){const{left:t,top:i}=e.getBoundingClientRect(),[r,s]=[...n.touches].map(l=>({x:l.clientX-Math.round(t),y:l.clientY-Math.round(i)})),o=Lxe(r,s),a=Oxe(r,s);return{pointA:r,pointB:s,distance:o,midpoint:a}}const Pxe=class extends $.Component{constructor(){super(...arguments),this.childRef=$.createRef(),this.onMouseWheel=e=>{const{disableMouseWheel:t,requireZoomModifier:i,matrix:r,onZoomEnd:s}=this.props;if(t)return!1;const o=e.metaKey||e.ctrlKey;if(i&&!o)return!1;e.preventDefault(),e.stopPropagation();const a=Sxe(e,r);if(a){const{x:l,y:c}=a,f=this.getStep(e.deltaY);this.scale(l,c,f,e),clearTimeout(this.timeout),this.timeout=setTimeout(()=>s(),500)}},this.onTouchStart=e=>{e.touches.length===2&&(e.preventDefault(),e.stopPropagation(),sd(!1),this.firstTouch=N4(e,this.childRef.current),this.lastDistance=this.firstTouch.distance,window.addEventListener("touchmove",this.onTouchMove),window.addEventListener("touchend",this.onTouchEnd))},this.onTouchMove=e=>{if(e.touches.length===2){e.preventDefault(),e.stopPropagation();const{distance:t}=N4(e,this.childRef.current),i=t/this.lastDistance,r=DP(T9(this.props.matrix),{x:this.firstTouch.midpoint.x,y:this.firstTouch.midpoint.y});r.x&&r.y&&(this.scale(r.x,r.y,i,e)||(this.lastDistance=t))}},this.onTouchEnd=e=>{e.preventDefault(),e.stopPropagation(),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd),sd(!0),this.props.onZoomEnd()}}componentDidMount(){const{disabled:e,disableMouseWheel:t}=this.props,i=this.childRef.current;!e&&i&&(t||i.addEventListener("mousewheel",this.onMouseWheel,{passive:!1}),i.addEventListener("touchstart",this.onTouchStart,{passive:!1}))}componentWillUnmount(){window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd),cancelAnimationFrame(this.rqf),clearTimeout(this.timeout);const e=this.childRef.current;e&&(e.removeEventListener("mousewheel",this.onMouseWheel),e.removeEventListener("touchstart",this.onTouchStart)),sd(!0)}getStep(e){const{scaleFactor:t}=this.props;return-e>0?t+1:1-t}scale(e,t,i,r){const{minZoom:s,maxZoom:o,onZoom:a,matrix:l}=this.props,c=Cxe({d:l.a,scaleFactorMin:s,scaleFactorMax:o},i);if(!c){const f=A9(NT(l,W_(e,t),nxe(i,i),W_(-e,-t)),100);this.rqf=requestAnimationFrame(()=>{a({scale:f.a,x:f.e,y:f.f,nativeEvent:r})})}return c}render(){const{style:e,children:t}=this.props;return ne.jsx("g",{ref:this.childRef,style:e,children:t})}};Pxe.defaultProps={x:0,y:0,scale:1,scaleFactor:.1,minZoom:1,maxZoom:10};const Ixe="_label_uiu20_1",Nxe="_value_uiu20_7",Uxe="_subValue_uiu20_13",kxe="_subValueColor_uiu20_18",zxe="_subValueName_uiu20_25",Sb={label:Ixe,value:Nxe,subValue:Uxe,subValueColor:kxe,subValueName:zxe},UT=({value:n,color:e,className:t})=>{if(!n)return null;const i=(o,a)=>{const l=e(o,a);return ne.jsxs("span",{className:Sb.subValue,children:[ne.jsx("span",{className:Sb.subValueColor,style:{backgroundColor:l}}),ne.jsxs("span",{className:Sb.subValueName,children:[fc(o.key||o.x),":"]}),ne.jsx("span",{children:fc(o.value||o.y)})]})},r=o=>{const a=o.data.length-15,l=o.data.slice(0,15);return ne.jsxs($.Fragment,{children:[l.map((c,f)=>ne.jsx($.Fragment,{children:i(c,f)},f)),a>0&&ne.jsxs("div",{children:["...",a," more..."]})]})},s=Array.isArray(n.data);return ne.jsxs("div",{className:t,role:"tooltip",children:[ne.jsx("div",{className:Sb.label,children:fc(n.x)}),ne.jsxs("div",{className:Sb.value,children:[s&&r(n),!s&&ne.jsx($.Fragment,{children:fc(n.value||n.y)})]})]})},Fxe="_base_b22et_1",Bxe="_disablePointer_b22et_10",U4={base:Fxe,disablePointer:Bxe},Vxe={base:U4.base,disablePointer:U4.disablePointer},mx=({content:n=ne.jsx(UT,{}),value:e,data:t,color:i,...r})=>ne.jsx(one,{theme:Vxe,...r,content:()=>!e&&!t?null:typeof n=="function"?n(t||e,i):$.cloneElement(n,{...n.props,value:e,color:i})}),kT=$.forwardRef(({children:n,inverse:e=!0,tooltip:t=ne.jsx(mx,{}),disabled:i,color:r,isRadial:s=!1,isContinous:o=!0,width:a,height:l,xScale:c,yScale:f,onValueEnter:d=()=>{},data:m,isHorizontal:v,innerRadius:b,outerRadius:x,placement:w,onValueLeave:_=()=>{},startAngle:A=0,endAngle:T=2*Math.PI},E)=>{const[C,R]=$.useState(),[O,I]=$.useState(),[L,N]=$.useState(),[V,B]=$.useState(),[k,j]=$.useState(),[q,W]=$.useState(),[G,K]=$.useState(),te=$.useRef(),ie=$.useRef(null),F=Math.abs(T-A)>=2*Math.PI,X=Math.abs(T-A),ee=.5,le=$.useCallback((ae,ve,xe,me,Ie)=>{let Ne=0,ke=0;if(s){const Fe=Math.min(a,l)/2;Ne=ve*Math.cos(ae-ee*Math.PI)+Fe,ke=ve*Math.sin(ae-ee*Math.PI)+Fe}else Ne=ae,ke=ve;return Ne+=xe.left+me,ke+=xe.top+Ie,{nx:Ne,ny:ke}},[s,a,l,ee]),oe=$.useCallback((ae,ve)=>{if(s){const xe=x||Math.min(a,l)/2;let me=Math.atan2(ve-xe,ae-xe)+ee*Math.PI;return me=(me-A)%(2*Math.PI),me<0&&(me+=Math.PI*2),me=xT().domain([0,X]).range([A,T])(me),me}return ae},[T,l,s,x,X,A,a]),ue=$.useCallback(ae=>{const ve=[];if(e)for(const xe of ae){const me=xe;if(Array.isArray(me.data))for(const Ie of me.data){const Ne=Ie.x;let ke=ve.findIndex(Ae=>{const tt=Ae.x;return tt instanceof Date&&Ne instanceof Date?tt.getTime()===Ne.getTime():tt===Ne});ke===-1&&(ve.push({x:Ie.x,data:[]}),ke=ve.length-1);const Fe=ve[ke].data;Array.isArray(Fe)&&Fe.push(Ie)}else ve.push(xe)}else for(const xe of ae){const me=xe;if(Array.isArray(me.data))ve.push({...me,x:me.key,data:me.data.map(Ie=>({...Ie,key:v?Ie.y:Ie.x,value:v?Ie.x:Ie.y}))});else{const Ie=xe;ve.push({...Ie,x:Ie.key===void 0?Ie.x0:xe.key,y:Ie.value===void 0?Ie.y:Ie.value})}}return ve},[e,v]),he=$.useCallback(ae=>{const ve=ue(m);let xe=w;w||(v?xe="right":xe="top");let me=ie.current||te.current;const{y:Ie,x:Ne}=wxe({target:me,clientX:ae.clientX,clientY:ae.clientY});let ke,Fe,Ae,tt="x";v?(ke=f,Fe=c,Ae=Ie):(Ae=oe(Ne,Ie),ke=c,Fe=f),typeof ve[0].i=="number"&&(tt="i");const se=ke.invert?bxe({pos:Ae,scale:ke,data:ve,attr:tt,roundDown:!o}):_xe({pos:Ae,scale:ke,data:ve,roundClosest:s});if(!KK(se,L)&&se){const Z=ke(se.x);let ye=Fe(se.y),Y=0,J=0;if(isNaN(ye)?(ye=l/2,Y=10,O||(xe="right")):J=-10,Z===q&&ye===G)return;W(Z),K(ye);const ge=ae.target.getBoundingClientRect(),{nx:_e,ny:Se}=le(Z,ye,ge,Y,J);I(xe),R(!0),N(se),B(_e),j(Se),d({visible:!0,value:se,pointY:ye,pointX:Z,offsetX:_e,offsetY:Se,nativeEvent:ae})}},[m,oe,l,o,v,s,le,d,O,w,q,G,ue,L,c,f]),be=$.useCallback(()=>{W(void 0),K(void 0),N(void 0),R(!1),_()},[_]),Te=$.useCallback(()=>{if(!C)return;const ae=ie.current||te.current;if(!ae)return;const ve=ae.getBoundingClientRect();let xe=0,me=0,Ie=q,Ne;G===void 0||isNaN(G)?(Ne=l/2,xe=10):(Ne=G,me=-10);const{nx:ke,ny:Fe}=le(Ie,Ne,ve,xe,me);B(ke),j(Fe)},[ie,te,C,q,G,l,le]);$.useEffect(()=>{if(!C)return;const ae=()=>Te();return window.addEventListener("scroll",ae,!0),window.addEventListener("resize",ae),()=>{window.removeEventListener("scroll",ae,!0),window.removeEventListener("resize",ae)}},[C,Te]),$.useImperativeHandle(E,()=>({triggerMouseMove(ae){he(ae)}}));const Ee=$.useMemo(()=>({width:4,height:4,top:k,left:V}),[V,k]),Ce=$.useCallback(()=>{const ae=b||0,ve=x||Math.min(a,l)/2,xe=C4()({innerRadius:ae,outerRadius:ve,startAngle:F?0:A,endAngle:F?2*Math.PI:T}),me=C4()({innerRadius:ae,outerRadius:ve,startAngle:0,endAngle:2*Math.PI});return ne.jsxs(ne.Fragment,{children:[ne.jsx("path",{d:me,opacity:"0",cursor:"auto",ref:ie}),ne.jsx("path",{d:xe,opacity:"0",cursor:"auto",ref:te,onMouseMove:he})]})},[T,l,b,F,he,x,A,a]),we=$.useCallback(()=>ne.jsx("rect",{height:l,ref:te,width:a,opacity:0,cursor:"auto",onMouseMove:he}),[l,he,a]);return ne.jsxs($.Fragment,{children:[i&&n,!i&&ne.jsxs("g",{id:"tooltip-area",onMouseLeave:be,ref:E,children:[s&&Ce(),!s&&we(),ne.jsx(i8,{element:t,visible:C,placement:O,modifiers:[Q0({mainAxis:15}),ZB()],reference:Ee,color:r,value:L}),n]})]})}),Gxe={type:"spring",velocity:5,damping:20,restDelta:.01,restSpeed:.01},q0={unifyviz:["#4C86FF","#40D3F4","#40E5D1","#9152EE","#A840E8","#80CE5B","#AADC40","#D740BE","#EE4094","#E84045","#F8A340","#FFD440"],unifyvizwarm:["#FFD440","#F8A340","#E84045"],unify8Colors:Ln.scale(["#4C86FF","#26efb5"]).correctLightness().colors(8),cybertron:Ln.scale(["#2d60e8","#26efb5"]).correctLightness().colors(8),...Ln.brewer},Hxe=(n,e)=>n.map((t,i)=>{if(t){if(t[e]!==void 0)return t[e];if(t.data&&t.data[e]!==void 0)return t.data[e]}return i}),jxe=n=>{let{point:e,colorScheme:t,attribute:i,index:r,data:s,active:o,isMultiSeries:a,domain:l,key:c,scale:f}={attribute:"key",isMultiSeries:!1,scale:VG,...n};if(typeof t=="string"&&q0[t]&&(t=q0[t]),Array.isArray(t)){if(!l){if(a&&Array.isArray(s)){const d=Rde(s,v=>v.data.length);s=s[d].data}l=Hxe(s,i)}return c=c!==void 0?c:e[i],f(t).domain(l)(c)}else return typeof t=="function"?t(e,r,o):t};q0.cybertron[0];$.createContext({});const O9=(n,e,t)=>t>e?e:t<n?n:t,Wxe=n=>n,zT={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},L9={...zT,transform:n=>O9(0,1,n)};({...zT});const r_=n=>Math.round(n*1e5)/1e5,P9=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function $xe(n){return n==null}const qxe=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,OP=(n,e)=>t=>!!(typeof t=="string"&&qxe.test(t)&&t.startsWith(n)||e&&!$xe(t)&&Object.prototype.hasOwnProperty.call(t,e)),I9=(n,e,t)=>i=>{if(typeof i!="string")return i;const[r,s,o,a]=i.match(P9);return{[n]:parseFloat(r),[e]:parseFloat(s),[t]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},Xxe=n=>O9(0,255,n),h3={...zT,transform:n=>Math.round(Xxe(n))},Nb={test:OP("rgb","red"),parse:I9("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:i=1})=>"rgba("+h3.transform(n)+", "+h3.transform(e)+", "+h3.transform(t)+", "+r_(L9.transform(i))+")"};function Yxe(n){let e="",t="",i="",r="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),i=n.substring(5,7),r=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),i=n.substring(3,4),r=n.substring(4,5),e+=e,t+=t,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const k4={test:OP("#"),parse:Yxe,transform:Nb.transform},Zxe=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),z4=Zxe("%"),_S={test:OP("hsl","hue"),parse:I9("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:i=1})=>"hsla("+Math.round(n)+", "+z4.transform(r_(e))+", "+z4.transform(r_(t))+", "+r_(L9.transform(i))+")"},pm={test:n=>Nb.test(n)||k4.test(n)||_S.test(n),parse:n=>Nb.test(n)?Nb.parse(n):_S.test(n)?_S.parse(n):k4.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?Nb.transform(n):_S.transform(n),getAnimatableNone:n=>{const e=pm.parse(n);return e.alpha=0,pm.transform(e)}},Kxe=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Qxe(n){return isNaN(n)&&typeof n=="string"&&(n.match(P9)?.length||0)+(n.match(Kxe)?.length||0)>0}const N9="number",U9="color",Jxe="var",e1e="var(",F4="${}",t1e=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function k9(n){const e=n.toString(),t=[],i={color:[],number:[],var:[]},r=[];let s=0;const a=e.replace(t1e,l=>(pm.test(l)?(i.color.push(s),r.push(U9),t.push(pm.parse(l))):l.startsWith(e1e)?(i.var.push(s),r.push(Jxe),t.push(l)):(i.number.push(s),r.push(N9),t.push(parseFloat(l))),++s,F4)).split(F4);return{values:t,split:a,indexes:i,types:r}}function z9(n){return k9(n).values}function F9(n){const{split:e,types:t}=k9(n),i=e.length;return r=>{let s="";for(let o=0;o<i;o++)if(s+=e[o],r[o]!==void 0){const a=t[o];a===N9?s+=r_(r[o]):a===U9?s+=pm.transform(r[o]):s+=r[o]}return s}}const n1e=n=>typeof n=="number"?0:pm.test(n)?pm.getAnimatableNone(n):n;function i1e(n){const e=z9(n);return F9(n)(e.map(n1e))}const r1e={test:Qxe,parse:z9,createTransformer:F9,getAnimatableNone:i1e},s1e=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],o1e=new Set(["x","y","z"]);s1e.filter(n=>!o1e.has(n));({...r1e});({...zT});$.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});$.createContext({strict:!1});try{require("@emotion/is-prop-valid").default}catch{}const a1e=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),l1e="framerAppearId";""+a1e(l1e);$.createContext({});const B4=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n);B4("applewebkit/")&&B4("chrome/");Q0(5);Q0(5);Q0(5);q0.cybertron[0],Q0(5);q0.cybertron[0];Q0({mainAxis:0,crossAxis:3});(()=>{const n=new Date(Date.UTC(2017,0,2));return Dde(7).map(()=>{const e=n.toLocaleDateString("default",{weekday:"short"});return n.setDate(n.getDate()+1),e})})();const c1e="_item_18e6r_1",u1e="_labelStart_18e6r_8",f1e="_valueEnd_18e6r_9",h1e="_labelBottom_18e6r_15",d1e="_labelNone_18e6r_24",p1e="_label_18e6r_8",m1e="_labelEnd_18e6r_35",g1e="_valueStart_18e6r_36",v1e="_labelTop_18e6r_42",y1e="_valueBottom_18e6r_57",b1e="_valueNone_18e6r_65",_1e="_valueLabel_18e6r_71",x1e="_clickable_18e6r_77",w1e="_outerBar_18e6r_97",S1e="_bar_18e6r_105",Mo={item:c1e,labelStart:u1e,valueEnd:f1e,labelBottom:h1e,labelNone:d1e,label:p1e,labelEnd:m1e,valueStart:g1e,labelTop:v1e,valueBottom:y1e,valueNone:b1e,valueLabel:_1e,clickable:x1e,outerBar:w1e,bar:S1e},E1e=({data:n,colorScheme:e="cybertron",itemClassName:t,labelClassName:i,outerBarClassName:r,valueClassName:s,labelFormat:o,barClassName:a,labelPosition:l="top",valuePosition:c="none",valueFormat:f,onItemClick:d,onItemMouseEnter:m,onItemMouseLeave:v})=>{const b=$.useCallback((x,w)=>{const _=jxe({data:n,colorScheme:e,point:x.data,index:w});return ne.jsx("div",{className:id(Mo.outerBar,r),children:ne.jsx(Js.div,{transition:Gxe,className:id(Mo.bar,a),initial:{width:"0%"},animate:{width:`${x.data}%`},style:{background:_},tabIndex:0,"aria-label":D9(x),role:"graphics-document"})})},[a,r,e,n]);return ne.jsx(ne.Fragment,{children:n.map((x,w)=>{const _=o?o(x.key,w):x.key,A=f?f(x.metadata.value,w):fc(x.metadata.value);return ne.jsxs("div",{role:"listitem",className:id(Mo.item,t,{[Mo.clickable]:d,[Mo.valueBottom]:c==="bottom",[Mo.valueStart]:c==="start",[Mo.valueEnd]:c==="end",[Mo.valueNone]:c==="none",[Mo.labelBottom]:l==="bottom",[Mo.labelTop]:l==="top",[Mo.labelStart]:l==="start",[Mo.labelEnd]:l==="end",[Mo.labelNone]:l==="none"}),onMouseEnter:()=>m?.(x),onMouseLeave:()=>v?.(x),onClick:()=>d?.(x),children:[ne.jsx("label",{title:_,className:id(Mo.label,i),children:_}),b(x,w),ne.jsx("label",{title:A,className:id(Mo.valueLabel,s),children:ne.jsx("small",{children:A})})]},x.key)})})},V4=({id:n,className:e,style:t,data:i=[],sortDirection:r="desc",series:s=ne.jsx(E1e,{}),type:o="count"})=>{const a=Q_(n),l=$.useMemo(()=>{const c=o==="count"?Cde(i,v=>v.data):100,f=c===0?[0]:[0,c],d=xT().domain(f).rangeRound([0,100]),m=i.map(v=>({...v,data:d(v.data),metadata:{value:v.data,percent:i.length*v.data/100}}));return r==="asc"?m.sort((v,b)=>v.data-b.data):r==="desc"&&m.sort((v,b)=>b.data-v.data),m},[i,r]);return ne.jsx(Js.section,{role:"list",variants:{initial:{transition:{staggerChildren:.05,staggerDirection:-1}},animate:{transition:{staggerChildren:.07,delayChildren:.2}}},id:a,className:e,style:t,children:ne.jsx(i8,{element:s,data:l})})};q0.cybertron[0];function M1e({graphData:n,onTypeSelect:e}){const t=$.useMemo(()=>{if(!n)return null;const i={};Object.entries(n.categories).forEach(([f,d])=>{i[d]||(i[d]={count:0,types:[]}),i[d].count++,i[d].types.push(f)});const r={Contains:0,Extends:0,Generic:0};n.edges.forEach(f=>{r[f.relationship]!==void 0&&r[f.relationship]++});const s=Object.entries(i).sort((f,d)=>d[1].count-f[1].count).slice(0,15),o={};n.edges.forEach(f=>{o[f.source]=(o[f.source]||0)+1,o[f.target]=(o[f.target]||0)+1});const a=Object.entries(o).sort((f,d)=>d[1]-f[1]).slice(0,10),l=Object.entries(r).map(([f,d])=>({key:f,data:d})),c=s.map(([f,d])=>({key:f,data:d.count,metadata:d.types}));return{totalTypes:n.nodes.length,totalEdges:n.edges.length,totalCategories:Object.keys(i).length,categoryStats:i,relationshipStats:r,relationshipChartData:l,topCategories:s,topCategoriesChartData:c,mostConnected:a}},[n]);return t?ne.jsxs("div",{className:"dashboard",children:[ne.jsxs("div",{className:"stat-cards",children:[ne.jsxs("div",{className:"stat-card",children:[ne.jsx("div",{className:"stat-value",style:{color:"#0176d3"},children:t.totalTypes.toLocaleString()}),ne.jsx("div",{className:"stat-label",children:"Total Types"})]}),ne.jsxs("div",{className:"stat-card",children:[ne.jsx("div",{className:"stat-value",style:{color:"#2e844a"},children:t.totalEdges.toLocaleString()}),ne.jsx("div",{className:"stat-label",children:"Dependencies"})]}),ne.jsxs("div",{className:"stat-card",children:[ne.jsx("div",{className:"stat-value",style:{color:"#7b1fa2"},children:t.totalCategories}),ne.jsx("div",{className:"stat-label",children:"Categories"})]})]}),ne.jsxs("div",{className:"card",children:[ne.jsx("h3",{children:"Relationship Distribution"}),ne.jsx("div",{style:{height:"200px",padding:"1rem 0"},children:ne.jsx(V4,{data:t.relationshipChartData})})]}),ne.jsxs("div",{className:"card",children:[ne.jsx("h3",{children:"Most Connected Types"}),ne.jsx("div",{className:"type-list",children:t.mostConnected.map(([i,r])=>ne.jsxs("div",{className:"type-list-item",onClick:()=>e(i),children:[ne.jsx("span",{className:"type-name",children:i}),ne.jsxs("span",{className:"connection-badge",children:[r," connections"]})]},i))})]}),ne.jsxs("div",{className:"card",children:[ne.jsx("h3",{children:"Top Categories by Type Count"}),ne.jsx("div",{style:{height:"400px",padding:"1rem 0"},children:ne.jsx(V4,{data:t.topCategoriesChartData,onItemClick:i=>{i.metadata&&i.metadata.length>0&&e(i.metadata[0])}})})]})]}):null}function T1e(){const[n,e]=$.useState(null),[t,i]=$.useState(null),[r,s]=$.useState(""),[o,a]=$.useState("dashboard"),[l,c]=$.useState({contains:!0,extends:!0,generic:!0}),[f,d]=$.useState(!0),[m,v]=$.useState(null);$.useEffect(()=>{fetch("/busbar-sf-types/type-graph.json").then(w=>w.json()).then(w=>{e(w),d(!1)}).catch(w=>{console.error("Error loading graph data:",w),v(w.message),d(!1)})},[]);const b=w=>{i(w),s(""),a("graph")},x=(w,_)=>{c(A=>({...A,[w]:_}))};return f?ne.jsx("div",{style:{padding:"2rem",textAlign:"center"},children:ne.jsx("h2",{children:"Loading Salesforce Types Explorer..."})}):m?ne.jsxs("div",{style:{padding:"2rem"},children:[ne.jsx("h2",{children:"Error Loading Data"}),ne.jsxs("p",{children:["Could not load the type graph data: ",m]})]}):ne.jsxs("div",{className:"app",children:[ne.jsx(mne,{viewMode:o,onViewModeChange:a}),ne.jsx("main",{className:"main-container",children:ne.jsxs("div",{className:"layout",children:[ne.jsx(gne,{graphData:n,searchQuery:r,setSearchQuery:s,filters:l,onFilterChange:x,onTypeSelect:b,viewMode:o}),ne.jsx("div",{className:"content",children:o==="dashboard"?ne.jsx(M1e,{graphData:n,onTypeSelect:b}):ne.jsxs(ne.Fragment,{children:[ne.jsx(B_e,{graphData:n,selectedType:t,filters:l,onTypeSelect:b}),ne.jsx(V_e,{graphData:n,selectedType:t,searchQuery:r,onTypeSelect:b})]})})]})}),ne.jsx("footer",{className:"footer",children:ne.jsx("div",{className:"container",children:ne.jsxs("p",{children:["Generated from"," ",ne.jsx("a",{href:"https://github.com/composable-delivery/busbar-sf-types",target:"_blank",rel:"noopener noreferrer",children:"busbar-sf-types"})," "," Data:"," ",ne.jsx("a",{href:"/busbar-sf-types/type-graph.json",target:"_blank",rel:"noopener noreferrer",children:"type-graph.json"})]})})})]})}R7.createRoot(document.getElementById("root")).render(ne.jsx(eo.StrictMode,{children:ne.jsx(ute,{theme:n8,children:ne.jsx(T1e,{})})}));
